// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

var t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m,g,y,w,S,v,b,M,x,T,G,_,C,I,P,A,E,R,F,O,D,k,L,N,B,W,j,V,H,U,z,J,$,q,X,Y,K,Z,Q,tt,st,it,et,nt,rt,ht,ot,at,lt,ut,ct,ft,dt,pt,mt,gt,yt,wt,St,vt,bt,Mt,xt,Tt,Gt,_t=(t=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(t,{get:(t,s)=>("undefined"!=typeof require?require:t)[s]}):t)(function(t){if("undefined"!=typeof require)return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});{let It=function(t){i=t},Pt=function(t){return t*r},At=function(t,i){return Math.abs(t-i)<=s*Math.max(1,Math.abs(t),Math.abs(i))},Et=function(){var t=new i(4);return i!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},Rt=function(t){var s=new i(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Ft=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Ot=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},Dt=function(t,s,e,n){var r=new i(4);return r[0]=t,r[1]=s,r[2]=e,r[3]=n,r},kt=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},Lt=function(t,s){if(t===s){var i=s[1];t[1]=s[2],t[2]=i}else t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3];return t},Nt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*r-n*e;return h?(h=1/h,t[0]=r*h,t[1]=-e*h,t[2]=-n*h,t[3]=i*h,t):null},Bt=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},Wt=function(t){return t[0]*t[3]-t[2]*t[1]},jt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*o+r*a,t[1]=n*o+h*a,t[2]=e*l+r*u,t[3]=n*l+h*u,t},Vt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+r*o,t[1]=n*a+h*o,t[2]=e*-o+r*a,t[3]=n*-o+h*a,t},Ht=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1];return t[0]=e*o,t[1]=n*o,t[2]=r*a,t[3]=h*a,t},Ut=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t},zt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Jt=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},$t=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},qt=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},Xt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Yt=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Kt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Zt=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=i[0],a=i[1],l=i[2],u=i[3];return Math.abs(e-o)<=s*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=s*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=s*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(h-u)<=s*Math.max(1,Math.abs(h),Math.abs(u))},Qt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},ts=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ss=function(){var t=new i(6);return i!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},is=function(t){var s=new i(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},ns=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},rs=function(t,s,e,n,r,h){var o=new i(6);return o[0]=t,o[1]=s,o[2]=e,o[3]=n,o[4]=r,o[5]=h,o},hs=function(t,s,i,e,n,r,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t},os=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=i*r-e*n;return a?(a=1/a,t[0]=r*a,t[1]=-e*a,t[2]=-n*a,t[3]=i*a,t[4]=(n*o-r*h)*a,t[5]=(e*h-i*o)*a,t):null},as=function(t){return t[0]*t[3]-t[1]*t[2]},ls=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return t[0]=e*l+r*u,t[1]=n*l+h*u,t[2]=e*c+r*f,t[3]=n*c+h*f,t[4]=e*d+r*p+o,t[5]=n*d+h*p+a,t},us=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=Math.sin(i),u=Math.cos(i);return t[0]=e*u+r*l,t[1]=n*u+h*l,t[2]=e*-l+r*u,t[3]=n*-l+h*u,t[4]=o,t[5]=a,t},cs=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e*l,t[1]=n*l,t[2]=r*u,t[3]=h*u,t[4]=o,t[5]=a,t},fs=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=e*l+r*u+o,t[5]=n*l+h*u+a,t},ds=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t[4]=0,t[5]=0,t},ps=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},ms=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},gs=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},ys=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},ws=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},Ss=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},vs=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},bs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},Ms=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},xs=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],l=i[0],u=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return Math.abs(e-l)<=s*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(n-u)<=s*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=s*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(h-f)<=s*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(o-d)<=s*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-p)<=s*Math.max(1,Math.abs(a),Math.abs(p))},Ts=function(){var t=new i(9);return i!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Gs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},_s=function(t){var s=new i(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Cs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Is=function(t,s,e,n,r,h,o,a,l){var u=new i(9);return u[0]=t,u[1]=s,u[2]=e,u[3]=n,u[4]=r,u[5]=h,u[6]=o,u[7]=a,u[8]=l,u},Ps=function(t,s,i,e,n,r,h,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},As=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Es=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[5];t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=n}else t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8];return t},Rs=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=u*h-o*l,f=-u*r+o*a,d=l*r-h*a,p=i*c+e*f+n*d;return p?(p=1/p,t[0]=c*p,t[1]=(-u*e+n*l)*p,t[2]=(o*e-n*h)*p,t[3]=f*p,t[4]=(u*i-n*a)*p,t[5]=(-o*i+n*r)*p,t[6]=d*p,t[7]=(-l*i+e*a)*p,t[8]=(h*i-e*r)*p,t):null},Fs=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8];return t[0]=h*u-o*l,t[1]=n*l-e*u,t[2]=e*o-n*h,t[3]=o*a-r*u,t[4]=i*u-n*a,t[5]=n*r-i*o,t[6]=r*l-h*a,t[7]=e*a-i*l,t[8]=i*h-e*r,t},Os=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8];return s*(l*r-h*a)+i*(-l*n+h*o)+e*(a*n-r*o)},Ds=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1],p=i[2],m=i[3],g=i[4],y=i[5],w=i[6],S=i[7],v=i[8];return t[0]=f*e+d*h+p*l,t[1]=f*n+d*o+p*u,t[2]=f*r+d*a+p*c,t[3]=m*e+g*h+y*l,t[4]=m*n+g*o+y*u,t[5]=m*r+g*a+y*c,t[6]=w*e+S*h+v*l,t[7]=w*n+S*o+v*u,t[8]=w*r+S*a+v*c,t},ks=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=f*e+d*h+l,t[7]=f*n+d*o+u,t[8]=f*r+d*a+c,t},Ls=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=Math.sin(i),d=Math.cos(i);return t[0]=d*e+f*h,t[1]=d*n+f*o,t[2]=d*r+f*a,t[3]=d*h-f*e,t[4]=d*o-f*n,t[5]=d*a-f*r,t[6]=l,t[7]=u,t[8]=c,t},Ns=function(t,s,i){var e=i[0],n=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=n*s[3],t[4]=n*s[4],t[5]=n*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Bs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Ws=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=-i,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},js=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Vs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Hs=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[3]=u-y,t[6]=f+g,t[1]=u+y,t[4]=1-l-p,t[7]=d-m,t[2]=f-g,t[5]=d+m,t[8]=1-l-c,t},Us=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,v=i*l-r*h,b=e*a-n*o,M=e*l-r*o,x=n*l-r*a,T=u*m-c*p,G=u*g-f*p,_=u*y-d*p,C=c*g-f*m,I=c*y-d*m,P=f*y-d*g,A=w*P-S*I+v*C+b*_-M*G+x*T;return A?(A=1/A,t[0]=(o*P-a*I+l*C)*A,t[1]=(a*_-h*P-l*G)*A,t[2]=(h*I-o*_+l*T)*A,t[3]=(n*I-e*P-r*C)*A,t[4]=(i*P-n*_+r*G)*A,t[5]=(e*_-i*I-r*T)*A,t[6]=(m*x-g*M+y*b)*A,t[7]=(g*v-p*x-y*S)*A,t[8]=(p*M-m*v+y*w)*A,t):null},zs=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Js=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},$s=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},qs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},Xs=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Ys=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Ks=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Zs=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},Qs=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=i[0],d=i[1],p=i[2],m=i[3],g=i[4],y=i[5],w=i[6],S=i[7],v=i[8];return Math.abs(e-f)<=s*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(n-d)<=s*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=s*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(h-m)<=s*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(o-g)<=s*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-y)<=s*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-w)<=s*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(u-S)<=s*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-v)<=s*Math.max(1,Math.abs(c),Math.abs(v))},ti=function(){var t=new i(16);return i!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},si=function(t){var s=new i(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},ii=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},ei=function(t,s,e,n,r,h,o,a,l,u,c,f,d,p,m,g){var y=new i(16);return y[0]=t,y[1]=s,y[2]=e,y[3]=n,y[4]=r,y[5]=h,y[6]=o,y[7]=a,y[8]=l,y[9]=u,y[10]=c,y[11]=f,y[12]=d,y[13]=p,y[14]=m,y[15]=g,y},ni=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},ri=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},hi=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[3],r=s[6],h=s[7],o=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t},oi=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,v=i*l-r*h,b=e*a-n*o,M=e*l-r*o,x=n*l-r*a,T=u*m-c*p,G=u*g-f*p,_=u*y-d*p,C=c*g-f*m,I=c*y-d*m,P=f*y-d*g,A=w*P-S*I+v*C+b*_-M*G+x*T;return A?(A=1/A,t[0]=(o*P-a*I+l*C)*A,t[1]=(n*I-e*P-r*C)*A,t[2]=(m*x-g*M+y*b)*A,t[3]=(f*M-c*x-d*b)*A,t[4]=(a*_-h*P-l*G)*A,t[5]=(i*P-n*_+r*G)*A,t[6]=(g*v-p*x-y*S)*A,t[7]=(u*x-f*v+d*S)*A,t[8]=(h*I-o*_+l*T)*A,t[9]=(e*_-i*I-r*T)*A,t[10]=(p*M-m*v+y*w)*A,t[11]=(c*v-u*M-d*w)*A,t[12]=(o*G-h*C-a*T)*A,t[13]=(i*C-e*G+n*T)*A,t[14]=(m*S-p*b-g*w)*A,t[15]=(u*b-c*S+f*w)*A,t):null},ai=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,v=i*l-r*h,b=e*a-n*o,M=e*l-r*o,x=n*l-r*a,T=u*m-c*p,G=u*g-f*p,_=u*y-d*p,C=c*g-f*m,I=c*y-d*m,P=f*y-d*g;return t[0]=o*P-a*I+l*C,t[1]=n*I-e*P-r*C,t[2]=m*x-g*M+y*b,t[3]=f*M-c*x-d*b,t[4]=a*_-h*P-l*G,t[5]=i*P-n*_+r*G,t[6]=g*v-p*x-y*S,t[7]=u*x-f*v+d*S,t[8]=h*I-o*_+l*T,t[9]=e*_-i*I-r*T,t[10]=p*M-m*v+y*w,t[11]=c*v-u*M-d*w,t[12]=o*G-h*C-a*T,t[13]=i*C-e*G+n*T,t[14]=m*S-p*b-g*w,t[15]=u*b-c*S+f*w,t},li=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],g=s*h-i*r,y=s*o-e*r,w=i*o-e*h,S=l*p-u*d,v=l*m-c*d,b=u*m-c*p;return a*(s*b-i*v+e*S)-n*(r*b-h*v+o*S)+t[15]*(l*w-u*y+c*g)-f*(d*w-p*y+m*g)},ui=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],w=s[15],S=i[0],v=i[1],b=i[2],M=i[3];return t[0]=S*e+v*o+b*c+M*m,t[1]=S*n+v*a+b*f+M*g,t[2]=S*r+v*l+b*d+M*y,t[3]=S*h+v*u+b*p+M*w,S=i[4],v=i[5],b=i[6],M=i[7],t[4]=S*e+v*o+b*c+M*m,t[5]=S*n+v*a+b*f+M*g,t[6]=S*r+v*l+b*d+M*y,t[7]=S*h+v*u+b*p+M*w,S=i[8],v=i[9],b=i[10],M=i[11],t[8]=S*e+v*o+b*c+M*m,t[9]=S*n+v*a+b*f+M*g,t[10]=S*r+v*l+b*d+M*y,t[11]=S*h+v*u+b*p+M*w,S=i[12],v=i[13],b=i[14],M=i[15],t[12]=S*e+v*o+b*c+M*m,t[13]=S*n+v*a+b*f+M*g,t[14]=S*r+v*l+b*d+M*y,t[15]=S*h+v*u+b*p+M*w,t},ci=function(t,s,i){var e,n,r,h,o,a,l,u,c,f,d,p,m=i[0],g=i[1],y=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*y+s[12],t[13]=s[1]*m+s[5]*g+s[9]*y+s[13],t[14]=s[2]*m+s[6]*g+s[10]*y+s[14],t[15]=s[3]*m+s[7]*g+s[11]*y+s[15]):(e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*y+s[12],t[13]=n*m+a*g+f*y+s[13],t[14]=r*m+l*g+d*y+s[14],t[15]=h*m+u*g+p*y+s[15]),t},fi=function(t,s,i){var e=i[0],n=i[1],r=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*r,t[9]=s[9]*r,t[10]=s[10]*r,t[11]=s[11]*r,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},di=function(t,i,e,n){var r,h,o,a,l,u,c,f,d,p,m,g,y,w,S,v,b,M,x,T,G,_,C,I,P=n[0],A=n[1],E=n[2],R=Math.hypot(P,A,E);return R<s?null:(P*=R=1/R,A*=R,E*=R,r=Math.sin(e),o=1-(h=Math.cos(e)),a=i[0],l=i[1],u=i[2],c=i[3],f=i[4],d=i[5],p=i[6],m=i[7],g=i[8],y=i[9],w=i[10],S=i[11],v=P*P*o+h,b=A*P*o+E*r,M=E*P*o-A*r,x=P*A*o-E*r,T=A*A*o+h,G=E*A*o+P*r,_=P*E*o+A*r,C=A*E*o-P*r,I=E*E*o+h,t[0]=a*v+f*b+g*M,t[1]=l*v+d*b+y*M,t[2]=u*v+p*b+w*M,t[3]=c*v+m*b+S*M,t[4]=a*x+f*T+g*G,t[5]=l*x+d*T+y*G,t[6]=u*x+p*T+w*G,t[7]=c*x+m*T+S*G,t[8]=a*_+f*C+g*I,t[9]=l*_+d*C+y*I,t[10]=u*_+p*C+w*I,t[11]=c*_+m*C+S*I,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t)},pi=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[4],h=s[5],o=s[6],a=s[7],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=r*n+l*e,t[5]=h*n+u*e,t[6]=o*n+c*e,t[7]=a*n+f*e,t[8]=l*n-r*e,t[9]=u*n-h*e,t[10]=c*n-o*e,t[11]=f*n-a*e,t},mi=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n-l*e,t[1]=h*n-u*e,t[2]=o*n-c*e,t[3]=a*n-f*e,t[8]=r*e+l*n,t[9]=h*e+u*n,t[10]=o*e+c*n,t[11]=a*e+f*n,t},gi=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[4],u=s[5],c=s[6],f=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n+l*e,t[1]=h*n+u*e,t[2]=o*n+c*e,t[3]=a*n+f*e,t[4]=l*n-r*e,t[5]=u*n-h*e,t[6]=c*n-o*e,t[7]=f*n-a*e,t},yi=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},wi=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Si=function(t,i,e){var n,r,h,o=e[0],a=e[1],l=e[2],u=Math.hypot(o,a,l);return u<s?null:(o*=u=1/u,a*=u,l*=u,n=Math.sin(i),h=1-(r=Math.cos(i)),t[0]=o*o*h+r,t[1]=a*o*h+l*n,t[2]=l*o*h-a*n,t[3]=0,t[4]=o*a*h-l*n,t[5]=a*a*h+r,t[6]=l*a*h+o*n,t[7]=0,t[8]=o*l*h+a*n,t[9]=a*l*h-o*n,t[10]=l*l*h+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},vi=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bi=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Mi=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},xi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=e+e,a=n+n,l=r+r,u=e*o,c=e*a,f=e*l,d=n*a,p=n*l,m=r*l,g=h*o,y=h*a,w=h*l;return t[0]=1-(d+m),t[1]=c+w,t[2]=f-y,t[3]=0,t[4]=c-w,t[5]=1-(u+m),t[6]=p+g,t[7]=0,t[8]=f+y,t[9]=p-g,t[10]=1-(u+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ti=function(t,s){var e=new i(3),n=-s[0],r=-s[1],h=-s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7],f=n*n+r*r+h*h+o*o;return f>0?(e[0]=2*(a*o+c*n+l*h-u*r)/f,e[1]=2*(l*o+c*r+u*n-a*h)/f,e[2]=2*(u*o+c*h+a*r-l*n)/f):(e[0]=2*(a*o+c*n+l*h-u*r),e[1]=2*(l*o+c*r+u*n-a*h),e[2]=2*(u*o+c*h+a*r-l*n)),xi(t,s,e),t},Gi=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},_i=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[4],h=s[5],o=s[6],a=s[8],l=s[9],u=s[10];return t[0]=Math.hypot(i,e,n),t[1]=Math.hypot(r,h,o),t[2]=Math.hypot(a,l,u),t},Ci=function(t,s){var e=new i(3);_i(e,s);var n=1/e[0],r=1/e[1],h=1/e[2],o=s[0]*n,a=s[1]*r,l=s[2]*h,u=s[4]*n,c=s[5]*r,f=s[6]*h,d=s[8]*n,p=s[9]*r,m=s[10]*h,g=o+c+m,y=0;return g>0?(y=2*Math.sqrt(g+1),t[3]=.25*y,t[0]=(f-p)/y,t[1]=(d-l)/y,t[2]=(a-u)/y):o>c&&o>m?(y=2*Math.sqrt(1+o-c-m),t[3]=(f-p)/y,t[0]=.25*y,t[1]=(a+u)/y,t[2]=(d+l)/y):c>m?(y=2*Math.sqrt(1+c-o-m),t[3]=(d-l)/y,t[0]=(a+u)/y,t[1]=.25*y,t[2]=(f+p)/y):(y=2*Math.sqrt(1+m-o-c),t[3]=(a-u)/y,t[0]=(d+l)/y,t[1]=(f+p)/y,t[2]=.25*y),t},Ii=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var n=e[0],r=e[1],h=e[2],o=e[4],a=e[5],l=e[6],u=e[8],c=e[9],f=e[10];i[0]=Math.hypot(n,r,h),i[1]=Math.hypot(o,a,l),i[2]=Math.hypot(u,c,f);var d=1/i[0],p=1/i[1],m=1/i[2],g=n*d,y=r*p,w=h*m,S=o*d,v=a*p,b=l*m,M=u*d,x=c*p,T=f*m,G=g+v+T,_=0;return G>0?(_=2*Math.sqrt(G+1),t[3]=.25*_,t[0]=(b-x)/_,t[1]=(M-w)/_,t[2]=(y-S)/_):g>v&&g>T?(_=2*Math.sqrt(1+g-v-T),t[3]=(b-x)/_,t[0]=.25*_,t[1]=(y+S)/_,t[2]=(M+w)/_):v>T?(_=2*Math.sqrt(1+v-g-T),t[3]=(M-w)/_,t[0]=(y+S)/_,t[1]=.25*_,t[2]=(b+x)/_):(_=2*Math.sqrt(1+T-g-v),t[3]=(y-S)/_,t[0]=(M+w)/_,t[1]=(b+x)/_,t[2]=.25*_),t},Pi=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3],a=n+n,l=r+r,u=h+h,c=n*a,f=n*l,d=n*u,p=r*l,m=r*u,g=h*u,y=o*a,w=o*l,S=o*u,v=e[0],b=e[1],M=e[2];return t[0]=(1-(p+g))*v,t[1]=(f+S)*v,t[2]=(d-w)*v,t[3]=0,t[4]=(f-S)*b,t[5]=(1-(c+g))*b,t[6]=(m+y)*b,t[7]=0,t[8]=(d+w)*M,t[9]=(m-y)*M,t[10]=(1-(c+p))*M,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ai=function(t,s,i,e,n){var r=s[0],h=s[1],o=s[2],a=s[3],l=r+r,u=h+h,c=o+o,f=r*l,d=r*u,p=r*c,m=h*u,g=h*c,y=o*c,w=a*l,S=a*u,v=a*c,b=e[0],M=e[1],x=e[2],T=n[0],G=n[1],_=n[2],C=(1-(m+y))*b,I=(d+v)*b,P=(p-S)*b,A=(d-v)*M,E=(1-(f+y))*M,R=(g+w)*M,F=(p+S)*x,O=(g-w)*x,D=(1-(f+m))*x;return t[0]=C,t[1]=I,t[2]=P,t[3]=0,t[4]=A,t[5]=E,t[6]=R,t[7]=0,t[8]=F,t[9]=O,t[10]=D,t[11]=0,t[12]=i[0]+T-(C*T+A*G+F*_),t[13]=i[1]+G-(I*T+E*G+O*_),t[14]=i[2]+_-(P*T+R*G+D*_),t[15]=1,t},Ei=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[1]=u+y,t[2]=f-g,t[3]=0,t[4]=u-y,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ri=function(t,s,i,e,n,r,h){var o=1/(i-s),a=1/(n-e),l=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(n+e)*a,t[10]=(h+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*l,t[15]=0,t},Fi=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=(n+e)*h,t[14]=2*n*e*h}else t[10]=-1,t[14]=-2*e;return t},Oi=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=n*h,t[14]=n*e*h}else t[10]=-1,t[14]=-e;return t},Di=function(t,s,i,e){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=Math.tan(s.rightDegrees*Math.PI/180),a=2/(h+o),l=2/(n+r);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(h-o)*a*.5,t[9]=(n-r)*l*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},ki=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=(h+r)*l,t[15]=1,t},Li=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=r*l,t[15]=1,t},Ni=function(t,i,e,n){var r,h,o,a,l,u,c,f,d,p,m=i[0],g=i[1],y=i[2],w=n[0],S=n[1],v=n[2],b=e[0],M=e[1],x=e[2];return Math.abs(m-b)<s&&Math.abs(g-M)<s&&Math.abs(y-x)<s?ri(t):(c=m-b,f=g-M,d=y-x,r=S*(d*=p=1/Math.hypot(c,f,d))-v*(f*=p),h=v*(c*=p)-w*d,o=w*f-S*c,(p=Math.hypot(r,h,o))?(r*=p=1/p,h*=p,o*=p):(r=0,h=0,o=0),a=f*o-d*h,l=d*r-c*o,u=c*h-f*r,(p=Math.hypot(a,l,u))?(a*=p=1/p,l*=p,u*=p):(a=0,l=0,u=0),t[0]=r,t[1]=a,t[2]=c,t[3]=0,t[4]=h,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=u,t[10]=d,t[11]=0,t[12]=-(r*m+h*g+o*y),t[13]=-(a*m+l*g+u*y),t[14]=-(c*m+f*g+d*y),t[15]=1,t)},Bi=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=e[0],a=e[1],l=e[2],u=n-i[0],c=r-i[1],f=h-i[2],d=u*u+c*c+f*f;d>0&&(u*=d=1/Math.sqrt(d),c*=d,f*=d);var p=a*f-l*c,m=l*u-o*f,g=o*c-a*u;return(d=p*p+m*m+g*g)>0&&(p*=d=1/Math.sqrt(d),m*=d,g*=d),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=c*g-f*m,t[5]=f*p-u*g,t[6]=u*m-c*p,t[7]=0,t[8]=u,t[9]=c,t[10]=f,t[11]=0,t[12]=n,t[13]=r,t[14]=h,t[15]=1,t},Wi=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},ji=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Vi=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Hi=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Ui=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},zi=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Ji=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},$i=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],p=t[11],m=t[12],g=t[13],y=t[14],w=t[15],S=i[0],v=i[1],b=i[2],M=i[3],x=i[4],T=i[5],G=i[6],_=i[7],C=i[8],I=i[9],P=i[10],A=i[11],E=i[12],R=i[13],F=i[14],O=i[15];return Math.abs(e-S)<=s*Math.max(1,Math.abs(e),Math.abs(S))&&Math.abs(n-v)<=s*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-b)<=s*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(h-M)<=s*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(o-x)<=s*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-T)<=s*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(l-G)<=s*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(u-_)<=s*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(c-C)<=s*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(f-I)<=s*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-P)<=s*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(p-A)<=s*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(m-E)<=s*Math.max(1,Math.abs(m),Math.abs(E))&&Math.abs(g-R)<=s*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(y-F)<=s*Math.max(1,Math.abs(y),Math.abs(F))&&Math.abs(w-O)<=s*Math.max(1,Math.abs(w),Math.abs(O))},qi=function(){var t=new i(3);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},Xi=function(t){var s=new i(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Yi=function(t){var s=t[0],i=t[1],e=t[2];return Math.hypot(s,i,e)},Ki=function(t,s,e){var n=new i(3);return n[0]=t,n[1]=s,n[2]=e,n},Zi=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Qi=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},te=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},se=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},ie=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},ee=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},ne=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},re=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},he=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},oe=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},ae=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},le=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},ue=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ce=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return Math.hypot(i,e,n)},fe=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return i*i+e*e+n*n},de=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e},pe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},me=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},ge=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=s[0]*r,t[1]=s[1]*r,t[2]=s[2]*r,t},ye=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},we=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2];return t[0]=n*a-r*o,t[1]=r*h-e*a,t[2]=e*o-n*h,t},Se=function(t,s,i,e){var n=s[0],r=s[1],h=s[2];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t},ve=function(t,s,i,e){var n=Math.acos(Math.min(Math.max(ye(s,i),-1),1)),r=Math.sin(n),h=Math.sin((1-e)*n)/r,o=Math.sin(e*n)/r;return t[0]=h*s[0]+o*i[0],t[1]=h*s[1]+o*i[1],t[2]=h*s[2]+o*i[2],t},be=function(t,s,i,e,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,l=h*(r-1),u=h*(3-2*r);return t[0]=s[0]*o+i[0]*a+e[0]*l+n[0]*u,t[1]=s[1]*o+i[1]*a+e[1]*l+n[1]*u,t[2]=s[2]*o+i[2]*a+e[2]*l+n[2]*u,t},Me=function(t,s,i,e,n,r){var h=1-r,o=h*h,a=r*r,l=o*h,u=3*r*o,c=3*a*h,f=a*r;return t[0]=s[0]*l+i[0]*u+e[0]*c+n[0]*f,t[1]=s[1]*l+i[1]*u+e[1]*c+n[1]*f,t[2]=s[2]*l+i[2]*u+e[2]*c+n[2]*f,t},xe=function(t,s){s=s||1;var i=2*e()*Math.PI,n=2*e()-1,r=Math.sqrt(1-n*n)*s;return t[0]=Math.cos(i)*r,t[1]=Math.sin(i)*r,t[2]=n*s,t},Te=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[3]*e+i[7]*n+i[11]*r+i[15];return h=h||1,t[0]=(i[0]*e+i[4]*n+i[8]*r+i[12])/h,t[1]=(i[1]*e+i[5]*n+i[9]*r+i[13])/h,t[2]=(i[2]*e+i[6]*n+i[10]*r+i[14])/h,t},Ge=function(t,s,i){var e=s[0],n=s[1],r=s[2];return t[0]=e*i[0]+n*i[3]+r*i[6],t[1]=e*i[1]+n*i[4]+r*i[7],t[2]=e*i[2]+n*i[5]+r*i[8],t},_e=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=n*l-r*a,c=r*o-e*l,f=e*a-n*o,d=n*f-r*c,p=r*u-e*f,m=e*c-n*u,g=2*h;return u*=g,c*=g,f*=g,d*=2,p*=2,m*=2,t[0]=o+u+d,t[1]=a+c+p,t[2]=l+f+m,t},Ce=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(e)-n[2]*Math.sin(e),r[2]=n[1]*Math.sin(e)+n[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Ie=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[2]*Math.sin(e)+n[0]*Math.cos(e),r[1]=n[1],r[2]=n[2]*Math.cos(e)-n[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Pe=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0]*Math.cos(e)-n[1]*Math.sin(e),r[1]=n[0]*Math.sin(e)+n[1]*Math.cos(e),r[2]=n[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Ae=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2],a=Math.sqrt((i*i+e*e+n*n)*(r*r+h*h+o*o)),l=a&&ye(t,s)/a;return Math.acos(Math.min(Math.max(l,-1),1))},Ee=function(t){return t[0]=0,t[1]=0,t[2]=0,t},Re=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Fe=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},Oe=function(t,i){var e=t[0],n=t[1],r=t[2],h=i[0],o=i[1],a=i[2];return Math.abs(e-h)<=s*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=s*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=s*Math.max(1,Math.abs(r),Math.abs(a))},De=function(){var t=new i(4);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},ke=function(t){var s=new i(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Le=function(t,s,e,n){var r=new i(4);return r[0]=t,r[1]=s,r[2]=e,r[3]=n,r},Ne=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Be=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},We=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},je=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ve=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},He=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ue=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},ze=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Je=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},$e=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},qe=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Xe=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Ye=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Ke=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return Math.hypot(i,e,n,r)},Ze=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return i*i+e*e+n*n+r*r},Qe=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return Math.hypot(s,i,e,n)},tn=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return s*s+i*i+e*e+n*n},sn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},en=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},nn=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r;return h>0&&(h=1/Math.sqrt(h)),t[0]=i*h,t[1]=e*h,t[2]=n*h,t[3]=r*h,t},rn=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},hn=function(t,s,i,e){var n=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],h=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],l=i[2]*e[3]-i[3]*e[2],u=s[0],c=s[1],f=s[2],d=s[3];return t[0]=c*l-f*a+d*o,t[1]=-u*l+f*h-d*r,t[2]=u*a-c*h+d*n,t[3]=-u*o+c*r-f*n,t},on=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t[3]=o+e*(i[3]-o),t},an=function(t,s){var i,n,r,h,o,a;s=s||1;do{o=(i=2*e()-1)*i+(n=2*e()-1)*n}while(o>=1);do{a=(r=2*e()-1)*r+(h=2*e()-1)*h}while(a>=1);var l=Math.sqrt((1-o)/a);return t[0]=s*i,t[1]=s*n,t[2]=s*r*l,t[3]=s*h*l,t},ln=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3];return t[0]=i[0]*e+i[4]*n+i[8]*r+i[12]*h,t[1]=i[1]*e+i[5]*n+i[9]*r+i[13]*h,t[2]=i[2]*e+i[6]*n+i[10]*r+i[14]*h,t[3]=i[3]*e+i[7]*n+i[11]*r+i[15]*h,t},un=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2],l=i[3],u=l*e+o*r-a*n,c=l*n+a*e-h*r,f=l*r+h*n-o*e,d=-h*e-o*n-a*r;return t[0]=u*l+d*-h+c*-a-f*-o,t[1]=c*l+d*-o+f*-h-u*-a,t[2]=f*l+d*-a+u*-o-c*-h,t[3]=s[3],t},cn=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},fn=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},dn=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},pn=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=i[0],a=i[1],l=i[2],u=i[3];return Math.abs(e-o)<=s*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=s*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=s*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(h-u)<=s*Math.max(1,Math.abs(h),Math.abs(u))},mn=function(){var t=new i(4);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},gn=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},yn=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},wn=function(t,i){var e=2*Math.acos(i[3]),n=Math.sin(e/2);return n>s?(t[0]=i[0]/n,t[1]=i[1]/n,t[2]=i[2]/n):(t[0]=1,t[1]=0,t[2]=0),e},Sn=function(t,s){var i=J(t,s);return Math.acos(2*i*i-1)},vn=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,t},bn=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+h*o,t[1]=n*a+r*o,t[2]=r*a-n*o,t[3]=h*a-e*o,t},Mn=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a-r*o,t[1]=n*a+h*o,t[2]=r*a+e*o,t[3]=h*a-n*o,t},xn=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+n*o,t[1]=n*a-e*o,t[2]=r*a+h*o,t[3]=h*a-r*o,t},Tn=function(t,s){var i=s[0],e=s[1],n=s[2];return t[0]=i,t[1]=e,t[2]=n,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-n*n)),t},Gn=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=Math.exp(r),a=h>0?o*Math.sin(h)/h:0;return t[0]=i*a,t[1]=e*a,t[2]=n*a,t[3]=o*Math.cos(h),t},_n=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=h>0?Math.atan2(h,r)/h:0;return t[0]=i*o,t[1]=e*o,t[2]=n*o,t[3]=.5*Math.log(i*i+e*e+n*n+r*r),t},Cn=function(t,s,i){return _n(t,s),z(t,t,i),Gn(t,t),t},In=function(t,i,e,n){var r,h,o,a,l,u=i[0],c=i[1],f=i[2],d=i[3],p=e[0],m=e[1],g=e[2],y=e[3];return(h=u*p+c*m+f*g+d*y)<0&&(h=-h,p=-p,m=-m,g=-g,y=-y),1-h>s?(r=Math.acos(h),o=Math.sin(r),a=Math.sin((1-n)*r)/o,l=Math.sin(n*r)/o):(a=1-n,l=n),t[0]=a*u+l*p,t[1]=a*c+l*m,t[2]=a*f+l*g,t[3]=a*d+l*y,t},Pn=function(t){var s=e(),i=e(),n=e(),r=Math.sqrt(1-s),h=Math.sqrt(s);return t[0]=r*Math.sin(2*Math.PI*i),t[1]=r*Math.cos(2*Math.PI*i),t[2]=h*Math.sin(2*Math.PI*n),t[3]=h*Math.cos(2*Math.PI*n),t},An=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r,o=h?1/h:0;return t[0]=-i*o,t[1]=-e*o,t[2]=-n*o,t[3]=r*o,t},En=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},Rn=function(t,s){var i,e=s[0]+s[4]+s[8];if(e>0)i=Math.sqrt(e+1),t[3]=.5*i,i=.5/i,t[0]=(s[5]-s[7])*i,t[1]=(s[6]-s[2])*i,t[2]=(s[1]-s[3])*i;else{var n=0;s[4]>s[0]&&(n=1),s[8]>s[3*n+n]&&(n=2);var r=(n+1)%3,h=(n+2)%3;i=Math.sqrt(s[3*n+n]-s[3*r+r]-s[3*h+h]+1),t[n]=.5*i,i=.5/i,t[3]=(s[3*r+h]-s[3*h+r])*i,t[r]=(s[3*r+n]+s[3*n+r])*i,t[h]=(s[3*h+n]+s[3*n+h])*i}return t},Fn=function(t,s,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n,h=Math.PI/360;s*=h,e*=h,i*=h;var o=Math.sin(s),a=Math.cos(s),l=Math.sin(i),u=Math.cos(i),c=Math.sin(e),f=Math.cos(e);switch(r){case"xyz":t[0]=o*u*f+a*l*c,t[1]=a*l*f-o*u*c,t[2]=a*u*c+o*l*f,t[3]=a*u*f-o*l*c;break;case"xzy":t[0]=o*u*f-a*l*c,t[1]=a*l*f-o*u*c,t[2]=a*u*c+o*l*f,t[3]=a*u*f+o*l*c;break;case"yxz":t[0]=o*u*f+a*l*c,t[1]=a*l*f-o*u*c,t[2]=a*u*c-o*l*f,t[3]=a*u*f+o*l*c;break;case"yzx":t[0]=o*u*f+a*l*c,t[1]=a*l*f+o*u*c,t[2]=a*u*c-o*l*f,t[3]=a*u*f-o*l*c;break;case"zxy":t[0]=o*u*f-a*l*c,t[1]=a*l*f+o*u*c,t[2]=a*u*c+o*l*f,t[3]=a*u*f-o*l*c;break;case"zyx":t[0]=o*u*f-a*l*c,t[1]=a*l*f+o*u*c,t[2]=a*u*c-o*l*f,t[3]=a*u*f+o*l*c;break;default:throw new Error("Unknown angle order "+r)}return t},On=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Dn=function(t,i){return Math.abs(rn(t,i))>=1-s},kn=function(){var t=new i(8);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},Ln=function(t){var s=new i(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},Nn=function(t,s,e,n,r,h,o,a){var l=new i(8);return l[0]=t,l[1]=s,l[2]=e,l[3]=n,l[4]=r,l[5]=h,l[6]=o,l[7]=a,l},Bn=function(t,s,e,n,r,h,o){var a=new i(8);a[0]=t,a[1]=s,a[2]=e,a[3]=n;var l=.5*r,u=.5*h,c=.5*o;return a[4]=l*n+u*e-c*s,a[5]=u*n+c*t-l*e,a[6]=c*n+l*s-u*t,a[7]=-l*t-u*s-c*e,a},Wn=function(t,s,i){var e=.5*i[0],n=.5*i[1],r=.5*i[2],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h,t[1]=o,t[2]=a,t[3]=l,t[4]=e*l+n*a-r*o,t[5]=n*l+r*h-e*a,t[6]=r*l+e*o-n*h,t[7]=-e*h-n*o-r*a,t},jn=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},Vn=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Hn=function(t,s){var e=mn();Ci(e,s);var n=new i(3);return Gi(n,s),Wn(t,e,n),t},Un=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},zn=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Jn=function(t,s,i,e,n,r,h,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},$n=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},qn=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Xn=function(t,s){var i=s[4],e=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],l=s[3];return t[0]=2*(i*l+r*h+e*a-n*o),t[1]=2*(e*l+r*o+n*h-i*a),t[2]=2*(n*l+r*a+i*o-e*h),t},Yn=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=.5*i[0],a=.5*i[1],l=.5*i[2],u=s[4],c=s[5],f=s[6],d=s[7];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*l-r*a+u,t[5]=h*a+r*o-e*l+c,t[6]=h*l+e*a-n*o+f,t[7]=-e*o-n*a-r*l+d,t},Kn=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return bn(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Zn=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return Mn(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Qn=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return xn(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},tr=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=s[3];return t[0]=o*h+u*e+a*r-l*n,t[1]=a*h+u*n+l*e-o*r,t[2]=l*h+u*r+o*n-a*e,t[3]=u*h-o*e-a*n-l*r,o=s[4],a=s[5],l=s[6],u=s[7],t[4]=o*h+u*e+a*r-l*n,t[5]=a*h+u*n+l*e-o*r,t[6]=l*h+u*r+o*n-a*e,t[7]=u*h-o*e-a*n-l*r,t},sr=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,o=i[4],a=i[5],l=i[6],u=i[7],t[4]=e*u+h*o+n*l-r*a,t[5]=n*u+h*a+r*o-e*l,t[6]=r*u+h*l+e*a-n*o,t[7]=h*u-e*o-n*a-r*l,t},ir=function(t,i,e,n){if(Math.abs(n)<s)return Un(t,i);var r=Math.hypot(e[0],e[1],e[2]);n*=.5;var h=Math.sin(n),o=h*e[0]/r,a=h*e[1]/r,l=h*e[2]/r,u=Math.cos(n),c=i[0],f=i[1],d=i[2],p=i[3];t[0]=c*u+p*o+f*l-d*a,t[1]=f*u+p*a+d*o-c*l,t[2]=d*u+p*l+c*a-f*o,t[3]=p*u-c*o-f*a-d*l;var m=i[4],g=i[5],y=i[6],w=i[7];return t[4]=m*u+w*o+g*l-y*a,t[5]=g*u+w*a+y*o-m*l,t[6]=y*u+w*l+m*a-g*o,t[7]=w*u-m*o-g*a-y*l,t},er=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},nr=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],p=s[7],m=i[0],g=i[1],y=i[2],w=i[3];return t[0]=e*w+h*m+n*y-r*g,t[1]=n*w+h*g+r*m-e*y,t[2]=r*w+h*y+e*g-n*m,t[3]=h*w-e*m-n*g-r*y,t[4]=e*u+h*o+n*l-r*a+c*w+p*m+f*y-d*g,t[5]=n*u+h*a+r*o-e*l+f*w+p*g+d*m-c*y,t[6]=r*u+h*l+e*a-n*o+d*w+p*y+c*g-f*m,t[7]=h*u-e*o-n*a-r*l+p*w-c*m-f*g-d*y,t},rr=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},hr=function(t,s,i,e){var n=1-e;return ot(s,i)<0&&(e=-e),t[0]=s[0]*n+i[0]*e,t[1]=s[1]*n+i[1]*e,t[2]=s[2]*n+i[2]*e,t[3]=s[3]*n+i[3]*e,t[4]=s[4]*n+i[4]*e,t[5]=s[5]*n+i[5]*e,t[6]=s[6]*n+i[6]*e,t[7]=s[7]*n+i[7]*e,t},or=function(t,s){var i=ut(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},ar=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},lr=function(t,s){var i=ut(s);if(i>0){i=Math.sqrt(i);var e=s[0]/i,n=s[1]/i,r=s[2]/i,h=s[3]/i,o=s[4],a=s[5],l=s[6],u=s[7],c=e*o+n*a+r*l+h*u;t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=(o-e*c)/i,t[5]=(a-n*c)/i,t[6]=(l-r*c)/i,t[7]=(u-h*c)/i}return t},ur=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},cr=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},fr=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],w=i[7];return Math.abs(e-c)<=s*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(n-f)<=s*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=s*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=s*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=s*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=s*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=s*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(u-w)<=s*Math.max(1,Math.abs(u),Math.abs(w))},dr=function(){var t=new i(2);return i!=Float32Array&&(t[0]=0,t[1]=0),t},pr=function(t){var s=new i(2);return s[0]=t[0],s[1]=t[1],s},mr=function(t,s){var e=new i(2);return e[0]=t,e[1]=s,e},gr=function(t,s){return t[0]=s[0],t[1]=s[1],t},yr=function(t,s,i){return t[0]=s,t[1]=i,t},wr=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},Sr=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},vr=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},br=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},Mr=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},xr=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},Tr=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Gr=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},_r=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Cr=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},Ir=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},Pr=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return Math.hypot(i,e)},Ar=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},Er=function(t){var s=t[0],i=t[1];return Math.hypot(s,i)},Rr=function(t){var s=t[0],i=t[1];return s*s+i*i},Fr=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},Or=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},Dr=function(t,s){var i=s[0],e=s[1],n=i*i+e*e;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t},kr=function(t,s){return t[0]*s[0]+t[1]*s[1]},Lr=function(t,s,i){var e=s[0]*i[1]-s[1]*i[0];return t[0]=t[1]=0,t[2]=e,t},Nr=function(t,s,i,e){var n=s[0],r=s[1];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t},Br=function(t,s){s=s||1;var i=2*e()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},Wr=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n,t[1]=i[1]*e+i[3]*n,t},jr=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t},Vr=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[3]*n+i[6],t[1]=i[1]*e+i[4]*n+i[7],t},Hr=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[4]*n+i[12],t[1]=i[1]*e+i[5]*n+i[13],t},Ur=function(t,s,i,e){var n=s[0]-i[0],r=s[1]-i[1],h=Math.sin(e),o=Math.cos(e);return t[0]=n*o-r*h+i[0],t[1]=n*h+r*o+i[1],t},zr=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1],h=Math.sqrt((i*i+e*e)*(n*n+r*r)),o=h&&(i*n+e*r)/h;return Math.acos(Math.min(Math.max(o,-1),1))},Jr=function(t){return t[0]=0,t[1]=0,t},$r=function(t){return"vec2("+t[0]+", "+t[1]+")"},qr=function(t,s){return t[0]===s[0]&&t[1]===s[1]},Xr=function(t,i){var e=t[0],n=t[1],r=i[0],h=i[1];return Math.abs(e-r)<=s*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(n-h)<=s*Math.max(1,Math.abs(n),Math.abs(h))};s=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,e=Math.random,n="zyx",r=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),h={__proto__:null,EPSILON:s,get i(){return i},h:e,o:n,l:It,u:Pt,equals:At},o=jt,a=Yt,l=Object.freeze({__proto__:null,create:Et,clone:Rt,m:Ft,identity:Ot,S:Dt,set:kt,v:Lt,M:Nt,T:Bt,G:Wt,multiply:jt,rotate:Vt,scale:Ht,_:Ut,C:zt,I:Jt,P:$t,A:qt,add:Xt,R:Yt,F:Kt,equals:Zt,O:Qt,D:ts,mul:o,sub:a}),u=ls,c=Ss,f=Object.freeze({__proto__:null,create:ss,clone:is,m:es,identity:ns,S:rs,set:hs,M:os,G:as,multiply:ls,rotate:us,scale:cs,translate:fs,_:ds,C:ps,L:ms,I:gs,P:ys,add:ws,R:Ss,O:vs,D:bs,F:Ms,equals:xs,mul:u,sub:c}),d=Ds,p=Xs,m=Object.freeze({__proto__:null,create:Ts,N:Gs,clone:_s,m:Cs,S:Is,set:Ps,identity:As,v:Es,M:Rs,T:Fs,G:Os,multiply:Ds,translate:ks,rotate:Ls,scale:Ns,L:Bs,_:Ws,C:js,B:Vs,W:Hs,j:Us,V:zs,I:Js,P:$s,add:qs,R:Xs,O:Ys,D:Ks,F:Zs,equals:Qs,mul:d,sub:p}),g=Fi,y=ki,w=ui,S=Hi,v=Object.freeze({__proto__:null,create:ti,clone:si,m:ii,S:ei,set:ni,identity:ri,v:hi,M:oi,T:ai,G:li,multiply:ui,translate:ci,scale:fi,rotate:di,H:pi,U:mi,J:gi,L:yi,C:wi,_:Si,$:vi,X:bi,Y:Mi,K:xi,Z:Ti,tt:Gi,st:_i,it:Ci,et:Ii,nt:Pi,rt:Ai,W:Ei,ht:Ri,ot:Fi,perspective:g,lt:Oi,ut:Di,ct:ki,ft:y,dt:Li,gt:Ni,yt:Bi,I:Wi,P:ji,add:Vi,R:Hi,O:Ui,D:zi,F:Ji,equals:$i,mul:w,sub:S}),b=se,M=ie,x=ee,T=ce,G=fe,_=Yi,C=de,t=qi(),I=function(s,i,e,n,r,h){var o,a;for(i||(i=3),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2];return s},P=Object.freeze({__proto__:null,create:qi,clone:Xi,length:Yi,S:Ki,m:Zi,set:Qi,add:te,R:se,multiply:ie,wt:ee,ceil:ne,floor:re,min:he,max:oe,round:ae,scale:le,St:ue,vt:ce,bt:fe,Mt:de,xt:pe,inverse:me,normalize:ge,Tt:ye,Gt:we,_t:Se,Ct:ve,It:be,Pt:Me,random:xe,At:Te,Et:Ge,Rt:_e,H:Ce,U:Ie,J:Pe,angle:Ae,Ft:Ee,I:Re,F:Fe,equals:Oe,sub:b,mul:M,div:x,Ot:T,Dt:G,kt:_,Lt:C,forEach:I}),A=je,E=Ve,R=He,F=Ke,O=Ze,D=Qe,k=tn,L=function(){var t=De();return function(s,i,e,n,r,h){var o,a;for(i||(i=4),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],t[3]=s[o+3],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2],s[o+3]=t[3];return s}}(),N=Object.freeze({__proto__:null,create:De,clone:ke,S:Le,m:Ne,set:Be,add:We,R:je,multiply:Ve,wt:He,ceil:Ue,floor:ze,min:Je,max:$e,round:qe,scale:Xe,St:Ye,vt:Ke,bt:Ze,length:Qe,Mt:tn,xt:sn,inverse:en,normalize:nn,Tt:rn,Gt:hn,_t:on,random:an,At:ln,Rt:un,Ft:cn,I:fn,F:dn,equals:pn,sub:A,mul:E,div:R,Ot:F,Dt:O,kt:D,Lt:k,forEach:L}),B=ke,W=Le,j=Ne,V=Be,H=We,U=vn,z=Xe,J=rn,$=on,X=q=Qe,K=Y=tn,Z=nn,Q=dn,tt=function(){var t=qi(),s=Ki(1,0,0),i=Ki(0,1,0);return function(e,n,r){var h=ye(n,r);return h<-.999999?(we(t,s,n),_(t)<1e-6&&we(t,i,n),ge(t,t),yn(e,t,Math.PI),e):h>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(we(t,n,r),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+h,Z(e,e))}}(),st=function(){var t=mn(),s=mn();return function(i,e,n,r,h,o){return In(t,e,h,o),In(s,n,r,o),In(i,t,s,2*o*(1-o)),i}}(),it=function(){var t=Ts();return function(s,i,e,n){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],Z(s,Rn(s,t))}}(),et=Object.freeze({__proto__:null,create:mn,identity:gn,Nt:yn,Bt:wn,Wt:Sn,multiply:vn,H:bn,U:Mn,J:xn,jt:Tn,exp:Gn,Vt:_n,pow:Cn,Ct:In,random:Pn,M:An,Ht:En,Ut:Rn,zt:Fn,I:On,clone:B,S:W,m:j,set:V,add:H,mul:U,scale:z,Tt:J,_t:$,length:q,kt:X,Mt:Y,Lt:K,normalize:Z,F:Q,equals:Dn,Jt:tt,$t:st,qt:it}),nt=j,rt=j,ht=nr,ot=J,lt=at=q,ct=ut=Y,ft=Object.freeze({__proto__:null,create:kn,clone:Ln,S:Nn,Xt:Bn,K:Wn,L:jn,_:Vn,N:Hn,m:Un,identity:zn,set:Jn,Yt:nt,Kt:$n,Zt:rt,Qt:qn,tt:Xn,translate:Yn,H:Kn,U:Zn,J:Qn,ts:tr,ss:sr,es:ir,add:er,multiply:nr,mul:ht,scale:rr,Tt:ot,_t:hr,M:or,Ht:ar,length:at,kt:lt,Mt:ut,Lt:ct,normalize:lr,I:ur,F:cr,equals:fr}),dt=Er,pt=Sr,mt=vr,gt=br,yt=Pr,wt=Ar,St=Rr,vt=function(){var t=dr();return function(s,i,e,n,r,h){var o,a;for(i||(i=2),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],r(t,t,h),s[o]=t[0],s[o+1]=t[1];return s}}(),bt=Object.freeze({__proto__:null,create:dr,clone:pr,S:mr,m:gr,set:yr,add:wr,R:Sr,multiply:vr,wt:br,ceil:Mr,floor:xr,min:Tr,max:Gr,round:_r,scale:Cr,St:Ir,vt:Pr,bt:Ar,length:Er,Mt:Rr,xt:Fr,inverse:Or,normalize:Dr,Tt:kr,Gt:Lr,_t:Nr,random:Br,ns:Wr,rs:jr,Et:Vr,At:Hr,rotate:Ur,angle:zr,Ft:Jr,I:$r,F:qr,equals:Xr,kt:dt,sub:pt,mul:mt,div:gt,Ot:yt,Dt:wt,Lt:St,forEach:vt}),globalThis.hs=h,globalThis.hs.ls=l,globalThis.hs.us=f,globalThis.hs.cs=m,globalThis.hs.fs=v,globalThis.hs.ds=et,globalThis.hs.ps=ft,globalThis.hs.gs=bt,globalThis.hs.ys=P,globalThis.hs.ws=N}{let Yr=function(t,s,i){i=i||0;var e,n,r,h,o,a,l,u=[0,0];return e=t[1][1]-t[0][1],n=t[0][0]-t[1][0],r=e*t[0][0]+n*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],a=h*s[0][0]+o*s[0][1],Mh(l=e*o-h*n,0,i)||(u[0]=(o*r-n*a)/l,u[1]=(e*a-h*r)/l),u},Kr=function(t,s,i,e){var n=s[0]-t[0],r=s[1]-t[1],h=e[0]-i[0],o=e[1]-i[1];if(h*r-o*n===0)return!1;var a=(n*(i[1]-t[1])+r*(t[0]-i[0]))/(h*r-o*n),l=(h*(t[1]-i[1])+o*(i[0]-t[0]))/(o*n-h*r);return a>=0&&a<=1&&l>=0&&l<=1},Zr=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},Qr=function(t,s,i){return Zr(t,s,i)>0},th=function(t,s,i){return Zr(t,s,i)>=0},sh=function(t,s,i){return Zr(t,s,i)<0},ih=function(t,s,i){return Zr(t,s,i)<=0},eh=function(t,s,i,e){if(e){var n=Mt,r=xt;n[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=i[0]-s[0],r[1]=i[1]-s[1];var h=n[0]*r[0]+n[1]*r[1],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return Math.acos(h/(o*a))<e}return 0===Zr(t,s,i)},nh=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},rh=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},hh=function(t){t.length=0},oh=function(t,s,i,e){for(var n=i;n<e;n++)t.push(s[n])},ah=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!Qr(rh(t,s-1),rh(t,s),rh(t,s+1))&&(lh(t),!0)},lh=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},uh=function(t,s){return sh(rh(t,s-1),rh(t,s),rh(t,s+1))},ch=function(t,s,i){var e,n,r=Tt,h=Gt;if(th(rh(t,s+1),rh(t,s),rh(t,i))&&ih(rh(t,s-1),rh(t,s),rh(t,i)))return!1;n=nh(rh(t,s),rh(t,i));for(var o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&th(rh(t,s),rh(t,i),rh(t,o+1))&&ih(rh(t,s),rh(t,i),rh(t,o))&&(r[0]=rh(t,s),r[1]=rh(t,i),h[0]=rh(t,o),h[1]=rh(t,o+1),e=Yr(r,h),nh(rh(t,s),e)<n))return!1;return!0},fh=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&Kr(rh(t,s),rh(t,i),rh(t,e),rh(t,e+1)))return!1;return!0},dh=function(t,s,i,e){var n=e||[];if(hh(n),s<i)for(var r=s;r<=i;r++)n.push(t[r]);else{for(r=0;r<=i;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},ph=function(t){for(var s=[],i=[],e=[],n=[],r=Number.MAX_VALUE,h=0;h<t.length;++h)if(uh(t,h))for(var o=0;o<t.length;++o)if(ch(t,h,o)){i=ph(dh(t,h,o,n)),e=ph(dh(t,o,h,n));for(var a=0;a<e.length;a++)i.push(e[a]);i.length<r&&(s=i,r=i.length,s.push([rh(t,h),rh(t,o)]))}return s},mh=function(t){var s=ph(t);return s.length>0?gh(t,s):[t]},gh=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var n=s[e],r=0;r<i.length;r++){var h=gh(i[r],n);if(h){i.splice(r,1),i.push(h[0],h[1]);break}}return i}return n=s,e=t.indexOf(n[0]),r=t.indexOf(n[1]),-1!==e&&-1!==r&&[dh(t,e,r),dh(t,r,e)]},yh=function(t){var s,i=t;for(s=0;s<i.length-1;s++)for(var e=0;e<s-1;e++)if(Kr(i[s],i[s+1],i[e],i[e+1]))return!1;for(s=1;s<i.length-2;s++)if(Kr(i[0],i[i.length-1],i[s],i[s+1]))return!1;return!0},wh=function(t,s,i,e,n){n=n||0;var r=s[1]-t[1],h=t[0]-s[0],o=r*t[0]+h*t[1],a=e[1]-i[1],l=i[0]-e[0],u=a*i[0]+l*i[1],c=r*l-a*h;return Mh(c,0,n)?[0,0]:[(l*o-h*u)/c,(r*u-a*o)/c]},Sh=function(t,s,i,e,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,v=t;if(v.length<3)return s;if(++h>r)return console.warn("quickDecomp: max level ("+r+") reached."),s;for(var b=0;b<t.length;++b)if(uh(S,b)){i.push(S[b]),u=c=Number.MAX_VALUE;for(var M=0;M<t.length;++M)Qr(rh(S,b-1),rh(S,b),rh(S,M))&&ih(rh(S,b-1),rh(S,b),rh(S,M-1))&&(l=wh(rh(S,b-1),rh(S,b),rh(S,M),rh(S,M-1)),sh(rh(S,b+1),rh(S,b),l)&&(f=nh(S[b],l))<c&&(c=f,a=l,m=M)),Qr(rh(S,b+1),rh(S,b),rh(S,M+1))&&ih(rh(S,b+1),rh(S,b),rh(S,M))&&(l=wh(rh(S,b+1),rh(S,b),rh(S,M),rh(S,M+1)),Qr(rh(S,b-1),rh(S,b),l)&&(f=nh(S[b],l))<u&&(u=f,o=l,p=M));if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),b<p?(oh(y,S,b,p+1),y.push(l),w.push(l),0!==m&&oh(w,S,m,S.length),oh(w,S,0,b+1)):(0!==b&&oh(y,S,b,S.length),oh(y,S,0,p+1),y.push(l),w.push(l),oh(w,S,m,b+1));else{if(m>p&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(M=m;M<=p;++M)th(rh(S,b-1),rh(S,b),rh(S,M))&&ih(rh(S,b+1),rh(S,b),rh(S,M))&&(f=nh(rh(S,b),rh(S,M)))<d&&fh(S,b,M)&&(d=f,g=M%t.length);b<g?(oh(y,S,b,g+1),0!==g&&oh(w,S,g,v.length),oh(w,S,0,b+1)):(0!==b&&oh(y,S,b,v.length),oh(y,S,0,g+1),oh(w,S,g,b+1))}return y.length<w.length?(Sh(y,s,i,e,n,r,h),Sh(w,s,i,e,n,r,h)):(Sh(w,s,i,e,n,r,h),Sh(y,s,i,e,n,r,h)),s}return s.push(t),s},vh=function(t,s){for(var i=0,e=t.length-1;t.length>3&&e>=0;--e)eh(rh(t,e-1),rh(t,e),rh(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},bh=function(t,s){for(var i=t.length-1;i>=1;--i)for(var e=t[i],n=i-1;n>=0;--n)xh(e,t[n],s)&&t.splice(i,1)},Mh=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},xh=function(t,s,i){return Mh(t[0],s[0],i)&&Mh(t[1],s[1],i)};Mt=[],xt=[],Tt=[],Gt=[],self.Ss={vs:mh,bs:Sh,Ms:yh,xs:vh,Ts:bh,Gs:ah}}{let Th=!1,Gh=!1,_h="dev";const Ch=Symbol("Construct internal API token");let Ih=16;const Ph=self._s=class{constructor(){throw TypeError("static class can't be instantiated")}static Cs(){if(Ih<=0)throw new Error("cannot obtain internal API token");return--Ih,Ch}static Is(){Th=!0}static Ps(){return Th}static As(){Gh=!0}static Es(){return Gh}static Rs(t){_h=t}static Fs(){return _h}static Os(){return"final"===_h}};Ph.Ds=!1,Ph.ks=!1,Ph.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ls={}}{const Ah=self._s;Ah.Ns=class{constructor(t){this.Bs=t,this.Ws=new Map,this.js()}js(){let t=this.Bs;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const s=t.split("&");for(const t of s)this.Vs(t)}Vs(t){if(!t)return;if(!t.includes("="))return void this.Ws.set(t,null);const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Ws.set(i,e)}Hs(){for(const t of this.Ws)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Us(t){return this.Ws.has(t)}zs(t){const s=this.Ws.get(t);return void 0===s?null:s}Js(){history.replaceState("",document.title,location.pathname+location.search)}$s(t){this.Bs=t,this.Ws.clear(),this.js()}},Ah.qs=new Ah.Ns(location.search),Ah.Xs=new Ah.Ns(location.hash),Ah.qs.Us("perf")&&(Ah.Ys=!0),"dev"!==Ah.qs.zs("mode")&&Ah.Rs("final")}{let Eh=function(t){const s=parseFloat(t);return Oh.get(s)||(s>=13?"11":"NT "+t)};0;const Rh=self._s,Fh="(unknown)";Rh.Ks={Zs:Fh,Qs:Fh,ti:Fh,si:Fh,ii:NaN,ei:Fh,ni:"browser",ri:!0,hi:!1,oi:!1,ai:!1,li:async()=>{}};const Oh=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),Dh=navigator.userAgent,kh=navigator.userAgentData;if(kh&&kh.brands.length>0){let Lh=function(t){let s="",i="",e="",n="";for(const r of t){const t=Nh.get(r.brand);!s&&t&&(s=t,i=r.version);const h=Bh.get(r.brand);!e&&h&&(e=h,n=r.version)}s||"Chromium"!==e||(Rh.Ks.ti="Chromium",Rh.Ks.si=n),Rh.Ks.ti=s||Fh,Rh.Ks.si=i||Fh,Rh.Ks.ei=e||Fh};Rh.Ks.Zs=kh.platform,Rh.Ks.hi=kh.mobile,Rh.Ks.ri=!Rh.Ks.hi;const Nh=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),Bh=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);Lh(kh.brands);let Wh=!1;Rh.Ks.li=async()=>{if(!Wh)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);Lh(t.fullVersionList),"Windows"===Rh.Ks.Zs?Rh.Ks.Qs=Eh(t.platformVersion):Rh.Ks.Qs=t.platformVersion,Wh=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let jh=function(t,s){const i=Array.isArray(t)?t:[t];for(const t of i){const i=t.exec(Dh);if(i){s(i);break}}};jh(/windows\s+nt\s+([\d\.]+)/i,t=>{Rh.Ks.Zs="Windows";const s=t[1];Rh.Ks.Qs=Eh(s)}),jh(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{Rh.Ks.Zs="macOS",Rh.Ks.Qs=t[1].replace(/_/g,".")}),jh(/CrOS/,()=>{Rh.Ks.Zs="Chrome OS"}),jh(/linux|openbsd|freebsd|netbsd/i,()=>{Rh.Ks.Zs="Linux"}),jh(/android/i,()=>{Rh.Ks.Zs="Android"}),jh(/android\s+([\d\.]+)/i,t=>{Rh.Ks.Zs="Android",Rh.Ks.Qs=t[1]}),Rh.Ks.Zs===Fh&&(jh(/(iphone|ipod|ipad)/i,t=>{Rh.Ks.Zs="iOS"}),jh([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{Rh.Ks.Zs="iOS",Rh.Ks.Qs=t[1].replace(/_/g,".")}));const Vh=/chrome\//i.test(Dh),Hh=/chromium\//i.test(Dh),Uh=/edg\//i.test(Dh),zh=/OPR\//.test(Dh),Jh=/nwjs/i.test(Dh),$h=/safari\//i.test(Dh),qh=/webkit/i.test(Dh);Uh||zh||jh(/chrome\/([\d\.]+)/i,t=>{Rh.Ks.ti="Chrome",Rh.Ks.si=t[1],Rh.Ks.ei="Chromium"}),jh(/edg\/([\d\.]+)/i,t=>{Rh.Ks.ti="Edge",Rh.Ks.si=t[1],Rh.Ks.ei="Chromium"}),jh(/OPR\/([\d\.]+)/,t=>{Rh.Ks.ti="Opera",Rh.Ks.si=t[1],Rh.Ks.ei="Chromium"}),jh(/chromium\/([\d\.]+)/i,t=>{Rh.Ks.ti="Chromium",Rh.Ks.si=t[1],Rh.Ks.ei="Chromium"}),jh(/nwjs\/[0-9.]+/i,t=>{Rh.Ks.ti="NW.js",Rh.Ks.si=t[1],Rh.Ks.ei="Chromium",Rh.Ks.ni="nwjs"}),jh(/firefox\/([\d\.]+)/i,t=>{Rh.Ks.ti="Firefox",Rh.Ks.si=t[1],Rh.Ks.ei="Gecko"}),!$h||Vh||Hh||Uh||zh||Jh||(Rh.Ks.ti="Safari",Rh.Ks.ei="WebKit",jh(/version\/([\d\.]+)/i,t=>{Rh.Ks.si=t[1]}),jh(/crios\/([\d\.]+)/i,t=>{Rh.Ks.ti="Chrome for iOS",Rh.Ks.si=t[1]}),jh(/fxios\/([\d\.]+)/i,t=>{Rh.Ks.ti="Firefox for iOS",Rh.Ks.si=t[1]}),jh(/edgios\/([\d\.]+)/i,t=>{Rh.Ks.ti="Edge for iOS",Rh.Ks.si=t[1]})),Rh.Ks.ei===Fh&&qh&&(Rh.Ks.ei="WebKit"),"Android"===Rh.Ks.Zs&&"Safari"===Rh.Ks.ti&&(Rh.Ks.ti="Stock");const Xh=new Set(["Windows","macOS","Linux","Chrome OS"]).has(Rh.Ks.Zs)||"nwjs"===Rh.Ks.ni;Rh.Ks.ri=Xh,Rh.Ks.hi=!Xh}"Chrome"===Rh.Ks.ti&&"browser"===Rh.Ks.ni&&/wv\)/.test(Dh)&&(Rh.Ks.ni="webview"),"nwjs"!==Rh.Ks.ni&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(Rh.Ks.ni="webapp"),Rh.Ks.ii=parseFloat(Rh.Ks.si);"macOS"===Rh.Ks.Zs&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&(Rh.Ks.Zs="iOS",Rh.Ks.Qs=Rh.Ks.si,Rh.Ks.ri=!1,Rh.Ks.hi=!0,Rh.Ks.ai=!0),Rh.Ks.oi="macOS"===Rh.Ks.Zs||"iOS"===Rh.Ks.Zs}{let Yh=function(t){return new Promise((s,i)=>{t.onsuccess=()=>s(t.result),t.onerror=()=>i(t.error)})},Kh=function(t){return new Promise((s,i)=>{t.oncomplete=()=>s(),t.onerror=()=>i(t.error),t.onabort=()=>i(t.error)})},Zh=function(t,s){return ao(t,s)},Qh=function(t,s){return ao(t,s,!0)},to=function(t){so(t);let s=ro.get(t);return s instanceof Promise||(s=lo(t),ro.set(t,s),s.catch(s=>ro.delete(t))),s},so=function(t){if("string"!=typeof t)throw new TypeError("expected string")},io=function(t,s){const i=t.objectStore(no).openCursor();return new Promise(t=>{const e=[];i.onsuccess=i=>{const n=i.target.result;if(n){switch(s){case"entries":e.push([n.key,n.value]);break;case"keys":e.push(n.key);break;case"values":e.push(n.value)}n.continue()}else t(e)}})};0;const eo=2,no="keyvaluepairs",ro=new Map,ho="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,oo="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function ao(t,s,i=!1,e=!0){const n=await to(t);try{return s(n.transaction([no],i?"readwrite":"readonly"))}catch(n){if(e&&"InvalidStateError"===n.name)return ro.delete(t),ao(t,s,i,!1);throw n}}async function lo(t){so(t);const s=indexedDB.open(t,eo);return s.addEventListener("upgradeneeded",s=>{try{s.target.result.createObjectStore(no)}catch(s){console.error(`Failed to create objectstore for database ${t}`,s)}}),Yh(s)}class uo{constructor(t){so(t),this.name=t}async ready(){await to(this.name)}set(t,s){return so(t),Qh(this.name,async i=>{const e=Yh(i.objectStore(no).put(s,t)),n=Kh(i);await Promise.all([n,e])})}get(t){return so(t),Zh(this.name,async s=>{const i=Yh(s.objectStore(no).get(t)),e=Kh(s),[n,r]=await Promise.all([e,i]);return r})}delete(t){return so(t),Qh(this.name,async s=>{const i=Yh(s.objectStore(no).delete(t)),e=Kh(s);await Promise.all([e,i])})}clear(){return Qh(this.name,async t=>{const s=Yh(t.objectStore(no).clear()),i=Kh(t);await Promise.all([i,s])})}keys(){return Zh(this.name,async t=>{let s;s=oo?Yh(t.objectStore(no).getAllKeys()):io(t,"keys");const i=Kh(t),[e,n]=await Promise.all([i,s]);return n})}values(){return Zh(this.name,async t=>{let s;s=ho?Yh(t.objectStore(no).getAll()):io(t,"values");const i=Kh(t),[e,n]=await Promise.all([i,s]);return n})}entries(){return Zh(this.name,async t=>{const s=io(t,"entries"),i=Kh(t),[e,n]=await Promise.all([i,s]);return n})}}self.ci=uo}{let co=function(t){throw new Error(`"${t}" is not implemented`)},fo=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},po=function(t){return"object"==typeof t?new Promise(s=>{const{port1:i,port2:e}=new MessageChannel;e.onmessage=t=>s(t.data),i.postMessage(t)}):Promise.resolve(t)};0;const mo=self.ci,go=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class yo{constructor(t){this.fi=t,this.di=!this.fi,this.di||"undefined"!=typeof indexedDB||(this.di=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.pi=new Map}mi(t){if(!this.di)for(const s of go)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.di=!0;break}}async gi(t){const s=this.pi.get(t),i=await po(s);return void 0===i?null:i}async yi(t,s){s=await po(s),this.pi.set(t,s)}wi(t){this.pi.delete(t)}Si(){this.pi.clear()}bi(){return Array.from(this.pi.keys())}Mi(){return this.di}xi(){return this.pi}Ti(t){this.pi=t}async getItem(t,s){if(fo(s),this.di)return await this.gi(t);let i;try{i=await this.fi.get(t)}catch(s){return this.mi(s),this.di?await this.gi(t):(console.error(`Error reading '${t}' from storage, returning null: `,s),null)}return void 0===i?null:i}async setItem(t,s,i){if(fo(i),void 0===s&&(s=null),this.di)await this.yi(t,s);else try{await this.fi.set(t,s)}catch(i){if(this.mi(i),!this.di)throw i;await this.yi(t,s)}}async removeItem(t,s){if(fo(s),this.di)this.wi(t);else try{await this.fi.delete(t)}catch(s){this.mi(s),this.di?this.wi(t):console.error(`Error removing '${t}' from storage: `,s)}}async clear(t){if(fo(t),this.di)this.Si();else try{await this.fi.clear()}catch(t){this.mi(t),this.di?this.Si():console.error("Error clearing storage: ",t)}}async keys(t){if(fo(t),this.di)return this.bi();let s=[];try{s=await this.fi.keys()}catch(t){if(this.mi(t),this.di)return this.bi();console.error("Error getting storage keys: ",t)}return s}ready(t){return fo(t),this.di?Promise.resolve(!0):this.fi.ready()}Gi(t){if(t._i)return new yo(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new mo(s);return new yo(i)}}length(t){co("localforage.length()")}key(t,s){co("localforage.key()")}iterate(t,s){co("localforage.iterate()")}Ci(t){co("localforage.setDriver()")}config(t){co("localforage.config()")}Ii(t){co("localforage.defineDriver()")}Pi(){co("localforage.driver()")}supports(t){co("localforage.supports()")}dropInstance(){co("localforage.dropInstance()")}}self.localforage=new yo(new mo("localforage"))}{const wo=self._s;if(wo.Ai={},wo.Ai.Ei=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),wo.Ai.Ri="undefined"!=typeof HTMLDialogElement,wo.Ai.Fi=!!self.requestIdleCallback,wo.Ai.ImageBitmap=!!self.createImageBitmap,wo.Ai.ImageBitmapOptions=!1,wo.Ai.Oi=!1,wo.Ai.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{wo.Ai.ImageBitmapOptions=!0}).catch(()=>{wo.Ai.ImageBitmapOptions=!1})}catch(So){wo.Ai.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{wo.Ai.Oi=10===t.width&&10===t.height}).catch(()=>{wo.Ai.Oi=!1})}catch(vo){wo.Ai.Oi=!1}}if(wo.Ai.Di=!(!navigator.clipboard||!navigator.clipboard.readText),wo.Ai.ki=!(!navigator.permissions||!navigator.permissions.query),wo.Ai.Li=!1,wo.Ai.ki){const bo={name:"clipboard-read"};navigator.permissions.query(bo).then(()=>{wo.Ai.Li=!0}).catch(()=>{wo.Ai.Li=!1})}wo.Ai.Ni=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),wo.Ai.Bi="undefined"!=typeof Proxy,wo.Ai.Wi="undefined"!=typeof document&&void 0!==document.createElement("a").download,wo.Ai.ji="function"==typeof fetch,wo.Ai.Vi=!!(self.isSecureContext&&"Opera"!==wo.Ks.ti&&navigator.storage&&navigator.storage.persist),wo.Ai.Hi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),wo.Ai.Ui=(()=>{if("undefined"==typeof document)return!1;if("iOS"===wo.Ks.Zs)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),wo.Ai.ImageDecoder=void 0!==self.ImageDecoder,wo.Ai.zi=!!self.VideoEncoder,wo.Ai.Ji=!!self.showOpenFilePicker,wo.Ai.$i=!!self.queryLocalFonts,wo.Ai.UserActivation=!!navigator.userActivation,wo.Ai.Xi=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const s=t.getContext("2d");s.fillStyle="blue",s.fillRect(0,0,32,32);let i=null;try{t.convertToBlob?i=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(i=await new Promise(s=>t.toBlob(s,"image/webp",1))),wo.Ai.Xi=i&&"image/webp"===i.type}catch(t){wo.Ai.Xi=!1}})()}{const Mo=self._s;if(!String.prototype.trimStart){const xo=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(xo,"")}}if(!String.prototype.trimEnd){const To=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(To,"")}}if(String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(Mo.Yi(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),!Array.prototype.flat){let Go=function(t,s){return t.reduce((t,i)=>s>0&&Array.isArray(i)?(Array.prototype.push.apply(t,Go(i,s-1)),t):(t.push(i),t),[])};Array.prototype.flat=function(t=1){return Go(this,t)}}Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((t,s)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((s,i)=>t({usage:s,quota:i}),s))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let _o=function(t){let s="Assertion failure: "+t+"\n\nStack trace:\n"+Co.Ki();console.error(s)};0;const Co=self._s;self.assert=function(t,s){t||_o(s)}}{const Io=self._s,Po=self.Ls;Io.Zi=function(t){return"number"==typeof t},Io.Qi=function(t){return Io.Zi(t)&&isFinite(t)},Io.te=function(t){if(!Io.Zi(t))throw new TypeError("expected number")},Io.se=function(t){Io.ie(t)},Io.ee=function(t,s,i){if(!Io.Zi(t)||isNaN(t)||s>t||i<t)throw new RangeError("number outside of range")},Io.ne=function(...t){for(let s of t);},Io.re=function(t){if(!Io.Qi(t))throw new TypeError("expected finite number")},Io.he=function(t){Io.ie(t)},Io.oe=function(...t){for(let s of t);},Io.ae=function(t){return"string"==typeof t},Io.le=function(t){if(!Io.ae(t))throw new TypeError("expected string")},Io.ue=function(t){Io.ie(t)},Io.ce=function(...t){for(let s of t);},Io.fe=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},Io.de=function(t){if(!Io.fe(t))throw new TypeError("expected simple object")},Io.pe=function(t){if(!Io.ie(t)&&!Io.fe(t))throw new TypeError("expected simple object")},Io.me=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},Io.ge=function(t){if(!Io.me(t))throw new TypeError("expected object")},Io.ye=function(t){Io.ie(t)},Io.we=function(...t){for(let s of t);},Io.Se=function(t){return Io.ve(t,Blob)&&"string"==typeof t.name},Io.be=function(t){if(!Io.Se(t))throw new TypeError("expected file")},Io.Me=function(t){Io.ie(t)},Io.xe=function(t){return Array.isArray(t)},Io.Te=function(t){if(!Io.xe(t))throw new TypeError("expected array")},Io.Ge=function(t){Io.ie(t)},Io._e=function(...t){for(let s of t);},Io.Ce=function(t){return!(!Io.xe(t)||t.length&&!Io.xe(t[0]))},Io.Ie=function(t){if(!Io.Ce(t))throw new TypeError("expected 2d array");for(let s of t)if(!Io.xe(s))throw new TypeError("expected 2d array")},Io.Pe=function(t){Io.ie(t)},Io.Ae=function(t){return"function"==typeof t},Io.Ee=function(t,s){if(!Io.Ae(t))throw new TypeError("expected function");if(!Io.ie(s)&&t!==s)throw new TypeError("expected same function reference")},Io.Re=function(t){Io.ie(t)},Io.Fe=function(...t){for(let s of t);},Io.Oe=function(t,...s){if(!Io.Ae(t))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let i of s)if(!Io.ie(i)&&t===i)return;throw new TypeError("expected same function reference")},Io.De=function(...t){if(!Io.ie(t))for(let s of t);},Io.ke=function(t,s){return t instanceof s},Io.Le=function(t,...s){for(let i of s)if(Io.ke(t,i))return!0;return!1},Io.Ne=function(t,s){if(!Io.ke(t,s))throw new TypeError("unexpected type")},Io.Be=function(t,s){Io.ie(t)},Io.We=function(t,...s){for(let t of s);},Io.je=function(t,...s){if(!Io.Le(t,...s))throw new TypeError("unexpected type")},Io.Ve=function(t,...s){if(!Io.ie(t)&&!Io.Le(t,...s))throw new TypeError("unexpected type")},Io.He=function(t,s){for(let i of t)if(!Io.ke(i,s))return!1;return!0},Io.Ue=function(t){for(let s of t)if(!Io.Qi(s))return!1;return!0},Io.ze=function(t,s){for(let s of t);},Io.Je=function(t,s){if(!Io.ie(t))for(let s of t);},Io.$e=function(t,s){if(!Io.ie(t))for(let s of t);},Io.qe=function(t,...s){for(let s of t);},Io.Xe=function(t,...s){if(!Io.ie(t))for(let s of t);},Io.Ye=function(t,s){return!(Io.ie(t)||!Io.ae(t.nodeName))&&(!s||Io.Ke(t.nodeName,s))},Io.Ze=function(t,s){if(Io.ie(t)||!Io.ae(t.nodeName))throw new TypeError("expected DOM node");if(s&&!Io.Ke(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},Io.Qe=function(t,s){Io.ie(t)},Io.tn=function(t,s){return!(Io.ie(t)||!Io.ae(t.tagName))&&(!s||Io.Ke(t.tagName,s))},Io.sn=function(t,s){if(Io.ie(t)||!Io.ae(t.tagName))throw new TypeError("expected HTML element");if(s&&!Io.Ke(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},Io.en=function(t,s){Io.ie(t)},Io.nn=function(t){return Io.tn(t,"img")||Io.tn(t,"canvas")||Io.tn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},Io.rn=function(t){if(!Io.nn(t))throw new TypeError("expected drawable")},Io.hn=function(t){Io.ie(t)},Io.an=function(t){return t instanceof ImageData||Io.nn(t)},Io.ln=function(t){if(!Io.an(t))throw new TypeError("expected drawable or image data")},Io.un=function(t){if(!Io.ie(t)&&!Io.an(t))throw new TypeError("expected drawable or image data")},Io.cn=function(t){return"string"==typeof t||Io.fn&&t instanceof Io.fn||t instanceof Io.dn},Io.pn=function(t){if(!Io.cn(t))throw new TypeError("expected string-like")},Io.mn=function(t){Io.ie(t)},Io.gn=function(...t){for(let s of t);},Io.yn=function(){throw new Error("must be overridden")},Io.wn=function(){throw new Error("not yet implemented")},Io.Sn=function(t){return t.constructor===function*(){}.constructor},Io.vn=function(t){if(!Io.Sn(t))throw new Error("expected generator function")},Io.bn=function(t){return"function"===t[Symbol.iterator]},Io.Mn=function(t){if(!Io.bn(t))throw new Error("expected iterable")},Io.xn=function(t){return!Io.ie(t)},Io.ie=function(t){return null==t},Io.Tn=function(t){let s=t[0].constructor;for(let i of t)if(i.constructor!==s)return!1;return s},Io.Gn=function(t,s){for(let i of t)if(!(i instanceof s))return!1;return!0};const Ao=Object.getPrototypeOf(Uint8Array);Io._n=function(t){return Io.ke(t,Ao)},Io.Cn=function(t){},Io.In=function(t){Io.Pn(t,Ao)},Io.An=function(t,...s){if(!Io.En(t,...s))throw new TypeError("unexpected type")},Io.En=function(t,...s){for(const i of s)if(Io.ve(t,i))return!0;return!1},Io.Pn=function(t,s){if(!Io.ve(t,s))throw new TypeError("unexpected type")},Io.ve=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},Po.te=Io.te,Po.se=Io.se,Po.re=Io.re,Po.he=Io.he,Po.le=Io.le,Po.ue=Io.ue,Po.ge=Io.ge,Po.ye=Io.ye,Po.Te=Io.Te,Po.Ge=Io.Ge,Po.Ee=Io.Ee,Po.Re=Io.Re,Po.Ne=Io.Ne,Po.Be=Io.Be,Po.ie=Io.ie}{let Eo=function(t,s){let i=ko.getType(t),e=ko.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},Ro=function(t){console.warn("[Defence] "+t+" @",ko.Ki())},Fo=function(){if(Uo=-1,Bo.size>0||Wo.size>0){let t=[...new Set([...Bo.keys()].map(t=>ko.getName(t)))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),Bo.clear(),Wo.clear()}},Oo=function(t){let s=new Set;for(let i in t)s.add(i);return s},Do=function(t,s){let i=Oo(s),e=zo.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);ko.Rn(s,[...i]),s.length&&console.warn(`[Defence] '${ko.getName(t)}' constructor creates inconsistent properties: ${s.join(", ")}`)}else zo.set(t,i)};0;const ko=self._s,Lo=new Map;let No;ko.Fn=function(t,s){console.log(`%c${t}`,`font-weight: bold; color:${s}`)},ko.On=function(t,...s){Lo.has(t)||Lo.set(t,-1),-1===Lo.get(t)&&Lo.set(t,requestAnimationFrame(()=>{console.log(`%c${t}`,"font-weight: bold",...s),Lo.set(t,-1)}))},ko.Dn=function(t){performance.mark(t),No||(No=new Map),No.has(t)||No.set(t,{kn:0,total:0,Ln:0,Nn:1,toString:function(){return`${t} :: current => ${this.kn.toPrecision(3)} :: average => ${this.Ln.toPrecision(3)} :: calls => ${this.Nn}`}})},ko.Bn=function(t){performance.measure(`measure-${t}`,t);const s=performance.getEntriesByName(`measure-${t}`)[0],i=No.get(t);i.kn=s.duration,i.total+=i.kn,i.Ln=i.total/i.Nn,console.log(i.toString()),i.Nn++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},ko.Ki=function(){return(new Error).stack},ko.Wn=function(){},ko.cast=function(t,s){return t&&t instanceof s?t:null},ko.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":ko.Zi(t)?"<number>":ko.ae(t)?"<string>":ko.xe(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":ko.Ae(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},ko.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},ko.range=function*(t,s){if(!isFinite(Math.abs(t-s)))throw new Error("Invalid parameters");if(t>s)for(let i=t-1;i>=s;i--)yield i;else for(let i=t;i<s;i++)yield i};let Bo=new Map,Wo=new Map,jo=new WeakMap,Vo=new WeakMap;ko.jn={};const Ho=new Set(["then","splice"]);ko.jn.get=function(t,s){return s in t||"symbol"==typeof s||Ho.has(s)||Ro(`Accessed missing property '${s}' from defended object '${ko.getName(t)}', returning undefined`),Vo.has(t)&&"symbol"!=typeof s&&!Ho.has(s)&&Ro(`Accessed property '${s}' on a released object '${ko.getName(t)}'\nObject was originally released at: ${Vo.get(t)})\nCall stack at access: `),t[s]},ko.jn.set=function(t,s,i){return s in t||Bo.has(t)||Ro(`Set non-existent property '${s}' to '${i}' on defended object '${ko.getName(t)}'`),Eo(t[s],i)||Bo.has(t)||Ro(`Set '${ko.getType(t[s])}' property '${s}' to type '${ko.getType(i)}' on defended object '${ko.getName(t)}'`),Vo.has(t)&&Ro(`Set property '${s}' on a released object '${ko.getName(t)}'\nObject was originally released at: ${Vo.get(t)})\nCall stack at access: `),t[s]=i,!0},ko.jn.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${ko.getName(t)}'`)},ko.jn.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${ko.getName(t)}'`)},ko.jn.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${ko.getName(t)}'`)};let Uo=-1;ko.Vn=class{constructor(){if(!ko.ks||!ko.Ai.Bi)return;let t=new.target,s=Object.create(t.prototype),i=new Proxy(s,ko.jn);return Bo.set(s,i),Wo.set(i,s),jo.set(i,s),-1===Uo&&(Uo=requestAnimationFrame(Fo)),i}},ko.Hn=function(t){if(ko.ks&&ko.Ai.Bi&&t instanceof ko.Vn){if(!Wo.has(t))return t;let s=Wo.get(t);return Wo.delete(t),Bo.delete(s),t}return ko.Ds?Object.seal(t):t},ko.Un=function(t,...s){let i;try{i=new t(...s)}catch(t){throw Wo.clear(),Bo.clear(),t}return ko.ks&&Do(t,i),ko.Hn(i)},ko.zn=function(t){let s=jo.get(t);s&&Vo.set(s,ko.Ki())},ko.Jn=function(t){let s=jo.get(t);return!!s&&!!Vo.get(s)};let zo=new Map;ko.$n=class{constructor(t){this.qn="",t&&this.start(t)}start(t){ko.Ys&&(this.qn=t,performance.mark(this.qn+"-Start"))}end(){ko.Ys&&(performance.mark(this.qn+"-End"),performance.measure(this.qn,this.qn+"-Start",this.qn+"-End"))}next(t){ko.Ys&&(this.end(),this.qn=t,performance.mark(this.qn+"-Start"))}}}{let Jo=function(t){return 0===t&&1/t<0};0;const $o=self._s,qo=2*Math.PI,Xo=Math.PI/180,Yo=180/Math.PI;$o.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0===e)return i;if(t<s){const n=i-(s-t)%e;return n===i?0:n}return s+(t-s)%e},$o.Xn=function(t,s,i,e,n){const r=i-s;return 0===r&&0===e?t:(t-s)*(n-e)/r+e},$o.normalize=function(t,s,i){return s-i===0?1:(t-s)/(i-s)},$o.Yn=function(t,s,i){return t<s?s:t>i?i:t},$o.Kn=function(t){return(t%=qo)<0&&(t+=qo),t},$o.Zn=function(t){return t*Xo},$o.Qn=function(t){return t*Yo},$o.tr=function(t,s){return Math.sqrt(t*t+s*s)},$o.sr=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},$o.ir=function(t,s,i,e){return $o.tr(i-t,e-s)},$o.er=function(t,s,i,e){const n=i-t,r=e-s;return n*n+r*r},$o.nr=function(t,s,i,e){return Math.atan2(e-s,i-t)},$o.rr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),n=i*Math.sin(s)+e*Math.cos(s);return n>=1?0:n<=-1?Math.PI:Math.acos(n)},$o.hr=function(t,s,i){let e=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(e*r+n*h)>i?n*r-e*h>0?$o.Kn(t+i):$o.Kn(t-i):$o.Kn(s)},$o.ar=function(t,s){let i=Math.sin(t);return Math.cos(t)*Math.sin(s)-i*Math.cos(s)<=0},$o.lr=function(t,s,i,e=0){let n=$o.rr(t,s);const r=qo*e;return $o.ar(s,t)?$o.Kn(t+(n+r)*i):$o.Kn(t-(n+r)*i)},$o.ur=function(t,s,i,e=0){const n=$o.rr(t,s),r=qo*e;return $o.ar(s,t)?$o.Kn(t+(n+r)*i):$o.Kn(t+(qo-n+r)*i)},$o.cr=function(t,s,i,e=0){const n=$o.rr(t,s),r=qo*e;return $o.ar(s,t)?$o.Kn(t-(-qo+n-r)*i):$o.Kn(t-(n+r)*i)},$o.dr=function(t,s){const i=$o.rr(t,s);return $o.ar(t,s)?$o.Kn(s-i):$o.Kn(s+i)},$o._t=function(t,s,i){return t+i*(s-t)},$o.pr=function(t,s,i){return t===s?0:(i-t)/(s-t)},$o.mr=function(t,s,i,e,n){return $o._t(e,n,$o.pr(t,s,i))},$o.gr=function(t,s,i,e){return $o._t($o._t(t,s,e),$o._t(s,i,e),e)},$o.yr=function(t,s,i,e,n){return $o._t($o.gr(t,s,i,n),$o.gr(s,i,e,n),n)},$o.wr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},$o.Sr=function(t){return t>0&&!(t-1&t)},$o.vr=function(t){--t;for(let s=1;s<32;s<<=1)t|=t>>s;return t+1},$o.br=function(t,s){return Math.round(t*s)/s},$o.Mr=function(t,s){return Math.floor(t*s)/s},$o.Tr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},$o.Gr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},$o.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;e>=0&&"0"===i.charAt(e);--e);return e>=0&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},$o._r=function(t,s,i){return $o.Yn(t,0,255)|$o.Yn(s,0,255)<<8|$o.Yn(i,0,255)<<16};$o.Cr=function(t,s,i,e){return(t=$o.Yn(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(s=$o.Yn(Math.floor(1024*s),-8192,8191))<0&&(s+=16384),(i=$o.Yn(Math.floor(1024*i),-8192,8191))<0&&(i+=16384),-(16384*t*16384*1024+16384*s*1024+1024*i+(e=$o.Yn(Math.floor(1023*e),0,1023)))},$o.Ir=function(t,s,i){return $o.Cr(t,s,i,1)},$o.Pr=function(t){if(t>=0)return(255&t)/255;{let s=Math.floor(-t/274877906944);return s>8191&&(s-=16384),s/1024}},$o.Ar=function(t){if(t>=0)return((65280&t)>>8)/255;{let s=Math.floor(-t%274877906944/16777216);return s>8191&&(s-=16384),s/1024}},$o.Er=function(t){if(t>=0)return((16711680&t)>>16)/255;{let s=Math.floor(-t%16777216/1024);return s>8191&&(s-=16384),s/1024}},$o.Rr=function(t){return Jo(t)?0:t>=0?1:Math.floor(-t%1024)/1023},$o.Fr=function(t,s){for(t=Math.floor(t),s=Math.floor(s);0!==s;){let i=s;s=t%s,t=i}return t};const Ko=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];$o.Or=function(t,s){if((t=Math.floor(t))===(s=Math.floor(s)))return[1,1];for(let i of Ko){let e=t/i[0]*i[1];if(Math.abs(s-e)<1)return i.slice(0);if(e=t/i[1]*i[0],Math.abs(s-e)<1)return[i[1],i[0]]}let i=$o.Fr(t,s);return[t/i,s/i]},$o.Dr=function(t,s,i,e,n,r,h,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(n,h),c=Math.max(n,h);if(l<u||a>c)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||f>m)return!1;const g=n-t+h-i,y=r-s+o-e,w=i-t,S=e-s,v=h-n,b=o-r,M=Math.abs(S*v-b*w),x=v*y-b*g;if(Math.abs(x)>M)return!1;const T=w*y-S*g;return Math.abs(T)<=M},$o.kr=function(t,s,i,e,n,r,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||n>d)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||h>m)return!1;const g=a-t+u-i,y=l-s+c-e,w=i-t,S=e-s,v=u-a,b=c-l,M=Math.abs(S*v-b*w),x=v*y-b*g;if(Math.abs(x)>M)return!1;const T=w*y-S*g;return Math.abs(T)<=M},$o.Lr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=n.Nr(),u=n.Br(),c=n.Wr(),f=n.jr(),d=n.Vr(),p=n.Hr(),m=n.Ur(),g=n.zr();return $o.kr(t,s,i,e,r,h,o,a,l,u,c,f)||$o.kr(t,s,i,e,r,h,o,a,c,f,d,p)||$o.kr(t,s,i,e,r,h,o,a,d,p,m,g)||$o.kr(t,s,i,e,r,h,o,a,m,g,l,u)},$o.Jr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e);let l=0;for(let u=n.length-4;l<=u;l+=2)if($o.kr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[l+2],n[l+3]))return!0;return $o.kr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[0],n[1])};$o.$r=function(t,s,i,e,n,r,h,o){const a=i-t,l=o-r,u=a*l-(e-s)*(h-n);if(0===u)return 2;const c=((s-e)*(h-t)+a*(o-s))/u;return 0<c&&c<1.000001?(l*(h-t)+(n-h)*(o-s))/u:2},$o.qr=function(t,s,i,e,n,r,h,o,a){const l=(h-n)*a,u=(o-r)*a;return $o.$r(t,s,i,e,n-l,r-u,h+l,o+u)},$o.Xr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,S=1/(p*y-m*m),v=(y*g-m*w)*S,b=(p*w-m*g)*S;return v>=0&&b>=0&&v+b<=1},$o.Yr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,S=p*g-m*m,v=(g*y-m*w)/S,b=(p*w-m*y)/S;return[1-v-b,v,b]},$o.Kr=function(t,s,i,e,n,r,h,o,a,l,u,c){return[t*e+s*h+i*l,t*n+s*o+i*u,t*r+s*a+i*c]}}{const Zo=self._s;let Qo=null,ta="";if("undefined"!=typeof document){Qo=document;const ha=document.querySelector("base");ta=ha&&ha.hasAttribute("href")?ha.getAttribute("href"):"",ta&&(ta.startsWith("/")&&(ta=ta.substr(1)),ta.endsWith("/")||(ta+="/"))}Zo.Zr=function(){return ta},Zo.Qr=function(){if(!Qo)return"";const t=Qo.location;return Zo.th(t.origin+t.pathname)+ta},Zo.th=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},Zo.sh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},Zo.ih=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},Zo.eh=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},Zo.nh=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},Zo.rh=function(t){return t.replace(/\\/g,"/")},Zo.hh=function(t,s){return s===(t?Zo.ih(t).slice(1):"")},Zo.oh=function(t,s){let i,e;return Zo.Se(t)&&(i=Zo.nh(t.name)),Zo.ae(t)&&(i=Zo.nh(t)),Zo.Se(s)&&(e=Zo.nh(s.name)),Zo.ae(s)&&(e=Zo.nh(s)),i===e},Zo.ah=function(t){t=Zo.rh(t);let s=/^\w\:\//.exec(t);s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const i=t.lastIndexOf("/")+1;let e,n="",r=t,h="";i>0&&(n=t.slice(0,i),r=t.slice(i)),e=r;const o=r.lastIndexOf(".");return o>0&&(h=r.slice(o),e=r.slice(0,-h.length)),{dir:n,uh:r,name:e,root:s,ext:h,fh:s+n+r}},Zo.dh=function(t,s){return new Promise((i,e)=>{self.setTimeout(i,t,s)})},Zo.ph=function(t){try{t()}catch(t){Zo.Ds&&console.warn("Swallowed exception: ",t)}},Zo.mh=function(){},Zo.Ke=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},Zo.gh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},Zo.yh=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},Zo.wh=function(t,s){t.length=s},Zo.Sh=function(t){t&&0!==t.length&&Zo.wh(t,0)},Zo.bh=function(t){if(t){for(let s=0;s<t.length;s++){let i=t[s];Zo.wh(i,0)}Zo.wh(t,0)}},Zo.Mh=function(t,s,i){s|=0;const e=t.length;if(!(s<=e))for(let n=e;n<s;++n)t.push(i)},Zo.xh=function(t,s,i){s|=0;const e=t.length;s<e?Zo.wh(t,s):s>e&&Zo.Mh(t,s,i)},Zo.Th=function(t,s){Zo.Sh(t),Zo.Rn(t,s)},Zo.Rn=function(t,s){if(s.length<1e4)t.push(...s);else for(let i=0,e=s.length;i<e;++i)t.push(s[i])},Zo.Gh=function(t,s){if((s=Math.floor(s))<0||s>=t.length)return;let i=t.length-1;for(let e=s;e<i;++e)t[e]=t[e+1];Zo.wh(t,i)},Zo._h=function(t,s){let i=t.indexOf(s);i>=0&&t.splice(i,1)},Zo.Ch=function(t,s){let i=t.length;if(s.length!==i)return!1;for(let e=0;e<i;++e)if(t[e]!==s[e])return!1;return!0},Zo.Ih=function(t,s){let i=[],e=0;for(let n=0,r=t.length;n<r;++n){let r=t[n];s(r)?i.push(r):(t[e]=r,++e)}return Zo.wh(t,e),i},Zo.Ph=function(t,s){const i=t.length;let e=0;for(let i=0,n=t.length;i<n;++i){let n=t[i];s.has(n)||(t[e++]=n)}return Zo.wh(t,e),i-e},Zo.Ah=function(t,s){return t===Math.floor(t)&&t>=0&&t<s.length},Zo.Eh=function(t,s){if(!Zo.Ah(t,s))throw new RangeError("array index out of bounds")},Zo.Rh=function(t){return t.slice()},Zo.Fh=function(t,s){let i=[];for(let e of t)if(Zo.me(e)){let t=s(e);if(!t)throw new Error("missing clone");if(t.constructor!==e.constructor)throw new Error("object is not a clone");i.push(t)}else Zo.xe(e)?i.push(Zo.Fh(e,s)):i.push(e);return i},Zo.Oh=function(t){let s=[];for(let i of t)s.push(i.slice());return s},Zo.Dh=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},Zo.kh=function(t,s,i){const e=new Set;for(const n of t.values())s(n)&&(i?e.add(i(n)):e.add(n));return e},Zo.Lh=function(t,s){return t.union?t.union(s):new Set([...t,...s])},Zo.Nh=function(t,s){for(const i of s)t.add(i);return t},Zo.Bh=function(t){for(let s of t)return s;return null},Zo.xor=function(t,s){return!t!=!s},Zo.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return t>i;case 5:return t>=i;default:return!1}},Zo.Wh=function(t){for(let s in t)if(t.hasOwnProperty(s))return!0;return!1},Zo.jh=function(t,s){return t.length?new Promise((i,e)=>{const n=[];let r=0,h=!1;for(let o=0,a=t.length;o<a;++o)n.push(void 0),t[o].then(e=>{h||(n[o]=e,++r,r===t.length?i(n):s(r,t.length))}).catch(t=>{h=!0,e(t)})}):Promise.resolve([])};let sa=[];Zo.Vh=function(t){sa.push(t)},Zo.Hh=function(){let t=0;for(let s of sa)t+=s();return Math.floor(t)};let ia=1;const ea=new Map,na=new MessageChannel;na.port2.onmessage=function(t){const s=t.data,i=ea.get(s);ea.delete(s),i&&i(performance.now())},Zo.Uh=function(t){const s=ia++;return ea.set(s,t),na.port1.postMessage(s),s},Zo.zh=function(t){ea.delete(t)},Zo.Jh=Zo.Uh,Zo.$h=function(){return new Promise(t=>Zo.Jh(t))};const ra=new Set;Zo.qh=function(t){const s=self.requestAnimationFrame(async i=>{await Zo.$h(),ra.has(s)&&(ra.delete(s),t(i))});return ra.add(s),s},Zo.Xh=function(t){ra.has(t)&&(self.cancelAnimationFrame(t),ra.delete(t))}}{const oa=self._s;oa.Yh=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},oa.Kh=function(t){return!oa.Yh(t)},oa.Zh=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},oa.Qh=function(t,s){return fetch(t,s).then(t=>(oa.Zh(t),t))},oa.so=function(t){return oa.Qh(t).then(t=>t.text())},oa.io=function(t){return oa.Qh(t).then(t=>t.json())},oa.eo=function(t){return oa.Qh(t).then(t=>t.blob())},oa.no=function(t){return oa.Qh(t).then(t=>t.arrayBuffer())},oa.ro=function(t){return new Promise((s,i)=>{const e=new Image;e.onload=()=>s(e),e.onerror=t=>i(t),e.src=t})},oa.ho=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsArrayBuffer(t)})},oa.oo=function(t){return"function"==typeof t.text?t.text():new Promise((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsText(t)})},oa.ao=function(t){return oa.oo(t).then(t=>JSON.parse(t))},oa.lo=async function(t,s){let i=URL.createObjectURL(t);try{const t=await oa.ro(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof t.decode&&await t.decode(),t}finally{i&&URL.revokeObjectURL(i)}},oa.uo=function(t,s){if("undefined"!=typeof document&&"function"==typeof document.createElement){const i=document.createElement("canvas");return i.width=t,i.height=s,i}return new OffscreenCanvas(t,s)},oa.co=function(t,s,i){if("number"!=typeof i&&(i=1),s=s||"image/png",i=oa.Yn(i,0,1),t.convertToBlob)return t.convertToBlob({type:s,quality:i});if(t.toBlob)return new Promise(e=>t.toBlob(e,s,i));throw new Error("could not convert canvas to blob")},oa.fo=function(t,s,i){const e=oa.uo(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),oa.co(e,s,i)},oa.do=function(t,s,i){if(oa.Ai.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>oa.fo(t,s,i));if(oa.Ai.ImageBitmap)return createImageBitmap(t).then(t=>oa.fo(t,s,i));{const e=oa.uo(t.width,t.height);return e.getContext("2d").putImageData(t,0,0),oa.co(e,s,i)}},oa.po=function(t,s){t.clear();for(const i of s)t.add(i)},oa.mo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},oa.yo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},oa.wo=function t(s){if("object"==typeof s&&null!==s){if(s instanceof Set)return{_c3type_:"set",data:[...s].map(s=>t(s))};if(s instanceof Map)return{_c3type_:"map",data:[...s].map(s=>[s[0],t(s[1])])};{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},oa.So=function t(s){if("object"==typeof s&null!==s){if("set"===s._c3type_)return new Set(s.data.map(s=>t(s)));if("map"===s._c3type_)return new Map(s.data.map(s=>[s[0],t(s[1])]));{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},oa.vo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const n of t)"-"===n?e>0&&(i=!0):i?(s+=n.toUpperCase(),i=!1):s+=n,++e;return s},oa.bo=function(t){return"object"==typeof t&&"function"==typeof t.next},oa.Mo=function(t,s){const i=[];if("function"==typeof s)for(let e=0;e<t;++e)i.push(s());else for(let e=0;e<t;++e)i.push(s);return i}}{let aa=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},la=function(t,s,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};0;const ua=self._s,ca=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,fa=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;ua.xo=class{constructor(t,s,i,e){this.To=NaN,this.Go=NaN,this._o=NaN,this.Co=NaN,this.To=0,this.Go=0,this._o=0,this.Co=0,t instanceof ua.xo?this.set(t):this.Io(t||0,s||0,i||0,e||0)}Po(t,s,i){return this.To=+t,this.Go=+s,this._o=+i,this.Yn(),this}Io(t,s,i,e){return this.To=+t,this.Go=+s,this._o=+i,this.Co=+e,this.Yn(),this}set(t){return this.To=t.To,this.Go=t.Go,this._o=t._o,this.Co=t.Co,this}m(t){return this.set(t)}add(t){this.To+=t.To,this.Go+=t.Go,this._o+=t._o,this.Co+=t.Co,this.Yn()}Ao(t,s,i,e=0){this.To+=+t,this.Go+=+s,this._o+=+i,this.Co+=+e,this.Yn()}Eo(t){this.Ro(Math.max(this.To,t.To)-Math.min(this.To,t.To)),this.Fo(Math.max(this.Go,t.Go)-Math.min(this.Go,t.Go)),this.Oo(Math.max(this._o,t._o)-Math.min(this._o,t._o)),this.Do(Math.max(this.Co,t.Co)-Math.min(this.Co,t.Co)),this.Yn()}ko(t){this.To=t.To,this.Go=t.Go,this._o=t._o}Ro(t){this.To=ua.Yn(+t,0,1)}Lo(){return this.To}Fo(t){this.Go=ua.Yn(+t,0,1)}No(){return this.Go}Oo(t){this._o=ua.Yn(+t,0,1)}Bo(){return this._o}Do(t){this.Co=ua.Yn(+t,0,1)}Wo(){return this.Co}clone(){return ua.Un(ua.xo,this.To,this.Go,this._o,this.Co)}toArray(){return[this.To,this.Go,this._o,this.Co]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.To,t[s++]=this.Go,t[s++]=this._o,t[s]=this.Co}Ho(t,s){const i=this.To,e=this.Go,n=this._o,r=this.Co;for(let h=0;h<4;++h)t[s++]=i,t[s++]=e,t[s++]=n,t[s++]=r}Uo(t,s){t[s++]=this.To,t[s++]=this.Go,t[s]=this._o}equals(t){return this.To===t.To&&this.Go===t.Go&&this._o===t._o&&this.Co===t.Co}zo(t){return this.To===t.To&&this.Go===t.Go&&this._o===t._o}Jo(t,s,i){return this.To===t&&this.Go===s&&this._o===i}$o(t,s,i,e){return this.To===t&&this.Go===s&&this._o===i&&this.Co===e}qo(t,s){return t[s]===Math.fround(this.To)&&t[s+1]===Math.fround(this.Go)&&t[s+2]===Math.fround(this._o)&&t[s+3]===Math.fround(this.Co)}Xo(t,s){return t[s]===Math.fround(this.To)&&t[s+1]===Math.fround(this.Go)&&t[s+2]===Math.fround(this._o)}multiply(t){this.To*=t.To,this.Go*=t.Go,this._o*=t._o,this.Co*=t.Co}Yo(t){this.To*=t,this.Go*=t,this._o*=t,this.Co*=t}Ko(){return this.To*=this.Co,this.Go*=this.Co,this._o*=this.Co,this}Zo(){return this.To/=this.Co,this.Go/=this.Co,this._o/=this.Co,this}Yn(){return this.To=ua.Yn(this.To,0,1),this.Go=ua.Yn(this.Go,0,1),this._o=ua.Yn(this._o,0,1),this.Co=ua.Yn(this.Co,0,1),this}Qo(t){this.To=ua.Pr(t),this.Go=ua.Ar(t),this._o=ua.Er(t),this.Co=ua.Rr(t)}ta(t,s,i){return`rgb(${100*(ua.Qi(t)?t:this.Lo())}%, ${100*(ua.Qi(s)?s:this.No())}%, ${100*(ua.Qi(i)?i:this.Bo())}%)`}sa(t,s,i,e){return`rgba(${100*(ua.Qi(t)?t:this.Lo())}%, ${100*(ua.Qi(s)?s:this.No())}%, ${100*(ua.Qi(i)?i:this.Bo())}%, ${ua.Qi(e)?e:this.Wo()})`}ia(){const t=Math.round(255*this.Lo()),s=Math.round(255*this.No()),i=Math.round(255*this.Bo());return"#"+aa(t.toString(16))+aa(s.toString(16))+aa(i.toString(16))}ea(t){if("string"!=typeof t)return!1;let s,i,e;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Ro(s),isFinite(i)&&this.Fo(i),isFinite(e)&&this.Oo(e),this.Do(1),!0}na(){return`${Math.round(255*this.Lo())}, ${Math.round(255*this.No())}, ${Math.round(255*this.Bo())}`}ra(){return[Math.round(255*this.Lo()),Math.round(255*this.No()),Math.round(255*this.Bo())]}ha(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Ro(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Oo(n),this.Do(1),!0}oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Ro(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Oo(n),this.Do(1),!0}aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.Ro(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Oo(n),isFinite(r)&&this.Do(r),!0}la(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.Ro(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Oo(n),isFinite(r)&&this.Do(r),!0}ua(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.oa(t):this.ha(t);if(t.startsWith("rgba("))return t.includes("%")?this.la(t):this.aa(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.ca(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.oa(t):4===s.length&&this.la(t):3===s.length?this.ha(t):4===s.length&&this.aa(t)}}return this.ea(t)}toJSON(){return[this.To,this.Go,this._o,this.Co]}fa(t,s,i,e){let n,r,h;if(t%=360,s=ua.Yn(s,0,100),i=ua.Yn(i,0,100),e=ua.Yn(e,0,1),t/=360,i/=100,0==(s/=100))n=r=h=i;else{const e=i<.5?i*(1+s):i+s-i*s,o=2*i-e;n=la(o,e,t+1/3),r=la(o,e,t),h=la(o,e,t-1/3)}return this.Ro(n),this.Fo(r),this.Oo(h),this.Do(e),this}ca(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=ca.exec(s),e=fa.exec(s);return i&&4===i.length?(this.fa(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.fa(+i[1],+i[2],+i[3],+i[4]),0))}da(){const t=this.To,s=this.Go,i=this._o,e=this.Co;return`hsla(${ua.xo.pa(t,s,i)}, ${ua.xo.ma(t,s,i)}%, ${ua.xo.ga(t,s,i)}%, ${e})`}ya(){const t=this.To,s=this.Go,i=this._o;return[ua.xo.pa(t,s,i),ua.xo.ma(t,s,i),ua.xo.ga(t,s,i),this.Co]}wa(t){Array.isArray(t)&&(t.length<3||(this.To=t[0],this.Go=t[1],this._o=t[2],t.length>=4?this.Co=t[3]:this.Co=1))}set r(t){this.Ro(t)}get r(){return this.Lo()}set g(t){this.Fo(t)}get g(){return this.No()}set b(t){this.Oo(t)}get b(){return this.Bo()}set a(t){this.Do(t)}get a(){return this.Wo()}Sa(t,s){switch(t){case 0:this.Ro(s);break;case 1:this.Fo(s);break;case 2:this.Oo(s);break;case 3:this.Do(s);break;default:throw new RangeError("invalid color index")}}va(t){switch(t){case 0:return this.Lo();case 1:return this.No();case 2:return this.Bo();case 3:return this.Wo();default:throw new RangeError("invalid color index")}}static ba(t,s){let i,e;if(Array.isArray(t))i=new ua.xo,i.wa(t);else{if(!(t instanceof ua.xo))throw new Error("unexpected type");i=t}if(Array.isArray(s))e=new ua.xo,e.wa(s);else{if(!(s instanceof ua.xo))throw new Error("unexpected type");e=s}return i.equals(e)}static Ma(t,s){return ua.Yn(Math.max(t,s)-Math.min(t,s),0,1)}static xa(t,s){const i=new ua.xo;return i.Ro(Math.max(t.To,s.To)-Math.min(t.To,s.To)),i.Fo(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),i.Oo(Math.max(t._o,s._o)-Math.min(t._o,s._o)),i.Do(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),i}static Ta(t,s){const i=new ua.xo(0,0,0,1);return i.Ro(Math.max(t.To,s.To)-Math.min(t.To,s.To)),i.Fo(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),i.Oo(Math.max(t._o,s._o)-Math.min(t._o,s._o)),i}static pa(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;let r=0;switch(e){case t:r=(s-i)/(e-n)+(s<i?6:0);break;case s:r=(i-t)/(e-n)+2;break;case i:r=(t-s)/(e-n)+4}return Math.round(r/6*360)}static ma(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;const r=e-n,h=(e+n)/2>.5?r/(2-e-n):r/(e+n);return Math.round(100*h)}static ga(t,s,i){const e=Math.max(t,s,i),n=(e+Math.min(t,s,i))/2;return e?Math.round(100*n):0}},ua.xo.Ga=Object.freeze(ua.Un(ua.xo,1,1,1,1)),ua.xo._a=Object.freeze(ua.Un(ua.xo,0,0,0,1)),ua.xo.Ca=Object.freeze(ua.Un(ua.xo,0,0,0,0))}{const da=self._s;da.Ia=class{constructor(t,s){this.Pa=0,this.Aa=0,t instanceof da.Ia?this.m(t):this.set(t||0,s||0)}set(t,s){this.Pa=+t,this.Aa=+s}m(t){this.Pa=t.Pa,this.Aa=t.Aa}equals(t){return this.Pa===t.Pa&&this.Aa===t.Aa}Ea(t,s){return this.Pa===t&&this.Aa===s}qo(t,s){return t[s]===Math.fround(this.Pa)&&t[s+1]===Math.fround(this.Aa)}Ra(t){this.Pa=+t}Fa(){return this.Pa}Oa(t){this.Aa=+t}Da(){return this.Aa}toArray(){return[this.Pa,this.Aa]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.Pa,t[s]=this.Aa}offset(t,s){this.Pa+=+t,this.Aa+=+s}scale(t,s){this.Pa*=t,this.Aa*=s}wt(t,s){this.Pa/=t,this.Aa/=s}round(){this.Pa=Math.round(this.Pa),this.Aa=Math.round(this.Aa)}floor(){this.Pa=Math.floor(this.Pa),this.Aa=Math.floor(this.Aa)}ceil(){this.Pa=Math.ceil(this.Pa),this.Aa=Math.ceil(this.Aa)}angle(){return da.nr(0,0,this.Pa,this.Aa)}ka(){return this.Pa*this.Pa+this.Aa*this.Aa}length(){return da.tr(this.Pa,this.Aa)}La(t,s){const i=this.Pa*s-this.Aa*t;this.Aa=this.Aa*s+this.Pa*t,this.Pa=i}rotate(t){0!==t&&this.La(Math.sin(t),Math.cos(t))}Na(t,s,i){0===t||s===this.Pa&&i===this.Aa||(this.Pa-=s,this.Aa-=i,this.La(Math.sin(t),Math.cos(t)),this.Pa+=+s,this.Aa+=+i)}move(t,s){0!==s&&(this.Pa+=Math.cos(t)*s,this.Aa+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Pa/=t,this.Aa/=t)}Yn(t,s){this.Pa=da.Yn(this.Pa,t,s),this.Aa=da.Yn(this.Aa,t,s)}Tt(t){return this.Pa*t.Pa+this.Aa*t.Aa}reverse(){this.Pa=-this.Pa,this.Aa=-this.Aa}Ba(){let t=this.Pa;return this.Pa=this.Aa,this.Aa=-t,this}}}{const pa=self._s;pa.Rect=class{constructor(t,s,i,e){this.Wa=NaN,this.ja=NaN,this.Va=NaN,this.Ha=NaN,this.Wa=0,this.ja=0,this.Va=0,this.Ha=0,t instanceof pa.Rect?this.m(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.Wa=+t,this.ja=+s,this.Va=+i,this.Ha=+e}Ua(t,s,i,e){t=+t,s=+s,this.Wa=t,this.ja=s,this.Va=t+ +i,this.Ha=s+ +e}m(t){this.Wa=+t.Wa,this.ja=+t.ja,this.Va=+t.Va,this.Ha=+t.Ha}clone(){return new pa.Rect(this.Wa,this.ja,this.Va,this.Ha)}static za(t,s){const i=new pa.Rect;return i.Ja(Math.min(t.Wa,s.Wa)),i.$a(Math.min(t.ja,s.ja)),i.qa(Math.max(t.Va,s.Va)),i.Xa(Math.max(t.Ha,s.Ha)),i}static Ya(t){return new pa.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Wa===t.Wa&&this.ja===t.ja&&this.Va===t.Va&&this.Ha===t.Ha}Ka(t,s,i,e){return this.Wa===t&&this.ja===s&&this.width()===i&&this.height()===e}qo(t,s){return t[s]===Math.fround(this.Wa)&&t[s+1]===Math.fround(this.ja)&&t[s+2]===Math.fround(this.Va)&&t[s+3]===Math.fround(this.Ha)}Ja(t){this.Wa=+t}Za(){return this.Wa}$a(t){this.ja=+t}Qa(){return this.ja}qa(t){this.Va=+t}tl(){return this.Va}Xa(t){this.Ha=+t}sl(){return this.Ha}toArray(){return[this.Wa,this.ja,this.Va,this.Ha]}jo(){return new Float64Array(this.toArray())}il(){return new DOMRect(this.Wa,this.ja,this.width(),this.height())}static el(t){return pa.Un(pa.Rect,t.left,t.top,t.right,t.bottom)}Vo(t,s){t[s++]=this.Wa,t[s++]=this.ja,t[s++]=this.Va,t[s]=this.Ha}nl(t,s){t[s++]=this.Wa,t[s++]=this.ja,t[s++]=this.Va,t[s++]=this.ja,t[s++]=this.Va,t[s++]=this.Ha,t[s++]=this.Wa,t[s]=this.Ha}rl(t,s,i){t[s++]=this.Wa,t[s++]=this.ja,t[s++]=i,t[s++]=this.Va,t[s++]=this.ja,t[s++]=i,t[s++]=this.Va,t[s++]=this.Ha,t[s++]=i,t[s++]=this.Wa,t[s++]=this.Ha,t[s]=i}width(){return this.Va-this.Wa}height(){return this.Ha-this.ja}hl(){return(this.Wa+this.Va)/2}ol(){return(this.ja+this.Ha)/2}offset(t,s){t=+t,s=+s,this.Wa+=t,this.ja+=s,this.Va+=t,this.Ha+=s}offsetLeft(t){this.Wa+=+t}offsetTop(t){this.ja+=+t}al(t){this.Va+=+t}ll(t){this.Ha+=+t}ul(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.ja<this.Ha?this.Wa<this.Va?this.Ha=this.ja+this.width():this.Ha=this.ja-this.width():this.Wa<this.Va?this.Ha=this.ja-this.width():this.Ha=this.ja+this.width()}cl(t,s){t=+t,s=+s,this.Wa-=t,this.ja-=s,this.Va+=t,this.Ha+=s}fl(t,s){t=+t,s=+s,this.Wa+=t,this.ja+=s,this.Va-=t,this.Ha-=s}multiply(t,s){this.Wa*=t,this.ja*=s,this.Va*=t,this.Ha*=s}wt(t,s){this.Wa/=t,this.ja/=s,this.Va/=t,this.Ha/=s}dl(t){this.Wa=+t-this.Wa,this.Va=+t-this.Va}pl(t){this.ja=+t-this.ja,this.Ha=+t-this.Ha}ml(t,s){const i=this.width(),e=this.height(),n=this.Za()+i*t,r=this.Qa()+e*s;this.Ua(n-e*s,r-i*t,e,i)}gl(){const t=this.Wa;this.Wa=this.Va,this.Va=t}yl(){const t=this.ja;this.ja=this.Ha,this.Ha=t}wl(t){const s=this.ja;this.ja=+t-this.Ha,this.Ha=+t-s}round(){this.Wa=Math.round(this.Wa),this.ja=Math.round(this.ja),this.Va=Math.round(this.Va),this.Ha=Math.round(this.Ha)}Sl(){this.Wa=Math.ceil(this.Wa),this.ja=Math.ceil(this.ja),this.Va=Math.floor(this.Va),this.Ha=Math.floor(this.Ha)}vl(){this.Wa=Math.floor(this.Wa),this.ja=Math.floor(this.ja),this.Va=Math.ceil(this.Va),this.Ha=Math.ceil(this.Ha)}floor(){this.Wa=Math.floor(this.Wa),this.ja=Math.floor(this.ja),this.Va=Math.floor(this.Va),this.Ha=Math.floor(this.Ha)}ceil(){this.Wa=Math.ceil(this.Wa),this.ja=Math.ceil(this.ja),this.Va=Math.ceil(this.Va),this.Ha=Math.ceil(this.Ha)}Yn(t,s,i,e){this.Wa=Math.max(this.Wa,+t),this.ja=Math.max(this.ja,+s),this.Va=Math.min(this.Va,+i),this.Ha=Math.min(this.Ha,+e)}bl(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.Wa=pa.Yn(this.Wa,t,i),this.ja=pa.Yn(this.ja,s,e),this.Va=pa.Yn(this.Va,t,i),this.Ha=pa.Yn(this.Ha,s,e)}normalize(){this.Wa>this.Va&&this.gl(),this.ja>this.Ha&&this.yl()}Ml(t){return!(t.Va<this.Wa||t.Ha<this.ja||t.Wa>this.Va||t.ja>this.Ha)}xl(t,s,i){return!(t.Va+s<this.Wa||t.Ha+i<this.ja||t.Wa+s>this.Va||t.ja+i>this.Ha)}Tl(t,s){return t>=this.Wa&&t<=this.Va&&s>=this.ja&&s<=this.Ha}Gl(t){return t.Wa>=this.Wa&&t.ja>=this.ja&&t.Va<=this.Va&&t.Ha<=this.Ha}_l(t){t.Wa<this.Wa&&(this.Wa=+t.Wa),t.ja<this.ja&&(this.ja=+t.ja),t.Va>this.Va&&(this.Va=+t.Va),t.Ha>this.Ha&&(this.Ha=+t.Ha)}Cl(t){this.Wa=pa._t(t.Wa,t.Va,this.Wa),this.ja=pa._t(t.ja,t.Ha,this.ja),this.Va=pa._t(t.Wa,t.Va,this.Va),this.Ha=pa._t(t.ja,t.Ha,this.Ha)}}}{const ma=self._s;ma.Il=class{constructor(t,s,i,e,n,r,h,o){this.Pl=NaN,this.Al=NaN,this.El=NaN,this.Rl=NaN,this.Fl=NaN,this.Ol=NaN,this.Dl=NaN,this.kl=NaN,this.Pl=0,this.Al=0,this.El=0,this.Rl=0,this.Fl=0,this.Ol=0,this.Dl=0,this.kl=0,t instanceof ma.Il?this.m(t):this.set(t||0,s||0,i||0,e||0,n||0,r||0,h||0,o||0)}set(t,s,i,e,n,r,h,o){this.Pl=+t,this.Al=+s,this.El=+i,this.Rl=+e,this.Fl=+n,this.Ol=+r,this.Dl=+h,this.kl=+o}Ll(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}m(t){this.Pl=t.Pl,this.Al=t.Al,this.El=t.El,this.Rl=t.Rl,this.Fl=t.Fl,this.Ol=t.Ol,this.Dl=t.Dl,this.kl=t.kl}equals(t){return this.Pl===t.Pl&&this.Al===t.Al&&this.El===t.El&&this.Rl===t.Rl&&this.Fl===t.Fl&&this.Ol===t.Ol&&this.Dl===t.Dl&&this.kl===t.kl}Nl(t){this.Pl=+t}Nr(){return this.Pl}Bl(t){this.Al=+t}Br(){return this.Al}Wl(t){this.El=+t}Wr(){return this.El}jl(t){this.Rl=+t}jr(){return this.Rl}Vl(t){this.Fl=+t}Vr(){return this.Fl}Hl(t){this.Ol=+t}Hr(){return this.Ol}Ul(t){this.Dl=+t}Ur(){return this.Dl}zl(t){this.kl=+t}zr(){return this.kl}Jl(){return new DOMQuad(new DOMPoint(this.Pl,this.Al),new DOMPoint(this.El,this.Rl),new DOMPoint(this.Fl,this.Ol),new DOMPoint(this.Dl,this.kl))}static $l(t){return ma.Un(ma.Il,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Pl,this.Al,this.El,this.Rl,this.Fl,this.Ol,this.Dl,this.kl]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.Pl,t[s++]=this.Al,t[s++]=this.El,t[s++]=this.Rl,t[s++]=this.Fl,t[s++]=this.Ol,t[s++]=this.Dl,t[s]=this.kl}ql(t,s,i){t[s++]=this.Pl,t[s++]=this.Al,t[s++]=i,t[s++]=this.El,t[s++]=this.Rl,t[s++]=i,t[s++]=this.Fl,t[s++]=this.Ol,t[s++]=i,t[s++]=this.Dl,t[s++]=this.kl,t[s]=i}offset(t,s){t=+t,s=+s,this.Pl+=t,this.Al+=s,this.El+=t,this.Rl+=s,this.Fl+=t,this.Ol+=s,this.Dl+=t,this.kl+=s}round(){this.Pl=Math.round(this.Pl),this.Al=Math.round(this.Al),this.El=Math.round(this.El),this.Rl=Math.round(this.Rl),this.Fl=Math.round(this.Fl),this.Ol=Math.round(this.Ol),this.Dl=Math.round(this.Dl),this.kl=Math.round(this.kl)}floor(){this.Pl=Math.floor(this.Pl),this.Al=Math.floor(this.Al),this.El=Math.floor(this.El),this.Rl=Math.floor(this.Rl),this.Fl=Math.floor(this.Fl),this.Ol=Math.floor(this.Ol),this.Dl=Math.floor(this.Dl),this.kl=Math.floor(this.kl)}ceil(){this.Pl=Math.ceil(this.Pl),this.Al=Math.ceil(this.Al),this.El=Math.ceil(this.El),this.Rl=Math.ceil(this.Rl),this.Fl=Math.ceil(this.Fl),this.Ol=Math.ceil(this.Ol),this.Dl=Math.ceil(this.Dl),this.kl=Math.ceil(this.kl)}Xl(t){this.Pl=t.Wa,this.Al=t.ja,this.El=t.Va,this.Rl=t.ja,this.Fl=t.Va,this.Ol=t.Ha,this.Dl=t.Wa,this.kl=t.Ha}Yl(t,s){0===s?this.Xl(t):this.Kl(t,Math.sin(s),Math.cos(s))}Kl(t,s,i){const e=t.Wa*s,n=t.ja*s,r=t.Va*s,h=t.Ha*s,o=t.Wa*i,a=t.ja*i,l=t.Va*i,u=t.Ha*i;this.Pl=o-n,this.Al=a+e,this.El=l-n,this.Rl=a+r,this.Fl=l-h,this.Ol=u+r,this.Dl=o-h,this.kl=u+e}Zl(t){t.set(Math.min(this.Pl,this.El,this.Fl,this.Dl),Math.min(this.Al,this.Rl,this.Ol,this.kl),Math.max(this.Pl,this.El,this.Fl,this.Dl),Math.max(this.Al,this.Rl,this.Ol,this.kl))}Tl(t,s){let i=this.El-this.Pl,e=this.Rl-this.Al;const n=this.Fl-this.Pl,r=this.Ol-this.Al,h=t-this.Pl,o=s-this.Al;let a=i*i+e*e,l=i*n+e*r,u=i*h+e*o;const c=n*n+r*r,f=n*h+r*o;let d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return p>=0&&m>0&&p+m<1||(i=this.Dl-this.Pl,e=this.kl-this.Al,a=i*i+e*e,l=i*n+e*r,u=i*h+e*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d,p>=0&&m>0&&p+m<1)}hl(){return(this.Pl+this.El+this.Fl+this.Dl)/4}ol(){return(this.Al+this.Rl+this.Ol+this.kl)/4}Ql(t,s,i,e){return!(!this.Tl(t,s)&&!this.Tl(i,e))||ma.Lr(t,s,i,e,this)}tu(t){let s=t.hl(),i=t.ol();if(this.Tl(s,i))return!0;if(s=this.hl(),i=this.ol(),t.Tl(s,i))return!0;const e=this.Pl,n=this.Al,r=this.El,h=this.Rl,o=this.Fl,a=this.Ol,l=this.Dl,u=this.kl;return ma.Lr(e,n,r,h,t)||ma.Lr(r,h,o,a,t)||ma.Lr(o,a,l,u,t)||ma.Lr(l,u,e,n,t)}su(){const t=this.Pl,s=this.Al;this.Pl=this.El,this.Al=this.Rl,this.El=this.Fl,this.Rl=this.Ol,this.Fl=this.Dl,this.Ol=this.kl,this.Dl=t,this.kl=s}iu(){this.eu(0,2),this.eu(1,3),this.eu(6,4),this.eu(7,5)}nu(){this.eu(0,6),this.eu(1,7),this.eu(2,4),this.eu(3,5)}ru(){this.eu(2,6),this.eu(3,7)}eu(t,s){const i=this.hu(t);this.ou(t,this.hu(s)),this.ou(s,i)}hu(t){switch(t){case 0:return this.Pl;case 1:return this.Al;case 2:return this.El;case 3:return this.Rl;case 4:return this.Fl;case 5:return this.Ol;case 6:return this.Dl;case 7:return this.kl;default:throw new RangeError("invalid quad point index")}}ou(t,s){switch(s=+s,t){case 0:this.Pl=s;break;case 1:this.Al=s;break;case 2:this.El=s;break;case 3:this.Rl=s;break;case 4:this.Fl=s;break;case 5:this.Ol=s;break;case 6:this.Dl=s;break;case 7:this.kl=s;break;default:throw new RangeError("invalid quad point index")}}wt(t,s){this.Pl/=t,this.Al/=s,this.El/=t,this.Rl/=s,this.Fl/=t,this.Ol/=s,this.Dl/=t,this.kl/=s}}}{const ga=self._s,ya=(self.assert,[0,0,1,0,1,1,0,1]),wa=ga.Un(ga.Il);ga.au=class extends ga.Vn{constructor(t,s=!0){super(),t||(t=ya),this.lu=Float64Array.from(t),this.uu=new ga.Rect,this.cu=!0,this.fu=s}zn(){}du(){return this.lu}pu(){return this.lu.length/2}mu(t){this.lu.length===t.length?this.lu.set(t):this.lu=Float64Array.from(t),this.cu=!0}gu(){this.mu(ya)}m(t){this.mu(t.lu)}yu(){this.cu=!0}wu(){if(!this.cu)return;const t=this.lu;let s=t[0],i=t[1],e=s,n=i;for(let r=0,h=t.length;r<h;r+=2){const h=t[r],o=t[r+1];h<s&&(s=h),h>e&&(e=h),o<i&&(i=o),o>n&&(n=o)}this.uu.set(s,i,e,n),this.cu=!1}Xl(t,s,i){let e=this.lu;8!==e.length&&(e=new Float64Array(8),this.lu=e),e[0]=t.Za()-s,e[1]=t.Qa()-i,e[2]=t.tl()-s,e[3]=t.Qa()-i,e[4]=t.tl()-s,e[5]=t.sl()-i,e[6]=t.Za()-s,e[7]=t.sl()-i,this.uu.m(t),0===s&&0===i||this.uu.offset(-s,-i),this.cu=!1}Su(t,s,i){wa.m(t),wa.offset(s,i),this.mu(wa.toArray()),this.cu=!0}transform(t,s,i){let e=0,n=1;0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.vu(t,s,e,n)}vu(t,s,i,e){const n=this.lu;for(let r=0,h=n.length;r<h;r+=2){const h=r+1,o=n[r]*t,a=n[h]*s;n[r]=o*e-a*i,n[h]=a*e+o*i}this.cu=!0}offset(t,s){const i=this.lu;for(let e=0,n=i.length;e<n;e+=2)i[e]+=t,i[e+1]+=s}Tl(t,s){const i=this.lu;if(t===i[0]&&s===i[1])return!0;this.wu();const e=this.uu,n=e.Za()-110,r=e.Qa()-101,h=e.tl()+131,o=e.sl()+120;let a=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0;n<t?(a=n,u=t):(a=t,u=n),r<s?(l=r,c=s):(l=s,c=r),h<t?(f=h,p=t):(f=t,p=h),o<s?(d=o,m=s):(d=s,m=o);let g=0,y=0;for(let e=0,w=i.length;e<w;e+=2){const S=(e+2)%w,v=i[e],b=i[e+1],M=i[S],x=i[S+1];ga.kr(n,r,t,s,a,u,l,c,v,b,M,x)&&++g,ga.kr(h,o,t,s,f,p,d,m,v,b,M,x)&&++y}return g%2==1||y%2==1}bu(t,s,i){const e=t.lu,n=this.lu;if(this.Tl(e[0]+s,e[1]+i))return!0;if(t.Tl(n[0]-s,n[1]-i))return!0;for(let t=0,r=n.length;t<r;t+=2){const h=(t+2)%r,o=n[t],a=n[t+1],l=n[h],u=n[h+1];let c=0,f=0,d=0,p=0;o<l?(c=o,d=l):(c=l,d=o),a<u?(f=a,p=u):(f=u,p=a);for(let t=0,n=e.length;t<n;t+=2){const r=(t+2)%n,h=e[t]+s,m=e[t+1]+i,g=e[r]+s,y=e[r+1]+i;if(ga.kr(o,a,l,u,c,d,f,p,h,m,g,y))return!0}}return!1}Ql(t,s,i,e,n,r){if(this.Tl(i-t,e-s))return!0;if(this.Tl(n-t,r-s))return!0;let h=0,o=0,a=0,l=0;i<n?(h=i,a=n):(h=n,a=i),e<r?(o=e,l=r):(o=r,l=e);const u=this.lu;for(let c=0,f=u.length;c<f;c+=2){const d=(c+2)%f,p=u[c]+t,m=u[c+1]+s,g=u[d]+t,y=u[d+1]+s;if(ga.kr(i,e,n,r,h,a,o,l,p,m,g,y))return!0}return!1}iu(t){const s=this.lu;for(let i=0,e=s.length;i<e;i+=2)s[i]=2*t-s[i];this.cu=!0}nu(t){const s=this.lu;for(let i=0,e=s.length;i<e;i+=2){const e=i+1;s[e]=2*t-s[e]}this.cu=!0}ru(){const t=this.lu;for(let s=0,i=t.length;s<i;s+=2){const i=s+1,e=t[s];t[s]=t[i],t[i]=e}this.cu=!0}Mu(){const t=this.lu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i];return s/this.pu()}xu(){const t=this.lu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i+1];return s/this.pu()}Tu(){return this.lu}Gu(){return this.pu()}_u(){return this.fu}}}{const Sa=self._s;Sa.Cu=class extends Sa.Vn{constructor(t){if(super(),this.Iu=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}zn(){this.Pu(),this.Iu=null}Au(){return 0===this.Iu.size}Pu(){const t=this.Iu;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){const e=this.Iu;let n=e.get(t);n||(n=new Map,e.set(t,n)),n.set(s,i)}zs(t,s){const i=this.Iu.get(t);return i?i.get(s):i}Us(t,s){const i=this.Iu.get(t);return!!i&&i.has(s)}Eu(t,s){const i=this.Iu,e=i.get(t);if(!e)return!1;const n=e.delete(s);return n&&0===e.size&&i.delete(t),n}Ru(t){const s=this.Iu,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[i,e]of s.entries())e.delete(t)&&0===e.size&&s.delete(i)}Fu(){let t=0;for(const s of this.Iu.values())t+=s.size;return t}*values(){for(const t of this.Iu.values())yield*t.values()}*Ou(){for(const[t,s]of this.Iu.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Iu.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const va=self._s;va.Du=class extends va.Vn{constructor(){super(),this.ku=new Set,this.Lu=[],this.Nu=!1}zn(){this.Pu()}Pu(){this.ku.clear(),va.Sh(this.Lu),this.Nu=!1}Bu(t){this.ku.has(t)||(this.ku.add(t),this.Nu||this.Lu.push(t))}Us(t){return this.ku.has(t)}Eu(t){this.ku.delete(t)&&(this.Nu=!0)}Fu(){return this.ku.size}Au(){return 0===this.ku.size}Wu(){return this.Nu&&(this.ju(),this.Nu=!1),this.Lu}ju(){const t=this.Lu;va.Sh(t);for(const s of this.ku)t.push(s)}}}{const ba=self._s,Ma=new Map,xa=new Map,Ta=new Map,Ga=new Map,_a=new Map,Ca=new Map,Ia=new Map,Pa=new Map,Aa=new Map;Aa.set("linear","noease"),Aa.set("default","noease");const Ea=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],Ra=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Fa=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.Vu=class t{constructor(){}static Hu(){return"default"}static Uu(){return"noease"}static zu(t){return Fa.get(t)}static Ju(s,...i){let e,n;this.$u(),s?(Ta.has(s)||Ta.set(s,new Map),e=Ta.get(s),n=[...e.keys()].filter(i=>!t.qu(i,s)||t.qu(i,s).transition.Xu())):(e=_a,n=[...e.keys()]);const r=n.sort();return[...xa.keys()].concat(r).filter(t=>!i.includes(t))}static Yu(){this.$u();const t=[..._a.keys()];return t.sort(),[...xa.keys()].concat(t)}static Ku(){this.$u();const t=[..._a.keys()];return t.sort(),t}static Zu(t){for(const s of Ea)if(self.lang(`ui.bars.timeline.eases.${s}`)===t)return!0;for(const s of Ra)if(self.lang(`ui.bars.timeline.short-eases.${s}`)===t)return!0}static Qu(t){return this.$u(),[...xa.keys()].includes(t)}static tc(s){const i=Aa.get(s);return i?Ma.get(i):t.Qu(s)?Ma.get(s):Ia.has(s)?Ia.get(s):void 0}static sc(t){return this.$u(),Pa.get(t)}static ec(s,i){this.$u();const e=t.tc(s);if(e)return e;if(!i)throw new Error("missing ease function");return Ta.get(i).get(s)}static qu(t,s){this.$u();const i=Ga.get(s);if(i)return i.get(t)}static nc(s,i){return this.$u(),!!t.tc(s)||!!Ta.get(i).get(s)}static rc(s){this.$u();return t.tc(s)||_a.get(s)}static hc(t){return this.$u(),Ca.get(t)}static oc(t){return this.$u(),this.Yu()[t]}static ac(t,s){return this.$u(),this.Ju(s).indexOf(t)}static lc(t){return this.ac(t)}static $u(){0===Ma.size&&(this.uc("default",()=>{}),this.uc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.uc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.uc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.uc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.uc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.uc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.uc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.uc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.uc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.uc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.uc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.uc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.uc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.uc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.uc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.uc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.uc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.uc("easeoutquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.uc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.uc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.uc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.uc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.uc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.uc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.uc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.cc("cubicbezier",this.fc),this.cc("spline",this.dc))}static uc(s,i,e=!1){if("function"==typeof i)t.mc(s,i,"predefined");else{if(!ba.xe(i))throw new Error("unexpected arguments");if(self.yc){const n=ba.Un(self.yc,s,e);n.wc(i),t.mc(s,(t,s,i,e)=>n.Sc(t,s,i,e),"predefined"),Pa.set(s,n)}else{const n=ba.Un(ba.vc,[s,i.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);n.bc(e),t.mc(s,(t,s,i,e)=>n.Sc(t,s,i,e),"predefined")}}}static cc(s,i){t.mc(s,i,"private")}static Mc(s,i,e,n){this.$u(),t.mc(s,i,"custom",e,n)}static xc(t,s){if(this.Qu(t))return;if([...Ia.keys()].includes(t))return;const i=Ta.get(s);i&&i.delete(t);const e=Ga.get(s);e&&e.delete(t)}static mc(t,s,i,e,n){switch(i){case"predefined":Ma.set(t,s),xa.set(t,s);break;case"custom":e?(Ta.has(e)||Ta.set(e,new Map),Ga.has(e)||Ga.set(e,new Map),Ta.get(e).set(t,s),Ga.get(e).set(t,n)):(_a.set(t,s),Ca.set(t,n));break;case"private":Ma.set(t,s),Ia.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Tc(t,s,i,e){return 0===e?s:i*t/e+s}static fc(t,s,i,e,n){return s+3*t*(i-s)+3*t**2*(s+e-2*i)+t**3*(n-s+3*i-3*e)}static dc(t,s,i,e,n,r,h,o,a,l){if(e===n&&r===h)return t;const u=ja(t,s,e,r,o,l),c=ka(i,n,h,a),f=La(i,n,h,a),d=Na(i,n,h,a);return Ba(u,c,f,d)}static Gc(t,s,i,e){const n=[],r=ka(t,s,i,e),h=La(t,s,i,e),o=Na(t,s,i,e);for(let t=0;t<Oa;++t){const s=Ba(t*Da,r,h,o);n.push(s)}return n}};const Oa=11,Da=1/(Oa-1),ka=(t,s,i,e)=>e-3*i+3*s-t,La=(t,s,i,e)=>3*i-6*s+3*t,Na=(t,s,i,e)=>3*(s-t),Ba=(t,s,i,e)=>((s*t+i)*t+e)*t,Wa=(t,s,i,e)=>3*s*t*t+2*i*t+e,ja=(t,s,i,e,n,r)=>{if(1==t)return 1;let h=0,o=1,a=r[o],l=Oa-1;for(r[Oa-1];o!=l&&a<=t;)o++,a=r[o],h+=Da;o--,a=r[o];let u=h+(t-a)/(r[o+1]-a)*Da;const c=ka(s,i,e,n),f=La(s,i,e,n),d=Na(s,i,e,n),p=Wa(u,c,f,d);if(0===p)return u;if(p>=.01){for(let s=0;s<4;++s)u-=(Ba(u,c,f,d)-t)/Wa(u,c,f,d);return u}{let s,i,e=h,n=h+Da,r=0;do{u=e+(n-e)/2;let h=Ba(u,c,f,d)-t;h>0?n=u:e=u,s=Math.abs(h)>1e-7,i=++r<10}while(s&&i);return u}}}{let Va=function(t){Ha.ae(t)};0;const Ha=self._s;Ha._c=class{constructor(t){this.Cc=[],this.qn=t||"",this.Ic=0}zn(){this.Pu(),this.Cc=null}Pc(){return this.qn}Pu(){Ha.bh(this.Cc),this.Ic=0}Ac(){return this.Ic}Ec(t=Math.random()*this.Ac()){let s=0;for(const[i,e]of this.Cc)if(s+=i,t<s)return e;return 0}Rc(){return!!this.Cc.length}Fc(t,s){Va(s),this.Ic+=t,this.Cc.push([t,s])}Oc(t,s){Va(s);const i=0===t;for(let e=0;e<this.Cc.length;e++){const n=this.Cc[e],r=i||n[0]===t,h=n[1]===s;if(r&&h){this.Cc.splice(e,1),this.Ic-=n[0];break}}}Dc(){return JSON.stringify(this.Cc)}static kc(t,s){const i=new Ha._c(s),e=JSON.parse(t);for(const t of e){const s=t[0],e=t[1];i.Fc(s,e)}return i}}}{const Ua=self._s;let za=0;Ua.Lc=class{constructor(t,s){this.Nc=t,this.Bc=s,this.Wc=za++,this.Nc.jc("runtime","screen-reader-text",{type:"create",id:this.Wc,text:this.Bc})}zn(){this.Nc.jc("runtime","screen-reader-text",{type:"release",id:this.Wc}),this.Nc=null,this.Bc="",this.Wc=-1}Vc(t){this.Bc!==t&&(this.Bc=t,this.Nc.jc("runtime","screen-reader-text",{type:"update",id:this.Wc,text:this.Bc}))}}}self._s.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Hc=!1,this.Uc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Uc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Hc=!0}};{const Ja=self._s;self.assert;Ja.Event.zc=class extends Ja.Vn{constructor(t){super(),this.Jc=t,this.$c=[],this.qc=new Set,this.Xc=[],this.Yc=new Set,this.Kc=0,this.Zc=[]}zn(){this.Kc>0||(Ja.Sh(this.$c),this.qc.clear(),Ja.Sh(this.Xc),this.Yc.clear(),Ja.Sh(this.Zc),Ja.zn(this))}Qc(t,s){if(this.tf())this.Zc.push({sf:"add",if:t,capture:s});else if(s){if(this.qc.has(t))return;this.$c.push(t),this.qc.add(t)}else{if(this.Yc.has(t))return;this.Xc.push(t),this.Yc.add(t)}}ef(t,s){this.tf()?this.Zc.push({sf:"remove",if:t,capture:s}):s?this.qc.has(t)&&(this.qc.delete(t),Ja._h(this.$c,t)):this.Yc.has(t)&&(this.Yc.delete(t),Ja._h(this.Xc,t))}nf(){return!this.$c.length&&!this.Xc.length}tf(){return this.Kc>0}rf(){const t=new Set,s=new Set;for(const i of this.Zc)if("add"===i.sf)this.Qc(i.if,i.capture),i.capture?s.delete(i.if):t.delete(i.if);else{if("remove"!==i.sf)throw new Error("invalid op");i.capture?(this.qc.delete(i.if),s.add(i.if)):(this.Yc.delete(i.if),t.add(i.if))}Ja.Ph(this.Xc,t),Ja.Ph(this.$c,s),Ja.Sh(this.Zc)}hf(t){this.af();let s=!1;for(let i=0,e=this.$c.length;i<e;++i)if(this.$c[i](t),t.Hc){s=!0;break}if(!s)for(let s=0,i=this.Xc.length;s<i&&(this.Xc[s](t),!t.Hc);++s);return this.lf(),!t.defaultPrevented}uf(t){this.af();for(let s=0,i=this.$c.length;s<i;++s)this.$c[s](t);for(let s=0,i=this.Xc.length;s<i;++s)this.Xc[s](t);return this.lf(),!0}af(){this.Kc++}lf(){this.Kc--,0===this.Kc&&this.Zc.length>0&&this.rf()}cf(t){t?this.af():this.lf()}ff(t){let s=[];for(let i=0,e=this.$c.length;i<e;++i){let e=this.$c[i];s.push(Ja.df(()=>e(t)))}for(let i=0,e=this.Xc.length;i<e;++i){let e=this.Xc[i];s.push(Ja.df(()=>e(t)))}return Promise.all(s).then(()=>!t.defaultPrevented)}pf(t){const s=[];this.af();for(let i=0,e=this.$c.length;i<e;++i){const e=this.$c[i](t);e instanceof Promise&&s.push(e)}for(let i=0,e=this.Xc.length;i<e;++i){const e=this.Xc[i](t);e instanceof Promise&&s.push(e)}return this.lf(),s.length?Promise.all(s).then(()=>!t.defaultPrevented):!t.defaultPrevented}async mf(t){return await this.pf(t)}async gf(t){this.af();for(let s=0,i=this.$c.length;s<i;++s){const i=this.$c[s](t);i instanceof Promise&&await i}for(let s=0,i=this.Xc.length;s<i;++s){const i=this.Xc[s](t);i instanceof Promise&&await i}return this.lf(),!t.defaultPrevented}*yf(t){this.af();for(let s=0,i=this.$c.length;s<i;++s){const i=this.$c[s](t);Ja.bo(i)&&(yield*i)}for(let s=0,i=this.Xc.length;s<i;++s){const i=this.Xc[s](t);Ja.bo(i)&&(yield*i)}this.lf()}}}{const $a=self._s;$a.Event.wf=class extends $a.Vn{constructor(){super(),this.Sf=new Map,this.vf=!1}zn(){if(this.vf)throw new Error("already released");this.bf(),this.vf=!0,$a.zn(this)}Jn(){return this.vf}bf(){if(this.Sf){for(let t of this.Sf.values())t.zn();this.Sf.clear()}}Mf(t,s){let i=this.Sf.get(t);return i||(s?(i=$a.Un($a.Event.zc,t),this.Sf.set(t,i),i):null)}xf(t){return this.Sf.has(t)}addEventListener(t,s,i){this.Mf(t,!0).Qc(s,!!i)}removeEventListener(t,s,i){let e=this.Mf(t,!1);e&&(e.ef(s,!!i),e.nf()&&this.Sf.delete(t))}dispatchEvent(t){const s=this.Mf(t.type,!1);return!s||(t.cancelable?s.hf(t):s.uf(t))}Tf(t){const s=this.Mf(t.type,!1);return s?(t.Uc=!0,s.ff(t)):Promise.resolve(!0)}async Gf(t){const s=this.Mf(t.type,!1);if(!s)return!0;this.Sf.delete(t.type),t.Uc=!0;const i=await s.ff(t);return s.zn(),i}async _f(t){const s=this.Mf(t.type,!1);return!s||await s.mf(t)}Cf(t){const s=this.Mf(t.type,!1);return!s||s.pf(t)}async If(t){const s=this.Mf(t.type,!1);return!s||await s.gf(t)}Pf(t){const s=this.Mf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.yf(t)}cf(t){for(const s of this.Sf.values())s.cf(t)}}}{let qa=function(t){tl=Za&&0===sl?requestIdleCallback(Xa,{timeout:35}):setTimeout(Xa,sl>0?1:t)},Xa=function(t){if(tl=-1,!Qa.length)return;let s=performance.now(),i=s,e=0,n=0;do{Ya(Qa.shift()),i=performance.now(),++e,n=(i-s)/e*1.1}while(Qa.length&&(Za&&0===sl&&void 0!==t?n<t.timeRemaining():i-s+n<12));if(-1===tl&&Qa.length){let t=i-s;qa(Math.max(16-t,4))}},Ya=function(t){let s;try{s=t.if()}catch(s){return void t.reject(s)}t.resolve(s)};0;const Ka=self._s,Za="undefined"!=typeof requestIdleCallback;let Qa=[],tl=-1,sl=0,il=Ka.qs.Us("disable-asyncify");il&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),Ka.df=function(t){let s=null;return Ka.Ds&&(s=Ka.Ki()),new Promise((i,e)=>{Qa.push({if:t,resolve:i,reject:e,stack:s}),il?Ya(Qa.pop()):-1===tl&&qa(16)})},Ka.df.Af=function(t){if(t)++sl;else if(--sl,sl<0)throw new Error("already turned off high throughput mode")}}{let el=function(){hl=-1},nl=function(){ol=-1,al=-1;let t=Date.now();for(let s of ll)if(s.Ef(t)){let t=s.Rf();(-1===al||t<al)&&(al=t)}else ll.delete(s);if(-1!==al){let s=Math.max(al-t+100,1e3);ol=self.setTimeout(nl,s)}};0;const rl=self._s;let hl=-1;rl.Ff=function(){return-1===hl&&(hl=Date.now(),self.setTimeout(el,16)),hl};let ol=-1,al=-1,ll=new Set;rl.Of=class{constructor(t,s){this.Df=t,this.kf=1e3*s,this.Lf=0,this.Nf=!1}Bf(){let t=rl.Ff();this.Lf=t+this.kf,this.Nf||(ll.add(this),this.Nf=!0),-1===ol?(al=this.Lf,ol=self.setTimeout(nl,this.kf+100)):this.Lf<al&&al>t+1e3&&(self.clearTimeout(ol),al=this.Lf,ol=self.setTimeout(nl,this.kf+100))}Ef(t){return!(t>=this.Lf&&(this.Df()?(this.Lf=t+this.kf,0):(this.Nf=!1,1)))}Rf(){return this.Lf}Wf(){this.Nf&&(ll.delete(this),this.Nf=!1,0===ll.size&&-1!==ol&&(self.clearTimeout(ol),ol=-1,al=-1))}zn(){this.Wf(),this.Df=null}}}{const ul=self._s;ul.jf=class t{constructor(t){this.Vf=!1,this.Hf=t}Uf(){this.Vf||(this.Vf=!0,this.Hf&&(this.Hf(),this.Hf=null))}zf(){return this.Vf}zn(){this.Uf()}static zn(s){return new t(()=>s.zn())}static Jf(t,s,i,e,n){if("string"!=typeof s&&!Array.isArray(s))throw new TypeError("expected string or array");if(null==e)e=!1;else if("boolean"!=typeof e&&"object"!=typeof e)throw new TypeError("invalid event listener options");if(n&&(i=i.bind(n)),Array.isArray(s)||s.includes(" ")){"string"==typeof s&&(s=s.split(" "));const n=new ul.$f;for(const r of s)t.addEventListener(r,i,e),n.Bu(ul.Un(ul.jf,()=>t.removeEventListener(r,i,e)));return n}return t.addEventListener(s,i,e),ul.Un(ul.jf,()=>t.removeEventListener(s,i,e))}},ul.qf=class extends ul.jf{Xf(t){this.Hf=t}},ul.$f=class extends ul.jf{constructor(...t){super(),this.Yf=new Set;for(let s of t)this.Bu(s)}Bu(...t){if(this.Vf)throw new Error("already disposed");for(let s of t)this.Yf.add(s)}Kf(t){if(this.Vf)throw new Error("already disposed");this.Yf.delete(t)}Zf(){if(this.Vf)throw new Error("already disposed");if(this.Yf){for(let t of this.Yf)t.Uf();this.Yf.clear()}}zf(){return this.Vf}Uf(){if(this.Vf)throw new Error("already disposed");this.Vf=!0;for(let t of this.Yf)t.Uf();this.Yf.clear(),this.Yf=null}zn(){this.Uf()}}}{const cl=self._s;cl.Qf=class extends cl.Vn{constructor(){super(),this.td=0,this.Aa=0,this.sd=0,this.ed=0}Bu(t){t=+t,this.Aa=t-this.td,this.sd=this.ed+this.Aa,this.td=this.sd-this.ed-this.Aa,this.ed=this.sd}nd(t){this.ed-=+t}zs(){return this.ed}Bf(){this.td=0,this.Aa=0,this.sd=0,this.ed=0}Set(t){this.td=0,this.Aa=0,this.sd=0,this.ed=+t}rd(t){this.td=t.td,this.Aa=t.Aa,this.sd=t.sd,this.ed=t.ed}zn(){}}}{const fl=self._s,dl={},pl=!0;dl.hd=function(t){this.od=t,this.right=this.od.ad,this.left=this.od.ad,this.parent=null,this.color=!1,this.key=null},dl.ld=function(t){this.size=0,this.ad=new dl.hd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad,this.compare=t||this.ud},dl.ld.prototype.ud=function(t,s){return t<s?-1:s<t?1:0},dl.ld.prototype.clone=function(){var t=new dl.ld(this.compare);return t.fd(this),t},dl.ld.prototype.clear=function(){this.size=0,this.ad=new dl.hd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad},dl.ld.prototype.dd=function(t){var s=t.right;t.right=s.left,s.left!=this.ad&&(s.left.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,s.left=t,t.parent=s},dl.ld.prototype.pd=function(t){var s=t.left;t.left=s.right,s.right!=this.ad&&(s.right.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,s.right=t,t.parent=s},dl.ld.prototype.md=function(t){if(this.contains(t))this.gd(t).key=t;else{var s=new dl.hd(this);s.key=t;for(var i=this.ad,e=this.root;e!=this.ad;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;s.parent=i,i==this.ad?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.ad,s.right=this.ad,s.color=pl,this.yd(s),this.size++}},dl.ld.prototype.yd=function(t){for(;t!=this.ad&&t!=this.root&&t.parent.color==pl;){var s;t.parent==t.parent.parent.left?(s=t.parent.parent.right).color==pl?(t.parent.color=!1,s.color=!1,t.parent.parent.color=pl,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.dd(t)),t.parent.color=!1,t.parent.parent.color=pl,t.parent.parent!=this.ad&&this.pd(t.parent.parent)):(s=t.parent.parent.left).color==pl?(t.parent.color=!1,s.color=!1,t.parent.parent.color=pl,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.pd(t)),t.parent.color=!1,t.parent.parent.color=pl,t.parent.parent!=this.ad&&this.dd(t.parent.parent))}this.root.color=!1},dl.ld.prototype.wd=function(t){var s,i;(i=(s=t.left==this.ad||t.right==this.ad?t:this.Sd(t)).left!=this.ad?s.left:s.right).parent=s.parent,s.parent==this.ad?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.vd(i),this.size--},dl.ld.prototype.vd=function(t){for(;t!=this.root&&0==t.color;){var s;t==t.parent.left?((s=t.parent.right).color==pl&&(s.color=!1,t.parent.color=pl,this.dd(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=pl,t=t.parent):(0==s.right.color&&(s.left.color=!1,s.color=pl,this.pd(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.dd(t.parent),t=this.root)):((s=t.parent.left).color==pl&&(s.color=!1,t.parent.color=pl,this.pd(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=pl,t=t.parent):(0==s.left.color&&(s.right.color=!1,s.color=pl,this.dd(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.pd(t.parent),t=this.root))}t.color=!1},dl.ld.prototype.remove=function(t){var s=this.gd(t);if(s!=this.ad){var i=s.key;return this.wd(s),i}return null},dl.ld.prototype.bd=function(t,s){this.remove(s)},dl.ld.prototype.min=function(t){for(;t.left!=this.ad;)t=t.left;return t},dl.ld.prototype.max=function(t){for(;t.right!=this.ad;)t=t.right;return t},dl.ld.prototype.Sd=function(t){if(t.right!=this.ad)return this.min(t.right);for(var s=t.parent;s!=this.ad&&t==s.right;)t=s,s=s.parent;return s},dl.ld.prototype.Md=function(t){if(t.left!=this.ad)return this.max(t.left);for(var s=t.parent;s!=this.ad&&t==s.left;)t=s,s=s.parent;return s},dl.ld.prototype.xd=function(t){if(this.size>0){var s=this.gd(t);if(s==this.ad)return null;if(s.right!=this.ad)return this.min(s.right).key;for(var i=s.parent;i!=this.ad&&s==i.right;)s=i,i=i.parent;return i!=this.ad?i.key:null}return null},dl.ld.prototype.Td=function(t){if(this.size>0){var s=this.gd(t);if(s==this.ad)return null;if(s.left!=this.ad)return this.max(s.left).key;for(var i=s.parent;i!=this.ad&&s==i.left;)s=i,i=i.parent;return i!=this.ad?i.key:null}return null},dl.ld.prototype.Gd=function(){return this.min(this.root).key},dl.ld.prototype._d=function(){return this.max(this.root).key},dl.ld.prototype.gd=function(t){for(var s=this.root;s!=this.ad&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},dl.ld.prototype.contains=function(t){return null!=this.gd(t).key},dl.ld.prototype.getValues=function(){var t=[];return this.forEach(function(s){t.push(s)}),t},dl.ld.prototype.fd=function(t){if("array"==dl.Cd(t))for(var s=0;s<t.length;s++)this.md(t[s]);else if("function"==dl.Cd(t.forEach))t.forEach(this.md,this);else if("function"==dl.Cd(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.md(i[s])}else if("object"==dl.Cd(t))for(var e in t)this.md(t[e])},dl.ld.prototype.Id=function(t){if("array"==dl.Cd(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==dl.Cd(t.forEach))t.forEach(this.bd,this);else if("function"==dl.Cd(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.remove(i[s])}else if("object"==dl.Cd(t))for(var e in t)this.remove(t[e])},dl.ld.prototype.Pd=function(t){if("array"==dl.Cd(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==dl.Cd(t.forEach))return t.every(this.contains,this);if("function"==dl.Cd(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==dl.Cd(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},dl.ld.prototype.range=function(t,s){var i=[];return this.Ad(function(t){i.push(t)},t,s),i},dl.ld.prototype.Ed=function(t,s){if(!this.Rd())for(var i=this.min(this.root);i!=this.ad;){if(t.call(s,i.key,this))return;i=this.Sd(i)}},dl.ld.prototype.Fd=function(t,s,i){if(!this.Rd())for(var e=this.gd(s);e!=this.ad;){if(t.call(i,e.key,this))return;e=this.Sd(e)}},dl.ld.prototype.traverseTo=function(t,s,i){if(!this.Rd())for(var e=this.min(this.root),n=this.gd(s);e!=n;){if(t.call(i,e.key,this))return;e=this.Sd(e)}},dl.ld.prototype.Ad=function(t,s,i,e){if(!this.Rd())for(var n=this.gd(s),r=this.gd(i);n!=r;){if(t.call(e,n.key,this))return;n=this.Sd(n)}},dl.ld.prototype.Od=function(t,s){if(!this.Rd())for(var i=this.max(this.root);i!=this.ad;){if(t.call(s,i.key,this))return;i=this.Md(i)}},dl.ld.prototype.forEach=function(t,s){if(!this.Rd())for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))t.call(s,i.key,i.key,this)},dl.ld.prototype.some=function(t,s){if(this.Rd())return!1;for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))if(t.call(s,i.key,i.key,this))return!0;return!1},dl.ld.prototype.every=function(t,s){if(this.Rd())return!1;for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},dl.ld.prototype.map=function(t,s){var i=[];if(this.Rd())return i;for(var e=this.min(this.root);e!=this.ad;e=this.Sd(e))i.push(t.call(s,e.key,e.key,this));return i},dl.ld.prototype.filter=function(t,s){var i=[];if(this.Rd())return i;for(var e=this.min(this.root);e!=this.ad;e=this.Sd(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},dl.ld.prototype.Dd=function(){return this.size},dl.ld.prototype.Rd=function(){return 0==this.size},dl.ld.prototype.isSubsetOf=function(t){var s=dl.Dd(t);if(this.Dd()>s)return!1;var i=0;if(this.Rd())return!0;for(var e=this.min(this.root);e!=this.ad;e=this.Sd(e))dl.contains.call(t,t,e.key)&&i++;return i==this.Dd()},dl.ld.prototype.intersection=function(t){var s=new dl.ld(this.compare);if(this.Rd())return s;for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))t.contains.call(t,i.key,i.key,this)&&s.md(i.key);return s},fl.ld=class extends fl.Vn{constructor(t){super(),this.kd=new dl.ld(t),this.Ld=!1,this.Nd=new Set,this.Bd=new Set}Bu(t){this.Ld?this.kd.contains(t)?this.Bd.delete(t):this.Nd.add(t):this.kd.md(t)}Kf(t){this.Ld?this.kd.contains(t)?this.Bd.add(t):this.Nd.delete(t):this.kd.remove(t)}Us(t){return this.Ld?!!this.Nd.has(t)||!this.Bd.has(t)&&this.kd.contains(t):this.kd.contains(t)}Pu(){this.kd.clear(),this.Nd.clear(),this.Bd.clear()}toArray(){if(this.Ld)throw new Error("cannot be used in queueing mode");return this.kd.getValues()}Fu(){return this.kd.Dd()+this.Nd.size-this.Bd.size}Au(){return 0===this.Fu()}Wd(){if(this.Au())throw new Error("empty set");if(this.Ld)throw new Error("cannot be used in queueing mode");const t=this.kd;return t.min(t.root).key}jd(){if(this.Au())throw new Error("empty set");if(this.Ld)throw new Error("cannot be used in queueing mode");const t=this.Wd();return this.Kf(t),t}Vd(t){if(t=!!t,this.Ld!==t&&(this.Ld=t,!t)){for(const t of this.Bd)this.kd.remove(t);this.Bd.clear();for(const t of this.Nd)this.kd.md(t);this.Nd.clear()}}Hd(t){this.kd.forEach(t)}*values(){if(this.Au())return;const t=this.kd;for(let s=t.min(t.root);s!=t.ad;s=t.Sd(s))yield s.key}[Symbol.iterator](){return this.values()}}}{const ml=self._s;ml.Ud=class{constructor(t=ml.hardwareConcurrency){this.zd=t,this.Jd=[],this.$d=0}Bu(t,s){return new Promise((i,e)=>{const n={if:t,resolve:i,reject:e,qd:s};s?.signal&&s.signal.aborted?e(new Error("abort")):(s?.signal&&(n.onabort=()=>{const t=this.Jd.indexOf(n);-1!==t&&(this.Jd.splice(t,1),e(new Error("abort")))},s.signal.addEventListener("abort",n.onabort)),this.Jd.push(n),this.Xd())})}Yd(t){for(let s=0,i=this.Jd.length;s<i;++s)if(this.Jd[s].if===t)return s;return-1}Kd(t,s){const i=this.Yd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.Jd[i].resolve(s),this.Jd.splice(i,1)}Zd(t,s){const i=this.Yd(t);if(-1===i)throw new Error("cannot find promise to reject");this.Jd[i].reject(s),this.Jd.splice(i,1)}async Xd(){if(!this.Jd.length)return;if(this.$d>=this.zd)return;this.$d++;const t=this.Jd.shift();t.qd?.signal&&t.onabort&&t.qd.signal.removeEventListener("abort",t.onabort);try{const s=await t.if();t.resolve(s)}catch(s){t.reject(s)}this.$d--,this.Xd()}}}{const gl=self._s;gl.Qd=class{constructor(t,s,i){this.Df=t,this.tp=s,this.sp=i||2*s,this.ip=-1,this.ep=-1/0,this.np=()=>this.rp(),this.hp=!1,this.op=!1,this.ap=null}lp(t){this.op=!!t}up(){return void 0!==gl.cp&&gl.cp.fp()?this.sp:this.tp}pp(...t){if(-1!==this.ip)return;this.ap=t;let s=gl.Ff(),i=s-this.ep,e=this.up();i>=e&&this.op?(this.ep=s,this.mp()):this.ip=self.setTimeout(this.np,Math.max(e-i,4))}mp(){this.hp=!0;const t=this.ap;this.ap=null,t?this.Df(...t):this.Df(),this.hp=!1}Bf(){this.hp||(this.gp(),this.ap=null,this.ep=gl.Ff())}rp(){this.ip=-1,this.ep=gl.Ff(),this.mp()}gp(){-1!==this.ip&&(self.clearTimeout(this.ip),this.ip=-1)}zn(){this.gp(),this.Df=null,this.ap=null,this.np=null}}}{const yl=self._s;yl.yp=class{constructor(){this.wp=new Map,this.Sp=!1,this.vp=null,this.bp=null,this.Mp=null,this.xp=null}Tp(t){this.Sp=!!t}Gp(){return this.Sp}_p(t){this.vp=t}Cp(t){if(!this.vp)throw new Error("no get base size callback set");return this.vp(t)}Ip(t){this.bp=t}Pp(t,s,i,e,n,r){if(!this.bp)throw new Error("no raster at size callback set");return this.bp(t,s,i,e,n,r)}Ap(t){this.Mp=t}Ep(t){if(!this.Mp)throw new Error("no release result callback set");this.Mp(t)}Rp(t){this.xp=t}Fp(){if(!this.xp)throw new Error("no redraw callback set");this.xp()}Op(t){let s=this.wp.get(t);return s||(s=yl.Un(yl.Dp,this,t),this.wp.set(t,s)),s.kp(),s}Lp(t){this.wp.delete(t.Np())}Bp(){for(const t of this.wp.values())t.Wp(),t.jp()}}}{const wl=self._s;wl.Dp=class{constructor(t,s){this.Vp=t,this.Hp=s,this.Up=0,this.zp=0,this.Jp=0,this.$p=this.Vp.Cp(s).then(t=>{this.Vp&&(this.zp=t[0],this.Jp=t[1],this.Vp.Fp())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.qp=!0,this.Vp&&this.Vp.Fp()}),this.Xp=0,this.Yp=0,this.Kp=0,this.Zp=0,this.Qp=!1,this.tm=null,this.sm=!1,this.qp=!1}zn(){if(this.Up<=0)throw new Error("already released");this.Up--,0===this.Up&&this.im()}Wp(){this.tm&&(this.Vp.Ep(this.tm),this.tm=null)}im(){this.Wp(),this.Vp.Lp(this),this.Vp=null}Np(){return this.Hp}kp(){this.Up++}nm(){return this.Up>0}rm(){return this.tm}jp(){this.sm=!0}async hm(t,s,i){if(0===s||0===i||this.qp)return;if(this.Qp)return;let e=wl.vr(Math.ceil(s)),n=wl.vr(Math.ceil(i));const r=Math.max(e,n);if(r>4096){const t=4096/r;s*=t,i*=t,e=Math.min(Math.ceil(e*t),4096),n=Math.min(Math.ceil(n*t),4096)}if(s<e&&i<n){const t=s/i;e/n>t?(s=n*t,i=n):(s=e,i=e/t)}if(this.Vp.Gp()&&(e=Math.ceil(s),n=Math.ceil(i)),e<=this.Xp&&n<=this.Yp&&!this.sm)return;this.Qp=!0,this.Xp=e,this.Yp=n;const h=await this.Vp.Pp(this.Hp,t,this.Xp,this.Yp,s,i);this.Vp&&(this.Wp(),this.tm=h,this.Kp=s,this.Zp=i,this.Qp=!1,this.sm=!1,this.Vp.Fp())}om(){return this.$p}am(){return this.zp}lm(){return this.Jp}um(){return this.Kp}fm(){return this.Zp}dm(){return this.qp}}}{let Sl=function(t){return Gl.get(t)};0;const vl=self._s;vl.pm="\ufeff";const bl=new Set("0123456789");vl.gm=function(t){return bl.has(t)};const Ml=new Set(" \t\n\r\u2028\u2029");vl.ym=function(t){return Ml.has(t)},vl.wm=function(t){return[...t].filter(t=>!vl.ym(t)).join("")},vl.Sm=function(t){for(const s of t)if(!vl.ym(s))return!1;return!0},vl.vm=function(t){for(const s of t)if(!vl.ym(s))return!1;return!0},vl.bm=function(t){return 1===t.length&&t.charCodeAt(0)<32},vl.Mm=function(t){return[...t].filter(t=>!vl.bm(t)).join("")};let xl=null;try{xl=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}vl.xm=function(t){return!vl.ym(t)&&xl&&xl.test(t)};const Tl=new Set("0123456789.+-e");vl.Tm=function(t){if(!(t=t.trim()).length)return!1;let s=t.charAt(0);if("-"!==s&&!bl.has(s))return!1;for(let s of t)if(!Tl.has(s))return!1;return!0},vl.Gm=function(t){let s=t.length;for(;s>0;){let i=t.charAt(s-1);if(!vl.gm(i))break;--s}return t.substr(0,s)},vl._m=function(t){let s=vl.Gm(t),i=t.substr(s.length);return i=i?(parseInt(i,10)+1).toString():"2",s+i};const Gl=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),_l=/[&<>"']/g;vl.Cm=function(t){return t.replace(_l,Sl)},vl.Im=function(t){let s=vl.Pm(t,"\\","\\\\");return s=vl.Pm(s,'"','\\"'),s=vl.Pm(s,"\t","\\t"),s=vl.Pm(s,"\r",""),vl.Pm(s,"\n","\\n")},vl.Am=function(t){let s=vl.Pm(t,"&","&amp;");return s=vl.Pm(s,"<","&lt;"),s=vl.Pm(s,">","&gt;"),vl.Pm(s,'"',"&quot;")};const Cl=/[-[\]{}()*+?.,\\^$|#\s]/g;vl.Yi=function(t){return t.replace(Cl,"\\$&")},vl.Em=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},vl.Rm=function(t,s){let i=0,e=0;for(;i<s;){if(i=t.indexOf("\n",i),-1===i)return e;e++,i++}return e},vl.Fm=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());const e=s.length;let n=0,r=0,h=[];for(;(r=t.indexOf(s,n))>-1;)h.push(r),n=r+e;return h},vl.Pm=function(t,s,i){return t.replaceAll(s,()=>i)},vl.Om=function(t,s,i){return t.replace(new RegExp(vl.Yi(s),"gi"),()=>i)},vl.Dm=function(t,s){"string"==typeof s?t.textContent=s:s.km()?t.textContent=s.toString():(t.innerHTML=s.Lm(),s instanceof vl.dn&&s.Nm(t))},vl.Bm=function(t,s){return t instanceof vl.fn||t instanceof vl.dn?t.equals(s):s instanceof vl.fn||s instanceof vl.dn?s.equals(t):t===s},vl.Wm=function(t,...s){let i=t;for(let e=0,n=s.length;e<n;++e){const n=`{${e}}`;if(!t.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);i=i.replace(n,s[e].toString())}return i},vl.jm=function(t,...s){let i=t,e=-1,n=-1;for(let r=0,h=s.length;r<h;++r){const h=`{${r}}`;t.includes(h)?(n=r,i=i.replace(h,s[r].toString())):-1===e&&(e=r)}if(e>=0&&n>=0&&e<n)throw new Error(`missing placeholder '${e}' in string substitution`);return i},vl.Vm=function(t,s){let i=t;for(let[t,e]of Object.entries(s))i=i.replaceAll(t,e.toString());return i},vl.Hm=function(t,s){return t>s?1:t<s?-1:0},vl.Um=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return i>e?1:i<e?-1:0};const Il=new self.Intl.Segmenter;vl.zm=function(t){const s=[];for(const i of Il.segment(t))s.push(i.segment);return s},vl.Jm=function*(t){for(const s of Il.segment(t))yield s.segment},vl.$m=function(t){let s=0;for(const i of Il.segment(t))++s;return s};const Pl=1073741824,Al=1099511627776;vl.qm=function(t,s){let i="common."+(s?"dataRates":"dataSizes")+".";const e=self.Xm;if(t<1024)return e(i+"bytes",t);if(t<1048576){let s=t/1024;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"kilobytes",s)}if(t<Pl){let s=t/1048576;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"megabytes",s)}if(t<Al){let s=t/Pl;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"gigabytes",s)}{let s=t/Al;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"terabytes",s)}};const El={Ym:!1,Km:!0,Zm:!0,Qm:!0,tg:!0};vl.sg=function(t,s){s=Object.assign({},El,s),vl.eg.ig("common.time");const i=[],e=self.lang,n=self.ng;if(s.Km){const s=Math.floor(t/86400);s>0&&(t-=24*s*3600,i.push(n(".days",null,s)))}if(s.Zm){const s=Math.floor(t/3600);(s>0||i.length)&&(t-=3600*s,i.push(n(".hours",null,s)))}if(s.Qm){const e=Math.floor(t/60);(e>0||i.length||!s.tg)&&(t-=60*e,i.push(n(".minutes",null,e)))}if(s.tg){const s=Math.floor(t%60);i.push(n(".seconds",null,s))}const r=(s.Ym?e(".approx-prefix"):"")+i.join(e(".separator"));return vl.eg.rg(),r},vl.hg=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),n=s-e.length;for(let t=0;t<n;++t)i+="0";return i+e},vl.og=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},vl.ag=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());vl.xh(i,4,"0"),vl.xh(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const s=i[t]-e[t];if(0!==s)return s<0?-1:1}return 0},vl.lg=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random());return("x"===t?s:3&s|8).toString(16)})},vl.ug=function(t,s){if(t.length!==s.length)throw new Error("strings must be same length");let i=0;for(let e=0,n=t.length;e<n;++e)t.charAt(e)!==s.charAt(e)&&++i;return i},vl.cg=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,n,r,h,o;for(t.length>s.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,n=1;n<=t.length;n++)h=s[e-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]}}{let Rl=function(t,s,i){const e=Ol.get(i);if(!e)return"class"===i?s?"</span>":`<span class="bbclass${Wl++}">`:t;if("string"==typeof e){if("a"===e&&0===Nl.length||"abbr"===e&&0===Bl.length)return t;if("a"!==e||s){if("abbr"!==e||s)return"<"+s+e+">";{const t=parseInt(i.substring(3),10)-1;if(t<0||t>=Bl.length)throw new Error("invalid bbcode tip substitution");const s=Bl[t];let e="";if("string"==typeof s?e=s:"function"==typeof s&&(e=s()),"string"!=typeof e)throw new TypeError("invalid bbcode tip");return`<abbr title="${Fl.Pm(e,'"',"&quot;")}">`}}{const t=parseInt(i.substring(1),10)-1;if(t<0||t>=Nl.length)throw new Error("invalid bbcode link substitution");const s=Nl[t];if("string"==typeof s)return`<a href="${Nl[t]}">`;if("function"==typeof s)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(e)){let t=e[0],i=e[1];return s?"</"+t+">":`<${t} class="${i}">`}};0;const Fl=self._s,Ol=(self.assert,new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]])),Dl=new Set(["icon"]),kl=/\[(\/?)([a-zA-Z0-9]+)\]/g,Ll=/\[(\/?)([^\[\n]*?)\]/g;let Nl=null,Bl=null,Wl=0;const jl=/\n/g;Fl.dn=class{constructor(t,s){if(this.fg=s&&s.dg?t:Fl.Cm(t),this.pg="",this.mg=!1,this.gg=[],this.yg=[],s){if(this.mg=!!s.wg,s.links){if(s.links.length>9)throw new Error("too many links");this.gg=s.links}if(s.Sg){if(s.Sg.length>9)throw new Error("too many tips");this.yg=s.Sg}}this.vg=this.fg.includes("["),this.bg=this.mg&&this.fg.includes("\n"),this.Mg=!this.vg&&!this.bg&&!this.fg.includes("&"),this.xg=!1,this.Tg=[]}toString(){return this.fg}valueOf(){return this.fg}km(){return this.Mg}Gg(){return this.vg?this.fg.replace(kl,""):this.fg}Lm(){if(this.Mg)return this.fg;if(!this.pg&&this.fg){let t=this.fg;this.vg&&(Wl=0,Nl=this.gg,Bl=this.yg,t=t.replace(kl,Rl),Nl=null,Bl=null),this.bg&&(t=t.replace(jl,"<br>")),this.pg=t}return this.pg}Nm(t){if(this.gg.length)for(let s=0,i=this.gg.length;s<i;++s){const i=this.gg[s];if("function"!=typeof i)continue;const e=t.querySelector(".bblink"+s);if(!e)throw new Error("unable to attach BBString link handler");e.onclick=i}}equals(t){return t instanceof Fl.fn?this.Lm()===t.Lm():t instanceof Fl.dn?this.fg===t.fg:this.fg===t}_g(){if(this.xg)return this.Tg;const t=[],s=this.fg,i=[];Ll.lastIndex=0;let e=0,n=null;for(;null!==(n=Ll.exec(s));){const r=n.index;if(r>0&&"\\"===s.charAt(r-1))continue;const h=n[0],o=n[1],a=n[2],l=s.substring(e,r);if(e=r+h.length,l&&t.push({text:l,Cg:i.slice(0)}),a)if(o){const t=a.toLowerCase();for(let s=i.length-1;s>=0;--s)if(i[s].tag===t){i.splice(s,1);break}}else{let s=a,e=null;const n=a.indexOf("=");if(-1!==n?(s=a.substring(0,n).toLowerCase(),e=a.substring(n+1)):s=s.toLowerCase(),Dl.has(s)){if("icon"!==s)throw new Error(`unknown self-closing tag ${s}`);t.push({icon:e,Cg:i.slice(0)})}else i.push({tag:s,Ig:e})}}e<s.length&&t.push({text:s.substring(e),Cg:i.slice(0)});for(const s of t)s.text&&(s.text=this.Pg(s.text));return this.Tg=t.map(t=>t.icon?Fl.Un(Fl.Ag,{icon:t.icon,Cg:t.Cg}):Fl.Un(Fl.Eg,{Rg:Fl.zm(t.text),Cg:t.Cg})),this.xg=!0,this.Tg}Pg(t){return t=Fl.Pm(t,"\\[","["),Fl.Pm(t,"\\\\","\\")}static Fg(t){return Fl.Un(Fl.dn,t,{dg:!0}).Gg()}static Og(t){return t.replace(Ll,"")}}}{let Vl=function(t){return""!==t&&""!==t&&$l.ym(t)},Hl=function(t){return ql.has(t)},Ul=function(t){return $l.xm(t)&&!Hl(t)},zl=function(t){for(;t.length>0&&Vl(t.at(-1));)t.pop()},Jl=function(t){return"\n"===t||"\r\n"===t};0;const $l=self._s,ql=new Set("");$l.Dg=class{constructor(){this.kg=[],this.Lg=null}Ng(){return this.kg}Bg(){return this.kg.length}Wg(t){this.Lg=t}jg(t,s){let i=0,e=0,n=0,r=0,h=0;for(const o of t){if(-1===o.Vg()){const t=s(o);o.Hg(t.height),o.Ug(t.fontBoundingBoxAscent||0),o.zg(t.fontBoundingBoxDescent||0),o.Jg(t.$g||0),o.qg()?o.Xg(t.width):o.Yg()&&o.Kg(this.Lg)}i+=o.Vg(),e=Math.max(e,o.Zg()),n=Math.max(n,o.Qg()),r=Math.max(r,o.ty()),h=Math.max(h,o.sy())}return{width:i,height:e,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,$g:h}}iy(t,s,i,e,n,r){this.kg.push($l.Un($l.Dg.ey,{ny:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:n,$g:r}))}Dg(t,s,i,e,n){if("string"==typeof t&&(t=[$l.Un($l.Eg,{Rg:$l.zm(t)})]),$l.Sh(this.kg),!t.length||1===t.length&&t[0].qg()&&t[0].Au()||i<2)return;if(1===t.length){const e=t[0];if(e.qg()&&e.hy()<=100&&!e.oy()){let{width:t,height:r,fontBoundingBoxAscent:h,fontBoundingBoxDescent:o,$g:a}=s(e);if(t+=n,e.Xg(t),e.Hg(r),e.Ug(h||0),e.zg(o||0),e.Jg(a||0),t<=i)return void this.iy([e],t,r,h,o,a)}}let r;r="word"===e?this.ly(t):"cjk"===e?this.uy(t):this.py(t),this.my(r,s,i,n)}ly(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.gy();if(n.Yg())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.yy())if(Jl(r))i.length>0&&s.push(i),s.push([$l.Un($l.Eg,{Rg:["\n"],Cg:t})]),i=[];else if(0===i.length)i.push($l.Un($l.Eg,{Rg:[r],Cg:t})),e=Vl(r);else{const n=Vl(r);if(n===e){const s=i.at(-1);s.gy()===t?s.wy(r):i.push($l.Un($l.Eg,{Rg:[r],Cg:t}))}else s.push(i),i=[$l.Un($l.Eg,{Rg:[r],Cg:t})],e=n}}return i.length>0&&s.push(i),s}uy(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.gy();if(n.Yg())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.yy())if(Jl(r))i.length>0&&s.push(i),s.push([$l.Un($l.Eg,{Rg:["\n"],Cg:t})]),i=[];else if(0===i.length)i.push($l.Un($l.Eg,{Rg:[r],Cg:t})),e=Hl(r);else if(e||Ul(r)){const s=i.at(-1);s.gy()===t?s.wy(r):i.push($l.Un($l.Eg,{Rg:[r],Cg:t})),e=Hl(r)}else s.push(i),i=[$l.Un($l.Eg,{Rg:[r],Cg:t})],e=Hl(r)}return i.length>0&&s.push(i),s}py(t){const s=[];for(const i of t)if(i.qg()){const t=i.yy();$l.Rn(s,t.map(t=>[$l.Un($l.Eg,{Rg:[t],Cg:i.gy()})]))}else s.push([i]);return s}Sy(t){return t.map(t=>t.vy())}by(t,s){const i=t.length?t.at(-1):null;let e=0;i&&i.qg()&&s[0].qg()&&s[0].gy()===i.gy()&&(i.My(s[0].yy()),e=1);for(let i=s.length;e<i;++e){const i=s[e];t.push(i.vy())}}my(t,s,i,e){let n=[],r=0,h=0,o=0,a=0,l=0;for(const e of t){if(1===e.length&&e[0].qg()&&1===e[0].hy()&&Jl(e[0].yy()[0])){if(0===h){const t=s($l.Un($l.Eg,{Rg:[" "],Cg:e[0].gy()}));h=t.height,o=t.fontBoundingBoxAscent||0,a=t.fontBoundingBoxDescent||0,l=t.$g||0}this.iy(n,r,h,o,a,l),n=[],r=0,h=0,o=0,a=0,l=0;continue}const t=this.Sy(n);this.by(t,e);const u=this.jg(t,s),c=u.width;if(c>=i)if(n.length>0&&this.iy(n,r,h,o,a,l),n=[],e[0].qg()&&$l.vm(e[0].yy()))r=0,h=0,o=0,a=0,l=0;else{this.by(n,e);const t=this.jg(n,s);r=t.width,h=t.height,o=t.fontBoundingBoxAscent,a=t.fontBoundingBoxDescent,l=t.$g}else n=t,r=c,h=u.height,o=u.fontBoundingBoxAscent,a=u.fontBoundingBoxDescent,l=u.$g}n.length>0&&this.iy(n,r,h,o,a,l),this.xy(s,e)}xy(t,s){for(const i of this.kg){const e=i.Ty();if(!e.length)continue;let n=e.at(-1);if(n.qg()){const r=n.yy(),h=r.slice(0);if(zl(h),0===h.length)i.Gy(-n.Vg()),e.pop();else if(h.length<r.length){n._y(h);const s=t(n).width,e=n.Vg()-s;n.Xg(s),i.Gy(-e)}0!==s&&e.length>0&&(n=e.at(-1),n.Gy(s),i.Gy(s))}}}Pu(){$l.Sh(this.kg)}Cy(){return this.kg.reduce((t,s)=>Math.max(t,s.Vg()),0)}Iy(){return this.kg.reduce((t,s)=>t+s.Zg(),0)}}}self._s.Dg.ey=class{constructor(t){this.Tg=t.ny||[],this.Py=t.width||-1,this.Ay=t.height||-1,this.Ey=t.fontBoundingBoxAscent||-1,this.Ry=t.fontBoundingBoxDescent||-1,this.Fy=t.$g||-1,this.Oy=0,this.Dy=0}ny(){return this.Tg.values()}*ky(){const t=this.Tg;for(let s=t.length-1;s>=0;--s)yield t[s]}Ty(){return this.Tg}Gy(t){this.Py+=t}Vg(){return this.Py}Zg(){return this.Ay}Ly(){return this.Ey}ty(){return this.Ry}sy(){return this.Fy}Ny(t){this.Oy=t}By(){return this.Oy}Wy(t){this.Dy=t}jy(){return this.Dy}};self._s.Vy=class{constructor(t){this.Hy=t.Cg||[],this.Py=t.width||-1,this.Ay=t.height||-1,this.Ey=t.fontBoundingBoxAscent||-1,this.Ry=t.fontBoundingBoxDescent||-1,this.Fy=t.$g||-1,this.Oy=0,this.Dy=0}qg(){return!1}Yg(){return!1}gy(){return this.Hy}Uy(t){const s=this.Hy;for(let i=s.length-1;i>=0;--i){const e=s[i];if(e.tag===t)return e}return null}zy(t){return!!this.Uy(t)}Jy(){const t=new Map;for(const s of this.Hy)t.set(s.tag,s.Ig);return t}Gy(t){this.Py+=t}Xg(t){this.Py=t}Vg(){return this.Py}Hg(t){this.Ay=t}Zg(){return this.Ay}Ug(t){this.Ey=t}Qg(){return this.Ey}zg(t){this.Ry=t}ty(){return this.Ry}Jg(t){this.Fy=t}sy(){return this.Fy}Ny(t){this.Oy=t}By(){return this.Oy}Wy(t){this.Dy=t}jy(){return this.Dy}};{const Xl=self._s;Xl.Eg=class extends Xl.Vy{constructor(t){super(t),this.$y=t.Rg}qg(){return!0}My(t){Xl.Rn(this.$y,t),this.Py=-1,this.Ay=-1,this.Ey=-1,this.Ry=-1,this.Fy=-1}wy(t){this.$y.push(t)}vy(){return Xl.Un(Xl.Eg,{Rg:this.$y.slice(0),Cg:this.Hy,width:this.Py,height:this.Ay,fontBoundingBoxAscent:this.Ey,fontBoundingBoxDescent:this.Ry,$g:this.Fy})}yy(){return this.$y}_y(t){this.$y=t}hy(){return this.$y.length}Au(){return 0===this.$y.length}oy(){return this.$y.includes("\n")}}}{const Yl=self._s;Yl.Ag=class extends Yl.Vy{constructor(t){super(t),this.qy=t.icon}Yg(){return!0}Xy(){return this.qy}vy(){return Yl.Un(Yl.Ag,{icon:this.qy,Cg:this.Hy,width:this.Py,height:this.Ay,fontBoundingBoxAscent:this.Ey,fontBoundingBoxDescent:this.Ry,$g:this.Fy})}Yy(t){if(!t)return null;let s=Number(this.qy);return String(s)===this.qy?(s=Math.floor(s),t.Ky(s)):t.Zy(this.qy)}Kg(t){const s=this.Yy(t);this.Py=s?this.Ay*s.Vg()/s.Zg():0}Qy(t){const s=this.Yy(t);return s?s.Qy():null}hy(){return 1}}}{const Kl=self._s;Kl.tw=class{constructor(t){this.sw=new Map,this.iw=t.ew,this.rw=t.hw}zn(){for(const t of this.sw.values())t.zn();this.sw.clear()}ow(t){let s=this.sw.get(t);if(s)return s;const i=this.iw(t);return s=Kl.Un(Kl.aw,this,{source:t,lw:i}),this.sw.set(t,s),s}uw(t){return this.sw.has(t)}cw(t){const s=this.sw.get(t);s&&s.zn(),this.sw.delete(t)}async fw(t){return await this.rw(t)}}}{const Zl=self._s;Zl.aw=class{constructor(t,s){this.dw=t,this.pw=s.source,this.mw=[],this.gw=new Map,this.yw=!1,this.ww=!1,this.Sw=null;const i=s.lw.bw;for(let t=0,s=i.length;t<s;++t){const s=i[t],e=Zl.Un(Zl.Mw,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this.mw.push(e),s.tag&&this.gw.set(s.tag.toLowerCase(),e)}}zn(){for(const t of this.mw)t.zn();Zl.Sh(this.mw),this.gw.clear(),this.dw=null,this.pw=null}xw(){return this.yw}Tw(){return this.ww}Gw(){return this.Sw||(this.Sw=this._w()),this.Sw}async _w(){if(this.yw)return;this.yw=!0,this.ww=!0;const t=await this.dw.fw(this.pw);if(!this.dw)return;const s=t.bw;for(let t=0,i=Math.min(s.length,this.mw.length);t<i;++t){const i=s[t].Cw;this.mw[t].Iw(i)}this.ww=!1}Ky(t){return(t=Math.floor(t))<0||t>=this.mw.length?null:this.mw[t]}Zy(t){return this.gw.get(t.toLowerCase())||null}}}self._s.Mw=class{constructor(t,s){this.Pw=t,this.pw=s.source||null,this.Aw=s.index,this.Ew=s.tag,this.Py=s.width,this.Ay=s.height,this.Rw=null}zn(){this.Py=0,this.Ay=0,this.Pw=null}Fw(){return this.pw}Vg(){return this.Py}Zg(){return this.Ay}Iw(t){this.Rw=t}Qy(){return this.Rw}};{let Ql=function(t,s,i,e){const n=lu;nu.R(ou,i,s),nu.R(au,t,s),nu.Gt(n,ou,au),nu.normalize(n,n),e.set(n[0],n[1],n[2],nu.Tt(t,n))},tu=function(t,s,i,e,n,r,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.Ow,f=h.Dw,d=h.kw,p=1-c,m=1-f,g=1-d;return o*t*c+o*e*p+a*s*f+a*n*m+l*i*d+l*r*g>=u||o*e*c+o*t*p+a*n*f+a*s*m+l*r*d+l*i*g>u},su=function(t,s,i,e){return e.x*t+e.y*s+e.z*i>=e.w};0;const iu=self._s,eu=self.hs,nu=eu.ys,ru=eu.ws,hu=eu.fs,ou=nu.create(),au=nu.create(),lu=nu.create(),uu=ru.create(),cu=hu.create(),fu=nu.create(),du=nu.create(),pu=nu.create(),mu=nu.create(),gu=nu.create(),yu=nu.create(),wu=nu.create(),Su=nu.create(),vu=ru.S(0,0,1,1);iu.Lw={Nw(t,s,i,e,n,r,h){const o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15];let c=n[0]*o+n[4]*a+n[8]*l+n[12]*u,f=n[1]*o+n[5]*a+n[9]*l+n[13]*u,d=n[2]*o+n[6]*a+n[10]*l+n[14]*u,p=n[3]*o+n[7]*a+n[11]*l+n[15]*u;return 0!==p&&(p=1/p,c*=p,f*=p,d*=p,h[0]=(.5*c+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},Bw(t,s,i,e,n,r,h){const o=cu,a=uu;return hu.multiply(o,n,e),null!==hu.M(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,ru.At(a,a,o),0!==a[3]&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0))},Ww(t,s,i,e,n,r,h){const o=ou,a=au;if(!iu.Lw.Bw(t,s,0,e,n,r,o))return!1;if(!iu.Lw.Bw(t,s,1,e,n,r,a))return!1;const l=au;nu.R(l,a,o);const u=lu;nu.set(u,0,0,1);const c=-i,f=nu.Tt(u,l);let d=0;if(0===f){if(0!==nu.Tt(u,o)+c)return!1}else if(d=-(nu.Tt(o,u)+c)/f,d<0)return!1;return nu.St(h,o,l,d),!0}};class bu{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Ow=NaN,this.Dw=NaN,this.kw=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Ow=t>0?1:0,this.Dw=s>0?1:0,this.kw=i>0?1:0}}iu.Lw.jw=class{constructor(){this.Vw=new bu,this.Hw=new bu,this.Uw=new bu,this.zw=new bu,this.Jw=new bu,this.$w=new bu}qw(t,s){const i=vu;iu.Lw.Bw(0,1,0,t,s,i,fu),iu.Lw.Bw(1,1,0,t,s,i,du),iu.Lw.Bw(0,0,0,t,s,i,pu),iu.Lw.Bw(1,0,0,t,s,i,mu),iu.Lw.Bw(0,1,1,t,s,i,gu),iu.Lw.Bw(1,1,1,t,s,i,yu),iu.Lw.Bw(0,0,1,t,s,i,wu),iu.Lw.Bw(1,0,1,t,s,i,Su),Ql(pu,fu,gu,this.Vw),Ql(fu,du,yu,this.Hw),Ql(du,mu,Su,this.Uw),Ql(mu,pu,wu,this.zw),Ql(wu,gu,yu,this.$w),Ql(mu,du,fu,this.Jw)}Xw(t,s,i,e,n,r){return tu(t,s,i,e,n,r,this.Vw)&&tu(t,s,i,e,n,r,this.Hw)&&tu(t,s,i,e,n,r,this.Uw)&&tu(t,s,i,e,n,r,this.zw)&&tu(t,s,i,e,n,r,this.Jw)&&tu(t,s,i,e,n,r,this.$w)}Yw(t,s,i){return!su(t,s,i,this.Jw)}}}{const Mu=self._s,xu=self.hs,Tu=xu.ys,Gu=xu.ws,_u=xu.fs,Cu=_u.create(),Iu=Tu.S(0,0,0),Pu=Tu.S(0,0,0),Au=Tu.S(0,0,0),Eu=Tu.S(0,1,0),Ru=(Gu.S(0,0,0,0),new Mu.Il),Fu=new Mu.Rect,Ou=new Mu.Il(0,0,1,0,1,1,0,1),Du={Kw:1,Zw:1e4},ku=_u.S(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Mu.Lw.Qw=class{constructor(t){t=Object.assign({},Du,t),this.Py=0,this.Ay=0,this.tS=Mu.Zn(45),this.sS=Math.tan(this.tS/2),this.iS=_u.create(),this.eS=_u.create(),this.nS=!1,this.rS=t.Kw,this.hS=t.Zw,this.oS=[],this.aS=new Map,this.lS=null,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=null,this.gS=null,this.yS=null,this.wS=null,this.SS=null,this.vS=null,this.bS=new Map,this.MS=null,this.xS=[],this.TS=new Map,this.GS=0,this._S=0,this.CS=1,this.IS=[this.CS],this.PS=1,this.AS=[this.PS],this.ES=.5,this.RS=[this.ES],this.FS=0,this.OS=!0,this.DS=!1}kS(){this.GS=0,this._S=0,this.lS=null,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=null,this.gS=null,this.yS=null,this.wS=null,this.SS=null,this.vS=null,this.LS()}NS(){this.kS(),this.MS=null}BS(){for(const t of this.oS)t.zn();this.kS()}Vg(){return this.Py}Zg(){return this.Ay}WS(t){return this.jS()?100:t/(2*this.VS())}HS(t){return this.jS()?t/(2*this.VS())/this.WS(t):1}US(t){this.rS=t}zS(){return this.rS}JS(t){this.hS=t}$S(){return this.hS}qS(t){this.tS=t,this.sS=Math.tan(this.tS/2)}XS(){return this.tS}VS(){return this.sS}YS(){this.nS=!1}KS(){this.nS=!0}jS(){return!this.nS}ZS(){return this.nS}QS(t,s,i=.5,e=.5){const n=this.zS(),r=this.$S(),h=this.XS();if(.5===i&&.5===e)this.tv()?_u.lt(t,h,s,n,r):_u.perspective(t,h,s,n,r);else{const h=2*(i=1-i)-2,o=2*i,a=2*e-2,l=2*e,u=this.VS()*n,c=u*s;_u.ht(t,h*c,o*c,a*u,l*u,n,r),this.tv()&&_u.mul(t,ku,t)}}sv(t,s,i,e=1){const n=self.devicePixelRatio,r=2*this.WS(i)*n*this.VS()/i,h=s*r/(2*n*e),o=i*r/(2*n*e),a=-h,l=h,u=-o,c=o;this.tv()?_u.dt(t,a,l,u,c,this.zS(),this.$S()):_u.ft(t,a,l,u,c,this.zS(),this.$S())}ev(t,s,i,e,n,r=1){let h=1;this.jS()&&(h=200*this.VS()/n);const o=Au;Tu.set(o,h,-h,1);const a=Iu,l=Pu;Tu.multiply(a,s,o),Tu.multiply(l,i,o),_u.gt(t,a,l,e||Eu),o[2]=r,_u.scale(t,t,o)}nv(t,s,i,e,n,r,h,o){return Tu.set(Iu,t,s,i),Tu.set(Pu,e,n,r),this.ev(Cu,Iu,Pu,Eu,h,o),Cu}rv(t){this.oS.push(t),this.aS.set(t.Pc(),t)}hv(t){const s=this.oS.indexOf(t);-1!==s&&this.oS.splice(s,1),this.aS.delete(t.Pc())}LS(){Mu.Sh(this.oS),this.aS.clear()}ov(t){return this.aS.get(t)||null}av(){return this.lS}lv(){this.uv(this.lS)}cv(){return this.uS}fv(){this.uv(this.uS)}dv(){this.uv(this.cS)}pv(){this.uv(this.fS)}mv(){this.uv(this.dS)}gv(){this.uv(this.pS)}yv(){this.uv(this.mS)}wv(){this.uv(this.gS)}Sv(){this.uv(this.yS)}vv(){this.uv(this.wS)}bv(){this.uv(this.SS)}Mv(){this.uv(this.vS)}xv(t){this.MS=t}Tv(){return this.MS}Gv(t,s,i,e,n,r){const h=Mu.Lw.Cv._v(t,s,i,e,n,r);let o=this.bS.get(h);return o||(o=Mu.Un(Mu.Lw.Cv,this,t,s,i,e,n,r),this.bS.set(h,o)),o.Iv(),o}Pv(t){t.Av(),0===t.Ev()&&(this.MS===t&&(this.MS=null),this.bS.delete(t.Rv()),t.zn())}Fv(t){Mu.Sh(this.xS),this.TS.clear();let s=0;for(const i of t){const t=i[0],e=i[1],n=i[2];this.xS.push([e,n]),this.TS.set(t,{number:s,Ov:e,Dv:n}),s++}}kv(t){return this.xS[t]}Lv(t){return this.kv(t)[0]}Nv(t){return this.kv(t)[1]}Bv(t){const s=this.TS.get(t);if(void 0===s)throw new Error("invalid blend name");return s}Wv(t){const s=this.TS.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}jv(t){this.GS=t}Vv(){return this.GS}Hv(t){this._S=t,this.MS=null}Uv(){return this._S}ey(t,s,i,e){const n=Mu.nr(t,s,i,e),r=Math.sin(n),h=Math.cos(n),o=.5*this.CS,a=r*o,l=h*o,u=this.PS;2===u?this.zv(t,s,0,i,e,0,a,l):1===u?this.Jv(t,s,0,i,e,0,a,l):this.$v(t,s,0,i,e,0,a,l)}qv(t,s,i,e,n,r){const h=Mu.nr(t,s,e,n),o=Math.sin(h),a=Math.cos(h),l=.5*this.CS,u=o*l,c=a*l,f=this.PS;2===f?this.zv(t,s,i,e,n,r,u,c):1===f?this.Jv(t,s,i,e,n,r,u,c):this.$v(t,s,i,e,n,r,u,c)}zv(t,s,i,e,n,r,h,o){const a=this.ES,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=2*o,p=2*h,m=l+h,g=u-o,y=l-h+d,w=u+o+p,S=c+h,v=f-o,b=c-h-d,M=f+o-p;this.Xv(m,g,i,S,v,r,b,M,r,y,w,i,Ou)}Jv(t,s,i,e,n,r,h,o){const a=this.ES,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,v=f+o;this.Xv(d,p,i,y,w,r,S,v,r,m,g,i,Ou)}$v(t,s,i,e,n,r,h,o){const a=this.ES,l=t+a,u=s+a,c=e+a,f=n+a,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,v=f+o;this.Xv(d,p,i,y,w,r,S,v,r,m,g,i,Ou)}Yv(t,s,i,e,n,r){const h=Mu.nr(t,s,i,e),o=Math.sin(h),a=Math.cos(h),l=.5*this.CS,u=o*l,c=a*l,f=this.PS;2===f?this.Kv(t,s,i,e,u,c,n,r):1===f?this.Zv(t,s,i,e,u,c,n,r):this.Qv(t,s,i,e,u,c,n,r)}Kv(t,s,i,e,n,r,h,o){const a=this.ES,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=2*r,p=2*n,m=l+n,g=u-r,y=l-n+d,w=u+r+p,S=c+n,v=f-r,b=c-n-d,M=f+r-p;Ru.set(m,g,S,v,b,M,y,w),Fu.set(h,0,o,0),this.tb(Ru,Fu)}Zv(t,s,i,e,n,r,h,o){const a=this.ES,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,v=f+r;Ru.set(d,p,y,w,S,v,m,g),Fu.set(h,0,o,0),this.tb(Ru,Fu)}Qv(t,s,i,e,n,r,h,o){const a=this.ES,l=t+a,u=s+a,c=i+a,f=e+a,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,v=f+r;Ru.set(d,p,y,w,S,v,m,g),Fu.set(h,0,o,0),this.tb(Ru,Fu)}sb(t,s,i,e){const n=.5*this.CS,r=this.PS;2===r?this.ib(t,s,i,e,n):1===r?this.eb(t,s,i,e,n):this.nb(t,s,i,e,n)}ib(t,s,i,e,n){this.zv(t,s,0,i,s,0,0,n),this.zv(i,s,0,i,e,0,n,0),this.zv(i,e,0,t,e,0,0,-n),this.zv(t,e,0,t,s,0,-n,0)}eb(t,s,i,e,n){this.Jv(t,s,0,i,s,0,0,n),this.Jv(i,s,0,i,e,0,n,0),this.Jv(i,e,0,t,e,0,0,-n),this.Jv(t,e,0,t,s,0,-n,0)}nb(t,s,i,e,n){this.$v(t,s,0,i,s,0,0,n),this.$v(i,s,0,i,e,0,n,0),this.$v(i,e,0,t,e,0,0,-n),this.$v(t,e,0,t,s,0,-n,0)}rb(t){this.sb(t.Za(),t.Qa(),t.tl(),t.sl())}hb(t){const s=Mu.nr(t.Nr(),t.Br(),t.Wr(),t.jr()),i=Math.sin(s),e=Math.cos(s),n=.5*this.CS,r=i*n,h=e*n,o=this.PS;2===o?this.ob(t,r,h):1===o?this.ab(t,r,h):this.lb(t,r,h)}ob(t,s,i){this.zv(t.Nr(),t.Br(),0,t.Wr(),t.jr(),0,s,i),this.zv(t.Wr(),t.jr(),0,t.Vr(),t.Hr(),0,i,-s),this.zv(t.Vr(),t.Hr(),0,t.Ur(),t.zr(),0,-s,-i),this.zv(t.Ur(),t.zr(),0,t.Nr(),t.Br(),0,-i,s)}ab(t,s,i){this.Jv(t.Nr(),t.Br(),0,t.Wr(),t.jr(),0,s,i),this.Jv(t.Wr(),t.jr(),0,t.Vr(),t.Hr(),0,i,-s),this.Jv(t.Vr(),t.Hr(),0,t.Ur(),t.zr(),0,-s,-i),this.Jv(t.Ur(),t.zr(),0,t.Nr(),t.Br(),0,-i,s)}lb(t,s,i){this.$v(t.Nr(),t.Br(),0,t.Wr(),t.jr(),0,s,i),this.$v(t.Wr(),t.jr(),0,t.Vr(),t.Hr(),0,i,-s),this.$v(t.Vr(),t.Hr(),0,t.Ur(),t.zr(),0,-s,-i),this.$v(t.Ur(),t.zr(),0,t.Nr(),t.Br(),0,-i,s)}ub(t){this.CS=t,this.IS[this.IS.length-1]=t}cb(){return this.CS}fb(t){if(this.IS.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this.IS.push(t),this.CS=t}pb(){if(this.IS.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.IS.pop(),this.CS=this.IS.at(-1)}mb(){this.PS=0,this.AS[this.AS.length-1]=0}gb(){this.PS=1,this.AS[this.AS.length-1]=0}yb(){this.PS=2,this.AS[this.AS.length-1]=0}wb(t){if("butt"===t)this.Sb();else if("square"===t)this.bb();else{if("zag"!==t)throw new Error("invalid line cap");this.Mb()}}Sb(){if(this.AS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.AS.push(0),this.PS=0}bb(){if(this.AS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.AS.push(1),this.PS=1}Mb(){if(this.AS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.AS.push(2),this.PS=2}xb(){if(this.AS.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.AS.pop(),this.PS=this.AS.at(-1)}Tb(t){this.ES=t,this.RS[this.RS.length-1]=t}Gb(){return this.ES}_b(t){if(this.RS.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this.RS.push(t),this.ES=t}Cb(){if(this.RS.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.RS.pop(),this.ES=this.RS.at(-1)}Ib(){this.Pb(0),this.Ab(0)}Eb(t){const s=t.length/2;if(s<3)throw new Error("need at least 3 points");const i=s-2,e=i-1,n=t[0],r=t[1];for(let s=0;s<i;s+=2){const i=2*s,h=t[i+2],o=t[i+3],a=t[i+4],l=t[i+5];if(s===e)this.Rb(n,r,h,o,a,l,a,l);else{const s=t[i+6],e=t[i+7];this.Rb(n,r,h,o,a,l,s,e)}}}Fb(){this.Ob(!0),this.FS++}Db(){return this.FS}kb(){this.FS++}Lb(t){this.OS=!!t}Nb(){return this.OS}Bb(t){this.DS=!!t}Wb(){return this.DS}jb(){return!1}tv(){return!1}Vb(){}Hb(){}Ub(){}zb(){return this.Vb()+this.Hb()+this.Ub()}Jb(){return Mu.Un(Mu.Lw.$b,this)}}}self._s.Lw.qb=class{constructor(t,s){this.qn=s.name,this.Xb=t,this.Yb=s.Kb||0,this.Zb=s.Qb||0,this.tM=!!s.sM,this.iM=!!s.eM,this.nM=!!s.rM,this.hM=!!s.oM,this.aM=!!s.animated,this.lM=!!s.uM,this.cM=!!s.fM,this.dM=!1,this.pM=this.tM||this.lM||0!==this.Yb||0!==this.Zb}zn(){this.Xb=null}mM(){return this.Xb}Pc(){return this.qn}gM(){return 0!==this.Yb||0!==this.Zb}yM(){return this.Yb}wM(){return this.Zb}SM(){return this.tM}vM(){return this.iM}bM(){return this.nM}MM(){return this.hM}xM(){return this.aM}TM(){return this.lM}GM(){return this.cM}_M(){return this.dM}CM(){return this.pM}IM(){return!1}};{const Lu=self._s;Lu.Lw.Cv=class{constructor(t,s,i,e,n,r,h){this.Xb=t,this.Up=0,this.PM=null,this.AM="",this.EM=i,this.RM=Lu.Un(Lu.xo),this.RM.set(e),this.FM=n,this.OM=r,this.DM=h,"string"==typeof s?this.AM=s:(this.PM=s,this.AM=this.PM.Pc())}zn(){if(this.Up>0)throw new Error("releasing state group still in use");this.Xb=null,this.PM=null,this.AM=""}kM(){const t=this.Xb;t.uv(this.PM),t.LM(this.EM),t.NM(this.RM),t.Hv(this.FM),t.Pb(this.OM),t.Ab(this.DM),t.xv(this)}Rv(){return Lu.Lw.Cv._v(this.AM,this.EM,this.RM,this.FM,this.OM,this.DM)}Iv(){++this.Up}Av(){--this.Up}Ev(){return this.Up}BM(){this.PM=null}WM(t){if(this.PM=t.ov(this.AM),!this.PM)throw new Error("failed to restore shader program")}static _v(t,s,i,e,n,r){return("string"==typeof t?t:t.Pc())+","+s+","+i.Lo()+","+i.No()+","+i.Bo()+","+i.Wo()+","+e+","+n+","+r}}}{let Nu=function(t,s,i){const e=i.Nr(),n=i.Br(),r=i.Wr()-e,h=i.jr()-n;return[e+r*t+(i.Ur()-e)*s,n+h*t+(i.zr()-n)*s]};0;const Bu=globalThis._s;globalThis.assert;Bu.Lw.jM=class{constructor(t,s,i){this.VM=t,this.HM=s,this.UM=i,this.Pa=NaN,this.Aa=NaN,this.FM=NaN,this.zM=NaN,this.JM=NaN,this.Pa=0,this.Aa=0,this.FM=0,this.zM=0,this.JM=0}$M(t,s,i,e){this.Pa=t,this.Aa=s,this.zM=i,this.JM=e}qM(){return this.Pa}XM(t){this.Pa!==t&&(this.Pa=t,this.VM.YM())}KM(){return this.Aa}ZM(t){this.Aa!==t&&(this.Aa=t,this.VM.YM())}QM(){return this.FM}tx(t){this.FM!==t&&(this.FM=Math.max(t,0),this.VM.YM())}sx(){return this.zM}ix(t){this.zM=t}nx(){return this.JM}hx(t){this.JM=t}ox(t,s,i){[this.Pa,this.Aa]=Nu(t.Pa,t.Aa,s),this.FM=t.FM,this.zM=Bu._t(i.Za(),i.tl(),t.zM),this.JM=Bu._t(i.Qa(),i.sl(),t.JM)}lx(t,s,i){[this.Pa,this.Aa]=Nu(t.Pa,t.Aa,s),this.FM=t.FM,[this.zM,this.JM]=Nu(t.zM,t.JM,i)}ux(){return{x:this.qM(),y:this.KM(),z:this.QM(),u:this.sx(),v:this.nx()}}mx(t){this.XM(t.x),this.ZM(t.y),t.hasOwnProperty("z")&&this.tx(t.z),this.ix(t.u),this.hx(t.v)}gx(){return this.VM}yx(){return this.HM}wx(){return this.UM}},Bu.Lw.Sx=class{constructor(t,s,i){if(t<2||s<2)throw new Error("invalid mesh size");this.vx=t,this.bx=s,this.Mx=i||null,this.xx=[],this.Tx=0,this.Gx=0,this._x=1,this.Cx=1,this.Ix=0,this.Px=!1,this.Ax=[],this.Ex=0,this.Rx=!0;const e=t-1,n=s-1;for(let i=0;i<s;++i){const s=[];for(let r=0;r<t;++r){const t=Bu.Un(Bu.Lw.jM,this,r,i),h=r/e,o=i/n;t.$M(h,o,h,o),s.push(t)}this.xx.push(s)}}zn(){Bu.Sh(this.xx),Bu.Sh(this.Ax)}Fx(){return this.vx}Ox(){return this.bx}Dx(){return this.Mx}kx(){return this.xx}YM(){this.Px=!0,this.Rx=!0}Lx(){if(!this.Px)return;let t=1/0,s=1/0,i=-1/0,e=-1/0,n=0;for(const r of this.xx)for(const h of r){const r=h.qM(),o=h.KM();t=Math.min(t,r),s=Math.min(s,o),i=Math.max(i,r),e=Math.max(e,o),n=Math.max(n,h.QM())}this.Tx=t,this.Gx=s,this._x=i,this.Cx=e,this.Ix=n,this.Px=!1}Nx(){return this.Lx(),this.Tx}Bx(){return this.Lx(),this.Gx}Wx(){return this.Lx(),this._x}jx(){return this.Lx(),this.Cx}Vx(){return this.Lx(),this.Ix}Hx(){return this.Vx()>0}Ux(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.vx||s<0||s>=this.bx?null:this.xx[s][t]}zx(t,s,i){const e=i instanceof Bu.Rect;if(t.Fx()!==this.Fx()||t.Ox()!==this.Ox())throw new Error("source mesh wrong size");const n=t.xx,r=this.xx;for(let t=0,h=r.length;t<h;++t){const h=n[t],o=r[t];for(let t=0,n=o.length;t<n;++t){const n=h[t],r=o[t];e?r.ox(n,s,i):r.lx(n,s,i)}}this.Rx=!0}Jx(t){if(!this.Rx&&this.Ex===t)return;const s=this.vx,i=this.bx,e=this.Ax,n=Math.floor(65535/s)-1;if(n<=0)throw new Error("mesh too large");const r=Math.ceil((i-1)/n);r<e.length&&(e.length=r);let h=0;for(let o=0;o<r;++o){const r=Math.min(n,i-h-1),a=(r+1)*s,l=3*a,u=2*a,c=(s-1)*r*6;if(o===e.length)e.push({$x:new Float32Array(l),qx:new Float32Array(u),Xx:new Uint16Array(c)});else{const t=e[o];t.$x.length!==l&&(t.$x=new Float32Array(l)),t.qx.length!==u&&(t.qx=new Float32Array(u)),t.Xx.length!==c&&(t.Xx=new Uint16Array(c))}const{$x:f,qx:d,Xx:p}=e[o];this.Yx(h,r,t,f,d,p),h+=n}this.Ex=t,this.Rx=!1}Yx(t,s,i,e,n,r){const h=this.xx,o=this.vx;let a=0,l=0,u=0;for(let c=t,f=t+s+1;c<f;++c){const s=h[c],d=c+1,p=c-t,m=p*o,g=(p+1)*o;for(let t=0,h=s.length;t<h;++t){const o=s[t],c=t+1;if(e[a++]=o.qM(),e[a++]=o.KM(),e[a++]=o.QM()+i,n[l++]=o.sx(),n[l++]=o.nx(),c<h&&d<f){const s=t+m,i=c+m,e=c+g,n=t+g;r[u++]=s,r[u++]=i,r[u++]=e,r[u++]=s,r[u++]=e,r[u++]=n}}}}Kx(t,s){this.Jx(s);for(const{$x:s,qx:i,Xx:e}of this.Ax)t.Zx(s,i,e)}Qx(t,s){s||(s=(t,s,i)=>[t,s,i]);const i=this.xx;let e=i[0];for(let n=1,r=i.length;n<r;++n){const h=i[n];let o=e[0],a=h[0];for(let i=1,l=h.length;i<l;++i){const u=e[i],c=h[i],[f,d,p]=s(o.qM(),o.KM(),o.QM()),[m,g,y]=s(u.qM(),u.KM(),u.QM()),[w,S,v]=s(c.qM(),c.KM(),c.QM()),[b,M,x]=s(a.qM(),a.KM(),a.QM());t.qv(f,d,p,m,g,y),t.qv(f,d,p,w,S,v),t.qv(f,d,p,b,M,x),i===l-1&&t.qv(m,g,y,w,S,v),n===r-1&&t.qv(b,M,x,w,S,v),o=u,a=c}e=h}}tT(t){const s=.001,i=.99999999,e=t.du(),n=[],r=this.Fx()-1,h=this.Ox()-1,o=1/r,a=1/h,l=r-1,u=h-1;let c=e[0],f=e[1],d=Bu.Yn(Math.floor(c*r),0,l),p=Bu.Yn(Math.floor(f*h),0,u),m=!0,g=0,y=0,w=0,S=-1;const v=()=>{c=Bu.Yn(Bu._t(c,g,w),0,1),f=Bu.Yn(Bu._t(f,y,w),0,1),n.push(c,f)};for(let t=0,b=e.length;t<b;t+=2){c=e[t],f=e[t+1],n.push(c,f),d=Bu.Yn(Math.floor(c*r),0,l),p=Bu.Yn(Math.floor(f*h),0,u);const M=(t+2)%b;for(g=e[M],y=e[M+1],S=-1;;){if(n.length>1e6)throw new Error("Too many mesh poly points");const t=d*o,e=p*a,r=(d+1)*o,h=(p+1)*a;if(m=Bu.Xr(c,f,t,e,r,e,r,h),0!==S&&(w=Bu.qr(c,f,g,y,t,e,r,h,-.001),w>=0&&w<=i))v(),m=!m,S=0;else if(p>0&&2!==S&&(w=Bu.qr(c,f,g,y,t,e,r,e,s),w>=0&&w<=i))v(),p--,m=!1,S=4;else if(d<l&&3!==S&&(w=Bu.qr(c,f,g,y,r,e,r,h,s),w>=0&&w<=i))v(),d++,m=!1,S=1;else if(d>0&&1!==S&&(w=Bu.qr(c,f,g,y,t,e,t,h,s),w>=0&&w<=i))v(),d--,m=!0,S=3;else{if(!(p<u&&4!==S&&(w=Bu.qr(c,f,g,y,t,h,r,h,s),w>=0&&w<=i)))break;v(),p++,m=!0,S=2}}}return Bu.Un(Bu.au,n)}sT(t,s){const i=this.iT(t);this.eT(i),s.mu(i)}iT(t){const s=[],i=t.du();for(let t=0,e=i.length;t<e;t+=2){const e=i[t],n=i[t+1],[r,h]=this.nT(e,n);s.push(r,h)}return s}nT(t,s){const i=this.Fx()-1,e=this.Ox()-1,n=1/i,r=1/e,h=Bu.Yn(Math.floor(t*i),0,i-1),o=Bu.Yn(Math.floor(s*e),0,e-1),a=h*n,l=o*r,u=(h+1)*n,c=(o+1)*r,f=this.Ux(h,o),d=this.Ux(h+1,o+1),p=Bu.Xr(t,s,a,l,u,l,u,c),m=p?a+n:a,g=p?l:l+r,y=this.Ux(h+(p?1:0),o+(p?0:1)),[w,S,v]=Bu.Yr(t,s,a,l,m,g,u,c);return Bu.Kr(w,S,v,f.qM(),f.KM(),f.QM(),y.qM(),y.KM(),y.QM(),d.qM(),d.KM(),d.QM())}eT(t){const s=[],i=1e-7;let e=t[0],n=t[1],r=e-t.at(-2),h=n-t.at(-1);for(let o=0,a=t.length;o<a;o+=2){const l=(o+2)%a,u=t[l],c=t[l+1],f=u-e,d=c-n,p=Math.abs(f)<i&&Math.abs(r)<i&&Math.sign(d)===Math.sign(h),m=Math.abs(d)<i&&Math.abs(h)<i&&Math.sign(f)===Math.sign(r);(!p&&!m&&Math.abs(f/r-d/h)>.001||0==f&&0===d)&&s.push(e,n),e=u,n=c,r=f,h=d}s.length>=6&&s.length<t.length&&Bu.Th(t,s)}ux(){return{cols:this.Fx(),rows:this.Ox(),points:this.xx.map(t=>t.map(t=>t.ux()))}}mx(t){const s=this.Fx(),i=this.Ox();if(t.cols!==s||t.rows!==i)throw new Error("mesh data wrong size");const e=t.points;for(let t=0;t<i;++t){const i=e[t];for(let e=0;e<s;++e)this.Ux(e,t).mx(i[e])}}}}{let Wu=function(t,s){let i,e,n,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{rT:i,hT:e,format:n,type:r}};0;const ju=self._s,Vu=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),Hu=new Set(["nearest","bilinear","trilinear"]),Uu=new Set(["default","low","high"]),zu=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Ju={oT:"clamp-to-edge",aT:"clamp-to-edge",lT:"trilinear",uT:0,cT:"rgba8",fT:!0,dT:"default",pT:!0,mT:!1,width:-1,height:-1},$u={pT:!0,flipY:!1},qu=new Set;ju.Lw.gT=class{constructor(t){this.Xb=t,this.yT=null,this.Py=0,this.Ay=0,this.wT=!0,this.ST="clamp-to-edge",this.vT="clamp-to-edge",this.bT="trilinear",this.MT=0,this.xT="rgba8",this.TT=!1,this.GT="default",this.Up=0}_T(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer))throw new Error("invalid texture source");if(s=Object.assign({},Ju,s),this.yT)throw new Error("already created texture");if(this.ST=s.oT,this.vT=s.aT,this.bT=s.lT,this.MT=s.uT,this.xT=s.cT,this.TT=!!s.fT&&this.Xb.Nb(),this.GT=s.dT,!zu.has(this.ST)||!zu.has(this.vT))throw new Error("invalid wrap mode");if(!Hu.has(this.bT))throw new Error("invalid sampling");if(!Vu.has(this.xT))throw new Error("invalid pixel format");if(!Uu.has(this.GT))throw new Error("invalid mipmap quality");if(this.wT=!0,t instanceof ArrayBuffer||null===t||s.mT){if(this.Py=s.width,this.Ay=s.height,t instanceof ArrayBuffer&&t.byteLength!==this.Py*this.Ay*4)throw new Error("ArrayBuffer wrong size")}else this.Py=t.width,this.Ay=t.height;if(this.Py<=0||this.Ay<=0)throw new Error("invalid texture data size");if(s.mT){const s=ju.uo(this.Py,this.Ay);s.getContext("2d").drawImage(t,0,0,this.Py,this.Ay),t=s}const i=ju.Sr(this.Py)&&ju.Sr(this.Ay),e=this.Xb.CT();if(this.Py>e||this.Ay>e)throw new Error("texture data exceeds maximum texture size");const n=this.Xb.IT(),r=this.Xb.PT();this.yT=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.yT),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.pT),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const h=Wu(this.xT,n);if(this.Xb.AT()||i||!this.ET())if(r>=2){let s;s=this.TT?Math.floor(Math.log2(Math.max(this.Py,this.Ay))+1):1,n.texStorage2D(n.TEXTURE_2D,s,h.rT,this.Py,this.Ay),t instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.Py,this.Ay,h.format,h.type,new Uint8Array(t)):null!==t&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t)}else t instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.hT,this.Py,this.Ay,0,h.format,h.type,new Uint8Array(t)):null===t?n.texImage2D(n.TEXTURE_2D,0,h.hT,this.Py,this.Ay,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.hT,h.format,h.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this.Py,this.Ay)),t instanceof ImageData){const s=ju.uo(this.Py,this.Ay);s.getContext("2d").putImageData(t,0,0),t=s}const s=ju.uo(ju.vr(this.Py),ju.vr(this.Ay)),i=s.getContext("2d");i.imageSmoothingEnabled="nearest"!==this.bT,i.drawImage(t,0,0,this.Py,this.Ay,0,0,s.width,s.height),n.texImage2D(n.TEXTURE_2D,0,h.hT,h.format,h.type,s)}null!==t&&this.RT(n),n.bindTexture(n.TEXTURE_2D,null),this.Xb.FT(),this.Up=1,qu.add(this)}OT(t,s,i){if(i=Object.assign({},Ju,i),this.yT)throw new Error("already created texture");if(this.ST=i.oT,this.vT=i.aT,this.bT=i.lT,this.xT=i.cT,this.TT=!!i.fT&&this.Xb.Nb(),this.GT=i.dT,!zu.has(this.ST)||!zu.has(this.vT))throw new Error("invalid wrap mode");if(!Hu.has(this.bT))throw new Error("invalid sampling");if(!Vu.has(this.xT))throw new Error("invalid pixel format");if(!Uu.has(this.GT))throw new Error("invalid mipmap quality");this.wT=!1,this.Py=Math.floor(t),this.Ay=Math.floor(s);const e=ju.Sr(this.Py)&&ju.Sr(this.Ay),n=this.Xb.CT();if(this.Py<=0||this.Ay<=0)throw new Error("invalid texture size");if(this.Py>n||this.Ay>n)throw new Error("texture exceeds maximum texture size");if(!this.Xb.AT()&&this.ET()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.Xb.IT(),h=this.Xb.PT();this.yT=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.yT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.pT),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const o=Wu(this.xT,r),a=h>=2?o.rT:o.hT;r.texImage2D(r.TEXTURE_2D,0,a,this.Py,this.Ay,0,o.format,o.type,null),this.RT(r),r.bindTexture(r.TEXTURE_2D,null),this.Xb.FT(),this.Up=1,qu.add(this)}DT(t){if("default"===this.GT)return this.wT?t.NICEST:t.FASTEST;if("low"===this.GT)return t.FASTEST;if("high"===this.GT)return t.NICEST;throw new Error("invalid mipmap quality")}ET(){return"clamp-to-edge"!==this.ST||"clamp-to-edge"!==this.vT}kT(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}RT(t){const s=ju.Sr(this.Py)&&ju.Sr(this.Ay);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.kT(t,this.ST)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.kT(t,this.vT)),"nearest"===this.bT)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.TT=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.Xb.AT())&&this.TT){t.hint(t.GENERATE_MIPMAP_HINT,this.DT(t)),t.generateMipmap(t.TEXTURE_2D);const s="trilinear"===this.bT&&!this.Xb.Wb();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.TT=!1;const i=this.Xb.LT();i&&this.MT>0&&"nearest"!==this.bT&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.MT,this.Xb.NT()))}BT(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.yT||this.Up<=0)throw new Error("texture not created");if(this.wT)throw new Error("cannot update static texture");s=Object.assign({},$u,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,n=this.Xb.PT(),r=this.Xb.IT();r.bindTexture(r.TEXTURE_2D,this.yT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.pT),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY);const h=Wu(this.xT,r),o=n>=2?h.rT:h.hT;try{if(this.Py===i&&this.Ay===e){const s=ju.Sr(this.Py)&&ju.Sr(this.Ay);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(s||this.Xb.AT())&&this.TT&&(r.hint(r.GENERATE_MIPMAP_HINT,this.DT(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Py=i,this.Ay=e;const s=ju.Sr(this.Py)&&ju.Sr(this.Ay);if(!this.Xb.AT()&&this.ET()&&!s)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(s||this.Xb.AT())&&this.TT&&(r.hint(r.GENERATE_MIPMAP_HINT,this.DT(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.Xb.FT()}WT(){if(this.Up>0)throw new Error("texture still has references");if(!this.yT)throw new Error("already deleted texture");qu.delete(this),this.Xb.IT().deleteTexture(this.yT),this.yT=null}jT(){return!!this.yT}VT(){return this.yT}mM(){return this.Xb}HT(){this.Up++}UT(){if(this.Up<=0)throw new Error("no more references");this.Up--}zT(){return this.Up}Vg(){return this.Py}Zg(){return this.Ay}JT(){return this.wT}$T(){let t=this.Py*this.Ay;switch(this.xT){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.TT&&(t+=Math.floor(t/3)),t}static BM(){qu.clear()}static qT(){return qu.values()}}}{const Xu=self._s,Yu=(self.assert,self.hs),Ku=(Yu.ys,Yu.fs),Zu=new Set(["nearest","bilinear","trilinear"]),Qu={lT:"trilinear",alpha:!0,depth:!1,XT:!0,YT:!0,KT:0},tc=new Set;Xu.Lw.ZT=class{constructor(t){this.Xb=t,this.QT=null,this.tG=null,this.yT=null,this.sG=null,this.Py=0,this.Ay=0,this.iG=!0,this.bT="trilinear",this.eG=!0,this.nG=!1,this.rG=!0,this.hG=0,this.oG=Ku.create(),this.aG=0,this.lG=0,this.uG=0}cG(t,s,i){i=Object.assign({},Qu,i);const e=this.Xb.PT();if(this.yT||this.sG)throw new Error("already created render target");if(this.bT=i.lT,this.eG=!!i.alpha,this.nG=!!i.depth,this.rG=!!i.XT,this.iG=!!i.YT,this.hG=i.KT,!Zu.has(this.bT))throw new Error("invalid sampling");if(this.hG>0&&(e<2||this.rG))throw new Error("invalid use of multisampling");if(e<2&&(this.rG=!0),this.Py=t,this.Ay=s,this.Py<=0||this.Ay<=0)throw new Error("invalid render target size");this.fG();const n=this.Xb.IT();if(this.QT=n.createFramebuffer(),this.nG&&(this.tG=n.createFramebuffer()),this.rG){this.yT=this.Xb.dG(this.Py,this.Ay,{lT:this.bT,cT:this.eG?"rgba8":"rgb8",fT:!1});const t=this.yT.VT();n.bindFramebuffer(n.FRAMEBUFFER,this.QT),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.nG&&(n.bindFramebuffer(n.FRAMEBUFFER,this.tG),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0))}else{this.sG=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.sG);const t=this.eG?n.RGBA8:n.RGB8;if(this.hG>0){const s=n.getInternalformatParameter(n.RENDERBUFFER,t,n.SAMPLES);if(s&&s[0]){const t=s[0];this.hG>t&&(this.hG=t)}else this.hG=0}0===this.hG?n.renderbufferStorage(n.RENDERBUFFER,t,this.Py,this.Ay):n.renderbufferStorageMultisample(n.RENDERBUFFER,this.hG,t,this.Py,this.Ay),n.bindFramebuffer(n.FRAMEBUFFER,this.QT),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.sG),this.nG&&(n.bindFramebuffer(n.FRAMEBUFFER,this.tG),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.sG)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this.Xb.pG();this.nG&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.QT),this.Xb.mG()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),tc.add(this)}gG(t,s){if(this.Py===t&&this.Ay===s)return;this.Py=t,this.Ay=s,this.fG();const i=this.Xb.IT();i.bindFramebuffer(i.FRAMEBUFFER,this.QT),this.yT?this.yT.BT(new ImageData(this.Py,this.Ay)):(i.bindRenderbuffer(i.RENDERBUFFER,this.sG),i.renderbufferStorage(i.RENDERBUFFER,this.eG?i.RGBA8:i.RGB8,this.Py,this.Ay),i.bindRenderbuffer(i.RENDERBUFFER,null));const e=this.Xb.pG();this.nG&&e&&(this.Xb.mG()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}WT(){if(!this.yT&&!this.sG)throw new Error("already deleted render target");tc.delete(this);const t=this.Xb.IT();this.yT?(t.bindFramebuffer(t.FRAMEBUFFER,this.QT),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.nG&&(t.bindFramebuffer(t.FRAMEBUFFER,this.tG),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.Xb.yG(this.yT),this.yT=null):this.sG&&(t.bindFramebuffer(t.FRAMEBUFFER,this.QT),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.nG&&(t.bindFramebuffer(t.FRAMEBUFFER,this.tG),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.sG),this.sG=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.Xb.PT()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.QT),this.nG&&t.deleteFramebuffer(this.tG);const s=this.Xb.wG();s.SG=null,s.vG=null,this.QT=null}fG(){this.Xb.QS(this.oG,this.Py/this.Ay),this.aG=this.Xb.XS(),this.lG=this.Xb.zS(),this.uG=this.Xb.$S()}bG(){return this.QT}MG(){return this.tG}mM(){return this.Xb}xG(){return this.yT}TG(){return this.Xb.XS()===this.aG&&this.Xb.zS()===this.lG&&this.Xb.$S()===this.uG||this.fG(),this.oG}GG(){return"nearest"!==this.bT}_G(){return this.eG}CG(){return this.rG}IG(){return this.nG}Vg(){return this.Py}Zg(){return this.Ay}PG(){return this.iG}AG(){return this.hG}EG(){const t={lT:this.bT,alpha:this.eG,XT:this.rG};return this.iG||(t.width=this.Py,t.height=this.Ay),t}FG(t){return"nearest"!==(t=Object.assign({},Qu,t)).lT===this.GG()&&!!t.alpha===this._G()&&!!t.depth===this.IG()&&!(this.Xb.PT()>=2&&!!t.XT!==this.CG())&&("number"==typeof t.width||"number"==typeof t.height?!this.PG()&&this.Vg()===Math.floor(t.width)&&this.Zg()===Math.floor(t.height):this.PG())}OG(){return this.yT?this.yT.VT():null}$T(){return this.yT?this.yT.$T():this.Py*this.Ay*(this.eG?4:3)}static async DG(t,s){const i=await t.kG(s,!0);return await Xu.do(i)}static BM(){tc.clear()}static LG(){return tc.values()}static NG(t,s){for(const i of tc)i.PG()&&i.gG(t,s)}}}{const sc=self._s,ic=self.hs,ec=(ic.ys,ic.fs,new Set(["aPos","aTex","aColor","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]));sc.Lw.BG=class extends sc.Lw.qb{static async WG(t,s){const i=t.IT(),e=s.src,n=s.jG,r=s.name,h=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(h,e),i.compileShader(h);const o=i.createShader(i.VERTEX_SHADER);i.shaderSource(o,n),i.compileShader(o);const a=i.createProgram();i.attachShader(a,h),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aColor"),i.bindAttribLocation(a,3,"aPoints"),i.linkProgram(a);const l=t.VG();if(l?await t.HG(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await sc.dh(5),!i.getShaderParameter(h,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(h);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+t)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(o);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+t)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const t=i.getProgramInfoLog(a);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+t)}const u=sc.Mm(i.getProgramInfoLog(a)||"").trim();return u&&!sc.Sm(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(h),i.deleteShader(o),a}static async UG(t,s){const i=await sc.Lw.BG.WG(t,s);return new sc.Lw.BG(t,i,s)}constructor(t,s,i){super(t,i);const e=t.IT(),n=t.wG();t.Ob(),e.useProgram(s),this.zG=e,this.PM=s,this.JG="<default-device-transform>"===i.name;const r=e.getAttribLocation(s,"aPos"),h=e.getAttribLocation(s,"aTex"),o=e.getAttribLocation(s,"aColor");this.$G=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.qG),e.vertexAttribPointer(r,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==h&&(e.bindBuffer(e.ARRAY_BUFFER,t.XG),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(h)),-1!==o&&(e.bindBuffer(e.ARRAY_BUFFER,t.YG),e.vertexAttribPointer(o,4,t.KG()?e.HALF_FLOAT:e.FLOAT,!1,0,0),e.enableVertexAttribArray(o)),-1!==this.$G&&(e.bindBuffer(e.ARRAY_BUFFER,t.ZG),e.vertexAttribPointer(this.$G,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.$G)),e.bindBuffer(e.ARRAY_BUFFER,null),this.QG=new sc.Lw.t_(this,"matP","mat4"),this.s_=new sc.Lw.t_(this,"matMV","mat4"),this.i_=new sc.Lw.t_(this,"color","vec4"),this.e_=new sc.Lw.t_(this,"samplerFront","sampler"),this.n_=new sc.Lw.t_(this,"pointTexStart","vec2"),this.r_=new sc.Lw.t_(this,"pointTexEnd","vec2"),this.h_=new sc.Lw.t_(this,"zElevation","float"),this.o_=new sc.Lw.t_(this,"tileSize","vec2"),this.a_=new sc.Lw.t_(this,"tileSpacing","vec2"),this.l_=new sc.Lw.t_(this,"color2_","vec4"),this.u_=new sc.Lw.t_(this,"outlineThickness","float"),this.c_=new sc.Lw.t_(this,"samplerBack","sampler"),this.f_=new sc.Lw.t_(this,"samplerDepth","sampler"),this.d_=new sc.Lw.t_(this,"destStart","vec2"),this.p_=new sc.Lw.t_(this,"destEnd","vec2"),this.m_=new sc.Lw.t_(this,"srcStart","vec2"),this.g_=new sc.Lw.t_(this,"srcEnd","vec2"),this.y_=new sc.Lw.t_(this,"srcOriginStart","vec2"),this.w_=new sc.Lw.t_(this,"srcOriginEnd","vec2"),this.S_=new sc.Lw.t_(this,"pixelSize","vec2"),this.v_=new sc.Lw.t_(this,"seconds","float"),this.b_=new sc.Lw.t_(this,"devicePixelRatio","float"),this.M_=new sc.Lw.t_(this,"layerScale","float"),this.x_=new sc.Lw.t_(this,"layerAngle","float"),this.T_=new sc.Lw.t_(this,"layoutStart","vec2"),this.G_=new sc.Lw.t_(this,"layoutEnd","vec2"),this.__=new sc.Lw.t_(this,"zNear","float"),this.C_=new sc.Lw.t_(this,"zFar","float"),this.I_=!!(this.S_.P_()||this.v_.P_()||this.c_.P_()||this.d_.P_()||this.p_.P_()||this.m_.P_()||this.g_.P_()||this.y_.P_()||this.w_.P_()||this.b_.P_()||this.M_.P_()||this.x_.P_()||this.T_.P_()||this.G_.P_());const a=i.parameters||[];this.A_=[],this.dM=this.S_.P_()||this.m_.P_()||this.g_.P_()||this.y_.P_()||this.w_.P_(),this.E_=!1,this.R_=!1,this.i_.F_(1,1,1,1),this.l_.F_(1,1,1,1),this.e_.O_(0),this.c_.O_(1),this.f_.O_(2),this.n_.D_(0,0),this.r_.D_(1,1),this.h_.k_(0),this.o_.D_(0,0),this.a_.D_(0,0),this.d_.D_(0,0),this.p_.D_(1,1),this.m_.D_(0,0),this.g_.D_(0,0),this.y_.D_(0,0),this.w_.D_(0,0),this.S_.D_(0,0),this.b_.k_(1),this.__.k_(t.zS()),this.C_.k_(t.$S()),this.M_.k_(1),this.x_.k_(0),this.v_.k_(0),this.T_.D_(0,0),this.G_.D_(0,0),this.u_.k_(1);for(const t of a){const s=t[0],i=t[2],e=new sc.Lw.t_(this,s,i);"color"===i?e.L_(0,0,0):e.k_(0),this.A_.push(e)}this.JG?this.N_(n.B_):(this.W_(n.B_,!0),this.j_(n.V_,!0));const l=n.H_;e.useProgram(l?l.PM:null)}zn(){this.zG.deleteProgram(this.PM),this.PM=null,this.Xb.hv(this),this.zG=null,super.zn()}U_(){return this.zG}z_(){return this.PM}J_(){return this.A_.length}q_(t){return t<0||t>=this.A_.length?null:this.A_[t].X_()}Y_(t){for(let s=0,i=t.length;s<i;++s)if(!this.A_[s].K_(t[s]))return!1;return!0}Z_(t){for(let s=0,i=t.length;s<i;++s)this.A_[s].Q_(t[s])}tC(t,s,i,e,n,r,h,o,a,l){return!(this.c_.P_()||this.S_.P_()&&!this.S_.sC(n,r)||this.d_.P_()&&!this.d_.sC(t.Za(),t.Qa())||this.p_.P_()&&!this.p_.sC(t.tl(),t.sl())||this.b_.P_()&&!this.b_.iC(h)||this.M_.P_()&&!this.M_.iC(o)||this.x_.P_()&&!this.x_.iC(a)||this.m_.P_()&&!this.m_.sC(s.Za(),s.Qa())||this.g_.P_()&&!this.g_.sC(s.tl(),s.sl())||this.y_.P_()&&!this.y_.sC(i.Za(),i.Qa())||this.w_.P_()&&!this.w_.sC(i.tl(),i.sl())||this.T_.P_()&&!this.T_.sC(e.Za(),e.Qa())||this.G_.P_()&&!this.G_.sC(e.Qa(),e.sl())||this.v_.P_()&&!this.v_.iC(l))}eC(t,s,i,e,n,r,h,o,a,l){this.c_.P_()||(this.S_.P_()&&this.S_.nC(n,r),this.d_.P_()&&this.d_.nC(t.Za(),t.Qa()),this.p_.P_()&&this.p_.nC(t.tl(),t.sl()),this.b_.P_()&&this.b_.rC(h),this.M_.P_()&&this.M_.rC(o),this.x_.P_()&&this.x_.rC(a),this.m_.P_()&&this.m_.nC(s.Za(),s.Qa()),this.g_.P_()&&this.g_.nC(s.tl(),s.sl()),this.y_.P_()&&this.y_.nC(i.Za(),i.Qa()),this.w_.P_()&&this.w_.nC(i.tl(),i.sl()),this.T_.P_()&&this.T_.nC(e.Za(),e.Qa()),this.G_.P_()&&this.G_.nC(e.Qa(),e.sl()),this.v_.P_()&&this.v_.rC(l))}W_(t,s){this.E_&&!s||this.JG||(this.QG.P_()&&this.QG.hC(t),this.E_=!0)}oC(){this.E_=!1}j_(t,s){this.R_&&!s||this.JG||(this.s_.P_()&&this.s_.hC(t),this.R_=!0)}aC(){this.R_=!1}N_(t){if(!this.JG)throw new Error("not device transform shader");this.QG.hC(t);const s=this.Xb,i=s.Vg()/2,e=s.Zg()/2,n=s.nv(i,e,s.WS(s.Zg()),i,e,0,s.Zg());this.s_.hC(n)}lC(t){this.i_.P_()&&this.i_.uC(t[0],t[1],t[2],t[3])}static cC(){return ec}static fC(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static dC(t){const s=t?"highp":"mediump";return["attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"attribute lowp vec4 aColor;","varying lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static pC(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"in lowp vec4 aColor;","out lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static mC(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","}"].join("\n")}static gC(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static yC(t){return["#version 300 es",sc.Lw.BG.fC(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static wC(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","}"].join("\n")}static SC(){return["#extension GL_EXT_frag_depth : enable","varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static vC(t){return["#version 300 es",sc.Lw.BG.fC(t),"in highp vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static bC(t,s,i,e){let n="";return t>=2?n="#version 300 es\n"+sc.Lw.BG.fC(e):(s&&(n="#extension GL_EXT_frag_depth : enable\n"),i&&(n+="#extension GL_EXT_shader_texture_lod : enable\n",n+="#extension GL_OES_standard_derivatives : enable\n")),n+`\nprecision highp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\n${t>=2?"in":"varying"} lowp vec4 vColor;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!i?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= vColor;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static MC(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static xC(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static TC(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static GC(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static _C(t){return["#version 300 es",sc.Lw.BG.fC(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static CC(){return["varying lowp vec4 vColor;","void main(void) {","\tgl_FragColor = vColor;","}"].join("\n")}static IC(){return["precision lowp float;","varying mediump vec2 vTex;","varying vec4 vColor;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(vColor.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(vColor.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static PC(){return["precision lowp float;","varying highp vec2 vTex;","varying vec4 vColor;","void main(void) {","\thighp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = vColor * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static AC(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = vColor * f;","}"].join("\n")}static EC(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = vColor * f;","}"].join("\n")}static RC(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp float innerF = step(distSq, 0.25);","\thighp vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}static FC(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 innerEdge = halfNorm - pixelSize * norm;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = vColor * f;","}"].join("\n")}static OC(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 pxNorm = pixelSize * norm;","\thighp vec2 innerEdge1 = halfNorm - pxNorm;","\thighp vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\thighp float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\thighp vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\thighp vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\thighp vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\thighp vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\thighp float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}}}{const nc=self._s,rc=self.hs.fs,hc=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);nc.Lw.t_=class{constructor(t,s,i){if(!hc.has(i))throw new Error("invalid uniform type");this.Mx=t,this.zG=this.Mx.U_(),this.qn=s,this.Jc=i,this.DC="color"===this.Jc,this.kC=this.zG.getUniformLocation(this.Mx.z_(),s),this.LC=!!this.kC;const e=hc.get(i);this.NC=new Float32Array(e),this.BC=new Float32Array(e)}zn(){this.Mx=null,this.zG=null,this.kC=null}P_(){return this.LC}X_(){return this.Jc}WC(){return this.DC}k_(t){this.P_()&&(this.NC[0]=t,this.BC.set(this.NC),this.zG.uniform1f(this.kC,t))}O_(t){this.P_()&&(this.NC[0]=t,this.BC.set(this.NC),this.zG.uniform1i(this.kC,t))}D_(t,s){this.P_()&&(this.NC[0]=t,this.NC[1]=s,this.BC.set(this.NC),this.zG.uniform2f(this.kC,t,s))}L_(t,s,i){this.P_()&&(this.NC[0]=t,this.NC[1]=s,this.NC[2]=i,this.BC.set(this.NC),this.zG.uniform3f(this.kC,t,s,i))}F_(t,s,i,e){this.P_()&&(this.NC[0]=t,this.NC[1]=s,this.NC[2]=i,this.NC[3]=e,this.BC.set(this.NC),this.zG.uniform4f(this.kC,t,s,i,e))}jC(t){t=Math.fround(t);const s=this.NC;s[0]!==t&&(s[0]=t,this.zG.uniform1f(this.kC,t))}VC(t){const s=this.NC;s[0]!==t&&(s[0]=t,this.zG.uniform1i(this.kC,t))}HC(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.NC;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.zG.uniform2f(this.kC,t,s))}UC(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.NC;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.zG.uniform3f(this.kC,t,s,i))}uC(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const n=this.NC;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(n[0]=t,n[1]=s,n[2]=i,n[3]=e,this.zG.uniform4f(this.kC,t,s,i,e))}hC(t){const s=this.NC;rc.F(s,t)||(nc.yh(s,t,0),this.zG.uniformMatrix4fv(this.kC,!1,t))}K_(t){const s=this.BC;return this.WC()?s[0]===Math.fround(t.Lo())&&s[1]===Math.fround(t.No())&&s[2]===Math.fround(t.Bo()):s[0]===Math.fround(t)}Q_(t){const s=this.BC;this.WC()?(s[0]=t.Lo(),s[1]=t.No(),s[2]=t.Bo()):s[0]=t}iC(t){return this.BC[0]===Math.fround(t)}sC(t,s){const i=this.BC;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}rC(t){this.BC[0]=t}nC(t,s){const i=this.BC;i[0]=t,i[1]=s}}}{const oc=self._s,ac=self.hs,lc=(ac.ws,ac.fs);oc.Lw.zC=class{constructor(t){this.JC=t,this.V_=lc.create(),this.B_=lc.create(),this.SG=null,this.vG=null,this.$C=!1,this.H_=null,this.qC=new oc.Rect,this.clearColor=oc.Un(oc.xo,0,0,0,0)}},oc.Lw.XC=class{constructor(t){const s=new ArrayBuffer(96);this.Jc=0,this.YC=t,this.zG=t.JC.IT(),this.KC=0,this.ZC=0,this.QC=null,this.tI=new Float32Array(s,0,16),this.sI=new Float32Array(s,64,4),this.iI=new Float32Array(s,80,4),this.eI=[]}nI(t,s){this.Jc=1,this.KC=t,this.ZC=s}rI(){const t=this.zG;t.drawElements(t.TRIANGLES,this.ZC,t.UNSIGNED_SHORT,this.KC)}hI(t){this.Jc=2,this.QC=t}oI(){const t=this.zG,s=this.QC;t.bindTexture(t.TEXTURE_2D,s?s.VT():null)}aI(t){this.Jc=20,t.Vo(this.sI,0)}lI(){const t=this.sI,s=this.YC.H_;s.l_.P_()&&s.l_.uC(t[0],t[1],t[2],t[3])}uI(t,s){this.Jc=3,this.KC=t,this.ZC=s}cI(){this.zG.blendFunc(this.KC,this.ZC)}fI(t,s,i,e){this.Jc=4;const n=this.sI;n[0]=t,n[1]=s,n[2]=i,n[3]=e}dI(){const t=this.sI;this.zG.viewport(t[0],t[1],t[2],t[3])}pI(t){this.Jc=5,lc.m(this.tI,t)}mI(){const t=this.YC,s=t.JC.oS,i=t.H_,e=this.tI;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.W_(e,!0):n.oC()}lc.m(t.B_,e)}gI(t){this.Jc=6,lc.m(this.tI,t)}yI(){const t=this.YC,s=t.JC.oS,i=t.H_,e=this.tI;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.j_(e,!0):n.aC()}lc.m(t.V_,e)}wI(t){this.Jc=7,this.QC=t}SI(){const t=this.zG,s=this.QC,i=this.YC;s?(i.SG=s.bG(),i.vG=s.MG(),i.$C&&i.vG?t.bindFramebuffer(t.FRAMEBUFFER,i.vG):t.bindFramebuffer(t.FRAMEBUFFER,i.SG)):(i.SG=null,i.vG=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}vI(t){this.Jc=8,t.Vo(this.tI,0)}bI(t,s,i,e){this.Jc=8;const n=this.tI;n[0]=t,n[1]=s,n[2]=i,n[3]=e}MI(){const t=this.zG,s=this.tI,i=this.YC.clearColor,e=s[0],n=s[1],r=s[2],h=s[3];i.$o(e,n,r,h)||(t.clearColor(e,n,r,h),i.Io(e,n,r,h)),t.clear(t.COLOR_BUFFER_BIT)}xI(t){this.Jc=14,t.Vo(this.tI,0)}TI(){const t=this.tI;this.YC.qC.set(t[0],t[1],t[2],t[3])}GI(t,s,i){this.Jc=9,this.KC=t,this.ZC=1,this.tI[0]=s,i.Vo(this.sI,0)}_I(){const t=this.zG,s=this.YC,i=s.JC.uS;t.useProgram(i.PM),i.W_(s.B_,!1),i.j_(s.V_,!1);const e=s.qC;i.n_.P_()&&i.n_.HC(e.Za(),e.Qa()),i.r_.P_()&&i.r_.HC(e.tl(),e.sl());const n=this.tI[0];if(i.h_.P_()&&i.h_.jC(n),i.i_.P_()){const t=this.sI;i.i_.uC(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.KC/4,this.ZC),t.useProgram(s.H_.PM)}CI(t){this.Jc=10,this.QC=t}II(){const t=this.zG,s=this.YC,i=this.QC;s.H_=i,t.useProgram(i.PM),i.W_(s.B_,!1),i.j_(s.V_,!1)}AI(){this.Jc=11}EI(){const t=this.YC.H_,s=this.zG,i=this.tI,e=this.sI,n=this.iI;if(t.c_.P_()){const t=this.YC.JC,i=this.QC;t.RI!==i&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,i?i.VT():null),t.RI=i,s.activeTexture(s.TEXTURE0))}t.S_.P_()&&t.S_.HC(i[0],i[1]),t.d_.P_()&&t.d_.HC(i[2],i[3]),t.p_.P_()&&t.p_.HC(i[4],i[5]),t.b_.P_()&&t.b_.jC(this.ZC),t.M_.P_()&&t.M_.jC(i[6]),t.x_.P_()&&t.x_.jC(i[7]),t.m_.P_()&&t.m_.HC(i[12],i[13]),t.g_.P_()&&t.g_.HC(i[14],i[15]),t.y_.P_()&&t.y_.HC(n[0],n[1]),t.w_.P_()&&t.w_.HC(n[2],n[3]),t.T_.P_()&&t.T_.HC(e[0],e[1]),t.G_.P_()&&t.G_.HC(e[2],e[3]),t.v_.P_()&&t.v_.jC(this.KC)}FI(){this.Jc=12}OI(){const t=this.YC.H_.A_,s=this.eI;for(let i=0,e=t.length;i<e;++i){const e=t[i],n=s[i];e.WC()?e.UC(n.Lo(),n.No(),n.Bo()):e.jC(n)}}DI(t){this.Jc=13,this.QC=t}kI(){const t=this.zG,s=this.QC,i=this.YC.SG;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}LI(t,s,i){this.Jc=16;const e=this.tI,n=this.YC.JC;e[0]=t.Vg(),e[1]=t.Zg(),e[2]=s?s.Vg():n.Vg(),e[3]=s?s.Zg():n.Zg(),e[4]=t.GG()?1:0,e[5]="stretch"===i;const r=this.eI;oc.Sh(r),r.push(t.bG()),r.push(s?s.bG():null)}NI(){const t=this.tI,s=this.eI,i=this.zG,e=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,n,0,0,r,h,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const t=Math.min(e,r),s=Math.min(n,h),o=Math.max(n-h,0),a=Math.max(h-n,0);i.blitFramebuffer(0,o,t,s+o,0,a,t,s+a,i.COLOR_BUFFER_BIT,i.NEAREST)}}BI(t){this.Jc=17,this.QC=t}WI(){this.QC.jI(),this.QC=null}VI(t){this.Jc=18,this.QC=t}HI(){this.QC.UI(),this.QC=null}zI(t,s,i){this.Jc=19;const e=this.tI;e[0]=t,e[1]=s,e[2]=i}JI(){const t=this.YC.H_,s=this.tI;t.S_.P_()&&t.S_.HC(s[0],s[1]),t.u_.P_()&&t.u_.jC(s[2])}$I(t,s,i,e,n,r,h){this.Jc=15;const o=this.tI;t.Vo(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=n/i,o[8]=r/s,o[9]=h/i}qI(){const t=this.YC.H_,s=this.tI;t.m_.P_()&&t.m_.HC(s[0],s[1]),t.S_.P_()&&t.S_.HC(s[4],s[5]),t.o_.P_()&&t.o_.HC(s[6],s[7]),t.a_.P_()&&t.a_.HC(s[8],s[9])}XI(t,s,i,e,n,r,h){this.Jc=28;const o=this.tI;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=n,o[5]=r,o[6]=h}YI(){const t=this.YC.H_,s=this.tI;t.S_.P_()&&t.S_.HC(s[0],s[1]),t.o_.P_()&&t.o_.HC(s[2],s[3]),t.u_.P_()&&t.u_.jC(s[4]),t.a_.P_()&&t.a_.HC(s[5],s[6])}KI(t){this.Jc=21,this.KC=t?1:0}ZI(){const t=this.zG,s=0!==this.KC;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}QI(t){this.Jc=22,this.KC=t?1:0}tP(){const t=this.zG;0===this.KC?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}sP(t){this.Jc=23,this.KC=t?1:0}iP(){const t=this.zG,s=this.YC,i=s.JC,e=0!==this.KC;s.$C=e,t.activeTexture(t.TEXTURE2),e?(s.vG&&t.bindFramebuffer(t.FRAMEBUFFER,s.vG),t.bindTexture(t.TEXTURE_2D,i.pG())):(t.bindTexture(t.TEXTURE_2D,null),s.vG&&t.bindFramebuffer(t.FRAMEBUFFER,s.SG)),t.activeTexture(t.TEXTURE0)}eP(){this.Jc=24}nP(){const t=this.zG;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}rP(){this.Jc=25}hP(){const t=this.zG;t.enable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}oP(){this.Jc=26}aP(){const t=this.zG;t.disable(t.STENCIL_TEST)}lP(t,s,i,e,n){this.Jc=27,this.KC=t?1:0;const r=this.tI;r[0]=s,r[1]=i,r[2]=e,r[3]=n}uP(){const t=this.zG,s=this.tI;1===this.KC?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}cP(t){this.Jc=29,this.KC=t}fP(){const t=this.zG,s=this.KC;0===s?t.disable(t.CULL_FACE):(t.enable(t.CULL_FACE),1===s?t.cullFace(t.BACK):t.cullFace(t.FRONT))}dP(t){this.Jc=30,this.KC=t}pP(){const t=this.zG;t.frontFace(0===this.KC?t.CW:t.CCW)}mP(){switch(this.Jc){case 1:return void this.rI();case 2:return void this.oI();case 3:return void this.cI();case 4:return void this.dI();case 5:return void this.mI();case 6:return void this.yI();case 7:return void this.SI();case 8:return void this.MI();case 9:return void this._I();case 10:return void this.II();case 11:return void this.EI();case 12:return void this.OI();case 13:return void this.kI();case 14:return void this.TI();case 15:return void this.qI();case 16:return void this.NI();case 17:return void this.WI();case 18:return void this.HI();case 19:return void this.JI();case 20:return void this.lI();case 21:return void this.ZI();case 22:return void this.tP();case 23:return void this.iP();case 24:return void this.nP();case 25:return void this.hP();case 26:return void this.aP();case 27:return void this.uP();case 28:return void this.YI();case 29:return void this.fP();case 30:return void this.pP()}}}}{let uc=function(t,s,i,e,n,r){s?t.strokeRect(i,e,n,r):t.fillRect(i,e,n,r)},cc=function(t){return t*(4/3)},fc=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};0;const dc=self._s,pc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),mc={timeout:60},gc=new dc.xo(0,0,0,1),yc=new Set(["left","center","right"]),wc=new Set(["top","center","bottom"]),Sc=new Set(["word","cjk","character"]),vc=new Set(["ltr","rtl"]),bc=new Set;dc.gP&&dc.gP.addEventListener("fontload",t=>{const s=t.font.Pc();for(const t of bc)(t.yP()||dc.Ke(t.wP(),s))&&t.SP()});let Mc=!1,xc=!1;dc.Lw.$b=class{constructor(t,s){s=Object.assign({},mc,s),this.Xb=t,this.vP="Arial",this.bP=16,this.MP=1,this.xP=0,this.TP=!1,this.GP=!1,this._P="black",this.CP=!1,this.Lg=null,this.IP=!0,this.PP=null,this.AP=new Set,this.EP="left",this.RP="top",this.Bc="",this.FP=null,this.OP=dc.Un(dc.Dg),this.DP="word",this.kP="ltr",this.LP=!1,this.NP=!1,this.BP=!1,this.WP=-1,this.jP=0,this.VP=0,this.HP=0,this.Py=0,this.Ay=0,this.UP=1,this.zP=null,this.JP=null,this.$P=null,this.qP=null,this.XP=-1,this.YP=-1,this.KP="",this.ZP="",this.QP="",this.tA=1,this.sA=1,this.iA=t=>this.eA(t),this.yT=null,this.nA=new dc.Rect,this.rA=1,this.hA=new dc.Of(()=>{this.oA(),this.aA(8,8)},s.timeout),this.lA=null,this.uA=!1,bc.add(this)}zn(){this.PP=null,this.AP.clear(),this.Lg=null,this.FP=null,this.zP=null,this.JP=null,this.$P=null,this.qP=null,this.iA=null,this.hA.zn(),this.lA=null,this.oA(),this.OP.Pu(),this.OP=null,this.Xb=null,this.uA=!0,bc.delete(this)}cA(){this.BP=!0}fA(){this.cA(),this.NP=!0}SP(){this.fA(),this.LP=!0}dA(t){if(t=!!t,this.CP===t)return;this.CP=t;const s=this.CP?"alphabetic":"top";this.JP&&(this.JP.textBaseline=s),this.$P&&(this.$P.textBaseline=s),this.SP()}yP(){return this.CP}Wg(t){this.Lg!==t&&(this.Lg=t,this.OP.Wg(t),this.Lg&&this.Lg.Tw()&&this.Lg.Gw().then(()=>this.cA()),this.SP())}pA(t){t=!!t,this.IP!==t&&(this.IP=t,this.cA())}mA(t){t||(t="serif"),this.vP!==t&&(this.vP=t,this.SP())}wP(){return this.vP}gA(t){t<.1&&(t=.1),this.bP!==t&&(this.bP=t,this.SP())}yA(){return this.bP}wA(t){this.MP!==t&&(this.MP=t,this.SP())}SA(t){this.xP!==t&&(this.xP=t,this.fA())}vA(){return this.xP}bA(t){t=!!t,this.TP!==t&&(this.TP=t,this.SP())}MA(){return this.TP}xA(t){t=!!t,this.GP!==t&&(this.GP=t,this.SP())}TA(){return this.GP}GA(t){t=Math.floor(t),this.WP!==t&&(this.WP=t,this.cA())}_A(){return this.WP}CA(t,s){let i=[];(this.TP||s.zy("b"))&&i.push("bold"),(this.GP||s.zy("i"))&&i.push("italic");const e=s.Uy("size"),n=(e?parseFloat(e.Ig):this.bP)*this.MP;t?i.push(n+"pt"):i.push(n*this.IA()+"pt");let r=this.vP;const h=s.Uy("font");return h&&h.Ig&&(r=h.Ig,this.PP&&!this.AP.has(r)&&(this.PP(r),this.AP.add(r))),r&&(pc.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}NM(t){t instanceof dc.xo&&(t=t.ta()),this._P!==t&&(this._P=t,this.cA())}PA(t,s,i){gc.Po(t,s,i),this.NM(gc)}AA(t){if(!yc.has(t))throw new Error("invalid horizontal alignment");this.EP!==t&&(this.EP=t,this.fA())}EA(){return this.EP}RA(t){if(!wc.has(t))throw new Error("invalid vertical alignment");this.RP!==t&&(this.RP=t,this.fA())}FA(){return this.RP}OA(t){if(!Sc.has(t))throw new Error("invalid word wrap mode");this.DP!==t&&(this.DP=t,this.SP())}DA(){return this.DP}kA(t){if(!vc.has(t))throw new Error("invalid text direction");this.kP!==t&&(this.kP=t,this.JP&&(this.JP.direction=this.kP),this.$P&&(this.$P.direction=this.kP),this.SP())}LA(){return this.kP}Vc(t){this.Bc!==t&&(this.Bc=t,this.SP())}NA(){return this.Bc}IA(){return this.rA*this.UP*self.devicePixelRatio}BA(t,s,i){if(void 0===i&&(i=1),t<=0||t<=0)return;if(this.VP===t&&this.HP===s&&this.UP===i)return;const e=this.VP;this.VP=t,this.HP=s,this.UP=i;const n=self.devicePixelRatio;this.Py=this.VP*this.UP*n,this.Ay=this.HP*this.UP*n;const r=Math.max(this.Py,this.Ay),h=Math.min(this.Xb.CT(),4096);let o=1;r>h&&(o=h/r,this.Py=Math.min(this.Py*o,h),this.Ay=Math.min(this.Ay*o,h)),this.rA=o,this.VP!==e?this.SP():this.fA()}Vg(){return this.Py}Zg(){return this.Ay}WA(){return this.UP}jA(){return this.VA(),this.OP.Cy()}HA(){return this.VA(),this.OP.Iy()+this.OP.Bg()*(this.xP+4)-this.xP}UA(){this.VA();let t=0;for(const s of this.OP.Ng())for(const i of s.ny())t+=i.hy();return t}xG(){return this.hA.Bf(),this.zA(),this.yT}JA(t,s){this.VA();const i=this.IA(),e=this.OP.Ng();for(const n of e){const e=n.ty()*i;if(s>=n.jy()-n.Zg()*i+e&&s<n.jy()+e)for(const s of n.ny())if(t>=s.By()&&t<s.By()+s.Vg()*i)return s}return null}*$A(t){this.VA();const s=this.OP.Ng();for(const i of s)for(const s of i.ny()){const i=s.Uy("tag");i&&dc.Ke(i.Ig,t)&&(yield s)}}qA(t,s){for(const i of this.$A(t)){if(0===s)return i;--s}return null}XA(t){let s=0;for(const i of this.$A(t))++s;return s}zA(){(!this.yT||this.BP||this.NP||this.LP)&&(this.uA||this.Py<=0||this.Ay<=0||(this.BP=!1,this.YA()))}YA(){this.uA||(this.VA(),this.aA(Math.max(dc.vr(Math.ceil(this.Py)),128),Math.max(dc.vr(Math.ceil(this.Ay)),64)),this.KA(),this.ZA(),this.hA.Bf())}aA(t,s){this.zP||(this.zP=dc.uo(16,16));let i=!1;this.XP===t&&this.YP===s||(this.XP=t,this.YP=s,this.zP.width=t,this.zP.height=s,i=!0),this.JP||(this.JP=this.zP.getContext("2d"),i=!0),i?(this.JP.textBaseline=this.CP?"alphabetic":"top",this.JP.direction=this.kP,this.JP.font=this.KP,this.JP.fillStyle=this.QP,this.JP.strokeStyle=this.QP,this.JP.globalAlpha=this.tA,this.JP.lineWidth=this.sA):this.JP.clearRect(0,0,t,s)}QA(){this.$P||(this.$P=dc.uo(16,16).getContext("2d"),this.qP=dc.uo(16,16).getContext("2d"),this.$P.textBaseline=this.CP?"alphabetic":"top",this.qP.textBaseline="top",this.$P.direction=this.kP,this.qP.direction=this.kP)}tE(t){this.ZP!==t&&(this.ZP=t,this.$P.font=t,this.qP.font=t)}sE(){if(!Mc){Mc=!0,this.QA();const t=this.$P.measureText("test");xc="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return xc}VA(){this.iE(),this.eE()}iE(){this.LP&&(this.QA(),!this.CP||this.FP&&this.FP.toString()===this.Bc||(this.FP=new dc.dn(this.Bc,{dg:!0})),this.OP.Dg(this.CP?this.FP._g():this.Bc,this.iA,this.VP,this.DP,0),this.LP=!1)}eE(){this.NP&&(this.nE(),this.NP=!1)}eA(t){const s=t.qg()?t.yy().join(""):" ";this.tE(this.CA(!0,t));const i=t.Uy("size"),e=(i?parseFloat(i.Ig):this.bP)*this.MP,n=this.$P.measureText(s);let r=0;if(this.CP&&this.sE()){const t=this.qP.measureText(s);r=n.fontBoundingBoxAscent-t.fontBoundingBoxAscent}return{width:n.width,height:cc(e),fontBoundingBoxAscent:n.fontBoundingBoxAscent||0,fontBoundingBoxDescent:n.fontBoundingBoxDescent||0,$g:r}}rE(t){this.KP!==t&&(this.KP=t,this.JP.font=t)}hE(t){this.QP!==t&&(this.QP=t,this.JP.fillStyle=t,this.JP.strokeStyle=t)}oE(t){this.tA!==t&&(this.tA=t,this.JP.globalAlpha=t)}aE(t){this.sA!==t&&(this.sA=t,this.JP.lineWidth=t)}nE(){const t=this.IA(),s=(4+this.xP)*t;let i=0;const e=this.OP.Ng();if(0===e.length)return;for(const t of e){t.Ny(NaN),t.Wy(NaN);for(const s of t.ny())s.Ny(NaN),s.Wy(NaN)}const n=this.CP&&this.sE();let r=e[0].Zg()*t;if("center"===this.RP){const h=e.reduce((i,e)=>i+e.Zg()*t+s,0)-s;i=Math.max(this.Ay/2-h/2,0),n&&(r=e[0].sy()*t)}else if("bottom"===this.RP){const r=e.reduce((i,e)=>i+e.Zg()*t+s,0)-this.xP*t,h=n?e.at(-1).ty()*t:0;i=this.Ay-r-h-2}for(let n=0,h=e.length;n<h;++n){const h=e[n],o=h.Zg()*t,a=i;if(this.CP){if(i+=0===n?r:o,n>0&&i>this.Ay-4*t)break}else if(n>0&&i>=this.Ay-o)break;a>=0&&this.lE(h,i,t),this.CP||(i+=o),i+=s}}lE(t,s,i){let e=0;"center"===this.EP?e=Math.floor((this.Py-t.Vg()*i)/2):"right"===this.EP&&(e=this.Py-t.Vg()*i),t.Ny(e),t.Wy(s);for(const n of"ltr"===this.kP?t.ny():t.ky())this.uE(n,e,s,i),e+=n.Vg()*i}uE(t,s,i,e){const n=t.Uy("offsetx");s+=n?fc(n.Ig,t.Zg())*e:0;const r=t.Uy("offsety");if(i+=r?fc(r.Ig,t.Zg())*e:0,t.Yg()){const s=t.Uy("iconoffsety");i+=s?fc(s.Ig,t.Zg())*e:.2*t.Zg()*e}t.Ny(s),t.Wy(i)}KA(){this.JP.imageSmoothingEnabled=this.IP,this.JP.imageSmoothingQuality="high",this.jP=0;const t=this.IA(),s=this.OP.Ng();for(const i of s)this.cE(i,t)}cE(t,s){const i=t.By(),e=t.jy();if(Number.isFinite(i)&&Number.isFinite(e))for(const i of"ltr"===this.kP?t.ny():t.ky())this.fE(i,s,t.Zg())}fE(t,s,i){const e=this.JP,n=t.By(),r=t.jy();if(!Number.isFinite(n)||!Number.isFinite(r))return;const h=i/16;let o=t.Vg()*s;const a=t.Zg()*s,l=t.Zg()/16,u=(4+this.xP)*s;let c=t.qg()?t.yy():null;if(-1!==this.WP){if(this.jP>=this.WP)return;t.qg()&&this.jP+c.length>this.WP&&(c=c.slice(0,this.WP-this.jP),o=this.eA(t).width*s),this.jP+=t.hy()}const f=t.Uy("background"),d=t.zy("u"),p=t.zy("s");if(t.qg()&&dc.vm(c)&&!f&&!d&&!p||t.zy("hide"))return;const m=t.Uy("color"),g=t.Uy("opacity");this.oE(g?parseFloat(g.Ig)/100:1),f&&(this.hE(f.Ig),e.fillRect(n,r-a,o,a+u));const y=t.Uy("linethickness"),w=y?parseFloat(y.Ig):1,S=t.zy("stroke");if(S&&this.aE(.5*l*w*this.IA()),t.qg()){const s=c.join("");if(this.rE(this.CA(!1,t)),!S){this.aE(.5*l*w*this.IA());const i=t.Uy("outlineback");i&&(this.hE(i.Ig),this.dE(!0,s,n,r,o))}if(this.hE(m?m.Ig:this._P),this.dE(S,s,n,r,o),!S){this.aE(.5*l*w*this.IA());const i=t.Uy("outline");i&&(this.hE(i.Ig),this.dE(!0,s,n,r,o))}}else if(t.Yg()&&t.Vg()>0){const s=t.Qy(this.Lg);s&&e.drawImage(s,n,r-a,o,a)}if(this.hE(m?m.Ig:this._P),d&&uc(e,S,n,r+s*h,o,s*h*w),p){const t=s*l,i=r-a/4+t/2;e.fillRect(n,i-t*w/2,o,t*w)}}dE(t,s,i,e,n){"rtl"===this.kP&&(i+=n),t?"Gecko"===dc.Ks.ei?this.JP.strokeText(s,i,e,n):this.JP.strokeText(s,i,e):"Gecko"===dc.Ks.ei?this.JP.fillText(s,i,e,n):this.JP.fillText(s,i,e)}ZA(){this.Xb.pE()||(this.yT||(this.yT=this.Xb.dG(this.zP.width,this.zP.height,{fT:!0,dT:"high"})),this.Xb.mE(this.zP,this.yT),this.nA.set(0,0,this.Py/this.yT.Vg(),this.Ay/this.yT.Zg()),this.lA&&this.lA())}gE(){return this.nA}oA(){this.yT&&(this.Xb.pE()||this.Xb.yG(this.yT),this.yT=null)}static BM(){for(const t of bc)t.oA()}static yE(){return bc.values()}}}{const Tc=self._s;class Gc{constructor(t){this.zG=t.IT(),this.wE=t.PT(),this.SE=t.vE(),this.bE=null,this.Nf=!1,this.ME=!1,this.xE=0,1===this.wE?this.bE=this.SE.createQueryEXT():this.bE=this.zG.createQuery()}zn(){this.TE(),this.zG=null,this.SE=null,this.ME=!1}TE(){this.bE&&(1===this.wE?this.SE.deleteQueryEXT(this.bE):this.zG.deleteQuery(this.bE),this.bE=null)}jI(){if(this.Nf)throw new Error("query already active");1===this.wE?this.SE.beginQueryEXT(this.SE.TIME_ELAPSED_EXT,this.bE):this.zG.beginQuery(this.SE.TIME_ELAPSED_EXT,this.bE),this.Nf=!0}UI(){if(!this.Nf)throw new Error("query not active");1===this.wE?this.SE.endQueryEXT(this.SE.TIME_ELAPSED_EXT):this.zG.endQuery(this.SE.TIME_ELAPSED_EXT),this.Nf=!1}GE(){if(!this.bE||this.ME||this.Nf)return;let t=!1;t=1===this.wE?this.SE.getQueryObjectEXT(this.bE,this.SE.QUERY_RESULT_AVAILABLE_EXT):this.zG.getQueryParameter(this.bE,this.zG.QUERY_RESULT_AVAILABLE);const s=this.zG.getParameter(this.SE.GPU_DISJOINT_EXT);t&&!s&&(1===this.wE?this.xE=this.SE.getQueryObjectEXT(this.bE,this.SE.QUERY_RESULT_EXT):this.xE=this.zG.getQueryParameter(this.bE,this.zG.QUERY_RESULT),this.xE/=1e9,this.ME=!0),(t||s)&&this.TE()}_E(){return this.ME}CE(){if(!this.ME)throw new Error("no result available");return this.xE}}Tc.Lw.IE=class{constructor(t){this.Xb=t,this.FS=t.Db(),this.Nf=!1,this.PE=null,this.AE=!1,this.EE=null,this.RE=[]}zn(){for(const t of this.RE)t instanceof Gc&&t.zn();Tc.Sh(this.RE),this.PE=null,this.EE=null,this.Xb=null}jI(){if(this.Nf)throw new Error("query already active");const t=this.Xb.FE();t.length>0?(this.AE=!0,this.PE=t.at(-1),this.PE.OE(),this.PE.RE.push(this)):(this.AE=!1,this.PE=null),this.Nf=!0,t.push(this),this.DE()}UI(){if(!this.Nf)throw new Error("query not active");if(this.Xb.FE().pop()!==this)throw new Error("can only end most nested query");this.Nf=!1,this.OE(),this.PE&&(this.PE.DE(),this.PE=null)}DE(){this.EE=Tc.Un(Gc,this.Xb),this.RE.push(this.EE),this.EE.jI()}OE(){this.EE.UI(),this.EE=null}GE(){for(const t of this.RE)t.GE()}kE(){return this.AE}_E(){return this.RE.every(t=>t._E())}CE(){return this.RE.reduce((t,s)=>t+s.CE(),0)}Db(){return this.FS}}}{const _c=self._s;_c.Lw.LE=class{constructor(t,s=1e3){this.Xb=t,this.NE=s,this.BE=[],this.Xb.WE(this)}zn(){this.Pu(),this.Xb.jE(this),this.Xb=null}Pu(){for(const t of this.BE)t.zn();_c.Sh(this.BE)}VE(){const t=new _c.Lw.IE(this.Xb);return this.BE.push(t),this.BE.length>this.NE&&this.BE.shift().zn(),t}HE(t){for(const s of this.BE){if(s.Db()>=t)return;if(s.kE())return;s.GE()}}UE(t,s){if(s<=t)return NaN;let i=0;for(const e of this.BE){if(e.Db()>=s)break;if(!(e.Db()<t)){if(!e._E())return NaN;i+=e.CE()}}return i}zE(t){for(let s=0,i=this.BE.length;s<i;++s){const i=this.BE[s];if(!(i.Db()<t))return void(s>0&&this.BE.splice(0,s));i.zn()}}}}{let Cc=function(){jc=-1;for(const t of Wc)t.JE()&&(t.resolve(),Wc.delete(t));Wc.size>0&&(jc=self.requestAnimationFrame(Cc))};0;const Ic=self._s,Pc=(self.assert,self.hs),Ac=(Pc.ys,Pc.ws),Ec=Pc.fs,Rc={powerPreference:"default",$E:!0,alpha:!1,depth:!1,qE:!1,XE:2,failIfMajorPerformanceCaveat:!1},Fc=new Set(["default","low-power","high-performance"]),Oc=new Ic.Il(0,0,1,0,1,1,0,1),Dc=Ec.create(),kc=Ec.create(),Lc=new Ic.Il,Nc=new Ic.Rect;let Bc=null;Ic.Ds&&(self.YE=function(){Bc?Bc.loseContext():console.warn("WEBGL_lose_context not supported")},self.KE=function(){Bc?Bc.restoreContext():console.warn("WEBGL_lose_context not supported")});const Wc=new Set;let jc=-1;Ic.Lw.ZE=class extends Ic.Lw.Qw{constructor(t,s){if(super(s),s=Object.assign({},Rc,s),!Fc.has(s.powerPreference))throw new Error("invalid power preference");const i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat};let e=null,n=0;if(s.XE>=2&&(e=t.getContext("webgl2",i),n=2),e||(e=t.getContext("webgl",i),n=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.zG=e,this.QE=e.getContextAttributes(),this.tR=e.getParameter(e.VERSION),this.wE=n,this.sR=Ac.create(),this.iR=!1,this.eR=Ec.create(),this.nR=!!s.depth,this.rR=!(!s.depth||!s.qE),this.hR=this.nR,this.oR=!1,this.aR=null,this.lR=!0,this.uR=0,this.cR=0,this.qG=null,this.XG=null,this.YG=null,this.fR=null,this.ZG=null,this.dR=this.wE>=2&&void 0!==globalThis.Float16Array,this.pR=new Float32Array(196605),this.mR=new Uint16Array(393210),this.gR=new Float32Array(131070),this.yR=this.dR?new globalThis.Float16Array(262140):new Float32Array(262140),this.wR=new Float32Array(32e3),this.SR=0,this.vR=0,this.bR=0,this.MR=null,this.xR=null,this.TR=[],this.GR=0,this._R=0,this.CR=null,this.IR=0,this.YC=Ic.Un(Ic.Lw.zC,this),this.PR=Ic.Un(Ic.xo,1,1,1,1),this.AR=null,this.RI=null,this.ER=0,this.RR=0,this.FR=new Ic.Rect,this.OR=Ic.Un(Ic.Rect,0,0,-1,-1),this.DR=0,this.kR=0,this.LR=0,this.NR=-1,this.BR=0,this.WR=0,this.jR="(unavailable)",this.VR="(unavailable)",this.HR=[],this.UR=!1,this.zR=null,this.JR=null,this.$R=null,this.qR=null,this.XR=null,this.YR=null,this.KR=null,this.ZR=0,this.QR=!!s.$E,this.SE=null,this.tF=new Set,this.sF=[]}jb(){return!0}async NS(){super.NS();const t=this.zG;this.PR.Io(1,1,1,1),this.AR=null,this.RI=null,this.SR=0,this.vR=0,this.bR=0,Ic.Sh(this.TR),this.GR=0,this._R=0,this.MR=null,this.CR=null,this.FR.set(0,0,1,1),this.IR=0;const s=this.YC;s.H_=null,s.SG=null,s.vG=null,s.clearColor.Io(0,0,0,0),s.qC.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.ER=t.ONE,this.RR=t.ONE_MINUS_SRC_ALPHA,this.iF(t),t.cullFace(t.BACK),t.disable(t.CULL_FACE),this.kR=0,t.frontFace(t.CW),this.LR=0,t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.nR?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.hR=this.nR,this.oR=!1,this.ZG=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.ZG),t.bufferData(t.ARRAY_BUFFER,this.wR.byteLength,t.DYNAMIC_DRAW),this.qG=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.qG),t.bufferData(t.ARRAY_BUFFER,this.pR.byteLength,t.DYNAMIC_DRAW),this.XG=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.XG),t.bufferData(t.ARRAY_BUFFER,this.gR.byteLength,t.DYNAMIC_DRAW),this.YG=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.YG),t.bufferData(t.ARRAY_BUFFER,this.yR.byteLength,t.DYNAMIC_DRAW),this.fR=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.fR),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.mR.byteLength,t.DYNAMIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.NR=t.getParameter(t.MAX_TEXTURE_SIZE);const i=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.BR=i[0],this.WR=i[1],this.WR>2048&&(this.WR=2048),this.HR=t.getSupportedExtensions();const e=t.getExtension("WEBGL_debug_renderer_info");if(e&&(this.jR=t.getParameter(e.UNMASKED_VENDOR_WEBGL),this.VR=t.getParameter(e.UNMASKED_RENDERER_WEBGL)),this.zR=t.getExtension("KHR_parallel_shader_compile"),this.wE>=2&&("Chromium"!==Ic.Ks.ei||Ic.Ks.ii>=135)&&(this.$R=t.getExtension("EXT_conservative_depth")),Ic.Ds&&(Bc=t.getExtension("WEBGL_lose_context")),this.QR&&(1===this.PT()?this.SE=t.getExtension("EXT_disjoint_timer_query"):this.SE=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.JR=t.getExtension("EXT_texture_filter_anisotropic"),this.JR?this.ZR=t.getParameter(this.JR.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.ZR=0,this.PT()<2&&this.nR&&this.rR&&(this.qR=t.getExtension("WEBGL_depth_texture"),!this.qR))throw new Error("no depth texture support");this.PT()<2&&(this.XR=t.getExtension("EXT_frag_depth"),this.YR=t.getExtension("OES_standard_derivatives"),this.KR=t.getExtension("EXT_shader_texture_lod"));const n=Ic.Lw.BG,r=n.dC(!1);let h=n.mC(),o=r,a=n.TC(),l=n.MC(),u=n.wC(),c=n.dC(!0),f=!1;this.nR&&(this.PT()<2?this.XR&&(h=n.gC(),a=n.GC(),u=n.SC(),f=!0):(o=n.pC(),h=n.yC(this.eF()),a=n._C(this.eF()),l=n.xC(),u=n.vC(this.eF()),c=n.pC(!0)));const d=n.bC(this.PT(),f,this.YR&&this.KR,this.eF()),p=this.PT()>=2?n.pC():r,m=[[h,o,"<default>"],[h,o,"<default-device-transform>"],[a,l,"<point>"],[n.CC(),r,"<fill>"],[n.IC(),r,"<lineargradient>"],[n.PC(),r,"<penumbra>"],[n.EC(),r,"<hardellipse>"],[n.RC(),r,"<hardellipseoutline>"],[n.FC(),r,"<smoothellipse>"],[n.OC(),r,"<smoothellipseoutline>"],[n.AC(),r,"<smoothline>"],[u,c,"<tilemap>"],[d,p,"<tilerandomization>"]],g=await Promise.all(m.map(t=>this.nF({src:t[0],jG:t[1],name:t[2]})));this.lS=g[0],this.xR=g[1],this.uS=g[2],this.dS=g[3],this.pS=g[4],this.mS=g[5],this.gS=g[6],this.yS=g[7],this.wS=g[8],this.SS=g[9],this.vS=g[10],this.cS=g[11],this.fS=g[12],this.lv()}async nF(t){const s=await Ic.Lw.BG.UG(this,t);return this.rv(s),s}rF(){this.MR=null}BA(t,s,i){if(this.Py===t&&this.Ay===s&&!i)return;this.Ob();const e=this.zG,n=this.YC;this.Py=t,this.Ay=s,this.hF(0,0,t,s),this.QS(this.eR,t/s),this.oF(this.eR),this.xR&&(e.useProgram(this.xR.z_()),this.xR.N_(this.iS),this.MR=this.xR,this.YC.H_=this.xR),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.AR=null,this.RI=null,this.nR&&this.lR&&this.aF(this.Py,this.Ay),this.CR&&this.CR.gG(this.Py,this.Ay),e.bindFramebuffer(e.FRAMEBUFFER,null),this.CR=null,n.SG=null,n.vG=null}aF(t,s){const i=this.zG;this.aR&&this.uR===t&&this.cR===s||(this.rR?(this.aR&&i.deleteTexture(this.aR),this.aR=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.aR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),this.PT()>=2?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.qR&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.qR.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.aR&&i.deleteRenderbuffer(this.aR),this.aR=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.aR),i.renderbufferStorage(i.RENDERBUFFER,this.wE>=2?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.uR=t,this.cR=s)}lF(t,s){this.nR&&(this.lR=!1,this.aF(t,s))}uF(){this.nR&&(this.lR=!0,this.aF(this.Py,this.Ay))}hF(t,s,i,e){const n=this.sR;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(this.cF().fI(t,s,i,e),Ac.set(n,t,s,i,e),this._R=0)}qS(t){super.qS(t),this.QS(this.eR,this.Py/this.Ay)}US(t){super.US(t),this.QS(this.eR,this.Py/this.Ay)}JS(t){super.JS(t),this.QS(this.eR,this.Py/this.Ay)}oF(t){Ec.F(this.iS,t)||(this.cF().pI(t),Ec.m(this.iS,t),this._R=0,this.iR=!0)}fF(){let t,s,i;const e=this.CR;null===e?(t=this.eR,s=this.Vg(),i=this.Zg()):(t=e.TG(),s=e.Vg(),i=e.Zg()),this.oF(t),this.hF(0,0,s,i)}dF(t){Ec.F(this.eS,t)||(this.cF().gI(t),Ec.m(this.eS,t),this._R=0,this.iR=!0)}pF(){this.iR=!1}mF(){return this.iR}wG(){return this.YC}cF(){const t=this.TR;return this.GR===t.length&&t.push(new Ic.Lw.XC(this.YC)),t[this.GR++]}Ob(){0!==this.GR&&(this.pE()||(this.gF(),this.yF(),this.GR=0,this.SR=0,this.vR=0,this.bR=0,this._R=0))}gF(){const t=this.zG;this.SR>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.qG),t.bufferSubData(t.ARRAY_BUFFER,0,this.pR.subarray(0,3*this.SR)),t.bindBuffer(t.ARRAY_BUFFER,this.XG),t.bufferSubData(t.ARRAY_BUFFER,0,this.gR.subarray(0,2*this.SR)),t.bindBuffer(t.ARRAY_BUFFER,this.YG),t.bufferSubData(t.ARRAY_BUFFER,0,this.yR.subarray(0,4*this.SR))),this.vR>0&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.fR),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,this.mR.subarray(0,this.vR))),this.bR>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.ZG),t.bufferSubData(t.ARRAY_BUFFER,0,this.wR.subarray(0,this.bR)))}yF(){const t=this.TR;for(let s=0,i=this.GR;s<i;++s)t[s].mP()}wF(){return this.PR.Wo()}SF(t,s,i,e){const n=this.PR;n.$o(t,s,i,e)||(n.Io(t,s,i,e),this.MS=null,2===this._R&&(this._R=0))}vF(t){const s=this.PR;s.Wo()!==t&&(s.Do(t),this.MS=null,2===this._R&&(this._R=0))}NM(t){const s=this.PR;s.equals(t)||(s.set(t),this.MS=null,2===this._R&&(this._R=0))}bF(){this.SF(1,1,1,1)}MF(){return this.PR}xF(t){t!==this.AR&&(this.cF().hI(t),this.AR=t,this._R=0)}FT(){this.AR=null}LM(t){const s=this.kv(t);this.TF(s[0],s[1])}GF(t){const s=this.Bv(t);this.TF(s.Ov,s.Dv)}TF(t,s){t===this.ER&&s===this.RR||(this.cF().uI(t,s),this.ER=t,this.RR=s,this._R=0,this.MS=null)}_F(){return this.ER===this.zG.ONE&&this.RR===this.zG.ONE_MINUS_SRC_ALPHA}CF(){this.TF(this.zG.ONE,this.zG.ONE_MINUS_SRC_ALPHA)}IF(){this.TF(this.zG.SRC_ALPHA,this.zG.ONE_MINUS_SRC_ALPHA)}Pb(t){this.kR!==t&&(this.cF().cP(t),this.kR=t,this._R=0,this.MS=null)}PF(){return this.kR}Ab(t){this.LR!==t&&(this.cF().dP(t),this.LR=t,this._R=0,this.MS=null)}AF(){return this.LR}EF(){this.TF(this.zG.ONE,this.zG.ZERO)}Rect(t){this.RF(t.Za(),t.Qa(),t.tl(),t.sl())}RF(t,s,i,e){this.Rb(t,s,i,s,i,e,t,e)}FF(t,s){(this.SR+t>65535||this.vR+s>393210)&&this.Ob(),1===this._R?this.TR[this.GR-1].ZC+=s:(this.cF().nI(2*this.vR,s),this._R=1)}OF(){const t=this.SR;let s=this.vR;this.vR+=6;const i=this.mR;i[s++]=t,i[s++]=t+1,i[s++]=t+2,i[s++]=t,i[s++]=t+2,i[s]=t+3}Il(t){this.DF(t,Oc)}Rb(t,s,i,e,n,r,h,o){this.FF(4,6),this.OF();const a=this.pR,l=this.SR;this.SR+=4;let u=3*l;const c=this.GS+this._S;a[u++]=t,a[u++]=s,a[u++]=c,a[u++]=i,a[u++]=e,a[u++]=c,a[u++]=n,a[u++]=r,a[u++]=c,a[u++]=h,a[u++]=o,a[u]=c,Oc.Vo(this.gR,2*l),this.PR.Ho(this.yR,4*l)}tb(t,s){this.FF(4,6),this.OF();const i=this.SR;this.SR+=4,t.ql(this.pR,3*i,this.GS+this._S),s.nl(this.gR,2*i),this.PR.Ho(this.yR,4*i)}DF(t,s){this.FF(4,6),this.OF();const i=this.SR;this.SR+=4,t.ql(this.pR,3*i,this.GS+this._S),s.Vo(this.gR,2*i),this.PR.Ho(this.yR,4*i)}kF(t,s,i){this.FF(4,6),this.OF();const e=this.SR;this.SR+=4,t.ql(this.pR,3*e,this.GS+this._S),s.Vo(this.gR,2*e),this.yR.set(i,4*e)}LF(t,s,i,e,n,r,h,o,a,l,u,c,f){this.FF(4,6),this.OF();const d=this.pR,p=this.SR;this.SR+=4;let m=3*p;const g=this.GS+this._S;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.nl(this.gR,2*p),this.PR.Ho(this.yR,4*p)}Xv(t,s,i,e,n,r,h,o,a,l,u,c,f){this.FF(4,6),this.OF();const d=this.pR,p=this.SR;this.SR+=4;let m=3*p;const g=this.GS+this._S;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.Vo(this.gR,2*p),this.PR.Ho(this.yR,4*p)}NF(t,s,i,e,n,r,h,o,a,l,u,c,f,d){this.FF(4,6),this.OF();const p=this.pR,m=this.SR;this.SR+=4;let g=3*m;const y=this.GS+this._S;p[g++]=t,p[g++]=s,p[g++]=y+i,p[g++]=e,p[g++]=n,p[g++]=y+r,p[g++]=h,p[g++]=o,p[g++]=y+a,p[g++]=l,p[g++]=u,p[g]=y+c,f.Vo(this.gR,2*m),this.yR.set(d,4*m)}Zx(t,s,i,e){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(i.length%3!=0)throw new Error("index buffer length not multiple of 3");if(i.length>393210)throw new Error(`too many indices (${i.length}, limit 393210)`);this.FF(t.length,i.length);const n=this.SR;this.pR.set(t,3*n),this.gR.set(s,2*n);const r=this.mR;if(0===n)r.set(i,this.vR);else{let t=this.vR;for(let s=0,e=i.length;s<e;++s)r[t++]=i[s]+n}const h=this.yR;if(void 0!==e)h.set(e,4*n);else{const s=this.PR,i=s.Lo(),e=s.No(),r=s.Bo(),o=s.Wo();let a=4*n;for(let s=0,n=t.length;s<n;++s)h[a++]=i,h[a++]=e,h[a++]=r,h[a++]=o}this.SR+=t.length/3,this.vR+=i.length}BF(t,s){this.Hv(0),Ec.m(Dc,this.iS),Ec.m(kc,this.eS),this.fF();const[i,e]=this.WF(this.CR),n=this.nv(0,0,this.WS(e),0,0,0,e);if(this.dF(n),"crop"===t&&this.CR&&s){const t=this.Py/2,i=this.Ay/2,e=s.Vg(),n=s.Zg(),r=this.CR.Vg(),h=this.CR.Zg(),o=Math.min(r,e),a=Math.min(h,n),l=Math.max(n-h,0),u=Math.max(h-n,0);Nc.set(-t,i-u,-t+o,i-a-u),Lc.Xl(Nc),Nc.set(0,l,o,a+l),Nc.wt(e,n),this.tb(Lc,Nc)}else{const t=i/2,s=e/2;this.RF(-t,s,t,-s)}this.oF(Dc),this.dF(kc)}jF(t){this.FR.equals(t)||(this.FR.m(t),this.cF().xI(t),this._R=0)}VF(){}HF(t,s,i,e){this.bR>=7996&&this.Ob();let n=this.bR;const r=this.GS+this._S;2===this._R&&this.IR===r?this.TR[this.GR-1].ZC++:(this.cF().GI(n,r,this.PR),this._R=2,this.IR=r);const h=this.wR;h[n++]=t,h[n++]=s,h[n++]=i,h[n++]=e,this.bR=n}uv(t){this.MR!==t&&(this.cF().CI(t),this.MR=t,this._R=0,this.MS=null)}UF(){return this.MR}zF(){this.uv(this.xR)}JF(t){this.cF().aI(t),this._R=0}$F(t,s,i=1){this.cF().zI(t,s,i),this._R=0}qF(t,s,i,e,n,r,h){if(this.MR!==this.cS)throw new Error("must set tilemap fill mode first");this.cF().$I(t,s,i,e,n,r,h),this._R=0}XF(t,s,i,e,n,r,h){if(this.MR!==this.fS)throw new Error("must set tile randomization mode first");this.cF().XI(t,s,i,e,n,r,h),this._R=0}YF(t,s,i,e,n,r,h,o,a,l,u){const c=this.MR;if(u%=10800,!c.I_||c.tC(s,i,e,n,r,h,o,a,l,u))return;const f=this.cF();f.AI(),c.eC(s,i,e,n,r,h,o,a,l,u);const d=f.tI;d[0]=r,d[1]=h,s.Vo(d,2),d[6]=a,d[7]=l,i.Vo(d,12);const p=f.sI;n.Vo(p,0);const m=p[1];p[1]=p[3],p[3]=m,e.Vo(f.iI,0),f.KC=u,f.ZC=o,c.c_.P_()?f.QC=t?t.xG():null:f.QC=null,this._R=0}KF(t){const s=this.MR;if(0===t.length||s.Y_(t))return;const i=this.cF();i.FI(),s.Z_(t),Ic.Th(i.eI,t),this._R=0}ZF(t,s,i,e){this.cF().bI(t,s,i,e),this._R=0}Pu(t){this.cF().vI(t),this._R=0}QF(){}Fb(){super.Fb(),this.zG.flush()}tO(){this.nR&&this.CR&&this.CR.IG()&&(this.cF().KI(this.hR),this._R=0)}sO(t){t=!!t,this.hR!==t&&this.nR&&(this.hR=t,this.cF().QI(t),this._R=0)}iO(){return this.hR}pG(){return this.aR}mG(){return this.rR}eO(t){if(t=!!t,this.rR&&this.oR!==t){if(t&&this.iO())throw new Error("depth still enabled");this.oR=t,this.cF().sP(t),this._R=0}}nO(t,s,i,e,n=0){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),this.OR.Ka(t,s,i,e)||(this.OR.Ua(t,s,i,e),s=(n||this.WF(this.rO())[1])-s-e,this.cF().lP(!0,t,s,i,e),this._R=0)}hO(){-1!==this.OR.tl()&&(this.OR.set(0,0,-1,-1),this.cF().lP(!1,0,0,0,0),this._R=0)}oO(){for(const t of this.tF)t.HE(this.FS)}pE(){return!this.zG||this.zG.isContextLost()||this.UR}BM(){super.BS(),Ic.Lw.gT.BM(),Ic.Lw.ZT.BM(),Ic.Lw.$b.BM();for(const t of this.tF)t.Pu();this.HR=[],this.SE=null,this.zR=null,this.$R=null,this.JR=null,this.qR=null,this.XR=null,this.YR=null,this.KR=null,this.ZR=0,this.jR="(unavailable)",this.VR="(unavailable)",this.MR=null,this.xR=null,this.aR=null;for(const t of this.bS.values())t.BM()}async WM(){this.UR=!0,await this.NS(),this.UR=!1;for(const t of this.bS.values())t.WM(this);this.BA(this.Py,this.Ay,!0)}aO(t,s){if(this.pE())throw new Error("context lost");this.Ob();const i=Ic.Un(Ic.Lw.gT,this);return i._T(t,s),i}async lO(t,s){if(this.pE())throw new Error("context lost");if(s=Object.assign({},s),Ic.Ai.ImageBitmapOptions){let i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const e=s.oT&&"clamp-to-edge"!==s.oT||s.aT&&"clamp-to-edge"!==s.aT,n=Ic.Sr(i.width)&&Ic.Sr(i.height);return this.AT()||n||!e?s.pT=!1:Ic.Ai.Oi?(i=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:Ic.vr(i.width),resizeHeight:Ic.vr(i.height)}),s.pT=!1):i=await createImageBitmap(t,{premultiplyAlpha:"none"}),await Ic.df(()=>this.aO(i,s))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const s=await Ic.lo(t);t=s}return await Ic.df(()=>this.aO(t,s))}dG(t,s,i){this.Ob();const e=Ic.Un(Ic.Lw.gT,this);return e.OT(t,s,i),e}mE(t,s,i){this.Ob(),s.BT(t,i)}yG(t){t&&(t.UT(),t.zT()>0||(this.Ob(),t===this.AR&&(this.zG.bindTexture(this.zG.TEXTURE_2D,null),this.AR=null),t===this.RI&&(this.zG.activeTexture(this.zG.TEXTURE1),this.zG.bindTexture(this.zG.TEXTURE_2D,null),this.zG.activeTexture(this.zG.TEXTURE0),this.RI=null),t.WT()))}uO(t){let s=this.Py,i=this.Ay,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height&&(i=Math.floor(t.height),e=!1)),s<=0||i<=0)throw new Error("invalid size");this.Ob();const n=Ic.Un(Ic.Lw.ZT,this);return n.cG(s,i,Object.assign({YT:e},t)),this.CR=null,this.YC.SG=null,this.YC.vG=null,n}cO(t,s=!0){t!==this.CR&&(t&&t.PG()&&t.gG(this.Py,this.Ay),this.cF().wI(t),this.CR=t,this._R=0,s&&this.fF())}rO(){return this.CR}WF(t){return t?[t.Vg(),t.Zg()]:[this.Py,this.Ay]}fO(t,s="stretch"){this.wE<2||this.CR&&this.CR.AG()>0?(this.EF(),this.bF(),this.dO(t,s)):(this.cF().LI(t,this.CR,s),this._R=0)}dO(t,s="stretch"){const i=t.xG();if(!i)throw new Error("not a texture-backed render target");this.xF(i),this.BF(s,i)}pO(t){this.wE<2||(this.cF().DI(t.bG()),this._R=0)}mO(t){this.cO(null),this.Ob();const s=t.xG();s===this.AR&&(this.zG.bindTexture(this.zG.TEXTURE_2D,null),this.AR=null),s===this.RI&&(this.zG.activeTexture(this.zG.TEXTURE1),this.zG.bindTexture(this.zG.TEXTURE_2D,null),this.zG.activeTexture(this.zG.TEXTURE0),this.RI=null),t.WT()}async kG(t,s,i){this.Ob();const e=this.CR;let n,r,h;t?(n=t.Vg(),r=t.Zg(),h=t.bG()):(n=this.Vg(),r=this.Zg(),h=null);let o=0,a=0,l=n,u=r;if(i){o=Ic.Yn(Math.floor(i.Za()),0,n-1),a=Ic.Yn(Math.floor(i.Qa()),0,r-1);let t=i.width();t=0===t?n-o:Ic.Yn(Math.floor(t),0,n-o);let s=i.height();s=0===s?r-a:Ic.Yn(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}const c=this.zG;c.bindFramebuffer(c.FRAMEBUFFER,h);const f=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.CR=null,this.YC.SG=null,this.YC.vG=null,this.cO(e)};let d;if(!s&&this.PT()>=2){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const t=c.createBuffer(),s=l*u*4,i=c.PIXEL_PACK_BUFFER;c.bindBuffer(i,t),c.bufferData(i,s,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(i,null),f();const e=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.HG(()=>c.getSyncParameter(e,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(e),d=new ImageData(l,u),c.bindBuffer(i,t),c.getBufferSubData(i,0,new Uint8Array(d.data.buffer),0,s),c.bindBuffer(i,null),c.deleteBuffer(t)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}gO(){this.sO(!0),this.cF().eP(),this._R=0,this.DR=1}yO(){this.sO(!1),this.cF().rP(),this._R=0,this.DR=2}wO(){return 2===this.DR}SO(){this.sO(!0),this.cF().oP(),this._R=0,this.DR=0}vO(t){this.bO()&&(this.cF().BI(t),this._R=0)}MO(t){this.bO()&&(this.cF().VI(t),this._R=0)}HG(t){const s=new Promise(s=>Wc.add({resolve:s,JE:t}));return-1===jc&&(jc=self.requestAnimationFrame(Cc)),s}Vb(){return this.Py*this.Ay*(this.QE.alpha?4:3)}Hb(){let t=0;for(const s of Ic.Lw.ZT.LG())s.xG()||(t+=s.$T());return t}Ub(){let t=0;for(const s of Ic.Lw.gT.qT())t+=s.$T();return t}xO(){return this.tR}PT(){return this.wE}KG(){return this.dR}TO(){return"webgl"+this.PT()}AT(){return this.PT()>=2}CT(){return this.NR}GO(){return this.BR}_O(){return this.WR}CO(){return this.jR}IO(){return this.VR}PO(){if(this.PT()>=2)return"webgl2";{const t=[];return this.XR&&t.push("EXT_frag_depth"),this.YR&&t.push("OES_standard_derivatives"),this.KR&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}AO(){return this.HR}bO(){return!!this.SE}vE(){return this.SE}VG(){return this.zR}eF(){return!!this.$R}LT(){return this.JR}NT(){return this.ZR}WE(t){this.tF.add(t)}jE(t){this.tF.delete(t)}FE(){return this.sF}IT(){return this.zG}iF(t){this.Fv([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}EO(){return this.Jb()}}}{const Vc=self._s,Hc={RO:null,FO:null,OO:null,getTime:null,DO:null};Vc.Lw.kO=class{constructor(t){t=Object.assign({},Hc,t),this.LO=t.RO,this.NO=t.FO,this.BO=t.OO,this.WO=t.getTime,this.jO=t.DO,this.VO=null,this.HO=new Set}UO(t){this.HO.add(t)}zO(t){this.HO.delete(t)}BM(){this.VO=null;for(const t of this.HO)t.BM()}JO(t){return this.LO?this.LO(t):[t.Vg(),t.Zg()]}rO(t){return this.NO(t)}$O(t,s){this.BO(t,s)}qO(){return this.WO()}Fp(t){this.jO(t)}XO(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.VO||this.VO.Vg()===s&&this.VO.Zg()===i||(t.yG(this.VO),this.VO=null),null===this.VO&&(this.VO=t.aO(null,{width:s,height:i,lT:"nearest",fT:!1})),this.VO}}}{const Uc=self._s,zc=(self.assert,self.hs.fs),Jc=Uc.Un(Uc.Rect),$c=Uc.Un(Uc.Rect),qc=Uc.Un(Uc.Rect),Xc=Uc.Un(Uc.Rect),Yc=zc.create(),Kc=zc.create(),Zc={YO:null,KO:null,ZO:null,QO:!1},Qc={tD:null,sD:!1,iD:!1,eD:!1,nD:!1,rD:!1,hD:!1};Uc.Lw.oD=class{constructor(t,s){s=Object.assign({},Zc,s),this.Vp=t,this.aD=s.YO,this.lD=s.KO,this.uD=s.ZO,this.cD=null,this.fD=[],this.dD=[],this.pD=[],this.mD=!1,this.EM=0,this.gD=!1,this.yD=!1,this.wD=!1,this.SD=!1,this.vD=!1,this.bD=!1,this.iR=!1,this.MD=!1,this.xD=!1,this.TD=!1,this.GD=!1,this._D=!1,this.CD=0,this.ID=[null,null,null],this.PD=!!s.QO,this.AD=0,this.ED=0,this.RD=0,this.FD=0,this.OD=null,this.DD=null,this.kD=Uc.Un(Uc.Rect),this.LD=Uc.Un(Uc.Rect),this.ND=Uc.Un(Uc.Rect),this.BD=Uc.Un(Uc.Rect),this.WD=Uc.Un(Uc.Rect),this.jD=1,this.VD=1,this.HD=0,this.UD=0,this.zD=null,this.JD=null,this.$D=0,this.qD=0,this.XD=0,this.YD=0,this.KD=!1,this.oG=zc.create(),this.ZD=zc.create(),this.Vp.UO(this)}zn(){this.Vp.zO(this),Uc.Sh(this.pD),Uc.Sh(this.fD),Uc.Sh(this.dD),this.OD=null,this.DD=null,this.aD=null,this.lD=null,this.uD=null}BM(){this.mD=!0,Uc.Sh(this.pD),Uc.Sh(this.fD),Uc.Sh(this.dD)}QD(){return this.mD}tk(t,s){if(s=Object.assign({},Qc,s),Uc.Sh(this.pD),this.AD=0,this.ED=0,this.gD=!1,this.yD=!1,this.wD=!1,this.SD=!1,this.vD=!1,this.bD=!1,this.CD=0,this._D=!!s.nD,this.GD=!!s.hD,this.mD=!1,Uc.Th(this.fD,t),0===t.length)return;if(s.tD){if(s.tD.length!==t.length)throw new Error("incorrect indexMap length");Uc.Th(this.dD,s.tD)}else{Uc.Sh(this.dD);for(let s=0,i=t.length;s<i;++s)this.dD.push(s)}for(const s of t)this.AD+=s.yM(),this.ED+=s.wM(),s.xM()&&(this.gD=!0),s.GM()&&(this.yD=!0),s.TM()&&(this.wD=!0),s.SM()&&(this.SD=!0),s.IM()&&(this.vD=!0);this.bD=this.sk(t[0].mM());const i=this.ik(t[0],s),e=this.ek(t.at(-1),s);if(1===t.length&&!i&&!e)return void(this.TD=!0);this.TD=!1;let n=0;i&&(this.CD=1,this.pD.push(Uc.Un(Uc.Lw.oD.rk.nk,this,-1,1)),n=1);for(let s=0,r=t.length;s<r;++s)if(0!==s||i){let t=1===n?2:1;s!==r-1||e||(t=0),this.CD=Math.max(this.CD,t),this.pD.push(Uc.Un(Uc.Lw.oD.rk.hk,this,n,t,s)),n=t}else this.CD=1,this.pD.push(Uc.Un(Uc.Lw.oD.rk.ak,this,-1,1,s)),n=1;e&&this.pD.push(Uc.Un(Uc.Lw.oD.rk.lk,this,n,0))}ik(t,s){return!!(s.sD||t.vM()||s.eD&&!t.MM()||t.GM()&&!this.GD||0!==this.AD||0!==this.ED)||(t.mM().jb()?t.TM()&&(s.rD||s.nD)||t._M()&&s.nD:t.TM()&&!this.bD&&s.rD)}ek(t,s){return!!s.iD||(t.mM().jb()?t.TM()||t.SM():(t.TM()||t.SM())&&this.uk())}sk(t){return t.tv()&&this.wD&&!this.SD}ck(t,s,i){t.tv()&&null===s&&(s=t.fk()),this.zD=s,this.OD=i.dk||null,this.DD=i.pk||null,this.EM=i.mk||0,this.jD=i.devicePixelRatio||1,this.VD=i.gk||1,this.HD=i.yk||0,this.UD="number"==typeof i.time?i.time:this.Vp.qO(),this.iR=!1,t.pF(),this.gD&&this.wk();let e=!1;if(this.Sk()&&(this.vk(t,i),e=!0,this.JD=this.Vp.XO(t,this.RD,this.FD),Jc.m(this.LD),Jc.vl(),t.tv()&&t.bk(this.zD),t.Mk(this.zD.xG(),this.JD,Jc.Za(),Jc.Qa(),Jc.width(),Jc.height())),this.TD)this.xk(t,i);else if(e||this.vk(t,i),0!==this.ND.width()||0!==this.ND.height()){t.CF(),t.Ib(),t.bF(),t.jv(0),t.Hv(0),this.cD=i.Tk||null,this.$D=i.Gk||0,this.qD=i._k||0,this.XD=i.Ck||0,this.YD=i.Ik||0,this.KD=!!i.Pk,this.Ak(t),this.ID[0]=s,this.ID[1]=this.CD>=1?this.Ek():null,this.ID[2]=2===this.CD?this.Ek():null;for(const s of this.pD){const i=this.Rk(s.Fk()),e=this.Rk(s.Ok());t.tv()?s.Dk(t,i,e):s.kk(t,i,e)}t.xF(null),this.ID[1]&&this.Lk(this.ID[1]),this.ID[2]&&this.Lk(this.ID[2]),this.ID.fill(null),this.Nk(t),this.zD=null,this.JD=null,this.OD=null,this.DD=null,this.cD=null}}vk(t,s){const[i,e]=this.Vp.JO(t);this.Bk(t,i,e),this.Wk(s)}Bk(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.RD===s&&this.FD===i||this.jk(t,s,i,0,0,this.oG,this.ZD),this.RD=s,this.FD=i}jk(t,s,i,e,n,r,h){const o=s/2+e,a=i/2+n;t.QS(r,s/i);const l=t.nv(o,a,t.WS(i),o,a,0,i);zc.m(h,l)}Wk(t){this.kD.m(t.Vk),t.Hk?this.LD.m(t.Hk):this.LD.set(0,0,this.RD,this.FD),this.ND.m(this.LD),this.ND.wt(this.RD,this.FD);const s=this.VD*this.jD;this.LD.cl(this.AD*s,this.ED*s),this.WD.m(this.LD),this.WD.wt(this.RD,this.FD),this.LD.bl(0,0,this.RD,this.FD),this.BD.m(this.LD),this.BD.wt(this.RD,this.FD)}Ak(t){if(this.MD=t.iO(),this.xD=t.wO(),this.GD)t.sO(!1),this.yD&&t.eO(!0);else{if(Jc.m(this.LD),t.jb()){const t=this.VD*this.jD;Jc.cl(Math.max(this.AD,1)*t,Math.max(this.ED,1)*t),Jc.vl(),Jc.Yn(0,0,this.RD,this.FD)}else Jc.vl();t.nO(Jc.Za(),Jc.Qa(),Jc.width(),Jc.height(),this.FD)}}Uk(t){t.bF(),this.GD||(this.xD&&t.SO(),t.sO(!1),this.yD&&t.eO(!0)),t.tv()&&t.zk(!0)}Nk(t){t.eO(!1),this.xD&&t.yO(),t.sO(this.MD),this.GD||t.hO(),t.tv()&&t.zk(!1),this.iR=t.mF()}Jk(){this.WD.Yn(0,0,1,1)}Rk(t){return t<0?null:this.ID[t]}Ek(){return this.Vp.rO(this)}$k(){return this.zD}Lk(t){this.Vp.$O(t,this)}qk(t){return this.fD[t]}Xk(t){this.cD?this.cD(this,t,()=>this.aD(t,this)):this.aD(t,this),this.TD||this.Uk(t)}Yk(t){if(this.GD)return!0;if(0!==this.$D||0!==this.qD||0!==this.XD||0!==this.YD)return!1;const[s,i]=t.WF(t.rO());return s===this.RD&&i===this.FD}Kk(t,s){let i=this.oG,e=this.ZD;if(s&&!this.Yk(t)){let s,n;i=Yc,e=Kc,0!==this.XD&&0!==this.YD?[s,n]=[this.XD,this.YD]:[s,n]=t.WF(t.rO()),this.jk(t,s,n,this.$D,this.qD,i,e),this.GD||t.hO()}t.oF(i),t.dF(e)}wk(){this.Vp.Fp(this)}Zk(t,s){return this.uD(this.dD[t],s)}Qk(t,s){let i=this.WD,e=this.BD,n=this.ND;t.jb()&&($c.m(i),$c.pl(1),i=$c,qc.m(e),qc.pl(1),e=qc,Xc.m(n),Xc.pl(1),n=Xc),this.tL(t,s,e,n,i,1/this.RD,1/this.FD)}sL(t,s){let i=this.BD,e=this.ND,n=1/this.RD,r=1/this.FD;if(this.lD){let{iL:t,eL:s,nL:h}=this.lD(this.OD);t||(Jc.set(0,0,0,0),t=Jc),s||(s=this.RD),h||(h=this.FD),i=t,e=t,n=1/s,r=1/h}else t.jb()&&(qc.m(i),qc.pl(1),i=qc,Xc.m(e),Xc.pl(1),e=Xc);let h=this.WD;t.jb()&&(h=$c,h.m(this.WD),h.pl(1)),this.tL(t,s,i,e,h,n,r),t.tv()&&this.vD&&t.rL(this._D)}hL(t){return this.wD?t.tv()?this.Sk()?this.JD:this.zD.xG():this.zD:null}tL(t,s,i,e,n,r,h){t.YF(this.hL(t),n,i,e,this.kD,r,h,this.jD,this.VD,this.HD,this.UD),t.KF(this.Zk(s,t))}xk(t,s){const i=this.fD[0],e=t.iO(),n=i.GM();n&&(t.sO(!1),t.eO(!0),this.WD.set(0,0,1,1),this.ND.set(0,0,1,1)),t.uv(i),t.LM(this.EM),t.cO(this.zD),t.Ib();let r=0,h=1;if(this.ND.set(0,0,1,1),i._M()&&this.lD){const{iL:t,eL:s,nL:i}=this.lD(this.OD);t&&this.ND.m(t),r=Number.isFinite(s)?1/s:0,h=Number.isFinite(i)?1/i:0}else{const[s,i]=this.Vp.JO(t);r=1/s,h=1/i}s.Vk?this.kD.m(s.Vk):this.kD.set(0,0,0,0),t.YF(this.hL(t),this.WD,this.ND,this.ND,this.kD,r,h,this.jD,this.VD,this.HD,this.UD),t.KF(this.Zk(0,t)),t.tv()&&this.vD&&t.rL(this._D),t.jv(0),this.Xk(t),n&&(t.eO(!1),t.sO(e))}Sk(){return this.bD}uk(){return!this.bD}oL(){return this.wD}aL(){return!!this.TD&&!this.Sk()}lL(){return this.GD}uL(){return this.OD}cL(){return this.DD}fL(){return this.EM}dL(){return this.KD}mF(){return this.iR}pL(){return this.LD}mL(){return this.BD}gL(){return this.PD}async yL(t,s,i){}}}self._s.Lw.oD.rk=class{constructor(t,s,i,e=-1){this.wL=t,this.SL=s,this.vL=i,this.Aw=e}bL(){return this.wL}Fk(){return this.SL}Ok(){return this.vL}ML(){return this.Aw}z_(){return this.bL().qk(this.ML())}kk(t,s,i){}Dk(t,s,i){}};{const tf=self._s;tf.Lw.oD.rk.nk=class extends tf.Lw.oD.rk{constructor(t,s,i,e){super(t,s,i,e)}kk(t,s,i){const e=this.bL();t.CF(),t.Ib(),t.lv(),t.cO(i,e.dL()),t.ZF(0,0,0,0),e.Xk(t),e.Jk()}Dk(t,s,i){const e=this.bL();t.CF(),t.Ib(),t.lv(),t.cO(i,!1),t.ZF(0,0,0,0),e.Xk(t),e.Jk()}}}{const sf=self._s,ef=sf.Un(sf.Rect),nf=sf.Un(sf.Il);sf.Lw.oD.rk.lk=class extends sf.Lw.oD.rk{constructor(t,s,i,e){super(t,s,i,e)}kk(t,s,i){const e=this.bL();t.lv(),t.cO(i),e.Kk(t,!0),t.LM(e.fL()),t.xF(s.xG()),nf.Xl(e.pL()),ef.m(e.mL()),ef.pl(1),t.tb(nf,ef),e.gL()&&t.pO(s)}Dk(t,s,i){const e=this.bL();t.lv(),t.cO(i,!1),e.Yk(t)?nf.Xl(e.mL()):(t.zk(!1),e.Kk(t,!0),nf.Xl(e.pL())),t.xL(null),t.LM(e.fL()),t.xF(s.xG()),e.lL()?t.BF():t.tb(nf,e.mL())}}}{const rf=self._s;rf.Lw.oD.rk.ak=class extends rf.Lw.oD.rk{constructor(t,s,i,e){super(t,s,i,e)}kk(t,s,i){const e=this.bL();t.cO(i,e.dL()),t.ZF(0,0,0,0),t.EF(),t.uv(this.z_()),e.sL(t,this.ML()),e.Xk(t),e.Jk()}Dk(t,s,i){const e=this.bL();t.cO(i,!1),t.ZF(0,0,0,0),t.EF(),t.uv(this.z_()),e.sL(t,this.ML()),e.Xk(t),e.Jk()}}}{const hf=self._s,of=hf.Un(hf.Rect),af=hf.Un(hf.Il);hf.Lw.oD.rk.hk=class extends hf.Lw.oD.rk{constructor(t,s,i,e){super(t,s,i,e)}kk(t,s,i){const e=this.bL();t.cO(i);const n=0===this.Ok();n?t.LM(e.fL()):(t.ZF(0,0,0,0),t.EF()),t.uv(this.z_()),e.Qk(t,this.ML()),t.xF(s.xG()),e.Kk(t,n),af.Xl(e.pL()),of.m(e.mL()),of.pl(1),t.tb(af,of),e.gL()&&t.pO(s)}Dk(t,s,i){const e=this.bL();t.cO(i,!1),0===this.Ok()?(t.LM(e.fL()),t.xL(null),e.Yk(t)?af.Xl(e.mL()):(t.zk(!1),e.Kk(t,!0),af.Xl(e.pL()))):(t.ZF(0,0,0,0),t.EF(),af.Xl(e.mL())),t.uv(this.z_()),e.Qk(t,this.ML()),t.xF(s.xG()),e.lL()?t.BF():t.tb(af,e.mL())}}}{let lf=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]};0;const uf=self._s,cf=self.Ls;let ff=null;const df=new Set,pf=[],mf=[];let gf=!1,yf=!1,wf=!1;const Sf=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.TL=class{constructor(t){ff=t,Object.defineProperties(this,{GL:{value:ff.CL()._L(),writable:!1},IL:{value:ff.AL().PL(),writable:!1},EL:{value:{},writable:!1},RL:{value:{},writable:!1},FL:{value:ff.OL(),writable:!1},DL:{value:ff.kL(),writable:!1},LL:{value:ff.NL(),writable:!1},BL:{value:ff.WL(),writable:!1},jL:{value:new Date(ff.VL()),writable:!1},storage:{value:new self.HL(ff),writable:!1},UL:{value:ff.zL(),writable:!1},JL:{value:ff.$L(),writable:!1},qL:{value:ff.XL(),writable:!1},lT:{value:ff.YL(),writable:!1},KL:{value:ff.ZL(),writable:!1},QL:{value:new self.tN(t),writable:!1},sN:{value:new self.iN(t),writable:!1}}),ff.eN().addEventListener("keydown",t=>{df.has(t.key)?t.stopPropagation():df.add(t.key)}),ff.eN().addEventListener("keyup",t=>df.delete(t.key)),ff.wf().addEventListener("window-blur",()=>df.clear()),ff.zL()&&(self.alert=t=>(gf||(gf=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}nN(t){Object.defineProperties(this.EL,t)}rN(t){Object.defineProperties(this.RL,t)}addEventListener(t,s){ff.eN().addEventListener(t,s)}removeEventListener(t,s){ff.eN().removeEventListener(t,s)}hN(t,...s){cf.le(t);const i=ff.oN(),e=i.aN(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e._u())return e.lN();if(s.length<e.uN())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.uN()} expected)`);const n=e.cN();let r=n.fN();const h=i.dN();if(h){r=r.slice(0);const t=new Set(r);for(const s of h.fN())t.has(s)||(r.push(s),t.add(s));for(const s of i.pN())t.has(s)||(r.push(s),t.add(s))}return n.mN(r,e.gN(),e.yN(),e.lN(),...s)}wN(t){const s=ff.vN().SN();if(!s)throw new Error("not in a function which returns a value");switch(s.bN()){case 1:"number"==typeof t&&s.MN(t);break;case 2:"string"==typeof t&&s.MN(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.MN(t)}}signal(t){cf.le(t),ff.oN().xN(t)}TN(t){return cf.le(t),ff.oN().GN(t)}_N(){return[ff.$L(),ff.XL()]}get CN(){return ff.IN()}get PN(){return ff.AN()}get EN(){return ff.RN()}get FN(){return ff.ON()}get DN(){return ff.kN()}get LN(){return ff.NN()}get BN(){return ff.WN()}set BN(t){cf.re(t),ff.jN(t)}get VN(){return yf||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),yf=!0),ff.HN()}get framesPerSecond(){return ff.HN()}get UN(){return ff.zN()}get JN(){return ff.$N()}get qN(){return ff.XN()}get YN(){return ff.KN()}set YN(t){if(!Sf.has(t))throw new Error("invalid framerate mode");ff.ZN(t)}get QN(){return ff.tB()}set QN(t){cf.re(t),ff.sB(t)}get iB(){return ff.eB()}set iB(t){ff.nB(t)}get rB(){return ff.CL().hB()}get oB(){return ff.CL().aB()}random(){return ff.lB()}get layout(){const t=ff.uB();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.cB()}fB(t){const s=ff.dB();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.pB(t),!i)throw new Error("invalid layout");return i.cB()}mB(){return ff.dB().gB().map(t=>t.cB())}yB(t){const s=ff.dB();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.pB(t),!i)throw new Error("invalid layout");s.wB()||s.SB(i)}get keyboard(){const t=ff.vB().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get bB(){const t=ff.vB().bB;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get MB(){const t=ff.vB().MB;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get xB(){const t=ff.vB().xB;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}get JC(){return ff.GB().TB()}_B(t,s){cf.le(t),cf.le(s),ff.CB(t,s)}IB(t){cf.re(t);const s=ff.PB(t);return s?s.AB():null}EB(t,s){cf.Ee(s);const i=ff.RB();for(const s of t){const t=ff.OB(s),i=t.DB();pf.push([i.kB().ML(),i.LB()]),mf.push(t)}if(0===pf.length)return;pf.sort(lf),mf.sort((t,i)=>s(t.AB(),i.AB()));let e=!1;for(let t=0,s=pf.length;t<s;++t){const s=mf[t],n=i.NB(pf[t][0]),r=pf[t][1],h=n.BB();h[r]!==s&&(h[r]=s,s.DB().WB(n,!0),n.jB(s),e=!0)}e&&ff.VB(),uf.Sh(pf),uf.Sh(mf)}async HB(t,s){wf||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),wf=!0);const i=new MessageChannel,e=i.port1,n=i.port2;return await ff.UB("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),e}alert(t){return ff.UB("runtime","alert",{message:t+(ff.zL()?" [via Web Worker]":"")})}zB(t){return cf.re(t),ff.JB(t)}$B(t){ff.qB(t)}async XB(t,s,i){cf.ue(t),cf.se(s),cf.Be(i,DOMRect),i||(i=new DOMRect(0,0,0,0));const e=ff.GB();if(!e)return;ff.VB();const n=await e.YB(t||"image/png",s,i.x,i.y,i.width,i.height);return await ff.KB(uf.sW.tW.QB.ZB,null),n}}}{const vf=self._s;self.Ls;let bf=null;self.iW=class{constructor(t){bf=t,Object.defineProperties(this,{eW:{value:!0,writable:!1}})}nW(t){const s=self.hW.rW(t);if(!s)throw new Error("invalid IImageInfo");s.oW(bf.aW())}lW(t){return bf.so(t)}uW(t){return bf.io(t)}cW(t){return bf.eo(t)}fW(t){return bf.no(t)}dW(t){return bf.pW(t)}mW(t){return"flat"===bf.gW()&&vf.Kh(t)&&(t=t.toLowerCase()),bf.yW(t)}get wW(){return bf.SW()}async vW(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}bW(...t){return bf.MW(...t)}xW(t){return bf.TW(t)}GW(t){return bf._W(t)}}}{const Mf=self._s,xf=self.Ls;let Tf=null;self.IW=class{constructor(t){Tf=t,Object.defineProperties(this,{runtime:{value:Tf.aW(),writable:!1}})}PW(t,s){const i=Tf.aW(),e=i.OB(t),n=i.OB(s);return Tf.AW(e,n)}EW(t,s){const i=Tf.aW(),e=i.OB(t);for(const t of s){const s=i.OB(t);if(Tf.AW(e,s))return t}return null}RW(t){const s=Tf.aW().OB(t),i=Tf.FW(s);return i?i.AB():null}OW(t,s){if(xf.re(t),xf.re(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");Tf.DW(t,s)}kW(){return Tf.LW()}NW(t,s){const i=Tf.aW();let e;e=Array.isArray(t)?t.map(t=>i.BW(t)):[i.BW(t)];const n=Mf.Rect.Ya(s),r=[];return Tf.WW(null,e,n,r),r.map(t=>t.AB())}}}{const Gf=self._s;self.Ls;let _f=null;const Cf=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),If=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),Pf=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.tN=class{constructor(t){_f=t,Object.defineProperties(this,{jW:{value:Gf.Ks.hi,writable:!1},os:{value:Cf.get(Gf.Ks.Zs)||"unknown",writable:!1},VW:{value:Gf.Ks.Qs,writable:!1},browser:{value:If.get(Gf.Ks.ti)||"unknown",writable:!1},HW:{value:Gf.Ks.si,writable:!1},UW:{value:Pf.get(Gf.Ks.ei)||"unknown",writable:!1}})}get zW(){let t=_f.JW();return _f.$W()?t="nwjs":_f.qW()?t="windows-webview2":"cordova"===t?t="Android"===Gf.Ks.Zs?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get JC(){return _f.GB().XW()}get YW(){return _f.GB().KW()}get ZW(){return _f.GB().QW()}get tj(){return _f.GB().sj()}get ij(){return _f.GB().ej()}get nj(){return _f.GB().rj()}get hj(){return _f.GB().oj()}get aj(){return _f.GB().lj()}get devicePixelRatio(){return _f.uj()}}}{self._s;const Af=self.Ls;self.HL=class{constructor(t){this.cj=t.fj()}getItem(t){return Af.le(t),this.cj.getItem(t)}setItem(t,s){return Af.le(t),this.cj.setItem(t,s)}removeItem(t){return Af.le(t),this.cj.removeItem(t)}clear(){return this.cj.clear()}keys(){return this.cj.keys()}}}{const Ef=self._s,Rf=(self.Ls,Ef.Cs());self.dj=class{#t;constructor(){const t=Ef.mj.pj(Rf);this.#t=t,Object.defineProperties(this,{runtime:{value:t.aW().gj(),writable:!1},id:{value:t.yj(),writable:!1},wj:{value:t.Sj(),writable:!1},vj:{value:t.bj(),writable:!1},Mj:{value:t.xj(),writable:!1},Tj:{value:t.Gj(),writable:!1},_j:{value:t.Cj(),writable:!1},Ij:{value:t.Pj(),writable:!1},Aj:{value:t.Ej(),writable:!1},Rj:{value:t.Fj(),writable:!1}}),t.aW().Oj(this,t)}static Dj(t){if(!t)return null;const s=Ef.mj.kj(t);return s?s.Lj():null}Nj(){return this.#t.Wj().Bj()}jj(){return this.#t.Vj().AB()}}}{const Ff=globalThis._s,Of=globalThis.Ls,Df=Ff.Cs();globalThis.Hj=class{#t;constructor(){const t=Ff.mj.pj(Df);this.#t=t,Object.defineProperties(this,{name:{value:t.Pc(),writable:!1},runtime:{value:t.aW().gj(),writable:!1},Uj:{value:t.zj().Lj(),writable:!1}}),t.aW().Oj(this,t)}addEventListener(t,s){Of.le(t),Of.Ee(s),this.#t.eN().addEventListener(t,s)}removeEventListener(t,s){Of.le(t),Of.Ee(s),this.#t.eN().removeEventListener(t,s)}Jj(){return[...this.$j()]}qj(){return Ff.Bh(this.$j())}Xj(){return[...this.Yj()]}Kj(){return Ff.Bh(this.Yj())}Zj(t){const s=this.#t,i=s.aW().Qj(t),e=s.tV(i);return e?e.AB():null}*$j(){for(const t of this.#t.sV())yield t.AB()}*Yj(){for(const t of this.#t.eV().iV())yield t.AB()}}}{const kf=globalThis._s,Lf=globalThis.Ls,Nf=kf.Cs();globalThis.nV=class extends globalThis.Hj{#t;constructor(){super();const t=kf.mj.pj(Nf);this.#t=t}rV(t){Lf.Ee(t);const s=this.#t;if(s.hV()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.oV(t)}Gi(t,s,i,e,n){if(Lf.te(s),Lf.te(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#t,h=r.aW(),o=h.uB().kB(t);if(!o)throw new Error("invalid layer");const a=h.aV(r,o,s,i,e,n);e&&o.lV(a);const l=h.oN();return l.uV(!0),a.cV(),l.uV(!1),l.fV()||h.dB().dV()||h.pV(),a.AB()}mV(){return this.#t.gV().map(t=>t.Bj())}*yV(){for(const t of this.#t.gV())yield t.Bj()}wV(t){return Lf.Ne(t,globalThis.SV),t.vV(this)}}}{const Bf=globalThis._s,Wf=globalThis.Ls,jf=globalThis.nV,Vf=Bf.Cs();globalThis.SV=class extends globalThis.Hj{#t;constructor(){super();const t=Bf.mj.pj(Vf);this.#t=t}bV(){return this.#t.MV().map(t=>t.Bj())}*xV(){for(const t of this.#t.MV())yield t.Bj()}vV(t){Wf.Ne(t,jf);const s=this.#t,i=s.aW().BW(t);return s.TV(i)}}}{self._s;const Hf=self.Ls,Uf=["above","below","top-sublayer","bottom-sublayer"];self.GV=class{#t;constructor(t){this.#t=t;const s=[],i=t._V(),e=i.CV().length;for(let t=0;t<e;++t)s.push(new self.IV(i,t));Object.defineProperties(this,{runtime:{value:t.aW().gj(),writable:!1},name:{value:t.Pc(),writable:!1},index:{value:t.ML(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){Hf.le(t),Hf.Ee(s),this.#t.eN().addEventListener(t,s)}removeEventListener(t,s){Hf.le(t),Hf.Ee(s),this.#t.eN().removeEventListener(t,s)}get width(){return this.#t.Vg()}set width(t){Hf.re(t),this.#t.Xg(t)}get height(){return this.#t.Zg()}set height(t){Hf.re(t),this.#t.Hg(t)}PV(t,s){Hf.re(t),Hf.re(s);const i=this.#t;i.Xg(t),i.Hg(s)}getSize(){const t=this.#t;return[t.Vg(),t.Zg()]}set scale(t){Hf.re(t),this.#t.AV(t)}get scale(){return this.#t.EV()}set angle(t){Hf.re(t),this.#t.RV(t)}get angle(){return this.#t.FV()}set scrollX(t){Hf.te(t),this.#t.OV(t)}get scrollX(){return this.#t.DV()}set scrollY(t){Hf.te(t),this.#t.kV(t)}get scrollY(){return this.#t.LV()}scrollTo(t,s){Hf.te(t),Hf.te(s);const i=this.#t;i.OV(t),i.kV(s)}NV(){const t=this.#t;return[t.DV(),t.LV()]}get BV(){return this.#t.WV()}jV(t){const s=this.#t;let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return i=s.kB(t),i?i.VV():null}HV(){return this.#t.UV().map(t=>t.VV())}*zV(){for(const t of this.#t.zV())yield t.VV()}JV(t,s,i){const e=this.#t,n=self.$V;Hf.le(t),Hf.Be(s,n);const r=s?e.aW().qV(s):null,h=Uf.indexOf(i);if(h<0)throw new Error("invalid location");e.XV(t,r,h)}YV(t,s,i){const e=this.#t,n=e.aW(),r=self.$V;Hf.Ne(t,r);const h=n.qV(t);if(!h)throw new Error("invalid layer");Hf.Be(s,r);const o=s?n.qV(s):null,a=Uf.indexOf(i);if(a<0)throw new Error("invalid location");e.KV(h,o,a)}ZV(t){const s=this.#t,i=self.$V;Hf.Ne(t,i);const e=s.aW().qV(t);if(!e)throw new Error("invalid layer");const n=e.aW();s.QV(e),n.oN().fV()||n.pV()}tH(){const t=this.#t,s=t.aW();t.sH(),s.oN().fV()||s.pV()}iH(t,s){Hf.re(t),Hf.re(s),this.#t.eH(t,s)}nH(){return this.#t.rH()}set V(t){Hf.le(t);const s=this.#t;if("perspective"===t)s.hH();else{if("orthographic"!==t)throw new Error("invalid projection");s.oH()}}get V(){return this.#t.aH()?"orthographic":"perspective"}}}{const zf=self._s,Jf=self.Ls,$f=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),qf=new Map([...$f.entries()].map(t=>[t[1],t[0]])),Xf=new Set(["2d","3d"]),Yf=zf.Un(zf.xo);self.$V=class{#t;constructor(t){this.#t=t;const s=[],i=t._V(),e=i.CV().length;for(let t=0;t<e;++t)s.push(new self.IV(i,t));Object.defineProperties(this,{runtime:{value:t.aW().gj(),writable:!1},name:{value:t.Pc(),writable:!1},layout:{value:t.pB().cB(),writable:!1},effects:{value:s,writable:!1}}),t.aW().Oj(this,t)}addEventListener(t,s){this.#t.eN().addEventListener(t,s)}removeEventListener(t,s){this.#t.eN().removeEventListener(t,s)}get lH(){const t=this.#t.uH();return t?t.VV():null}*cH(){for(const t of this.#t.cH())yield t.VV()}*fH(){for(const t of this.#t.dH())yield t.VV()}*pH(){for(const t of this.#t.dH())for(const s of t.mH())yield s.VV()}get index(){return this.#t.ML()}get isVisible(){return this.#t.gH()}set isVisible(t){this.#t.yH(t)}get wH(){return this.#t.SH()}get vH(){return this.#t.bH()}set vH(t){this.#t.MH(t)}get xH(){return this.#t.TH()}set xH(t){this.#t.GH(!!t)}get _H(){return this.#t.CH()}get opacity(){return this.#t.wF()}set opacity(t){t=zf.Yn(+t,0,1),isNaN(t)||this.#t.vF(t)}set scale(t){Jf.re(t),this.#t.IH(t)}get scale(){return this.#t.PH()}set AH(t){Jf.re(t),this.#t.EH(t)}get AH(){return this.#t.RH()}set angle(t){Jf.re(t),this.#t.RV(t)}get angle(){return this.#t.FH()}set OH(t){Jf.re(t),this.#t.DH(t)}get OH(){return this.#t.kH()}set LH(t){Jf.re(t),this.#t.NH(t)}get LH(){return this.#t.BH()}set WH(t){Jf.re(t),this.#t.tx(t)}get WH(){return this.#t.QM()}set renderingMode(t){if(!Xf.has(t))throw TypeError("invalid rendering mode");this.#t.jH("3d"===t)}get renderingMode(){return this.#t.VH()?"3d":"2d"}set HH(t){this.#t.UH(t)}get HH(){return this.#t.zH()}set JH(t){this.#t.$H(t)}get JH(){return this.#t.qH()}set mk(t){Jf.le(t);const s=$f.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");this.#t.LM(s)}get mk(){return qf.get(this.#t.XH())}set backgroundColor(t){if(Jf.Te(t),t.length<3)throw new Error("expected 3 elements");Yf.Po(t[0],t[1],t[2]);const s=this.#t,i=s.YH();i.zo(Yf)||(i.ko(Yf),s.aW().VB())}get backgroundColor(){const t=this.#t.YH();return[t.Lo(),t.No(),t.Bo()]}set scrollX(t){Jf.te(t);const s=this.#t;s.KH(!0),s.OV(t)}get scrollX(){return this.#t.DV()}set scrollY(t){Jf.te(t);const s=this.#t;s.KH(!0),s.kV(t)}get scrollY(){return this.#t.LV()}scrollTo(t,s){Jf.te(t),Jf.te(s);const i=this.#t;i.KH(!0),i.OV(t),i.kV(s)}NV(){const t=this.#t;return[t.DV(),t.LV()]}ZH(){this.#t.KH(!1)}getViewport(){return this.#t.QH().il()}tU(t,s,i=0){Jf.te(t),Jf.te(s),Jf.te(i);const e=this.#t,n=e.aW();return e.sU(t-n.QW(),s-n.sj(),i)}iU(t,s,i=0){Jf.te(t),Jf.te(s),Jf.te(i);const e=this.#t,n=e.aW(),[r,h]=e.eU(t,s,i);return[r+n.QW(),h+n.sj()]}nU(t,s,i=0){return Jf.te(t),Jf.te(s),Jf.te(i),this.#t.rU(t,s,i)}hU(t,s,i=0){return Jf.te(t),Jf.te(s),Jf.te(i),this.#t.oU(t,s,i)}get aU(){return this.#t.lU()}}}{let Kf=function(t){let s=td.get(t);return s||(s=Zf.Un(Zf.Event.wf),td.set(t,s),s)};0;const Zf=self._s,Qf=self.Ls,td=new WeakMap,sd=Zf.Cs();self.uU=class{#t;constructor(){const t=Zf.mj.pj(sd);this.#t=t;const s={runtime:{value:t.aW().gj(),writable:!1},objectType:{value:t.cU().Bj(),writable:!1},Uj:{value:t.zj().Lj(),writable:!1}};t.fU(s),t.dU(s),Object.defineProperties(this,s),t.aW().Oj(this,t)}static pU(){return Zf.mj.mU()}gU(){const t=td.get(this);t&&(t.zn(),td.delete(this))}addEventListener(t,s,i){Qf.le(t),Qf.Ee(s),Kf(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Qf.le(t),Qf.Ee(s),Kf(this).removeEventListener(t,s,i)}dispatchEvent(t){Kf(this).dispatchEvent(t)}destroy(){const t=this.#t,s=t.aW();s.yU(t),s.oN().fV()||s.dB().dV()||s.oN().wU()||s.pV()}SU(){const t=this.#t.vU();return t?t.map(t=>t.AB()):[]}*bU(){const t=this.#t;if(t.MU())for(const s of t.xU())yield s.AB()}get uid(){return this.#t.TU()}get GU(){return this.#t._U()}get CU(){return this.#t.IU()}set BN(t){Qf.re(t),this.#t.jN(t)}get BN(){return this.#t.PU()}AU(){this.#t.EU()}get PN(){const t=this.#t;return t.aW().AN(t)}RU(...t){Qf.Te(t);const s=new Set(t),i=this.#t.FU();return s.isSubsetOf(i)}OU(t){Qf.Ne(t,Set),this.#t.DU(t)}kU(){return new Set(this.#t.FU())}signal(t){Qf.le(t);const s=this.#t;s.aW().oN().LU(s,t)}TN(t){Qf.le(t);const s=this.#t;return s.aW().oN().NU(s,t)}}}{const id=self._s,ed=self.Ls,nd=id.Cs();self.BU=class extends self.uU{#t;#s=!1;#i=null;#e=!1;#n=null;#r;#h;constructor(t){super(),this.#t=id.mj.pj(nd),this.#s=!1,this.#i=null,this.#e=!1,this.#n=null,this.#r=t?.WU,this.#h=t?.jU}gU(){this.VU(!1),this.HU(!1),super.gU()}UU(){return id.mj.zU()}JU(t){const s=this.#t;s.aW().$U(t,s)}qU(t){const s=this.#t;return s.aW().KB(t,s)}XU(t,s){if(ed.le(t),ed.Ee(s),!this.#r)throw new Error("no DOM component id set");this.#t.aW().YU(this.#r,t,s)}KU(t){ed.Te(t);for(const[s,i]of t)this.XU(s,i)}ZU(t,s){if(ed.le(t),!this.#r)throw new Error("no DOM component id set");this.#t.aW().jc(this.#r,t,s)}QU(t,s){if(ed.le(t),!this.#r)throw new Error("no DOM component id set");return this.#t.aW().UB(this.#r,t,s)}tz(t,s){if(!this.#t.aW().zL())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#r,handler:t,data:s,responseId:null});this.ZU(t,s)}VU(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=this.#t.aW();if(t){if(!this.#i)if(this.#t.aW().sz()){const t=globalThis.iz,s=this.Uj;this.#i=()=>{const i=performance.now();this.ez(),t.nz(s,performance.now()-i)}}else this.#i=()=>this.ez();s.wf().addEventListener("tick",this.#i)}else s.wf().removeEventListener("tick",this.#i)}rz(){return this.#s}ez(){}HU(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=this.#t.aW();if(t){if(!this.#n)if(this.#t.aW().sz()){const t=globalThis.iz,s=this.Uj;this.#n=()=>{const i=performance.now();this.hz(),t.nz(s,performance.now()-i)}}else this.#n=()=>this.hz();s.wf().addEventListener("tick2",this.#n)}else s.wf().removeEventListener("tick2",this.#n)}oz(){return this.#e}hz(){}az(){return[]}lz(){return null}uz(t){}cz(){if(!this.#h)throw new Error("no wrapper component id set");return this.#t.aW().fz(this.#h)}dz(t,s){if(ed.le(t),ed.Ee(s),!this.#h)throw new Error("no wrapper component id set");this.#t.aW().pz(this.#h,t,s)}mz(t){ed.Te(t);for(const[s,i]of t)this.dz(s,i)}gz(t,s){if(!this.#h)throw new Error("no wrapper component id set");this.runtime.sN.yz(this.#h,t,s)}wz(t,s){if(!this.#h)throw new Error("no wrapper component id set");return this.runtime.sN.Sz(this.#h,t,s)}}}{let rd=function(t){return class s extends t{#t;#s;constructor(t){super(t);const s=hd.mj.pj(fd),i=s.DB();this.#t=s,this.#s=i,cd.set(this,s);const e=[],n=i.vz();if(n){const t=i.cU()._V().CV().length;for(let s=0;s<t;++s)e.push(new self.IV(n,s))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#s.pB().cB()}get bz(){return this.#s.kB().VV()}get x(){return this.#s.qM()}set x(t){t=+t;const s=this.#s;isNaN(t)||s.qM()===t||(s.XM(t),s.Mz())}get y(){return this.#s.KM()}set y(t){t=+t;const s=this.#s;isNaN(t)||s.KM()===t||(s.ZM(t),s.Mz())}setPosition(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.qM()===t&&i.KM()===s||(i.xz(t,s),i.Mz())}Tz(){const t=this.#s;return[t.qM(),t.KM()]}offsetPosition(t,s){if(t=+t,s=+s,isNaN(t)||isNaN(s)||0===t&&0===s)return;const i=this.#s;i.Gz(t,s),i.Mz()}set _z(t){t=+t;const s=this.#s;isNaN(t)||s.Cz()===t||(s.Iz(t),s.Mz())}get _z(){return this.#s.Cz()}set Pz(t){t=+t;const s=this.#s;isNaN(t)||s.Az()===t||(s.Ez(t),s.Mz())}get Pz(){return this.#s.Az()}Rz(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.Cz()===t&&i.Az()===s||(i.Iz(t),i.Ez(s),i.Mz())}Fz(){const t=this.#s;return[t.Cz(),t.Az()]}get WH(){return this.#s.QM()}set WH(t){t=+t;const s=this.#t,i=this.#s;isNaN(t)||i.QM()===t||(i.tx(t),s.aW().VB())}get Oz(){return this.#s.Dz()}get width(){return this.#s.Vg()}set width(t){t=+t;const s=this.#s;isNaN(t)||s.Vg()===t||(s.Xg(t),s.Mz())}get height(){return this.#s.Zg()}set height(t){t=+t;const s=this.#s;isNaN(t)||s.Zg()===t||(s.Hg(t),s.Mz())}PV(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.Vg()===t&&i.Zg()===s||(i.BA(t,s),i.Mz())}getSize(){const t=this.#s;return[t.Vg(),t.Zg()]}get angle(){return this.#s.FV()}set angle(t){t=hd.Kn(+t);const s=this.#s;isNaN(t)||s.FV()===t||(s.RV(t),s.Mz())}get kz(){return hd.Qn(this.angle)}set kz(t){this.angle=hd.Zn(t)}Zl(t){return t?(this.#s.Lz(ld,ud,!1),ld.il()):this.#s.Nz().il()}Bz(t){return t?(this.#s.Lz(ld,ud,!1),ud.Jl()):this.#s.Wz().Jl()}jz(){return this.#s.Vz()}get isVisible(){return this.#s.SH()}set isVisible(t){t=!!t;const s=this.#t,i=this.#s;i.SH()!==t&&(i.yH(t),s.aW().VB())}get opacity(){return this.#s.wF()}set opacity(t){t=hd.Yn(+t,0,1);const s=this.#t,i=this.#s;isNaN(t)||i.wF()===t||(i.vF(t),s.aW().VB())}set Uz(t){if(od.Te(t),t.length<3)throw new Error("expected 3 elements");md.Po(t[0],t[1],t[2]);const s=this.#t,i=this.#s;i.zz().zo(md)||(i.Jz(md),s.aW().VB())}get Uz(){const t=this.#s.zz();return[t.Lo(),t.No(),t.Bo()]}set mk(t){od.le(t);const s=dd.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#t;this.#s.LM(s),i.aW().VB()}get mk(){return pd.get(this.#s.XH())}$z(){this.#s.qz()}Xz(){this.#s.Yz()}Kz(t){od.Ne(t,ad);const s=this.#t,i=s.aW().qV(t);if(!i)throw new Error("invalid layer");s.DB().Zz(i)}Qz(t,i){od.Ne(t,s),this.#s.tJ(cd.get(t),i)}get zIndex(){return this.#s.LB()}get sJ(){return this.#s.iJ()}set sJ(t){this.#s.eJ(!!t)}Tl(t,s){return od.te(t),od.te(s),this.#s.nJ(+t,+s)}PW(t){od.Ne(t,s);const i=this.#t,e=cd.get(t);return i.aW().AL().AW(i,e)}RW(){const t=this.#t,s=t.aW().AL().FW(t);return s?s.AB():null}getParent(){const t=this.#t.rJ();return t?t.AB():null}hJ(){const t=this.#t.oJ();return t?t.AB():null}*aJ(){for(const t of this.#t.aJ())yield t.AB()}lJ(){return this.#t.uJ()}cJ(t){const s=this.#t.fJ(t);return s?s.AB():null}*children(){for(const t of this.#t.children())yield t.AB()}*dJ(){for(const t of this.#t.dJ())yield t.AB()}pJ(t,i){od.Ne(t,s),od.ye(i),i||(i={});const e=this.#t,n=cd.get(t);e.mJ(n,i)}removeChild(t){od.Ne(t,s);const i=this.#t,e=cd.get(t);i.gJ(e)}yJ(){const t=this.#t;t.wJ()&&t.rJ().gJ(t)}SJ(){const t=this.#s;return{vJ:t.bJ(),MJ:t.xJ(),TJ:t.GJ(),_J:t.CJ(),IJ:t.PJ(),AJ:t.EJ(),RJ:t.FJ(),OJ:t.DJ(),kJ:t.LJ()}}NJ(t,s){od.re(t),od.re(s),this.#s.BJ(t,s)}WJ(){const t=this.#s;t.jJ(),t.Mz()}VJ(t,s,i){od.re(t),od.re(s),od.ge(i);const e=this.#s;e.HJ(t,s,i)&&e.Mz()}UJ(t,s){let i=NaN,e=NaN,n=NaN,r=NaN,h=NaN;const o=this.#s;if(o.zJ()){const a=o.JJ().Ux(t,s);null!==a&&(i=a.qM(),e=a.KM(),n=a.QM(),r=a.sx(),h=a.nx())}return{x:i,y:e,WH:n,$J:r,qJ:h}}XJ(){const t=this.#s;if(!t.zJ())return[0,0];const s=t.JJ();return[s.Fx(),s.Ox()]}}};0;const hd=self._s,od=self.Ls,ad=(self.uU,self.$V),ld=hd.Un(hd.Rect),ud=hd.Un(hd.Il),cd=new WeakMap,fd=hd.Cs(),dd=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),pd=new Map([...dd.entries()].map(t=>[t[1],t[0]])),md=hd.Un(hd.xo);self.YJ=rd(self.uU),self.KJ=rd(self.BU)}{self._s;const gd=self.Ls;self.ZJ=class extends self.YJ{#t;constructor(){super(),this.#t=self.uU.pU()}QJ(){return this.#t.s$().t$()}focus(){this.#t.s$().i$()}blur(){this.#t.s$().e$()}n$(t,s){gd.le(t),this.#t.s$().r$(t,s)}}}{let yd=function(t){let s=vd.get(t);return s||(s=wd.Un(wd.Event.wf),vd.set(t,s),s)};0;const wd=self._s,Sd=self.Ls,vd=new WeakMap,bd=wd.Cs();self.h$=class{#t;constructor(){const t=wd.mj.pj(bd);this.#t=t;const s={runtime:{value:t.aW().gj(),writable:!1},behavior:{value:t.a$().o$(),writable:!1},l$:{value:t.c$().u$(),writable:!1}};Object.defineProperties(this,s),t.aW().Oj(this,t)}static pU(){return wd.mj.mU()}get f$(){return this.#t.d$().AB()}gU(){const t=vd.get(this);t&&(t.zn(),vd.delete(this))}addEventListener(t,s,i){Sd.le(t),Sd.Ee(s),yd(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Sd.le(t),Sd.Ee(s),yd(this).removeEventListener(t,s,i)}dispatchEvent(t){yd(this).dispatchEvent(t)}}}{const Md=self._s,xd=(self.Ls,Md.Cs());self.p$=class{constructor(){const t=Md.mj.pj(xd),s={runtime:{value:t.aW().gj(),writable:!1},behavior:{value:t.a$().o$(),writable:!1},name:{value:t.Pc(),writable:!1}};Object.defineProperties(this,s)}}}{const Td=self._s,Gd=(self.Ls,Td.Cs());self.m$=class{#s;constructor(){const t=Td.mj.pj(Gd);this.#s=t;const s={runtime:{value:t.aW().gj(),writable:!1},id:{value:t.yj(),writable:!1}};Object.defineProperties(this,s),t.aW().Oj(this,t)}Jj(){return this.#s.iV().map(t=>t.AB())}static Dj(t){if(!t)return null;const s=Td.mj.g$(t);return s?s.o$():null}}}{const _d=self._s,Cd=self.Ls,Id=_d.Un(_d.xo);self.IV=class{#t;constructor(t,s){this.#t=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){return this.#t.CV()[this.index].Pc()}get isActive(){return this.#t.y$(this.index)}set isActive(t){t=!!t;const s=this.#t;s.y$(this.index)!==t&&(s.w$(this.index,t),s.S$(),s.aW().VB())}setParameter(t,s){Cd.re(t),t=Math.floor(+t);const i=this.#t,e=i.v$(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof _d.xo){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Id.Po(s[0],s[1],s[2]),s=Id}else if("number"!=typeof s)throw new TypeError("expected number");i.b$(this.index,t,s)&&i.y$(this.index)&&i.aW().VB()}getParameter(t){Cd.re(t),t=Math.floor(+t);const s=this.#t.v$(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof _d.xo?[s.Lo(),s.No(),s.Bo()]:s}}}self._s,self.Ls;self.M$=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t.Pc(),writable:!1}})}get speed(){return this.#t.x$()}get T$(){return this.#t.G$()}get _$(){return this.#t.C$()}get I$(){return this.#t.P$()}get A$(){return this.#t.E$()}get frameCount(){return this.#t.R$()}F$(){return this.#t.O$().map(t=>t.D$())}*frames(){for(const t of this.#t.O$())yield t.D$()}};self._s,self.Ls;self.hW=class{#s;constructor(t){this.#s=t}static rW(t){return t.#s}get width(){return this.#s.Vg()}get height(){return this.#s.Zg()}getSize(){const t=this.#s;return[t.Vg(),t.Zg()]}k$(t){return t.L$(this)}N$(){return this.#s.gE().il()}};{self._s;const Pd=self.Ls;self.B$=class extends self.hW{#s;constructor(t){super(t.W$()),this.#s=t,Object.defineProperties(this,{duration:{value:t.j$(),writable:!1},_z:{value:t.Cz(),writable:!1},Pz:{value:t.Az(),writable:!1}})}Fz(){const t=this.#s;return[t.Cz(),t.Az()]}V$(){return this.#s.H$()}U$(t){return this.z$(t)[0]}J$(t){return this.z$(t)[1]}z$(t){const s=this.#s;let i=null;if("number"==typeof t)i=s.$$(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.q$(t)}return i?[i.qM(),i.KM()]:this.Fz()}X$(){const t=this.#s.Y$();return t?t.pu():0}K$(t){return this.Z$(t)[0]}Q$(t){return this.Z$(t)[1]}Z$(t){Pd.re(t),t=Math.floor(t);const s=this.#s.Y$();if(!s||t<0||t>=s.pu())return[0,0];const i=s.du();return[i[2*t],i[2*t+1]]}get tag(){return this.#s.tq()}}}{let Ad=function(t){const s=Rd.get(t);if(s.sq())throw new Error("timeline/tween was released and is no longer valid");return s};0;self._s;const Ed=self.Ls,Rd=new WeakMap;self.iq=class{constructor(t){Rd.set(this,t),t.aW().Oj(this,t)}pause(){Ad(this).eq()}resume(){Ad(this).nq()}stop(){Ad(this).Bf()}RU(t){return Ad(this).rq(t)}set time(t){Ed.re(t),Ad(this).hq(t)}get time(){return Ad(this).qO()}set totalTime(t){Ed.re(t),Ad(this).oq(t)}get totalTime(){return Ad(this).aq()}set T$(t){Ad(this).lq(!!t)}get T$(){return Ad(this).uq()}set A$(t){Ad(this).cq(!!t)}get A$(){return Ad(this).fq()}set playbackRate(t){Ed.re(t),Ad(this).pq(t)}get playbackRate(){return Ad(this).mq()}get progress(){const t=Ad(this);return t.qO()/t.aq()}get tags(){return Ad(this).gq()}get finished(){return Ad(this).yq()}get wq(){return Ad(this).IsPlaying()}get Sq(){return Ad(this).vq()}get bq(){return Rd.get(this).sq()}}}{let Fd=function(t){const s=Od.get(t);if(s.sq())throw new Error("timeline was released and is no longer valid");return s};0;self._s,self.Ls;const Od=new WeakMap;self.Mq=class extends self.iq{constructor(t){super(t),Od.set(this,t);const s={name:{value:t.Pc(),writable:!1}};Object.defineProperties(this,s)}}}{let Dd=function(t){const s=Ld.get(t);if(s.sq())throw new Error("tween was released and is no longer valid");return s};0;self._s;const kd=self.Ls,Ld=new WeakMap,Nd=new WeakMap;let Bd=null;self.xq=class extends self.iq{constructor(t,s,i){super(t),Bd||(Bd=i.Tq),Ld.set(this,t),s&&Nd.set(this,s)}stop(){const t=Dd(this);Nd.get(this).Gq(t)}_q(t){kd.le(t);const s=self.Vu.oc(Bd(t));Dd(this).Cq(s)}get f$(){const t=Dd(this).Iq();return t?t.AB():null}get Pq(){return Dd(this).Aq()}set Pq(t){Dd(this).Eq(!!t)}get value(){const t=Dd(this);if("value"!==t.Rq())throw new Error("not a value tween");return t.Oq("value").Fq()}}}self._s,self.Ls;self.Dq=class extends self.dj{constructor(){super()}};{const Wd=self._s,jd=self.Ls,Vd=Wd.Cs();self.kq=class extends self.Dq{#t;#i;#s=0;#r=new Map;constructor(t){if(super(),this.#t=Wd.mj.pj(Vd),!t?.WU)throw new Error("no DOM component ID specified");this.#i=t.WU,this.Lq("elem-focused",t=>t.Nq()),this.Lq("elem-blurred",t=>{t&&t.Bq()})}Wq(t){const s=this.#s++;return this.#r.set(s,t),s}jq(t){this.#r.delete(t)}Lq(t,s){this.#t.aW().YU(this.#i,t,t=>{const i=this.#r.get(t.elementId);s(i,t)})}Vq(t){jd.Te(t);for(const[s,i]of t)this.Vq(s,i)}}}{const Hd=self._s,Ud=(self.Ls,Hd.Cs());self.Hq=class extends self.nV{#t;constructor(){super(),this.#t=Hd.mj.pj(Ud)}Uq(){}zq(){return this.#t.W$().Jq()}$q(t){}qq(t){}Xq(){}Yq(t){}}}{const zd=self._s,Jd=(self.Ls,zd.Cs());self.Kq=class extends self.KJ{#t;#n=null;#s=null;constructor(t){super(t),this.#t=zd.mj.pj(Jd)}gU(){if(super.gU(),this.#n){const t=this.#t.aW().wf();t.removeEventListener("renderercontextlost",this.#n),t.removeEventListener("renderercontextrestored",this.#s),this.#n=null,this.#s=null}}Zq(){if(this.#n)return;this.#n=()=>this.Qq(),this.#s=()=>this.tX();const t=this.#t.aW().wf();t.addEventListener("renderercontextlost",this.#n),t.addEventListener("renderercontextrestored",this.#s)}Qq(){}tX(){}sX(t){}iX(){return!0}iM(){return!1}}}{const $d=self._s,qd=(self.Ls,$d.Un($d.Rect)),Xd=new WeakMap,Yd=$d.Cs();self.eX=class extends self.Kq{#t=-1;#s=!0;#r=!1;#e=!1;#i=-.2;#h=$d.Un($d.Rect,0,0,-1,-1);#o=0;#a=0;#l=-1;#u=-1;#c=!1;constructor(t){if(!t?.WU)throw new Error("no DOM component ID specified");super(t);const s=$d.mj.pj(Yd);Xd.set(this,s),this.#t=this.Uj.Wq(this);const i=s.aW().GB();this.#o=i.nX(),this.#a=i.rX(),this.VU(!0)}gU(){super.gU(),this.Uj.jq(this.#t),this.hX("destroy"),this.#t=-1,Xd.delete(this)}oX(){if(Xd.get(this).aW().zL())throw new Error("not valid in worker mode");return this.aX("get-element")}hX(t,s){s||(s={}),s.elementId=this.#t,this.ZU(t,s)}aX(t,s){return s||(s={}),s.elementId=this.#t,this.tz(t,s)}lX(t,s){return s||(s={}),s.elementId=this.#t,this.QU(t,s)}uX(t){t||(t={});const s=Xd.get(this).DB();t.elementId=this.#t,t.isVisible=s.SH(),t.htmlIndex=s.kB().cX(),t.htmlZIndex=s.fX(),Object.assign(t,this.dX()),this.#s=!!t.isVisible,this.tz("create",t),this.pX(!0)}mX(t){t=!!t,this.#s!==t&&(this.#s=t,this.hX("set-visible",{isVisible:t}))}ez(){this.pX(!1)}gX(){const t=Xd.get(this).aW().GB().yX();return"Android"===$d.Ks.Zs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}pX(t){const s=Xd.get(this);if(s.wX())return;const i=s.DB(),e=i.kB(),n=i.Nz();let[r,h]=e.eU(n.Za(),n.Qa()),[o,a]=e.eU(n.tl(),n.sl());const l=s.aW().GB(),u=l.ej(),c=l.rj();if(!i.SH()||!e.SH())return void this.mX(!1);if(!this.gX()&&(o<=0||a<=0||r>=u||h>=c))return void this.mX(!1);qd.set(r,h,o,a);const f=l.nX(),d=l.rX(),p=e.cX(),m=i.fX();if(!t&&qd.equals(this.#h)&&this.#o===f&&this.#a===d&&this.#l===p&&this.#u===m)return void this.mX(!0);this.#h.m(qd),this.#o=f,this.#a=d,this.#l=p,this.#u=m,this.mX(!0);let g=null;this.#e&&(g=e.SX()+this.#i),this.hX("update-position",{left:Math.round(this.#h.Za()),top:Math.round(this.#h.Qa()),width:Math.round(this.#h.width()),height:Math.round(this.#h.height()),htmlIndex:p,htmlZIndex:m,fontSize:g})}vX(){this.aX("focus",{focus:!0})}bX(){this.aX("focus",{focus:!1})}Nq(){this.#r=!0}Bq(){this.#r=!1}MX(){return this.#r}xX(t,s){this.TX("set-css-style",{prop:$d.vo(t),val:s})}GX(t,s){this.TX("set-attribute",{name:t,val:s})}_X(t){this.TX("remove-attribute",{name:t})}CX(){this.#c||(this.#c=!0,Promise.resolve().then(()=>{this.#c=!1,this.hX("update-state",this.dX())}))}dX(){}IX(){return this.#t}}}self._s,self.Ls;self.PX=class extends self.m${constructor(){super()}};self._s,self.Ls;self.AX=class extends globalThis.p${constructor(){super()}Uq(){}};{const Kd=self._s,Zd=(self.Ls,new WeakMap),Qd=Kd.Cs();self.EX=class extends self.h${#e=!1;#s=!1;#t=!1;constructor(){super(),Zd.set(this,Kd.mj.pj(Qd))}gU(){super.gU(),this.VU(!1),this.HU(!1),this.RX(!1),Zd.delete(this)}UU(){return Kd.mj.zU()}FX(){}JU(t){const s=Zd.get(this);s.aW().$U(t,s.d$(),s.c$())}qU(t){const s=Zd.get(this);return s.aW().KB(t,s.d$(),s.c$())}VU(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=Zd.get(this).aW();t?s.OX(this):s.DX(this)}rz(){return this.#e}ez(){}HU(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=Zd.get(this).aW();t?s.kX(this):s.LX(this)}oz(){return this.#s}hz(){}RX(t){if(t=!!t,this.#t===t)return;this.#t=t;const s=Zd.get(this).aW();t?s.NX(this):s.BX(this)}WX(){return this.#t}jX(){}az(){return[]}lz(){return null}uz(t){}}}{self._s;const tp=self.Ls;let sp=null;self.iN=class{constructor(t){sp=t}$B(t){sp.qB(t)}yz(t,s,i){tp.le(t),tp.le(s),tp.Ge(i),sp.VX(t,s,i)}Sz(t,s,i){return tp.le(t),tp.le(s),tp.Ge(i),sp.HX(t,s,i)}UX(t){return tp.ue(t),new self.zX(sp,t)}set JX(t){sp.$X(!!t)}get JX(){return sp.qX()}XX(t){sp.YX(!!t)}KX(t){tp.te(t);const s=sp.ZX(t);return s?s.Bj():null}}}self._s,self.Ls;self.zX=class{#t;#s;#h;#i;#r;#n;constructor(t,s){this.#t=t;const i=t.oN(),e=t.dN();this.#s=e,this.#h=e.QX();const n=t.vN();this.#i=n.tY(),this.#r=n.sY(e);const r=i.iY().sY();this.#n=r,s&&r.eY(s),t.nY(!1)}rY(){const t=this.#t.oN(),s=this.#h,i=this.#n;t.hY(s),this.#s.oY(this.#i,this.#r),t.aY(s),i.lY(i.ML()+1)}get uY(){return this.#n.cY()}release(){const t=this.#t,s=t.vN(),i=t.oN().iY();t.nY(!0),i.fY(),s.fY()}};{let ip=function(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas};0;const ep=self._s,np=self.Ls;let rp=null,hp=null;const op=["none","back","front"],ap=["cw","ccw"];self.dY=class{constructor(t,s){hp=t,rp=s}pY(){rp.CF()}mY(t){rp.GF(t)}gY(){rp.mv()}yY(){rp.lv()}wY(){rp.Mv()}setColor(t){rp.SF(t[0],t[1],t[2],t[3])}SY(t,s,i,e){rp.SF(t,s,i,e)}vY(){rp.bF()}bY(t){rp.vF(t)}MY(t){rp.Hv(t)}xY(){return rp.Uv()}TY(t){const s=op.indexOf(t);if(-1===s)throw new Error("invalid cull mode");rp.Pb(s)}GY(){return op[rp.PF()]}_Y(t){const s=ap.indexOf(t);if(-1===s)throw new Error("invalid front face winding");rp.Ab(s)}CY(){return rp.AF()}rect(t){rp.RF(t.left,t.top,t.right,t.bottom)}IY(t,s,i,e){rp.RF(t,s,i,e)}PY(t){rp.Il(ep.Il.$l(t))}AY(t,s,i,e,n,r,h,o){rp.Rb(t,s,i,e,n,r,h,o)}EY(t,s){rp.tb(ep.Il.$l(t),ep.Rect.el(s))}RY(t,s){rp.DF(ep.Il.$l(t),ep.Il.$l(s))}FY(t,s,i){rp.kF(ep.Il.$l(t),ep.Il.$l(s),i)}OY(t,s,i,e,n,r,h,o,a,l,u,c,f){rp.LF(t,s,i,e,n,r,h,o,a,l,u,c,ep.Rect.el(f))}DY(t,s,i,e,n,r,h,o,a,l,u,c,f){rp.Xv(t,s,i,e,n,r,h,o,a,l,u,c,ep.Il.$l(f))}kY(t,s,i,e,n,r,h,o,a,l,u,c,f,d){rp.NF(t,s,i,e,n,r,h,o,a,l,u,c,ep.Il.$l(f),d)}LY(t,s,i,e){rp.Zx(t,s,i,e)}NY(t){rp.Eb(t)}line(t,s,i,e){rp.ey(t,s,i,e)}BY(t,s,i,e,n,r){rp.Yv(t,s,i,e,n,r)}WY(t,s,i,e){rp.sb(t,s,i,e)}jY(t){rp.rb(ep.Rect.el(t))}VY(t){rp.hb(ep.Il.$l(t))}HY(t){rp.fb(t)}UY(){rp.pb()}zY(t){rp.wb(t)}JY(){rp.xb()}$Y(t){np.Be(t,self.qY);const s=t?hp.qV(t):null;rp.xF(s)}XY(t,s){const i=self.hW.rW(t);if(!i)throw new Error("invalid IImageInfo");return i.YY(rp,{oT:s?.oT??"clamp-to-edge",aT:s?.aT??"clamp-to-edge",lT:s?.lT??"trilinear",fT:s?.fT??!0})}KY(t){const s=self.hW.rW(t);if(!s)throw new Error("invalid IImageInfo");s.oA()}L$(t){const s=self.hW.rW(t);if(!s)throw new Error("invalid IImageInfo");const i=s.xG();return self.qY.ZY(hp,i)}QY(t,s){if(!ip(t))throw new TypeError("invalid texture data");const i=rp.aO(t,{oT:s?.oT??"clamp-to-edge",aT:s?.aT??"clamp-to-edge",lT:s?.lT??"trilinear",fT:s?.fT??!0});return self.qY.ZY(hp,i)}tK(t,s,i){np.re(t),np.re(s);const e=rp.dG(t,s,{oT:i?.oT??"clamp-to-edge",aT:i?.aT??"clamp-to-edge",lT:i?.lT??"trilinear",fT:i?.fT??!0});return self.qY.ZY(hp,e)}sK(t,s,i){np.Ne(s,self.qY);const e=hp.qV(s);rp.mE(t,e,{pT:i?.pT??!0})}deleteTexture(t){np.Ne(t,self.qY);const s=hp.qV(t);rp.yG(s)}iK(){const t=rp.Jb();return new self.eK(hp,t)}nK(){hp.GB().rK(rp)}hK(t){np.Ne(t,globalThis.$V),hp.qV(t).oK(rp)}}}{self._s,self.Ls;const lp=new WeakMap,up=new WeakMap;self.qY=class{constructor(t,s){lp.set(this,{runtime:t,texture:s}),up.set(s,this),t.Oj(this,s),Object.defineProperties(this,{width:{value:s.Vg(),writable:!1},height:{value:s.Zg(),writable:!1}})}static ZY(t,s){if(!s)return null;return up.get(s)||new self.qY(t,s)}}}{let cp=function(t){return dp.get(t).aK};0;self._s;const fp=self.Ls,dp=new WeakMap;self.eK=class{constructor(t,s){dp.set(this,{runtime:t,aK:s}),t.Oj(this,s)}release(){cp(this).zn()}set lK(t){fp.le(t),cp(this).mA(t)}get lK(){return cp(this).wP()}set uK(t){fp.re(t),cp(this).gA(t)}get uK(){return cp(this).yA()}set lineHeight(t){fp.re(t),cp(this).SA(t)}get lineHeight(){return cp(this).vA()}set cK(t){cp(this).bA(t)}get cK(){return cp(this).MA()}set fK(t){cp(this).xA(t)}get fK(){return cp(this).TA()}setColor(t){fp.Te(t),this.dK(t[0],t[1],t[2])}dK(t,s,i){cp(this).PA(t,s,i)}pK(t){fp.le(t),cp(this).NM(t)}set mK(t){cp(this).AA(t)}get mK(){return cp(this).EA()}set verticalAlign(t){cp(this).RA(t)}get verticalAlign(){return cp(this).FA()}set gK(t){cp(this).OA(t)}get gK(){return cp(this).DA()}set yK(t){cp(this).kA(t)}get yK(){return cp(this).LA()}set text(t){fp.le(t),cp(this).Vc(t)}get text(){return cp(this).NA()}PV(t,s,i){fp.re(t),fp.re(s),fp.re(i),cp(this).BA(t,s,i)}k$(){const{runtime:t,aK:s}=dp.get(this),i=s.xG();return self.qY.ZY(t,i)}N$(){return cp(this).gE().il()}wK(t){fp.Ee(t),cp(this).lA=t}SK(){cp(this).oA()}get vK(){return cp(this).jA()}get bK(){return cp(this).HA()}}}{let pp=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return wp.get(i)||""},mp=function(t){return new Promise((s,i)=>{const e=document.createElement("script");e.onload=s,e.onerror=i,e.async=!1,e.type="module",e.src=t,document.head.appendChild(e)})};0;const gp=self._s,yp=new Set(["local","remote"]),wp=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);gp.MK=class extends gp.Vn{constructor(t,s){super();const i=s.exportType;this.Nc=t,this.xK="folders",this.TK=new Map,this.GK="cordova"===i,this._K=!!s.isiOSCordova,this.CK=!!s.isFileProtocol,this.IK=s.swClientId,this.PK=s.supportedAudioFormats||{},this.AK=new Map,this.EK=!1,this.RK=s.scriptFolder,this.FK="",this.DK="",this.kK="",this.LK=s.fileMap||new Map,this.NK=new Map;const e="html5"===i||"scirra-arcade"===i||"instant-games"===i;this.BK=e?"remote":"local",this.WK=new Map,this.jK=[],this.VK=[],this.HK=!1,this.UK=0,this.zK=0,this.JK=0,this.$K=!1,this.qK=gp.Un(gp.Qd,()=>this.XK(),50),this.YK=gp.Un(gp.Ud,Math.max(gp.hardwareConcurrency,8)),this.KK=gp.Un(gp.Ud,20),this.ZK=new self.iW(this)}zn(){for(const t of this.WK.values())t.zn();this.WK.clear(),gp.Sh(this.VK),this.Nc=null}aW(){return this.Nc}QK(t){this.xK=t}gW(){return this.xK}tZ(){return this.RK}sZ(t){this.FK=t}SW(){return this.FK}iZ(t){this.DK=t}eZ(){return this.DK}nZ(t){this.kK=t}rZ(){return this.kK}hZ(){return this.CK}eo(t,s){return s=s||this.BK,gp.Kh(t)?("flat"===this.xK&&(t=t.toLowerCase()),this.GK&&this.CK?this.oZ(t):"playable-ad-single-file"===this.Nc.JW()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===s?this.YK.Bu(()=>gp.eo(t)):this.KK.Bu(()=>gp.eo(t))):gp.eo(t)}no(t){return gp.Kh(t)?("flat"===this.xK&&(t=t.toLowerCase()),this.GK&&this.CK?this.aZ(t):"playable-ad-single-file"===this.Nc.JW()?gp.ho(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.BK?this.YK.Bu(()=>gp.no(t)):this.KK.Bu(()=>gp.no(t))):gp.no(t)}so(t){return gp.Kh(t)?("flat"===this.xK&&(t=t.toLowerCase()),this.GK&&this.CK?this.lZ(t):"playable-ad-single-file"===this.Nc.JW()?gp.oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.BK?this.YK.Bu(()=>gp.so(t)):this.KK.Bu(()=>gp.so(t))):gp.so(t)}async io(t){const s=await this.so(t);return JSON.parse(s)}uZ(t,s){return"flat"===this.xK&&(t=t.toLowerCase()),this.Nc.UB("runtime","cordova-fetch-local-file",{filename:t,as:s})}lZ(t){return this.uZ(t,"text")}async oZ(t){const s=await this.uZ(t,"buffer"),i=pp(t);return new Blob([s],{type:i})}async cZ(t){"flat"===this.xK&&(t=t.toLowerCase());let s=this.TK.get(t);if(s)return s;const i=await this.oZ(t);return s=URL.createObjectURL(i),this.TK.set(t,s),s}aZ(t){return this.uZ(t,"buffer")}yW(t){"flat"===this.xK&&(t=t.toLowerCase());let s=this.FK+t;return"Gecko"===gp.Ks.ei&&"preview"===this.Nc.JW()&&(s=this.fZ(s)),s}pW(t){return gp.Yh(t)?Promise.resolve(t):this.GK&&this.CK?this.cZ(t):"playable-ad-single-file"===this.Nc.JW()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.xK&&(t=t.toLowerCase()),Promise.resolve(t))}dZ(t){if(gp.Yh(t)||"preview"!==this.Nc.JW()||!this.IK||!t)return t;try{const s=new URL(t,location.href);return s.searchParams.set("__c3_client_id",this.IK),s.toString()}catch(s){return console.warn("Invalid iframe URL: "+t),t}}pZ(t){return this.pW(t)}mZ(t,s){return(s?"true":"false")+"|"+t}gZ(t){const s=!!t.yZ;if(t.wZ&&!yp.has(t.wZ))throw new Error("invalid load policy");const i=this.mZ(t.url,s);let e=this.WK.get(i);return e||(e=gp.Un(gp.SZ,this,{url:t.url,size:t.size||0,wZ:t.wZ||this.BK,yZ:s}),this.WK.set(i,e),this.HK||(this.UK+=e.Fu(),this.VK.push(e.vZ().then(()=>this.bZ(e.Fu())))),e)}MZ(t){const s=this.mZ(t.xZ(),t.TZ());this.WK.delete(s)}async GZ(){try{await Promise.all(this.VK),this.JK=1}catch(t){console.error("Error loading: ",t),this.$K=!0,this.XK()}}_Z(){this.HK=!0}CZ(){return this.$K}bZ(t){this.zK+=t,this.qK.pp()}XK(){const t=gp.Un(gp.Event,"loadingprogress");this.JK=gp.Yn(this.zK/this.UK,0,1),t.progress=this.JK,this.Nc.wf().dispatchEvent(t),this.Nc.IZ(gp.Un(gp.Event,"loadingprogress"))}hB(){return this.JK}aB(){return this.Nc.AZ().PZ()}EZ(t){gp.Th(this.jK,t),this.jK.length&&this.VK.push(this.RZ())}async RZ(){const t=[],s=[];for(const[i,e,n]of this.jK)this.UK+=n,t.push(this.FZ(i,e,s).then(()=>this.bZ(n)));await Promise.all(t),this.Nc.zL()&&s.length>0&&await this.Nc.UB("runtime","load-webfonts",{webfonts:s})}async FZ(t,s,i){try{let e=await this.pW(s);"Gecko"===gp.Ks.ei&&(t=`'${t}'`),("Gecko"===gp.Ks.ei&&"preview"===this.Nc.JW()||"playable-ad-single-file"===this.Nc.JW())&&(e=this.fZ(e));const n=new FontFace(t,`url('${e}')`);this.Nc.zL()?self.fonts.add(n):document.fonts.add(n),await n.load(),this.Nc.zL()&&i.push({name:t,url:e})}catch(s){console.warn(`[C3 runtime] Failed to load web font '${t}': `,s)}}OZ(t){return!!this.PK[t]}DZ(t,s){this.EK=!!s;for(const[s,i,e]of t)this.AK.set(s,{fileName:s,kZ:i.map(t=>({type:t[0],LZ:t[1],fullName:s+t[1],fileSize:t[2]})),NZ:e})}BZ(t){"flat"===this.xK&&(t=t.toLowerCase());const s=this.AK.get(t);if(!s)return null;let i=null;for(const t of s.kZ)if(i||"audio/webm; codecs=opus"!==t.type||(i=t),this.OZ(t.type))return t;return i}WZ(t){const s=this.BZ(t);return s?{url:this.yW(s.fullName),type:s.type}:null}jZ(){if(this.EK){const t=[];for(const s of this.AK.values()){if(s.NZ)continue;const i=this.BZ(s.fileName);i&&t.push({VZ:s.fileName,url:this.yW(i.fullName),type:i.type,fileSize:i.fileSize})}return t}return[]}HZ(t){return"preview"===this.Nc.JW()&&(t=new URL(t,location.href).toString()),this.LK.get(t)||null}fZ(t){let s=this.NK.get(t);if(s)return s;const i=this.HZ(t);return i?(s=URL.createObjectURL(i),this.NK.set(t,s),s):t}_L(){return this.ZK}async MW(...t){const s=await Promise.all(t.map(t=>this.pW(t)));if(this.Nc.zL())if(1===t.length){const s=t[0];await import((gp.Kh(s)?"./":"")+s)}else{const s=t.map(t=>`import "${gp.Kh(t)?"./":""}${t}";`).join("\n"),i=URL.createObjectURL(new Blob([s],{type:"application/javascript"}));await import(i)}else await Promise.all(s.map(t=>mp(t)))}async TW(t){if(WebAssembly.compileStreaming){const s=await this.pW(t);return await WebAssembly.compileStreaming(fetch(s))}{const s=await gp.no(t);return await WebAssembly.compile(s)}}async _W(t){const s=await this.pW(t);return await this.Nc.UB("runtime","add-stylesheet",{url:s})}}}{const Sp=self._s;Sp.UZ=class extends Sp.Vn{constructor(t,s){super(),this.zZ=t,this.Nc=t.aW(),this.JZ=s.url||"",this.$Z=s.size,this.qZ=s.wZ,this.XZ=s.blob||null,this.YZ=!!this.XZ,this.Sw=null}zn(){this.Sw=null,this.zZ=null,this.Nc=null,this.XZ=null}xZ(){return this.JZ}Fu(){return this.$Z}vZ(){return"local"===this.qZ||this.XZ?(this.YZ=!0,Promise.resolve()):(this.Sw||(this.Sw=this.zZ.eo(this.JZ,this.qZ).then(t=>(this.YZ=!0,this.Sw=null,this.XZ=t,t)).catch(t=>{console.error("Error loading resource: ",t),this.Sw=null})),this.Sw)}KZ(){return this.YZ}ZZ(){return this.XZ?Promise.resolve(this.XZ):this.Sw?this.Sw:this.zZ.eo(this.JZ,this.qZ)}}}{const vp=self._s,bp=new vp.Ud,Mp=new Set;vp.SZ=class extends vp.UZ{constructor(t,s){super(t,s),this.QZ=null,this.tQ=null,this.Up=0,this.sQ=-1,this.iQ=-1,this.eQ=!!s.yZ,Mp.add(this)}zn(){if(0!==this.Up)throw new Error("released image asset which still has texture references");this.zZ.MZ(this),this.QZ=null,Mp.delete(this),super.zn()}static nQ(){for(const t of Mp)t.QZ=null,t.tQ=null,t.Up=0}YY(t,s){return s=s||{},this.Up++,this.tQ?Promise.resolve(this.tQ):(this.QZ||(s.uT=this.Nc.GB().rQ(),this.QZ=this.hQ(t,s)),this.QZ)}async hQ(t,s){try{const i=await this.ZZ();return 0===this.Up?(this.QZ=null,null):await bp.Bu(async()=>{const e=await t.lO(i,s);return this.QZ=null,0===this.Up?(t.yG(e),null):(this.tQ=e,this.sQ=e.Vg(),this.iQ=e.Zg(),this.tQ)})}catch(t){throw console.error("Failed to load texture: ",t),t}}oA(){if(this.Up<=0)throw new Error("texture released too many times");this.Up--,0===this.Up&&this.tQ&&(this.tQ.mM().yG(this.tQ),this.tQ=null)}oQ(){return this.Up}xG(){return this.tQ}Vg(){return this.sQ}Zg(){return this.iQ}TZ(){return this.eQ}async aQ(){const t=await this.ZZ();return vp.Ai.ImageBitmap?await createImageBitmap(t):await vp.lo(t)}}}{let xp=function(t,s){return t.DB().lQ()-s.DB().lQ()};0;const Tp=self._s;self.assert;Tp.uQ=class extends Tp.Vn{constructor(t,s,i){super(),this.cQ=t,this.Pa=s,this.Aa=i,this.fQ=[],this.dQ=!0,this.pQ=new Set,this.mQ=!1}zn(){Tp.Sh(this.fQ),this.pQ.clear(),this.cQ=null}Bf(){Tp.Sh(this.fQ),this.dQ=!0,this.pQ.clear(),this.mQ=!1}gQ(){this.dQ=!1}Au(){return!this.fQ.length||!(this.fQ.length>this.pQ.size)&&(this.yQ(),!0)}wQ(t){if(this.pQ.has(t))return this.pQ.delete(t),void(0===this.pQ.size&&(this.mQ=!1));this.fQ.push(t),this.dQ=1===this.fQ.length}Kf(t){this.pQ.add(t),this.mQ=!0,this.pQ.size>=50&&this.yQ()}yQ(){this.mQ&&(this.fQ.length!==this.pQ.size?(Tp.Ph(this.fQ,this.pQ),this.pQ.clear(),this.mQ=!1):this.Bf())}SQ(){this.dQ||(this.fQ.sort(xp),this.dQ=!0)}vQ(t){this.yQ(),this.SQ(),this.fQ.length&&t.push(this.fQ)}}}{const Gp=self._s;Gp.bQ=class extends Gp.Vn{constructor(t,s){super(),this.MQ=t,this.xQ=s,this.TQ=Gp.Un(Gp.Cu)}zn(){this.TQ.zn(),this.TQ=null}GQ(t,s,i){let e=this.TQ.zs(t,s);return e||(i?(e=Gp.Un(Gp.uQ,this,t,s),this.TQ.Set(t,s,e),e):null)}_Q(t){return Math.floor(t/this.MQ)}CQ(t){return Math.floor(t/this.xQ)}IQ(t,s,i){if(s)for(let e=s.Za(),n=s.tl();e<=n;++e)for(let n=s.Qa(),r=s.sl();n<=r;++n){if(i&&i.Tl(e,n))continue;const s=this.GQ(e,n,!1);s&&(s.Kf(t),s.Au()&&this.TQ.Eu(e,n))}if(i)for(let e=i.Za(),n=i.tl();e<=n;++e)for(let n=i.Qa(),r=i.sl();n<=r;++n)s&&s.Tl(e,n)||this.GQ(e,n,!0).wQ(t)}PQ(t,s){let i=this._Q(t.Za());const e=this.CQ(t.Qa()),n=this._Q(t.tl()),r=this.CQ(t.sl());for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.GQ(i,t,!1);e&&e.vQ(s)}}AQ(t){let s=t.Za();const i=t.Qa(),e=t.tl(),n=t.sl();for(;s<=e;++s)for(let t=i;t<=n;++t){const i=this.GQ(s,t,!1);i&&i.gQ()}}}}{let _p=function(t,s){return t.DB().lQ()-s.DB().lQ()},Cp=function(t,s){return t.DB().QM()-s.DB().QM()};0;const Ip=self._s,Pp=(self.assert,new Ip.Rect),Ap=new Ip.Il,Ep=[],Rp=(new Ip.Rect,new Ip.Rect,self.hs),Fp=Rp.ys,Op=Rp.ws,Dp=Rp.fs,kp=Dp.create(),Lp=Fp.create(),Np=Op.create(),Bp=Fp.create(),Wp=Fp.create(),jp=Fp.create(),Vp=Ip.Un(Ip.Ia),Hp=(Ip.Un(Ip.Rect),[]),Up=[],zp=[],Jp={name:"",EQ:-1,RQ:!1,isVisible:!0,vH:!0,xH:!1,backgroundColor:[1,1,1,1],HH:!0,FQ:[1,1],opacity:1,JH:!1,OQ:!1,DQ:!1,kQ:!1,AH:1,mk:0,WH:0,LQ:[],NQ:[],BQ:[]},$p=new Map,qp=t=>{if(!t.f$.cU().WQ())return;const s=t.f$.TU();$p.has(s)&&($p.delete(s),$p.size||t.f$.aW().wf().removeEventListener("instancedestroy",qp))};Ip.jQ=class extends Ip.Vn{constructor(t,s,i){super(),i=Object.assign({},Jp,i),this.VQ=t,this.Nc=t.aW(),this.HQ=s,this.qn=i.name,this.Aw=-1,this.UQ=!!i.xH,this.zQ=-1,this.JQ=i.EQ,this.$Q=!!i.RQ,this.qQ=!!i.isVisible,this.XQ=!!i.vH,this.YQ=Ip.Un(Ip.xo),this.YQ.wa(i.backgroundColor),this.KQ=!!i.HH,this.ZQ=i.FQ[0],this.QQ=i.FQ[1],this.RM=Ip.Un(Ip.xo,1,1,1,i.opacity),this.t0=Ip.Un(Ip.xo),this.s0=!!i.JH,this.i0=!!i.OQ,this.e0=!!i.DQ,this.n0=!!i.kQ,this.r0=i.AH,this.EM=i.mk,this.h0=null,this.o0=1,this.FM=i.WH,this.a0=0,this.l0=0,this.u0=0,this.c0=!1,this.sR=Ip.Un(Ip.Rect),this.f0=Ip.Un(Ip.Rect),this.d0=Ip.Un(Ip.Rect),this.p0=!0,this.oG=Dp.create(),this.m0=!0,this.ZD=Dp.create(),this.g0=!0,this.y0=Ip.Un(Ip.Lw.jw),this.w0=!0,this.S0=[],this.v0=i.LQ,this.b0=[],this.M0=[],this.x0=new Map,this.fQ=[],this.T0=!1,this.G0=!1,this._0=!1;const e=this.Nc.GB();this.C0=Ip.Un(Ip.I0,this,i.NQ),this.wL=Ip.Un(Ip.Lw.oD,e.P0(),{YO:(t,s)=>{const i=s.uL(),n=i.rO();t.NM(i.A0()),t.dO(n),t.pO(n),e.E0(n)},ZO:t=>this._V().R0(t)}),this.F0=!0,this.O0=!0,this.D0=null,this.k0=[],this.L0=!1,this.N0=Ip.Un(Ip.Rect,0,0,-1,-1),this.B0=Ip.Un(Ip.Rect,0,0,-1,-1),this.W0=new self.$V(this),this.j0=Ip.Un(Ip.Event.wf),this.V0(),this.H0()&&(this.D0=Ip.Un(Ip.bQ,this.Nc.$L(),this.Nc.XL())),this.U0=i.BQ.map(t=>Ip.jQ.z0(this.VQ,this,t))}J0(){for(const t of this.v0){const s=this.Nc.$0(t[1]);this.VQ.q0(s),s.X0()||(s.Y0(t),s.K0(this.Aw)),this.b0.push(t),this.x0.set(t[2],t)}Ip.Th(this.S0,this.b0),this.v0=null}static z0(t,s,i){return Ip.Un(Ip.jQ,t,s,{name:i[0],EQ:i[2],isVisible:i[3],vH:i[13],xH:i[19],backgroundColor:i[4].map(t=>t/255),HH:i[5],FQ:[i[6],i[7]],opacity:i[8],JH:i[9],OQ:i[17],DQ:i[18],kQ:i[10],AH:i[11],mk:i[12],WH:i[16],LQ:i[14],NQ:i[15],BQ:i[20]})}zn(){for(const t of this.U0)t.zn();Ip.Sh(this.U0);for(const t of this.fQ)this.Nc.yU(t);Ip.Sh(this.fQ),this.C0.zn(),this.C0=null,this.wL.zn(),this.wL=null,this.W0=null,this.HQ=null,this.VQ=null,this.Nc=null}Jn(){return!this.VQ}Z0(t){return this.x0.get(t)}Q0(t){const s=this.VQ.t1(),i=this.b0;let e=0;for(let n=0,r=i.length;n<r;++n){const r=i[n],h=this.Nc.$0(r[1]);let o=!0;if(!h.s1()||s)if(h.WQ()&&$p.has(r[2]))o=!1;else{const s=this.Nc.i1(r,this,!0);t.push(s),h.WQ()&&($p.size||this.Nc.wf().addEventListener("instancedestroy",qp),$p.set(s.TU(),s),o=!1,this.M0.push(s.TU()))}o&&(i[e]=i[n],++e)}Ip.wh(i,e),this.Nc.pV(),this.jB()}e1(t,s){if(!t.zj().bj())throw new Error("instance is not of world type");const i=t.DB();if(i.kB()!==this)throw new Error("instance added to wrong layer");this.fQ.push(t),0!==i.QM()&&(this._0=!0),s&&this.H0()&&t.DB().Mz(),this.jB(t)}n1(t){this.fQ.includes(t)||(this.fQ.push(t),0!==t.DB().QM()&&(this._0=!0),this.jB(t))}h1(t,s){const i=t.DB();if(i.kB()!==this)throw new Error("instance added to wrong layer");this.fQ.unshift(t),0!==i.QM()&&(this._0=!0),this.jB(t),s&&this.H0()&&t.DB().Mz()}o1(t,s){const i=this.fQ.indexOf(t);i<0||(s&&this.H0()&&t.DB().a1(),this.fQ.splice(i,1),this.jB(t),this.l1())}u1(){this._0=!0}l1(){0===this.fQ.length&&(this._0=!1)}c1(t){if(t){const t=new Set;for(const s of this.fQ){const i=s.DB().lQ();i>=0&&t.add(i)}let s=-1;for(const i of this.fQ){const e=i.DB();if(!(e.lQ()>=0)){for(++s;t.has(s);)++s;e.f1(s)}}}this.fQ.sort(_p)}d1(){}m1(){for(const t of this.fQ)t.cU().WQ()||this.Nc.yU(t);this.Nc.pV(),Ip.Sh(this.fQ),this._0=!1,this.jB()}g1(t,s,i,e,n,r){const h=this.Nc.oN(),o=this.Nc.w1(),a=t.S1(),l=[];for(const u of this.b0){const c=u[0],f=c[0],d=c[1];if(!s.Tl(f,d))continue;const p=o[u[1]];if(p!==t){if(!a)continue;if(!t.TV(p))continue}let m=n;if(!m){const t=this.Nc.RB();this.pB()===t?m=this:(m=t.v1(this.Pc()),m||(m=t.NB(this.ML())))}const g=this.Nc.i1(u,m,!1,void 0,void 0,!1,r,void 0,r);r&&m.lV(g);const y=g.DB();y.Gz(i,e),y.Mz(),h.uV(!0),g.cV(),h.uV(!1),l.push(g)}return l}hV(){return this.fQ.length}pB(){return this.VQ}Pc(){return this.qn}b1(t){this.Aw=t}ML(){return this.Aw}M1(t){this.zQ=t}cX(){return this.zQ}TH(){return this.UQ}GH(t){t=!!t,this.UQ!==t&&(this.UQ=t,this.VQ.T1(),this.Nc.VB())}G1(){let t=-1;const s=this.uH();return t=s?s.dH().indexOf(this):this.pB()._1().indexOf(this),t}C1(){return this.JQ}aW(){return this.Nc}I1(){return this.$Q}P1(){for(const t of this.cH())if(t.I1())return!0;return!1}uj(){return this.Nc.uj()}_V(){return this.C0}bL(){return this.A1(),this.wL}A1(){const t=this.E1();if(!this.F0&&t===this.O0&&!this.wL.QD())return;const s=this._V().R1();this.wL.tk(s.map(t=>t.z_()),{tD:s.map(t=>t.ML()),sD:!t,hD:!0}),this.F0=!1,this.O0=t}S$(){this._V().S$(),this.F0=!0}H0(){return this.n0&&!this.e0}F1(){return this.D0}O1(){this.L0=!1}SH(){for(const t of this.D1())if(!t.gH())return!1;return!0}gH(){return this.qQ}yH(t){t=!!t,this.qQ!==t&&(this.qQ=t,this.Nc.VB())}MH(t){this.XQ=!!t}bH(){return this.XQ}CH(){for(const t of this.D1())if(!t.bH())return!1;return!0}KH(t){if(t=!!t,this.c0!==t){if(this.c0=t,t){const t=this.pB();this.l0=t.DV(),this.u0=t.LV()}this.L1(),this.Nc.VB()}}N1(){return this.c0}OV(t){const s=this.pB(),i=s.B1(),e=s.W1();t>e&&(t=e),t<i&&(t=i),this.l0!==t&&(this.l0=t,this.N1()&&(this.L1(),this.Nc.VB()))}kV(t){const s=this.pB(),i=s.j1(),e=s.V1();t>e&&(t=e),t<i&&(t=i),this.u0!==t&&(this.u0=t,this.N1()&&(this.L1(),this.Nc.VB()))}DV(){return this.N1()?this.l0:this.pB().DV()}LV(){return this.N1()?this.u0:this.pB().LV()}QH(){return this.H1(),this.sR}U1(){return this.H1(),this.f0}z1(){return this.H1(),this.d0}J1(){return this.pB().rH()}WS(t){return this.Nc.WS(t)}q1(t,s){const i=this.U1();if(0===t)s.m(i);else{let e=i.hl(),n=i.ol();const r=this.X1(t),h=i.width()/r,o=i.height()/r,[a,l]=this.J1();if(.5!==a||.5!==l){const s=this.Y1(),i=this.Nc,r=this.WS()/s;let h=(a-.5)*i.K1()/r,o=(l-.5)*i.Z1()/r;const u=this.FV();0!==u&&(Vp.set(h,o),Vp.rotate(u),h=Vp.Fa(),o=Vp.Da());const c=Ip.pr(s,0,t);e+=Ip._t(h,0,c),n+=Ip._t(o,0,c)}s.set(e-h/2,n-o/2,e+h/2,n+o/2)}}wF(){return this.RM.Wo()}vF(t){t=Ip.Yn(t,0,1),this.RM.Wo()!==t&&(this.RM.Do(t),this.V0(),this.Nc.VB())}V0(){this.t0.m(this.RM),this.t0.Ko()}A0(){return this.t0}E1(){return this.RM.$o(1,1,1,1)}RH(){return this.r0}EH(t){this.r0!==t&&(this.r0=t,this.L1(),this.Nc.VB())}kH(){return this.ZQ}BH(){return this.QQ}Q1(t,s){this.ZQ===t&&this.QQ===s||(this.ZQ=t,this.QQ=s,this.L1(),this.Nc.VB())}DH(t){this.Q1(t,this.BH())}NH(t){this.Q1(this.kH(),t)}tx(t){this.FM!==t&&(this.FM=t,this.Nc.VB())}QM(){return this.FM}RV(t){t=Ip.Kn(t),this.a0!==t&&(this.a0=t,this.L1(),this.Nc.VB())}FV(){return Ip.Kn(this.VQ.FV()+this.a0)}FH(){return this.a0}t2(){return this.fQ.length>0}BB(){return this.fQ}s2(){return this.i2()&&this.e0?(Ip.Th(zp,this.BB()),zp.sort((t,s)=>this.e2(t,s)),zp):this.BB()}n2(t){Ip.Rn(t,this.s2());for(const s of this.U0)s.SH()&&s.wF()>0&&s.n2(t)}e2(t,s){const i=this.pB().h2(),e=i[0],n=i[1],r=i[2],h=t.DB(),o=s.DB(),a=h.qM()-e,l=h.KM()-n,u=h.QM()-r,c=o.qM()-e,f=o.KM()-n,d=o.QM()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}YH(){return this.YQ}zH(){return this.KQ}UH(t){t=!!t,this.KQ!==t&&(this.KQ=t,this.Nc.VB())}qH(){return this.s0}$H(t){t=!!t,this.s0!==t&&(this.s0=t,this.Nc.VB())}jH(t){t=!!t,this.i0!==t&&(this.i0=t,this.L1(),this.Nc.VB())}VH(){return this.i0}o2(){return!this.aW().a2()||!this.i0}i2(){return!this.o2()}l2(){return this.i2()&&this.pB().u2()}c2(){if(!this.l2())return!1;for(const t of this.U0)if(!t.c2())return!1;return!0}LM(t){this.EM!==t&&(this.EM=t,this.Nc.VB())}XH(){return this.EM}f2(){return!this.HQ}uH(){return this.HQ}d2(t){this.HQ=t}dH(){return this.U0}m2(){return this.U0.length>0}g2(t,s=!0){s?this.U0.push(t):this.U0.unshift(t)}w2(t,s,i){let e=this.U0.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.U0.splice(e,0,t)}S2(t){const s=this.U0.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.U0.splice(s,1)}v2(){for(const t of this.U0)if(t.b2())return!0;return!1}*mH(){for(const t of this.U0)yield*t.mH();yield this}*cH(){let t=this.uH();for(;t;)yield t,t=t.uH()}*D1(){yield this,yield*this.cH()}M2(t){for(const s of this.cH())if(s===t)return!0;return!1}T2(t){return this===t||this.ZQ===t.ZQ&&this.QQ===t.QQ&&this.o0===t.o0&&this.r0===t.r0&&this.a0===t.a0&&this.DV()===t.DV()&&this.LV()===t.LV()}G2(){return{parallaxX:this.kH(),parallaxY:this.BH(),scale:this.PH(),scaleRate:this.RH(),angle:this.FH(),hasOwnScroll:this.N1(),scrollX:this.DV(),scrollY:this.LV()}}_2(t){this.Q1(t.parallaxX,t.parallaxY),this.IH(t.scale),this.EH(t.scaleRate),this.RV(t.angle),this.KH(t.hasOwnScroll),this.OV(t.scrollX),this.kV(t.scrollY),this.H1()}C2(t){0!==t.size&&Ip.Ph(this.fQ,t)>0&&(this.l1(),this.jB())}jB(t){this.T0=!1,this.L0=!1,t&&!t.cU().zj().xj()||(this.G0=!1)}I2(){if(!this.T0){if(this.fQ.sort(Cp),this.H0())for(let t=0,s=this.fQ.length;t<s;++t){const s=this.fQ[t].DB();s.f1(t),this.D0.AQ(s.P2())}else for(let t=0,s=this.fQ.length;t<s;++t)this.fQ[t].DB().f1(t);this.T0=!0}}A2(){if(this.G0)return;const t=this.VQ.E2(this.cX()).map(t=>[...t.mH()]).flat();let s=0;for(const i of t){for(const t of i.BB())t.cU().zj().xj()&&t.DB().R2(s++);i.F2()}}F2(){this.G0=!0}O2(){return{isVisible:this.SH(),opacity:this.wF(),isInteractive:this.bH()}}D2(t,s,i){const e=t.DB(),n=s.DB();if(e.kB()!==this||n.kB()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const r=e.LB();let h=n.LB();return r!==h+(i?1:-1)&&(Ip.Gh(this.fQ,r),r<h&&h--,i&&h++,h===this.fQ.length?this.fQ.push(t):this.fQ.splice(h,0,t),this.jB(t),!0)}L2(t,s){const i=[];let e=0,n=0,r=t.length,h=s.length;for(;e<r&&n<h;){const r=t[e],h=s[n];r.DB().lQ()<h.DB().lQ()?(i.push(r),++e):(i.push(h),++n)}for(;e<r;++e)i.push(t[e]);for(;n<h;++n)i.push(s[n]);return i}N2(t){const s=[],i=t.length;for(let e=0;e<i-1;e+=2){const i=t[e],n=t[e+1];s.push(this.L2(i,n))}return i%2==1&&s.push(t[i-1]),s}B2(t){for(;t.length>1;)t=this.N2(t);return t[0]}W2(){return this.I2(),Ip.Sh(Ep),this.D0.PQ(this.QH(),Ep),Ep.length?1===Ep.length?Ep[0]:this.B2(Ep):[]}b2(){return this.SH()&&this.wF()>0&&this.j2()}j2(){if(this.t2()||!this.zH()||this.j0.xf("beforedraw")||this.j0.xf("afterdraw"))return!0;for(const t of this.U0)if(t.j2())return!0;return!1}V2(){return this.qH()||!this.E1()||0!==this.XH()||this.C0.H2()}U2(){if(this.V2())return!0;for(const t of this.U0)if(t.U2())return!0;return!1}rO(){return this.h0}X1(t){if(this.VQ.aH())return 1;{const s=this.z2();return s/(s-t)}}J2(t){const s=this.Nc.lU();if(this.VQ.aH())return s;{const i=this.z2();return this.WS()/Math.abs(i-t)*s}}L1(){this.g0=!0,this.w0=!0,this.p0=!0}q2(t){return this.g0&&(this.X2(t,this.ZD,0,0,null),this.g0=!1),this.ZD}Y1(t){return this.WS(t)/this.Y2()}z2(){return this.l2()?this.pB().h2()[2]:this.Y1()}K2(){if(this.l2()){const t=this.pB().h2();return[t[0],t[1],t[2]]}return this.Z2()}Z2(t=0,s=0,i=0){const e=this.Nc,n=this.pB(),r=e.Q2(),h=e.t3();let o=(this.DV()-r)*this.ZQ+r,a=(this.LV()-h)*this.QQ+h;e.ZL()&&(o=Math.round(o),a=Math.round(a));let l=o+t,u=a+s;const c=n.aH()?this.WS(i):this.Y1(i),[f,d]=this.J1();if(.5!==f||.5!==d){const t=this.WS(i)/c;let s=(f-.5)*e.K1()/t,n=(d-.5)*e.Z1()/t;const r=this.FV();0!==r&&(Vp.set(s,n),Vp.rotate(r),s=Vp.Fa(),n=Vp.Da()),l+=s,u+=n}return[l,u,c]}X2(t,s,i,e,n){const r=this.Nc,h=this.pB();if(this.l2()){Fp.m(Bp,h.h2()),Fp.m(Wp,h.s3()),Fp.m(jp,h.i3());const t=r.Q2(),s=r.t3(),i=Wp[0]-Bp[0],e=Wp[1]-Bp[1],n=Wp[2]-Bp[2];Bp[0]=(Bp[0]-t)*this.ZQ+t,Bp[1]=(Bp[1]-s)*this.QQ+s,Bp[2]*=Math.max(this.ZQ,this.QQ),Wp[0]=Bp[0]+i,Wp[1]=Bp[1]+e,Wp[2]=Bp[2]+n}else{const[t,s,r]=this.Z2(i,e,n);Fp.set(Bp,t,s,r),Fp.set(Wp,t,s,r-100);const h=this.FV();0===h?Fp.set(jp,0,1,0):Fp.set(jp,Math.sin(h),Math.cos(h),0)}t.ev(s,Bp,Wp,jp,n||r.Z1())}e3(){this.m0=!0,this.w0=!0,this.p0=!0}n3(t){return this.m0&&(this.r3(t),this.m0=!1),this.oG}r3(t){const s=this.Nc.GB(),[i,e]=this.J1();if(this.VQ.aH())t.sv(this.oG,s.h3(),s.o3());else if(.5===i&&.5===e)Dp.m(this.oG,s.a3());else{const n=s.h3(),r=s.o3();t.QS(this.oG,n/r,i,e)}}oK(t,s=!0,i=0,e=0,n=0){s&&t.oF(this.n3(t));let r=null;0===i&&0===e&&0===n?r=this.q2(t):(this.X2(t,kp,i,e,n),r=kp),t.dF(r)}l3(t){this.oK(t),t.jv(this.QM())}u3(t){let s=null;if(t.jb()&&this.Nc.c3()){const i=this.Nc.GB().f3(this);i&&(s=i.VE(),t.vO(s))}return s}d3(t){if(t.tv()&&this.Nc.c3()){const s=2*(this.ML()+1);t.m3(s,s+1)}}g3(t,s){if(this.j0.xf(s)){t.lv(),t.xF(null),t.CF(),t.Ib(),t.SF(1,1,1,1),t.jv(this.QM()),t.Hv(0);const i=new Ip.Event(s);i.JC=this.Nc.GB().TB(),this.IZ(i)}}Kx(t,s,i){const e=this.Nc.GB(),n=this.V2();let r=null;const h=this.u3(t);if(this.d3(t),n){const s={lT:this.Nc.YL(),XT:!0,y3:!!t.tv()&&this.Nc.w3()};"low"===e.S3()&&(s.width=e.h3(),s.height=e.o3()),r=this.Nc.v3(s),this.h0=r,t.cO(r),this.zH()&&t.ZF(0,0,0,0)}else this.h0=s,t.cO(s);if(this.zH()||t.Pu(this.YQ),this.VQ.b3(t,this.h0,this.U0,n&&this.zH()),this.d3(t),this.oK(t),t.jv(this.QM()),t.sO(this.i2()),this.g3(t,"beforedraw"),this.Y2()>Number.EPSILON){this.I2();const s=this.H0()&&0===this.QM()&&!this._0;this.l2()?this.M3(t):s?this.x3(t):this.T3(t,this.s2())}this.g3(t,"afterdraw"),t.jv(0),t.Hv(0),n&&(t.sO(!1),this.G3(t,r,s,i)),h&&t.MO(h),this.h0=null}T3(t,s){const i=this.QH(),e=this.h0,n=this.pB().aH(),r=this.pB()._3();let h=null;for(let o=0,a=s.length;o<a;++o){const a=s[o];if(a===h)continue;h=a;const l=a.DB();l.SH()&&l.C3(i,r,n)&&this.I3(a,l,t,e)}}M3(t){const s=this.h0,i=this.P3(),e=Hp,n=Up,r=this.s2();for(let h=0,o=r.length;h<o;){const a=r[h],l=a.DB();if(!l.SH()||!l.A3(i)){++h;continue}(!a.E3()||l.R3()>0)&&n.push(a);const u=a.DB().Dz();e.push(a);let c=h+1;for(;c<o;++c){const t=r[c],s=t.DB();if(s.SH()&&s.A3(i)){if(s.Dz()!==u)break;t.E3()?(s.R3()>0&&n.push(t),e.push(t)):n.push(t)}}if(1!==e.length||e[0].F3()){this.O3(t,e);for(let i=0,e=n.length;i<e;++i){const e=n[i],r=e.DB();r.D3(!0),this.I3(e,r,t,s),r.D3(!1)}}else{this.I3(a,l,t,s);for(let i=0,e=n.length;i<e;++i){const e=n[i];if(e===a)continue;const r=e.DB();r.kB().I3(e,r,t,s)}}h=c,Ip.Sh(e),Ip.Sh(n)}}O3(t,s){const i=this.h0;t.gO();for(let i=0,e=s.length;i<e;++i){const e=s[i],n=e.DB();n.L3(!0),this.N3(e,n,t)}t.yO();for(let e=0,n=s.length;e<n;++e){const n=s[e],r=n.DB();this.I3(n,r,t,i),r.L3(!1)}t.SO()}x3(t){const s=this.D0,i=this.B0,e=this.N0,n=this.QH();let r;i.set(s._Q(n.Za()),s.CQ(n.Qa()),s._Q(n.tl()),s.CQ(n.sl())),this.L0&&i.equals(e)?r=this.k0:(r=this.W2(),this.L0=!0,e.m(i)),this.T3(t,r),r!==this.k0&&Ip.Th(this.k0,r)}I3(t,s,i,e){s.H2()?this.B3(t,s,i,e):this.N3(t,s,i)}N3(t,s,i){const e=s.W3();i.Tv()!==e&&e.kM(),t.Kx(i)}B3(t,s,i,e){this.j3(t,s,i,e,null)&&this.oK(i)}j3(t,s,i,e,n){const r=s.vz().bL();return r.ck(i,e,{dk:t,mk:s.XH(),devicePixelRatio:this.Nc.V3(),time:t.H3(),gk:this.Nc.U3()*this.Y2(),yk:this.FV(),Vk:s.Nz(),Hk:r.aL()?null:this.z3(s),Tk:n&&n.Tk,Gk:n&&n.Gk,_k:n&&n._k,Ck:n&&n.Ck,Ik:n&&n.Ik,Pk:n&&n.Pk}),i.jv(this.QM()),r.mF()}G3(t,s,i,e){const n=this.C0.R1(),r=this.Nc;0===n.length?(t.cO(i),t.lv(),e&&0===this.EM&&this.E1()?t.fO(s):(t.LM(this.EM),t.NM(this.t0),t.dO(s)),t.pO(s),r.E0(s)):this.bL().ck(t,i,{dk:this,mk:this.XH(),devicePixelRatio:r.V3(),gk:r.U3()*this.Y2(),yk:this.FV(),Vk:this.QH(),Hk:null,QO:!0})}PH(){return this.o0}IH(t){this.o0!==t&&(this.o0=t,this.VQ.J3(),this.L1(),this.Nc.VB())}lU(){return this.Y2()*this.Nc.lU()}SX(){return this.Y2()*this.Nc.SX()}Y2(){return(this.o0*this.VQ.EV()-1)*this.r0+1}H1(){if(!this.p0)return;this.p0=!1;const t=this.Nc.Q2(),s=this.Nc.t3(),i=(this.DV()-t)*this.ZQ+t,e=(this.LV()-s)*this.QQ+s,n=this.Y2(),r=this.Nc.K1()/n,h=this.Nc.Z1()/n;let o=i-r/2,a=e-h/2;this.Nc.ZL()&&(o=Math.round(o),a=Math.round(a));const l=this.f0;l.set(o,a,o+r,a+h);const u=this.FV();0!==u&&(Pp.m(l),Pp.offset(-l.hl(),-l.ol()),Ap.Yl(Pp,u),Ap.Zl(Pp),Pp.offset(l.hl(),l.ol()),l.m(Pp));const c=this.FM;this.q1(c,this.sR),this.l2()?this.q3(c,this.d0):this.d0.m(this.sR)}q3(t,s){const i=this.Nc.GB(),e=i.ej(),n=i.rj(),[r,h]=this.sU(0,0,t),[o,a]=this.sU(e,0,t),[l,u]=this.sU(e,n,t),[c,f]=this.sU(0,n,t);let d=Math.min(r,o,l,c),p=Math.min(h,a,u,f),m=Math.max(r,o,l,c),g=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}sU(t,s,i=0){return this.X3(t,s,i,this.SX())}rU(t,s,i=0){return this.X3(t,s,i,this.lU()*this.uj())}X3(t,s,i,e){const n=this.Nc,r=n.mM(),h=this.Y2(),o=n.K1()/h,a=n.Z1()/h,l=Np;Op.set(l,0,0,o,a),t/=e,s=l[3]-s/e;const u=this.n3(r),c=this.q2(r),f=Lp;return Ip.Lw.Ww(t,s,i,c,u,l,f)?[f[0],f[1]]:[NaN,NaN]}Y3(t,s){const i=this.o0,e=this.r0,n=this.ZQ,r=this.QQ,h=this.a0,o=this.l2();o&&this.pB().K3(!1),this.o0=1,this.r0=1,this.ZQ=1,this.QQ=1,this.a0=0,this.L1();const a=this.sU(t,s);return this.o0=i,this.r0=e,this.ZQ=n,this.QQ=r,this.a0=h,this.L1(),o&&this.pB().K3(!0),a}eU(t,s,i=0){return this.Z3(t,s,i,this.SX())}oU(t,s,i=0){return this.Z3(t,s,i,this.lU()*this.uj())}Z3(t,s,i,e){const n=this.Nc,r=n.mM(),h=this.Y2(),o=n.K1()/h,a=n.Z1()/h,l=Np;Op.set(l,0,0,o,a);const u=this.n3(r),c=this.q2(r),f=Lp;return Ip.Lw.Nw(t,s,i,c,u,l,f)?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}Q3(t,s){return t*=this.lU()*this.uj(),0!==s&&(t*=this.X1(s)),t}z3(t){const s=t.Nz(),i=t.Dz(),e=t.R3(),n=i+e,r=s.Za(),h=s.Qa(),o=s.tl(),a=s.sl();if(this.l2()){if(this.t5(r,h,i)||this.t5(o,h,i)||this.t5(o,a,i)||this.t5(r,a,i))return null;if(e>0&&(this.t5(r,h,n)||this.t5(o,h,n)||this.t5(o,a,n)||this.t5(r,a,n)))return null}else if(n>=this.Y1())return null;let[l,u]=this.oU(r,h,i),[c,f]=this.oU(o,a,i);if(0!==this.FV()||e>0||this.l2()){const[t,s]=this.oU(o,h,i),[d,p]=this.oU(r,a,i);if(e>0){const[i,e]=this.oU(r,h,n),[m,g]=this.oU(o,h,n),[y,w]=this.oU(o,a,n),[S,v]=this.oU(r,a,n);let b=Math.min(l,c,t,d,i,m,y,S);c=Math.max(l,c,t,d,i,m,y,S),l=b,b=Math.min(u,f,s,p,e,g,w,v),f=Math.max(u,f,s,p,e,g,w,v),u=b}else{let i=Math.min(l,c,t,d);c=Math.max(l,c,t,d),l=i,i=Math.min(u,f,s,p),f=Math.max(u,f,s,p),u=i}}return Pp.set(l,u,c,f),Pp}P3(){return this.w0&&(this.s5(),this.w0=!1),this.y0}s5(){const t=this.Nc.mM(),s=this.n3(t),i=this.q2(t);this.y0.qw(i,s)}t5(t,s,i){return this.P3().Yw(t,s,i)}i5(){return{d:this.I1(),s:this.PH(),a:this.FH(),v:this.gH(),i:this.bH(),html:this.TH(),bc:this.YQ.toJSON(),t:this.zH(),sx:this.l0,sy:this.u0,hosp:this.c0,px:this.kH(),py:this.BH(),c:this.RM.toJSON(),sr:this.RH(),fx:this.C0.ux(),cg:this.M0}}e5(t){this.$Q=!!t.d,this.o0=t.s,this.a0=t.a,this.qQ=!!t.v,this.XQ=!t.hasOwnProperty("i")||t.i,this.UQ=!!t.html,this.YQ.wa(t.bc),this.KQ=!!t.t,t.hasOwnProperty("sx")&&(this.l0=t.sx),t.hasOwnProperty("sy")&&(this.u0=t.sy),t.hasOwnProperty("hosp")&&(this.c0=!!t.hosp),this.ZQ=t.px,this.QQ=t.py,this.RM.wa(t.c),this.V0(),this.r0=t.sr,Ip.Th(this.M0,t.cg),Ip.Th(this.b0,this.S0);const s=new Set(this.M0);let i=0;for(let t=0,e=this.b0.length;t<e;++t)s.has(this.b0[t][2])||(this.b0[i]=this.b0[t],++i);Ip.wh(this.b0,i),this.C0.mx(t.fx),this.F0=!0}n5(){this.c1(!1),this.jB(),this.L1(),this.e3()}VV(){return this.W0}eN(){return this.j0}IZ(t){t.bz=this.VV(),this.j0.dispatchEvent(t)}lV(t,s=!1,i=!1){if(this.fQ.includes(t))return s&&this.fQ.sort((t,s)=>(t.DB().r5()??0)-(s.DB().r5()??0)),void(i&&this.fQ.forEach((t,s)=>t.DB().f1(s)));if(t.h5()){const s=[...t.dJ()];s.push(t),s.sort((t,s)=>(t.DB().r5()??0)-(s.DB().r5()??0));for(const t of s)if(t.MU())for(const i of t.xU()){if(s.includes(i))continue;const t=[...i.dJ()];t.push(i),t.sort((t,s)=>(t.DB().r5()??0)-(s.DB().r5()??0)),t&&t.length&&s.splice(s.length,0,...t)}for(const t of s)t.zj().bj()&&this.e1(t,!0);i&&this.fQ.forEach((t,s)=>t.DB().f1(s))}else{if(t.zj().bj()&&this.e1(t,!0),!t.MU())return void(i&&this.fQ.forEach((t,s)=>t.DB().f1(s)));for(const s of t.xU()){const t=[...s.dJ()];if(t.push(s),t.sort((t,s)=>(t.DB().r5()??0)-(s.DB().r5()??0)),t&&t.length)for(const s of t)s.zj().bj()&&this.e1(s,!0)}i&&this.fQ.forEach((t,s)=>t.DB().f1(s))}}}}{let Xp=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},Yp=function(t,s){hm!==t&&(t.l3(s),hm=t)};0;const Kp=self._s,Zp=self.iz,Qp=(self.assert,Kp.Un(Kp.Rect),Kp.Un(Kp.Rect),Kp.Un(Kp.Rect)),tm=Kp.Un(Kp.xo),sm=self.hs.ys,im=[],em=[],nm=[],rm=[];let hm=null;Kp.o5=class extends Kp.Vn{constructor(t,s,i){super(),this.a5=t,this.Nc=t.aW(),this.qn=i[0],this.l5=i[1],this.u5=i[2],this.Py=i[1],this.Ay=i[2],this.c5=!!i[3],this.f5=!!i[4],this.d5=i[5],this.p5=i[6],this.m5=i[7],this.g5=null,this.JQ=i[8],this.Aw=s,this.l0=0,this.u0=0,this.o0=1,this.a0=0,this.y5=new Set,this.w5=new Set,this.S5=new Set,this.v5=[],this.b5=[],this.M5=new Map,this.x5=new Map,this.T5=[],this.G5=!1,this._5=sm.create(),this.C5=sm.create(),this.I5=sm.create(),this.P5=[],this.A5=[],this.E5=new Map,this.R5=new Map,this.F5=-1;const e=this.Nc.GB();this.C0=Kp.Un(Kp.I0,this,i[11]),this.wL=Kp.Un(Kp.Lw.oD,e.P0(),{YO:(t,s)=>{const i=s.uL().rO();t.bF(),t.dO(i),t.pO(i),e.E0(i)},ZO:t=>this._V().R0(t)}),this.F0=!0,this.O5=!1,this.h0=null,this.D5={},this.k5=new Map,this.L5=!0,this.N5=new self.GV(this),this.j0=Kp.Un(Kp.Event.wf);for(const t of i[9])this.P5.push(Kp.jQ.z0(this,null,t));this.B5();for(const t of this.zV())t.J0();for(const t of i[10]){const s=this.Nc.$0(t[1]);if(!s)throw new Error("missing nonworld object class");s.X0()||s.Y0(t),this.T5.push(t),this.q0(s)}}zn(){for(const t of this.A5)t.zn();Kp.Sh(this.A5),this.S5.clear(),this.g5=null,this.a5=null,this.Nc=null}aW(){return this.Nc}Pc(){return this.qn}C1(){return this.JQ}ML(){return this.Aw}_V(){return this.C0}bL(){return this.A1(),this.wL}A1(){const t="low"===this.Nc.GB().S3();if(!this.F0&&this.O5===t&&!this.wL.QD())return;const s=this._V().R1();this.wL.tk(s.map(t=>t.z_()),{tD:s.map(t=>t.ML()),iD:t,hD:!0}),this.F0=!1,this.O5=t}S$(){this._V().S$(),this.F0=!0}W5(){let t=this.A5[0].Y2();for(let s=1,i=this.A5.length;s<i;++s){const i=this.A5[s];0===i.kH()&&0===i.BH()||(t=Math.min(t,i.Y2()))}return t}j5(){return.5*this.Nc.K1()/this.W5()}V5(){return.5*this.Nc.Z1()/this.W5()}B1(){return this.WV()?-1/0:this.j5()}W1(){return this.WV()?1/0:this.Vg()-this.j5()}j1(){return this.WV()?-1/0:this.V5()}V1(){return this.WV()?1/0:this.Zg()-this.V5()}OV(t){const s=this.B1(),i=this.W1();t>i&&(t=i),t<s&&(t=s),this.l0!==t&&(this.l0=t,this.H5(),this.Nc.VB())}DV(){return this.l0}kV(t){const s=this.j1(),i=this.V1();t>i&&(t=i),t<s&&(t=s),this.u0!==t&&(this.u0=t,this.H5(),this.Nc.VB())}LV(){return this.u0}WV(){return this.c5}J3(){this.OV(this.DV()),this.kV(this.LV());for(const t of this.A5)t.N1()&&(t.OV(t.DV()),t.kV(t.LV()))}eH(t,s){this.d5===t&&this.p5===s||(this.d5=t,this.p5=s,this.U5()&&(this.z5(),this.H5(),this.Nc.VB()))}J5(){return this.aH()?.5:this.d5}q5(){return this.aH()?.5:this.p5}rH(){return[this.J5(),this.q5()]}_3(){const t=this.J5(),s=this.q5();return t<0||t>1||s<0||s>1}hH(){this.f5&&(this.f5=!1,this.z5(),this.H5(),this.Nc.VB())}oH(){this.f5||(this.f5=!0,this.z5(),this.H5(),this.Nc.VB())}aH(){return this.f5}U5(){return!this.aH()}K3(t){t=!!t,this.G5!==t&&(this.G5=t,this.H5(),this.Nc.VB())}u2(){return this.G5}X5(t,s,i,e,n,r,h,o,a){Xp(this._5,t,s,i)&&Xp(this.C5,e,n,r)&&Xp(this.I5,h,o,a)||(sm.set(this._5,t,s,i),sm.set(this.C5,e,n,r),sm.set(this.I5,h,o,a),this.Y5())}Y5(){this.H5(),this.Nc.VB()}h2(){return this._5}s3(){return this.C5}i3(){return this.I5}EV(){return this.o0}AV(t){this.o0!==t&&(this.o0=t,this.H5(),this.J3(),this.Nc.VB())}RV(t){t=Kp.Kn(t),this.a0!==t&&(this.a0=t,this.H5(),this.Nc.VB())}FV(){return this.a0}Vg(){return this.Py}Xg(t){!isFinite(t)||t<1||(this.Py=t)}Zg(){return this.Ay}Hg(t){!isFinite(t)||t<1||(this.Ay=t)}K5(){return this.g5}_1(){return this.P5}*zV(){for(const t of this.P5)yield*t.mH()}UV(){return this.A5}Z5(){return this.A5.length}kB(t){return"number"==typeof t?this.NB(t):this.v1(t.toString())}NB(t){return t=Kp.Yn(Math.floor(t),0,this.A5.length-1),this.A5[t]}v1(t){return this.E5.get(t.toLowerCase())||null}Q5(t){return!!this.v1(t)}t4(t){return this.R5.get(t)||null}z5(){for(const t of this.A5)t.e3()}H5(){for(const t of this.A5)t.L1()}XV(t,s,i){if(this.Q5(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=i>=2?s:s.uH(),n=Kp.Un(Kp.jQ,this,e,{name:t,EQ:Math.floor(1e15*Math.random()),RQ:!0});this.s4(n,s,i),this.aW().VB(),this.T1()}KV(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.i4(t),this.s4(t,s,i),this.aW().VB(),this.T1())}QV(t){if(this.i4(t)){const s=this.Nc.oN();s.uV(!0),t.zn(),s.uV(!1),this.aW().VB(),this.T1()}}sH(){const t=new Set;for(const s of this.zV())s.I1()&&!s.P1()&&t.add(s);if(0===t.size)return;const s=this.Nc.oN();s.uV(!0);for(const s of t)this.i4(s),s.zn();s.uV(!1),this.aW().VB(),this.T1()}s4(t,s,i){if(i>=2)if(s){if(s===t||s.M2(t))throw new Error(`cannot move layer '${t.Pc()}' to sub-layer of itself`);s.g2(t,2===i),t.d2(s)}else 2===i?this.P5.push(t):this.P5.unshift(t),t.d2(null);else{const e=s.uH();if(e){if(s.M2(t))throw new Error(`cannot move layer '${t.Pc()}' to sub-layer of itself`);e.w2(t,s,0===i),t.d2(e)}else{let e=this.P5.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");0===i&&++e,this.P5.splice(e,0,t),t.d2(null)}}}i4(t){const s=t.uH();if(s)return s.S2(t),!0;if(this.P5.length>1){const s=this.P5.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.P5.splice(s,1),!0}return!1}B5(){this.A5=[...this.zV()],this.E5.clear(),this.R5.clear();for(let t=0,s=this.A5.length;t<s;++t){const s=this.A5[t];s.b1(t),this.E5.set(s.Pc().toLowerCase(),s),this.R5.set(s.C1(),s)}}e4(){let t=0;for(const s of this.P5){for(const i of s.mH())i.M1(t);s.TH()&&t++}}n4(){return this.P5.at(-1).cX()+1}async T1(){this.B5(),this.e4(),this.F5=this.n4()}r4(){return this.F5}h4(){this.F5=-1}E2(t){const s=[];for(const i of this.P5){const e=i.cX();if(e===t)s.push(i);else if(e>t)break}return s}G2(){return{scrollX:this.DV(),scrollY:this.LV(),scale:this.EV(),angle:this.FV(),vpX:this.J5(),vpY:this.q5()}}_2(t){this.OV(t.scrollX),this.kV(t.scrollY),this.AV(t.scale),this.RV(t.angle),this.eH(t.vpX,t.vpY)}o4(){let t=this.P5.filter(t=>t.b2())[0];for(;t;){if(!t.zH())return tm.ko(t.YH()),tm.Do(1),tm;if(t.V2())return tm.Io(0,0,0,0),tm;t=t.dH().filter(t=>t.b2())[0]}return tm.Io(0,0,0,0),tm}t1(){return this.L5}a4(){return[...this.y5]}q0(t){if(t.MU())for(const s of t.u4().l4())this.y5.add(s);else this.y5.add(t)}c4(){return[...this.w5]}f4(t,s){if(t===this||!s)return Promise.resolve();t&&(Kp.po(this.w5,t.w5),t.w5.clear());const i=[];for(const t of this.y5)this.w5.has(t)||(i.push(t.d4(s)),this.w5.add(t));return Promise.all(i)}async m4(t){if(t.S1())throw new Error("cannot load textures for family");const s=this.Nc.mM();if(!s||s.pE()||this.w5.has(t))return;this.w5.add(t);const i=t.d4(s);this.g4(i),await i,t.y4(),this.Nc.VB()}g4(t){this.S5.add(t),t.then(()=>this.S5.delete(t)).catch(()=>this.S5.delete(t))}w4(){return Promise.all([...this.S5])}S4(t){if(t.S1()||t.hV()>0)throw new Error("cannot unload textures");const s=this.Nc.mM();s&&this.w5.has(t)&&(this.w5.delete(t),t.v4(s))}b4(t,s){if(t!==this&&s)for(const s of this.w5)s.WQ()||t.y5.has(s)||(s.v4(),this.w5.delete(s))}M4(){this.w5.clear()}async x4(t){const s=this.Nc,i=this.a5,e=s.oN();this.m5&&(this.g5=e.T4(this.m5),this.g5.G4()),i._4(this),this.Py=this.l5,this.Ay=this.u5,this.l0=s.$L()/2,this.u0=s.XL()/2,this.J3(),this.z5(),this.H5(),this.e4(),await this.Nc.GB().C4(this.n4(),!0),this.I4(t),this.Nc.P4(!0),this.A4(),this.L5||this.E4(),this.R4(this.v5),this.R4(this.b5),this.F4(),i.O4(),s.pV(),this.Nc.P4(!1);const n=this.Nc.D4();if(await Promise.all(n),Kp.Sh(n),!s.L4()){for(const t of this.v5)t.N4();for(const t of this.b5)t.B4(this.M5,this.x5);for(const[t,s]of Object.entries(this.D5)){const i=this.Nc.ZX(parseInt(t,10));i&&!i.S1()&&i.s1()&&Kp.Sh(s)}for(const t of this.v5)t.W4();for(const t of this.b5)t.W4();for(const t of this.v5)t.wJ()||t.j4();for(const t of this.b5)t.wJ()||t.j4()}Kp.Sh(this.v5),Kp.Sh(this.b5),this.M5.clear(),this.x5.clear(),await Promise.all([...this.y5].map(t=>t.V4(this.Nc.mM()))),t&&(s.wf().dispatchEvent(new Kp.Event("beforefirstlayoutstart")),await s.H4(new Kp.Event("beforeprojectstart"))),await this.U4(new Kp.Event("beforeanylayoutstart")),s.wf().dispatchEvent(new Kp.Event("beforelayoutstart")),await this.H4(new Kp.Event("beforelayoutstart")),s.L4()||await s.KB(Kp.sW.tW.QB.z4,null,null),s.wf().dispatchEvent(new Kp.Event("afterlayoutstart")),await this.H4(new Kp.Event("afterlayoutstart")),await this.U4(new Kp.Event("afteranylayoutstart")),t&&(s.wf().dispatchEvent(new Kp.Event("afterfirstlayoutstart")),await s.H4(new Kp.Event("afterprojectstart"))),e.J4(i),await this.w4(),this.L5=!1}I4(t){for(const t of this.Nc.w1())if(!t.S1()&&t.bj())for(const s of t.iV()){const t=s.DB(),i=t.kB(),e=Kp.Yn(i.ML(),0,this.A5.length-1),n=this.A5[e];t.WB(n,!0),n.n1(s)}if(!t)for(const t of this.A5)t.c1(!1)}A4(){for(const t of this.A5)t.Q0(this.v5),t.d1()}E4(){let t=!1;for(const[s,i]of Object.entries(this.D5)){const e=this.Nc.ZX(parseInt(s,10));if(e&&!e.S1()&&e.s1())for(const s of i){let i=null;if(e.bj()&&(i=s.hasOwnProperty("instJson")?this.t4(s.instJson.w.l):this.t4(s.w.l),!i))continue;const n=this.Nc.i1(e,i,!1,0,0,!0);s.hasOwnProperty("instJson")?n.mx(s.instJson):n.mx(s),t=!0,this.b5.push(n),s.hasOwnProperty("instJson")&&(this.M5.set(n,s),this.x5.set(s.index,n))}}for(const t of this.A5)t.c1(!0),t.jB();t&&(this.Nc.pV(),this.Nc.q4())}R4(t){for(const s of t){if(!s.MU())continue;const i=s.DB(),e=s._U();for(const n of s.cU().u4().xV()){if(n===s.cU())continue;const r=n.iV();if(r.length>e)s.X4(r[e]);else{let e;e=i?this.Nc.i1(n,i.kB(),!0,i.qM(),i.KM(),!0):this.Nc.i1(n,null,!0,0,0,!0),this.Nc.pV(),n.Y4(),s.X4(e),t.push(e)}}}}F4(){for(const t of this.T5)this.Nc.$0(t[1]).MU()||this.Nc.i1(t,null,!0)}K4(){const t=[],s=this.T5;let i=0;for(let e=0,n=s.length;e<n;++e){const n=s[e],r=this.Nc.$0(n[1]);r.WQ()?r.MU()&&r.u4().Z4()||t.push(this.Nc.i1(n,null,!0)):(s[i]=n,++i)}Kp.wh(s,i),this.Nc.pV(),this.R4(t)}g1(t,s,i,e,n,r,h){if(i)return i.g1(t,s,n,r,e,h);{const i=[];for(const o of this.A5)i.push(o.g1(t,s,n,r,e,h));return i.flat()}}async Q4(){const t=this.a5;this.Nc.L4()||(await this.U4(new Kp.Event("beforeanylayoutend")),await this.H4(new Kp.Event("beforelayoutend")),await this.Nc.KB(Kp.sW.tW.QB.t6,null,null),await this.H4(new Kp.Event("afterlayoutend")),await this.U4(new Kp.Event("afteranylayoutend"))),t.s6(!0),this.Nc.oN().i6(),this.L5||this.e6();for(const t of this.A5)t.m1();for(const t of this.Nc.w1())if(!(t.WQ()||t.bj()||t.zj().Sj()||t.S1())){for(const s of t.iV())this.Nc.yU(s);this.Nc.pV()}t.s6(!1),t.uB()===this&&t._4(null)}n6(t,s){const i=t.cU().C1().toString();this.D5.hasOwnProperty(i)||(this.D5[i]=[]);const e=this.D5[i],n={index:s,instJson:t.ux(),sceneGraphJson:{children:[]}};e.push(n),this.k5.set(t,n)}r6(t){const s=this.k5.get(t);for(const i of t.h6()){const t=this.k5.get(i);t&&s.sceneGraphJson.children.push({index:t.index,flags:Kp.a6.o6(i.DB())})}}e6(){this.k5.clear();let t=0;for(const s of this.A5){s.I2();for(const i of s.BB()){const s=i.cU();!s.WQ()&&s.s1()&&(this.n6(i,t),t++)}}for(const t of this.A5)for(const s of t.BB()){const t=s.cU();!t.WQ()&&t.s1()&&this.r6(s)}this.k5.clear()}l6(){this.D5={},this.L5=!0}rO(){return this.h0}V2(){const t=this.Nc,s=t.mM().jb();return"low"===t.GB().S3()||s&&t.w3()||this.C0.H2()||s&&t.a2()}u6(t){const s=this.Nc.GB();if(this.V2()){t.cO(null),t.ZF(0,0,0,0);const i={lT:this.Nc.YL(),XT:t.tv()||this.Nc.w3()||this.C0.H2(),y3:!!t.tv()&&this.Nc.w3()};"low"===s.S3()&&(i.width=s.h3(),i.height=s.o3()),this.h0=this.Nc.v3(i)}else this.h0=null}c6(t){this.Nc.f6(t)&&(t.sO(!1),t.cO(null),t.lv(),t.fO(this.h0))}d6(t){this.V2()&&(t.sO(!1),this.p6(t,this.h0))}m6(t){t.cO(this.h0),t.Pu(this.o4()),this.Nc.a2()&&t.tO();const s=this.E2(0);this.b3(t,this.h0,s,!0),t.tv()&&t.m3(0,1),this.d6(t),this.h0=null}g6(t,s){let i=null;this.Nc.f6(t)&&(i=this.h0),t.cO(i),t.ZF(0,0,0,0),this.Nc.a2()&&t.tO();const e=this.E2(s);this.b3(t,i,e,!0),this.c6(t),t.Ob(),this.Nc.GB().y6(s)}b3(t,s,i,e){const n=i.filter(t=>t.b2());for(let i=0,r=n.length;i<r;){const h=n[i];if(h.c2()&&!h.U2()){im.push(h);for(let t=i+1;t<r;++t){const s=n[t];if(!s.c2()||s.U2())break;im.push(n[t])}if(im.length>=2||1===im.length&&im[0].v2()){this.w6(t,s,im),i+=im.length,Kp.Sh(im);continue}Kp.Sh(im)}h.Kx(t,s,e&&0===i),++i}}p6(t,s){const i=this.C0.R1(),e=this.Nc;0===i.length?(t.cO(null),t.lv(),t.fO(s),t.pO(s),e.E0(s)):(Qp.set(0,0,e.K1(),e.Z1()),this.bL().ck(t,null,{dk:this,mk:3,devicePixelRatio:this.Nc.V3(),gk:this.Nc.U3()*this.EV(),yk:this.FV(),Vk:Qp,Hk:null,QO:!0}))}w6(t,s,i){const e=i[0],n=e.u3(t);e.d3(t),i[0].zH()||(tm.ko(i[0].YH()),tm.Do(1),t.Pu(tm)),t.sO(!0);const r=em,h=nm,o=rm;for(const s of i)s.I2(),s.n2(r),s.g3(t,"beforedraw");for(let i=0,e=r.length;i<e;){const n=r[i],a=n.DB(),l=a.kB();if(!a.SH()||!a.A3(l.P3())){++i;continue}(!n.E3()||a.R3()>0)&&o.push(n);const u=n.DB().Dz();h.push(n);let c=i+1;for(;c<e;++c){const t=r[c],s=t.DB();if(s.SH()&&s.A3(s.kB().P3())){if(s.Dz()!==u)break;t.E3()?(s.R3()>0&&o.push(t),h.push(t)):o.push(t)}}if(1!==h.length||h[0].F3()){this.S6(t,s,h);for(let i=0,e=o.length;i<e;++i){const e=o[i],n=e.DB(),r=n.kB();n.D3(!0),Yp(r,t),r.I3(e,n,t,s),n.D3(!1)}}else{Yp(l,t),l.I3(n,a,t,s);for(let i=0,e=o.length;i<e;++i){const e=o[i];if(e===n)continue;const r=e.DB(),h=r.kB();Yp(h,t),h.I3(e,r,t,s)}}i=c,Kp.Sh(h),Kp.Sh(o)}for(const s of i)s.g3(t,"afterdraw");n&&t.MO(n),Kp.Sh(r),hm=null}S6(t,s,i){t.gO();for(let s=0,e=i.length;s<e;++s){const e=i[s],n=e.DB(),r=n.kB();n.L3(!0),Yp(r,t),r.N3(e,n,t)}t.yO();for(let e=0,n=i.length;e<n;++e){const n=i[e],r=n.DB(),h=r.kB();Yp(h,t),h.I3(n,r,t,s),r.L3(!1)}t.SO()}i5(){const t={sx:this.DV(),sy:this.LV(),s:this.EV(),a:this.FV(),w:this.Vg(),h:this.Zg(),ortho:this.aH(),vpX:this.J5(),vpY:this.q5(),fv:this.L5,persist:this.D5,fx:this.C0.ux(),layers:{},dynamicLayers:[]};for(const s of this.A5)if(s.I1()){const i=s.uH();t.dynamicLayers.push({sid:s.C1(),name:s.Pc(),parentSid:i?i.C1():null,siblingIndex:s.G1(),data:s.i5()})}else t.layers[s.C1().toString()]=s.i5();return t}e5(t){this.l0=t.sx,this.u0=t.sy,this.o0=t.s,this.a0=t.a,this.Py=t.w,this.Ay=t.h,this.f5=!!t.ortho,t.hasOwnProperty("vpX")&&(this.d5=t.vpX),t.hasOwnProperty("vpY")&&(this.p5=t.vpY),this.L5=!!t.fv,this.D5=t.persist,this.C0.mx(t.fx),this.F0=!0;for(const[s,i]of Object.entries(t.layers)){const t=parseInt(s,10),e=this.t4(t);e&&e.e5(i)}if(t.hasOwnProperty("dynamicLayers")){this.sH(),this.Nc.pV();const s=new Map,i=t.dynamicLayers;for(let t=i.length-1;t>=0;--t){const e=i[t],n=e.sid,r=e.name,h=e.parentSid,o=e.siblingIndex,a=e.data;if(this.B5(),this.Q5(r)||this.t4(n))continue;let l,u;if(null===h)l=null,u=this.P5;else{if(l=this.t4(h),!l)continue;u=l.dH()}const c=Kp.Un(Kp.jQ,this,l,{name:r,EQ:n,RQ:!0});u.push(c);let f=s.get(u);f||(f=[],s.set(u,f)),f.push({bz:c,v6:o}),c.e5(a)}for(const[t,i]of s){i.sort((t,s)=>t.v6-s.v6);for(const s of i){const i=s.bz,e=s.v6;let n=t.indexOf(i);t.splice(n,1),t.splice(e,0,i)}}}this.T1(),this.z5(),this.H5()}cB(){return this.N5}eN(){return this.j0}IZ(t){t.layout=this.cB();const s=this.Nc,i=s.sz()&&!s.oN().fV();i&&Zp.b6(),this.j0.dispatchEvent(t),i&&Zp.M6()}H4(t){return t.layout=this.cB(),this.j0._f(t)}U4(t){return t.layout=this.cB(),this.Nc.H4(t)}x6(){this.T6(this.P5)}T6(t,s=0){const i=t.slice(0);i.reverse();for(const t of i)console.log(`${"\t".repeat(s)}- ${t.Pc()}`),this.T6(t.dH(),s+1)}}}{const om=self._s;om.G6=class extends om.Vn{#s;#i=[];#f=new Map;#a=new Map;#e=null;#t=[];#r=null;#h=0;#d=null;constructor(t){super(),this.#s=t}zn(){this.#s=null,this.#e=null,this.#r=null,this.#d=null,om.Sh(this.#i),this.#f.clear(),this.#a.clear(),om.Sh(this.#t)}UG(t){const s=om.Un(om.o5,this,this.#i.length,t);this.#i.push(s),this.#f.set(s.Pc().toLowerCase(),s),this.#a.set(s.C1(),s)}aW(){return this.#s}_6(t){this.#r=t}C6(){if(this.#r)return this.#r;if(this.#i.length)return this.#i[0];throw new Error("no first layout")}I6(t){return this.#f.get(t.toLowerCase())||null}P6(t){return this.#a.get(t)||null}A6(t){return t=om.Yn(Math.floor(t),0,this.#i.length-1),this.#i[t]}pB(t){return"number"==typeof t?this.A6(t):this.I6(t.toString())}gB(){return this.#i}_4(t){this.#e=t}uB(){return this.#e}E6(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}R6(t){const s=this.#t.indexOf(t);if(-1===s)throw new Error("layout not running");this.#t.splice(s,1)}*F6(){this.#e&&(yield this.#e),this.#t.length&&(yield*this.#t)}O6(t){return this.#e===t||this.#t.includes(t)}s6(t){if(t)this.#h++;else{if(this.#h<=0)throw new Error("already unset");this.#h--}}dV(){return this.#h>0}SB(t){this.#d=t}O4(){this.#d=null}wB(){return!!this.#d}D6(){return this.#d}k6(){const t=this.uB();t&&t.z5()}L6(){const t=this.uB();t&&t.H5()}}}{const am=self._s,lm=new RegExp("<(.+?)>","g");am.N6=class extends am.Vn{constructor(t){super(),this.Nc=t,this.B6=am.Un(am.W6),this.j6=null,this.V6=[],this.H6=new Map,this.U6=new Map,this.z6=new Map,this.J6=[],this.q6=[],this.X6=[],this.Y6=!1,this.K6=!1,this.Z6=!1,this.Q6=()=>this.t8(),this.s8=()=>this.i8(),this.e8=()=>this.n8(),this.r8=()=>this.h8(),this.o8=t=>this.a8(t.f$),this.l8=t=>this.u8(),this.c8=t=>this.f8(),this.d8=t=>this.p8(),this.m8=[],this.g8=0}zn(){this.y8(),this.Q6=null,this.s8=null,this.e8=null,this.r8=null,this.o8=null,this.c8=null;for(const t of this.V6)t.eq(),t.zn();am.Sh(this.V6),this.V6=null,this.B6.zn(),this.B6=null,am.Sh(this.J6),this.J6=null,am.Sh(this.q6),this.q6=null,am.Sh(this.X6),this.X6=null,this.H6.clear(),this.H6=null,this.U6.clear(),this.U6=null,this.z6.clear(),this.z6=null,am.Sh(this.m8),this.m8=null,this.Nc=null}w8(){const t=this.Nc.wf();t.addEventListener("pretick",this.Q6),t.addEventListener("tick2",this.s8),t.addEventListener("beforelayoutchange",this.e8),t.addEventListener("layoutchange",this.r8),t.addEventListener("instancedestroy",this.o8),t.addEventListener("beforeload",this.l8),t.addEventListener("afterload",this.c8),t.addEventListener("afterlayoutstart",this.d8)}y8(){const t=this.Nc.wf();t.removeEventListener("pretick",this.Q6),t.removeEventListener("tick2",this.s8),t.removeEventListener("beforelayoutchange",this.e8),t.removeEventListener("layoutchange",this.r8),t.removeEventListener("instancedestroy",this.o8),t.removeEventListener("beforeload",this.l8),t.removeEventListener("afterload",this.c8),t.removeEventListener("afterlayoutstart",this.d8)}UG(t){this.B6.Bu(t);const s=am.v8.S8(t,this);this.Bu(s),this.b8(s),this.z6.set(s.Pc(),0)}M8(t){const s=this.x8(),i=t.IU(),e=s.zs(i),n=am.v8.M8(`${i}:${this.z6.get(i)}`,e,this);return this.T8(i),this.Bu(n),n}T8(t){this.z6.set(t,this.z6.get(t)+1)}G8(){for(const t of this.V6){if(t._8())continue;const s=t.IU();this.T8(s)}}C8(){for(const t of this.z6.keys())this.z6.set(t,0)}Bu(t){this.V6.push(t),this.H6.set(t.Pc().toLowerCase(),t)}Kf(t){t.I8(),t._8()||(am._h(this.V6,t),am._h(this.J6,t),am._h(this.q6,t),am._h(this.X6,t),this.H6.delete(t.Pc().toLowerCase()),this.P8(t),t.sq()||t.zn())}$U(t){this.Nc.$U(t,this.j6,null)}aW(){return this.Nc}x8(){return this.B6}A8(t){this.j6=t}E8(){return this.j6}*F8(){for(const t of this.V6)yield t}*O8(){for(const t of this.q6)yield t}D8(t,s){this.U6.has(t)||this.U6.set(t,new Set),this.U6.get(t).add(s)}b8(t){for(const s of t.k8())this.D8(s,t)}P8(t){for(const[s,i]of this.U6.entries())i.has(t)&&(i.delete(t),0===i.size&&this.U6.delete(s))}L8(t){if(this.U6.has(t))return this.U6.get(t)}N8(t,s){if(s)for(const i of this.V6)if(s.every(t=>i.B8(t.f$,t.trackId))&&i.Pc().includes(t.Pc()))return i}W8(t){return this.H6.get(t.toLowerCase())||null}j8(t){for(const s of this.J6)if(s.Pc()===t)return s;for(const s of this.q6)if(s.Pc()===t)return s;return null}*V8(t){if(lm.test(t)){let s;lm.lastIndex=0;const i=new Set;do{if(s=lm.exec(t),s){const t=s[1].split(",");for(const s of t)i.add(s)}}while(s);for(const t of i.values()){const s=this.W8(t);s&&(yield s)}i.clear()}else{const s=this.W8(t);s&&(yield s)}}*H8(t){for(const s of this.V6)s.rq(t)&&(yield s)}U8(t){this.J6.includes(t)||this.J6.push(t),this.z8()}J8(t){am._h(this.q6,t),this.q8()}X8(t){this.q6.includes(t)?(t.Y8(!0),t.K8(!1),t.Z8(!1)):(t.Y8(!1),t.K8(!0),t.Z8(!1),this.J6.includes(t)||this.J6.push(t)),this.z8()}Q8(t){t.Y8(!1),t.K8(!1),t.t7(),am._h(this.J6,t),this.q8()}s7(t){t.Y8(!1),t.K8(!1),this.q6.includes(t)&&(t.Z8(!0),this.X6.push(t),am._h(this.q6,t)),this.J6.includes(t)&&t.Z8(!0)}i7(t){t.Y8(!1),t.K8(!1),t.Z8(!1),t.pq(1),am._h(this.q6,t)}e7(t){this.s7(t),t.t7()}t8(){const t=this.aW();if(t.L4())return;if(!this.Y6)return;if(this.K6)return;let s=0;for(t.sz()&&(s=performance.now()),this.Z6=!0;this.J6.length;){const t=this.J6.pop();t.n7()?(t.r7(),this.X6.push(t)):(t.h7(),this.q6.push(t)),0!==t.o7()&&(this.g8=1)}const i=this.Nc.a7(),e=this.Nc.l7(),n=this.Nc.WN();for(let t=this.q6.length-1;t>=0;t--){const s=this.q6[t];s&&s.u7(i,n,e)}this.Z6=!1,t.sz()&&globalThis.iz.c7(performance.now()-s),0!==this.g8&&t.VB()}i8(){const t=this.aW();if(t.L4())return;if(!this.Y6)return;if(this.K6)return;let s,i=0;t.sz()&&(i=performance.now());for(let t=0,i=this.X6.length;t<i;t++){const i=this.X6[t];s||(s=new Set),i.I8(),this.f7(i),s.add(i)}if(s){am.Ph(this.X6,s),this.g8=0;for(let t=0,s=this.q6.length;t<s;t++)if(0!==this.q6[t].o7()){this.g8=1;break}}this.q8(),t.sz()&&globalThis.iz.c7(performance.now()-i)}f7(t){t.sq()||t.d7()&&t.p7()&&t.m7()&&t.g7()}z8(){this.Y6||(this.Y6=!0)}q8(){this.X6.length||this.q6.length||this.J6.length||this.Z6||(this.Y6=!1)}n8(){for(this.K6=!0;this.J6.length;)this.Q8(this.J6.pop());const t=new Set;for(const s of this.q6)s.n8()&&(s.I8(),t.add(s));am.Ph(this.q6,t),t.clear();for(const s of this.X6)s.n8()&&(s.I8(),t.add(s));am.Ph(this.X6,t),this.q8();for(const t of this.V6)t.y7()}h8(){this.K6=!1}a8(t){const s=t.cU(),i=this.L8(s);if(i)if(this.Nc.L4())this.m8.push(t);else for(const t of i)t._8()||(t.sq()?this.Kf(t):t.d7()||(this.f7(t),this.Kf(t)))}u8(){for(const t of this.J6.map(t=>t))this.f7(t),this.Kf(t);for(const t of this.q6.map(t=>t))this.f7(t),this.Kf(t)}f8(){for(const t of this.m8)this.a8(t);am.Sh(this.m8);for(const t of this.V6)t.f8()}p8(){const t=this.Nc.dB().uB();if(t)for(const s of this.V6){const i=s.w7();i&&t.Pc()===i&&this.X8(s)}}i5(){return{timelinesJson:this.S7(),scheduledTimelinesJson:this.v7(),playingTimelinesJson:this.b7(),markedForRemovalTimelinesJson:this.M7(),hasRuntimeListeners:this.Y6,changingLayout:this.K6,isTickingTimelines:this.Z6}}e5(t){t&&(this.C8(),this.x7(t.timelinesJson),this.T7(t.scheduledTimelinesJson),this.G7(t.playingTimelinesJson),this._7(t.markedForRemovalTimelinesJson),this.Y6=!t.hasRuntimeListeners,this.K6=!!t.changingLayout,this.Z6=!!t.isTickingTimelines,this.G8(),this.z8(),this.q8())}S7(){return this.V6.map(t=>t.i5())}x7(t){for(const s of t){let t=this.W8(s.name);if(t)t.e5(s);else{const i=this.C7(s);if(!i)continue;const e=this.W8(i);t=this.M8(e),t.e5(s)}t.I7()||this.Kf(t)}}C7(t){const s=t.name.split(":");return s&&2===s.length?s[0]:null}v7(){return this.P7(this.J6)}T7(t){this.A7(t,this.J6)}b7(){return this.P7(this.q6)}G7(t){this.A7(t,this.q6)}M7(){return this.P7(this.X6)}_7(t){this.A7(t,this.X6)}E7(t,s){if(!s)return!1;for(const i of s)if(i===t.Pc())return!0;return!1}P7(t){return t.map(t=>t.Pc())}A7(t,s){const i=new Set;for(const e of s)this.E7(e,t)||i.add(e);if(am.Ph(s,i),t){const i=t=>s=>s.Pc()===t;for(const e of t){const t=this.W8(e);t&&(s.find(i(e))||s.push(t))}}}}}{const um=self._s,cm=[0,0],fm=[0,0],dm=[0,0],pm=[0,0,0,0,0],mm=new Array(4),gm=[{x:0,y:0,t:0,vt:0},{x:0,y:0,t:0,vt:0},{x:0,y:0,t:0,vt:0}],ym={x:0,y:0,t:0,vt:0};um.R7=class{constructor(t,s){this.F7=!1,this.O7=t,this.D7=[];let i=null;if(i=s?this.O7.k7(s):um.Bh(this.O7.L7()),!i)return;const e=i.Oq("offsetX"),n=i.Oq("offsetY");if(!e||!n)return;this.N7=e,this.B7=n;const r=e.W7(),h=n.W7();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const s=r[t],i=(s.j7(),s.V7()),e=h[t],n=(e.j7(),e.V7());i&&"cubic-bezier"===i.H7()&&n&&"cubic-bezier"===n.H7()?this.D7.push(um.Un(um.U7,i,n,s,e,this.D7.length)):(i&&"line"===i.H7()&&n&&n.H7(),this.D7.push(um.Un(um.z7,s,e,this.D7.length)))}this.F7=!0}zn(){for(const t of this.D7)t.zn();um.Sh(this.D7),this.D7=null,this.O7=null,this.N7=null,this.B7=null}J7(){return this.F7}q7(){return this.D7}X7(t){const s="relative"===this.N7.Y7()?t.qM():0,i="relative"===this.B7.Y7()?t.KM():0;for(const t of this.D7)t.X7(s,i)}Nw(t,s,i){let e=NaN,n=this.D7.length;for(let i=0;i<n;i++){const n=this.D7[i];if("cubic-bezier"===n.X_()){const i=n.Nw(t,s);(isNaN(e)||i[3]<e)&&(e=i[3],dm[0]=i[2],dm[1]=n.ML())}}return dm}K7(t,s,i){const e=i.Z7;um.Qi(e[0])||(e[0]=0),um.Qi(e[1])||(e[1]=1);let n=NaN,r=this.D7.length;for(let i=0;i<r;i++){const r=this.D7[i];if("cubic-bezier"===r.X_()){const i=r.Q7(t,s,e);(isNaN(n)||i[3]<n)&&(n=i[3],dm[0]=i[2],dm[1]=r.ML())}}return dm}t9(t,s){return this.D7[s].t9(t)}s9(t,s){return this.D7[s].s9(t)}},um.U7=class{constructor(t,s,i,e,n){this.Aw=n;const r=t.i9("cubic-bezier"),h=i.i9("cubic-bezier"),o=s.i9("cubic-bezier"),a=e.i9("cubic-bezier");this.e9=t.n9(),this.r9=s.n9(),this.h9=t.n9()+r.o9(),this.a9=s.n9()+o.o9(),this.l9=i.n9()+h.u9(),this.c9=e.n9()+a.u9(),this.f9=i.n9(),this.d9=e.n9(),this.p9=0,this.m9=0,this.g9=0,this.y9=0,this.w9=0,this.S9=0,this.v9=0,this.b9=0,this.M9=0,this.x9=0,this.T9=0,this.G9=0,this._9=0,this.C9=0,this.I9=0,this.P9=0,this.A9=0,this.E9=0,this.R9=0,this.F9=0,this.O9=NaN,this.F7=!1,this.D9=100,this.k9=new Array(this.D9+1),this.k9[0]=0,this.L9=0,this.N9=[],this.B9=[];for(let t=0;t<100;t++)this.B9.push({x:0,y:0,t:0,vt:0});this.W9()}zn(){um.Sh(this.k9),this.k9=null,um.Sh(this.N9),this.N9=null,um.Sh(this.B9),this.B9=null}X_(){return"cubic-bezier"}ML(){return this.Aw}j9(){return Math.floor(this.L9/25)}V9(){return 1/this.j9()}X7(t,s){this.H9=t,this.U9=s,this.k9=new Array(this.D9+1),this.k9[0]=0,this.W9(),this.p9=this.e9+this.H9,this.m9=this.r9+this.U9,this.g9=this.h9+this.H9,this.y9=this.a9+this.U9,this.w9=this.l9+this.H9,this.S9=this.c9+this.U9,this.v9=this.f9+this.H9,this.b9=this.d9+this.U9,this.M9=3*(this.g9-this.p9),this.x9=3*(this.y9-this.m9),this.T9=3*(this.w9-this.g9),this.G9=3*(this.S9-this.y9),this._9=3*(this.v9-this.w9),this.C9=3*(this.b9-this.S9),this.I9=3*(this.g9-this.p9),this.P9=3*(this.p9+this.w9-2*this.g9),this.A9=this.v9-this.p9+3*(this.g9-this.w9),this.E9=3*(this.y9-this.m9),this.R9=3*(this.m9+this.S9-2*this.y9),this.F9=this.b9-this.m9+3*(this.y9-this.S9)}Map(t){if(!this.F7)return NaN;const s=this.z9(t);return fm[0]=this.J9(s),fm[1]=this.q9(s),fm}Nw(t,s){const i=this.X9(100),e=this.Y9(t,s,i),n=this.K9(t,s,i,e);return pm[0]=n.x,pm[1]=n.y,pm[2]=n.t,pm[3]=n.vt,pm}Q7(t,s,i){const e=this.X9(100),n=this.Z9(t,s,e,i),r=this.K9(t,s,e,n);return pm[0]=r.x,pm[1]=r.y,pm[2]=r.t,pm[3]=r.vt,pm}t9(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.M9+e*this.T9+n*this._9,h=i*this.x9+e*this.G9+n*this.C9,o=um.tr(r,h);return cm[0]=r/o,cm[1]=h/o,cm}s9(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.M9+e*this.T9+n*this._9,h=i*this.x9+e*this.G9+n*this.C9;return Math.atan2(h,r)}z9(t){if(!this.F7)return;let s=t*this.k9[this.D9],i=0,e=this.D9,n=0;for(;i<e;)n=i+((e-i)/2|0),this.k9[n]<s?i=n+1:e=n;this.k9[n]>s&&n--;const r=this.k9[n];return r===s?n/this.D9:(n+(s-r)/(this.k9[n+1]-r))/this.D9}J9(t){return this.F7?self.Vu.rc("cubicbezier")(t,this.e9+this.H9,this.h9+this.H9,this.l9+this.H9,this.f9+this.H9):NaN}q9(t){return this.F7?self.Vu.rc("cubicbezier")(t,this.r9+this.U9,this.a9+this.U9,this.c9+this.U9,this.d9+this.U9):NaN}X9(t){if(t=t||100,this.N9.length>=t)return this.N9;this.N9=new Array(t),t++;for(let s=0;s<t-1;s++){const i=s/(t-1),e=i**2,n=i**3,r=this.I9*i,h=this.P9*e,o=this.A9*n,a=this.E9*i,l=this.R9*e,u=this.F9*n,c=this.p9+r+h+o,f=this.m9+a+l+u;this.B9[s].x=c,this.B9[s].y=f,this.B9[s].t=i,this.B9[s].vt=0,this.N9[s]=this.B9[s]}return this.N9}Y9(t,s,i,e=null,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.O9))for(let e=0;e<100;e++){const h=i[e],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=e)}else{for(let e=this.O9;e<this.O9+5&&!(e>=i.length);e++){const h=i[e],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=e)}for(let e=this.O9;e>this.O9-5&&!(e<0);e--){const h=i[e],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=e)}}return this.O9=r,r}Z9(t,s,i,e,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.O9))for(let h=0;h<100;h++){const o=i[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.vt<n&&(n=o.vt,r=h)}else{for(let h=this.O9;h<this.O9+5&&!(h>=i.length);h++){const o=i[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.vt<n&&(n=o.vt,r=h)}for(let h=this.O9;h>this.O9-5&&!(h<0);h--){const o=i[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.vt<n&&(n=o.vt,r=h)}}return this.O9=r,r}K9(t,s,i,e){let n=i[e],r=1,h=Number.MAX_SAFE_INTEGER;t:do{const r=i.length;let o=0===e?0:e-1,a=e===r-1?r-1:e+1,l=i[o].t,u=(i[a].t-l)/4;if(u<.001)break;mm[0]=i[o];for(let i=1;i<=2;i++){const r=l+i*u,o=r**2,a=r**3,c=this.I9*r,f=this.P9*o,d=this.A9*a,p=this.E9*r,m=this.R9*o,g=this.F9*a,y=this.p9+c+f+d,w=this.m9+p+m+g,S=y-t,v=w-s,b=S*S+v*v;if(b<h){h=b,e=i,ym.x=y,ym.y=w,ym.t=r,ym.vt=b,n=ym;break t}const M=gm[i-1];M.x=y,M.y=w,M.t=r,M.vt=b,mm[i]=M}mm[3]=i[a],i=mm}while(r++<20);return n}W9(){this.F7=!0;let t=this.J9(0),s=this.q9(0),i=0;for(let e=1;e<=this.D9;e++){const n=this.J9(.01*e),r=this.q9(.01*e),h=t-n,o=s-r;i+=um.tr(h,o),this.k9[e]=i,t=n,s=r}this.L9=i}},um.z7=class{constructor(t,s,i){this.Aw=i,this.Q9=t.n9(),this.ttt=s.n9(),this.H9=0,this.U9=0}zn(){}X_(){return"line"}ML(){return this.Aw}X7(t,s){this.H9=t,this.U9=s}qM(){return this.Q9+this.H9}KM(){return this.ttt+this.U9}}}{const wm=self._s;wm.v8=class extends wm.Vn{constructor(t,s,i){super(),this.Nc=i.aW(),this.stt=i,this.itt=s,this.qn=t,this.ett=[],this.ntt=0,this.htt=null,this.ott=0,this.att(),this.ltt=null,this.utt=null,this.ctt=0,this.ftt=0,this.dtt=1,this.ptt=0,this.mtt=-1,this.gtt=1,this.ytt=!1,this.wtt=!1,this.Stt=!1,this.vtt=!0,this.btt=!1,this.Mtt=!1,this.xtt=-1,this.Ttt=!1,this.Gtt=!1,this._tt=!1,this.Ctt=!1,this.Itt=NaN,this.Ptt=[""],this.Att="",this.Ett=!1,this.g8=0,this.Rtt=0,this.Ftt=null,this.Ott=null}static S8(t,s){const i=s.x8(),e=i.Dtt(),n=i.zs(t[e]),r=wm.Un(wm.v8,t[e],n,s);return r.ktt(!0),r}static M8(t,s,i){return wm.Un(wm.v8,t,s,i)}zn(){if(this.sq())return;const t=this.Nc.wf();this.stt.Q8(this),this.stt.e7(this);for(const t of this.ett)t.zn();wm.Sh(this.ett),this.ett=null,this.Nc=null,this.stt=null,this.itt=null,this.btt=!0,this.ltt=null,this.utt=null,this.Ltt(t)}Ltt(t){const s=wm.Un(wm.Event,"timelinestatereleased");s.Ntt=this,t.dispatchEvent(s)}X_(){return 0}att(){for(const t of this.itt.Wtt().Btt())this.ntt=this.ett.push(wm.jtt.UG(this,t))}Vtt(){return this.stt}aW(){return this.Nc}L7(){return this.ett}Htt(t,s,i,e){if(!this.Rtt)return;let n;for(let r=0;r<this.ett.length;r++){let h=this.ett[r];if(t!==h.Iq())continue;const o=h.Oq(i);o&&s.constructor===o.Utt().constructor&&o.Y7()===e.Y7()&&(n||(n=[]),n.push(o))}return n}I7(){return!!this.ett.length}k7(t){for(const s of this.ett)if(wm.Ke(s.Rq(),t))return s;return null}ztt(t){for(const s of this.ett)if(!s.Jtt()&&wm.Ke(s.Pc(),t))return s;return null}eY(t){this.qn=t}Pc(){return this.qn}$tt(){return this.itt}IU(){return this.itt.Pc()}aq(){return this.itt.aq()}oq(t){this.itt.oq(t)}qtt(){return this.itt.qtt()}Xtt(t){this.itt.Xtt(t)}Ytt(){return this.itt.Ytt()}Ktt(t){this.itt.Ktt(t)}Y7(){return this.itt.Y7()}Ztt(t){this.itt.Y7(t)}Cq(t){for(const s of this.L7())s.Cq(t)}uq(){return this.itt.uq()}lq(t){return this.itt.lq(t)}fq(){return this.itt.fq()}cq(t){return this.itt.cq(t)}C$(){return this.itt.C$()}Qtt(t){return this.itt.Qtt(t)}pq(t){return this.dtt=t}mq(){return this.dtt}w7(){return this.itt.w7()}tst(){return this.itt.tst()}sst(){return this.itt.sst()}ist(){return this.ptt}est(){return!this.IsPlaying()||this.dtt>0}yq(){return this.ltt||(this.ltt=new Promise(t=>{this.utt=t})),this.ltt}t7(){this.ltt&&(this.utt(),this.ltt=null,this.utt=null)}nst(t){this.Ptt=wm.v8.rst(t),this.Ett=!0}gq(){return this.Ptt}hst(){return this.Ett&&(this.Att=this.Ptt.join(" ")),this.Ett=!1,this.Att}rq(t){if(!this.Ptt)return!1;if(!this.Ptt.length)return!1;const s=wm.v8.rst(t);return!!s&&!!s.length&&s.every(wm.v8.ost,this)}ast(){wm.sW.lst&&this.constructor===wm.v8&&(wm.sW.lst.QB.ust(this),this.stt.$U(wm.sW.lst.QB.cst),this.stt.$U(wm.sW.lst.QB.fst),this.stt.$U(wm.sW.lst.QB.dst),this.stt.$U(wm.sW.lst.QB.pst),wm.sW.lst.QB.mst())}gst(){this.xtt=this.Nc.kN()}g7(){this._tt||(this._tt=!0,wm.sW.lst&&this.constructor===wm.v8&&(wm.sW.lst.QB.ust(this),this.stt.$U(wm.sW.lst.QB.yst),this.stt.$U(wm.sW.lst.QB.wst),this.stt.$U(wm.sW.lst.QB.Sst),this.stt.$U(wm.sW.lst.QB.vst),wm.sW.lst.QB.mst()))}Y8(t){this.ytt=t}bst(){return this.xtt===this.Nc.kN()}IsPlaying(t=!1){return!!this.bst()||!(!this.Mst()||t)||this.ytt}xst(){return this.IsPlaying(!0)}vq(){return this.Tst()}Tst(){return!(this.sq()||this.Mst()||this.xst()||this.p7())}K8(t){this.wtt=t}Mst(){return this.wtt}Gst(t){this.vtt=t;const s=this.uq(),i=this.fq();if(s||i){if(s&&!i);else if(!s&&i){const t=this.qO();1===this.ptt&&(t<=0||t>=this.aq())&&(this.vtt=!0)}}else{const t=this.qO();(t<=0||t>=this.aq())&&(this.vtt=!0)}}p7(){return this.vtt}sq(){return this.btt}Z8(t){this.Mtt=t}n7(){return this.Mtt}_st(t){this.Ttt=t}Cst(){return this.Ttt}ktt(t){this.Gtt=!!t}_8(){return this.Gtt}m7(){return this.Stt}qO(){return this.ctt}hq(t){const s=this.qO();this.Ist(t),this.Gst(!1),this.p7()||this._st(!0),(this.xst()||this.Mst()||!this.Stt)&&(this.xst()||this.Mst()||this.Stt?this.xst()?this.eq():this.Mst()&&(this.stt.Q8(this),this.Pst()):this.Pst()),this.Ast(),this.Est(this.qO(),!1,!0,!0,s),this.Rst(),this.g8&&this.aW().VB(),this.Fst()}Ist(t){wm.Qi(t)||(t=this.aq()),t<0?this.ctt=0:t>=this.aq()?this.ctt=this.aq():this.ctt=t}Ost(t){wm.Qi(t)||(t=this.aq()),t<0?this.ctt=0:t>=this.aq()?this.ctt=this.aq():this.ctt=t;for(const t of this.ett)t.Dst()}Fst(){wm.sW.lst&&this.constructor===wm.v8&&(wm.sW.lst.QB.ust(this),this.stt.$U(wm.sW.lst.QB.kst),this.stt.$U(wm.sW.lst.QB.Lst),this.stt.$U(wm.sW.lst.QB.Nst),wm.sW.lst.QB.mst())}Bst(){if(this.uq())return!0;if(this.fq()&&1===this.ptt){if(this.est()){if(this.qO()>=this.aq())return!1}else if(this.qO()<=0)return!1}else if(!this.uq()&&!this.fq())if(this.est()){if(this.qO()>=this.aq())return!1}else if(this.qO()<=0)return!1;return!0}nq(){this.sq()||this.Bst()&&this.Play(!0)}Play(t=!1){return!this.sq()&&!this.Mst()&&(this.xst()&&this.bst()?this.Wst():!this.xst()&&!!(this.p7()||t||this.Cst())&&this.jst())}Wst(){return this._st(!1),this.stt.J8(this),this.stt.X8(this),this.yq(),!0}jst(){return this._st(!1),this.stt.X8(this),this.yq(),!0}eq(t=!1){this.sq()||(this.Gst(t),this.stt.s7(this),this.p7()&&this.t7())}Bf(t=!0,s=!1){if(this.sq())return;if(!this.xst()&&this.Mst())return this.stt.Q8(this);if(this.p7())return;this.eq(!0),this.est()?this.Ist(0):this.Ist(this.aq());const i=this.qO();this.Ast(),s?this.Vst(i):this.Est(i,!1,!1,!0),t&&this.Fst(),this.Rst(),this.g8&&t&&this.aW().VB()}Hst(){this.Bf(!1,!0)}Vst(t){this.Est(t,!1,!1,!0,NaN,!1,!0)}n8(){return!!this.sq()||!(!this.aW().L4()&&this.Ust())&&(this.stt.i7(this),this.aW().L4()||this.Hst(),!0)}Pst(){this.h7(!0)}r7(){this.h7(!1,!0),this.Y8(!1),this.K8(!1)}h7(t=!1,s=!1){if(!this.n7()||s)if(t){this._tt=!1,this.Stt=!0,this.Ctt=!0,this.Ast();for(const t of this.ett)t.h7();this.Rst()}else if(this.Y8(!0),this.K8(!1),this.ast(),this.p7()){this.xtt=-1,0!==this.ptt&&(this.dtt=Math.abs(this.dtt)),this.ptt=0,this.mtt=-1,this.gtt=1,this.vtt=!1,this._tt=!1,this.Stt=!0,this.Ctt=!0,this.est()?this.Ist(0):this.Ist(this.aq()),this.Ast();for(const t of this.ett)t.h7();this.Rst()}else{-1!==this.mtt&&(this.ptt=this.mtt),this.Ctt=!0,this._tt=!1,this.Ast();for(const t of this.ett)t.zst();this.Rst()}}o7(){return this.g8}Ast(){this.Rtt=0;for(const t of this.ett)t.kE()&&(this.Rtt=1)}Rst(){this.g8=0;for(const t of this.ett)t.Jst(),0===this.g8&&1===t.o7()&&(this.g8=1),this.htt||1!==t.$st()||(this.htt||(this.htt=[]),this.ott=this.htt.push(t))}u7(t,s,i){if(this.sst()){if(0===t&&0===this.Itt)return;this.Itt=t,t=i}else{if(0===i&&0===this.Itt)return;this.Itt=i,t=i,s=1}const e=this.ctt+this.ftt,n=e+t*s*this.dtt,r=this.itt.qst;n<0?(this.ctt=0,this.ftt=-n):n>=r?(this.ctt=r,this.ftt=this.ctt-n):(this.ctt=n,this.ftt=0);let h=!1,o=!1;const a=this.uq(),l=this.fq();let u;a||l?a&&!l?this.dtt>0?this.ctt>=r&&(this.Ost(0),o=!0):this.ctt<=0&&(this.Ost(r),o=!0):!a&&l?this.dtt>0?this.ctt>=r&&(this.Ist(r),this.pq(-1*this.mq()),o=!0,1===this.ptt?this.gtt<this.C$()?(this.gtt++,this.ptt=0):h=!0:0===this.ptt&&(this.ptt=1)):this.ctt<=0&&(this.Ist(0),this.pq(-1*this.mq()),o=!0,1===this.ptt?this.gtt<this.C$()?(this.gtt++,this.ptt=0):h=!0:0===this.ptt&&(this.ptt=1)):a&&l&&(this.dtt>0?this.ctt>=r&&(this.Ist(r),this.pq(-1*this.mq()),o=!0,this.ptt++,wm.wrap(this.ptt,0,2)):this.ctt<=0&&(this.Ist(0),this.pq(-1*this.mq()),o=!0,this.ptt++,wm.wrap(this.ptt,0,2))):this.dtt>0?this.ctt>=r&&(this.gtt<this.C$()?(this.gtt++,this.Ost(0),o=!0):(this.Ist(r),h=!0)):this.ctt<=0&&(this.gtt<this.C$()?(this.gtt++,this.Ost(r),o=!0):(this.Ist(0),h=!0));const c=this.ntt;if(h){for(u=0;u<c;u++)this.ett[u].Xst();return this.eq(!0),void this.gst()}const f=this.ott;for(u=0;u<f;u++)this.htt[u].Yst();if(1===this.Rtt)for(u=0;u<c;u++){const t=this.ett[u],s=t.Kst();this.ctt-s<0&&e-s>0?(this.ctt=s<0?0:s>=r?r:s,t.Sc(s,!0,!1,o,this.Ctt,!1)):t.Sc(this.ctt,!0,!1,o,this.Ctt,!1)}else for(u=0;u<c;u++)this.ett[u].Sc(this.ctt,!0,!1,o,this.Ctt,!1);if(!this.IsPlaying()&&this.Ftt){const t=this.Ftt.qO()+this.Ftt.Qst().Zst().Kst(),s=this.ctt-t;this.ctt-=s,0!==this.ftt&&(this.ftt-=s),this.Ftt=null}for(u=0;u<f;u++)this.htt[u].tit();this.Ctt&&(this.Ctt=!1)}sit(t){this.Ftt=t}iit(){return this.Ftt}Est(t,s=!1,i=!1,e=!1,n=NaN,r=!1,h=!1){for(const t of this.ett)t.Yst();for(const r of this.ett){let o=t;if("number"==typeof n&&!isNaN(n)){const t=this.qO()-r.Kst(),s=n-r.Kst();t<0&&s>0&&(o=r.Kst(),this.Ist(o))}r.Sc(o,s,i,e,this.Ctt,h)}for(const t of this.ett)t.tit();this.Ctt&&r&&(this.Ctt=!1)}eit(){const t=this.itt.Wtt().nit(),s=wm.jtt.UG(this,t);return this.ntt=this.ett.push(s),s}I8(){if(!this.sq())for(const t of this.ett)t.rit()}y7(){for(const t of this.ett)t.y7()}hit(){for(const t of this.ett)t.oit()}ait(t,s,i){if(s){if("number"==typeof i&&i>=0){const t=this.ett[i];if(!t)return;return t.lit(s),void this.stt.D8(s.cU(),this)}for(const i of this.ett)if(i.Jtt()){if(t){if(i.Rq()!==t)continue;i.lit(s),this.stt.D8(s.cU(),this);break}if(!i.uit()){i.lit(s),this.stt.D8(s.cU(),this);break}}}}B8(t,s){for(const i of this.ett)if(i.Jtt())if(s){if(s===i.Rq()&&t===i.Iq())return!0}else if(t===i.Iq())return!0;return!1}d7(){return this.ett.some(t=>!t.Jtt()||t.cit())}Ust(){return this.ett.some(t=>{if(t.Jtt()){if(!t.cit())return!1;const s=t.cU();return!!s&&s.WQ()}return!1})}Oq(t){for(const s of this.L7())for(const i of s.fit())if(i.dit()===t)return i}pit(t){for(const s of this.ett)if(t===s.Iq())return s;return null}mit(t){let s=t?t.split(" "):[];const i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const t of this.L7())for(const i of t.git())if(s.every(t=>i.yit(t)))return i}k8(){const t=[];for(const s of this.L7())t.push(s.cU());return t.filter(t=>t)}f8(){for(const t of this.L7())t.f8()}i5(){return{tracksJson:this.wit(),name:this.qn,playheadTime:this.qO(),playbackRate:this.dtt,pingPongState:this.ptt,resumePingPongState:this.mtt,currentRepeatCount:this.gtt,isPlaying:this.ytt,isScheduled:this.wtt,initialStateSet:this.Stt,finishedTriggers:this._tt,complete:this.vtt,released:this.btt,markedForRemoval:this.Mtt,completedTick:this.xtt,implicitPause:this.Ttt,isTemplate:this.Gtt,tags:this.Ptt.join(" "),stringTags:this.Att,tagsChanged:this.Ett,firstTick:this.Ctt}}e5(t){t&&(this.Sit(t.tracksJson),this.qn=t.name,this.ctt=t.playheadTime,this.dtt=t.playbackRate,this.ptt=t.pingPongState,this.mtt=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this.gtt=t.currentRepeatCount,this.ytt=!!t.isPlaying,this.wtt=!!t.isScheduled,this.Stt=!!t.initialStateSet,this._tt=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.vtt=!!t.complete,this.btt=!!t.released,this.Mtt=!!t.markedForRemoval,this.xtt=t.completedTick,this.Ttt=!!t.implicitPause,this.Gtt=!!t.isTemplate,this.Ptt=t.tags.split(" "),this.Att=t.stringTags,this.Ett=!!t.tagsChanged,this.Ctt=!!t.firstTick)}wit(){return this.ett.map(t=>t.i5())}Sit(t){this.hit(),t.forEach((t,s)=>{this.ett[s].e5(t)}),this.ett.filter(t=>t.cit())}static ost(t){const s=this.gq();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static rst(t){if(wm.xe(t))return t.slice(0);if(wm.ae(t))return t.split(" ");throw new Error("invalid tags")}vit(){return this.Ott||(this.Ott=wm.Un(self.Mq,this)),this.Ott}}}{const Sm=self._s;Sm.jtt=class extends Sm.Vn{constructor(t,s){super(),this.O7=t,this.bit=s,this.Mit=s.Wtt(),this.xit=NaN,this.Tit=NaN,this.Git=null,this._it=null,this.Cit=!1,this.AE=s.Kst()>0,this.Iit=!1,this.Pit=!1,this.Ait=NaN,this.Eit=null,this.Rit=this.bit.Qst().Fit(),this.Oit=[],this.Dit(),this.kit=0,this.g8=0,this.Lit=0}static UG(t,s){return Sm.Un(Sm.jtt,t,s)}zn(){this.Rit=null;for(const t of this.Oit)t.zn();Sm.Sh(this.Oit),this.Oit=null,this.O7=null,this.Git=null,this._it=null,this.bit=null,this.Eit=null}Dit(){for(const t of this.bit.Bit().Nit())this.Oit.push(Sm.Wit.UG(this,t))}rit(){for(const t of this.Oit)t.rit()}y7(){for(const t of this.Oit)t.y7();this.Git=null,this._it=null}jit(){return this.O7}aW(){return this.O7.aW()}git(){return this.Rit||(this.Rit=this.bit.Qst().Fit()),this.Rit}fit(){return this.Oit}Oq(t){for(let s=0;s<this.Oit.length;s++){const i=this.Oit[s];if(i.dit()===t)return i}}Vit(){this.Git||this.Iq()}Hit(){return!!this.Git&&!this.Git.wX()}cit(){if(!this.Jtt())return!1;const t=this.Uit(),s=this.aW().PB(t);return!!s&&!s.wX()}cU(){if(!this.Jtt())return;const t=this.zit();return-1!==t?this.aW().$0(t):void 0}Jit(){return this.O7.L7().indexOf(this)}oit(){this.Git=null,this.xit=NaN,this._it=null,this.Tit=NaN,this.Cit=!0}uit(){return!!this.Git}Iq(){if(this.Cit)return;if(this.Git&&this.Hit())return this.Git;const t=this.Uit();return this.Git=this.aW().PB(t),this.Git}lit(t){if(this.Cit=!1,this.Git!==t){this.y7(),this.Git=t,this.Tit=t.cU().ML(),this.xit=t.TU(),this._it=t.DB();for(const s of this.$it()){const i=s.qit,e=s.Xit;switch(i.Yit()){case"instance-variable":{e.Kit();const i=t.cU(),n=i.Zit(s.name),r=i.Qit(n),h=i.tet(n);r===s.name&&h===s.type&&e.iet(n);break}case"behavior":{const i=s.l$,n=this.cU(),r=t.cU(),h=e.c$(r);if(i&&h){const t=i.Pc();n.eet(t),r.eet(t),e.Kit(),e.net(h.C1())}break}}}}}*$it(){for(const t of this.Oit){const s=t.Utt(),i=this.cU(),e={qit:t,Xit:s};switch(t.Yit()){case"world-instance":e.ret=t.dit();break;case"instance-variable":{const t=s.Kit();e.name=i.Qit(t),e.type=i.tet(t);break}case"effect":{const t=i._V(),n=s.het(t);e.oet=n;break}case"behavior":{const t=s.c$(i);e.l$=t;break}case"plugin":e.Uj=i.zj()}yield e}}DB(){if(this._it&&this.Hit())return this._it;const t=this.Iq();return t&&(this._it=t.DB()),this._it}Zst(){return this.bit}Uit(){return isNaN(this.xit)?this.bit.Uit():this.xit}aet(t){this.bit.aet(t)}Ytt(){return this.bit.Ytt()}Ktt(t){this.bit.Ktt(t)}Y7(){return this.bit.Y7()}Rq(){return this.bit.Rq()}Kst(){return this.bit.Kst()}let(){return this.bit.let()}uet(t){this.bit.uet(t)}Ztt(t){this.bit.Ztt(t)}Cq(t){for(const s of this.git())s.Cq(t);for(const s of this.fit())s.Cq(t)}cet(){return this.bit.cet()}fet(t){this.bit.fet(t)}zit(){return isNaN(this.Tit)?this.bit.zit():this.Tit}det(t){this.bit.det(t)}pet(t){this.bit.pet(t)}met(){const t=this.Iq();return t&&t.s$().yet()?t.s$().met():this.bit.met()}wet(t){this.bit.wet(t)}vet(){const t=this.Iq();return t&&t.s$().yet()?t.s$().vet():this.bit.vet()}X_(){return this.bit.X_()}Pc(){return this.bit.Pc()}Jtt(){return 0===this.X_()}bet(){return 1===this.X_()}Met(){return 2===this.X_()}xet(){return this.kit}o7(){return this.g8}$st(){return this.Lit}kE(){return this.AE}Dst(){for(const t of this.Oit)t.Dst()}h7(){if(this.Vit(),!this.Hit()&&this.Jtt())return;const t=this.jit().est(),s=t?0:this.let();for(const t of this.Oit)t.h7(s),0===this.kit&&1===t.xet()&&(this.kit=1),0===this.g8&&1===t.o7()&&(this.g8=1);this.Lit=0,this.Oit.some(t=>t.$st())&&(this.Lit=1),this.Eit=t?this.Tet(s):this.Get(s),this.Iit=!1,this.Pit=!1,this.Sc(s),this._et(this.Eit)}zst(){if(this.Vit(),!this.Hit()&&this.Jtt())return;const t=this.O7.est(),s=this.O7.qO()-this.Kst();this.Eit=t?this.Tet(s):this.Get(s);for(const t of this.Oit)t.zst(s)}Xst(){if(!this.jit().p7()&&(this.Vit(),(this.Hit()||!this.Jtt())&&!this.AE)){const t=this.O7.qO();t>=this.Kst()+this.let()?this.Sc(this.let(),!0,!1,!0,!1,!1,!0):t<=0&&this.Sc(0,!0,!1,!0,!1,!1,!0)}}Jst(){for(let t=0,s=this.Oit.length;t<s;t++){const s=this.Oit[t];s.Jst(),0===this.kit&&1===s.xet()&&(this.kit=1),0===this.g8&&1===s.o7()&&(this.g8=1)}}Yst(){const t=this.Oit.length;for(let s=0;s<t;s++)this.Oit[s].Yst()}Sc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){this.Git||this.Iq();const o=this.Git&&!this.Git.wX(),a=0===this.bit.Jc;if((o||!a)&&!(r&&a&&this.cU().WQ()||(t-=this.Kst())<0)){this.Cet(t,s),this.Iet(t,s,n),!this.jit().IsPlaying()&&this.jit().iit()&&(t=this.jit().iit().qO());for(let s=0,n=this.Oit.length;s<n;s++)this.Oit[s].Sc(t,i,e,h);this.Pet(t,s),0!==this.kit&&(this._it||(this._it=this.Git.DB()),this._it&&this._it.Mz())}}tit(){const t=this.Oit.length;for(let s=0;s<t;s++)this.Oit[s].tit()}Cet(t,s){if(s&&this.AE&&!this.Iit){if(this.jit().est()){if(t<0)return}else if(t>this.let())return;for(const t of this.Oit)t.h7();this.Iit=!0}}Pet(t,s){if(s&&this.AE&&!this.Pit)if(this.jit().est()){if(t>=this.let()){for(const t of this.Oit)t.Sc(this.let(),!1,!0);this.Pit=!0}}else if(t<=0){for(const t of this.Oit)t.Sc(0,!1,!0);this.Pit=!0}}Iet(t,s,i){if(i)return;if(!s)return;if(!Sm.sW.lst)return;const e=this.jit();if(e.est()){const s=this.Eit.j7(),i=this.Eit.qO(),n=s?s.qO():e.aq();(t<=i||t>=n)&&(this.Eit=this.Mit.Aet(t,this.bit),s&&this.Eet(this.Eit))}else{if(!this.Mit.Ret(t,this.bit))return;this.Eit||(this.Eit=this.Mit.Ret(t,this.bit));const s=this.Eit.Fet(),i=this.Eit.qO(),e=s?s.qO():0;(t>=i||t<=e)&&(this.Eit=this.Mit.Ret(t,this.bit),this.Eit&&this.Eet(this.Eit))}}Tet(t){return this.Mit.Oet(t,this.bit)||this.Mit.Aet(t,this.bit)}Get(t){return this.Mit.Oet(t,this.bit)||this.Mit.Ret(t,this.bit)}Eet(t,s=!1){if(!Sm.sW.lst)return;const i=this.jit(),e=i.Vtt();Sm.sW.lst.QB.ust(i),Sm.sW.lst.QB.Det(t),e.$U(Sm.sW.lst.QB.ket),e.$U(Sm.sW.lst.QB.Eet),i.IsPlaying()||s||i.sit(t),Sm.sW.lst.QB.mst(i),Sm.sW.lst.QB.Let(t)}_et(t){this.Eet(t,!0)}Net(){return this.bit.Qst().Bet()}Wet(){const t=this.bit.Bit().jet(),s=Sm.Wit.UG(this,t);return this.Oit.push(s),s}Vet(t){this.bit.Qst().Het(t)}Uet(t){for(const s of this.Oit)s.Uet(t)}zet(){for(const t of this.Oit)t.zet()}Jet(){if(this.Vit(),this.Hit()||!this.Jtt())for(const t of this.Oit)t.Jet()}$et(){if(this.Vit(),!this.Hit()&&this.Jtt())return;let t=!1;for(const s of this.Oit){const i=s.$et();!t&&i&&(t=!0)}if(t){const t=this.Net();t.hq(this.jit().qO()),t.Cq("noease"),t.fet(!0),t.nst("")}}f8(){isNaN(this.Ait)||this.qet(this.Ait),this.Ait=NaN}i5(){const t=this.Iq(),s=t?t.TU():this.Uit();return{propertyTracksJson:this.Xet(),lastKeyframeDataItemJson:this.Yet(),initialStateOfNestedSet:this.Iit,endStateOfNestedSet:this.Pit,instanceUid:s,cleared:this.Cit}}e5(t){if(t){this.Ket(t.propertyTracksJson),this.Zet(t.lastKeyframeDataItemJson),this.Ait=t.instanceUid,this.Iit=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Iit=t.initialStateOfNestedSet),this.Pit=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Pit=t.endStateOfNestedSet),this.Cit=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.Oit)0===this.kit&&1===t.xet()&&(this.kit=1),0===this.g8&&1===t.o7()&&(this.g8=1);this.Lit=0,this.Oit.some(t=>t.$st())&&(this.Lit=1)}}Yet(){return this.bit.Qst().Qet(this.Eit)}Xet(){return this.Oit.map(t=>t.i5())}Ket(t){t.forEach((t,s)=>{this.Oit[s].e5(t)})}qet(t){if(!Sm.Qi(t))return;const s=this.aW().PB(t);s&&this.jit().ait(this.bit.Rq(),s,this.Jit())}Zet(t){const s=this.bit.Qst();this.Eit=s.tnt(t)}}}{const vm=self._s;vm.Wit=class extends vm.Vn{constructor(t,s){super(),this.snt=t,this.int=s,this.ent=s.Bit(),this.kit=0,this.g8=0,this.Lit=0,this.nnt=this.Utt(),this.rnt=this.int.ont().hnt(),this.ant=null,this.lnt=null}static UG(t,s){return vm.Un(vm.Wit,t,s)}zn(){this.snt=null,this.nnt&&(this.nnt.zn(),this.nnt=null),this.rnt=null,this.int=null,this.ent=null}xet(){return this.kit}o7(){return this.g8}$st(){return this.Lit}unt(){return!!this.lnt}cnt(t){this.lnt=t}fnt(){return this.lnt}dnt(){return this.snt}pnt(){return this.int}Bit(){return this.ent}jit(){return this.snt.jit()}aW(){return this.snt.aW()}Iq(){return this.snt.Iq()}Utt(){if(this.nnt)return this.nnt;let t;switch(this.int.Yit()){case"behavior":t=new vm.Wit.mnt(this);break;case"effect":t=new vm.Wit.gnt(this),this.g8=1;break;case"instance-variable":t=new vm.Wit.ynt(this);break;case"plugin":t=new vm.Wit.wnt(this),this.g8=1;break;case"world-instance":t=new vm.Wit.Snt(this),this.g8=1,this.kit=1;break;case"value":t=new vm.Wit.vnt(this);break;case"audio":t=new vm.Wit.bnt(this)}return this.nnt=t,this.nnt}Yit(){return this.int.Yit()}Mnt(t){this.int.Mnt(t)}xnt(){return this.int.Tnt()}Gnt(t){this.int._nt(t)}Fq(){return this.Utt().Cnt()}dit(){return this.int.Int()}Pnt(t){this.int.Ant(t)}Ent(){return this.int.X_()}Rnt(t){this.int.Fnt(t)}Ont(){return this.Bit().Dnt(this.int).X_()}knt(){return this.int.knt()}Lnt(t){this.int.Lnt(t)}Nnt(){return this.int.Nnt()}Bnt(t){this.int.Bnt(t)}cet(){return this.int.cet()}fet(t){this.int.fet(t)}Ytt(){return this.int.Ytt()}Ktt(t){this.int.Ktt(t)}Y7(){return this.int.Y7()}Ztt(t){this.int.Ztt(t)}Cq(t){for(const s of this.Wnt())s.Cq(t)}jnt(){return this.int.jnt()}Wnt(){return this.rnt||(this.rnt=this.int.ont().hnt()),this.rnt}W7(){return this.int.ont().W7()}Vnt(t){return this.ent.Vnt(t,this.int)}Hnt(t){return this.ent.Hnt(t,this.int)}Unt(t){let s,i=this.ent.Vnt(t,this.int);return i?s=this.ent.znt(t,this.int):(i=this.ent.Hnt(t,this.int),s=this.ent.Jnt(t,this.int)),{start:i,end:s}}*$nt(){for(const t of this.Wnt())yield t.n9()}*qnt(){for(const t of this.Wnt())yield t.qO()}rit(){this.Utt().rit()}y7(){this.Utt().y7()}Xnt(){return this.Utt().Xnt()}Dst(){this.Utt().Dst()}h7(t){this.Utt().h7(),this.ant=this.Ynt(t),this.Jst()}zst(t){this.Utt().zst(),this.ant=this.Ynt(t)}Jst(){const t=this.dnt();if(this.Lit=0,t.Jtt()){const s=this.jit(),i=t.Iq(),e=this.Utt(),n=this.dit();if(e.Knt()){const t=s.Htt(i,e,n,this);t&&t.length&&(this.Lit=1)}else this.Lit=0}}Ynt(t){const s=this.jit();return this.ent.Vnt(t,this.int)||(s.est()?this.ent.Hnt(t,this.int):this.ent.Jnt(t,this.int))}Yst(){this.nnt.Yst()}Sc(t,s=!1,i=!1,e=!1){let n,r,h=!1;if(s)n=this.ent.Hnt(t,this.int);else{if(this.ant){const s=this.jit(),i=this.ant.j7(),e=this.ant.qO(),n=i?i.qO():s.aq();(t<=e||t>=n)&&(this.ant=this.ent.Hnt(t,this.int),h=!0)}else this.ant=this.ent.Hnt(t,this.int),h=!0;n=this.ant}n&&(r=n.j7()),this.nnt.Sc(t,n,r,s,i,e,h)}Znt(t){if(this.ant){const s=this.jit(),i=this.ant.j7(),e=this.ant.qO(),n=i?i.qO():s.aq();(t<=e||t>=n)&&(this.ant=this.ent.Hnt(t,this.int))}else this.ant=this.ent.Hnt(t,this.int);const s=this.ant,i=s.j7();return this.nnt.Znt(t,s,i)}Qnt(t,s,i){return this.nnt.Znt(t,s,i)}tit(){this.nnt.tit()}static trt(t,s){const i=s.pnt();return s.ent.Hnt(t,i)}static srt(t,s){const i=s.pnt();return s.ent.Jnt(t,i)}irt(){const t=this.int.ont().ert();return this.ant=null,t}Uet(t){this.ant=null,this.int.ont().nrt(t)}zet(){this.Utt().zet()}Jet(){if(this.Utt().Jet()){const t=this.ent.Dnt(this.int),s=this.Utt().Xnt();t.rrt(s)}}$et(){const t=this.Utt().$et();return t&&this.hrt(),this.Utt().ort(),t}hrt(){const t=this.jit().qO(),s=this.Utt(),i=vm.Wit.trt(t,this),e=this.irt();e.Fnt(i.X_()),e.hq(t),e.Cq(i.art()),e.fet(!0),e.lrt(s.urt()),e.rrt(s.Xnt())}i5(){return{sourceAdapterJson:this.Utt().i5()}}e5(t){t&&this.Utt().e5(t.sourceAdapterJson)}}}{const bm=self._s.Wit;bm.Snt=class{constructor(t){this.crt=t,this.frt=null,this.drt()}zn(){this.frt&&(this.frt.zn(),this.frt=null),this.crt=null}Knt(){return this.frt.Knt()}Oq(){return this.crt}rit(){this.frt&&this.frt.rit()}y7(){this.frt&&this.frt.y7()}drt(){return this.frt||(this.frt=this.prt()),this.frt}Kit(){}ML(){return this.Kit()}mrt(){}Dst(){this.drt().Dst()}h7(){this.drt().h7()}zst(){this.drt().zst()}Yst(){this.frt.grt()}Sc(t,s,i,e,n,r,h){let o;switch(this.crt.Ont()){case"numeric":o=bm.yrt.Sc(t,s,i,this.crt);break;case"angle":o=bm.wrt.Sc(t,s,i,this.crt);break;case"boolean":o=bm.Srt.Sc(t,s,i,this.crt);break;case"color":o=bm.vrt.Sc(t,s,i,this.crt);break;case"text":o=bm.brt.Sc(t,s,i,this.crt)}this.frt.Mrt(t,o,s,i,e,n,r,h)}Znt(t,s,i){switch(this.crt.Ont()){case"numeric":return bm.yrt.Sc(t,s,i,this.crt);case"angle":return bm.wrt.Sc(t,s,i,this.crt);case"boolean":return bm.Srt.Sc(t,s,i,this.crt);case"color":return bm.vrt.Sc(t,s,i,this.crt);case"text":return bm.brt.Sc(t,s,i,this.crt)}}tit(){this.frt.xrt()}zet(){this.drt().Trt()}ort(){this.drt().ort()}Xnt(){return this.drt().Xnt()}Jet(){return this.drt().Jet()}$et(){return this.drt().$et()}urt(){const t=this.crt,s=t.dnt().jit().qO(),i=bm.trt(s,t),e=i.j7();switch(t.Ont()){case"numeric":return bm.yrt.Sc(s,i,e,t);case"angle":return bm.wrt.Sc(s,i,e,t);case"boolean":return bm.Srt.Sc(s,i,e,t);case"color":return bm.vrt.Sc(s,i,e,t);case"text":return bm.brt.Sc(s,i,e,t)}}prt(){const t=this.crt;switch(t.jnt()?t.Ont():""){case"combo":case"boolean":case"text":case"string":return new bm._rt.Grt(this);case"numeric":case"number":case"angle":return"combo"===this.crt.Ent()?new bm._rt.Grt(this):new bm._rt.Crt(this);case"color":case"offsetColor":return new bm._rt.Irt(this);default:return new bm._rt.Crt(this)}}i5(){return{propertyAdapterJson:this.drt().i5()}}e5(t){t&&this.drt().e5(t.propertyAdapterJson)}}}{const Mm=self._s;class xm extends Mm.Wit.Snt{constructor(t){super(t),this.Prt=NaN}Kit(){return this.crt.pnt().Tnt()[0]}ML(){return this.Prt?this.Prt:super.ML()}mrt(){return this.crt.dnt().Iq()}iet(t){this.crt.pnt().Tnt()[0]!==t&&(this.Prt=t)}Sc(t,s,i,e,n,r,h){this.drt().Art(s.Cnt())&&super.Sc(t,s,i,e,n,r,h)}Znt(t,s,i){if(this.drt().Art(s.Cnt()))return super.Znt(t,s,i)}i5(){return Object.assign(super.i5(),{index:this.Prt})}e5(t){t&&(super.e5(t),this.Prt=t.index)}}Mm.Wit.ynt=xm}{const Tm=self._s;class Gm extends Tm.Wit.Snt{constructor(t){super(t),this.JQ=NaN}Kit(){return this.crt.pnt().Tnt()[1]}mrt(){const t=this.crt.pnt(),s=this.crt.dnt(),i=this.JQ?this.JQ:t.Tnt()[0],e=s.Iq(),n=e.Ert(i);return e.Rrt()[n].s$()}c$(t){const s=this.crt.pnt().Tnt()[2];return t.Frt(s)}net(t){this.crt.pnt().Tnt()[0]!==t&&(this.JQ=t)}Sc(t,s,i,e,n,r,h){const o=this.crt.dnt().Iq();this.c$(o.cU())&&super.Sc(t,s,i,e,n,r,h)}Znt(t,s,i){const e=this.crt.dnt().Iq();if(this.c$(e.cU()))return super.Znt(t,s,i)}i5(){return Object.assign(super.i5(),{sid:this.JQ})}e5(t){t&&(super.e5(t),this.JQ=t.sid)}}Tm.Wit.mnt=Gm}{const _m=self._s;class Cm extends _m.Wit.Snt{constructor(t){super(t)}Kit(){return this.crt.pnt().Tnt()[1]}mrt(){const t=this.crt.dnt().DB().vz(),s=t._V(),i=this.het(s).ML();return t.y$(i)?t.Ort(i):null}het(t){const s=this.crt.pnt().Tnt()[0];return t.Drt(s)}Sc(t,s,i,e,n,r,h){this.krt()&&super.Sc(t,s,i,e,n,r,h)}Znt(t,s,i){if(this.krt())return super.Znt(t,s,i)}krt(){const t=this.crt.dnt().DB().vz(),s=t._V(),i=this.het(s);if(!i)return;const e=i.ML();return t.y$(e)}}_m.Wit.gnt=Cm}{const Im=self._s;class Pm extends Im.Wit.Snt{constructor(t){super(t)}Kit(){return this.crt.pnt().Tnt()[0]}mrt(){return this.crt.dnt().Iq().s$()}Sc(t,s,i,e,n,r,h){const o=this.crt.dnt();o.cU().zj()===o.Iq().cU().zj()&&super.Sc(t,s,i,e,n,r,h)}Znt(t,s,i){const e=this.crt.dnt();if(e.cU().zj()===e.Iq().cU().zj())return super.Znt(t,s,i)}Lrt(){const t=this.crt.dnt(),s=t.cU().zj();if(Im.sW.Nrt&&s instanceof Im.sW.Nrt&&("initial-frame"===this.crt.dit()||"initial-animation"===this.crt.dit()))switch(this.crt.Y7()){case"relative":return{Brt:(s,i,e,n,r)=>{if(i!==n){const e=n/i,r=t.Oq("offsetWidth"),h=t.Oq("offsetScaleX");if(r||h){const o=r?.Utt()?.drt(),a=h?.Utt()?.drt();if(s.wJ()&&s.GJ())a&&a.Wrt(n),s.Xg(this.jrt(n,i,s,t,o,a));else{const i=n*((s.Hrt()?.Vrt()??this.Urt(s,t))/this.Urt(s,t));a&&a.Wrt(n);const r=o?.zrt()??0,h=a?.zrt()??0;s.Xg(i+(r+h*e))}}else s.Xg(s.Vg()*e)}if(e!==r){const i=r/e,n=t.Oq("offsetHeight"),h=t.Oq("offsetScaleY");if(n||h){const o=n?.Utt()?.drt(),a=h?.Utt()?.drt();if(s.wJ()&&s.CJ())a&&a.Wrt(r),s.Hg(this.Jrt(r,e,s,t,o,a));else{const e=r*((s.Hrt()?.$rt()??this.qrt(s,t))/this.qrt(s,t));a&&a.Wrt(r);const n=o?.zrt()??0,h=a?.zrt()??0;s.Hg(e+(n+h*i))}}else s.Hg(s.Zg()*i)}}};case"absolute":return null}}Xrt(t,s,i,e=0){const n=s.jit().pit(t.Iq());if(!n)return e;const r=n.Oq(i);if(!r)return e;const h=r.pnt().ont();if(!h)return e;const o=h.Yrt();return o?o.Cnt():e}Urt(t,s){const i=s.jit().pit(t.Iq());if(i)return i.met();const e=t.Iq().s$();return e.yet()?e.met():t.Hrt().Vrt()}qrt(t,s){const i=s.jit().pit(t.Iq());if(i)return i.vet();const e=t.Iq().s$();return e.yet()?e.vet():t.Hrt().$rt()}jrt(t,s,i,e,n,r){const h=i.Hrt().Vrt(),o=h/i.rJ().Hrt().Vrt();let a=1;const l=r?.Krt()??0;if(0!==l){const t=h/this.Urt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.Zrt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.rJ().Vg()*o*a*f}Jrt(t,s,i,e,n,r){const h=i.Hrt().$rt(),o=h/i.rJ().Hrt().$rt();let a=1;const l=r?.Qrt()??0;if(0!==l){const t=h/this.qrt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.tht()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.rJ().Zg()*o*a*f}}Im.Wit.wnt=Pm}{const Am=self._s;class Em extends Am.Wit.Snt{constructor(t){super(t),this.sht=0,this.iht=!1}Knt(){return!1}h7(){const t=this.crt.Bit();let s=this.crt.pnt();s=t.Dnt(s),this.sht=s.n9()}zst(){}Cnt(){return this.iht||this.crt.Sc(0),this.sht}Sc(t,s,i,e,n,r,h){this.sht=Am.Wit.yrt.Sc(t,s,i,this.crt),this.iht=!0}zet(){}ort(){}Xnt(){return this.sht}Jet(){return!1}$et(){return!1}i5(){return{value:this.sht,init:this.iht}}e5(t){t&&(this.sht=t.value,this.iht=!t.hasOwnProperty("init")||t.init)}}Am.Wit.vnt=Em}{const Rm=self._s;class Fm extends Rm.Wit.Snt{constructor(t){super(t),this.eht=!1,this.nht=null,this.rht=null,this.hht=null,this.O7=this.crt.jit(),this.snt=this.crt.dnt(),this.oht=this.crt.xnt(),this.aht=this.oht[0],this.lht=this.oht[1],this.oht[3]?this.uht=this.oht[3]:this.uht=Math.random().toString(36).slice(2),this.cht=NaN,this.fht=NaN,this.dht=NaN,this.pht=null,this.mht()}zn(){super.zn(),this.nht=null,this.rht=null,this.hht=null,this.O7=null,this.snt=null,this.oht=null,this.aht=null,this.pht=null}mht(){if(!self._s.sW.Audio)return;const t=this.crt.aW().ght(self._s.sW.Audio);t&&(this.nht=t.Vj().s$()),this.rht=self._s.sW.Audio.yht,this.hht=self._s.sW.Audio.wht}Sht(){if(this.pht)return;const t=this.crt.dnt().Oq("audioSource");t&&(this.pht=t.Utt())}vht(){const t=this.crt.dnt().Oq("volume");return t?t.Utt().fht:this.fht}rit(){super.rit(),this.eht=!1,this.nht&&(this.hht&&(this.cht=this.hht.bht.call(this.nht,this.uht),this.fht=this.hht.Mht.call(this.nht,this.uht)),this.rht&&this.rht.eq.call(this.nht,this.uht))}xht(){return this.uht}Tht(){return this.dht}Ght(t){this.dht=t}h7(){super.h7(),this.cht=NaN,this.eht=!1}zst(){super.zst();const t=this.crt.jit().qO();switch(this.cht=t-this.lht,this.crt.dit()){case"audioSource":break;case"volume":this.fht=this.crt.Znt(t)}this.eht=!1}Sc(t,s,i,e,n,r,h){if(this.nht)switch(this.crt.dit()){case"audioSource":{if(!this.O7.est())return;if(e)return void(this.rht&&this.rht.eq.call(this.nht,this.uht));if(t<this.lht)return void(this.eht=!1);const s=this.hht._ht.call(this.nht,this.uht),i=this.O7.mq();if(i!==s&&this.rht.pq.call(this.nht,this.uht,i),this.eht)return;if(!this.crt.jit().IsPlaying())return;if(this.eht=!0,isNaN(this.cht)){const s=self.performance.now(),i=t-this.lht;if("suspended"===this.nht.Cht())return void(this.eht=!1);const e=i+(self.performance.now()-s)/1e3;if(this.rht){let t=this.Tht();isNaN(t)?(this.Ght(0),t=0):this.Ght(t),this.rht.Iht.call(this.nht,this.aht,t,this.uht,e)}}else{const t=this.cht;this.cht=NaN;const s=this.vht();if(this.fht=NaN,"suspended"===this.nht.Cht())return void(this.eht=!1);this.rht&&(this.Ght(s),this.rht.Iht.call(this.nht,this.aht,s,this.uht,t))}break}case"volume":this.Sht(),super.Sc(t,s,i,e,n,r,h)}}Znt(t,s,i){if(this.nht)switch(this.crt.dit()){case"audioSource":return;case"volume":return this.Sht(),super.Znt(t,s,i)}}Pht(t,s){return this.pht?this.pht.Tht():0}Aht(t,s,i,e){this.pht&&this.pht.Ght(this.Pht()+s),this.rht&&this.pht&&this.rht.Ght.call(this.nht,this.pht.xht(),this.pht.Tht())}Eht(t,s,i){this.pht&&this.pht.Ght(s),this.rht&&this.pht&&this.rht.Ght.call(this.nht,this.pht.xht(),this.pht.Tht())}Rht(){return!0}i5(){return{audioPlaybackStarted:this.eht,audioTag:this.uht,pauseTime:this.cht,pauseVolume:this.fht,volume:this.dht}}e5(t){t&&(this.eht=t.audioPlaybackStarted,this.uht=t.audioTag,this.cht=t.pauseTime,this.fht=t.pauseVolume,this.dht=t.volume,this.mht())}}Rm.Wit.bnt=Fm}self._s.Wit._rt=class{constructor(t){this.nnt=t,this.crt=t.Oq(),this._it=this.crt.dnt().DB(),this.Fht=this.crt.dit(),this.Oht=!1,this.Dht=null,this.kht=null}zn(){this.nnt=null,this.crt=null,this._it=null,this.Dht=null,this.kht=null}Knt(){return!1}rit(){}y7(){this._it=null,this.Dht=null,this.kht=null}Utt(){return this.nnt}Oq(){return this.crt}DB(){return this._it||(this._it=this.crt.dnt().DB()),this._it}Lht(t){this.Oht=!!t}Nht(){return this.Oht}Dst(){}h7(){}zst(){}Trt(){this.Dht=this.Xnt()}ort(){this.Dht=null}Xnt(){}Jet(){}$et(){}Art(t){return typeof this.Bht()==typeof t}grt(){}Mrt(t,s,i,e,n,r,h,o){}xrt(){}Wht(){return this.Vht(()=>{const t=this.crt.pnt();return this.crt.Bit().Dnt(t)},()=>{const t=this.crt.pnt();return this.crt.Bit().Yrt(t)}).jht()}Hht(){const t=this.crt.jit().qO()-this.crt.dnt().Kst();return this.Vht(()=>{const s=this.crt.pnt();return this.crt.Bit().Hnt(t,s)},()=>{const s=this.crt.pnt(),i=this.crt.Bit();return i.Jnt(t,s)||i.Yrt(s)}).jht()}Vht(t,s){return this.crt.jit().est()?t():s()}Uht(t,s){return"relative"===this.crt.Y7()?t():s()}zht(t,s){return this.Nht()?(this.Lht(!1),t()):s()}Jht(t){}$ht(){return this.nnt.ML()}qht(){return this.kht||(this.kht=this.nnt.mrt()),this.kht}Xht(t,s,i,e,n,r){switch(this.crt.Yit()){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return n();case"audio":return r()}}i5(){return{firstAbsoluteUpdate:this.Oht,saveState:this.Dht}}e5(t){t&&(this.Oht=t.firstAbsoluteUpdate,this.Dht=t.saveState)}Yht(t,s=!1){const i=[];for(const e of t){const t=e.dnt().Kst();for(const n of e.Wnt())s&&0===n.qO()?i.push({time:t+n.qO(),value:n.jht()}):s||i.push({time:t+n.qO(),value:n.jht()})}return i.sort((t,s)=>t.time-s.time)}Kht(t,s,i){return this.Zht(s,i)}Zht(t,s){for(let i=s.length-1;i>=0;i--)if(s[i].time<=t)return s[i];return null}};{const Om=self._s,Dm=new Map,km=[0,0,0];class Lm extends Om.Wit._rt{constructor(t){super(t)}Dst(){}h7(){}zst(){}Xnt(){const t=this.crt.Yit(),s=this.qht(),i=this.$ht();switch(t){case"behavior":case"plugin":return this.Qht(s.tot(i));case"effect":return this.Qht(s[i]);case"world-instance":return this.Qht(this.Bht())}}Jet(){const t=this.Wht();return!this.sot(t,this.Bht())}$et(){return!Om.ie(this.Dht)&&!this.sot(this.Dht,this.Bht())}sot(t,s){return t=this.iot(t),s=this.iot(s),t.zo(s)}Wht(){const t=super.Wht();return this.iot(t)}Hht(){const t=super.Hht();return this.iot(t)}Jht(t){}Qht(t){return Om.ke(t,Om.xo)?t.toArray().slice(0,3):t.slice(0,3)}iot(t){return Om.ke(t,Om.xo)?t:new Om.xo(t[0],t[1],t[2],1)}Art(t){return!0}Knt(){return!0}grt(){const t=this.crt.jit(),s=this.crt.Iq(),i=this.crt.Utt(),e=t.Htt(s,i,this.Fht,this.crt);if(e&&e.length>1){Dm.has(s)||Dm.set(s,new Map);const t=Dm.get(s),i=this.crt.Yit();t.has(i)||t.set(i,new Map);const e=t.get(i);e.has(this.Fht)||e.set(this.Fht,{eot:!1,color:new Om.xo(0,0,0,1)})}}not(t,s,i){const e=Dm.get(t).get(s).get(i);return e.eot=!0,e.color}Mrt(t,s,i,e,n,r,h,o){const a=this.crt.jit(),l=this.crt.dnt(),u=this.crt.Iq(),c=this.crt.Utt(),f=this.crt.Yit(),d=this.Fht,p=a.Htt(u,c,d,this.crt);if(p&&p.length>1){const t=this.Yht(p,!0),i=this.Kht(a,a.qO(),t);if(i){const t=l.Kst(),e=i.time-t;if(0===e)this.not(u,f,this.Fht).Ao(s[0],s[1],s[2]);else{if(e<0)return;const t=s[0],i=s[1],n=s[2],r=this.crt.Sc(e,!1,!0),h=Om.xo.Ma(t,r[0]),o=Om.xo.Ma(i,r[1]),a=Om.xo.Ma(n,r[2]);this.not(u,f,this.Fht).Ao(h,o,a)}}}else this.rot(s[0],s[1],s[2])}xrt(){const t=this.crt.Iq();if(!Dm.has(t))return;const s=Dm.get(t),i=this.crt.Yit();if(!s.has(i))return;const e=s.get(i);if(!e.has(this.Fht))return;const n=e.get(this.Fht),r=n.eot,h=n.color;r&&this.rot(h.Lo(),h.No(),h.Bo()),0===e.size&&s.delete(i),0===s.size&&Dm.delete(t)}Bht(){const t=this.crt.Yit(),s=this.qht(),i=this.$ht();switch(t){case"behavior":case"plugin":return this.iot(s.tot(i));case"effect":return s[i].clone();case"world-instance":return this.DB().zz().clone()}}rot(t,s,i){const e=this.crt.Yit(),n=this.qht(),r=this.$ht();switch(e){case"behavior":case"plugin":km[0]=t,km[1]=s,km[2]=i,n.hot(r,km);break;case"effect":n[r].Po(t,s,i);break;case"world-instance":this.DB().oot(t,s,i)}}i5(){}e5(t){}}Om.Wit._rt.Irt=Lm}{const Nm=self._s,Bm=Nm.Wit;class Wm extends Nm.Wit._rt{constructor(t){super(t)}Dst(){}h7(){}zst(){}Xnt(){return this.Bht()}Jet(){return this.Wht()!==this.Xnt()}$et(){return!Nm.ie(this.Dht)&&this.Dht!==this.Xnt()}Knt(){return!1}Mrt(t,s,i,e,n,r,h,o){const a=this.crt,l=a.dnt(),u=a.Yit(),c=a.jit(),f=l.Iq(),d=a.Utt(),p=this.Fht,m=c.Htt(f,d,p,a);if(m&&m.length>1){const i=this.Yht(m),e=t+l.Kst(),n=this.Kht(c,e,i);n&&(s=n.value)}switch(a.Ont()){case"numeric":if(!Bm.yrt.aot(this.$ht(),this.qht(),s,u))return;break;case"angle":if(!Bm.wrt.aot(this.$ht(),this.qht(),s,u))return;break;case"boolean":if(!Bm.Srt.aot(this.$ht(),this.qht(),s,u))return;break;case"color":if(!Bm.vrt.aot(this.$ht(),this.qht(),s,u))return;break;case"text":if(!Bm.brt.aot(this.$ht(),this.qht(),s,u))return}this.rot(s)}Bht(){const t=this.crt.Yit(),s=this.qht(),i=this.$ht();switch(t){case"behavior":case"plugin":return s.tot(i);case"effect":return s[i];case"instance-variable":return s.lot(i)}}rot(t){const s=this.crt.Yit(),i=this.qht(),e=this.$ht();switch(s){case"behavior":case"plugin":i.hot(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.uot(e,t)}}}Nm.Wit._rt.Grt=Wm}{const jm=self._s,Vm=(jm.Wit._rt,new Map),Hm=(t,s,i,e,n,r=!1,h=null,o=null)=>{Vm.set(t,{cot:s,fot:i,dot:e,round:n,pot:r,init:h,reset:o})},Um=(t,s,i,e=0)=>{const n=s.jit().pit(t.Iq());if(!n)return e;const r=n.Oq(i);if(!r)return e;const h=r.pnt().ont();if(!h)return e;const o=h.Yrt();return o?o.Cnt():e},zm=t=>{const s=[];let i=t.rJ();for(;i;)s.push(i),i=i.rJ();return s.reverse(),s};Hm("offsetX",(t,s,i,e)=>{"relative"===e.crt.Y7()?t.mot(s,i.jit().tst()):t.mot(s)},(t,s)=>t.XM(s),t=>t.qM(),!0),Hm("offsetY",(t,s,i,e)=>{"relative"===e.crt.Y7()?t.got(s,i.jit().tst()):t.got(s)},(t,s)=>t.ZM(s),t=>t.KM(),!0),Hm("offsetWidth",(t,s,i,e,n=!1,r=!0)=>{if(0===s)return;const h="relative"===e.crt.Y7(),o=1===e.yot.X_();if((h||o)&&t.wJ()&&t.GJ()){if(isNaN(e.wot)){const s=zm(t);let i;i=o?s[s.length-1].Vg():s[s.length-1].Hrt().Vrt(),e.wot=0===i?Number.EPSILON:i}if(n)return;e.Sot+=s;const i=s/e.wot;t.Gy(i,r),e.vot+=i}else t.Gy(s),e.vot+=s},(t,s)=>t.Xg(s),t=>t.Vg(),!0,!1,null,t=>{t.vot=0,t.Sot=0}),Hm("offsetHeight",(t,s,i,e,n=!1,r=!0)=>{if(0===s)return;const h="relative"===e.crt.Y7(),o=1===e.yot.X_();if((h||o)&&t.wJ()&&t.CJ()){if(isNaN(e.wot)){const s=zm(t);let i;i=o?s[s.length-1].Zg():s[s.length-1].Hrt().$rt(),e.wot=0===i?Number.EPSILON:i}if(n)return;e.bot+=s;const i=s/e.wot;t.Mot(i,r),e.vot+=i}else t.Mot(s),e.vot+=s},(t,s)=>t.Hg(s),t=>t.Zg(),!0,!1,null,t=>{t.vot=0,t.bot=0}),Hm("offsetAngle",(t,s,i,e,n)=>{t.xot(s)},(t,s)=>t.RV(s),t=>t.FV(),!1,!0),Hm("offsetOpacity",(t,s,i,e,n)=>{s/=e.Tot?e.Tot:1;const r=t.wF()+s;if(0===e.Got)r>1?e.Got+=r-1:r<0&&(e.Got+=r),t._ot(s);else{const i=t.wF()+s;s>0&&e.Got>0?i>1&&(e.Got+=i-1):s>0&&e.Got<0?(e.Got+=s,e.Got>0&&(t._ot(e.Got),e.Got=0)):s<0&&e.Got>0?(e.Got+=s,e.Got<0&&(t._ot(e.Got),e.Got=0)):s<0&&e.Got<0&&i<0&&(e.Got+=i)}},(t,s)=>{t.vF(s)},t=>t.wF(),!1,!0,(t,s,i)=>{switch(t.Got=0,t.crt.Y7()){case"relative":{t.crt.Bit();const s=t.crt.pnt().ont().hnt();let i=t.DB().wF(),e=i;for(const n of s){const s=n.qO();e=i+t.crt.Znt(s),e=jm.Yn(e,0,1)}t.Cot=i-e,t.Cot=Math.round(100*(t.Cot+Number.EPSILON))/100,e=i;for(let i=s.length-1;i>=0;i--){const n=s[i].qO();e-=t.crt.Znt(n),e=jm.Yn(e,0,1)}t.Iot=e,t.Iot=Math.round(100*(t.Iot+Number.EPSILON))/100;break}}const e="relative"===t.crt.Y7(),n=1===t.yot.X_();if((e||n)&&s.wJ()&&s.FJ()){const e=zm(s);let n=e[0].Hrt().Pot();n+=Um(e[0],i,"offsetOpacity");for(let t=1;t<e.length;t++)n+=Um(e[t],i,"offsetOpacity");t.Tot=0===n?1:n}},t=>{switch(t.crt.Y7()){case"relative":{t.Got=0;const s=t.DB();let i=s.wF();i=Math.round(100*(i+Number.EPSILON))/100,t.crt.jit().est()?(s.vF(i+t.Cot),t.NC=0):(s.vF(i-t.Iot),t.NC=t.Utt().urt());break}}}),Hm("offsetOriginX",(t,s)=>t.Aot(s),(t,s)=>t.Iz(s),t=>t.Cz(),!1),Hm("offsetOriginY",(t,s)=>t.Eot(s),(t,s)=>t.Ez(s),t=>t.Az(),!1),Hm("offsetZElevation",(t,s)=>t.Rot(s),(t,s)=>t.tx(s),t=>t.QM(),!0),Hm("offsetScaleX",(t,s,i,e)=>{if(0===s)return;const n=t.Vg()<0?-1:1;if(e.Fot+=s,"relative"===e.crt.Y7()&&t.wJ()&&t.GJ()){const r=Um(t,i,"offsetWidth"),h=isNaN(e.Oot)?i.met():e.Oot,o=(h+r/(t.Hrt().Vrt()/h))*n*s;isNaN(e.wot)&&Vm.get("offsetWidth").cot(t,1,i,e,!0);const a=o/e.wot;t.Gy(a,!0),e.vot+=a}else{const r=(isNaN(e.Oot)?i.met():e.Oot)*n*s;t.Gy(r),e.vot+=r}},(t,s,i)=>{t.Xg(i.met()*s)},(t,s)=>{const i=t.Vg()<0?-1:1;if(t.GJ()){const e=t.rJ(),n=s.jit().pit(e.Iq());let r=NaN;if(n)r=e.Vg()/n.met();else{const t=e.Iq().s$();r=t.yet()?e.Vg()/t.met():1}return t.Vg()*i/(s.met()*r)}return t.Vg()*i/s.met()},!1,!1,null,t=>{t.vot=0,t.Oot=NaN,t.Fot=0}),Hm("offsetScaleY",(t,s,i,e)=>{if(0===s)return;const n=t.Zg()<0?-1:1;if(e.Dot+=s,"relative"===e.crt.Y7()&&t.wJ()&&t.CJ()){const r=Um(t,i,"offsetHeight"),h=isNaN(e.Oot)?i.vet():e.Oot,o=(h+r/(t.Hrt().$rt()/h))*n*s;isNaN(e.wot)&&Vm.get("offsetHeight").cot(t,1,i,e,!0);const a=o/e.wot;t.Mot(a,!0),e.vot+=a}else{const r=(isNaN(e.Oot)?i.vet():e.Oot)*n*s;t.Mot(r),e.vot+=r}},(t,s,i)=>{t.Hg(i.vet()*s)},(t,s)=>{const i=t.Zg()<0?-1:1;if(t.CJ()){const e=t.rJ(),n=s.jit().pit(e.Iq());let r=NaN;if(n)r=e.Zg()/n.vet();else{const t=e.Iq().s$();r=t.yet()?e.Zg()/t.vet():1}return t.Zg()*i/(s.vet()*r)}return t.Zg()*i/s.vet()},!1,!1,null,t=>{t.vot=0,t.Oot=NaN,t.Dot=0});class Jm extends jm.Wit._rt{constructor(t){super(t),this.NC=0,this.Got=0,this.Cot=0,this.Iot=0,this.Tot=NaN,this.wot=NaN,this.vot=0,this.Oot=NaN,this.Sot=0,this.Fot=0,this.bot=0,this.Dot=0,this.kot=void 0,this.Lot=void 0,this.Not=null,this.Bot=null,this.Wot=null,this.jot=null,this.Vot=null,this.Hot=null,this.Uot=null,this.zot=null,this.Jot=!1,this.$ot=!1,jm.ke(this.crt.jit(),jm.qot)?this.yot=new jm.Wit._rt.Xot(this):this.yot=new jm.Wit._rt.Yot(this);const s=this.crt.dit();switch(this.crt.Yit()){case"world-instance":{const t=Vm.get(s);this.Not=t.dot,this.Bot=t.cot,this.Wot=t.fot,this.Jot=t.round,this.$ot=t.pot,this.Vot=t.init,this.jot=t.reset;break}case"audio":this.Hot=t.Pht,this.Uot=t.Aht,this.zot=t.Eht,this.Jot=!!t.Rht(),this.$ot=!1}}zn(){this.yot=null,this.Not=null,this.Bot=null,this.Wot=null,this.jot=null,this.Vot=null,this.Hot=null,this.Uot=null,this.zot=null,super.zn()}Knt(){return this.yot.Knt()}Kot(){return this.NC}Zot(t){this.NC=t}Dst(){this.jot&&this.jot(this)}h7(){const t=this.yot.h7();if("number"==typeof t&&(this.NC=t),this.Vot){const t=this.DB(),s=this.crt.dnt();this.Vot(this,t,s)}}zst(){const t=this.yot.zst();"number"==typeof t&&(this.NC=t)}Xnt(){return this.Bht()}Jet(){return this.Wht()!==this.Xnt()}$et(){return!jm.ie(this.Dht)&&this.Dht!==this.Xnt()}grt(){this.yot.grt()}Mrt(t,s,i,e,n,r,h,o){return this.yot.Mrt(t,s,i,e,n,r,h,o)}xrt(){this.yot.xrt()}Bht(){const t=this.qht(),s=this.$ht(),i=this.DB(),e=this.crt.dnt();switch(this.crt.Yit()){case"behavior":case"plugin":return t.tot(s);case"effect":return t[s];case"instance-variable":return t.lot(s);case"world-instance":return this.Not(i,e);case"audio":return this.Hot.call(this.Utt(),i,e)}}rot(t,s,i,e=!0){const n=this.qht(),r=this.$ht(),h=this.DB(),o=this.crt.dnt();switch(this.crt.Yit()){case"behavior":n.Qot(r,t);break;case"effect":n[r]+=t;break;case"instance-variable":n.tat(r,t);break;case"plugin":n.Qot(r,t,this.Utt().Lrt());break;case"world-instance":this.Bot(h,t,o,this,!1,e);break;case"audio":this.Uot.call(this.Utt(),h,t,o,this)}}sat(t,s,i){let e=this.crt.Ytt();if(e="default"===e?"continuous":e,"discrete"===e&&!s)return;if("discrete"===e&&i){const t=this.crt.jit().qO();if(!this.crt.Vnt(t))return}const n=this.qht(),r=this.$ht(),h=this.DB(),o=this.crt.dnt();switch(this.crt.Yit()){case"behavior":n.hot(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.uot(r,t);break;case"plugin":n.hot(r,t,this.Utt().Lrt());break;case"world-instance":this.Wot(h,t,o);break;case"audio":this.zot.call(this.Utt(),h,t,o)}}iat(t,s,i,e,n,r,h,o){this.yot.iat(t,s,i,e,n,r,h,o)}eat(t,s,i,e,n){"angle"===this.crt.Ent()&&(t=jm.Qn(t));const r=(t.toString().split(".")[1]||"").length,h=this.Bht();let o;switch(o=0===r?this.Jot?Math.round(h):this.$ot?"angle"===this.crt.Ent()?jm.Zn(Math.round(jm.Qn(h))):Number(jm.toFixed(h,2)):h:this.Jot?Number(jm.toFixed(h,r)):(this.$ot,h),this.rot(o-h,s,i,!1),this.crt.dit()){case"offsetWidth":case"offsetScaleX":{const t=this.DB(),s=t.Vg(),i=Number(jm.toFixed(s,2));t.Gy(i-s);break}case"offsetHeight":case"offsetScaleY":{const t=this.DB(),s=t.Zg(),i=Number(jm.toFixed(s,2));t.Mot(i-s);break}}}i5(){return Object.assign(super.i5(),{v:this.NC,a:this.Got,fod:this.Cot,bod:this.Iot,of:this.Tot,sf:this.wot,armorf:this.kot,armandf:this.Lot,ca:this.vot,os:this.Oot,awo:this.Sot,aho:this.bot,asxo:this.Fot,asyo:this.Dot})}e5(t){t&&(super.e5(t),this.NC=t.v,this.Got=t.a,this.Cot=jm.Qi(t.fod)?t.fod:0,this.Iot=jm.Qi(t.bod)?t.bod:0,this.Tot=jm.Qi(t.of)?t.of:NaN,this.wot=jm.Qi(t.sf)?t.sf:NaN,this.kot=jm.Qi(t.armorf)?t.armorf:void 0,this.Lot=jm.Qi(t.armandf)?t.armandf:void 0,this.vot=jm.Qi(t.ca)?t.ca:0,this.Oot=jm.Qi(t.os)?t.os:NaN,this.Sot=jm.Qi(t.awo)?t.awo:0,this.bot=jm.Qi(t.aho)?t.aho:0,this.Fot=jm.Qi(t.asxo)?t.asxo:0,this.Dot=jm.Qi(t.asyo)?t.asyo:0)}Wrt(t){this.Oot=t}zrt(){return this.vot}Zrt(){return this.Sot}tht(){return this.bot}Krt(){return this.Fot}Qrt(){return this.Dot}}jm.Wit._rt.Crt=Jm}{const $m=self._s;class qm{constructor(t){this.nat=!1,this.sht=0,this.rat=!1,this.hat=!1,this.Oit=t;for(let t=0,s=this.Oit.length;t<s;t++)this.Oit[t].cnt(this)}fit(){return this.Oit}oat(){this.nat=!0}aat(){return this.nat}lrt(t){this.sht=t}Cnt(){return this.sht}lat(t){this.rat=t}uat(){return this.rat}Xst(t){this.hat=t}cat(){return this.hat}Bf(){this.nat=!1,this.sht=0,this.rat=!1,this.hat=!1}}class Xm{constructor(t){this.fat=t}zn(){this.fat=null}X_(){return 0}h7(){const t=this.fat;return this.fat.Oq(),t.Uht(()=>t.Vht(()=>0,()=>t.Utt().urt()),()=>{})}zst(){}Knt(){switch(this.fat,this.fat.Oq().Y7()){case"relative":return!1;case"absolute":return!0}}grt(){this.fat;const t=this.fat.Oq(),s=t.dit();switch(t.Y7()){case"relative":break;case"absolute":if(t.unt())t.fnt().Bf();else{const i=t.jit(),e=t.Iq(),n=t.Utt(),r=i.Htt(e,n,s,t);r&&r.length>1&&new qm(r)}}}Mrt(t,s,i,e,n,r,h,o){const a=this.fat,l=this.fat.Oq();switch(l.Y7()){case"relative":{const h=a.Kot();a.rot(s-h,i,e),r&&this.iat(t,i,e,n,h,s),a.Zot(s);break}case"absolute":{const t=l.jit(),i=l.dnt();if(l.Iq(),l.Utt(),l.unt()){const e=l.fnt(),n=e.fit(),r=a.Yht(n,!0),u=a.Kht(t,t.qO(),r);if(u){const t=i.Kst(),n=u.time-t;if(0===n)e.Xst(h),e.lat(o),e.oat(),e.lrt(e.Cnt()+s);else{if(n<0)return;const t=l.Znt(n);e.Xst(h),e.lat(o),e.oat(),e.lrt(e.Cnt()+(s-t))}}}else a.sat(s,o,h);break}}}xrt(){const t=this.fat,s=this.fat.Oq();switch(s.Y7()){case"relative":break;case"absolute":if(s.unt()){const i=s.fnt();i.aat()&&t.sat(i.Cnt(),i.uat(),i.cat())}}}iat(t,s,i,e,n,r){const h=this.fat;e||(s&&t===s.qO()?h.eat(s.n9(),s,i):i&&t===i.qO()?h.eat(i.n9(),s,i):r-n===0&&h.eat(s.n9(),s,i))}}$m.Wit._rt.Yot=Xm}{const Ym=self._s;class Km{constructor(t){this.fat=t}zn(){this.fat=null}X_(){return 1}h7(){const t=this.fat;return t.Lht(!0),this.Jht(t.Wht())}zst(){const t=this.fat;if(t.Wht()!==t.Hht())return t.Lht(!0),this.Jht(t.Hht())}Knt(){return!1}grt(){}Mrt(t,s,i,e,n,r,h,o){const a=this.fat,l=a.Kot();switch(a.Oq().Y7()){case"relative":a.rot(s-l,i,e),r&&this.iat(t,i,e,n,l,s,!1,h);break;case"absolute":a.Nht()?(a.Lht(!1),a.rot(l,i,e)):0===t&&0===a.Oq().jit().aq()?a.sat(s,!0,!1):(a.rot(s-l,i,e),r&&this.iat(t,i,e,n,l,s,this.dat(),h))}a.Zot(s)}xrt(){}Jht(t){return t-this.fat.Xnt()}dat(){const t=this.fat,s=t.DB().Iq(),i=t.Oq().aW().Vtt();let e=0;for(const t of i.O8())0===t.X_()?t.B8(s)&&e++:1===t.X_()&&t.Iq()===s&&e++;return e<=1}iat(t,s,i,e,n,r,h,o){const a=this.fat;e?s&&t===s.qO()?a.eat(s.n9(),s,i,h,o):i&&t===i.qO()?a.eat(i.n9(),s,i,h,o):i||a.eat(s.n9(),s,i,h,o):s&&t===s.qO()?a.eat(s.n9(),s,i,h,o):i&&t===i.qO()?a.eat(i.n9(),s,i,h,o):r-n===0&&a.eat(s.n9(),s,i,h,o)}}Ym.Wit._rt.Xot=Km}{const Zm=self._s,Qm=self.Vu;Zm.Wit.yrt=class{constructor(){}static aot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.tot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.lot(t)}return n!==i}static Sc(t,s,i,e){if(!i){let t=e.pnt();return t=e.Bit().Yrt(t),t.n9()}let n=e.Ytt();if("default"===n&&(n="continuous"),"combo"===e.Ent()&&(n="discrete"),"discrete"===n)return s.n9();if("continuous"===n||"step"===n){const r=e.jit().qtt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.n9(),o=i.n9(),a=s.i9("cubic-bezier"),l=i.i9("cubic-bezier"),u=a&&a.pat()&&l&&l.mat();if(!u&&h===o)return h;const c=s.qO(),f=i.qO();"step"===n&&0!==r&&(t=Zm.Yn(t,c,f));const d=Zm.normalize(t,c,f),p=s.art();let m;if(u){const t=f-c;m=Qm.rc(p)(t*d,0,1,t),m=Qm.rc("cubicbezier")(m,h,h+a.o9(),o+l.u9(),o)}else m=Qm.rc(p)((f-c)*d,h,o-h,f-c);return"integer"===e.Ent()?Math.floor(m):m}}}}{const tg=self._s;tg.Wit.wrt=class{constructor(){}static aot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.tot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.lot(t)}return n!==i}static Sc(t,s,i,e){if(!i){let t=e.pnt();return t=e.Bit().Yrt(t),t.n9()}let n=e.Ytt();if("default"===n&&(n="continuous"),"combo"===e.Ent()&&(n="discrete"),"discrete"===n)return s.n9();if("continuous"===n||"step"===n){const r=e.jit().qtt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.qO(),o=i.qO(),a=s.n9(),l=i.n9();"step"===n&&0!==r&&(t=tg.Yn(t,h,o));const u=s.i9("angle");if(!u){if(a===l)return a;const i=tg.normalize(t,h,o),e=self.Vu.rc(s.art());return tg.lr(a,l,e(i,0,1,1))}{const i=u.gat();if(a===l&&0===i)return a;const e=tg.normalize(t,h,o),n=self.Vu.rc(s.art())(e,0,1,1);switch(u.yat()){case"closest":return tg.lr(a,l,n,i);case"clockwise":return tg.ur(a,l,n,i);case"anti-clockwise":return tg.cr(a,l,n,i)}}}}}}self._s.Wit.Srt=class{constructor(){}static aot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.tot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.lot(t)}return!!n!=!!i}static Sc(t,s,i,e){if(!i){let t=e.pnt();return t=e.Bit().Yrt(t),t.n9()?1:0}return s.n9()?1:0}};{const sg=self._s,ig=[0,0,0],eg=[0,0,0],ng=[0,0,0];sg.Wit.vrt=class{constructor(){}static aot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.tot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.lot(t)}return Array.isArray(i)?(ig[0]=i[0],ig[1]=i[1],ig[2]=i[2]):(ng.ha(i),ig[0]=Math.floor(255*ng.Lo()),ig[1]=Math.floor(255*ng.No()),ig[2]=Math.floor(255*ng.Bo())),Array.isArray(n)?(eg[0]=n[0],eg[1]=n[1],eg[2]=n[2]):(ng.ha(n),eg[0]=Math.floor(255*ng.Lo()),eg[1]=Math.floor(255*ng.No()),eg[2]=Math.floor(255*ng.Bo())),ig[0]!==eg[0]||ig[1]!==eg[1]||ig[2]!==eg[2]}static Sc(t,s,i,e){if(!i){let t=e.pnt();t=e.Bit().Yrt(t);const s=t.n9();return ig[0]=s[0],ig[1]=s[1],ig[2]=s[2],ig}let n=e.Ytt();if("default"===n&&(n="continuous"),"discrete"===n){const t=s.n9();return ig[0]=t[0],ig[1]=t[1],ig[2]=t[2],ig}if("continuous"===n||"step"===n){const r=e.jit().qtt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.qO(),o=i.qO(),a=s.n9(),l=i.n9();"step"===n&&0!==r&&(t=sg.Yn(t,h,o));const u=sg.normalize(t,h,o),c=s.art(),f=a[0],d=a[1],p=a[2],m=l[0],g=l[1],y=l[2],w=self.Vu.rc(c),S=o-h,v=S*u;return ig[0]=f===m?f:w(v,f,m-f,S),ig[1]=d===g?d:w(v,d,g-d,S),ig[2]=p===y?p:w(v,p,y-p,S),ig}}}}self._s.Wit.brt=class{constructor(){}static aot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.tot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.lot(t)}return n!==i}static Sc(t,s,i,e){if(!i){let t=e.pnt();return t=e.Bit().Yrt(t),t.n9()}return s.n9()}};{const rg=self._s;rg.W6=class{constructor(){this.wat=new Map}zn(){for(const t of this.wat.values())t.zn();this.wat.clear(),this.wat=null}Bu(t){const s=new rg.Sat(t),i=s.Pc();this.wat.set(i,s)}zs(t){return this.wat.get(t)}Dtt(){return 0}static vat(t,s,i,e){if(s)for(const n of s)rg.W6.bat("create",n,t,i,e)}static Mat(t,s,i,e){if(s)for(const n of s)rg.W6.bat("create-including-disabled",n,t,i,e)}static xat(t,s,i,e){t.length?s.forEach((s,i)=>{t[i].e5(s)}):s.forEach(s=>{rg.W6.bat("load",s,t,i,e)})}static bat(t,s,i,e,n){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,n);break;case"create":case"create-including-disabled":r=new e(s,n)}else if("object"==typeof e){const i=s[e.Tat],h=e.map.get(i);switch(t){case"load":r=new h(null,n);break;case"create":case"create-including-disabled":r=new h(s,n)}}switch(t){case"load":r.e5(s),i.push(r);break;case"create":if("function"==typeof r.cet&&!r.cet())return r.zn();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const hg=self._s;hg.Sat=class{constructor(t){this.qn="",this.qst=NaN,this.Gat=0,this._at="default",this.Cat="default",this.Iat=!1,this.Pat=!1,this.Aat=1,this.Mit=null,this.Eat="",this.Rat=!1,this.Fat=!0,t&&(this.qn=t[0],this.qst=t[1],this.Gat=t[2],this._at=t[3],this.Cat=t[4],this.Iat=!!t[6],this.Pat=!!t[7],this.Aat=t[8],this.Eat=t[9],this.Rat=!!t[10],this.Fat=!!t[11],this.Mit=new hg.Oat(t[5],this))}zn(){this.Mit.zn(),this.Mit=null}Wtt(){return this.Mit||(this.Mit=new hg.Oat(null,this)),this.Mit}Pc(){return this.qn}eY(t){this.qn=t}aq(){return this.qst}oq(t){this.qst=t}qtt(){return this.Gat}Xtt(t){this.Gat=t}Ytt(){return this._at}Ktt(t){this._at=t}Y7(){return this.Cat}Ztt(t){this.Cat=t}uq(){return this.Iat}lq(t){this.Iat=t}fq(){return this.Pat}cq(t){this.Pat=t}C$(){return this.Aat}Qtt(t){this.Aat=t}w7(){return this.Eat}tst(){return this.Rat}sst(){return this.Fat}i5(){return{trackDataJson:this.Mit.i5(),name:this.qn,totalTime:this.qst,step:this.Gat,interpolationMode:this._at,resultMode:this.Cat,loop:this.Iat,pingPong:this.Pat,repeatCount:this.Aat,startOnLayout:this.Eat,transformWithSceneGraph:!!this.Rat,useSystemTimescale:this.Fat}}e5(t){t&&(this.Wtt().e5(t.trackDataJson),this.qn=t.name,this.qst=t.totalTime,this.Gat=t.step,this._at=t.interpolationMode,this.Cat=t.resultMode,this.Iat=t.loop,this.Pat=t.pingPong,this.Aat=t.repeatCount,this.Eat=t.startOnLayout,this.Rat=!!t.transformWithSceneGraph,this.Fat=!!t.useSystemTimescale)}}}{const og=self._s;class ag{constructor(t,s){this.Mit=s,this.Dat=null,this.kat=null,this.xit=NaN,this.Tit=NaN,this._at="default",this.Cat="default",this.fu=!1,this.Lat=null,this.ent=null,this.Wc="",this.Nat=null,this.Bat=0,this.Wat=this.Mit.$tt().aq(),this.Jc=0,this.qn="",t&&(t[0]&&(this.Dat=t[0],this.xit=t[0][2],this.Tit=t[0][1]),this._at=t[1],this.Cat=t[2],this.fu=!!t[3],t[6]&&(this.Wc=t[6]),t[7]&&(this.Nat=t[7],this.Bat=t[7][0],this.Wat=t[7][1]),t[8]&&(this.kat=t[8]),t[8]&&(this.kat=t[8]),t[9]&&(this.Jc=t[9]),t[10]&&(this.qn=t[10]),this.Lat=new og.jat(t[4],this),this.ent=new og.Vat(t[5],this))}zn(){this.Dat=null,this.Mit=null,this.Lat&&(this.Lat.zn(),this.Lat=null),this.ent&&(this.ent.zn(),this.ent=null),this.Nat=null}Wtt(){return this.Mit}Qst(){return this.Lat||(this.Lat=new og.jat(null,this)),this.Lat}Bit(){return this.ent||(this.ent=new og.Vat(null,this)),this.ent}Hat(){return this.Dat}zit(){return this.Tit}det(t){this.Tit=t}Uit(){return this.xit}aet(t){this.xit=t}Ytt(){return this._at}Ktt(t){this._at=t}Y7(){return this.Cat}Ztt(t){this.Cat=t}cet(){return this.fu}fet(t){this.fu=!!t}Rq(){return this.Wc}Kst(){return this.Bat}let(){return this.Wat}uet(t){this.Wat=t}met(){return this.kat[0]}pet(t){this.kat||(this.kat=[]),this.kat[0]=t}vet(){return this.kat||(this.kat=[]),this.kat[1]}wet(t){this.kat||(this.kat=[]),this.kat[1]=t}X_(){return this.Jc}Pc(){return this.qn}i5(){return{keyframeDataJson:this.Lat.i5(),propertyTrackDataJson:this.ent.i5(),instanceData:this.Dat,additionalInstanceData:this.kat,instanceUid:this.xit,objectClassIndex:this.Tit,interpolationMode:this._at,resultMode:this.Cat,enabled:this.fu,id:this.Wc,nestedData:this.Nat,type:this.Jc,name:this.qn}}e5(t){t&&(this.Dat=t.instanceData,this.xit=t.instanceUid,this.Tit=t.objectClassIndex,this._at=t.interpolationMode,this.Cat=t.resultMode,this.fu=t.enabled,this.Wc=t.id,this.Jc=t.type?t.type:0,this.qn=t.name?t.name:"",this.Wat=this.Mit.$tt().aq(),t.nestedData&&(this.Nat=t.nestedData,this.Bat=this.Nat[0],this.Wat=this.Nat[1]),t.additionalInstanceData&&(this.kat=t.additionalInstanceData),this.Qst().e5(t.keyframeDataJson),this.Bit().e5(t.propertyTrackDataJson))}}og.Oat=class{constructor(t,s){this.itt=s,this.Uat=[],og.W6.vat(this.Uat,t,ag,this)}zn(){this.itt=null;for(const t of this.Uat)t.zn();og.Sh(this.Uat),this.Uat=null}$tt(){return this.itt}nit(){const t=new ag(null,this);return this.Uat.push(t),t}zat(t){return t.Qst().Fit()[0]}Jat(t){return t.Qst().Fit().at(-1)}Oet(t,s){const i=s.Qst().Fit(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.qO()===t)return e}}$at(t,s){const i=s.Qst().Fit(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.qO()>t)return e}}Ret(t,s){const i=s.Qst().Fit(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.qO()>=t)return e}}Aet(t,s){const i=s.Qst().Fit();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.qO()<=t)return e}}*Btt(){for(const t of this.Uat)yield t}i5(){return{trackDataItemsJson:this.Uat.map(t=>t.i5())}}e5(t){t&&og.W6.xat(this.Uat,t.trackDataItemsJson,ag,this)}}}{const lg=self._s;class ug{constructor(t,s){this.ent=s,this.qat="",this.Xat=null,this.Fht=null,this.Jc=null,this.Yat=NaN,this.Kat=NaN,this._at="default",this.Cat="default",this.fu=!1,this.Zat=null,this.Qat=!0,t&&(this.qat=t[0][0],this.Xat=t[0].slice(1),this.Fht=t[1],this.Jc=t[2],this.Yat=t[3],this.Kat=t[4],this._at=t[5],this.Cat=t[6],this.fu=!!t[7],this.Zat=new lg.tlt(t[8],this),this.Qat=t[9])}zn(){this.Zat.zn(),this.Zat=null,this.ent=null,this.Xat=null}Bit(){return this.ent}ont(){return this.Zat||(this.Zat=new lg.tlt(null,this)),this.Zat}Yit(){return this.qat}Mnt(t){this.qat=t}Tnt(){return this.Xat}_nt(t){this.Xat=t}Int(){return this.Fht}Ant(t){this.Fht=t}X_(){return this.Jc}Fnt(t){this.Jc=t}knt(){return this.Yat}Lnt(t){this.Yat=t}Nnt(){return this.Kat}Bnt(t){this.Kat=t}Ytt(){return this._at}Ktt(t){this._at=t}Y7(){return this.Cat}Ztt(t){this.Cat=t}cet(){return this.fu}fet(t){this.fu=!!t}jnt(){return!!this.Qat}i5(){return{propertyKeyframeDataJson:this.Zat.i5(),sourceAdapterId:this.qat,sourceAdapterArguments:this.Xat,property:this.Fht,type:this.Jc,min:this.Yat,max:this.Kat,interpolationMode:this._at,resultMode:this.Cat,enabled:this.fu,canHavePropertyKeyframes:this.Qat}}e5(t){t&&(this.qat=t.sourceAdapterId,this.Xat=t.sourceAdapterArguments,this.Fht=t.property,this.Jc=t.type,this.Yat=t.min,this.Kat=t.max,this._at=t.interpolationMode,this.Cat=t.resultMode,this.fu=t.enabled,this.Qat=t.canHavePropertyKeyframes,this.ont().e5(t.propertyKeyframeDataJson))}}lg.Vat=class{constructor(t,s){this.bit=s,this.slt=[],lg.W6.vat(this.slt,t,ug,this)}zn(){this.bit=null;for(const t of this.slt)t.zn();lg.Sh(this.slt),this.slt=null}Zst(){return this.bit}jet(){const t=new ug(null,this);return this.slt.push(t),t}Dnt(t){return t.ont().hnt()[0]}Yrt(t){return t.ont().hnt().at(-1)}Vnt(t,s){const i=s.ont().hnt(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.qO()===t)return e}}znt(t,s){const i=s.ont().hnt(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.qO()>t)return e}}Jnt(t,s){const i=s.ont().hnt(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.qO()>=t)return e}}Hnt(t,s){const i=s.ont().hnt();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.qO()<=t)return e}}*Nit(){for(const t of this.slt)yield t}i5(){return{propertyTrackDataItemsJson:this.slt.map(t=>t.i5())}}e5(t){t&&lg.W6.xat(this.slt,t.propertyTrackDataItemsJson,ug,this)}}}{const cg=self._s;class fg{constructor(t,s){if(this.Lat=s,this.UD=-1,this.ilt="noease",this.elt=!1,this.Ptt=null,this.nlt=null,!t)return;this.UD=t[0],this.ilt=t[1],this.elt=!!t[2];const i=t[3];this.Ptt=i?i.split(" "):[],this.nlt=new Set(this.Ptt.map(t=>t.toLowerCase())),this.rlt=null,this.hlt=null}zn(){this.Lat=null,cg.Sh(this.Ptt),this.Ptt=null,this.nlt.clear(),this.nlt=null,this.rlt=null}Qst(){return this.Lat}j7(){return this.rlt}olt(t){this.rlt=t}Fet(){return this.hlt}llt(t){this.hlt=t}qO(){return this.UD}hq(t){this.UD=t,this.Lat.ult()}art(){return this.ilt}Cq(t){this.ilt=t}cet(){return this.elt}fet(t){this.elt=!!t}gq(){return this.Ptt}nst(t){this.Ptt=t?t.split(" "):[],this.nlt=new Set(this.Ptt.map(t=>t.toLowerCase()))}clt(){return this.nlt}yit(t){return this.nlt.has(t.toLowerCase())}i5(){return{time:this.UD,ease:this.ilt,enable:this.elt,tags:this.Ptt}}e5(t){t&&(this.UD=t.time,this.ilt=t.ease,this.elt=t.enable,this.Ptt=t.tags,this.nlt=new Set(this.Ptt.map(t=>t.toLowerCase())))}}cg.jat=class{constructor(t,s){this.bit=s,this.Rit=[],cg.W6.vat(this.Rit,t,fg,this),this.ult()}zn(){this.bit=null;for(const t of this.Rit)t.zn();cg.Sh(this.Rit),this.Rit=null}ult(){this.Rit.sort((t,s)=>t.qO()-s.qO());for(let t=0;t<this.Rit.length;t++){const s=this.Rit[t];s.olt(this.Rit[t+1]),s.llt(this.Rit[t-1])}}Zst(){return this.bit}flt(){return this.Rit.length}Fit(){return this.Rit}Bet(){const t=new fg(null,this);return this.Rit.push(t),this.ult(),t}Het(t){for(const s of this.Rit){if(!t(s))continue;const i=this.Rit.indexOf(s);-1!==i&&(s.zn(),this.Rit.splice(i,1))}this.dlt(),this.ult()}dlt(){this.Rit.sort((t,s)=>t.qO()-s.qO())}Qet(t){return this.Rit.indexOf(t)}tnt(t){return this.Rit[t]}*plt(){for(const t of this.Rit)yield t}*mlt(){for(let t=this.Rit.length-1;t>=0;t--)yield this.Rit[t]}i5(){return{keyframeDataItemsJson:this.Rit.map(t=>t.i5())}}e5(t){t&&(cg.W6.xat(this.Rit,t.keyframeDataItemsJson,fg,this),this.ult())}}}{const dg=self._s;class pg{constructor(t,s){this.Zat=s,this.sht=null,this.glt=null,this.Jc="",this.UD=NaN,this.ilt="noease",this.elt=!1,this.ylt=null,this.wlt=void 0,this.Slt="line",t&&(this.sht=t[0][0],this.glt=t[0][1],this.Jc=t[0][2],this.UD=t[1],this.ilt=t[2],this.elt=!!t[3],this.Slt=t[5],this.ylt=null,t[4]&&(this.ylt=new dg.vlt(t[4],this)),this.rlt=null,this.blt=null)}zn(){this.Zat=null,this.ylt&&(this.ylt.zn(),this.ylt=null),this.rlt=null,this.blt=null}Mlt(){return this.ylt}olt(t){this.rlt=t}j7(){return this.rlt}xlt(t){this.blt=t}V7(){return this.blt}Cnt(){return this.sht}lrt(t){"color"===this.Jc&&dg.Qi(t)?(this.sht[0]=dg.Pr(t),this.sht[1]=dg.Ar(t),this.sht[2]=dg.Er(t)):this.sht=t}jht(){return this.glt}rrt(t){"color"===this.Jc&&dg.Qi(t)?(this.glt[0]=dg.Pr(t),this.glt[1]=dg.Ar(t),this.glt[2]=dg.Er(t)):this.glt=t}n9(){const t=this.Zat.pnt().Y7();return"relative"===t?this.Cnt():"absolute"===t?this.jht():void 0}X_(){return this.Jc}Fnt(t){this.Jc=t}qO(){return this.UD}hq(t){this.UD=t,this.Zat.Tlt()}art(){return this.ilt}Cq(t){this.ilt=t}cet(){return this.elt}fet(t){this.elt=!!t}H7(){return this.Slt}i9(t){if(!this.ylt)return;if(this.wlt||null===this.wlt)return this.wlt;const s=this.ylt.Glt();if(!s)return this.wlt=null,this.wlt;const i=s.length;for(let e=0;e<i;e++){const i=s[e];if(i.Rq()===t)return this.wlt=i,this.wlt}return this.wlt=null,this.wlt}i5(){const t=this.ylt;return{addonDataJson:t?t.i5():t,value:this.sht,aValue:this.glt,type:this.Jc,time:this.UD,ease:this.ilt,enable:this.elt}}e5(t){t&&(t.addonDataJson&&this.ylt._lt(t.addonDataJson),this.sht=t.value,this.glt=t.aValue,this.Jc=t.type,this.UD=t.time,this.ilt=t.ease,this.elt=t.enable)}}dg.tlt=class{constructor(t,s){this.int=s,this.rnt=[],this.Clt=[],dg.W6.vat(this.rnt,t,pg,this),dg.W6.Mat(this.Clt,t,pg,this),this.Tlt()}zn(){this.int=null;for(const t of this.rnt)t.zn();dg.Sh(this.rnt),this.rnt=null;for(const t of this.Clt)t.zn();dg.Sh(this.Clt),this.Clt=null}Tlt(){let t=this.rnt;t.sort((t,s)=>t.qO()-s.qO());for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.olt(t[s+1]),s-1>=0&&i.xlt(t[s-1])}t=this.Clt,t.sort((t,s)=>t.qO()-s.qO());for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.olt(t[s+1]),s-1>=0&&i.xlt(t[s-1])}}ert(){const t=new pg(null,this);return this.rnt.push(t),this.Tlt(),t}nrt(t){for(const s of this.rnt){if(!t(s))continue;const i=this.rnt.indexOf(s);-1!==i&&(s.zn(),this.rnt.splice(i,1))}this.Ilt(),this.Tlt()}Ilt(){this.rnt.sort((t,s)=>t.qO()-s.qO())}pnt(){return this.int}Plt(){return this.rnt.length}Yrt(){return this.rnt[this.rnt.length-1]}hnt(){return this.rnt}W7(){return this.Clt}*Alt(){for(const t of this.rnt)yield t}*Elt(){for(let t=this.rnt.length-1;t>=0;t--)yield this.rnt[t]}i5(){const t=this.rnt,s=this.Clt;return{propertyKeyframeDataItemsJson:t.map(t=>t.i5()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.i5())}}e5(t){t&&(dg.W6.xat(this.rnt,t.propertyKeyframeDataItemsJson,pg,this),dg.W6.xat(this.Clt,t.propertyKeyframeDataItemsIncludingDisabledJson,pg,this),this.Tlt())}}}{const mg=self._s;class gg{constructor(t,s){this.ylt=s,this.Wc=t[0],this.Rlt=t[1]}zn(){this.ylt=null,this.Rlt=null}Mlt(){return this.ylt}Rq(){return this.Wc}i5(){return{id:this.Wc,data:this.Rlt}}e5(t){t&&(this.Wc=t.id,this.Rlt=t.data)}}class yg extends gg{constructor(t,s){super(t,s),this.Flt=this.Rlt[0],this.Olt=!!this.Rlt[1],this.Dlt=this.Rlt[2],this.klt=!!this.Rlt[3]}zn(){super.zn()}o9(){return this.Flt}pat(){return this.Olt}u9(){return this.Dlt}mat(){return this.klt}i5(){return Object.assign(super.i5(),{startAnchor:this.Flt,startEnable:!!this.Olt,endAnchor:this.Dlt,endEnable:!!this.klt})}e5(t){t&&(super.e5(t),this.Flt=t.startAnchor,this.Olt=!!t.startEnable,this.Dlt=t.endAnchor,this.klt=!!t.endEnable)}}class wg extends gg{constructor(t,s){super(t,s),this.Llt=this.Rlt[0],this.Nlt=this.Rlt[1]}zn(){super.zn()}yat(){return this.Llt}gat(){return this.Nlt}i5(){return Object.assign(super.i5(),{direction:this.Llt,revolutions:this.Nlt})}e5(t){t&&(super.e5(t),this.Llt=t.direction,this.Nlt=t.revolutions)}}mg.vlt=class{constructor(t,s){this.Blt=s,this.Wlt=[],mg.W6.vat(this.Wlt,t,{Tat:0,map:new Map([["cubic-bezier",yg],["angle",wg]])},this)}zn(){this.Blt=null;for(const t of this.Wlt)t.zn();mg.Sh(this.Wlt),this.Wlt=null}jlt(){return this.Blt}Glt(){return this.Wlt}*Vlt(){for(const t of this.Wlt)yield t}i5(){return{addonDataItemsJson:this.Wlt.map(t=>t.i5())}}e5(t){t&&mg.W6.xat(this.Wlt,t.addonDataItemsJson,{Tat:"id",map:new Map([["cubic-bezier",yg],["angle",wg]])},this)}}}{const Sg=self._s;let vg=0;Sg.qot=class extends Sg.v8{constructor(t,s){super("tween-"+vg++,t,s),this.Wc="",this.Hlt=!1,this.Ult="start-value",this.Git=null,this.zlt=null,this.Jlt=null,this.$lt=null,this.snt=null,this.qlt=null}Ltt(t){const s=Sg.Un(Sg.Event,"tweenstatereleased");s.Xlt=this,t.dispatchEvent(s)}X_(){return 1}att(){for(const t of this.itt.Wtt().Btt())this.ett.push(Sg.Ylt.UG(this,t));this.snt=this.ett[0]}eit(){const t=this.itt.Wtt().nit(),s=Sg.Ylt.UG(this,t);return this.ett.push(s),this.Klt(),s}Klt(){this.snt=this.ett[0]}Oq(t){return this.snt.fit()[0]}Rnt(t){this.Zlt=t}Iq(){const t=this.L7();if(!t||!t.length)return;const s=t[0];if(this.snt=s,!s)return;const i=s.Iq();return s.Hit()?i:void 0}Qlt(t){this.$lt=t}tut(t){this.Jlt||(this.Jlt=[]),this.Jlt.push(t)}sut(t){this.zlt||(this.zlt=[]),this.zlt.push(t)}iut(t){if(!this.Jlt)return;const s=this.Jlt.indexOf(t);-1!==s&&this.Jlt.splice(s,1)}eut(t){if(!this.zlt)return;const s=this.zlt.indexOf(t);-1!==s&&this.zlt.splice(s,1)}nut(t,s){for(const i of this.ett)for(const e of i.Oit){if(e.dit()!==s)continue;const i=e.Bit(),n=e.pnt(),r=i.Dnt(n);r.lrt(t),r.rrt(t)}}rut(t){for(const s of this.ett)for(const i of s.Oit)if(i.dit()===t)return i}hut(t){let s=!1;for(const i of t){const t=this.rut(i);t&&(this.nut(t.Xnt(),i),s=!0)}if(s){if(this.est()){const t=this.aq()-this.qO();this.oq(t);for(const s of this.ett)s.uet(t);this.Ist(0)}else{const t=this.qO();this.oq(t);for(const s of this.ett)s.uet(t);this.Ist(t)}this.Pst()}}out(t,s){const i=this.rut(s);if(!i)return;const e=i.Bit(),n=i.pnt(),r=e.Yrt(n);r.hq(this.aq()),r.lrt(t),r.rrt(t)}aut(t){this.Wc=t}Rq(){return this.Wc}lut(t){this.Ult=t}uut(){return this.Ult}Eq(t){this.Hlt=t}Aq(){return this.Hlt}ast(){if(this.Jlt)for(const t of this.Jlt)t(this);if(!this.p7())for(const t of this.ett)t.$et()}gst(){this.xtt=this.Nc.kN()}g7(){if(!this._tt&&(this._tt=!0,this.zlt))for(const t of this.zlt)t(this)}hq(t){this.cut(),super.hq(t)}Ost(t){Sg.Qi(t)||(t=this.aq()),t<0?this.ctt=0:t>=this.aq()?this.ctt=this.aq():this.ctt=t,this.snt.Dst()}h7(t){if(!this.m7()&&"current-state"===this.uut())for(const t of this.ett)t.Jet();super.h7(t)}eq(t=!1){if(super.eq(t),!this.p7())for(const t of this.ett)t.zet()}Bf(t=!0,s=!1){this.cut(),super.Bf(t,s)}cut(){for(const t of this.ett){const s=t=>{const s=t.qO(),i=this.aq();return 0!==s&&s!==i};t.Vet(s),t.Uet(s)}}n8(){if(this.sq())return!0;const t=this.Iq();return!(t&&t.cU().WQ()||(this.stt.i7(this),this.Hst(),0))}u7(t,s,i){if(this.Git||(this.Git=this.Iq()),!this.Git||this.Git.wX())return this.eq(!0),void this.gst();const e=this.Git.WN();if(-1!==e&&(t=i*e),0===t&&0===this.Itt)return;this.Itt=t;const n=this.ctt+this.ftt+t*this.dtt,r=this.itt.qst;n<0?(this.ctt=0,this.ftt=-n):n>=r?(this.ctt=r,this.ftt=this.ctt-n):(this.ctt=n,this.ftt=0);let h=!1,o=!1;const a=this.uq(),l=this.fq();if(a||l?a&&!l?this.dtt>0?this.ctt>=r&&(this.Ost(0),this.fut(Sg.gut.mut.QB.dut),this.fut(Sg.gut.mut.QB.yut),o=!0):this.ctt<=0&&(this.Ost(r),this.fut(Sg.gut.mut.QB.dut),this.fut(Sg.gut.mut.QB.yut),o=!0):!a&&l?this.dtt>0?this.ctt>=r&&(this.Ist(r),this.pq(-1*this.mq()),o=!0,1===this.ptt?this.gtt<this.C$()?(this.gtt++,this.fut(Sg.gut.mut.QB.dut),this.fut(Sg.gut.mut.QB.yut),this.fut(Sg.gut.mut.QB.wut),this.fut(Sg.gut.mut.QB.Sut),this.IsPlaying()?this.ptt=0:this.mtt=0):(this.fut(Sg.gut.mut.QB.wut),this.fut(Sg.gut.mut.QB.Sut),h=!0):0===this.ptt&&(this.fut(Sg.gut.mut.QB.wut),this.fut(Sg.gut.mut.QB.Sut),this.IsPlaying()?this.ptt=1:this.mtt=1)):this.ctt<=0&&(this.Ist(0),this.pq(-1*this.mq()),o=!0,1===this.ptt?this.gtt<this.C$()?(this.gtt++,this.fut(Sg.gut.mut.QB.dut),this.fut(Sg.gut.mut.QB.yut),this.fut(Sg.gut.mut.QB.wut),this.fut(Sg.gut.mut.QB.Sut),this.IsPlaying()?this.ptt=0:this.mtt=0):(h=!0,this.fut(Sg.gut.mut.QB.wut),this.fut(Sg.gut.mut.QB.Sut)):0===this.ptt&&(this.fut(Sg.gut.mut.QB.wut),this.fut(Sg.gut.mut.QB.Sut),this.IsPlaying()?this.ptt=1:this.mtt=1)):a&&l&&(this.dtt>0?this.ctt>=r&&(this.Ist(r),this.pq(-1*this.mq()),o=!0,0===this.ptt&&(this.fut(Sg.gut.mut.QB.wut),this.fut(Sg.gut.mut.QB.Sut)),1===this.ptt&&(this.fut(Sg.gut.mut.QB.dut),this.fut(Sg.gut.mut.QB.yut),this.fut(Sg.gut.mut.QB.wut),this.fut(Sg.gut.mut.QB.Sut)),this.IsPlaying()?(this.ptt++,this.ptt=Sg.wrap(this.ptt,0,2)):(this.mtt=this.ptt+1,this.mtt=Sg.wrap(this.mtt,0,2))):this.ctt<=0&&(this.Ist(0),this.pq(-1*this.mq()),o=!0,0===this.ptt&&(this.fut(Sg.gut.mut.QB.wut),this.fut(Sg.gut.mut.QB.Sut)),1===this.ptt&&(this.fut(Sg.gut.mut.QB.dut),this.fut(Sg.gut.mut.QB.yut),this.fut(Sg.gut.mut.QB.wut),this.fut(Sg.gut.mut.QB.Sut)),this.IsPlaying()?(this.ptt++,this.ptt=Sg.wrap(this.ptt,0,2)):(this.mtt=this.ptt+1,this.mtt=Sg.wrap(this.mtt,0,2)))):this.dtt>0?this.ctt>=r&&(this.gtt<this.C$()?(this.gtt++,this.Ost(0),this.fut(Sg.gut.mut.QB.dut),this.fut(Sg.gut.mut.QB.yut),o=!0):(this.Ist(r),h=!0)):this.ctt<=0&&(this.gtt<this.C$()?(this.gtt++,this.Ost(r),this.fut(Sg.gut.mut.QB.dut),this.fut(Sg.gut.mut.QB.yut),o=!0):(this.Ist(0),h=!0)),!this.sq()&&this.IsPlaying()){if(h)return this.snt.Xst(),this.eq(!0),void this.gst();this.snt.Sc(this.ctt,!0,!1,o,this.Ctt,!1),this.Ctt&&(this.Ctt=!1)}}fut(t){const s=this.Iq();this.$lt.vut(this),this.Nc.$U(t,s,this.$lt.c$()),this.$lt.but()}i5(){const t=super.i5(),s=this.$tt();return Object.assign(t,{tweenDataItemJson:s.i5(),id:this.Wc,destroyInstanceOnComplete:this.Hlt,initialValueMode:this.Ult})}e5(t){t&&(this.$tt().e5(t.tweenDataItemJson),super.e5(t),this.Wc=t.id,this.Hlt=t.destroyInstanceOnComplete,this.Ult=t.initialValueMode,this.Klt())}static IsPlaying(t){return t.IsPlaying()}static vq(t){return t.vq()}static Mut(t){return!!t.fq()&&0===t.ist()}static xut(t){return!!t.fq()&&1===t.ist()}static Tut(t){const s=t.runtime.Vtt(),i=new Sg.Sat;if(t.json){i.e5(t.json.tweenDataItemJson);const e=new Sg.qot(i,s);return e.e5(t.json),e}{const e=new Sg.qot(i,s);Sg.xe(t.Gut)||(t.Gut=[t.Gut]),e.aut(t.id),e.nst(t.tags),e.lut(t._ut),e.Eq(t.Cut),e.lq(t.loop),e.cq(t.Iut),e.oq(t.time),e.Xtt(0),e.Ktt("default"),e.Ztt(t.Gut[0].Put),e.Qtt(t._$);const n=e.eit();n.aet(t.f$.TU()),n.Ktt("default"),n.Ztt(t.Gut[0].Put),n.fet(!0),n.det(t.f$.cU().ML());const r=t.f$.s$(),h=r.yet()?r.met():t.f$.DB().Vg(),o=r.yet()?r.vet():t.f$.DB().Zg();n.pet(h),n.wet(o);const a=n.Net();a.hq(0),a.Cq("noease"),a.fet(!0),a.nst("");const l=n.Net();l.hq(t.time),l.Cq("noease"),l.fet(!0),l.nst("");for(const s of t.Gut){const i=n.Wet();i.Mnt(s.Aut),i.Gnt(s.Eut),i.Pnt(s.ret),i.Rnt(s.type),i.Lnt(NaN),i.Bnt(NaN),i.Ktt("default"),i.Ztt(s.Put),i.fet(!0);const e=i.irt();e.Fnt(s.valueType),e.hq(0),e.Cq(s.Rut),e.fet(!0),e.lrt(s.Fut),e.rrt(s.Fut);const r=i.irt();r.Fnt(s.valueType),r.hq(t.time),r.Cq(s.Rut),r.fet(!0),r.lrt(s.Out),r.rrt(s.Out),i.Utt()}return e}}static aet(t,s){if(!isNaN(s))for(const i of t.L7())i.aet(s)}static Qlt(t,s){t.Qlt(s)}Dut(t,s){return this.qlt||(this.qlt=Sg.Un(self.xq,this,t,s)),this.qlt}}}{const bg=self._s;bg.Ylt=class extends bg.jtt{constructor(t,s){super(t,s),this.kut=null,this.Lut=null}static UG(t,s){return bg.Un(bg.Ylt,t,s)}Nut(){1===this.Oit.length?this.kut=this.Oit[0]:(this.kut=this.Oit[0],this.Lut=this.Oit[1])}Dit(){for(const t of this.bit.Bit().Nit())this.Oit.push(bg.But.UG(this,t));this.Nut()}Wet(){const t=this.bit.Bit().jet(),s=bg.But.UG(this,t);return this.Oit.push(s),this.Nut(),s}h7(){if(this.Vit(),!this.Hit()&&this.Jtt())return;const t=this.jit().est()?0:this.let();for(const s of this.Oit)s.h7(t),0===this.kit&&1===s.xet()&&(this.kit=1),0===this.g8&&1===s.o7()&&(this.g8=1);this.Lit=0,this.Oit.some(t=>t.$st())&&(this.Lit=1),this.Eit=this.Tet(t),this.Iit=!1,this.Pit=!1,this.Sc(t)}Yst(){}Sc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){if(this.Git||this.Iq(),this.Git)return!this.Git.wX()&&(!r||!this.cU().WQ())&&(this.Lut?(this.kut.Sc(t,i,e,h),this.Lut.Sc(t,i,e,h)):this.kut.Sc(t,i,e,h),void(0!==this.kut.xet()&&(this._it||(this._it=this.Git.DB()),this._it&&this._it.Mz())))}tit(){}e5(t){super.e5(t),this.Nut()}}}{const Mg=self._s;Mg.But=class extends Mg.Wit{constructor(t,s){super(t,s),this.Wut=!1}static UG(t,s){return Mg.Un(Mg.But,t,s)}Sc(t,s=!1,i=!1,e=!1){let n,r;if(this.Wut)n=this.rnt[0],r=this.rnt[1];else if(s)n=this.ent.Hnt(t,this.int),r=n.j7();else{if(this.ant){const s=this.jit(),i=this.ant.j7(),e=this.ant.qO(),n=i?i.qO():s.aq();(t<=e||t>=n)&&(this.ant=this.ent.Hnt(t,this.int))}else this.ant=this.ent.Hnt(t,this.int);n=this.ant,r=n.j7()}this.nnt.Sc(t,n,r,s,i,e)}irt(){const t=this.int.ont().ert();return this.ant=null,this.Wut=this.Wnt().length<=2,t}Uet(t){this.ant=null,this.int.ont().nrt(t),this.Wut=this.Wnt().length<=2}i5(){return{sourceAdapterJson:this.Utt().i5(),basic:this.Wut}}e5(t){t&&(this.Utt().e5(t.sourceAdapterJson),this.Wut=t.basic)}}}{const xg=self._s,Tg=self.Vu;xg.vc=class extends xg.Vn{constructor(t,s=!0){super(),this.qn=t[0],this.jut=t[2],this.Vut=[];for(const s of t[1]){const t=xg.Hut.UG(this,s);this.Vut.push(t)}for(let t=0;t<this.Vut.length;t++){const s=this.Vut[t],i=this.Vut[t+1],e=this.Vut[t-1];s.olt(i),s.xlt(e)}this.Uut=new Map,this.zut=new Map,this.Jut(),s&&Tg.Mc(this.qn,(t,s,i,e)=>this.Sc(t,s,i,e),null,{transition:this})}static UG(t){return xg.Un(xg.vc,t)}zn(){for(const t of this.Vut)t.zn();xg.Sh(this.Vut),this.Vut=null,this.Uut.clear(),this.Uut=null,this.zut.clear(),this.zut=null}bc(t){this.jut=!!t}$ut(t){const s=this.zut.get(t);if(s)return s;for(const s of this.Vut)if(s.qut()===t)return this.zut.set(t,s),s}Xut(t){for(let s=this.Vut.length-1;s>=0;s--){const i=this.Vut[s],e=i.qut();if(e<=t){let s=i;if(e<t)return s;if(e===t){for(;s;){const t=s.V7();if(!t)break;if(t.qut()!==s.qut())break;s=t}return s}}}}Sc(t,s,i,e){let n=t/e;if(this.jut){const n=this.$ut(0),r=this.$ut(1),h=s+(s+i)*n.Yut(),o=(s+i)*r.Yut()-h;return 0===e?h+o:Tg.Tc(t,h,o,e)}0===e&&(n=1);let r=this.Xut(n),h=r.j7();if(!h){const t=r.V7(),s=r;r=t,h=s}const o=h.qut()-r.qut(),a=xg.Xn(n,r.qut(),h.qut(),0,o);if(r.Kut()||0===o){const t=s+(s+i)*r.Yut(),e=(s+i)*h.Yut()-t;return 0===o?1===a?t+e:t:Tg.Tc(a,t,e,o)}const l=r.qut(),u=r.Yut(),c=r.qut()+r.Zut(),f=r.Yut()+r.Qut(),d=h.qut()+h.tct(),p=h.Yut()+h.sct(),m=h.qut(),g=h.Yut();let y=Tg.rc("spline")(a,l,u,c,f,d,p,m,g,this.Uut.get(r));return y+=r.Yut(),(1-y)*s+y*(s+i)}Jut(){this.Uut.clear();for(let t=0;t<this.Vut.length-1;t++){const s=this.Vut[t];if(!s.pat())continue;const i=s,e=this.Vut[t+1];if(!e.mat())continue;const n=i.qut(),r=i.qut()+i.Zut(),h=e.qut()+e.tct(),o=e.qut();this.Uut.set(i,Tg.Gc(n,r,h,o))}}}}{const Gg=self._s;Gg.Hut=class extends Gg.Vn{constructor(t,s){super(),this.ict=t,this.ect=s[0],this.nct=s[1],this.rct=s[2],this.hct=s[3],this.oct=s[4],this.act=s[5],this.Olt=s[6],this.klt=s[7],this.lct=s[8],this.rlt=null,this.blt=null}zn(){this.ict=null}static UG(t,s){return Gg.Un(Gg.Hut,t,s)}olt(t){this.rlt=t}j7(){return this.rlt}xlt(t){this.blt=t}V7(){return this.blt}qut(){return this.ect}Yut(){return this.nct}Zut(){return this.rct}Qut(){return this.hct}tct(){return this.oct}sct(){return this.act}pat(){return this.Olt}mat(){return this.klt}Kut(){return"linear"===this.lct}uct(){return"cubic"===this.lct}}}{const _g=self._s;_g.cct=class extends _g.Vn{constructor(t){super(),this.Nc=t,this.fct=[]}zn(){for(const t of this.fct)t.zn();_g.Sh(this.fct),this.fct=null}UG(t){this.fct.push(_g.vc.UG(t))}}}{const Cg=self._s;Cg.dct=class extends Cg.Vn{constructor(t){super(),this.Nc=t,this.pct=null,this.mct=null,this.o8=t=>this.a8(t.f$)}zn(){if(this.y8(),this.pct){for(const t of this.pct.values())t.clear();this.pct.clear()}this.pct=null,this.Nc=null}UG(t){if(this.pct||(this.pct=new Map),!t)return;const s=t[0][16][0],i=t[1];this.pct.has(i)||this.pct.set(i,new Map),this.pct.get(i).set(s,t)}w8(){const t=this.Nc.wf();t&&t.addEventListener("instancedestroy",this.o8)}y8(){const t=this.Nc.wf();t&&t.removeEventListener("instancedestroy",this.o8)}gct(){return!!this.pct&&0!==this.pct.size}yct(t,s){let i=0;if(i=t instanceof Cg.wct?t.ML():t,!this.pct.has(i))return;const e=this.pct.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}Sct(t,s){this.mct||(this.mct=new WeakMap),this.mct.has(t)||this.mct.set(t,s)}vct(t){if(!this.mct)return"";return this.mct.get(t)||""}a8(t){this.mct&&this.mct.has(t)&&this.mct.delete(t)}}}{const Ig=self._s;Ig.bct=class{constructor(t){this.Nc=t,this.Mct=new Ig.xct}zn(){this.Mct.zn(),this.Mct=null,this.Nc=null}aW(){return this.Nc}UG(t){this.Mct.Bu(t)}Tct(t){return this.Mct.zs(t)}Gct(){return this.Mct.Gct()}}}{const Pg=self._s;Pg._ct=class{constructor(t,s,i,e,n,r,h){this.Nc=n.aW(),this.Cct=n,this.Ict=t,this.Pct=i,this.Act=e,this.Ew=s,this.j6=r,this.Ect=h??r.Iq().TU(),this.Rct(),this.Fct=this.Dct?.Oct()??-1,this.kct=[],this.Lct=null,this.Nct=NaN,this.Bct=null,this.Wct=null,this.jct=null,this.Vct="",this.Hct=null,this.Uct="",this.zct="",this.Jct=0,this.$ct=!1,this.btt=!1}zn(){this.btt||(Pg.Sh(this.kct),this.kct=null,this.Nc=null,this.Cct=null,this.Act=null,this.j6=null,this.Lct=null,this.Nct=NaN,this.Bct&&this.Bct.clear(),this.Bct=null,this.Wct=null,this.jct=null,this.Vct="",this.Hct=null,this.Uct="",this.zct="",this.btt=!0)}Jn(){return this.btt}qct(){return this.Cct}aW(){return this.Nc}Pc(){return this.Ict}Xct(){return this.Act}tq(){return this.Ew}E8(){return this.j6||(this.j6=this.Nc.PB(this.Ect).s$()),this.j6}Yct(){return this.Kct(this.Fct)}Zct(){const t=this.Yct();return t?t.tq():""}Qct(){const t=this.Yct();return t?t.gq():[]}tft(t){const s=this.Qct();if(!s)return!1;if(!s.length)return!1;const i=Pg._ct.rst(t);return!(!i||!i.length)&&i.every(Pg._ct.ost,s)}sft(t,s){const i=this.Qct();if(!i)return!1;if(!i.length)return!1;const e=Pg._ct.rst(t);return!(!e||!e.length)&&e.every(t=>Pg._ct.ift.call(i,t,s))}static ost(t){const s=this;return""===t?1===s.length&&""===s[0]:s.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static rst(t){return t.trim().split(" ")}static ift(t,s){const i=this;return""===t?1===i.length&&""===i[0]:i.some(i=>Pg.compare(i.trim(),s,t.trim()))}eft(t){const s=this.Yct();if(s){if(Pg.Qi(t)){const i=s.nft(),e=i?i[t]:void 0;if(Pg.Qi(e))return this.Kct(e)}if("string"==typeof t)for(const i of s.nft()){const s=this.Kct(i);if(s.rq(t))return this.Kct(s.Oct())}}}rft(t){const s=this.eft(t);return s?s.tq():""}hft(t){const s=this.eft(t);return s?s.gq():""}oft(t){const s=this.Yct();if(!s)return-1;const i=s.nft();if(!i)return-1;const e=this.eft(t);return e?i.indexOf(e.Oct()):-1}aft(){const t=this.Yct();if(!t)return 0;const s=t.nft();return s?s.length:0}Kct(t){return this.Act.Kct(t)}Bf(){this.uft().lft(!0)}lft(t){if(this.cft()){for(const[t,s]of this.cft().entries())s.lft(!1);this.cft().clear()}if(this.Bct=null,this.Lct=null,this.fft=null,this.Wct=null,this.Vct="",this.Hct=null,this.Uct="",this.zct="",this.kct=[],t){this.Cct.dft(this);const t=this.Dct.Oct();t!==this.Fct&&this.pft(t)}else this.Fct=this.Dct.Oct()}mft(){const t=this.Act.Kct(this.Fct);return t?t.yft().gft():0}wft(t){return!(t<0)&&t===this.Sft()}Sft(){const t=this.Act.Kct(this.Fct);if(!t)return-1;let s=t.yft().vft();return s?t.yft().bft().indexOf(s):-1}Mft(t){const s=this.xft(t);return s?s.Pc():""}Tft(t){let s;return Pg.Qi(t)&&(s=this.xft(t)),"string"==typeof t&&(s=this.Gft(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Cnt():""}_ft(t,s){if(t.cet())return t.Oct();{const i=t.yft().vft();if(!i)return s.Oct();const e=i.Cft();if(!Pg.Qi(e))return s.Oct();const n=this.Kct(e);return n?this._ft(n,s):s.Oct()}}Ift(t,s){if(t.cet()){if("reference"===t.X_()){const s=t.Pft(),i=t.Aft(),e=this.Cct.Tct(s);if(!e)return[-1,null];const n=e.Eft(i);return n?this.Ift(n,e):this.Ift(e.Rft(),e)}return[t.Oct(),s]}{const i=t.yft().vft();if(!i)return[-1,null];const e=i.Cft();if(!Pg.Qi(e))return[-1,null];const n=s.Kct(e);return n?this.Ift(n,s):[-1,null]}}Fft(t,s){let i=this.Kct(t);if(i){if(!i.cet()){const s=this.Kct(this.Fct);t=this._ft(i,s)}if(Pg.Qi(t)&&t!==this.Fct)if(i=this.Kct(t),"reference"===i.X_()){const e=i.Pft(),n=i.Aft(),r=this.Cct.Tct(e);let h=r.Eft(n);if(h){const i=this.Ift(h,r);if(-1===i[0])return;s(this.Fct,t,i[1],i[0])}else s(this.Fct,t)}else s(this.Fct,t)}}Oft(t){let s;if(Pg.Qi(t)&&(s=this.xft(t)),"string"==typeof t&&(s=this.Gft(t)),!s)return;let i=s.Cft();Pg.Qi(i)&&this.Fft(i,(t,s,i,e)=>{this.kct.push(t),this.pft(s,i,e)})}Dft(){const t=this.kft();if(!t)return;const s=t.Cft();Pg.Qi(s)&&this.Fft(s,(t,s,i,e)=>{this.kct.push(t),this.pft(s,i,e)})}Lft(t){const s=this.Act.Eft(t);if(!s)return;const i=s.Oct();Pg.Qi(i)&&this.Fft(i,(t,s,i,e)=>{this.kct.push(t),this.pft(s,i,e)})}Nft(){const t=this.kct.pop();Pg.Qi(t)?this.pft(t):this.Bft()&&(this.Cct.dft(this.Bft(),!0,!1,!1),this.Bft().pft(this.Wft()),this.uft().jft(this.Bft()))}Vft(t){if(!this.Yct())return;const s=this.eft(t);if(s){if(!s.cet())return;const t=s.Oct();if(!Pg.Qi(t))return;this.kct.push(this.Fct),this.pft(s.Oct())}}Hft(t){if(Pg.Qi(t))return!!this.Act.Kct(this.Fct).yft().bft()[t];if("string"==typeof t){const s=this.Act.Kct(this.Fct).yft().bft();for(let i=0;i<s.length;i++)if(s[i].Pc()===t)return!0;return!1}return!1}Uft(){this.$ct=!0}zft(){return this.Jct>0}Jft(){this.Jct++}$ft(){this.Jct--,0===this.Jct&&this.$ct&&this.Cct.qft(this)}pft(t,s,i){const e=this.Fct,n=this.E8().Iq();this.Jft(),this.Cct.Xft(this),this.Nc.$U(Pg.sW.Kft.QB.Yft,n),this.Nc.$U(Pg.sW.Kft.QB.Zft,n),this.Nc.$U(Pg.sW.Kft.QB.Qft,n),this.Nc.$U(Pg.sW.Kft.QB.tdt,n),this.Fct=t;let r=this.Kct(this.Fct);if("dictionary"===r.X_()&&(this.Nc.$U(Pg.sW.Kft.QB.sdt,n),this.Nc.$U(Pg.sW.Kft.QB.idt,n),this.Nc.$U(Pg.sW.Kft.QB.edt,n),this.Nc.$U(Pg.sW.Kft.QB.ndt,n)),this.Cct.rdt(),this.$ft(),!this.Jn()&&(r=this.Kct(this.Fct),"reference"===r.X_())){const t=s?s.Pc():r.Pft();if(this.hdt(r)){this.kct.pop();const t=this.odt(r);this.Cct.dft(t,!0,!0,!1),t.adt(this,e),this.uft().jft(t)}else{const s="number"==typeof i?i:r.Aft();if(t){this.kct.pop();let i=r.ldt();if(i){let t=this.Cct.udt(i);for(;t;)i=Pg._m(i),t=this.Cct.udt(i)}else{i=`${t}-ref`;let s=this.Cct.udt(i);for(;s;)i=Pg._m(i),s=this.Cct.udt(i)}const n=this.Cct.cdt(t,s,i,this.j6,!0);n.adt(this,e),this.fdt(r,n);const h=this.uft();n.ddt(h),h.jft(n)}}}}kft(){const t=this.Act.Kct(this.Fct);return t?t.yft().vft():null}xft(t){const s=this.Act.Kct(this.Fct);if(!s)return null;const i=s.yft().bft();if(!i)return null;return i[t]||null}Gft(t){const s=this.Act.Kct(this.Fct);if(!s)return null;return s.yft().pdt(t)||null}Rct(t){if("number"==typeof t){let s=this.Kct(t);s||(s=this.Act.Rft()),this.Dct=s}else if("number"==typeof this.Pct){let t=this.Kct(this.Pct);t||(t=this.Act.Rft()),this.Dct=t}else{let t=this.Act.Eft(this.Pct);t||(t=this.Act.Rft()),this.Dct=t}}i5(){return this.$ct?null:{flowchartName:this.Ict,flowchartTag:this.Ew,startNodeTag:this.Pct,currentNodeId:this.Fct,previousNodeIds:this.kct,pluginUID:this.j6.Iq().TU(),reference:{previousFlowchartTag:this.Bft()?this.Bft().tq():"",previousStartNodeId:Pg.Qi(this.Wft())?this.Wft():NaN,referencesJson:this.mdt(),currentReferenceFlowchartTag:this.gdt()?this.gdt().tq():"",rootFlowchartTag:this.uft()?this.uft().tq():""}}}mdt(){if(!this.ydt())return null;const t=[];for(const[s,i]of this.cft().entries())t.push({flowchartElementId:s.Oct(),flowchartStateTag:i.tq()});return t.length?t:null}e5(t){if(t){if(this.Ict=t.flowchartName,this.Ew=t.flowchartTag,this.Pct=t.startNodeTag,this.Fct=t.currentNodeId,this.kct=t.previousNodeIds,this.Ect=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Vct=s.previousFlowchartTag,this.Nct=s.previousStartNodeId,this.Hct=s.referencesJson,this.Uct=s.currentReferenceFlowchartTag,this.zct=s.rootFlowchartTag}this.Rct()}}Bft(){return"string"==typeof this.Vct&&this.Vct&&(this.Lct=this.Cct.udt(this.Vct),this.Vct=""),this.Lct}Wft(){return this.Nct}adt(t,s){this.Lct=t,this.Nct=s}gdt(){return"string"==typeof this.Uct&&this.Uct&&(this.Wct=this.Cct.udt(this.Uct),this.Uct=""),this.Wct}jft(t){this.Wct=t,this.Wct===this&&(this.Wct=null)}uft(){return"string"==typeof this.zct&&this.zct&&(this.jct=this.Cct.udt(this.zct),this.zct=""),this.jct?this.jct:this}ddt(t){this.jct=t}ydt(){return this.wdt(),!!this.Bct}hdt(t){return this.wdt(),this.Bct&&this.Bct.has(t)}wdt(){if(this.Hct){this.Bct&&this.Bct.clear(),this.Bct||(this.Bct=new Map);for(const t of this.Hct){const s=this.Cct.udt(t.flowchartStateTag),i=s.Kct(t.flowchartElementId);this.Bct.set(i,s)}this.Hct=null}}cft(){return this.wdt(),this.Bct}odt(t){return this.wdt(),this.Bct.get(t)}fdt(t,s){this.Bct||(this.Bct=new Map),this.Bct.set(t,s)}}}{const Ag=self._s;Ag.Sdt=class{constructor(t){this.Nc=t,this.vdt=new Map,this.bdt=null,this.Mdt=[],this.xdt=()=>this.f8(),this.Tdt=null}zn(){Ag.Sh(this.Mdt),this.Mdt=null,this.vdt.clear(),this.vdt=null,this.bdt=null,this.Nc=null,this.Tdt=null}aW(){return this.Nc}Tct(t){return this.Nc.qct().Tct(t)}cdt(t,s,i,e,n,r){const h=this.Nc.qct().Tct(t);if(!h)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.vdt.has(i)){const t=this.vdt.get(i);t&&this.qft(t)}const o=new Ag._ct(t,i,s,h,this,e,r);return this.vdt.set(i,o),n&&this.dft(o,!0),o}qft(t){if(t.Uft(),t.zft())return;const s=t.tq();this.vdt.delete(s),t.zn(),this.bdt===t&&(this.bdt=null)}Gdt(t){t.Bf()}udt(t){return this.vdt.get(t)}Xft(t){this.Mdt.push(t)}rdt(){this.Mdt.pop()}dft(t,s=!1,i=!1,e=!0){if(e){const s=t.gdt();t=s||t}t!==this.bdt&&(this._dt(),this.Cdt(t,s,i))}Idt(t){return"string"==typeof t?this.udt(t):this.Mdt.length?this.Mdt[this.Mdt.length-1]:this.bdt}_dt(){if(!this.bdt)return;if(this.bdt.Jn())return;const t=this.bdt.E8().Iq();this.bdt.Jft(),this.Xft(this.bdt),this.Nc.$U(Ag.sW.Kft.QB.Pdt,t),this.rdt(),this.bdt.$ft()}Cdt(t,s=!1,i=!1){if(this.bdt=t,!this.bdt)return;if(this.bdt.Jn())return;const e=this.bdt.E8().Iq();this.bdt.Jft(),this.Xft(this.bdt),this.Nc.$U(Ag.sW.Kft.QB.Adt,e),!0!==i&&"number"!=typeof i||this.bdt.Rct(i),s&&(this.Nc.$U(Ag.sW.Kft.QB.sdt,e),this.Nc.$U(Ag.sW.Kft.QB.idt,e),this.Nc.$U(Ag.sW.Kft.QB.edt,e),this.Nc.$U(Ag.sW.Kft.QB.ndt,e)),this.rdt(),this.bdt.$ft()}i5(){return{flowchartJsonObjects:[...this.vdt.values()].map(t=>t.i5()),currentFlowchartTag:this.bdt?this.bdt.tq():null}}e5(t){if(!t)return;this.Tdt=t;const s=new Map;for(const t of this.Tdt.flowchartJsonObjects){const i=t.flowchartTag;if(this.vdt.has(i)){const e=this.vdt.get(i);e.e5(t),s.set(i,e)}else{const i=this.cdt(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);i.e5(t),s.set(t.flowchartTag,i)}}for(const[t,i]of this.vdt.entries())s.has(t)||i.zn();this.vdt.clear(),this.vdt=s,this.Nc.L4()?this.Nc.wf().addEventListener("afterload",this.xdt):this.f8()}f8(){this.Nc.wf().removeEventListener("afterload",this.xdt);const t=this.vdt.get(this.Tdt.currentFlowchartTag);t&&this.dft(t,!0),this.Tdt=null}}}{const Eg=self._s;Eg.xct=class{constructor(){this.Edt=new Map}zn(){for(const t of this.Edt.values())t.zn();this.Edt.clear(),this.Edt=null}Bu(t){const s=new Eg.Rdt(t),i=s.Pc();this.Edt.set(i,s)}zs(t){return this.Edt.get(t)}Gct(){return!!this.Edt.size}static Fdt(t,s,i,e){if(s)for(const n of s){const s=new i(n,e);t.push(s)}}}}{const Rg=self._s;Rg.Rdt=class{constructor(t){this.qn=t[0],this.Odt=new Rg.Ddt(t[1],this)}zn(){this.Odt.zn(),this.Odt=null}kdt(){return this.Odt}Kct(t){return this.Odt.Kct(t)}Eft(t){return this.Odt.Eft(t)}Rft(){return this.Odt.Rft()}Pc(){return this.qn}}}{const Fg=self._s;class Og{constructor(t,s){this.Odt=s,this.Jc=t[7],this.Ldt=t[0],this.Ew=t[1],this.Ew?this.Ptt=this.Ew.trim().split(" ").map(t=>t.trim()):this.Ptt=[],this.Ndt=t[2],this.Bdt=null,this.Wdt=null,this.elt=!1,"dictionary"===this.Jc&&(this.Bdt=t[3],this.Wdt=t[4],this.elt=t[8]),this.jdt=t[6],this.Vdt=null,this.Hdt=null,this.Udt=null,"reference"===this.Jc&&(this.Vdt=t[8],this.Hdt=t[9],this.Udt=t[10],this.elt=t[11]),this.zdt=new Fg.Jdt(t[5],this)}zn(){this.Odt=null}kdt(){return this.Odt}yft(){return this.zdt}Oct(){return this.Ldt}tq(){return this.Ew}gq(){return this.Ptt}rq(t){if(!this.Ptt)return!1;if(!this.Ptt.length)return!1;const s=Fg._ct.rst(t);return!(!s||!s.length)&&s.every(Fg._ct.ost,this.Ptt)}$dt(){return this.jdt}qdt(t){this.jdt=!!t}Xdt(){if("dictionary"===this.Jc)return!0;if("reference"===this.Jc)return!1;throw new Error(`unexpected flowchart node type: ${this.Jc}`)}nft(){return this.Ndt}Ydt(){return this.Bdt}Kdt(){return this.Wdt}X_(){return this.Jc}cet(){return this.elt}Pft(){return this.Vdt}Aft(){return this.Hdt}ldt(){return this.Udt}}Fg.Ddt=class{constructor(t,s){this.Act=s,this.Zdt=[],this.Qdt=new Map,this.tpt=new Map,this.spt=null,Fg.xct.Fdt(this.Zdt,t,Og,this);for(const t of this.Zdt){const s=t.Oct(),i=t.tq(),e=t.gq(),n=t.$dt();if(this.Qdt.set(s,t),i)for(const s of e)this.tpt.has(s)||this.tpt.set(s,new Set),this.tpt.get(s).add(t);n&&(this.spt=t);const r=t.yft();for(const t of r.ipt()){const s=t.Oct();this.Qdt.set(s,t)}}this.spt||this.ept()}zn(){this.Act=null;for(const t of this.Zdt)t.zn();Fg.Sh(this.Zdt),this.Zdt=null}Xct(){return this.Act}Kct(t){return this.Qdt.get(t)}Eft(t){if(!t||!t.length)return null;const s=[];for(const i of t.trim().split(" ")){let t=this.tpt.get(i.trim())??new Set;if(0===t.size)return null;s.push(t)}return[...s.reduce((t,s)=>s.size<t.size?s:t)].filter(t=>s.every(s=>s.has(t)))[0]}Rft(){return this.spt}*npt(){for(const t of this.Zdt)yield t}ept(){let t=0;for(const s of this.npt())s.$dt()&&t++;if(0===t){for(const t of this.npt())if(t.Xdt()&&!t.$dt())return void t.qdt(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const s of this.npt())s.Xdt()&&(s.$dt()&&t?t=!1:s.$dt()&&!t&&s.qdt(!1))}}for(const t of this.npt())if(t.Xdt()&&t.$dt())return void(this.spt=t)}}}{const Dg=self._s;class kg{constructor(t,s){this.zdt=s,this.Ldt=t[0],this.qn=t[1],this.sht=t[2],this.rpt=t[3],this.elt=t[4],this.hpt=t[5]}zn(){this.zdt=null}yft(){return this.zdt}Oct(){return this.Ldt}Pc(){return this.qn}Cnt(){return this.sht}Cft(){return this.rpt}cet(){return this.elt}opt(){return this.hpt}}Dg.Jdt=class{constructor(t,s){this.apt=s,this.lpt=[],this.upt=new Map,Dg.xct.Fdt(this.lpt,t,kg,this),this.cpt=this.lpt.filter(t=>t.cet());for(const t of this.cpt)this.upt.set(t.Pc(),t)}zn(){this.apt=null;for(const t of this.lpt)t.zn();Dg.Sh(this.lpt),this.lpt=null,Dg.Sh(this.cpt),this.cpt=null}fpt(){return this.apt}gft(){return this.cpt.length}bft(){return this.cpt}pdt(t){return this.upt.get(t)}vft(){for(const t of this.cpt)if(t.opt())return t}*ipt(){for(const t of this.cpt)yield t}}}{const Lg=self._s;Lg.dpt=class extends Lg.Vn{constructor(t){super(),this.ppt=t,this.mpt=[],this.mpt.push(Lg.Un(Lg.gpt,this)),this.Aw=0,this.ypt=this.mpt[0]}zn(){for(const t of this.mpt)t.zn();Lg.Sh(this.mpt),this.ypt=null,this.ppt=null}cU(){return this.ppt}eV(){return this.ypt}wpt(){return this.mpt[this.Aw-1]}Pu(){this.eV().Pu()}Spt(){const t=this.mpt,s=++this.Aw;if(s===t.length){const s=Lg.Un(Lg.gpt,this);t.push(s),this.ypt=s}else{const i=t[s];i.Bf(),this.ypt=i}}vpt(){const t=this.mpt,s=++this.Aw;s===t.length&&t.push(Lg.Un(Lg.gpt,this));const i=t[s];i.rd(t[s-1]),this.ypt=i}fY(){this.ypt=this.mpt[--this.Aw]}bpt(t){const s=this.mpt;for(let i=0,e=s.length;i<e;++i)s[i].bpt(t)}}}{const Ng=self._s;Ng.gpt=class extends Ng.Vn{constructor(t){super(),this.mpt=t,this.ppt=this.mpt.cU(),this.Mpt=this.ppt.aW().vN(),this.xpt=!0,this.fQ=[],this.Tpt=[]}zn(){this.Gpt(),this.mpt=null,this.ppt=null,this.Mpt=null}Gpt(){Ng.Sh(this.fQ),Ng.Sh(this.Tpt)}cU(){return this.ppt}_pt(){return this.xpt}Cpt(){return this.xpt?!!this.ppt.hV():!!this.fQ.length}iV(){return this.xpt?this.ppt.iV():this.fQ}Ipt(){return!!this.Tpt.length}Ppt(){return this.Tpt}Apt(){const t=this.iV();return t.length?t:this.Tpt}Bf(){this.xpt=!0,Ng.Sh(this.Tpt)}Pu(){this.xpt=!0}rd(t){t._pt()?this.Bf():(this.xpt=!1,Ng.Th(this.fQ,t.fQ),Ng.Sh(this.Tpt))}Ept(t){this.fQ.push(t)}Rpt(t){this.Tpt.push(t)}Fpt(t){this.xpt=!!t}Opt(){return this.fQ}Dpt(){return this.Tpt}kpt(t){this.xpt=!1,Ng.Sh(this.fQ),this.fQ.push(t)}Lpt(t){this.xpt=!1,Ng.Th(this.fQ,t)}Npt(t){this.xpt=!1,Ng.Sh(this.fQ);for(const s of t)this.fQ.push(s)}Bpt(t,s){for(const i of s)t.has(i)||this.Tpt.push(i)}Wpt(t){for(const s of t)this.fQ.push(s);Ng.Ph(this.Tpt,t)}jpt(){Ng.Sh(this.Tpt)}Vpt(t){if(t)if(this.Mpt.tY().dN().Hpt()){this._pt()&&(Ng.Sh(this.fQ),Ng.Th(this.Tpt,t.cU().iV()),this.xpt=!1);const s=this.Tpt.indexOf(t);-1!==s&&(this.fQ.push(this.Tpt[s]),this.Tpt.splice(s,1))}else this.kpt(t)}bpt(t){Ng.Ph(this.fQ,t),Ng.Ph(this.Tpt,t)}}}{const Bg=self._s;Bg.Upt=class extends Bg.Vn{constructor(t){super(),this.zpt=t,this.Nc=this.zpt.aW(),this.mpt=[],this.mpt.push(Bg.Un(Bg.Jpt,this,null)),this.Aw=0,this.$pt=[]}zn(){for(const t of this.mpt)t.zn();Bg.Sh(this.mpt),Bg.Sh(this.$pt),this.zpt=null,this.Nc=null}oN(){return this.zpt}aW(){return this.Nc}tY(){return this.mpt[this.Aw]}qpt(){return this.mpt}Xpt(){return this.Aw}sY(t){const s=this.mpt,i=++this.Aw;if(i===s.length){const i=Bg.Un(Bg.Jpt,this,t);return s.push(i),i}{const e=s[i];return e.Bf(t),e}}fY(){--this.Aw}Ypt(t){this.$pt.push(t)}Kpt(){this.$pt.pop()}SN(){const t=this.$pt;return 0===t.length?null:t.at(-1)}}}{const Wg=self._s;Wg.Jpt=class extends Wg.Vn{constructor(t,s){super(),this.mpt=t,this.Nc=this.mpt.aW(),this.Zpt=s,this.Qpt=0,this.tmt=0,this.smt=!1,this.imt=!1,this.emt=null,this.nmt=0,this.rmt=0,this.hmt=null}zn(){this.Bf(null),this.mpt=null,this.Nc=null}Bf(t){this.Zpt=t,this.Qpt=0,this.tmt=0,this.smt=!1,this.imt=!1,this.hmt=null}omt(t,s){this.Zpt=t,this.Qpt=0,this.tmt=s}amt(){this.Qpt=0,this.tmt=0}dN(){return this.Zpt}lmt(t){this.Zpt=t}umt(){return this.Qpt}cmt(t){this.Qpt=t}fmt(){return this.tmt}dmt(t){this.tmt=t}pmt(t){this.smt=!!t}mmt(){return this.smt}gmt(t){this.imt=!!t}ymt(){return this.imt}wmt(t){this.emt=t}Smt(){return this.emt}vmt(t,s){this.nmt=t,this.rmt=s}bN(){return this.nmt}MN(t){this.rmt=t}bmt(){return this.rmt}Mmt(){const t=this.Zpt;return!!t.xmt()||this.Qpt<t.Tmt()-1&&!!t.QX().length}Gmt(t){this.hmt=t}_mt(){return this.hmt}}}{const jg=self._s;jg.Cmt=class extends jg.Vn{constructor(t){super(),this.zpt=t,this.Nc=this.zpt.aW(),this.mpt=[],this.Aw=-1,this.ypt=null,this.Imt=[]}zn(){jg.Sh(this.mpt),this.zpt=null,this.Nc=null}Pmt(t){this.Imt=t;const s=this.Imt.slice(0);this.mpt.push(s),this.Aw=0,this.ypt=s}oN(){return this.zpt}aW(){return this.Nc}Amt(){return this.ypt}sY(){const t=++this.Aw,s=this.mpt;t===s.length?s.push(this.Imt.slice(0)):jg.Th(s[t],this.Imt),this.ypt=s[t]}fY(){this.ypt=this.mpt[--this.Aw]}}}{const Vg=self._s;Vg.Emt=class extends Vg.Vn{constructor(t){super(),this.zpt=t,this.Nc=this.zpt.aW(),this.mpt=[],this.Aw=-1}zn(){Vg.Sh(this.mpt),this.zpt=null,this.Nc=null}oN(){return this.zpt}aW(){return this.Nc}Rmt(){return this.Aw>=0}Amt(){return this.mpt[this.Aw]}sY(){if(++this.Aw,this.Aw===this.mpt.length){const t=Vg.Un(Vg.Fmt,this);return this.mpt.push(t),t}{const t=this.mpt[this.Aw];return t.Bf(),t}}fY(){--this.Aw}Omt(t){const s=this.mpt;for(let i=this.Aw;i>=0;--i){const e=s[i];if(e.Pc()===t)return e}return null}Dmt(){return this.mpt.slice(0,this.Aw+1)}}}{const Hg=self._s;Hg.Fmt=class extends Hg.Vn{constructor(t){super(),this.kmt=t,this.qn="",this.Aw=0,this.Lmt=!1,this.Nmt=NaN}Bf(){this.qn="",this.Aw=0,this.Lmt=!1,this.Nmt=NaN}eY(t){this.qn=t}Pc(){return this.qn}lY(t){this.Aw=t}ML(){return this.Aw}eq(){this.Lmt=!0}cY(){return this.Lmt}Bmt(t){this.Nmt=t}Wmt(){return this.Nmt}}}{const Ug=self._s;Ug.jmt=class extends Ug.Vn{constructor(){super(),this.mpt=[],this.Aw=-1}zn(){Ug.Sh(this.mpt)}Amt(){return this.mpt[this.Aw]}sY(){if(++this.Aw,this.Aw===this.mpt.length){const t=[];return this.mpt.push(t),t}return this.mpt[this.Aw]}fY(){--this.Aw}}}{let zg=function(t,s){return t.ML()-s.ML()},Jg=function(t,s){for(let i=0,e=t.length;i<e;++i)if(t[i]!==s[i])return!1;return!0};0;const $g=self._s;self.assert;$g.Vmt=class extends $g.Vn{constructor(t){super(),this.Nc=t,this.Hmt=[],this.Umt=new Map,this.zmt=[],this.Jmt=new Map,this.$mt=new Map,this.qmt=new Map,this.Xmt=new Map,this.Ymt=new Map,this.Kmt=new Map,this.Zmt=0,this.Qmt=[],this.tgt=[],this.sgt=[],this.igt=new Map,this.egt=new Map,this.Mpt=$g.Un($g.Upt,this),this.ngt=$g.Un($g.Cmt,this),this.kmt=$g.Un($g.Emt,this),this.rgt=[],this.hgt=[],this.ogt=[],this.agt=0,this.lgt=0,this.ugt=0,this.cgt=[],this.fgt=[],this.dgt=[],this.pgt=new Map,this.mgt=new Map,self.c3_callFunction=(t,s)=>this.ggt(t,s)}zn(){this.i6(),this.Mpt.zn(),this.Mpt=null,this.ngt.zn(),this.ngt=null,$g.Sh(this.hgt),$g.Sh(this.ogt),this.Nc=null,$g.Sh(this.Hmt),this.Umt.clear()}UG(t){const s=$g.Un($g.ygt,this,t);this.Hmt.push(s),this.Umt.set(s.Pc().toLowerCase(),s)}wgt(t){this.rgt.push(t)}Sgt(){for(const t of this.egt.values())t.vgt();for(const t of this.igt.values())t.Sgt();for(const t of this.egt.values())t.Sgt();for(const t of this.Hmt)t.Sgt();for(const t of this.Hmt)t.G4();for(const t of this.rgt)t.Sgt(!1);$g.Sh(this.rgt),this.ngt.Pmt(this.sgt)}aW(){return this.Nc}T4(t){return this.Umt.get(t.toLowerCase())||null}bgt(t){this.zmt.push(t),this.Jmt.set(t.Mgt(),t)}xgt(t){this.$mt.set(t.C1(),t)}Tgt(t){this.qmt.set(t.C1(),t)}Ggt(t){this.Xmt.set(t.C1(),t)}_gt(t){switch(t.Cgt()){case 0:this.igt.set(t.Igt().toLowerCase(),t);break;case 1:this.egt.set(t.Igt().toLowerCase(),t)}}Pgt(t){this.Kmt.set(t.C1(),t),t.WQ()?this.Qmt.push(t):this.tgt.push(t)}Agt(t){t.length>=2&&t.sort(zg);let s=this.Ymt.get(t.length);s||(s=[],this.Ymt.set(t.length,s));for(let i=0,e=s.length;i<e;++i){const e=s[i];if(Jg(t,e))return e}return s.push(t),t}Egt(t){return this.sgt.push(t.Rgt()),this.Zmt++}vN(){return this.Mpt}Fgt(){return this.vN().tY()}dN(){return this.Fgt().dN()}Ogt(){const t=this.Fgt();return t.dN().Dgt(t.umt())}kgt(){const t=this.Fgt();return t.dN().Lgt(t.fmt())}Ngt(){return this.ngt}iY(){return this.kmt}Bgt(t){const s=[];for(t=t.Wgt();t;)$g.Rn(s,t.jgt()),t=t.Wgt();return s}Vgt(t){const s={};for(const i of this.Bgt(t))s[i.Hgt()]=i.Ugt();return Object.create(Object.prototype,s)}zgt(t){return this.Kmt.get(t)||null}Jgt(t){return this.$mt.get(t)||null}$gt(t){return this.qmt.get(t)||null}qgt(t){return this.Xmt.get(t)||null}aN(t){return this.igt.get(t.toLowerCase())||null}Xgt(t,s){let i=this.egt.get((t.Pc()+"."+s).toLowerCase());if(i)return i;if(!t.S1())for(const e of t.gV())if(i=this.egt.get((e.Pc()+"."+s).toLowerCase()),i)return i;return null}Ygt(){return this.Qmt}Kgt(){return this.tgt}Zgt(t){for(const t of this.Qmt)t.Qgt();if(t)for(const t of this.tgt)t.JT()&&t.Qgt()}tyt(t){return this.Jmt.get(t.toLowerCase())||null}syt(t){const s=this.$mt.get(t);return s&&s.iyt()?s:null}eyt(){return this.zmt}nyt(){for(const t of this.zmt)t.ryt()}hyt(){for(const t of this.Hmt)t.oyt()}ayt(t){this.hyt(),this.agt++;for(const s of t.F6()){const t=s.K5();t&&(this.Nc.lyt(s),t.mP(),this.Nc.uyt())}this.agt--}async cyt(t){this.hyt(),this.agt++;for(const s of this.fyt(t))await this.Nc.dyt(s);this.agt--}*fyt(t){for(const s of t.F6()){const t=s.K5();t&&(this.Nc.lyt(s),yield*t.pyt(),this.Nc.uyt())}}myt(t,s,i,e){let n=!1;if(!t.uB())return this.gyt(s,i,e);this.lgt++;for(const r of t.F6()){const t=r.K5();if(!t)continue;this.Nc.lyt(r);for(const r of t.yyt()){const t=r.myt(s,i,e);n=n||t}const h=t.myt(s,i,e);n=n||h,this.Nc.uyt()}return this.lgt--,n}*wyt(t,s,i,e){let n=!1;if(!t.uB())return this.gyt(s,i,e);this.lgt++;for(const r of t.F6()){const t=r.K5();if(!t)continue;this.Nc.lyt(r);for(const r of t.yyt()){const t=yield*r.wyt(s,i,e);n=n||t}const h=yield*t.wyt(s,i,e);n=n||h,this.Nc.uyt()}return this.lgt--,n}gyt(t,s,i){return this.hgt.push([t,s,i]),!1}Syt(t,s,i){let e=null;const n=new Promise(t=>e=t);return this.ogt.push([t,s,i,e]),n}*vyt(){if(this.Nc.byt())throw new Error("should not be in breakpoint");const t=this.Nc.dB();for(;this.ogt.length;){const[s,i,e,n]=this.ogt.shift();n(yield*this.wyt(t,s,i,e))}}async Myt(){for(const t of this.vyt())await this.Nc.dyt(t)}xyt(t,s,i,e){let n=!1;const r=t.uB(),h=r.K5();if(!h)return;this.lgt++,this.Nc.lyt(r);const o=h.yyt();for(let t=0,r=o.length;t<r;++t){const r=o[t].xyt(s,i,e);n=n||r}const a=h.xyt(s,i,e);return n=n||a,this.Nc.uyt(),this.lgt--,n}*Tyt(t,s,i,e){let n=!1;const r=t.uB(),h=r.K5();if(!h)return;this.lgt++,this.Nc.lyt(r);const o=h.yyt();for(let t=0,r=o.length;t<r;++t){const r=yield*o[t].Tyt(s,i,e);n=n||r}const a=yield*h.Tyt(s,i,e);return n=n||a,this.Nc.uyt(),this.lgt--,n}Gyt(){return this.lgt}_yt(){return this.Gyt()>0}Cyt(){return++this.lgt}Iyt(){--this.lgt}Pyt(){return this.agt>0}fV(){return this.Pyt()||this._yt()}J4(t){for(const[s,i,e]of this.hgt)this.myt(t,s,i,e);$g.Sh(this.hgt)}uV(t){t?this.ugt++:this.ugt--}wU(){return this.ugt>0}Ayt(t){for(let s=0,i=t.length;s<i;++s)t[s].Eyt().Pu()}Ryt(t){for(let s=0,i=t.length;s<i;++s)t[s].Eyt().Spt()}hY(t){for(let s=0,i=t.length;s<i;++s)t[s].Eyt().vpt()}aY(t){for(let s=0,i=t.length;s<i;++s)t[s].Eyt().fY()}pN(t){const s=new Set,i=this.Mpt.qpt(),e=this.Mpt.Xpt();for(let n=0;n<=e;++n){const e=i[n]._mt();if(e)for(const i of e)t&&t.has(i)||s.add(i)}return s}Fyt(t){const s=new Set([...t]),i=this.pN(s);if(i.size>0){for(const t of i)t.Eyt().Spt();return[...i]}return null}Oyt(){const t=$g.Un($g.Dyt,this);return this.cgt.push(t),t}kyt(){return this.cgt}Lyt(){if(!this.cgt.length)return;const t=this.Fgt();let s=!1;this.agt++;for(let i=0,e=this.cgt.length;i<e;++i){const e=this.cgt[i];e.Nyt()&&e.Byt(t),e.Wyt()&&(s=!0)}s&&(this.jyt(),t.Bf(null)),this.agt--}async Vyt(){if(!this.cgt.length)return;const t=this.Fgt();let s=!1;this.agt++;for(let i=0,e=this.cgt.length;i<e;++i){const e=this.cgt[i];e.Nyt()&&await e.Hyt(t),e.Wyt()&&(s=!0)}s&&(this.jyt(),t.Bf(null)),this.agt--}jyt(){const t=$g.Ih(this.cgt,t=>t.Wyt());for(const s of t)s.zn()}i6(){for(const t of this.cgt)t.zn();$g.Sh(this.cgt)}Uyt(t){for(const s of this.cgt)s.bpt(t);for(const s of t){const t=this.mgt.get(s);if(this.mgt.delete(s),t)for(const{resolve:s}of t.zyt.values())s(!0)}}Jyt(t){this.fgt.push({promise:t,$yt:this.Gyt()})}qyt(){$g.Sh(this.fgt)}Xyt(){const t=this.Gyt(),s=Promise.all(this.fgt.filter(s=>s.$yt===t).map(t=>t.promise));return this.fgt=this.fgt.filter(s=>s.$yt<t),s}xN(t){const s=t.toLowerCase();this.dgt.push(s),this.Nc.$U($g.sW.tW.QB.Yyt,null),this.dgt.pop();for(const t of this.Nc.oN().kyt())t.Kyt()&&t.Zyt()===s&&t.Qyt();const i=this.pgt.get(s);i&&(i.resolve(),this.pgt.delete(s))}GN(t){const s=t.toLowerCase(),i=this.pgt.get(s);if(i)return i.promise;{let t=null;const i=new Promise(s=>t=s);return this.pgt.set(s,{promise:i,resolve:t}),i}}twt(){if(0===this.dgt.length)throw new Error("not in a signal");return this.dgt.at(-1)}swt(t){let s=this.mgt.get(t);return s||(s={iwt:[],zyt:new Map},this.mgt.set(t,s)),s}LU(t,s){const i=this.swt(t),e=s.toLowerCase();i.iwt.push(e),this.Nc.$U(t.zj().nwt().QB.ewt,t),i.iwt.pop();for(const s of this.Nc.oN().kyt())s.rwt()&&s.Zyt()===e&&s.hwt(t);const n=i.zyt.get(e);n&&(n.resolve(!1),i.zyt.delete(e)),0===i.iwt.length&&0===i.zyt.size&&this.mgt.delete(t)}NU(t,s){const i=this.swt(t),e=s.toLowerCase(),n=i.zyt.get(e);if(n)return n.promise;{let t=null;const s=new Promise(s=>t=s);return i.zyt.set(e,{promise:s,resolve:t}),s}}owt(t){const s=this.swt(t);if(!s||0===s.iwt.length)throw new Error("not in a signal");return s.iwt.at(-1)}i5(){return{groups:this.awt(),cnds:this.lwt(),acts:this.uwt(),vars:this.cwt(),waits:this.fwt()}}e5(t){this.dwt(t.groups),this.pwt(t.cnds),this.mwt(t.acts),this.gwt(t.vars),this.ywt(t.waits)}awt(){const t={};for(const s of this.eyt())t[s.C1().toString()]=s.wwt();return t}dwt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.syt(t);e&&e.Swt(i)}}lwt(){const t={};for(const[s,i]of this.qmt){const e=i.i5();e&&(t[s.toString()]=e)}return t}pwt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.qmt)i.e5(s.get(t)||null)}uwt(){const t={};for(const[s,i]of this.Xmt){const e=i.i5();e&&(t[s.toString()]=e)}return t}mwt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.Xmt)i.e5(s.get(t)||null)}cwt(){const t={};for(const[s,i]of this.Kmt)i.vwt()||!i.WQ()&&!i.JT()||(t[s.toString()]=i.Cnt());return t}gwt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.zgt(t);e&&e.lrt(i)}}fwt(){return this.cgt.filter(t=>!t.bwt()).map(t=>t.i5())}ywt(t){this.i6();for(const s of t){const t=$g.Dyt.Mwt(this,s);t&&this.cgt.push(t)}}xwt(){return[...this.Nc.dB().F6()].map(t=>t.K5()).filter(t=>t).map(t=>t.Twt())}Gwt(t){for(;t;){const s=t.Wgt();if(s instanceof $g._wt)return s;t=s}return null}ggt(t,s){Array.isArray(s)||(s=[]);const i=this.aN(t.toLowerCase());if(!i)return null;if(!i._u())return i.lN();const e=i.Cwt();if(s.length<e.length){s=s.slice(0);do{s.push(e[s.length].Rgt())}while(s.length<e.length)}const n=i.cN();return n.mN(n.fN(),!1,i.yN(),i.lN(),...s)}}}{const qg=self._s;qg.ygt=class extends qg.Vn{constructor(t,s){super(),this.zpt=t,this.Nc=t.aW(),this.qn=s[0],this.Iwt=[],this.Pwt=new Map,this.Awt=new Map,this.Ewt=new Map,this.Rwt=!1,this.Fwt=[],this.Owt=[],this.Dwt=new Set;for(const t of s[1])this.kwt(t,null,this.Iwt);this.Lwt=this.Nc.sz()?{type:"sheet",name:this.qn,Nwt:0,children:[]}:null}zn(){this.zpt=null,this.Nc=null}kwt(t,s,i){switch(t[0]){case 0:case 3:this.Bwt(t,s,i);break;case 1:this.Wwt(t,s,i);break;case 2:this.jwt(t,s,i);break;case 4:this.Vwt(t,s);break;case 5:this.Hwt(t,s,i);break;case 6:this.Uwt(t,s);break;default:throw new Error("invalid event type")}}Bwt(t,s,i){const e=qg.zwt.UG(this,s,t);if(e.Hpt()){i.push(e);const t=e.Jwt();for(let s=0,i=t.length;s<i;++s)t[s].$wt()&&this.qwt(e,s)}else e.$wt()?this.qwt(e,0):i.push(e)}Vwt(t,s){const i=qg._wt.Xwt(this,s,t);this.zpt._gt(i)}Uwt(t,s){const i=qg._wt.Ywt(this,s,t);this.zpt._gt(i)}Wwt(t,s,i){const e=qg.Kwt.UG(this,s,t);i.push(e)}jwt(t,s,i){const e=qg.Zwt.UG(this,s,t);i.push(e)}Hwt(t,s,i){const e=qg.Qwt.UG(this,s,t);i.push(e)}qwt(t,s){t.Hpt()||this.zpt.wgt(t);const i=t.Dgt(s),e=i.tSt(),n=i.cU();if(i.sSt()){let r=this.Awt.get(n);r||(r=new Map,this.Awt.set(n,r));const h=i.iSt().toLowerCase();let o=r.get(e);o||(o=new Map,r.set(e,o));let a=o.get(h);a||(a=[],o.set(h,a)),a.push([t,s])}else{let r=this.Pwt.get(n);r||(r={eSt:new Map,nSt:new Map},this.Pwt.set(n,r));const h=i.c$();let o;h?(o=r.nSt.get(h),o||(o=new Map,r.nSt.set(h,o))):o=r.eSt;let a=o.get(e);a||(a=[],o.set(e,a)),a.push([t,s])}}Sgt(){const t=this.Iwt;for(let s=0,i=t.length;s<i;++s){const e=s<i-1&&t[s+1]instanceof qg.zwt&&t[s+1].rSt();t[s].Sgt(e)}}hSt(t){this.Fwt.push(t)}G4(){qg.Sh(this.Owt),this.oSt(this),this.Dwt.clear()}oSt(t){const s=t.Owt,i=t.Dwt;for(const e of this.Fwt){const n=e.aSt();e.lSt()&&t!==n&&!i.has(n)&&(i.add(n),n.oSt(t),s.push(n))}}yyt(){return this.Owt}oN(){return this.zpt}aW(){return this.Nc}Pc(){return this.qn}uSt(t,s){this.Ewt.set(s,t)}cSt(t){return this.Ewt.get(t)||null}oyt(){this.Rwt=!1}mP(){if(this.Rwt)return;const t=this.Nc,s=t.fSt(),i=s?performance.now():0;this.Rwt=!0;const e=this.oN(),n=e.Fgt();for(const s of this.Iwt)s.mP(n),e.Ayt(s.QX()),e.qyt(),t.pV();n.Bf(null),s&&(this.Lwt.Nwt+=performance.now()-i)}*pyt(){if(this.Rwt)return;this.Rwt=!0;const t=this.Nc,s=this.oN(),i=s.Fgt();for(const e of this.Iwt)yield*e.pyt(i),s.Ayt(e.QX()),s.qyt(),t.pV();i.Bf(null)}myt(t,s,i){if(!s)return this.dSt(t,s,null,null);{const e=s.cU();let n=!1,r=this.dSt(t,s,e,i);n=n||r;for(const h of e.gV())r=this.dSt(t,s,h,i),n=n||r}}dSt(t,s,i,e){const n=this.Pwt.get(i);if(!n)return!1;const r=e?n.nSt.get(e):n.eSt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){const e=this.pSt(s,t,i);o=o||e}return o}*wyt(t,s,i){if(!s)return yield*this.mSt(t,s,null,null);{const e=s.cU();let n=!1,r=yield*this.mSt(t,s,e,i);n=n||r;for(const h of e.gV())r=yield*this.mSt(t,s,h,i),n=n||r}}*mSt(t,s,i,e){const n=this.Pwt.get(i);if(!n)return!1;const r=e?n.nSt.get(e):n.eSt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){let e;e=t.gSt()?this.pSt(s,t,i):yield*this.ySt(s,t,i),o=o||e}return o}xyt(t,s,i){const e=s.cU(),n=this.Awt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=this.pSt(null,s[0],s[1]);o=o||i}return o}*Tyt(t,s,i){const e=s.cU(),n=this.Awt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=s[0],e=s[1];let n;n=i.gSt()?this.pSt(null,i,e):yield*this.ySt(null,i,e),o=o||n}return o}pSt(t,s,i){const e=this.Nc,n=this.zpt,r=n.dN(),h=n.vN(),o=n.Gyt();let a=!1;r&&n.Ryt(r.fN()),n.Ryt(s.fN());const l=o>1;l&&n.Ngt().sY();const u=h.sY(s);t&&(s.Jwt()[i].cU().eV().kpt(t),t.MU()&&t.wSt());let c=!0;if(s.rJ()){const t=s.SSt();for(let s=0,i=t.length;s<i;++s)if(!t[s].vSt(u)){c=!1;break}}return c&&(s.Hpt()?s.bSt(u,i):s.mP(u),a=u.mmt()),h.fY(),l&&n.Ngt().fY(),n.aY(s.fN()),r&&n.aY(r.fN()),r||1!==o||(n.qyt(),n.wU()||e.pV()),a}*ySt(t,s,i){const e=this.Nc,n=this.zpt,r=n.dN(),h=n.vN(),o=n.Gyt();let a=!1;r&&n.Ryt(r.fN()),n.Ryt(s.fN());const l=o>1;l&&n.Ngt().sY();const u=h.sY(s);t&&(s.Jwt()[i].cU().eV().kpt(t),t.MU()&&t.wSt());let c=!0;if(s.rJ()){const t=s.SSt();for(let s=0,i=t.length;s<i;++s)if(!(yield*t[s].MSt(u))){c=!1;break}}return c&&(s.Hpt()?yield*s.xSt(u,i):yield*s.pyt(u),a=u.mmt()),h.fY(),l&&n.Ngt().fY(),n.aY(s.fN()),r&&n.aY(r.fN()),r||1!==o||(n.qyt(),n.wU()||e.pV()),a}Twt(){return this.Lwt}}}{let Xg=function(t,s){return!0};0;const Yg=self._s,Kg=[];function*Zg(t,s){return!0}Yg.zwt=class extends Yg.Vn{constructor(t,s,i){super(),this.g5=t,this.Nc=t.aW(),this.TSt=s,this.GSt=null,this.Mpt=this.Nc.oN().vN(),this._St=[],this.CSt=[],this.ISt=!1,this.PSt=!1,this.ASt=!1,this.ESt=!1,this.RSt=!!i[2],this.FSt=!1,this.OSt=null,this.DSt=[],this.rht=[],this.kSt=[],this.LSt=Xg,this.NSt=Zg,this.BSt=!1,this.WSt=!1,this.jSt="",this.VSt=!1,this.HSt=null,this.Lwt=null,this.JQ=i[4],this.USt=i[5],this.g5.uSt(this,this.USt),this.zSt=this.Nc.sz()?{JSt:i[3][0],$St:i[3][1],qSt:!1,XSt:!1,YSt:!1,KSt:!1}:null,this.oN().xgt(this),3===i[0]&&this.ZSt(i[1]);let e=0;for(const t of i[6]){const s=Yg.QSt.UG(this,t,e++);this.DSt.push(s),this.tvt(s.cU())}e=0;for(const t of i[7]){const s=Yg.svt.UG(this,t,e++);this.rht.push(s)}if(9===i.length){const t=i[8];for(const s of t)this.g5.kwt(s,this,this.kSt)}this.DSt.length&&(this.FSt=null===this.DSt[0].cU()&&this.DSt[0].tSt()===Yg.sW.tW.QB.ivt),0===this.DSt.length&&(this.DSt=Kg),0===this.rht.length&&(this.rht=Kg),0===this.kSt.length&&(this.kSt=Kg)}static UG(t,s,i){return Yg.Un(Yg.zwt,t,s,i)}ZSt(t){this.BSt=!0,this.WSt=!!t[0],this.VSt=this.WSt,this.jSt=t[1].toLowerCase(),this.HSt=[],this.oN().bgt(this),this.Nc.sz()&&(this.Lwt={type:"group",name:t[1],Nwt:0,children:[]})}evt(t){this.HSt.push(t)}nvt(t,s){for(const i of t.u4().xV())s.includes(i)||s.push(i)}rvt(t,s){if(t)if(s.includes(t)||s.push(t),t.S1())for(const i of t.MV())i.MU()&&this.nvt(i,s);else t.MU()&&this.nvt(t,s)}tvt(t){this.rvt(t,this._St)}hvt(t){this.rvt(t,this.CSt)}ovt(){this._St=this.Nc.w1()}Sgt(t){this.ESt=!!t,this.avt(),this.lvt();for(const t of this.DSt)t.Sgt();if(this.rht.length>0){let t=!1;for(const s of this.rht)s.Sgt(),s.uvt()&&(t=!0);t?(this.LSt=this.cvt,this.NSt=this.fvt):(this.LSt=this.dvt,this.NSt=this.pvt)}const s=this.kSt;for(let t=0,i=s.length;t<i;++t){const e=t<i-1&&s[t+1]instanceof Yg.zwt&&s[t+1].rSt();s[t].Sgt(e)}this.zSt&&this.mvt(),this.Lwt&&this.gvt().Twt().children.push(this.Lwt)}Twt(){return this.Lwt}gvt(){let t=this.rJ();for(;t;){if(t.iyt())return t;t=t.rJ()}return this.g5}mvt(){const t=this.zSt;t.qSt=this.DSt.every(t=>t.gSt()),t.XSt=this.rht.every(t=>t.gSt()),t.YSt=this.kSt.every(t=>t.gSt()),t.KSt=t.qSt&&t.XSt&&t.YSt}yvt(){let t=this;do{t.mvt(),t=t.rJ()}while(t)}avt(){if(!this.iyt())return;let t=this.rJ();for(this.ASt=!0;t;){if(!t.iyt()){this.ASt=!1;break}t=t.rJ()}}wvt(){const t=this.Nc.w1();if(this._St===t)this.CSt=t;else{this.CSt=Yg.Rh(this._St);let t=this.rJ();for(;t;){for(const s of t._St)this.hvt(s);t=t.rJ()}const s=this.oN();this._St=s.Agt(this._St),this.CSt=s.Agt(this.CSt)}}lvt(){if(!this.Svt())return;this.OSt=[];let t=this.rJ();for(;t;)this.OSt.push(t),t=t.rJ();this.OSt.reverse()}vvt(){this.PSt=!0,this.TSt&&this.TSt.vvt()}xmt(){return this.PSt}QX(){return this._St}fN(){return this.ISt||(this.ISt=!0,this.wvt()),this.CSt}bvt(t){return this._St.includes(t)}SSt(){return this.OSt}K5(){return this.g5}oN(){return this.g5.oN()}aW(){return this.Nc}rJ(){return this.TSt}Mvt(t){this.GSt=t}Wgt(){return this.GSt||this.TSt}xvt(){return this.USt}Tvt(){return this.zSt&&this.zSt.$St}Gvt(){return this.Tvt()&&this.zSt.JSt}_vt(t){this.zSt.JSt=!!t,this.yvt()}iyt(){return this.BSt}Cvt(){return this.ASt}rSt(){return this.FSt}Ivt(){return this.ESt}Mgt(){return this.jSt}wwt(){return this.VSt}ryt(){this.Swt(this.WSt)}Swt(t){if(t=!!t,!this.BSt)throw new Error("not a group");if(this.VSt!==t){this.VSt=t;for(const t of this.HSt)t.Pvt();if(this.HSt.length){const t=this.Nc.RB().K5();t&&t.G4()}}}C1(){return this.JQ}Hpt(){return this.RSt}$wt(){return this.DSt.length&&this.DSt[0].$wt()}Avt(){return this.GSt&&this.GSt instanceof Yg._wt}Svt(){return this.Avt()||this.DSt.some(t=>t.$wt())}Jwt(){return this.DSt}Tmt(){return this.DSt.length}Dgt(t){if((t=Math.floor(t))<0||t>=this.DSt.length)throw new RangeError("invalid condition index");return this.DSt[t]}Evt(t){return this.Dgt(t)}Rvt(t){let s=t.ML();if(0===s)return!0;--s;const i=t.Fvt()?t.Ovt():t.cU();for(;s>=0;--s){const t=this.DSt[s];if(i===t.cU()||t.Fvt()&&t.Ovt()===i)return!1}return!0}Dvt(){return this.rht}kvt(){return this.rht.length}Lgt(t){if((t=Math.floor(t))<0||t>=this.rht.length)throw new RangeError("invalid action index");return this.rht[t]}Lvt(t){t=Math.floor(t);const s=this.rht.find(s=>s.Nvt()===t);if(!s)throw new RangeError("invalid action debug index");return s}Bvt(t){return(t=Math.floor(t))>=0&&t<this.rht.length}Wvt(){return this.kSt}jgt(){return this.kSt.filter(t=>t instanceof Yg.Kwt)}vSt(t){t.lmt(this);const s=this.DSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.cmt(e),n.G$())throw new Error("trigger cannot be used as sub-event to a loop");if(n.mP())i=!0;else if(!this.RSt)return!1}return!this.RSt||i}bSt(t,s){t.lmt(this),t.cmt(s),this.DSt[s].mP()&&(this.LSt(t,0)&&this.jvt(t),t.pmt(!0))}*MSt(t){t.lmt(this);const s=this.DSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.cmt(e),n.G$())throw new Error("trigger cannot be used as sub-event to a loop");let r;if(r=n.gSt()?n.mP():yield*n.pyt(),r)i=!0;else if(!this.RSt)return!1}return!this.RSt||i}*xSt(t,s){t.lmt(this),t.cmt(s);const i=this.DSt[s];let e;if(e=i.gSt()?i.mP():yield*i.pyt(),e){let s;s=this.Vvt()?this.LSt(t,0):yield*this.NSt(t,0),s&&(this.Hvt()?this.jvt():yield*this.Uvt()),t.pmt(!0)}}mP(t){t.lmt(this),this.FSt||t.gmt(!1),this.RSt?this.zvt(t):this.Jvt(t)}*pyt(t){(this.Gvt()||this.Nc.$vt())&&(yield this),t.lmt(this),this.FSt||t.gmt(!1),this.RSt?yield*this.qvt(t):yield*this.Xvt(t)}zvt(t){const s=this.DSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.$wt())continue;t.cmt(e);const r=n.mP();i=i||r}t.pmt(i),i&&(this.LSt(t,0)&&this.jvt(t),this.ESt&&t.gmt(!0))}*qvt(t){const s=this.DSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.$wt())continue;let r;t.cmt(e),r=n.gSt()?n.mP():yield*n.pyt(),i=i||r}if(t.pmt(i),i){let s;s=this.Vvt()?this.LSt(t,0):yield*this.NSt(t,0),s&&(this.Hvt()?this.jvt():yield*this.Uvt()),this.ESt&&t.gmt(!0)}}Jvt(t){const s=this.DSt;for(let i=0,e=s.length;i<e;++i){const e=s[i];if(t.cmt(i),!e.mP())return void t.pmt(!1)}t.pmt(!0),this.LSt(t,0)&&this.jvt(t),t.mmt()&&this.ESt&&t.gmt(!0)}*Xvt(t){const s=this.DSt;for(let i=0,e=s.length;i<e;++i){const e=s[i];let n;if(t.cmt(i),n=e.gSt()?e.mP():yield*e.pyt(),!n)return void t.pmt(!1)}let i;t.pmt(!0),i=this.Vvt()?this.LSt(t,0):yield*this.NSt(t,0),i&&(this.Hvt()?this.jvt():yield*this.Uvt()),t.mmt()&&this.ESt&&t.gmt(!0)}dvt(t,s){const i=this.rht;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.dmt(e),s.mP()}return!0}*pvt(t,s){const i=this.rht;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.dmt(e),s.gSt()?s.mP():yield*s.pyt()}return!0}cvt(t,s){const i=this.oN(),e=this.rht;for(let n=s,r=e.length;n<r;++n){const s=e[n];t.dmt(n);const r=s.mP();if(s.Yvt()&&!0===r)return!1;s.Kvt()&&r instanceof Promise&&i.Jyt(r)}return!0}*fvt(t,s){const i=this.oN(),e=this.rht;for(let n=s,r=e.length;n<r;++n){const s=e[n];let r;if(t.dmt(n),r=s.gSt()?s.mP():yield*s.pyt(),s.Yvt()&&!0===r)return!1;s.Kvt()&&r instanceof Promise&&i.Jyt(r)}return!0}Zvt(t){this.LSt(t,t.fmt())&&this.jvt()}*Qvt(t){(yield*this.NSt(t,t.fmt()))&&(yield*this.Uvt())}jvt(){if(!this.kSt.length)return;const t=this.iyt()&&this.Nc.fSt(),s=t?performance.now():0,i=this.Mpt,e=i.sY(this);this.PSt?this.tbt(e):this.sbt(e),i.fY(),t&&(this.Lwt.Nwt+=performance.now()-s)}tbt(t){const s=this.BSt,i=this.ASt,e=this.oN(),n=this.kSt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.QX(),l=!i||!s&&r<o;l&&e.hY(a),h.mP(t),l?e.aY(a):e.Ayt(a)}}sbt(t){const s=this.kSt;for(let i=0,e=s.length;i<e;++i)s[i].mP(t)}*Uvt(){if(!this.kSt.length)return;const t=this.Mpt,s=t.sY(this);this.PSt?yield*this.ibt(s):yield*this.ebt(s),t.fY()}*ibt(t){const s=this.BSt,i=this.ASt,e=this.oN(),n=this.kSt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.QX(),l=!i||!s&&r<o;l&&e.hY(a),yield*h.pyt(t),l?e.aY(a):e.Ayt(a)}}*ebt(t){const s=this.kSt;for(let i=0,e=s.length;i<e;++i)yield*s[i].pyt(t)}oY(t,s){s.amt();const i=this.DSt;if(!this.Hpt())for(let e=t.umt()+1,n=i.length;e<n;++e){const t=i[e];if(s.cmt(e),!t.mP())return!1}return this.LSt(s,0)&&this.jvt(s),!0}*nbt(t,s){s.amt();const i=this.DSt;if(!this.Hpt())for(let e=t.umt()+1,n=i.length;e<n;++e){const t=i[e];let n;if(s.cmt(e),n=t.gSt()?t.mP():yield*t.pyt(),!n)return!1}let e;return e=this.Vvt()?this.LSt(s,0):yield*this.NSt(s,0),e&&(this.Hvt()?this.jvt():yield*this.Uvt()),!0}gSt(){return!this.Gvt()&&!this.Nc.$vt()&&this.zSt.KSt}Vvt(){return!this.Nc.$vt()&&this.zSt.XSt}Hvt(){return!this.Nc.$vt()&&this.zSt.YSt}rbt(t){if(this.rJ()){const s=this.SSt();for(let i=0,e=s.length;i<e;++i)if(!s[i].vSt(t))return!1}return!0}*hbt(t){if(this.rJ()){const s=this.SSt();for(let i=0,e=s.length;i<e;++i)if(!(yield*s[i].MSt(t)))return!1}return!0}obt(t,s,i){if(s.length>0)if(i){const i=s.map(t=>t.zs(0));t.Ngt().sY(),this.GSt.abt(i)}else this.GSt.lbt(s);else i&&t.Ngt().sY()}ubt(t,s,i,e){let n,r;const h=t.length>0;let o=null;const a=this.Nc,l=this.Mpt,u=a.oN(),c=this.GSt,f=c.Kvt(),d=u.Cyt()>1;if(this.obt(u,s,d),h&&(i?u.hY(t):u.Ryt(t)),null!==e){if(e.cbt){const t=i?e.cbt.eV():e.cbt.Eyt().wpt(),s=e.fbt.eV();s.Lpt(t.iV()),s.jpt(),i||e.fbt.dbt()}else if(e.pbt){const t=e.pbt.eV();t.Lpt(e.mbt),t.jpt()}e.gbt&&(o=u.Fyt(t))}const p=l.sY(this);return i&&p.Gmt(t),this.rbt(p)&&(p.lmt(this),f&&([r,n]=c.ybt()),this.Jvt(p),f&&c.wbt(r)),l.fY(),d&&u.Ngt().fY(),null!==o&&u.aY(o),h&&u.aY(t),u.Iyt(),n}*Sbt(t,s,i,e){let n,r;(this.Gvt()||this.Nc.$vt())&&(yield this);const h=t.length>0;let o=null;const a=this.Nc,l=this.Mpt,u=a.oN(),c=this.GSt,f=c.Kvt(),d=u.Cyt()>1;if(this.obt(u,s,d),h&&(i?u.hY(t):u.Ryt(t)),null!==e){if(e.cbt){const t=i?e.cbt.eV():e.cbt.Eyt().wpt(),s=e.fbt.eV();s.Lpt(t.iV()),s.jpt(),i||e.fbt.dbt()}else if(e.pbt){const t=e.pbt.eV();t.Lpt(e.mbt),t.jpt()}e.gbt&&(o=u.Fyt(t))}const p=l.sY(this);return i&&p.Gmt(t),(yield*this.hbt(p))&&(p.lmt(this),f&&([r,n]=c.ybt()),yield*this.Xvt(p),f&&c.wbt(r)),l.fY(),d&&u.Ngt().fY(),null!==o&&u.aY(o),h&&u.aY(t),u.Iyt(),n}vbt(t,s){const i=this.fN(),e=i.length>0,n=this.Nc,r=this.Mpt,h=n.oN(),o=h.Cyt()>1;o&&h.Ngt().sY(),this.GSt.abt(t),e&&(s?h.hY(i):h.Ryt(i));const a=r.sY(this);this.rbt(a)&&(a.lmt(this),this.Jvt(a)),r.fY(),o&&h.Ngt().fY(),e&&h.aY(i),h.Iyt()}*bbt(t,s){(this.Gvt()||this.Nc.$vt())&&(yield this);const i=this.fN(),e=i.length>0,n=this.Nc,r=this.Mpt,h=n.oN(),o=h.Cyt()>1;o&&h.Ngt().sY(),this.GSt.abt(t),e&&(s?h.hY(i):h.Ryt(i));const a=r.sY(this);(yield*this.hbt(a))&&(a.lmt(this),yield*this.Xvt(a)),r.fY(),o&&h.Ngt().fY(),e&&h.aY(i),h.Iyt()}mN(t,s,i,e,...n){let r,h;const o=t.length>0,a=this.Nc,l=this.Mpt,u=a.oN(),c=this.GSt,f=c.Kvt(),d=u.Cyt()>1;d&&u.Ngt().sY(),n.length>0&&this.GSt.abt(n),o&&(s?u.hY(t):u.Ryt(t));const p=l.sY(this);return p.vmt(i,e),l.Ypt(p),a.nY(!1),this.rbt(p)&&(p.lmt(this),f&&([h,r]=c.ybt()),this.Jvt(p),f&&c.wbt(h)),a.nY(!0),l.fY(),l.Kpt(),d&&u.Ngt().fY(),o&&u.aY(t),u.Iyt(),r||p.bmt()}}}{const Qg=self._s,ty=[];let sy=!1;Qg.Qwt=class extends Qg.Vn{constructor(t,s,i){super();const e=t.aW(),n=t.oN();this.g5=t,this.zpt=n,this.Nc=t.aW(),this.TSt=s;const r=e.Mbt(i[1]);this.xbt=r,this.USt=i[2],this.g5.uSt(this,this.USt),this.zSt=e.sz()?{JSt:i[3][0],$St:i[3][1]}:null}static UG(t,s,i){return Qg.Un(Qg.Qwt,t,s,i)}Sgt(){const t=this.xbt,s=this.Nc.oN().Vgt(this);this.xbt=t.bind(null,this.Nc.gj(),s)}rJ(){return this.TSt}Wgt(){return this.TSt}K5(){return this.g5}xvt(){return this.USt}Tvt(){return this.zSt&&this.zSt.$St}Gvt(){return this.Tvt()&&this.zSt.JSt}_vt(t){this.zSt.JSt=!!t}rSt(){return!1}QX(){return ty}fN(){return this.TSt?this.TSt.fN():ty}mP(t){t.lmt(this),this.zpt.Jyt(this.Tbt())}async Tbt(){try{await this.xbt()}catch(t){console.error(`Unhandled exception running script %c${this.K5().Pc()}, event ${this.xvt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.iz&&self.iz.Gbt(this),sy||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),sy=!0)}}*pyt(t){t.lmt(this),(this.Gvt()||this.Nc.$vt())&&(yield this),this.mP(t)}gSt(){return!this.Gvt()&&!this.Nc.$vt()}static _bt(){return sy}static Cbt(){sy=!0}}}{const iy=self._s;self.assert;iy._wt=class extends iy.Vn{constructor(t,s,i){super(),this.g5=t,this.Nc=t.aW(),this.TSt=s,this.Ibt=0,this.Pbt="",this.Abt=0,this.Ebt=[],this.Rbt=!0,this.Fbt="",this.ppt=null,this.Obt=!1,this.Dbt=[],this.kbt=!1,this.Lbt=!1,this.Nbt=0,this.Bbt=-1,this.Wbt=new Map,this.jbt=iy.zwt.UG(t,s,i),this.jbt.Mvt(this)}Vbt(t){this.Ibt=0,this.Pbt=t[0],this.Abt=t[1],this.Ebt=t[2].map(t=>iy.Kwt.UG(this.g5,this,t)),this.Rbt=t[3],this.Lbt=t[4],this.kbt=t[5]}Hbt(t){this.Ibt=1,this.Fbt=t[1],this.ppt=this.Nc.$0(t[2]),this.jbt.tvt(this.ppt),this.Pbt=this.ppt.Pc()+"."+this.Fbt,this.Abt=t[3],this.Ebt=t[4].map(t=>iy.Kwt.UG(this.g5,this,t)),this.Rbt=t[5],this.Lbt=t[6],this.kbt=t[7],this.ppt.Ubt(this)}static Xwt(t,s,i){const e=iy.Un(iy._wt,t,s,i),n=i[1];return e.Vbt(n),e}static Ywt(t,s,i){const e=iy.Un(iy._wt,t,s,i),n=i[1];return e.Hbt(n),e}vgt(){if(this.ppt&&this.ppt.S1())for(const t of this.ppt.MV())if(t.zbt(this.Fbt)){this.Obt=!0;break}}Sgt(){for(const t of this.Ebt)t.Sgt();this.jbt.Sgt(!1)}Cgt(){return this.Ibt}jgt(){return this.Ebt}Cwt(){return this.Ebt}uN(){return this.Ebt.length}Jbt(t){this.Dbt.push(t)}$bt(){return this.Dbt}lbt(t){const s=this.Ebt;for(let i=0,e=s.length;i<e;++i)s[i].lrt(t[i].zs(0))}abt(t){const s=this.Ebt;for(let i=0,e=s.length;i<e;++i)s[i].lrt(t[i])}qbt(){return this.Ebt.map(t=>t.Cnt())}rJ(){return this.TSt}Wgt(){return this.TSt}Igt(){return this.Pbt}Xbt(){return this.Fbt}Ybt(){return this.Obt}yN(){return this.Abt}cU(){return this.ppt}_u(){return this.Rbt}lN(){switch(this.Abt){case 0:return null;case 2:return"";default:return 0}}cN(){return this.jbt}gN(){return this.kbt}Kvt(){return this.Lbt}ybt(){const t=this.Nbt++;let s;this.Bbt=t;const i=new Promise(t=>s=t);return this.Wbt.set(t,{resolve:s,Kbt:0}),[t,i]}wbt(t){const s=this.Wbt.get(t);0===s.Kbt&&(s.resolve(),this.Wbt.delete(t)),this.Bbt=-1}Zbt(){return this.Wbt.get(this.Bbt).Kbt++,this.Bbt}Qbt(t){this.Bbt=t,this.Wbt.get(t).Kbt--}tMt(t,s){const i=new Map,e=[];for(const t of this.ppt.eV().iV()){const s=t.cU();if(s.zbt(this.Fbt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&this.jbt.ubt(t,s,this.kbt,{pbt:this.ppt,mbt:e}),i.size>0)for(const[e,n]of i){const i=e.sMt(this.Fbt).cN(),r=[...new Set([...t,...i.QX()])];i.ubt(r,s,this.kbt,{pbt:e,mbt:n})}}*iMt(t,s){const i=new Map,e=[];for(const t of this.ppt.eV().iV()){const s=t.cU();if(s.zbt(this.Fbt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&(yield*this.jbt.Sbt(t,s,this.kbt,{pbt:this.ppt,mbt:e})),i.size>0)for(const[e,n]of i){const i=e.sMt(this.Fbt).cN(),r=[...new Set([...t,...i.QX()])];yield*i.Sbt(r,s,this.kbt,{pbt:e,mbt:n})}}}}{const ey=self._s,ny=[];ey.Kwt=class extends ey.Vn{constructor(t,s,i){super();const e=t.oN();this.g5=t,this.zpt=e,this.Nc=t.aW(),this.TSt=s,this.ngt=e.Ngt(),this.qn=i[1],this.Jc=i[2],this.eMt=i[3],this.wT=!!i[4],this.nMt=!!i[5],this.rMt=s instanceof ey._wt,this.JQ=i[6],this.hMt=this.Nc.Hgt(i[8]),this.oMt=t=>this.lrt(t),this.aMt=()=>this.Cnt(),this.lMt=!this.TSt||this.wT||this.nMt,this.sht=this.eMt,this.uMt=-1,this.cMt()&&(this.sht=this.sht?1:0),!this.fMt()||this.JT()||this.vwt()||(this.uMt=e.Egt(this)),e.Pgt(this)}static UG(t,s,i){return ey.Un(ey.Kwt,t,s,i)}Sgt(){if(this.fMt()&&!this.JT()&&!this.vwt()&&!this.dMt()){const t=this.zpt.Gwt(this);t&&t.Jbt(this)}}Pc(){return this.qn}Hgt(){return this.hMt}rJ(){return this.TSt}Wgt(){return this.rJ()}WQ(){return!this.rJ()}fMt(){return!this.WQ()}dMt(){return this.rMt}JT(){return this.wT}vwt(){return this.nMt}Zi(){return 0===this.Jc}ae(){return 1===this.Jc}cMt(){return 2===this.Jc}rSt(){return!1}C1(){return this.JQ}Rgt(){return this.eMt}QX(){return ny}mP(t){!this.fMt()||this.JT()||this.vwt()||this.lrt(this.Rgt())}gSt(){return!0}*pyt(t){this.mP(t)}lrt(t){this.Zi()?"number"!=typeof t&&(t=parseFloat(t)):this.ae()?"string"!=typeof t&&(t=t.toString()):this.cMt()&&(t=t?1:0),this.lMt?this.sht=t:this.ngt.Amt()[this.uMt]=t}Cnt(){return this.lMt?this.sht:this.ngt.Amt()[this.uMt]}pMt(){let t=this.Cnt();return this.cMt()&&(t=!!t),t}Qgt(){this.sht=this.eMt}Ugt(){return{configurable:!1,enumerable:!0,get:this.aMt,set:this.oMt}}}}{const ry=self._s,hy=(self.assert,[]);ry.Zwt=class extends ry.Vn{constructor(t,s,i){super();const e=t.oN();this.g5=t,this.zpt=e,this.Nc=t.aW(),this.TSt=s,this.mMt=null,this.gMt=i[1],this.Nf=!0}static UG(t,s,i){return ry.Un(ry.Zwt,t,s,i)}Sgt(){this.mMt=this.zpt.T4(this.gMt),this.g5.hSt(this);let t=this.rJ();for(;t;)t instanceof ry.zwt&&t.iyt()&&t.evt(this),t=t.rJ();this.Pvt(),this.Nc.sz()&&this.g5.Twt().children.push(this.mMt.Twt())}rJ(){return this.TSt}QX(){return hy}aSt(){return this.mMt}mP(t){const s=!!this.rJ(),i=this.Nc.w1();s&&this.zpt.Ryt(i),this.mMt.mP(),s&&this.zpt.aY(i)}*pyt(t){const s=!!this.rJ(),i=this.Nc.w1();s&&this.zpt.Ryt(i),yield*this.mMt.pyt(),s&&this.zpt.aY(i)}gSt(){return!1}lSt(){return this.Nf}Pvt(){let t=this.rJ();for(;t;){if(t instanceof ry.zwt&&t.iyt()&&!t.wwt())return void(this.Nf=!1);t=t.rJ()}this.Nf=!0}}}{let oy=function(t,s){return t>=s?t%s:t<0?(t<=-s&&(t%=s),t<0&&(t+=s),t):t};0;const ay=self._s;self.assert;ay.yMt=class extends ay.Vn{constructor(t){super(),this.Mx=t,this.Nc=t.aW()}Sgt(){}static wMt(t,s){const i=s[0],e=[dy,cy,fy,py,ly,uy];return ay.Un(e[i],t,s)}};class ly extends ay.yMt{constructor(t,s){super(t),this.SMt=this.Nc.AZ(),this.xbt=this.Nc.Mbt(s[1]),this.xbt!==ay.sW.tW.wht.random&&this.xbt!==ay.sW.tW.wht.vMt||this.Mx.bMt()}MMt(){return this.SMt.xMt(this.xbt,this.SMt)}}class uy extends ay.yMt{constructor(t,s){super(t),this.TMt=null,this.Pbt=s[1],this.Mx.bMt()}Sgt(){const t=this.Nc.oN();this.TMt=t.aN(this.Pbt),this.Pbt=null;const s=this.Mx.cN(),i=this.TMt.cN();this.GMt=[...new Set([...s.fN(),...i.fN()])],this.GMt=t.Agt(this.GMt)}MMt(){const t=this.TMt;if(t._u()){const s=t.cN();return ay.zwt.prototype.mN.bind(s,this.GMt,t.gN(),t.yN(),t.lN())}{const s=t.lN();return()=>s}}}class cy extends ay.yMt{constructor(t,s){super(t),this.ppt=this.Nc.$0(s[1]),this.xbt=this.Nc.Mbt(s[2]),this._Mt=!!s[3],this.Mpt=this.Nc.oN().vN(),this.Mx.CMt(this.ppt)}MMt(){return this.ppt.zj().xMt(this.xbt,this.ppt.Vj().s$())}IMt(...t){const s=this.ppt,i=s.eV().Apt(),e=i.length;if(0===e)return this._Mt?"":0;const n=oy(this.Mx.PMt(),e);return this.Mpt.tY().wmt(s),this.xbt.apply(i[n].s$(),t)}AMt(t,...s){const i=this.ppt,e=i.iV(),n=e.length;if(0===n||"number"!=typeof t)return this._Mt?"":0;const r=oy(t,n);return this.Mpt.tY().wmt(i),this.xbt.apply(e[r].s$(),s)}}class fy extends ay.yMt{constructor(t,s){super(t),this.ppt=this.Nc.$0(s[1]),this.EMt=s[3],this._Mt=!!s[2],this.Mx.CMt(this.ppt)}RMt(){const t=this.ppt.eV().Apt(),s=t.length;return 0===s?this._Mt?"":0:t[oy(this.Mx.PMt(),s)].FMt(this.EMt)}OMt(){const t=this.ppt,s=t.eV().Apt(),i=s.length;if(0===i)return this._Mt?"":0;const e=s[oy(this.Mx.PMt(),i)],n=e.cU().DMt(t.kMt());return e.FMt(this.EMt+n)}LMt(t){const s=this.ppt,i=s.iV(),e=i.length;if(0===e||"number"!=typeof t)return this._Mt?"":0;const n=i[oy(t,e)];let r=0;return s.S1()&&(r=n.cU().DMt(s.kMt())),n.FMt(this.EMt+r)}}class dy extends ay.yMt{constructor(t,s){super(t),this.ppt=this.Nc.$0(s[1]),this.NMt=this.ppt.Frt(s[2]),this.BMt=this.ppt.eet(s[2]),this.xbt=this.Nc.Mbt(s[3]),this._Mt=!!s[4],this.Mpt=this.Nc.oN().vN(),this.Mx.CMt(this.ppt)}WMt(...t){const s=this.ppt,i=s.eV().Apt(),e=i.length;if(0===e)return this._Mt?"":0;const n=oy(this.Mx.PMt(),e);this.Mpt.tY().wmt(s);const r=i[n];let h=0;return s.S1()&&(h=r.cU().jMt(s.kMt())),this.xbt.apply(r.Rrt()[this.BMt+h].s$(),t)}VMt(t,...s){const i=this.ppt,e=i.iV(),n=e.length;if(0===n||"number"!=typeof t)return this._Mt?"":0;const r=oy(t,n);this.Mpt.tY().wmt(i);const h=e[r];let o=0;return i.S1()&&(o=h.cU().jMt(i.kMt())),this.xbt.apply(h.Rrt()[this.BMt+o].s$(),s)}}class py extends ay.yMt{constructor(t,s){super(t),this.HMt=null,this.UMt=s[1]}Sgt(){this.HMt=this.Nc.oN().zgt(this.UMt)}zMt(){return this.HMt}}}{let my=function(t){const s=self.JMt[t];if(!s)throw new Error("invalid expression number");return s};0;const gy=self._s;self.assert;gy.$Mt=class extends gy.Vn{constructor(t,s,i){super(),this.Mx=t,this.Aw=i,this.Jc=s,this.zs=null,this.qMt=!1,this.nMt=!1}static UG(t,s,i){const e=s[0],n=[yy,wy,Gy,vy,My,Sy,xy,yy,vy,vy,_y,Cy,Gy,Py,wy,Ty,by,Iy,Ay,Ey,Ry,Fy];return gy.Un(n[e],t,e,i,s)}Sgt(){}bMt(){this.qMt=!0}CMt(t){this.qMt||t&&(t.zj().Sj()||(this.qMt=!0))}XMt(){return this.qMt}ML(){return this.Aw}aW(){return this.Mx.aW()}cN(){return this.Mx.cN()}vwt(){return this.nMt}YMt(){return 4===this.Jc}};class yy extends gy.$Mt{constructor(t,s,i,e){super(t,s,i),this.KMt=0;const n=e[1];this.ZMt=n[0],this.QMt=[],this.txt=null;for(let t=1,s=n.length;t<s;++t)this.QMt.push(gy.yMt.wMt(this,n[t]));this.QMt.length?this.zs=this.sxt:(this.zs=my(this.ZMt),this.nMt=!0)}ixt(t){if(t<0||t>=this.QMt.length)throw new RangeError("invalid numbered node");return this.QMt[t]}Sgt(){for(const t of this.QMt)t.Sgt();const t=my(this.ZMt);this.QMt.length?this.txt=t(this):this.txt=t}PMt(){return this.KMt}sxt(t){return this.KMt=t,this.txt()}}class wy extends yy{constructor(t,s,i,e){super(t,s,i,e),this.zs=this.nxt,14===s&&(this.cN().ovt(),this.Mx instanceof gy.svt&&this.cN().vvt())}nxt(t){this.KMt=t;const s=this.txt();return"string"==typeof s?s:""}rxt(){return my(this.ZMt)()}}class Sy extends yy{constructor(t,s,i,e){super(t,s,i,e),t.hxt()>=2?this.zs=this.VV:this.zs=this.kB,this.nMt=!1}kB(t){this.KMt=t;const s=this.txt();return this.aW().RB().kB(s)}VV(t){const s=this.kB(t);return s?s.VV():null}}class vy extends gy.$Mt{constructor(t,s,i,e){super(t,s,i),this.oxt=e[1],this.zs=this.axt,this.nMt=!0}axt(){return this.oxt}}class by extends gy.$Mt{constructor(t,s,i,e){super(t,s,i),this.lxt=e[1],this.zs=this.uxt,this.nMt=!0}uxt(){return this.lxt}}class My extends gy.$Mt{constructor(t,s,i,e){super(t,s,i),this.ppt=this.aW().$0(e[1]),t.hxt()>=2?this.zs=this.Bj:this.zs=this.cU;const n=this.cN();n.tvt(this.ppt),this.Mx instanceof gy.svt?n.vvt():n.rJ()&&n.rJ().vvt(),this.nMt=!0}cU(){return this.ppt}Bj(){return this.ppt?this.ppt.Bj():null}}class xy extends gy.$Mt{constructor(t,s,i,e){super(t,s,i),this.VQ=this.aW().dB().I6(e[1]),t.hxt()>=2?this.zs=this.cB:this.zs=this.pB,this.nMt=!0}pB(){return this.VQ}cB(){return this.VQ?this.VQ.cB():null}}class Ty extends gy.$Mt{constructor(t,s,i,e){super(t,s,i),this.O7=this.aW().Vtt().W8(e[1]),t.hxt()>=2?this.zs=this.vit:this.zs=this.jit,this.nMt=!0}jit(){return this.O7}vit(){return this.O7?this.O7.vit():null}}class Gy extends gy.$Mt{constructor(t,s,i,e){super(t,s,i),this.cxt=e[1],this.zs=this.fxt,this.nMt=!0}fxt(){return this.cxt}}class _y extends gy.$Mt{constructor(t,s,i,e){super(t,s,i),this.dxt=e[1];const n=this.Mx.cU();this.Mx instanceof gy.QSt&&this.Mx.JT()?(this.zs=this.pxt,this.nMt=!0):n&&n.S1()?(this.zs=this.mxt,this.bMt()):(this.zs=this.pxt,this.nMt=!0)}pxt(){return this.dxt}mxt(t){t=t||0;const s=this.Mx.cU(),i=s.eV(),e=i.iV();let n=null;if(e.length)n=e[t%e.length].cU();else if(i.Ipt()){const s=i.Ppt();n=s[t%s.length].cU()}else{if(!(s.hV()>0))return 0;{const i=s.iV();n=i[t%i.length].cU()}}return this.dxt+n.DMt(s.kMt())}}class Cy extends gy.$Mt{constructor(t,s,i,e){super(t,s,i),this.UMt=e[1],this.HMt=null,t.hxt()>=2?this.zs=this.gxt:this.zs=this.yxt,this.nMt=!0}Sgt(){this.HMt=this.aW().oN().zgt(this.UMt)}yxt(){return this.HMt}gxt(){return null}}class Iy extends gy.$Mt{constructor(t,s,i,e){super(t,s,i),this.wxt=e[1],this.TMt=null,t.hxt()>=2?this.zs=this.Sxt:this.zs=this.vxt,this.nMt=!0}Sgt(){this.TMt=this.aW().oN().aN(this.wxt),this.wxt=null}vxt(){return this.TMt}Sxt(){return null}}class Py extends gy.$Mt{constructor(t,s,i,e){super(t,s,i),this.bxt=[],this.Mxt=[],this.nMt=!0;for(let t=1,s=e.length;t<s;++t){const s=gy.$Mt.UG(this.Mx,e[t],0);this.bxt.push(s),this.Mxt.push(0),s.vwt()||(this.nMt=!1)}this.zs=this.xxt}Sgt(){for(const t of this.bxt)t.Sgt()}xxt(){const t=this.bxt,s=this.Mxt;for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(0);return s}}class Ay extends gy.$Mt{constructor(t,s,i,e){super(t,s,i),this.Txt=e[1],this.zs=this.art,this.nMt=!0}art(){return this.Txt}}class Ey extends gy.$Mt{constructor(t,s,i,e){super(t,s,i),this.Gxt=e[1],this.zs=this._xt,this.nMt=!0}_xt(){return this.Gxt}}class Ry extends yy{constructor(t,s,i,e){super(t,s,i,e),this.zs=this.IU,this.nMt=!1}IU(){return this.txt()}}class Fy extends gy.$Mt{constructor(t,s,i,e){super(t,s,i),this.Act=this.aW().qct().Tct(e[1]),this.zs=this.Cxt,this.nMt=!0}Cxt(){return this.Act.Pc()}}}{let Oy=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(0)};0;const Dy=self._s,ky=(self.assert,[]),Ly=function(){};Dy.QSt=class extends Dy.Vn{constructor(t,s,i){if(super(),this.jbt=t,this.Nc=t.aW(),this.Aw=i,this.xbt=this.Nc.Mbt(s[1]),this.Ixt=s[3]>0,this.Pxt=2===s[3],this.Axt=!!s[4],this.Ext=!!s[5],this.wT=!!s[6],this.JQ=s[7],this.Rxt=this.jbt.Hpt(),this.ppt=null,this.NMt=null,this.BMt=-1,this.SMt=null,this.mP=Ly,this.pyt=Ly,this.Ws=[],this.Fxt=[],this.Oxt=!1,this.Dxt=null,this.kxt=null,this.zSt=this.Nc.sz()?{JSt:s[8][0],Lxt:s[8][1]}:null,-1===s[0]?this.SMt=this.Nc.AZ():(this.ppt=this.Nc.$0(s[0]),s[2]&&(this.NMt=this.ppt.Frt(s[2]),this.BMt=this.ppt.eet(s[2])),this.jbt.rJ()&&this.jbt.rJ().vvt()),10===s.length){let t=s[9];for(let s of t)this.Ws.push(Dy.$Mt.UG(this,s,this.Ws.length)),this.Fxt.push(0)}0===this.Ws.length&&(this.Ws=ky,this.Fxt=ky),this.jbt.oN().Tgt(this)}static UG(t,s,i){return Dy.Un(Dy.QSt,t,s,i)}Sgt(){for(const t of this.Ws)t.Sgt(),t.XMt()&&(this.Oxt=!0);this.Pxt?(this.mP=this.Nxt,this.pyt=this.Bxt):this.SMt?(this.Wxt(),this.pyt=this.jxt):this.ppt.zj().Sj()?(this.Vxt(),this.pyt=this.Hxt):this.wT?(this.mP=this.Uxt,this.pyt=this.zxt):(this.mP=this.Jxt,this.pyt=this.$xt)}Wxt(){const t=this.SMt,s=this.SMt;this.qxt(t,s,this.Xxt)}Vxt(){const t=this.ppt.zj(),s=this.ppt.Vj().s$();this.qxt(t,s,this.Yxt)}qxt(t,s,i){const e=this.xbt,n=this.Ext,r=this.Ws;if(0===r.length){const i=t.xMt(e,s);this.mP=n?function(){return Dy.xor(i(),n)}:i}else if(1===r.length){const i=r[0];if(!n&&i.vwt())this.mP=t.Kxt(e,s,i.zs(0));else{const r=t.xMt(e,s);this.mP=function(){return Dy.xor(r(i.zs(0)),n)}}}else if(2===r.length){const i=r[0],h=r[1];if(!n&&i.vwt()&&h.vwt())this.mP=t.Zxt(e,s,i.zs(0),h.zs(0));else{const r=t.xMt(e,s);this.mP=function(){return Dy.xor(r(i.zs(0),h.zs(0)),n)}}}else if(3===r.length){const i=r[0],h=r[1],o=r[2];if(!n&&i.vwt()&&h.vwt()&&o.vwt())this.mP=t.Qxt(e,s,i.zs(0),h.zs(0),o.zs(0));else{const r=t.xMt(e,s);this.mP=function(){return Dy.xor(r(i.zs(0),h.zs(0),o.zs(0)),n)}}}else this.mP=i}C1(){return this.JQ}tSt(){return this.xbt}cU(){return this.ppt}c$(){return this.NMt}tTt(){return this.NMt?this.NMt.a$():this.ppt?this.ppt.zj():null}hxt(){const t=this.tTt();return t?t.sTt():1}cN(){return this.jbt}aW(){return this.Nc}ML(){return this.Aw}Nvt(){return this.ML()}$wt(){return this.Ixt}sSt(){return this.Pxt}iTt(){return this.Ext}G$(){return this.Axt}JT(){return this.wT}eTt(){return this.zSt.JSt}nTt(){return!!this.SMt}Fvt(){return this.nTt()||this.ppt.zj().Sj()}Ovt(){for(const t of this.Ws)if(t.YMt())return t.cU();return null}rTt(t){this.zSt.JSt=!!t,this.jbt.yvt()}hTt(){return this.zSt.Lxt}gSt(){return!this.eTt()&&!this.Nc.$vt()&&!this.hTt()}oTt(){return this.Dxt||(this.Dxt=new Map),this.Dxt}aTt(){return this.kxt||(this.kxt=new Map),this.kxt}Xxt(){const t=this.Fxt;return Oy(this.Ws,t),Dy.xor(this.xbt.apply(this.SMt,t),this.Ext)}*jxt(){if((this.eTt()||this.Nc.$vt())&&(yield this),this.hTt()){const t=this.Fxt;Oy(this.Ws,t);let s=this.xbt.apply(this.SMt,t);return Dy.bo(s)&&(s=yield*s),Dy.xor(s,this.Ext)}return this.mP()}Yxt(){const t=this.Fxt;Oy(this.Ws,t);const s=this.ppt.Vj().s$();return Dy.xor(this.xbt.apply(s,t),this.Ext)}*Hxt(){if((this.eTt()||this.Nc.$vt())&&(yield this),this.hTt()){const t=this.Fxt;Oy(this.Ws,t);const s=this.ppt.Vj().s$();let i=this.xbt.apply(s,t);return Dy.bo(i)&&(i=yield*i),Dy.xor(i,this.Ext)}return this.mP()}Nxt(){return!0}*Bxt(){return(this.eTt()||this.Nc.$vt())&&(yield this),!0}lTt(){return this.NMt?this.NMt.a$().sTt()>=2?this.NMt.u$():this.NMt:this.ppt.zj().sTt()>=2?this.ppt.Bj():this.ppt}Uxt(){const t=this.Fxt;Oy(this.Ws,t);const s=this.xbt.apply(this.lTt(),t);return this.ppt.dbt(),s}*zxt(){if((this.eTt()||this.Nc.$vt())&&(yield this),this.hTt()){const t=this.Fxt;Oy(this.Ws,t);let s=this.xbt.apply(this.lTt(),t);return Dy.bo(s)&&(s=yield*s),this.ppt.dbt(),s}return this.mP()}Jxt(){const t=this.Ws,s=this.Fxt,i=this.ppt.eV();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()||(s[i]=e.zs(0))}return i._pt()?this.uTt(i):this.cTt(i)}*$xt(){return(this.eTt()||this.Nc.$vt())&&(yield this),this.Jxt()}fTt(t){const s=this.Ws,i=this.Fxt;for(let e=0,n=s.length;e<n;++e){const n=s[e];n.XMt()&&(i[e]=n.zs(t))}}uTt(t){const s=this.ppt,i=s.S1(),e=s.kMt(),n=this.BMt,r=n>=0,h=s.iV(),o=this.Oxt,a=this.Fxt,l=this.xbt,u=this.Ext,c=this.Rxt&&!this.Ixt;t.Gpt();for(let s=0,f=h.length;s<f;++s){const f=h[s];let d;if(o&&this.fTt(s),r){const t=i?f.cU().jMt(e):0;d=l.apply(f.Rrt()[n+t].s$(),a)}else d=l.apply(f.s$(),a);Dy.xor(d,u)?t.Ept(f):c&&t.Rpt(f)}return s.dTt(!0),t.Fpt(!1),s.dbt(),t.Cpt()}cTt(t){const s=this.ppt,i=s.S1(),e=s.kMt(),n=s.MU(),r=this.BMt,h=r>=0,o=this.Oxt,a=this.Fxt,l=this.xbt,u=this.Ext,c=this.Rxt&&!this.Ixt,f=t.Opt(),d=t.Dpt(),p=c&&!this.jbt.Rvt(this),m=p?d:f;let g=0,y=!1;for(let t=0,s=m.length;t<s;++t){const s=m[t];let w;if(o&&this.fTt(t),h){const t=i?s.cU().jMt(e):0;w=l.apply(s.Rrt()[r+t].s$(),a)}else w=l.apply(s.s$(),a);Dy.xor(w,u)?(y=!0,p?(f.push(s),n&&s.pTt()):(m[g]=s,n&&s.mTt(g),++g)):p?(m[g]=s,n&&s.gTt(g),++g):c&&(d.push(s),n&&s.yTt())}Dy.wh(m,g),n&&s.wTt(p,g);const w=y;return p&&!y&&(y=this.STt(f)),s.dTt(w||c),c?y:t.Cpt()}STt(t){const s=this.ppt,i=s.S1(),e=s.kMt(),n=this.Oxt,r=this.BMt,h=r>=0,o=this.Fxt,a=this.xbt,l=this.Ext;for(let s=0,u=t.length;s<u;++s){const u=t[s];let c;if(n&&this.fTt(s),h){const t=i?u.cU().jMt(e):0;c=a.apply(u.Rrt()[r+t].s$(),o)}else c=a.apply(u.s$(),o);if(Dy.xor(c,l))return!0}return!1}vTt(t,s){return this.Ws[t].zs(s)}iSt(){const t=this.Ws;if(!t.length)throw new Error("no parameters");return t[0].rxt()}i5(){if(!this.Dxt||!this.Dxt.size)return null;const t={};for(const[s,i]of this.Dxt.entries()){let e=i;"collmemory"===s&&(e=[...i.entries()].map(t=>[t[0].TU(),t[1].TU(),t[2]])),t[s]=e}return{ex:t}}e5(t){if(this.Dxt&&(this.Dxt.clear(),this.Dxt=null),!t)return;const s=this.Nc,i=t.ex;if(i){const t=this.oTt();t.clear();for(const[e,n]of Object.entries(i)){let i=n;"collmemory"===e&&(i=Dy.Un(Dy.Cu,n.map(t=>[s.PB(t[0]),s.PB(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),t.set(e,i)}}}}}{let Ny=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(0)};0;const By=self._s,Wy=(self.assert,[]),jy=function(){},Vy=function*(){};By.svt=class extends By.Vn{constructor(t,s,i){super(),this.jbt=t;const e=t.aW();this.Nc=e,this.Aw=i,this.JQ=s.length>=4?s[3]:-1,this.bTt=s.length>=5?255&s[4]:0,this.MTt=s.length>=5?s[4]>>8:0,this.xbt=null,this.ppt=null,this.NMt=null,this.BMt=-1,this.SMt=null,this.xTt="",this.TTt=null,this.GTt=null,this.mP=jy,this.pyt=jy,this.Ws=[],this.Fxt=[],this.Oxt=!1,this.Dxt=null,this.kxt=null;const n=-3===s[0],r=n?s[2]:s[5];if(this.zSt=e.sz()||n?{JSt:r[0],Lxt:r[1],index:r[2]}:null,-1===s[0])this.SMt=e.AZ(),this.xbt=e.Mbt(s[1]);else if(-2===s[0])this.xTt=s[1];else if(n){const t=e.Mbt(s[1]);this.xbt=t,this.mP=this._Tt,this.pyt=this.CTt,this.MTt|=8}else this.ppt=e.$0(s[0]),4&this.MTt?(this.xTt=s[1],this.TTt=e.$0(s[2])):(s[2]&&(this.NMt=this.ppt.Frt(s[2]),this.BMt=this.ppt.eet(s[2])),this.xbt=e.Mbt(s[1]));if(7===s.length){const t=s[6];for(const s of t)this.Ws.push(By.$Mt.UG(this,s,this.Ws.length)),this.Fxt.push(0)}0===this.Ws.length&&(this.Ws=Wy,this.Fxt=Wy),this.ITt()&&(this.jbt.ovt(),this.jbt.vvt()),this.jbt.oN().Ggt(this)}static UG(t,s,i){return By.Un(By.svt,t,s,i)}Sgt(){for(const t of this.Ws)t.Sgt(),t.XMt()&&(this.Oxt=!0);if(this.SMt)this.Wxt(),this.pyt=this.jxt;else if(this.xTt)4&this.MTt?this.PTt():this.ATt(),this.xTt="",this.TTt=null;else if(this.mP===this._Tt){const t=this.xbt,s=this.Nc.oN().Vgt(this.jbt);this.xbt=t.bind(null,this.Nc.gj(),s)}else this.NMt?this.Kvt()?(this.mP=this.ETt,this.pyt=this.RTt):(this.mP=this.FTt,this.pyt=this.OTt):this.ppt.zj().Sj()?(this.Vxt(),this.pyt=this.Hxt):this.JT()?(this.mP=this.DTt,this.pyt=this.kTt):this.Kvt()?(this.mP=this.LTt,this.pyt=this.NTt):this.BTt()?(this.mP=this.WTt,this.pyt=this.jTt):this.Ws.length?this.Ws.every(t=>t.XMt())?(this.mP=this.VTt,this.pyt=this.HTt):this.Oxt?(this.mP=this.UTt,this.pyt=this.zTt):this.Ws.every(t=>t.vwt())?(Ny(this.Ws,this.Fxt),this.mP=this.JTt,this.pyt=this.$Tt):(this.mP=this.qTt,this.pyt=this.XTt):(this.mP=this.JTt,this.pyt=this.$Tt)}Wxt(){const t=this.SMt,s=this.SMt;this.qxt(t,s,this.Xxt)}Vxt(){const t=this.ppt.zj(),s=this.ppt.Vj().s$();this.qxt(t,s,this.Yxt)}ATt(){const t=this.jbt.oN(),s=t.aN(this.xTt);if(s._u()){const i=!!(2&this.MTt);this.GTt=s.cN();let e=[...new Set([...this.jbt.fN(),...this.GTt.fN()])];e=t.Agt(e);const n=!s.gN()&&this.YTt()?{gbt:!0}:null;if(this.mP=By.zwt.prototype.ubt.bind(this.GTt,e,this.Ws,i,n),this.Nc.sz()){const t=this;this.pyt=function*(){return(t.eTt()||t.Nc.$vt())&&(yield t),yield*t.GTt.Sbt(e,t.Ws,i,n)}}else this.pyt=Vy}else this.mP=jy,this.pyt=Vy}PTt(){const t=this.jbt.oN(),s=t.Xgt(this.TTt,this.xTt);if(s._u()){const i=!!(2&this.MTt);this.GTt=s.cN();let e=[...new Set([...this.jbt.fN(),...this.GTt.fN(),this.ppt,s.cU()])];e=t.Agt(e);const n=!this.ppt.S1()&&!s.cU().S1(),r=!this.ppt.S1()&&s.cU().S1(),h=this.ppt.S1();let o=null;if(!s.gN()&&this.YTt()&&(o=o||{},o.gbt=!0),!r&&i||(o=o||{},o.cbt=this.ppt,o.fbt=s.cU()),n||r||h&&!s.Ybt()?this.mP=By.zwt.prototype.ubt.bind(this.GTt,e,this.Ws,i,o):h&&(this.mP=By._wt.prototype.tMt.bind(s,e,this.Ws)),this.Nc.sz()){const t=this;n||r||h&&!s.Ybt()?this.pyt=function*(){return(t.eTt()||t.Nc.$vt())&&(yield t),yield*t.GTt.Sbt(e,t.Ws,i,o)}:h&&(this.pyt=function*(){return(t.eTt()||t.Nc.$vt())&&(yield t),yield*s.iMt(e,t.Ws)})}else this.pyt=Vy}else this.mP=jy,this.pyt=Vy}qxt(t,s,i){const e=this.xbt,n=this.Ws;if(0===n.length)this.mP=t.xMt(e,s);else if(1===n.length){const i=n[0];if(i.vwt())this.mP=t.Kxt(e,s,i.zs(0));else{const n=t.xMt(e,s);this.mP=function(){return n(i.zs(0))}}}else if(2===n.length){const i=n[0],r=n[1];if(i.vwt()&&r.vwt())this.mP=t.Zxt(e,s,i.zs(0),r.zs(0));else{const n=t.xMt(e,s);this.mP=function(){return n(i.zs(0),r.zs(0))}}}else if(3===n.length){const i=n[0],r=n[1],h=n[2];if(i.vwt()&&r.vwt()&&h.vwt())this.mP=t.Qxt(e,s,i.zs(0),r.zs(0),h.zs(0));else{const n=t.xMt(e,s);this.mP=function(){return n(i.zs(0),r.zs(0),h.zs(0))}}}else this.mP=i}C1(){return this.JQ}Kvt(){return!!(8&this.MTt)}Yvt(){return!!(16&this.MTt)}BTt(){return 1===this.bTt}JT(){return 2===this.bTt}ITt(){return!!(1&this.MTt)}uvt(){return this.Kvt()||this.Yvt()}cU(){return this.ppt}tTt(){return this.NMt?this.NMt.a$():this.ppt?this.ppt.zj():null}hxt(){const t=this.tTt();return t?t.sTt():1}cN(){return this.jbt}YTt(){let t=this.jbt;do{if(t instanceof By._wt&&t.gN())return!0;t=t.Wgt()}while(t);return!1}aW(){return this.Nc}ML(){return this.Aw}Nvt(){return this.zSt.index}eTt(){return this.zSt.JSt}rTt(t){this.zSt.JSt=!!t,this.jbt.yvt()}hTt(){return this.zSt.Lxt}gSt(){return!this.eTt()&&!this.Nc.$vt()&&!this.hTt()}oTt(){return this.Dxt||(this.Dxt=new Map),this.Dxt}aTt(){return this.kxt||(this.kxt=new Map),this.kxt}Xxt(){const t=this.Fxt;return Ny(this.Ws,t),this.xbt.apply(this.SMt,t)}*jxt(){if((this.eTt()||this.Nc.$vt())&&(yield this),this.hTt()){const t=this.Fxt;return Ny(this.Ws,t),yield*this.xbt.apply(this.SMt,t)}return this.mP()}Yxt(){const t=this.Fxt;return Ny(this.Ws,t),this.xbt.apply(this.ppt.Vj().s$(),t)}*Hxt(){if((this.eTt()||this.Nc.$vt())&&(yield this),this.hTt()){const t=this.Fxt;return Ny(this.Ws,t),yield*this.xbt.apply(this.ppt.Vj().s$(),t)}return this.mP()}JTt(){const t=this.Fxt,s=this.ppt.eV().iV();for(let i=0,e=s.length;i<e;++i)this.xbt.apply(s[i].s$(),t)}*$Tt(){if((this.eTt()||this.Nc.$vt())&&(yield this),this.hTt()){const t=this.Fxt,s=this.ppt.eV().iV();for(let i=0,e=s.length;i<e;++i)yield*this.xbt.apply(s[i].s$(),t)}else this.JTt()}qTt(){const t=this.Fxt;Ny(this.Ws,t);const s=this.ppt.eV().iV();for(let i=0,e=s.length;i<e;++i)this.xbt.apply(s[i].s$(),t)}*XTt(){if((this.eTt()||this.Nc.$vt())&&(yield this),this.hTt()){const t=this.Fxt;Ny(this.Ws,t);const s=this.ppt.eV().iV();for(let i=0,e=s.length;i<e;++i)yield*this.xbt.apply(s[i].s$(),t)}else this.qTt()}VTt(){const t=this.Ws,s=this.Fxt,i=this.xbt,e=this.ppt.eV().iV();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(n);i.apply(r.s$(),s)}}*HTt(){if((this.eTt()||this.Nc.$vt())&&(yield this),this.hTt()){const t=this.Ws,s=this.Fxt,i=this.xbt,e=this.ppt.eV().iV();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(n);yield*i.apply(r.s$(),s)}}else this.VTt()}UTt(){const t=this.Ws,s=this.Fxt,i=this.xbt,e=this.ppt.eV().iV();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()||(s[i]=e.zs(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()&&(s[i]=e.zs(n))}i.apply(r.s$(),s)}}*zTt(){if((this.eTt()||this.Nc.$vt())&&(yield this),this.hTt()){const t=this.Ws,s=this.Fxt,i=this.xbt,e=this.ppt.eV().iV();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()||(s[i]=e.zs(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()&&(s[i]=e.zs(n))}yield*i.apply(r.s$(),s)}}else this.UTt()}WTt(){const t=this.Ws,s=this.Fxt,i=this.xbt,e=this.ppt,n=e.KTt(),r=e.eV().iV();n.ZTt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].zs(e);i.apply(n.s$(),s)}n.QTt(i)}*jTt(){if((this.eTt()||this.Nc.$vt())&&(yield this),this.hTt()){const t=this.Ws,s=this.Fxt,i=this.xbt,e=this.ppt,n=e.KTt(),r=e.eV().iV();n.ZTt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].zs(e);yield*i.apply(n.s$(),s)}n.QTt(i)}else this.WTt()}tGt(){return this.NMt?this.NMt.a$().sTt()>=2?this.NMt.u$():this.NMt:this.ppt.zj().sTt()>=2?this.ppt.Bj():this.ppt}DTt(){const t=this.Fxt;return Ny(this.Ws,t),this.xbt.apply(this.tGt(),t)}*kTt(){if((this.eTt()||this.Nc.$vt())&&(yield this),this.hTt()){const t=this.Fxt;Ny(this.Ws,t);let s=this.xbt.apply(this.tGt(),t);return By.bo(s)&&(s=yield*s),s}return this.DTt()}FTt(){const t=this.ppt,s=t.S1(),i=t.kMt(),e=this.Ws,n=this.Oxt,r=this.Fxt,h=this.xbt,o=this.BMt,a=t.eV().iV();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.XMt()||(r[t]=s.zs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.XMt()&&(r[s]=i.zs(t))}const u=s?l.cU().jMt(i):0;h.apply(l.Rrt()[o+u].s$(),r)}}*OTt(){if((this.eTt()||this.Nc.$vt())&&(yield this),this.hTt()){const t=this.ppt,s=t.S1(),i=t.kMt(),e=this.Ws,n=this.Oxt,r=this.Fxt,h=this.xbt,o=this.BMt,a=t.eV().iV();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.XMt()||(r[t]=s.zs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.XMt()&&(r[s]=i.zs(t))}const u=s?l.cU().jMt(i):0;yield*h.apply(l.Rrt()[o+u].s$(),r)}}else this.FTt()}LTt(){const t=this.Ws,s=this.Fxt,i=this.xbt,e=this.ppt.eV().iV(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(r);n.push(i.apply(h.s$(),s))}return Promise.all(n)}*NTt(){if((this.eTt()||this.Nc.$vt())&&(yield this),this.hTt()){const t=this.Ws,s=this.Fxt,i=this.xbt,e=this.ppt.eV().iV(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(r);n.push(yield*i.apply(h.s$(),s))}return Promise.all(n)}return this.LTt()}ETt(){const t=this.ppt,s=t.S1(),i=t.kMt(),e=this.Ws,n=this.Fxt,r=this.xbt,h=this.BMt,o=t.eV().iV(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].zs(t);const u=s?l.cU().jMt(i):0;a.push(r.apply(l.Rrt()[h+u].s$(),n))}return Promise.all(a)}*RTt(){if((this.eTt()||this.Nc.$vt())&&(yield this),this.hTt()){const t=this.ppt,s=t.S1(),i=t.kMt(),e=this.Ws,n=this.Fxt,r=this.xbt,h=this.BMt,o=t.eV().iV(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].zs(t);const u=s?l.cU().jMt(i):0;a.push(yield*r.apply(l.Rrt()[h+u].s$(),n))}return Promise.all(a)}return this.ETt()}async _Tt(){try{await this.xbt()}catch(t){console.error(`Unhandled exception running script %c${this.jbt.K5().Pc()}, event ${this.jbt.xvt()}, action ${this.Nvt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.iz&&self.iz.Gbt(this),By.Qwt._bt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),By.Qwt.Cbt())}}*CTt(){return(this.eTt()||this.Nc.$vt())&&(yield this),this._Tt()}i5(){return this.Dxt&&this.Dxt.size?{ex:By.wo(this.Dxt)}:null}e5(t){if(this.Dxt&&(this.Dxt.clear(),this.Dxt=null),!t)return;const s=t.ex;s&&(this.Dxt=By.So(s))}}}{let Hy=function(t){return t instanceof cw?uw.qV(t):t.Iq()},Uy=function(t){return Hy(t).DB()},zy=function(t){return uw.qV(t)},Jy=function(t){return zy(t).DB()},$y=function(t){return t instanceof fw?uw.qV(t):t},qy=function(t){return t instanceof dw?uw.qV(t):t},Xy=function(t,s,i,e){s.TU()<i.TU()?t.Set(s,i,e):t.Set(i,s,e)},Yy=function(t,s,i){s.TU()<i.TU()?t.Eu(s,i):t.Eu(i,s)},Ky=function(t,s){t.Ru(s)},Zy=function(t,s,i){return s.TU()<i.TU()?t.zs(s,i):t.zs(i,s)},Qy=function(t,s,i,e){if(!s)return!1;const n=0!==i||0!==e,r=t.DB(),h=uw.AL(),o=uw.Ogt(),a=o.cN().Hpt(),l=o.cU(),u=o.iTt(),c=s.eV(),f=l!==s;let d;ww=s,yw=f&&!u,Sw=!1;let p=0,m=0,g=!1;c._pt()?(pw.m(r.Nz()),pw.offset(i,e),h.sGt(r.kB(),s,pw,gw),d=gw):a?uw.iGt()&&!c.Dpt().length&&c.Opt().length?d=c.Opt():(d=c.Dpt(),Sw=!0):d=c.Opt(),n&&(p=r.qM(),m=r.KM(),r.Gz(i,e),r.Mz());for(const s of d)if(h.AW(t,s)){if(g=!0,u)break;f&&vw.add(s)}return n&&(r.xz(p,m),r.Mz()),rw.Sh(gw),g},tw=function(t){const s=uw.dN().Hpt(),i=ww.eV(),e=i.Opt(),n=i.Dpt();i._pt()?(i.Npt(vw),s&&(rw.Sh(n),i.Bpt(vw,ww.iV()))):s?Sw?i.Wpt(vw):(i.Bpt(vw,e),i.Npt(vw)):i.Npt(vw),ww.dbt()},sw=function(t,s){yw&&(s&&tw(t),vw.clear(),ww=null,yw=!1)},iw=function(t,s){const i=uw.PB(s);if(!i)return!1;const e=t.eV();if(!e._pt()&&!e.Opt().includes(i))return!1;if(t.S1()){if(i.cU().eGt(t))return e.Vpt(i),t.dbt(),!0}else if(i.cU()===t)return e.Vpt(i),t.dbt(),!0;return!1},ew=function(t,s){const i=t.eV();if(i._pt()){i.Fpt(!1),i.Gpt();const e=t.iV();for(let t=0,n=e.length;t<n;++t){const n=e[t];n.TU()===s?i.Rpt(n):i.Ept(n)}return t.dbt(),!!i.Opt().length}{const e=i.Opt();let n=0;for(let t=0,r=e.length;t<r;++t){const r=e[t];e[n]=r,r.TU()===s?i.Rpt(r):++n}return rw.wh(e,n),t.dbt(),!!e.length}};0;const rw=self._s,hw=new rw.xo,ow={},aw={},lw={};let uw=null;rw.nGt=function(t){uw=t};const cw=self.uU,fw=self.Hj,dw=self.$V;aw.rGt=function(t,s){return rw.compare(this.DB().qM(),t,s)},lw.rGt=function(t,s){return rw.compare(this.x,t,s)},aw.hGt=function(t,s){return rw.compare(this.DB().KM(),t,s)},lw.hGt=function(t,s){return rw.compare(this.y,t,s)},aw.oGt=function(){return this.DB().Vz()},lw.oGt=function(){return this.jz()},ow.aGt=function(){const t=Uy(this),s=t.pB(),i=t.Nz();return i.tl()<0||i.sl()<0||i.Za()>s.Vg()||i.Qa()>s.Zg()},ow.lGt=function(t,s,i){const e=$y(this).eV(),n=e.iV();if(!n.length)return!1;let r=n[0],h=r.DB(),o=r,a=rw.er(h.qM(),h.KM(),s,i);for(let e=1,l=n.length;e<l;++e){r=n[e],h=r.DB();const l=rw.er(h.qM(),h.KM(),s,i);(0===t&&l<a||1===t&&l>a)&&(a=l,o=r)}return e.Vpt(o),!0},aw.XM=function(t){const s=this.DB();s.qM()!==t&&(s.XM(t),s.Mz())},lw.XM=function(t){this.x=+t},aw.ZM=function(t){const s=this.DB();s.KM()!==t&&(s.ZM(t),s.Mz())},lw.ZM=function(t){this.y=+t},aw.uGt=function(t,s){const i=this.DB();i.cGt(t,s)||(i.xz(t,s),i.Mz())},lw.uGt=function(t,s){this.setPosition(t,s)},ow.fGt=function(t,s){if(!(t=$y(t)))return;const i=Hy(this),e=t.tV(i);if(!e)return;const[n,r]=e.dGt(s),h=i.DB();h.qM()===n&&h.KM()===r||(h.xz(n,r),h.Mz())},ow.pGt=function(t){if(0===t)return;const s=Uy(this);s.Gz(s.mGt()*t,s.gGt()*t),s.Mz()},aw.yGt=function(t,s){if(0===s)return;const i=this.DB();t=rw.Zn(t),i.Gz(Math.cos(t)*s,Math.sin(t)*s),i.Mz()},lw.yGt=function(t,s){0!==s&&(t=rw.Zn(t),this.offsetPosition(Math.cos(t)*s,Math.sin(t)*s))},aw.qM=function(){return this.DB().qM()},lw.qM=function(){return this.x},aw.KM=function(){return this.DB().KM()},lw.KM=function(){return this.y},ow.AN=function(){return uw.AN(Hy(this))},aw.wGt=function(t,s){return rw.compare(this.DB().Vg(),t,s)},lw.wGt=function(t,s){return rw.compare(this.width,t,s)},aw.SGt=function(t,s){return rw.compare(this.DB().Zg(),t,s)},lw.SGt=function(t,s){return rw.compare(this.height,t,s)},aw.Xg=function(t){const s=this.DB();s.Vg()!==t&&(s.Xg(t),s.Mz())},lw.Xg=function(t){this.width=t},aw.Hg=function(t){const s=this.DB();s.Zg()!==t&&(s.Hg(t),s.Mz())},lw.Hg=function(t){this.height=t},aw.BA=function(t,s){const i=Uy(this);i.Vg()===t&&i.Zg()===s||(i.BA(t,s),i.Mz())},lw.BA=function(t,s){this.PV(t,s)},aw.Vg=function(){return this.DB().Vg()},lw.Vg=function(){return this.width},aw.Zg=function(){return this.DB().Zg()},lw.Zg=function(){return this.height},ow.vGt=function(){return Uy(this).Nz().Za()},ow.bGt=function(){return Uy(this).Nz().Qa()},ow.MGt=function(){return Uy(this).Nz().tl()},ow.xGt=function(){return Uy(this).Nz().sl()},ow.TGt=function(){const t=Uy(this).Nz();return(t.Za()+t.tl())/2},ow.GGt=function(){const t=Uy(this).Nz();return(t.Qa()+t.sl())/2},ow._Gt=function(t,s){return rw.rr(Uy(this).FV(),rw.Zn(s))<=rw.Zn(t)},ow.CGt=function(t){return rw.ar(Uy(this).FV(),rw.Zn(t))},ow.IGt=function(t,s){const i=rw.Zn(t),e=rw.Zn(s),n=Uy(this).FV();return rw.ar(e,i)?rw.ar(n,i)&&!rw.ar(n,e):!(!rw.ar(n,i)&&rw.ar(n,e))},aw.RV=function(t){const s=this.DB(),i=rw.Kn(rw.Zn(t));isNaN(i)||s.FV()===i||(s.RV(i),s.Mz())},lw.RV=function(t){this.kz=t},ow.PGt=function(t){if(isNaN(t)||0===t)return;const s=Uy(this);s.RV(s.FV()+rw.Zn(t)),s.Mz()},ow.AGt=function(t){if(isNaN(t)||0===t)return;const s=Uy(this);s.RV(s.FV()-rw.Zn(t)),s.Mz()},ow.EGt=function(t,s){const i=Uy(this),e=i.FV(),n=rw.hr(e,rw.Zn(s),rw.Zn(t));isNaN(n)||e===n||(i.RV(n),i.Mz())},ow.RGt=function(t,s,i){const e=Uy(this),n=e.FV(),r=s-e.qM(),h=i-e.KM(),o=Math.atan2(h,r),a=rw.hr(n,o,rw.Zn(t));isNaN(a)||n===a||(e.RV(a),e.Mz())},ow.FGt=function(t,s){const i=Uy(this),e=i.FV(),n=t-i.qM(),r=s-i.KM(),h=Math.atan2(r,n);isNaN(h)||e===h||(i.RV(h),i.Mz())},aw.FV=function(){return rw.Qn(this.DB().FV())},lw.FV=function(){return this.kz},ow.OGt=function(t,s){return rw.compare(rw.Tr(100*Uy(this).wF(),6),t,s)},aw.SH=function(){return this.DB().SH()},lw.SH=function(){return this.isVisible},ow.yH=function(t){const s=Uy(this);t=2===t?!s.SH():0!==t,s.SH()!==t&&(s.yH(t),uw.VB())},ow.vF=function(t){const s=rw.Yn(t/100,0,1),i=Uy(this);if(i.FJ()){if(i.Hrt().DGt()===s)return}else if(i.wF()===s)return;i.vF(s),uw.VB()},ow.kGt=function(t){hw.Qo(t);const s=Uy(this);s.zz().zo(hw)||(s.Jz(hw),uw.VB())},ow.MF=function(){const t=Uy(this).zz();return rw.Cr(t.Lo(),t.No(),t.Bo(),t.Wo())},ow.wF=function(){return rw.Tr(100*Uy(this).wF(),6)},ow.LGt=function(t){return!!(t=qy(t))&&Uy(this).kB()===t},ow.NGt=function(t){const s=$y(this).eV(),i=s.iV();if(!i.length)return!1;let e=i[0];for(let s=1,n=i.length;s<n;++s){const n=i[s],r=n.DB(),h=e.DB(),o=r.kB().ML(),a=h.kB().ML();0===t?(o>a||o===a&&r.LB()>h.LB())&&(e=n):(o<a||o===a&&r.LB()<h.LB())&&(e=n)}return s.Vpt(e),!0},aw.BGt=function(t,s,i){const e=this.DB(),n=0===t?e.QM():e.Dz();return rw.compare(n,s,i)},lw.BGt=function(t,s,i){const e=0===t?this.WH:this.Oz;return rw.compare(e,s,i)},aw.WGt=function(){this.DB().qz()},lw.WGt=function(){this.$z()},aw.jGt=function(){this.DB().Yz()},lw.jGt=function(){this.Xz()},ow.VGt=function(t){(t=qy(t))&&Uy(this).Zz(t)},ow.HGt=function(t,s){const i=0===t;if(!(s=$y(s)))return;const e=Hy(this),n=s.UGt(e);n&&e.DB().tJ(n,i)},aw.tx=function(t){const s=this.DB();s.QM()!==t&&(s.tx(t),uw.VB())},lw.tx=function(t){this.WH=t},ow.zGt=function(){return Uy(this).kB().ML()},ow.JGt=function(){return Uy(this).kB().Pc()},aw.$Gt=function(){return this.DB().LB()},lw.$Gt=function(){return this.zIndex},aw.qGt=function(){return this.DB().QM()},lw.qGt=function(){return this.WH},aw.XGt=function(){return this.DB().Dz()},lw.XGt=function(){return this.Oz},ow.YGt=function(t){const s=Hy(this),i=s.cU()._V().Drt(t);if(!i)return;const e=i.ML();return s.DB().vz().y$(e)},ow.KGt=function(t,s){const i=Hy(this),e=i.cU()._V().Drt(s);if(!e)return;const n=e.ML(),r=1===t,h=i.DB().vz();h.y$(n)!==r&&(h.w$(n,r),h.S$(),uw.VB())},ow.ZGt=function(t,s,i){const e=Hy(this),n=e.cU()._V().Drt(t);if(!n)return;s=Math.floor(s);const r=n.z_().q_(s);if(!r)return;"color"===r?(hw.Qo(i),i=hw):"percent"===r&&(i/=100);const h=n.ML(),o=e.DB().vz();o.b$(h,s,i)&&o.y$(h)&&uw.VB()};const pw=rw.Un(rw.Rect),mw=[],gw=[];let yw=!1,ww=null,Sw=!1;const vw=new Set;function*bw(t){if(!t)return!1;const s=this.aW(),i=s.AL(),e=s.oN(),n=e.vN(),r=e.Ogt(),h=r.cU(),o=r.oTt(),a=r.aTt(),l=n.tY(),u=s.kN(),c=u-1,f=l.dN(),d=n.sY(f);let p=o.get("collmemory");p||(p=rw.Un(rw.Cu),o.set("collmemory",p)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),s.wf().addEventListener("instancedestroy",t=>Ky(p,t.f$)));const m=h.eV(),g=t.eV(),y=m.iV();let w=null;for(let s=0;s<y.length;++s){const n=y[s];g._pt()?(i.sGt(n.DB().kB(),t,n.DB().Nz(),mw),w=mw,i.QGt(n,t,w)):w=g.iV();for(let s=0;s<w.length;++s){const r=w[s];if(i.AW(n,r)||i.t_t(n,r)){const s=Zy(p,n,r);let i=!1,o=-2;"number"==typeof s&&(i=!0,o=s);const a=!i||o<c;if(Xy(p,n,r,u),a){const s=f.QX();e.hY(s);const i=h.eV(),o=t.eV();if(i.Fpt(!1),o.Fpt(!1),h===t){const t=i.Opt();rw.Sh(t),t.push(n),t.push(r),h.dbt()}else{const s=i.Opt(),e=o.Opt();rw.Sh(s),rw.Sh(e),s.push(n),e.push(r),h.dbt(),t.dbt()}yield*f.nbt(l,d),e.aY(s)}}else Yy(p,n,r)}rw.Sh(mw)}return n.fY(),!1}ow.s_t=function(t){const s=$y(this);t=$y(t);const i=s.aW();if(i.i_t())return bw.call(s,t);if(!t)return!1;const e=i.AL(),n=i.oN(),r=n.vN(),h=n.Ogt(),o=h.cU(),a=h.oTt(),l=h.aTt(),u=r.tY(),c=i.kN(),f=c-1,d=u.dN(),p=r.sY(d);let m=a.get("collmemory");m||(m=rw.Un(rw.Cu),a.set("collmemory",m)),l.get("collisionCreatedDestroyCallback")||(l.set("collisionCreatedDestroyCallback",!0),i.wf().addEventListener("instancedestroy",t=>Ky(m,t.f$)));const g=o.eV(),y=t.eV(),w=g.iV();let S=null;for(let s=0;s<w.length;++s){const i=w[s];y._pt()?(e.sGt(i.DB().kB(),t,i.DB().Nz(),mw),S=mw,e.QGt(i,t,S)):S=y.iV();for(let s=0;s<S.length;++s){const r=S[s];if(e.AW(i,r)||e.t_t(i,r)){const s=Zy(m,i,r);let e=!1,h=-2;"number"==typeof s&&(e=!0,h=s);const a=!e||h<f;if(Xy(m,i,r,c),a){const s=d.QX();n.hY(s);const e=o.eV(),h=t.eV();if(e.Fpt(!1),h.Fpt(!1),o===t){const t=e.Opt();rw.Sh(t),t.push(i),t.push(r),o.dbt()}else{const s=e.Opt(),n=h.Opt();rw.Sh(s),rw.Sh(n),s.push(i),n.push(r),o.dbt(),t.dbt()}d.oY(u,p),n.aY(s)}}else Yy(m,i,r)}rw.Sh(mw)}return r.fY(),!1},ow.e_t=function(t){return t=$y(t),Qy(Hy(this),t,0,0)},ow.n_t=function(t,s,i){return t=$y(t),Qy(Hy(this),t,s,i)},ow.r_t=function(){return!0},ow.wJ=function(){return Uy(this).wJ()},ow.h5=function(){return Uy(this).h5()},ow.h_t=function(t,s){const i=$y(this);t=$y(t);const e=i.aW(),n=this.eV().iV();if(0===n.length)return!1;const r=t.eV();let h=r.iV();if(r._pt()){const s=[...e.o_t(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r._pt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];if(1===s)for(const s of e.aJ())s.a_t(t)&&(null===o||o.has(s))&&a.add(s);else{let i;if(0===s){if(i=e.rJ(),null===i)continue}else i=e.oJ();i.a_t(t)&&(null===o||o.has(i))&&a.add(i)}}return 0!==a.size&&(r.Npt(a),t.dbt(),!0)},ow.l_t=function(t,s){const i=$y(this);t=$y(t);const e=i.aW(),n=i.eV().iV();if(0===n.length)return!1;const r=t.eV();let h=r.iV();if(r._pt()){const s=[...e.o_t(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r._pt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];2!==s||e.h5()||!e.a_t(t)||null!==o&&!o.has(e)||a.add(e);for(const i of 0===s?e.children():e.dJ())2===s&&i.h5()||i.a_t(t)&&(null===o||o.has(i))&&a.add(i)}return 0!==a.size&&(r.Npt(a),t.dbt(),!0)},ow.u_t=function(t,s,i){const e=$y(this);t=$y(t);const n=e.aW(),r=e.eV().iV();if(0===r.length)return!1;const h=t.eV();let o=h.iV();if(h._pt()){const s=[...n.o_t(t)];s.length>0&&(o=o.concat(s))}if(0===o.length)return!1;const a=h._pt()?null:new Set(o),l=[];for(let e=0,n=r.length;e<n;++e){const n=r[e];if(0===s){const s=n.fJ(i);null!==s&&s.a_t(t)&&(null===a||a.has(s))&&l.push(s)}else if(1===s)for(const s of n.children())if(s.a_t(t)){if(0===i){(null===a||a.has(s))&&l.push(s);break}--i}}return 0!==l.length&&(h.Lpt(l),t.dbt(),!0)},ow.c_t=function(t,s,i){const e=Hy(this);switch(t){case 0:default:return rw.compare(e.uJ(),s,i);case 1:return rw.compare(e.f_t(),s,i)}},ow.mJ=function(t,s,i,e,n,r,h,o,a,l){t=$y(t);const u=Hy(this),c=uw.kgt().cU();for(const f of t.d_t(u,c)){if(!f.zj().Ej())return;u.mJ(f,{vJ:s,MJ:i,TJ:e,_J:n,IJ:r,RJ:h,AJ:o,OJ:a,kJ:l})}},ow.gJ=function(t){t=$y(t);const s=Hy(this),i=uw.kgt().cU();for(const e of t.d_t(s,i))s.gJ(e)},ow.p_t=function(){const t=Hy(this);t.wJ()&&t.rJ().gJ(t)},ow.m_t=function(){const t=Hy(this).rJ();return t?t.TU():-1},ow.g_t=function(){return Hy(this).uJ()},ow.y_t=function(){return Hy(this).f_t()},ow.w_t=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=Uy(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.jJ(),i.Mz()):i.BJ(t,s)},ow.HJ=function(t,s,i,e,n,r,h,o){const a=Uy(this);a.HJ(t,s,{mode:0===i?"absolute":"relative",x:e,y:n,WH:r,$J:h,qJ:o})&&a.Mz()},ow.S_t=function(){const t=Uy(this);return t.zJ()?t.JJ().Fx():0},ow.v_t=function(){const t=Uy(this);return t.zJ()?t.JJ().Ox():0},ow.b_t=function(t){const s=Uy(this);t=2===t?!s.SH():0!==t,s.SH()!==t&&s.yH(t)},ow.r$=function(t,s){this instanceof self.uU?this.xX(t,s):this.r$(t,s)},ow.M_t=function(t,s){this instanceof self.uU?this.GX(t,""+s):this.M_t(t,""+s)},ow.x_t=function(t){this instanceof self.uU?this._X(t):this.x_t(t)},ow.T_t=function(){this instanceof self.uU?this.vX():this.i$()},ow.G_t=function(){this instanceof self.uU?this.bX():this.e$()},ow.__t=function(){return this instanceof self.uU?this.MX():this.__t()},ow.C_t=function(t){this instanceof self.uU?this.I_t(0!==t):this.P_t(0!==t)},ow.A_t=function(){return this instanceof self.uU?this.Rbt():this.E_t()},aw.R_t=function(t,s,i){return rw.compare(this.Iq().lot(t),s,i)},lw.R_t=function(t,s,i){return rw.compare(zy(this).lot(t),s,i)},aw.F_t=function(t){return!!this.Iq().lot(t)},lw.F_t=function(t){return!!zy(this).lot(t)},ow.O_t=function(t,s){const i=$y(this),e=i.eV(),n=e.iV();if(!n.length)return!1;const r=i.S1();let h=null,o=0;for(let e=0,a=n.length;e<a;++e){const a=n[e],l=r?a.cU().DMt(i.kMt()):0,u=a.lot(l+s);(null===h||0===t&&u<o||1===t&&u>o)&&(o=u,h=a)}return e.Vpt(h),!0},ow.D_t=function(t){const s=$y(this);return s.aW().Ogt().iTt()?ew(s,t):iw(s,t)},ow.rq=function(t){const s=new Set(rw.Dh(t)),i=Hy(this).FU();return s.isSubsetOf(i)},ow.k_t=function(){return Hy(this).L_t()},ow.N_t=function(){return Hy(this).FU().size},ow.B_t=function(t){return Hy(this).W_t(t)},ow.j_t=function(t,s){const i=rw.Dh(s);if(0===i.length)return;const e=Hy(this),n=new Set(e.FU());if(0===t)for(const t of i)n.add(t);else if(1===t)for(const t of i)n.delete(t);e.DU(n)},ow.V_t=function(){uw.yU(Hy(this))},ow.H_t=function(){return!0},ow.U_t=function(){return!0},aw.z_t=function(t,s){this.Iq().uot(t,s)},lw.z_t=function(t,s){zy(this).uot(t,s)},aw.J_t=function(t,s){const i=this.Iq(),e=i.lot(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.uot(t,e+s)},lw.J_t=function(t,s){const i=zy(this),e=i.lot(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.uot(t,e+s)},aw.$_t=function(t,s){const i=this.Iq(),e=i.lot(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.uot(t,e-s))},lw.$_t=function(t,s){const i=zy(this),e=i.lot(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.uot(t,e-s))},aw.q_t=function(t,s){this.Iq().uot(t,s?1:0)},lw.q_t=function(t,s){zy(this).uot(t,s?1:0)},aw.X_t=function(t){const s=this.Iq();s.uot(t,0===s.lot(t)?1:0)},lw.X_t=function(t){const s=zy(this);s.uot(t,0===s.lot(t)?1:0)},ow.Y_t=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=Hy(this),e="state";uw.K_t(),i.u8(e),i.mx(s,e),uw.Z_t(e,{Q_t:!0})},ow.tCt=function(){return JSON.stringify(Hy(this).ux("state"))},ow.sCt=function(){return Hy(this).cU().Pc()},ow.iCt=function(){const t=uw.Fgt().Smt();let s=t.hV();for(const i of uw.o_t(t))++s;return s},ow.eCt=function(){return uw.Fgt().Smt().eV().iV().length},aw._U=function(){return this.Iq()._U()},lw._U=function(){return zy(this)._U()},aw.TU=function(){return this.Iq().TU()},lw.TU=function(){return zy(this).TU()},ow.ewt=function(t){const s=Hy(this);return t.toLowerCase()===uw.oN().owt(s)},ow.LU=function(t){const s=Hy(this);uw.oN().LU(s,t)},ow.nCt=function(t){const s=$y(this);return uw.oN().Oyt().rCt(s.eV().iV(),t),!0},ow.hCt=function(){return Hy(this).IU()},rw.oCt=function(t,s,i){const e=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.QB,w=s.yht,S=s.wht,v=Object.assign({},ow,i>=2?lw:aw);n&&(y.rGt=v.rGt,y.hGt=v.hGt,y.oGt=v.oGt,y.aGt=v.aGt,y.lGt=v.lGt,w.XM=v.XM,w.ZM=v.ZM,w.uGt=v.uGt,w.fGt=v.fGt,w.pGt=v.pGt,w.yGt=v.yGt,S.aCt=v.qM,S.lCt=v.KM,S.PN=v.AN),r&&(y.wGt=v.wGt,y.SGt=v.SGt,w.Xg=v.Xg,w.Hg=v.Hg,w.BA=v.BA,S.uCt=v.Vg,S.cCt=v.Zg,S.fCt=v.vGt,S.dCt=v.bGt,S.pCt=v.MGt,S.mCt=v.xGt,S.gCt=v.TGt,S.yCt=v.GGt),h&&(y.wCt=v._Gt,y.SCt=v.CGt,y.IGt=v.IGt,w.RV=v.RV,w.PGt=v.PGt,w.AGt=v.AGt,w.EGt=v.EGt,w.RGt=v.RGt,w.FGt=v.FGt,S.vCt=v.FV),o&&(y.SH=v.SH,y.OGt=v.OGt,w.yH=v.yH,w.vF=v.vF,w.kGt=v.kGt,S.Opacity=v.wF,S.ColorValue=v.MF),a&&(y.LGt=v.LGt,y.NGt=v.NGt,y.BGt=v.BGt,w.WGt=v.WGt,w.jGt=v.jGt,w.VGt=v.VGt,w.HGt=v.HGt,w.tx=v.tx,S.zGt=v.zGt,S.JGt=v.JGt,S.$Gt=v.$Gt,S.qGt=v.qGt,S.XGt=v.XGt),l&&(y.YGt=v.YGt,w.KGt=v.KGt,w.ZGt=v.ZGt),d&&(y.r_t=v.r_t,y.wJ=v.wJ,y.h5=v.h5,y.h_t=v.h_t,y.l_t=v.l_t,y.u_t=v.u_t,y.c_t=v.c_t,w.mJ=v.mJ,w.gJ=v.gJ,w.p_t=v.p_t,S.m_t=v.m_t,S.g_t=v.g_t,S.y_t=v.y_t),p&&(w.w_t=v.w_t,w.HJ=v.HJ,S.S_t=v.S_t,S.v_t=v.v_t),u&&(y.SH=v.SH,w.yH=v.b_t,w.bCt=v.r$,w.MCt=v.M_t,w.xCt=v.x_t),c&&(y.TCt=v.__t,w.GCt=v.T_t,w._Ct=v.G_t),f&&(y._u=v.A_t,w.CCt=v.C_t),m&&(y.s_t=v.s_t,y.e_t=v.e_t,y.n_t=v.n_t,s.ICt=sw),e||(y.R_t=v.R_t,y.F_t=v.F_t,y.O_t=v.O_t,y.D_t=v.D_t,y.rq=v.rq,w.z_t=v.z_t,w.J_t=v.J_t,w.$_t=v.$_t,w.q_t=v.q_t,w.X_t=v.X_t,w.j_t=v.j_t,y.H_t=v.H_t,y.U_t=v.U_t,w.V_t=v.V_t,w.Y_t||(w.Y_t=v.Y_t),S.tCt||(S.tCt=v.tCt),S.iCt=v.iCt,S.eCt=v.eCt,S.PCt=v._U,S.ACt=v.TU,S.sCt=v.sCt,S.k_t=v.k_t,S.N_t=v.N_t,S.B_t=v.B_t,y.ewt=v.ewt,w.LU=v.LU,w.nCt=v.nCt),g&&(S.hCt=v.hCt)}}{const Mw=self._s;Mw.Dyt=class extends Mw.Vn{constructor(t){super(),this.zpt=t,this.Jc="",this.UD=-1,this.ECt="",this.RCt=!1,this.FCt=null,this.tmt=0,this._St=[],this.hmt=null,this.OCt=new Map,this.DCt=null,this.kCt=null,this.LCt=-1,this.Ebt=null,this.NCt=null,this.BCt=!1}zn(){this.Jc="",this.UD=-1,this.ECt="",this.FCt=null,this.kCt=null,this.Ebt=null,this.NCt=null,this.LCt=-1,Mw.Sh(this._St),this.hmt&&(this.hmt.clear(),this.hmt=null);for(const t of this.OCt.values())t.zn();this.OCt.clear(),this.DCt=null}$M(){const t=this.zpt,s=t.aW().w1(),i=t.Fgt();this.FCt=i.dN(),this.tmt=i.fmt()+1;const e=t.Gwt(this.FCt);e&&(this.kCt=e,this.Ebt=e.qbt(),this.NCt=e.$bt().map(t=>t.Cnt()),e.Kvt()&&(this.LCt=e.Zbt()));for(const t of s){const s=t.eV();s._pt()&&!this.FCt.bvt(t)||(this._St.push(t),this.OCt.set(t,Mw.Un(Mw.WCt,s)))}const n=t.pN();this.hmt=n.size>0?n:null}jCt(t){this.Jc="timer",this.$M(),this.UD=this.zpt.aW().ON()+t}VCt(t){this.Jc="walltimer",this.$M(),this.UD=this.zpt.aW().NN()+t}HCt(t){this.Jc="signal",this.$M(),this.ECt=t.toLowerCase()}rCt(t,s){this.Jc="instance-signals",this.$M(),this.ECt=s.toLowerCase(),this.DCt=new Set(t)}UCt(t){this.Jc="promise",this.$M(),t.then(()=>this.Qyt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.Qyt()})}zCt(){return"timer"===this.Jc}JCt(){return"walltimer"===this.Jc}Kyt(){return"signal"===this.Jc}rwt(){return"instance-signals"===this.Jc}bwt(){return"promise"===this.Jc}Zyt(){return this.ECt}$Ct(){return this.RCt}Qyt(){this.RCt=!0}hwt(t){this.DCt.delete(t),0===this.DCt.size&&this.Qyt()}Nyt(){return this.zCt()?this.UD<=this.zpt.aW().ON():this.JCt()?this.UD<=this.zpt.aW().NN():this.$Ct()}qCt(t){t.omt(this.FCt,this.tmt);for(const[t,s]of this.OCt.entries()){const i=t.eV();s.omt(i)}this.hmt&&t.Gmt([...this.hmt]);const s=this.kCt;s&&(s.abt(this.Ebt),s.$bt().map((t,s)=>t.lrt(this.NCt[s])),s.Kvt()&&s.Qbt(this.LCt))}Byt(t){this.qCt(t),this.FCt.Zvt(t),this.kCt&&this.kCt.Kvt()&&this.kCt.wbt(this.LCt),this.zpt.Ayt(this._St),this.BCt=!0}async Hyt(t){this.qCt(t);for(const s of this.FCt.Qvt(t))await this.zpt.aW().dyt(s);this.kCt&&this.kCt.Kvt()&&this.kCt.wbt(this.LCt),this.zpt.Ayt(this._St),this.BCt=!0}Wyt(){return this.BCt}bpt(t){for(const s of this.OCt.values())s.bpt(t);if("instance-signals"===this.Jc){for(const s of t)this.DCt.delete(s);0===this.DCt.size&&this.Qyt()}}i5(){const t={},s={wt:this.Jc,t:this.UD,st:this.ECt,s:this.RCt,ev:this.FCt.C1(),sm:this._St.map(t=>t.C1()),dsm:this.hmt?[...this.hmt].map(t=>t.C1()):null,sols:t};this.FCt.Bvt(this.tmt)&&(s.act=this.FCt.Lgt(this.tmt).C1());for(const[s,i]of this.OCt)t[s.C1().toString()]=i.i5();return"instance-signals"===this.Jc&&(s.pi=[...this.DCt].map(t=>t.TU())),s}static Mwt(t,s){const i=t.aW(),e=t.Jgt(s.ev);if(!e)return null;let n=0;if(s.hasOwnProperty("act")){const i=t.qgt(s.act);if(!i)return null;n=i.ML()}const r=Mw.Un(Mw.Dyt,t);r.UD=s.t,s.hasOwnProperty("wt")?r.Jc=s.wt:r.Jc=-1===r.UD?"signal":"timer",r.ECt=s.st,r.RCt=s.s,r.FCt=e,r.tmt=n;for(const t of s.sm){const s=i.ZX(t);s&&r._St.push(s)}if(Array.isArray(s.dsm))for(const t of s.dsm){const s=i.ZX(t);s&&(r.hmt||(r.hmt=new Set),r.hmt.add(s))}for(const[e,n]of Object.entries(s.sols)){const s=parseInt(e,10),h=i.ZX(s);if(!h)continue;const o=Mw.Un(Mw.WCt,null);o.e5(t,n),r.OCt.set(h,o)}if("instance-signals"===r.Jc){r.DCt=new Set;for(const t of s.pi){const s=i.PB(t);s&&r.DCt.add(s)}}return r}}}{const xw=self._s;xw.WCt=class extends xw.Vn{constructor(t){super(),this.ppt=null,this.XCt=!0,this.fQ=[],t&&(this.ppt=t.cU(),this.XCt=t._pt(),xw.Th(this.fQ,t.Opt()))}zn(){this.ppt=null,xw.Sh(this.fQ)}omt(t){t.Fpt(this.XCt),xw.Th(t.Opt(),this.fQ)}bpt(t){xw.Ph(this.fQ,t)}i5(){return{sa:this.XCt,insts:this.fQ.map(t=>t.TU())}}e5(t,s){const i=t.aW();this.XCt=!!s.sa,xw.Sh(this.fQ);for(const t of s.insts){const s=i.PB(t);s&&this.fQ.push(s)}}}}{let Tw=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};0;const Gw=self._s;Gw.YCt=class extends Gw.Vn{constructor(t){super(),this.Nc=t.runtime,this.Wc=t.id,this.qn=t.name??"",this.KCt=!!t.wj,this.ZCt=!!t.QCt,this.tIt=!!t.Tj,this.sIt=!!t.iIt,this.eIt=!!t._j,this.nIt=!!t.rIt,this.hIt=!!t.Rj,this.oIt=!!t.Mj,this.aIt=!!t.Ij,this.lIt=t.uIt,this.cIt=null,this.fIt=new Map,this.dIt=new Map,this.pIt=new Map,this.mIt=new Map,this.gIt=t.yIt,this.wIt=null}zn(){this.Nc=null}aW(){return this.Nc}yj(){return this.Wc}Pc(){return this.qn}SIt(){}nwt(){return this.sTt()>=2?this.wIt.constructor:this.constructor}sTt(){return this.lIt}vIt(t=!1){let s=this.gIt;return t&&"function"!=typeof s&&this.sTt()>=2&&(s=globalThis.Dq),s}Sj(){return this.KCt}bj(){return this.ZCt}xj(){return this.oIt}Pj(){return this.aIt}Gj(){return this.tIt}vM(){return this.sIt}Cj(){return this.eIt}Ej(){return this.nIt}Fj(){return this.hIt}xMt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.fIt.get(t);return i||(i=t.bind(s),this.fIt.set(t,i),i)}Kxt(t,s,i){if(!s)throw new Error("missing 'this' binding");const e=Tw(this.dIt,t);let n=e.get(i);return n||(n=t.bind(s,i),e.set(i,n),n)}Zxt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");const n=Tw(this.pIt,t),r=Tw(n,i);let h=r.get(e);return h||(h=t.bind(s,i,e),r.set(e,h),h)}Qxt(t,s,i,e,n){if(!s)throw new Error("missing 'this' binding");const r=Tw(this.mIt,t),h=Tw(r,i),o=Tw(h,e);let a=o.get(n);return a||(a=t.bind(s,i,e,n),o.set(n,a),a)}bIt(t){if(!this.Sj())throw new Error("must be single-global plugin");this.cIt=t}Wj(){if(!this.Sj())throw new Error("must be single-global plugin");return this.cIt}Vj(){if(!this.Sj())throw new Error("must be single-global plugin");return this.cIt.Vj()}MIt(){const t=this.sTt();Gw.mj.xIt(this,t);const s=this.vIt(!0);if(s){if(this.wIt=new s,!(this.wIt instanceof self.dj))throw new TypeError("plugin class must derive from IPlugin")}else this.wIt=new self.dj;Gw.mj.TIt(t)}Lj(){return this.wIt}}}{const _w=self._s;_w.GIt=class extends _w.YCt{constructor(t,s){super(t),this._It=s,this.CIt=0,this.IIt=new Map,this.PIt("elem-focused",t=>t.AIt()),this.PIt("elem-blurred",t=>{t&&t.EIt()})}zn(){super.zn()}RIt(t){const s=this.CIt++;return this.IIt.set(s,t),s}FIt(t){this.IIt.delete(t)}PIt(t,s){this.Nc.YU(this._It,t,t=>{const i=this.IIt.get(t.elementId);s(i,t)})}}}{const Cw=self._s;Cw.OIt=class extends Cw.Vn{constructor(t){super(),this.ppt=t,this.Nc=t.aW(),this.DIt=t.zj()}zn(){this.ppt=null,this.Nc=null,this.DIt=null}cU(){return this.ppt}aW(){return this.Nc}zj(){return this.DIt}W$(){return this.ppt.W$()}SIt(){}dTt(t){}ZTt(t){}QTt(t){}d4(t){}v4(){}y4(){}V4(t){}kIt(){}vIt(){return null}LIt(t,s,i){const e=Cw.Un(Cw.Event,t,s);e.NIt=this,i&&Object.assign(e,i),this.cU().IZ(e)}}}{const Iw=self._s;Iw.BIt=class extends Iw.Vn{constructor(t,s){super(),this.fi=t,this._It=s,this.WIt=null,this.Nc=t.aW(),this.ppt=this.fi.cU(),this.jIt=this.ppt.KTt(),this.Q6=null,this.s8=null,this.rz=!1,this.oz=!1,this.Yf=null,this.uA=!1}zn(){this.uA=!0,this.VIt(),this.HIt(),this.Q6=null,this.s8=null,this.Yf&&(this.Yf.zn(),this.Yf=null),this.fi=null,this.Nc=null,this.ppt=null,this.jIt=null}Jn(){return this.uA}Iq(){return this.fi}aW(){return this.Nc}cU(){return this.ppt}zj(){return this.jIt.zj()}KTt(){return this.jIt}UIt(){return this.fi.AB()}$U(t){return this.Nc.$U(t,this.fi,null)}zIt(t){return this.Nc.zIt(t,this.fi,null)}KB(t){return this.Nc.KB(t,this.fi,null)}JIt(t,s){return this.Nc.JIt(t,this.fi,s)}$It(t,s){return this.Nc.$It(t,this.fi,s)}qIt(t){return this.Nc.qIt(t)}XIt(t,s){this.Nc.YU(this._It,t,s)}YIt(t){for(const[s,i]of t)this.XIt(s,i)}KIt(t,s){this.Nc.jc(this._It,t,s)}ZIt(t,s){return this.Nc.UB(this._It,t,s)}QIt(t,s){if(!this.Nc.zL())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this._It,handler:t,data:s,responseId:null});this.KIt(t,s)}tPt(t){if(!t)throw new Error("cannot set empty component id");this.WIt=t}sPt(){if(!this.WIt)throw new Error("wrapper extension component id not set");return this.Nc.fz(this.WIt)}pz(t,s){if(!this.WIt)throw new Error("wrapper extension component id not set");this.Nc.pz(this.WIt,t,s)}iPt(t){for(const[s,i]of t)this.pz(s,i)}VX(t,s){if(!this.WIt)throw new Error("wrapper extension component id not set");this.Nc.VX(this.WIt,t,s)}HX(t,s){if(!this.WIt)throw new Error("wrapper extension component id not set");return this.Nc.HX(this.WIt,t,s)}u7(){}ePt(){}nPt(){if(!this.rz){if(!this.Q6)if(this.Nc.sz()){const t=globalThis.iz,s=this.zj();this.Q6=()=>{const i=performance.now();this.u7(),t.nz(s,performance.now()-i)}}else this.Q6=()=>this.u7();this.Nc.wf().addEventListener("tick",this.Q6),this.rz=!0}}VIt(){this.rz&&(this.Nc.wf().removeEventListener("tick",this.Q6),this.rz=!1)}rPt(){return this.rz}hPt(){if(!this.oz){if(!this.s8)if(this.Nc.sz()){const t=globalThis.iz,s=this.zj();this.s8=()=>{const i=performance.now();this.ePt(),t.nz(s,performance.now()-i)}}else this.s8=()=>this.ePt();this.Nc.wf().addEventListener("tick2",this.s8),this.oz=!0}}HIt(){this.oz&&(this.Nc.wf().removeEventListener("tick2",this.s8),this.oz=!1)}oPt(){return this.oz}aPt(){return[]}ux(){return null}mx(t){}tot(t){}hot(t,s){}Qot(t,s,i){if(0===s)return;const e=this.tot(t);if("number"!=typeof e)throw new Error("expected number");this.hot(t,e+s,i)}lPt(t,s,i,e){}uPt(t,...s){t.call(this,...s)}cPt(t,...s){return t.call(this,...s)}vIt(){return null}LIt(t,s,i){if(!this.fi.fPt())return;const e=this.UIt(),n=Iw.Un(Iw.Event,t,s);n.f$=e,i&&Object.assign(n,i),e.dispatchEvent(n)}vM(){return!1}}}{const Pw=self._s;Pw.dPt=class extends Pw.BIt{constructor(t,s){super(t,s),this._it=t.DB(),this.pPt=null,this.mPt=null}zn(){if(this.pPt){const t=this.Nc.wf();t.removeEventListener("renderercontextlost",this.pPt),t.removeEventListener("renderercontextrestored",this.mPt),this.pPt=null,this.mPt=null}this._it=null,super.zn()}gPt(){this.yPt()}wPt(){}SPt(){}yPt(){if(this.pPt)return;this.pPt=()=>this.nQ(),this.mPt=()=>this.vPt();const t=this.Nc.wf();t.addEventListener("renderercontextlost",this.pPt),t.addEventListener("renderercontextrestored",this.mPt)}nQ(){this.wPt()}vPt(){this.SPt()}DB(){return this._it}yet(){return!1}met(){if(!this.yet())throw new Error("original size not known");const t=this.bPt();if(t)return t.Vg()}vet(){if(!this.yet())throw new Error("original size not known");const t=this.bPt();if(t)return t.Zg()}bPt(){return null}MPt(){const t=this.bPt();if(t){const s=t.xG();if(s)return[s.Vg(),s.Zg()]}return[100,100]}xPt(){const t=this.bPt();return t?t.gE():null}TPt(){const t=this.bPt();return t?t.GPt():null}_Pt(){const t=this.bPt();return!!t&&t.CPt()}dGt(t){const s=this.fi.DB();return[s.qM(),s.KM(),s.Dz()]}kIt(t,s,i){}IPt(t,s){}E3(){return!0}}}{const Aw=self._s,Ew=Aw.Un(Aw.Rect);Aw.PPt=class extends Aw.dPt{constructor(t,s){super(t,s),this.APt=this.zj().RIt(this),this.EPt=!0,this.RPt=!1,this.FPt=!1,this.OPt=-.2,this.DPt=Aw.Un(Aw.Rect,0,0,-1,-1);const i=this.Nc.GB();this.kPt=i.nX(),this.LPt=i.rX(),this.NPt=-1,this.BPt=-1,this.WPt=!1,this.nPt()}zn(){this.zj().FIt(this.APt),this.jPt("destroy"),this.APt=-1,super.zn()}t$(){if(this.Nc.zL())throw new Error("not valid in worker mode");return this.VPt("get-element")}jPt(t,s){s||(s={}),s.elementId=this.APt,this.KIt(t,s)}VPt(t,s){return s||(s={}),s.elementId=this.APt,this.QIt(t,s)}HPt(t,s){return s||(s={}),s.elementId=this.APt,this.ZIt(t,s)}UPt(t){t||(t={});const s=this.DB();t.elementId=this.APt,t.isVisible=s.SH(),t.htmlIndex=s.kB().cX(),t.htmlZIndex=s.fX(),Object.assign(t,this.zPt()),this.EPt=!!t.isVisible,this.QIt("create",t),this.JPt(!0)}b_t(t){t=!!t,this.EPt!==t&&(this.EPt=t,this.jPt("set-visible",{isVisible:t}))}u7(){this.JPt(!1)}$Pt(){const t=this.Nc.GB().yX();return"Android"===Aw.Ks.Zs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}JPt(t){if(this.Iq().wX())return;const s=this.DB(),i=s.kB(),e=s.Nz();let[n,r]=i.eU(e.Za(),e.Qa()),[h,o]=i.eU(e.tl(),e.sl());const a=this.Nc.GB(),l=a.ej(),u=a.rj();if(!s.SH()||!i.SH())return void this.b_t(!1);if(!this.$Pt()&&(h<=0||o<=0||n>=l||r>=u))return void this.b_t(!1);Ew.set(n,r,h,o);const c=a.nX(),f=a.rX(),d=i.cX(),p=s.fX();if(!t&&Ew.equals(this.DPt)&&this.kPt===c&&this.LPt===f&&this.NPt===d&&this.BPt===p)return void this.b_t(!0);this.DPt.m(Ew),this.kPt=c,this.LPt=f,this.NPt=d,this.BPt=p,this.b_t(!0);let m=null;this.FPt&&(m=i.SX()+this.OPt),this.VPt("update-position",{left:Math.round(this.DPt.Za()),top:Math.round(this.DPt.Qa()),width:Math.round(this.DPt.width()),height:Math.round(this.DPt.height()),htmlIndex:d,htmlZIndex:p,fontSize:m})}i$(){this.VPt("focus",{focus:!0})}e$(){this.VPt("focus",{focus:!1})}AIt(){this.RPt=!0}EIt(){this.RPt=!1}__t(){return this.RPt}r$(t,s){this.jPt("set-css-style",{prop:Aw.vo(t),val:s})}M_t(t,s){this.jPt("set-attribute",{name:t,val:s})}x_t(t){this.jPt("remove-attribute",{name:t})}qPt(){this.WPt||(this.WPt=!0,Promise.resolve().then(()=>{this.WPt=!1,this.jPt("update-state",this.zPt())}))}zPt(){}XPt(){return this.APt}}}{const Rw=self._s,Fw=self.m$;Rw.YPt=class extends Rw.Vn{constructor(t){super(),this.Nc=t.runtime,this.Wc=t.id,this.qn=t.name??"",this.KPt=Rw.Un(Rw.Du),this.ZPt=Rw.Un(Rw.Du),this.lIt=t.uIt,this.gIt=t.yIt,this.QPt=null}zn(){this.ZPt.zn(),this.KPt.zn(),this.Nc=null}aW(){return this.Nc}yj(){return this.Wc}Pc(){return this.qn}SIt(){}sTt(){return this.lIt}vIt(t=!1){let s=this.gIt;return t&&"function"!=typeof s&&this.sTt()>=2&&(s=globalThis.PX),s}tAt(t){this.KPt.Bu(t)}k8(){return this.KPt.Wu()}e1(t){this.ZPt.Bu(t)}o1(t){this.ZPt.Eu(t)}iV(){return this.ZPt.Wu()}MIt(){const t=this.sTt();Rw.mj.xIt(this,t);const s=this.vIt(!0);if(s){if(this.QPt=new s,!(this.QPt instanceof Fw))throw new TypeError("behavior class must derive from IBehavior")}else this.QPt=new Fw;Rw.mj.TIt(t)}o$(){return this.QPt}}}{const Ow=self._s;Ow.sAt=class extends Ow.Vn{constructor(t){super(),this.Nc=t.aW(),this.NMt=t,this.ppt=t.cU(),this.iAt=t.a$(),this.iAt.tAt(this.ppt)}zn(){this.Nc=null,this.NMt=null,this.ppt=null,this.iAt=null}SIt(){}c$(){return this.NMt}cU(){return this.ppt}aW(){return this.Nc}a$(){return this.iAt}}}{const Dw=self._s;Dw.eAt=class extends Dw.Vn{constructor(t,s){super(),this.$lt=t,this._It=s,this.fi=t.d$(),this.Nc=t.aW(),this.NMt=t.c$(),this.jIt=this.NMt.KTt(),this.rz=!1,this.oz=!1,this.WX=!1,this.Yf=null}zn(){this.VIt(),this.HIt(),this.nAt(),this.Yf&&(this.Yf.zn(),this.Yf=null),this.$lt=null,this.fi=null,this.Nc=null,this.NMt=null,this.jIt=null}a$(){return this.NMt.a$()}rAt(){return this.$lt}d$(){return this.fi}cU(){return this.fi.cU()}DB(){return this.fi.DB()}aW(){return this.Nc}c$(){return this.NMt}KTt(){return this.jIt}UIt(){return this.$lt.UIt()}$U(t){return this.Nc.$U(t,this.fi,this.NMt)}zIt(t){return this.Nc.zIt(t,this.fi,this.NMt)}KB(t){return this.Nc.KB(t,this.fi,this.NMt)}hAt(){}u7(){}ePt(){}oAt(){}nPt(){this.rz||(this.Nc.OX(this),this.rz=!0)}VIt(){this.rz&&(this.Nc.DX(this),this.rz=!1)}rPt(){return this.rz}hPt(){this.oz||(this.Nc.kX(this),this.oz=!0)}HIt(){this.oz&&(this.Nc.LX(this),this.oz=!1)}oPt(){return this.oz}aAt(){this.WX||(this.Nc.NX(this),this.WX=!0)}nAt(){this.WX&&(this.Nc.BX(this),this.WX=!1)}lAt(){return this.WX}aPt(){return[]}XIt(t,s){this.Nc.YU(this._It,t,s)}uAt(t,s){}ux(){return null}mx(t){}tot(t){}hot(t,s){}Qot(t,s){if(0===s)return;const i=this.tot(t);if("number"!=typeof i)throw new Error("expected number");this.hot(t,i+s)}lPt(t,s,i,e){}uPt(t,...s){t.call(this,...s)}cPt(t,...s){return t.call(this,...s)}vIt(){return null}LIt(t,s,i){if(!this.$lt.fPt())return;const e=this.UIt(),n=Dw.Un(Dw.Event,t,s);n.cAt=e,n.f$=e.f$,i&&Object.assign(n,i),e.dispatchEvent(n)}}}{let kw=function(t){if(t!==Nw)throw new Error("invalid internal API token")};0;const Lw=self._s;Lw.sW={},Lw.gut={};const Nw=Lw.Cs();let Bw=[],Ww=[],jw=[],Vw=null,Hw=null,Uw=null,zw=null;const Jw=new Map,$w=new Map;Lw.mj=class extends Lw.Vn{constructor(t,s){super(),this.Nc=t,this.fAt=[],this.SMt=null,this.dAt=[],this.pAt=new Map,this.mAt=null,this.gAt=null,this.yAt=new Set(s)}wAt(t){const s=t[19],i=this.Nc.Mbt(t[0]);if(!i)throw new Error("missing plugin");Lw.oCt(t,i,s);const e=s>=2?Lw.YCt:i,n=Lw.Un(e,{runtime:this.Nc,wj:t[1],QCt:t[2],Tj:t[5],_j:t[8],iIt:t[9],rIt:t[13],Rj:t[14],Mj:t[17],Ij:t[18],uIt:s,id:t[20],name:t[21],yIt:s>=2?i:null});n.SIt(),this.fAt.push(n),Jw.set(i,n)}SAt(){this.SMt=Lw.Un(Lw.sW.tW,{runtime:this.Nc,wj:!0}),this.SMt.SIt()}vAt(t){const s=t[1],i=t[2],e=t[3],n=this.Nc.Mbt(t[0]);if(!n)throw new Error("missing behavior");this.pAt.set(n,()=>{const t=s>=2?Lw.YPt:n,r=Lw.Un(t,{runtime:this.Nc,id:i,name:e,uIt:s,yIt:s>=2?n:null});r.SIt(),this.dAt.push(r),$w.set(n,r),!this.mAt&&Lw.gut.bAt&&r instanceof Lw.gut.bAt?this.mAt=r:!this.gAt&&Lw.gut.MAt&&r instanceof Lw.gut.MAt&&(this.gAt=r),r.MIt()})}xAt(t){const s=this.pAt.get(t);s&&(s(),this.pAt.delete(t))}static xIt(t,s=1){if(Lw.mj.xIt!==Vw)throw new Error("invalid method");1===s&&Bw.push(t),Ww.push(t)}static TIt(t=1){if(Lw.mj.TIt!==Hw)throw new Error("invalid method");1===t&&Bw.pop(),Ww.pop()}static mU(){if(Lw.mj.mU!==Uw)throw new Error("invalid method");if(0===Bw.length)throw new Error("no init object set");return Bw.at(-1)}static pj(t){if(Lw.mj.pj!==zw)throw new Error("invalid method");if(kw(t),0===Ww.length)throw new Error("no init object set");return Ww.at(-1)}static TAt(t){jw.push(t)}static GAt(){jw.pop()}static zU(){if(0===jw.length)throw new Error("no init properties set");return jw.at(-1)}_At(){for(const t of this.fAt)t.MIt()}static kj(t){return Jw.get(t)||null}static g$(t){return $w.get(t)||null}AZ(){return this.SMt}CAt(){return this.mAt}IAt(){return this.gAt}fz(t){return this.yAt.has(t)}},Vw=Lw.mj.xIt,Hw=Lw.mj.TIt,Uw=Lw.mj.mU,zw=Lw.mj.pj}{const qw=self._s,Xw=new Set;qw.PAt=class extends qw.Vn{constructor(){super(),this.AAt=0,this.JZ="",this.$Z=0,this.EAt=0,this.RAt=0,this.Py=0,this.Ay=0,this.FAt=!1,this.OAt=!1,this.DAt=null,this.kAt="",this.nA=qw.Un(qw.Rect),this.LAt=qw.Un(qw.Il),this.NAt="",this.BAt=new self.hW(this),Xw.add(this)}zn(){this.oA(),this.DAt&&0===this.DAt.oQ()&&this.DAt.zn(),this.DAt=null,Xw.delete(this),this.WAt()}static nQ(){for(const t of Xw)t.kAt="",t.nA.set(0,0,0,0),t.LAt.Xl(t.nA)}jAt(t){this.JZ=t[0],this.$Z=t[1],this.EAt=t[2],this.RAt=t[3],this.Py=t[4],this.Ay=t[5],this.FAt=t[6],this.OAt=!0}VAt(t,s,i){if(i=!!i,this.DAt)throw new Error("already loaded asset");this.JZ=s;const e={yZ:i};return qw.Yh(s)&&(e.wZ="remote"),this.oW(t,e),this.DAt.vZ()}HAt(t,s){if(this.DAt)throw new Error("already loaded asset");this.JZ="",this.$Z=s.size,this.DAt=qw.Un(qw.SZ,t.CL(),{blob:s,size:this.$Z,wZ:"local"})}UAt(t){if(t===this)throw new Error("cannot replace with self");this.AAt++,this.oA(),this.JZ=t.JZ,this.$Z=t.$Z,this.EAt=t.EAt,this.RAt=t.RAt,this.Py=t.Py,this.Ay=t.Ay,this.FAt=t.FAt,this.OAt=t.OAt,this.DAt=t.DAt,this.kAt=t.kAt,this.nA=t.nA,this.LAt=t.LAt,this.WAt()}xZ(){return this.JZ}Fu(){return this.$Z}zAt(){return this.EAt}JAt(){return this.RAt}CPt(){return this.FAt}Vg(){return this.Py}Zg(){return this.Ay}$At(){return this.DAt.Vg()}qAt(){return this.DAt.Zg()}oW(t,s){if(this.DAt)throw new Error("already got asset");s=Object.assign({},s,{url:this.xZ(),size:this.Fu()}),this.DAt=t.gZ(s)}KZ(){return this.DAt&&this.DAt.KZ()}async YY(t,s){if(!this.DAt)throw new Error("no asset");if(this.kAt)throw new Error("already loaded texture");const i=this.AAt;this.kAt="loading";const e=await this.DAt.YY(t,s);if(this.AAt!==i)return null;if(!e)return this.kAt="",null;this.kAt="loaded",this.OAt||(this.Py=e.Vg(),this.Ay=e.Zg(),this.OAt=!0);const n=this.FAt?this.Ay:this.Py,r=this.FAt?this.Py:this.Ay;return this.nA.set(this.EAt,this.RAt,this.EAt+n,this.RAt+r),this.nA.wt(e.Vg(),e.Zg()),this.LAt.Xl(this.nA),this.FAt&&this.LAt.su(),e}oA(){this.kAt&&(this.DAt&&this.DAt.oA(),this.kAt="",this.nA.set(0,0,0,0),this.LAt.Xl(this.nA))}xG(){return this.DAt&&"loaded"===this.kAt?this.DAt.xG():null}gE(){return this.nA}GPt(){return this.LAt}Jq(){return this.BAt}XAt(){return this.DAt}async YAt(t){t||(t=await this.DAt.aQ());const s=qw.uo(this.Py,this.Ay),i=s.getContext("2d");return this.FAt?(i.rotate(Math.PI/-2),i.translate(-this.Ay,0),i.drawImage(t,this.EAt,this.RAt,this.Ay,this.Py,0,0,this.Ay,this.Py)):i.drawImage(t,this.EAt,this.RAt,this.Py,this.Ay,0,0,this.Py,this.Ay),s}async KAt(t){if(this.NAt)return this.NAt;const s=await this.YAt(t),i=await qw.co(s);return this.NAt=URL.createObjectURL(i),this.NAt}WAt(){this.NAt&&(URL.revokeObjectURL(this.NAt),this.NAt="")}}}{const Yw=self._s;Yw.ZAt=class extends Yw.Vn{constructor(t){super(),this.qn=t[0],this.QAt=t[1],this.Axt=!!t[2],this.Aat=t[3],this.tEt=t[4],this.sEt=!!t[5],this.JQ=t[6],this.iEt=t[7].map(t=>Yw.Un(Yw.eEt,t)),this.nEt=new self.M$(this)}static rEt(t,s){const i=Yw.Un(Yw.ZAt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.iEt.push(Yw.eEt.rEt(t)),i}zn(){for(const t of this.iEt)t.zn();Yw.Sh(this.iEt)}hEt(t){for(const s of this.iEt)s.W$().oW(t)}oEt(t,s){return Promise.all(this.iEt.map(i=>i.W$().YY(t,s)))}aEt(){for(const t of this.iEt)t.W$().oA()}Pc(){return this.qn}C1(){return this.JQ}R$(){return this.iEt.length}O$(){return this.iEt}lEt(t){if((t=Math.floor(t))<0||t>=this.iEt.length)throw new RangeError("invalid frame");return this.iEt[t]}uEt(t,s){(s=Math.floor(s))<0?this.iEt.unshift(t):s>=this.iEt.length?this.iEt.push(t):this.iEt.splice(s,0,t)}cEt(t){if((t=Math.floor(t))<0||t>=this.iEt.length)throw new RangeError("invalid frame");this.iEt[t].zn(),this.iEt.splice(t,1)}fEt(t){for(let s=0,i=this.iEt.length;s<i;++s)if(Yw.Ke(this.iEt[s].tq(),t))return s;return-1}dEt(t){if("string"==typeof t){const s=this.fEt(t);if(-1===s)throw new Error(`cannot find animation frame with tag ${t}`);return s}return t}x$(){return this.QAt}G$(){return this.Axt}C$(){return this.Aat}P$(){return this.tEt}E$(){return this.sEt}pEt(){return this.nEt}}}{const Kw=self._s,Zw=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(t.length);for(let i=0,e=t.length;i<e;++i)s[i]=t.charCodeAt(i);return new Blob([s],{type:"image/png"})})();Kw.eEt=class extends Kw.Vn{constructor(t){super(),this.mEt=Kw.Un(Kw.PAt),this.mEt.jAt(t),this.gEt=t[7],this.yEt=Kw.Un(Kw.Ia,t[8],t[9]),this.wEt=t[10].map(t=>Kw.Un(Kw.SEt,this,t)),this.vEt=new Map;for(const t of this.wEt)this.vEt.set(t.Pc().toLowerCase(),t);this.bEt=null;const s=t[11];s.length>=6&&(this.bEt=Kw.Un(Kw.au,s)),this.Ew=t[12]?t[12]:"",this.MEt=new self.B$(this)}static rEt(t){const s=Kw.Un(Kw.eEt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.mEt.HAt(t,Zw),s}zn(){this.bEt&&(this.bEt.zn(),this.bEt=null),this.mEt.zn(),this.mEt=null}W$(){return this.mEt}j$(){return this.gEt}Cz(){return this.yEt.Fa()}Az(){return this.yEt.Da()}Y$(){return this.bEt}q$(t){return this.vEt.get(t.toLowerCase())||null}$$(t){return(t=Math.floor(t))<0||t>=this.wEt.length?null:this.wEt[t]}H$(){return this.wEt.length}tq(){return this.Ew}D$(){return this.MEt}}}{const Qw=self._s;Qw.SEt=class extends Qw.Vn{constructor(t,s){super(),this.xEt=t,this.qn=s[0],this.TEt=Qw.Un(Qw.Ia,s[1],s[2])}zn(){}Pc(){return this.qn}qM(){return this.TEt.Fa()}KM(){return this.TEt.Da()}GEt(){return this.TEt}}}{const tS=globalThis._s,sS=globalThis.iz,iS=(globalThis.Hj,globalThis.nV),eS=globalThis.SV;globalThis.assert;tS.wct=class extends tS.Vn{constructor(t,s,i){super();const e=t.Mbt(i[1]);this.Nc=t,this.DIt=tS.mj.kj(e),this.jIt=null,this._Et=e.Instance,this.Aw=s,this.JQ=i[11],this.qn=i[0],this.hMt=this.Nc.Hgt(i[14]),this.CEt=!!i[9],this.IEt=!!i[2],this.PEt=!!i[10],this.AEt=i[3].map(s=>({EQ:s[0],type:s[1],name:s[2],EEt:t.Hgt(s[3])})),this.REt=i[4],this.FEt=i[5],this.ZCt=this.DIt.bj(),this.OEt=tS.Un(tS.Event.wf),this.C0=null;const[n,r]=t.AL().LW();if(this.DEt=tS.Un(tS.kEt,n,r),this.LEt=!0,this.NEt=null,this.BEt=null,this.WEt=-1,this.jEt=null,this.VEt=null,this.HEt=null,this.UEt=null,this.zEt=null,this.JEt=!1,this.$Et=null,this.qEt=i[8].map(t=>tS.XEt.UG(this,t)),this.YEt=[],this.KEt=new Map,this.ZEt=new Map,this.QEt=new Set,this.tRt=new Map,this.sRt=tS.Un(tS.dpt,this),this.iRt=null,this.eRt=0,this.nRt=!1,this.$Et=null,this.mEt=null,this.rRt=null,this.hRt=null,this.oRt=null,this.aRt=0,this.Dxt=new Map,this.kxt=new Map,this.fQ=[],this.lRt=new Map,this.uRt=!0,this.DIt.Cj()&&(this.C0=tS.Un(tS.I0,this,i[12])),i[6]&&(this.mEt=tS.Un(tS.PAt),this.mEt.jAt(i[6])),i[7]){this.rRt=i[7].map(t=>tS.Un(tS.ZAt,t)),this.hRt=new Map,this.oRt=new Map;for(const t of this.rRt)this.hRt.set(t.Pc().toLowerCase(),t),this.oRt.set(t.C1(),t)}this.IEt?(this.NEt=[],this.BEt=new Set,this.WEt=this.Nc.cRt()):(this.jEt=[],this.VEt=new Set,this.HEt=[],this.UEt=[],this.zEt=[]);const h=this.DIt.sTt();if(h<2&&(this.jIt=tS.Un(e.fRt,this,i[15]),!(this.jIt instanceof tS.OIt)))throw new Error("v1 sdk type must derive from SDKTypeBase");let o;if(this.dRt=null,this.pRt=null,this.j0=tS.Un(tS.Event.wf),tS.mj.xIt(this,h),h>=2?(o=e.fRt,o||(o=globalThis.Hq)):o=this.jIt.vIt(),o&&!this.IEt){if(this.dRt=new o(h<2?this:null),h<2&&!(this.dRt instanceof iS))throw new TypeError("script interface class must derive from IObjectType");if(h>=2&&!(this.dRt instanceof globalThis.Hq))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else{const t=this.IEt?eS:iS;this.dRt=new t}if(tS.mj.TIt(h),i[13]){const t=i[13];if(t){const s=t[0],i=t[1],e=t[2];this.jIt.kIt(s,i,e)}}this.Nc.mRt()&&!this.IEt&&!this.PEt&&this.ZCt||this.SIt(),this.DIt.Sj()&&(this.DIt.bIt(this),this.gRt(i)),this.yRt=null}static UG(t,s,i){return tS.Un(tS.wct,t,s,i)}zn(){if(this.OEt.zn(),this.OEt=null,this.mEt&&(this.mEt.zn(),this.mEt=null),this.rRt){for(const t of this.rRt)t.zn();tS.Sh(this.rRt),this.hRt.clear(),this.oRt.clear()}this.yRt=null,this.sRt.zn(),this.sRt=null,this.Dxt.clear(),this.kxt.clear(),this.$Et=null,this.Nc=null}wRt(t){for(let s=1,i=t.length;s<i;++s){const i=this.Nc.$0(t[s]);this.NEt.push(i),this.BEt.add(i),i.jEt.push(this),i.VEt.add(this)}}SRt(t){this.JEt=!0,this.$Et=t}MU(){return this.JEt}u4(){return this.$Et}vRt(){let t=0;if(!this.IEt)for(const s of this.jEt)for(const i of s.bRt()){const s=i.Pc().toLowerCase();this.KEt.set(s,i),this.ZEt.set(s,t),this.YEt.push(i),++t}for(const s of this.bRt()){const i=s.Pc().toLowerCase();this.KEt.set(i,s),this.ZEt.set(i,t),this.YEt.push(s),++t}for(const t of this.YEt)this.QEt.add(t.a$().constructor);if(!this.IEt&&this.jEt.length){const t=this.Nc.MRt();tS.Mh(this.HEt,t,0),tS.Mh(this.UEt,t,0),tS.Mh(this.zEt,t,0);const s=[];let i=0,e=0,n=0;for(const t of this.jEt){const r=t.kMt();this.HEt[r]=i,i+=t.xRt(),this.UEt[r]=e,e+=t.TRt(),this.zEt[r]=n,n+=t.GRt();const h=t._V();if(h&&this.C0)for(const t of h.CV())s.push(t._Rt(this.C0))}this.C0&&this.C0.CRt(s)}}gRt(t){const s=tS.Qi(t[17])?t[17]:this.Nc.IRt(),i=tS.Un(tS.Instance,{runtime:this.Nc,objectType:this,uid:s});i.PRt(t[16],[]),this.Nc.ARt(s,i),this.fQ.push(i)}KTt(){return this.jIt}ERt(){return this.PEt}wf(){return this.OEt}SIt(){this.IEt||(this.jIt?this.jIt.SIt():this.dRt.Uq())}RRt(){return this.aRt>0}async d4(t){this.IEt||(this.aRt++,1===this.aRt&&(this.jIt?await this.jIt.d4(t):await this.dRt.$q(this.Nc.GB().TB())))}v4(){if(!this.IEt){if(this.aRt--,this.aRt<0)throw new Error("released textures too many times");0===this.aRt&&(this.jIt?this.jIt.v4():this.dRt.qq(this.Nc.GB().TB()))}}y4(){if(this.IEt)throw new Error("not applicable to family");this.jIt?this.jIt.y4():this.dRt.Xq()}async V4(t){this.IEt||(this.jIt?await this.jIt.V4(t):await this.dRt.Yq(this.Nc.GB().TB()))}aW(){return this.Nc}zj(){return this.DIt}FRt(){return this._Et}Pc(){return this.qn}Hgt(){return this.hMt}ML(){return this.Aw}C1(){return this.JQ}S1(){return this.IEt}WQ(){return this.CEt}bj(){return this.ZCt}kMt(){return this.WEt}bRt(){return this.qEt}TRt(){return this.REt}ORt(t){return t&&this.QEt.has(t)}xRt(){return this.AEt.length}DRt(){return this.AEt.map(t=>t.EQ)}kRt(t){return this.AEt.findIndex(s=>s.EQ===t)}Zit(t){return this.AEt.findIndex(s=>s.name===t)}LRt(){return this.AEt.map(t=>t.name)}NRt(){return this.AEt.map(t=>t.EEt)}tet(t){if((t=Math.floor(t))<0||t>=this.AEt.length)throw new RangeError("invalid instance variable index");return this.AEt[t].type}Qit(t){if((t=Math.floor(t))<0||t>=this.AEt.length)throw new RangeError("invalid instance variable index");return this.AEt[t].name}GRt(){return this.FEt}BRt(){return this.YEt}Frt(t){return this.KEt.get(t.toLowerCase())||null}eet(t){const s=this.ZEt.get(t.toLowerCase());return void 0===s?-1:s}_V(){return this.C0}Cj(){return this.DIt.Cj()}WRt(){return this.C0&&this.C0.jRt()}Eyt(){return this.sRt}eV(){return this.sRt.eV()}W$(){return this.mEt}Y0(t){this.iRt=t}X0(){return this.iRt}K0(t){this.eRt=t}VRt(){return this.eRt}HRt(){return this.rRt}URt(){return this.rRt.length}gV(){return this.jEt}eGt(t){return this.VEt.has(t)}MV(){return this.NEt}TV(t){return this.BEt.has(t)}jMt(t){return this.UEt[t]}DMt(t){return this.HEt[t]}Ubt(t){this.tRt.set(t.Xbt().toLowerCase(),t)}zbt(t){return!!this.sMt(t)}sMt(t){const s=this.tRt.get(t.toLowerCase());return s&&s._u()?s:null}zRt(){return this.rRt}JRt(t){if(!this.rRt)throw new Error("no animations");return this.hRt.get(t.toLowerCase())||null}$Rt(t){if(!this.rRt)throw new Error("no animations");return this.oRt.get(t)||null}qRt(t){if(this.JRt(t))throw new Error(`animation name '${t}' already exists`);const s=tS.ZAt.rEt(this.aW(),t);return this.rRt.push(s),this.hRt.set(s.Pc().toLowerCase(),s),this.oRt.set(s.C1(),s),s}XRt(t){const s=this.JRt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.rRt.length)throw new Error("cannot remove last animation");const i=this.rRt.indexOf(s);this.rRt.splice(i,1),this.hRt.delete(s.Pc().toLowerCase()),this.oRt.delete(s.C1()),s.zn()}YRt(){if(!this.rRt)throw new Error("no animations");return this.rRt[0]}KRt(){return this.YRt().lEt(0)}ZRt(){if(this.rRt){const t=this.KRt().W$();return[t.Vg(),t.Zg()]}return this.mEt?[this.mEt.Vg(),this.mEt.Zg()]:[100,100]}Vj(){if(!this.DIt.Sj())throw new Error("not a single-global plugin");return this.fQ[0]}iV(){return this.fQ}*$j(){yield*this.fQ}*sV(){yield*this.fQ,yield*this.Nc.o_t(this)}hV(){return this.fQ.length}e1(t){this.fQ.push(t)}QRt(){this.uRt=!0}Y4(){if(!this.uRt||this.IEt)return;const t=this.fQ;let s=0;for(let i=t.length;s<i;++s)t[s].tFt(s);const i=this.Nc.sFt();for(const t of i)t.cU()===this&&t.tFt(s++);this.uRt=!1}iFt(t){const s=this.fQ;if(t<s.length)return s[t];t-=s.length;const i=this.Nc.sFt();for(const s of i)if(s.cU()===this){if(0===t)return s;--t}return null}UGt(t){if(t&&t.MU()&&t.cU()!==this)for(const s of t.xU())if(s.cU()===this)return s;const s=this.eV().iV();return s.length?s[0]:null}tV(t){const s=this.eV().iV();return s.length>0?s[t._U()%s.length]:null}*d_t(t,s){const i=this.eV().iV(),e=i.length,n=s.eV(),r=s.eV().iV(),h=r.length;let o=t._U();!s.S1()&&n._pt()||(o=r.indexOf(t));const a=Math.ceil(e/h),l=e%h;let u=0,c=0;0===l||o<l?(u=o*a,c=a):(u=l*a+(o-l)*(a-1),c=a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}dTt(t){this.jIt?.dTt(t)}dbt(){if(!this.JEt||this.IEt)return;this.Y4();const t=this.eV(),s=t.Opt(),i=t._pt(),e=this.Nc.Fgt(),n=e&&e.dN()&&e.dN().Hpt();for(const e of this.$Et.xV()){if(e===this)continue;e.Y4();const r=e.eV();if(r.Fpt(i),!i){const i=r.Opt();tS.Sh(i);for(const t of s)i.push(e.iFt(t._U()));if(n){const s=t.Dpt(),i=r.Dpt();tS.Sh(i);for(const t of s)i.push(e.iFt(t._U()))}}}}wTt(t,s){for(const i of this.u4().xV()){const e=i.eV();t?tS.wh(e.Dpt(),s):tS.wh(e.Opt(),s)}}eFt(){return this.DEt}nFt(t){this.LEt=!!t}rFt(){if(this.LEt&&this.ZCt){for(const t of this.fQ)t.DB().hFt();for(const t of this.Nc.sFt())t.cU()===this&&t.DB().hFt();this.LEt=!1}}oFt(t,s,i){if(s){const i=this.lRt.get(s);i&&(i.delete(t),0===i.size&&this.lRt.delete(s))}if(i){let s=this.lRt.get(i);s||(s=new Set,this.lRt.set(i,s)),s.add(t)}}*aFt(){if(this.S1()){const t=new Set;for(const s of this.NEt)for(const i of s.aFt())t.add(i);yield*t.values()}else for(const t of this.lRt.keys())t.Jn()||(yield t)}oTt(){return this.Dxt||(this.Dxt=new Map),this.Dxt}aTt(){return this.kxt||(this.kxt=new Map),this.kxt}lFt(){return this.ORt(tS.gut.bAt)}uFt(){return this.ORt(tS.gut.MAt)}cFt(){return this.ORt(tS.gut.fFt)}s1(){return this.ORt(tS.gut.dFt)}i5(){const t={instances:this.fQ.map(t=>t.ux())};return this.Dxt&&this.Dxt.size&&(t.ex=tS.wo(this.Dxt)),t}e5(t,s){this.Dxt&&(this.Dxt.clear(),this.Dxt=null);const i=t.ex;i&&(this.Dxt=tS.So(i));const e=this.fQ,n=t.instances;for(let t=0,s=Math.min(e.length,n.length);t<s;++t)e[t].mx(n[t]);for(let t=n.length,s=e.length;t<s;++t)this.Nc.yU(e[t]);for(let t=e.length,i=n.length;t<i;++t){const i=n[t];let e=null;if(this.bj()&&(e=this.Nc.uB().t4(i.w.l),!e))continue;const r=this.Nc.i1(this.iRt||this,e,!1,0,0,!0);r.mx(i),s&&s.add(r)}this.yRt=n,this.QRt()}pFt(){return this.yRt}mFt(){this.yRt=null}gFt(){for(let t=0,s=this.fQ;t<s;++t)this.fQ[t].gFt()}Bj(){return this.dRt}eN(){return this.j0}yFt(){return this.pRt}oV(t){this.pRt=t}IZ(t){const s=this.Nc,i=s.sz()&&!s.oN().fV();i&&sS.b6(),this.j0.dispatchEvent(t),i&&sS.M6()}}}{const nS=self._s;nS.wFt=class extends nS.Vn{constructor(t,s){super(),this.Nc=t,this.SFt=s;for(const t of this.SFt)t.SRt(this)}zn(){this.Nc=null}aW(){return this.Nc}l4(){return this.SFt}xV(){return this.SFt}Z4(){return this.SFt.some(t=>t.bj())}}}{const rS=self._s,hS=self.iz,oS=(self.uU,rS.mj),aS=[];let lS=0;const uS=new WeakMap,cS=new WeakMap;rS.Instance=class extends rS.Vn{constructor(t){if(rS.mj!==oS)throw new Error("invalid addon manager");super(),this.Nc=t.runtime,this.vFt=t.objectType,this._it=null,this.bFt=null,this.MFt=null,this.xFt=0,this.TFt=t.uid,this.GFt=lS++,this.MTt=0,this._Ft=null;const s=rS.Dh(t.tags);s.length>0&&(this._Ft=new Set(s)),this.CFt=aS,this.IFt=aS;const i=this.vFt.BRt();i.length>0&&(this.IFt=i.map((t,s)=>rS.Un(rS.PFt,{runtime:this.Nc,l$:t,f$:this,index:s}))),this.AFt=this.vFt.MU()?[]:null,this.EFt=-1,this.OEt=null;const e=this.zj();if(e.vM()&&(this.MTt|=4),e.bj())if(this._it=rS.Un(rS.RFt,this,t.bz),t.FFt)this._it.OFt(t.FFt);else{this._it.DFt();const[t,s]=this.vFt.ZRt();this._it.BA(t,s),this.cU().WRt()&&this._it.vz().kFt()}t.LFt?this.NFt(t.LFt):this.BFt()}zn(){if(this.MFt&&(this.MFt.gU(),this.MFt=null),this.IFt.length>0){for(const t of this.IFt)t.zn();rS.Sh(this.IFt)}this.bFt&&(this.bFt.zn(),this.bFt=null);const t=uS.get(this);t&&(t.clear(),uS.delete(this));const s=cS.get(this);s&&(s.clear(),cS.delete(this)),this.AFt&&rS.Sh(this.AFt),this.OEt&&(this.OEt.zn(),this.OEt=null),this._Ft&&this._Ft.clear(),this._Ft=null,this.Nc=null,this.vFt=null,this.CFt.length>0&&rS.Sh(this.CFt),this._it&&(this._it.zn(),this._it=null)}NFt(t){t.length>0&&(this.CFt=[],rS.Th(this.CFt,t))}BFt(){const t=this.vFt.xRt();if(0===t)return;this.CFt=[];const s=[0,0,""];for(let i=0;i<t;++i)this.CFt.push(s[this.vFt.tet(i)])}PRt(t,s){if(this.bFt)throw new Error("already got sdk instance");for(let t=0,i=this.IFt.length;t<i;++t)this.IFt[t].PRt(s?s[t]:null);if(this.zj().sTt()<2){if(this.bFt=rS.Un(this.vFt.FRt(),this,t),!(this.bFt instanceof rS.BIt))throw new Error("sdk type must derive from SDKInstanceBase");!this.zj().bj()&&this.vFt.yFt()&&this.AB()}else{const s=this.zj().vIt();this.WFt(s.Instance,t)}}s$(){return this.bFt??this.MFt}DB(){return this._it}aW(){return this.Nc}WN(){return this.EFt}PU(){const t=this.EFt;return-1===t?this.aW().WN():t}jN(t){((t=+t)<0||!isFinite(t))&&(t=0),this.EFt=t,this.cU().WRt()&&this.Nc.jFt(this,!0)}EU(){this.EFt=-1,this.cU().WRt()&&this.Nc.jFt(this,!1)}H3(){return this.Nc.VFt(this)}wf(){return this.OEt||(this.OEt=rS.Un(rS.Event.wf)),this.OEt}Kx(t){this.bFt?this.bFt.Kx(t):this.MFt.sX(this.Nc.GB().TB())}SIt(t){this.bFt.SIt(t)}HFt(){this.MTt|=2}UFt(){return!!(2&this.MTt)}zFt(){this.MTt|=1}wX(){return!!(1&this.MTt)}vM(){return!!(4&this.MTt)||(this.bFt?this.bFt.vM():this.MFt.iM())}JFt(){this.MTt|=32}F3(){return!!(32&this.MTt)}$Ft(){return!!(8&this.MTt)}qFt(t){t?this.MTt|=8:this.MTt&=-9}XFt(){return!!(16&this.MTt)}YFt(t){t?this.MTt|=16:this.MTt&=-17}KFt(){return!!(64&this.MTt)}ZFt(t){t?this.MTt|=64:this.MTt&=-65}QFt(t,s){t<<=16,s?this.MTt|=t:this.MTt&=~t}tOt(t){return!!(this.MTt&t<<16)}bPt(){return this.bFt?this.bFt.bPt():null}MPt(){return this.bFt?this.bFt.MPt():null}xPt(){return this.bFt?this.bFt.xPt():null}TPt(){return this.bFt?this.bFt.TPt():null}_Pt(){return!!this.bFt&&this.bFt._Pt()}dGt(t){return this.bFt?this.bFt.dGt(t):[this.MFt.x,this.MFt.y,this.MFt.Oz]}cU(){return this.vFt}E3(){return this.bFt?this.bFt.E3():this.MFt.iX()}a_t(t){return t.S1()?t.TV(this.cU()):this.cU()===t}sOt(t,s,i){const e=(s,i)=>{const e=i||s.cU(),n=t.get(e);n?n.add(s):t.set(e,new Set([s]))};if(e(this,s),this.MU())for(const t of this.xU())e(t);if(i)for(const t of this.dJ())e(t)}iOt(){if(!this.zj().Ej())throw new Error("object does not support scene graph")}wJ(){return null!==this.rJ()}rJ(){const t=this.DB();if(!t)return null;const s=t.rJ();return s?s.Iq():null}oJ(){const t=this.DB();if(!t)return null;const s=t.oJ();return s?s.Iq():null}*aJ(){const t=this.DB();if(t)for(const s of t.aJ())yield s.Iq()}eOt(t){if(!t)return!1;for(const s of this.children())if(s===t)return!0;return!1}h5(){const t=this.DB();return!!t&&t.h5()}nOt(t){const s=this.DB();if(!s)return[];const i=t.Pc();return s.h6().map(t=>t.Iq()).filter(t=>t.cU().Pc()===i)}h6(){const t=this.DB();return t?t.h6().map(t=>t.Iq()):[]}*children(){const t=this.DB();if(t)for(const s of t.children())yield s.Iq()}*dJ(){const t=this.DB();if(t)for(const s of t.dJ())yield s.Iq()}uJ(){const t=this.DB();return t?t.uJ():0}rOt(){return[...this.aJ()].length}f_t(){const t=this.DB();return t?t.f_t():0}fJ(t){const s=this.DB();if(!s)return null;const i=s.fJ(t);return i?i.Iq():null}hOt(){const t=this.DB();if(!t)return NaN;const s=t.rJ();return s?s.oOt(t):NaN}aOt(t){for(const s of this.DB().h6())if(s.Iq().TU()===t)return!0;return!1}mJ(t,s){this.iOt(),t.iOt(),this.DB().mJ(t.DB(),s||{})}gJ(t){const s=this.DB();s&&s.gJ(t.DB())}LJ(){const t=this.DB();return!!t&&t.LJ()}N4(){const t=this.DB();if(!t)return;const s=t.lOt();if(s)for(const t of s){const s=this.Nc.PB(t[2]);if(s){const i=t[3];this.mJ(s,{vJ:!!(1&i),MJ:!!(i>>1&1),TJ:!!(i>>2&1),_J:!!(i>>3&1),IJ:!!(i>>4&1),kJ:!!(i>>5&1),AJ:!!(i>>6&1),RJ:!!(i>>7&1),OJ:!!(i>>8&1)})}}}B4(t,s){const i=t.get(this);if(i)for(const t of i.sceneGraphJson.children){const i=s.get(t.index);if(!i)continue;const e=t.flags;this.mJ(i,{vJ:!!(1&e),MJ:!!(e>>1&1),TJ:!!(e>>2&1),_J:!!(e>>3&1),IJ:!!(e>>4&1),kJ:!!(e>>5&1),AJ:!!(e>>6&1),RJ:!!(e>>7&1),OJ:!!(e>>8&1)})}}IU(){const t=this.Nc.uOt();return t?t.vct(this):""}MU(){return null!==this.AFt}cOt(){rS.Sh(this.AFt)}X4(t){this.AFt.push(t)}vU(){return this.AFt}fOt(t){return!!this.dOt(t)}dOt(t){const s=this.xU();if(null===s||0===s.length)return!1;for(const i of s)if(i.cU()===t)return i;return null}xU(){return this.AFt}wSt(){for(const t of this.xU())t.cU().eV().kpt(t)}pTt(){for(const t of this.xU())t.cU().eV().Ept(t)}mTt(t){for(const s of this.xU())s.cU().eV().Opt()[t]=s}yTt(){for(const t of this.xU())t.cU().eV().Rpt(t)}gTt(t){for(const s of this.xU())s.cU().eV().Dpt()[t]=s}zj(){return this.vFt.zj()}tFt(t){this.xFt=t}_U(){return this.vFt.Y4(),this.xFt}TU(){return this.TFt}pOt(t){this.TFt=t}mOt(){return this.GFt}gOt(t){t?this.DU(new Set(t)):this._Ft=null}DU(t){if(0===t.size)this._Ft=null;else{this._Ft?this._Ft.clear():this._Ft=new Set;for(const s of t)this._Ft.add(s)}}FU(){return this._Ft??new Set}L_t(){return Array.from(this.FU()).join(" ")}W_t(t){t=Math.floor(t);for(const s of this.FU()){if(0===t)return s;--t}return""}Rrt(){return this.IFt}yOt(t){if(!t)return null;for(const s of this.IFt)if(s.a$()instanceof t)return s;return null}wOt(t){if(!t)return null;const s=this.yOt(t);return s?s.s$():null}Ert(t){const s=this.IFt;for(let i=0,e=s.length;i<e;++i)if(s[i].c$().C1()===t)return i;return-1}SOt(){return this.CFt}LRt(){return this.vFt.LRt()}vOt(){return this.CFt.length}lot(t){t|=0;const s=this.CFt;if(t<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}FMt(t){return this.CFt[t]}bOt(t){const s=this.CFt[t];return 0===this.vFt.tet(t)?!!s:s}uot(t,s){t|=0;const i=this.CFt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");switch(this.vFt.tet(t)){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}tat(t,s){if(0===s)return;t|=0;const i=this.CFt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}oTt(){let t=uS.get(this);return t||(t=new Map,uS.set(this,t),t)}aTt(){let t=cS.get(this);return t||(t=new Map,cS.set(this,t),t)}MOt(t){const s=this.cU();if(s.eN().xf(t))return!0;for(const i of s.gV())if(i.eN().xf(t))return!0;return!!this.Nc.eN().xf(t)}cV(t=void 0){const s=t??new Set;if(s.has(this))return;s.add(this);const i=this.DB();if(i&&i.h5())for(const t of this.dJ())if(s.add(t),t.MU())for(const i of t.xU())s.add(i);if(this.MU())for(const t of this.xU())t.cV(s);if(!t){for(const t of s.values())t.W4();this.j4()}}xOt(){this.vFt.yFt()&&this.AB();for(const t of this.IFt)t.hAt()}TOt(){this.xOt()}W4(){if(this.xOt(),this.MOt("instancecreate")){const t=this.cU(),s=new rS.Event("instancecreate");s.f$=this.AB(),t.IZ(s);for(const i of t.gV())i.IZ(s);this.Nc.IZ(s)}this.Nc.$U(this.zj().nwt().QB.H_t,this,null)}j4(){if(this.zj().Ej()){if(this.IZ(new rS.Event("hierarchyready")),this.MOt("hierarchyready")){const t=this.cU(),s=new rS.Event("hierarchyready");s.f$=this.AB(),t.IZ(s);for(const i of t.gV())i.IZ(s);this.Nc.IZ(s)}this.Nc.$U(this.zj().nwt().QB.r_t,this,null)}}GOt(){this.Nc.$U(this.zj().nwt().QB.U_t,this,null)}_Ot(t){if(this.MFt){const s=new rS.Event("destroy");s.COt=t,this.IZ(s)}if(!this.MOt("instancedestroy"))return;const s=this.cU(),i=new rS.Event("instancedestroy");i.f$=this.AB(),i.COt=t,s.IZ(i);for(const t of s.gV())t.IZ(i);this.Nc.IZ(i)}IOt(){return this.bFt?this.bFt.aPt():this.MFt.az()}ux(t="full",s=null){const i={};"full"===t?i.uid=this.TU():i.c3=!0;const e=this.FU();if(e.size>0&&(i.tags=Array.from(e)),"visual-state"!==t){const s=uS.get(this);if(s&&s.size&&(i.ex=rS.wo(s)),-1!==this.WN()&&(i.mts=this.WN()),this.vFt.xRt()>0){const t={},s=this.vFt.DRt();for(let i=0,e=this.CFt.length;i<e;++i)t[s[i].toString()]=this.CFt[i];i.ivs=t}if(this.IFt.length){const s={};for(const i of this.IFt){const e=i.ux(t);e&&(s[i.c$().C1().toString()]=e)}i.behs=s}}this._it&&(i.w=this._it.i5(t,s));const n=this.bFt?this.bFt.ux():this.MFt.lz();return n&&(i.data=n),i}u8(t="full",s=null){this._it&&this._it.u8(t)}f8(t,s="full",i=null){this._it&&this._it.f8(t,s,i)}POt(t,s="full",i=null){this._it&&this._it.POt(t,s,i)}gFt(){this.zj().bj()&&this._it.gFt()}mx(t,s="full",i=null){if("full"===s)this.TFt=t.uid;else if(!t.c3)return;if(this.gOt(t.tags),"visual-state"!==s){let s=uS.get(this);s&&(s.clear(),uS.delete(this));const i=t.ex;i&&(s=rS.So(i),uS.set(this,s)),this.EFt=t.hasOwnProperty("mts")?t.mts:-1;const e=t.ivs;if(e)for(const[t,s]of Object.entries(e)){const i=parseInt(t,10),e=this.vFt.kRt(i);if(e<0||e>=this.CFt.length)continue;let n=s;null===n&&(n=NaN),this.CFt[e]=n}}if(this.zj().bj()){const e=t.w;if(e){const t=e.l;if(this._it.kB().C1()!==t){const i=this._it.kB(),e=i.pB().t4(t);e?(this._it.WB(e),i.o1(this,!0),e.e1(this,!0),e.jB(this),this._it.Mz()):"full"===s&&this.Nc.yU(this)}this._it.e5(e,s,i)}}if("visual-state"!==s){const i=t.behs;if(i)for(const[t,e]of Object.entries(i)){const i=parseInt(t,10),n=this.Ert(i);n<0||n>=this.IFt.length||this.IFt[n].mx(e,s)}}const e=t.data;e&&(this.bFt?this.bFt.mx(e,s):this.MFt.uz(e))}AOt(t){if(this._it.kB().C1()===t)return;const s=this._it.kB(),i=s.pB().t4(t);i&&(this._it.WB(i),s.o1(this,!0),i.e1(this,!0),i.jB(this),this._it.Mz())}AB(){return this.MFt||this.WFt()}fPt(){return!!this.MFt}WFt(t,s){const i=this._it?t?self.Kq:self.YJ:t?self.BU:self.uU,e=t||this.bFt.vIt(),n=this.vFt.yFt(),r=n||e||i,h=this.zj().sTt();if(rS.mj.xIt(this,h),rS.mj.TAt(s),this.MFt=new r,rS.mj.GAt(),rS.mj.TIt(h),e&&!(this.MFt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(n){const t=e||i;if(!(this.MFt instanceof t))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.MFt}fU(t){if(0===this.CFt.length)return;const s={},i=this.vFt.NRt();for(let t=0,e=i.length;t<e;++t)s[i[t]]={configurable:!1,enumerable:!0,get:rS.Instance.prototype.bOt.bind(this,t),set:rS.Instance.prototype.uot.bind(this,t)};const e=Object.create(Object.prototype,s);t.EOt={value:e,writable:!1}}dU(t){const s=this.IFt;if(0===s.length)return;const i={};for(const t of s)i[t.c$().Hgt()]={value:t.UIt(),writable:!1};const e=Object.create(Object.prototype,i);t.nSt={value:e,writable:!1}}IZ(t){if(!this.fPt())return;const s=this.AB();t.f$=s;const i=this.Nc,e=i.sz()&&!i.oN().fV();e&&hS.b6(),s.dispatchEvent(t),e&&hS.M6()}}}{const fS=self._s,dS=new Map;fS.a6=class extends fS.Vn{constructor(t){super(),this.Mx=t,this.TSt=null,this.ROt=[],this.FOt=t.Vg(),this.OOt=t.Zg(),this.DOt=1,this.kOt=1,this.LOt=0,this.NOt=1,this.BOt=t.wF(),this.WOt=null,this.jOt=null,this.VOt=NaN,this.HOt=!1,this.l5=NaN,this.u5=NaN,this.UOt=s=>{if(s.f$!==this.TSt.Iq())return;t.aW().wf().removeEventListener("instancecreate",this.UOt);const i=this.TSt.Iq().s$();this.HOt=!!i.yet(),this.l5=this.HOt?i.met():NaN,this.u5=this.HOt?i.vet():NaN}}zn(){this.TSt=null,this.WOt=null,this.jOt=null,this.VOt=NaN,this.HOt=!1,this.l5=NaN,this.u5=NaN,fS.Sh(this.ROt)}zOt(t){if(this.NOt=this.Mx.wF(),this.BOt=this.NOt,this.TSt=t,this.LOt=t?t.FV():0,this.TSt){const t=this.Mx.aW();if(this.TSt.Iq().zj().sTt()<2){const s=this.TSt.Iq().s$();s?(this.HOt=!!s.yet(),this.l5=this.HOt?s.met():NaN,this.u5=this.HOt?s.vet():NaN):this.TSt.Iq().wX()||t.wf().addEventListener("instancecreate",this.UOt)}else this.HOt=!1,this.l5=NaN,this.u5=NaN}else this.HOt=!1,this.l5=NaN,this.u5=NaN}rJ(){return this.TSt}h5(){return this.ROt.length>0}h6(){return this.ROt}JOt(){this.h5()&&1!==this.ROt.length&&(this.jOt?this.ROt.sort((t,s)=>{const i=this.jOt.get(t.Iq()),e=this.jOt.get(s.Iq());return fS.Qi(i)&&fS.Qi(e)?i-e:0}):this.ROt.sort((t,s)=>{const i=t.Hrt().$Ot(),e=s.Hrt().$Ot();return fS.Qi(i)&&fS.Qi(e)?i-e:0}))}$Ot(){return this.VOt}qOt(){return this.DOt}XOt(t){this.DOt=t}YOt(){return this.kOt}KOt(t){this.kOt=t}Pot(){return this.BOt}DGt(){return this.NOt}ZOt(t){this.NOt=t}Vrt(){return 0===this.FOt?Number.EPSILON:this.FOt}$rt(){return 0===this.OOt?Number.EPSILON:this.OOt}QOt(){if(this.Mx.GJ()){const t=this.TSt;let s=t.Vg(),i=t.Hrt().Vrt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.HOt?1+s/this.l5:s/i}return 1}tDt(){if(this.Mx.CJ()){const t=this.TSt;let s=t.Zg(),i=t.Hrt().$rt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.HOt?1+s/this.u5:s/i}return 1}sDt(){return 0}iDt(){return{sw:this.FOt,sh:this.OOt,sx:this.DOt,sy:this.kOt,psa:this.LOt,oo:this.NOt,so:this.BOt,pi:this.Mx.Iq().hOt()}}i5(t,s=null){const i=this.iDt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.eDt(t),c:this.nDt(t)})}rDt(t){let s="";return t.bJ()&&(s+="x"),t.xJ()&&(s+="y"),t.GJ()&&(s+="w"),t.CJ()&&(s+="h"),t.PJ()&&(s+="a"),t.EJ()&&(s+="z"),t.LJ()&&(s+="d"),t.FJ()&&(s+="o"),t.DJ()&&(s+="v"),s}eDt(t){return this.TSt?!this.TSt.Iq()||this.TSt.Iq().wX()?null:this.hDt(this.TSt,this.Mx,t):null}nDt(t){return this.ROt.map(s=>this.hDt(s,s,t)).filter(t=>t)}hDt(t,s,i){const e=t.Iq();if(e&&e.wX())return null;const n={};return n.uid=e.TU(),n.f=this.rDt(s),n.offsets=s.oDt(),n.data=fS.a6.aDt(e),n.oci=e.cU().ML(),"state"===i?(n.inst=e.ux("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=e.cU().iV().indexOf(e),n.inst=null),n}e5(t){this.FOt=t.sw,this.OOt=t.sh,this.DOt=t.sx,this.kOt=t.sy,this.LOt=t.psa,this.NOt=t.oo,this.BOt=t.so,this.VOt=fS.Qi(t.pi)?t.pi:NaN}lDt(t,s,i,e){if(!t&&!s)if(e?.Q_t){if(this.WOt)for(const t of this.WOt)t.wX()||t.wJ()||t.aW().yU(t)}else if(this.WOt)for(const t of this.WOt)if(i.c&&i.c.length){if(!i.c.some(s=>s.uid===t.TU()))continue;t.wX()||t.wJ()||t.aW().yU(t)}this.WOt=t,this.jOt=s}uDt(t){const s=this.Mx.aW();return dS.has(t)?dS.get(t):s.PB(t)}f8(t,s){const i=this.Mx,e=i.aW(),n=s?.cDt??new Set;if(t.p&&!this.TSt){const r=t.p.uid,h=this.uDt(r);if(h){const r=h.DB();h.eOt(i.Iq())?this.TSt=r:(h.aOt(i.Iq().TU())?(e.yU(i.Iq()),e.fDt(i.Iq().TU()),dS.delete(i.Iq().TU())):h.mJ(i.Iq(),this.dDt(t.p.f)),n.has(i)||(i.pDt(t.p.offsets),this.mDt(h,t.p,s),this.gDt(h,h.TU(),i.aW(),s)),n.add(i),h.DB().Hrt().JOt())}else if(fS.Qi(t.p.oci)){const n=e.aV(e.$0(t.p.oci),i.kB(),0,0,!0);if(n){const r=this.yDt(t.p,e);r&&n.mx(r);const h=n.DB(),o=!!s?.Q_t;h.kB().lV(n,!1,o),n.mJ(i.Iq(),this.dDt(t.p.f)),dS.set(n.TU(),n),this.gDt(n,n.TU(),e,s),n.DB().Hrt().JOt()}}}const r=[];for(const s of t.c){const t=s.uid,i=this.uDt(t);i&&r.push(i)}let h=0;for(const o of t.c){const a=o.uid,l=this.uDt(a);if(l){if(this.WOt){if(this.WOt.includes(l)){const e=l;if(e.cU()!==l.cU()){h++;continue}if(e.wX()){h++;continue}const o=t.c[h];if(!s?.Q_t&&this.wDt(e,r,i)){if(i.Iq().fJ(h)){const r=e.cU().ML(),a=o.oci,l=i.Iq().fJ(h).cU().ML();if(r!==a||a!==l){this.SDt(t.c,i,n,s);break}this.vDt(h,o,i,n,s)}else this.vDt(h,o,i,n,s);h++;continue}if(e.wJ()&&e.rJ()!==i.Iq()){const t=this.bDt(o,s);this.MDt(t,o,n,s),h++;continue}this.MDt(e.DB(),o,n,s,!0),h++;continue}if(this.WOt[h]){const e=this.WOt[h];if(e.cU()!==l.cU()){h++;continue}if(e.wX()){h++;continue}const o=t.c[h];if(!s?.Q_t&&this.wDt(e,r,i)){if(i.Iq().fJ(h)){const r=e.cU().ML(),a=o.oci,l=i.Iq().fJ(h).cU().ML();if(r!==a||a!==l){this.SDt(t.c,i,n,s);break}this.vDt(h,o,i,n,s)}else this.vDt(h,o,i,n,s);h++;continue}if(e.wJ()&&e.rJ()!==i.Iq()){const t=this.bDt(o,s);this.MDt(t,o,n,s),h++;continue}this.MDt(e.DB(),o,n,s,!0),h++;continue}}const e=l.cU();if(this.xDt(r,e)===i.Iq().nOt(e).length){for(const t of i.Iq().h6()){if(t.cU()!==e)continue;const i=t.DB();if(i&&!n.has(i)){n.add(i),i.pDt(o.offsets),this.mDt(t,o,s);break}}h++;continue}if(l.wJ()&&l.rJ()!==i.Iq()){const t=this.bDt(o,s);this.MDt(t,o,n,s),h++;continue}this.MDt(l.DB(),o,n,s)}else if(this.WOt&&this.WOt[h]){const a=this.WOt[h],l=e.$0(this.TDt(o));if(a.cU()!==l){h++;continue}if(a.wX()){h++;continue}const u=t.c[h];if(!s?.Q_t&&this.wDt(a,r,i)){if(i.Iq().fJ(h)){const e=a.cU().ML(),r=u.oci,o=i.Iq().fJ(h).cU().ML();if(e!==r||r!==o){this.SDt(t.c,i,n,s);break}this.vDt(h,u,i,n,s)}else this.vDt(h,u,i,n,s);h++;continue}if(a.wJ()&&a.rJ()!==i.Iq()){const t=this.bDt(u,s);this.MDt(t,u,n,s),h++;continue}this.MDt(a.DB(),u,n,s)}else{const t=this.bDt(o,s);this.MDt(t,o,n,s)}h++}}SDt(t,s,i,e){const n=s.aW();for(const t of s.Iq().children())t&&!t.wX()&&(n.yU(t),n.fDt(t.TU()),dS.delete(t.TU()));this.WOt&&(this.WOt=[]),this.jOt&&(this.jOt=new WeakMap),Object.assign({},e,{assignZIndex:!1});for(const s of t){const t=this.bDt(s,e);this.MDt(t,s,i,e),this.WOt.push(t.Iq()),this.jOt.set(t.Iq(),this.WOt.length-1)}s.Hrt().JOt()}wDt(t,s,i){const e=t.cU();return this.xDt(s,e)===i.Iq().nOt(e).length}vDt(t,s,i,e,n){const r=i.Iq().fJ(t);if(!r)return;const h=r.DB();h&&(e.has(h)||(h.pDt(s.offsets),this.mDt(r,s,n)),e.add(h))}dDt(t){const s={};return s.vJ=t.includes("x"),s.MJ=t.includes("y"),s.TJ=t.includes("w"),s._J=t.includes("h"),s.IJ=t.includes("a"),s.AJ=t.includes("z"),s.kJ=t.includes("d"),s.RJ=t.includes("o"),s.OJ=t.includes("v"),s}TDt(t){return fS.Qi(t.oci)?t.oci:t[1]}bDt(t,s){if(!fS.Qi(t.oci))return;const i=this.Mx,e=i.aW();let n;const r=!s.hasOwnProperty("createHierarchy")||s.createHierarchy;if(n=t.data?e.i1(t.data,i.kB(),!1,0,0,!1,r):e.aV(e.$0(t.oci),i.kB(),0,0,r),!n)return;const h=this.yDt(t,e);h&&n.mx(h);const o=n.DB(),a=!!s?.Q_t;return o.kB().lV(n,!0,a),o}gDt(t,s,i,e){if(this.uDt(s)&&!e?.Q_t){const e=this.uDt(s);e!==t&&i.yU(e)}i.fDt(s),i.ARt(s,t)}MDt(t,s,i,e,n=!0){const r=this.Mx,h=r.mJ(t,this.dDt(s.f));h&&n?(i.has(t)||(t.pDt(s.offsets),this.mDt(t.Iq(),s,e)),i.add(t)):h&&(dS.set(t.Iq().TU(),t.Iq()),this.gDt(t.Iq(),s.uid,r.aW(),e)),this.JOt()}mDt(t,s,i){let e=this.yDt(s,this.Mx.aW());if(!e)return;const n=!i.hasOwnProperty("clearChildren")||i.clearChildren,r=!i.hasOwnProperty("assignZIndex")||i.assignZIndex,h=t.aW();if(dS.set(t.TU(),t),e=JSON.parse(JSON.stringify(e)),n&&t.TU()!==e.uid){for(const s of t.children())s&&!s.wX()&&(h.yU(s),h.fDt(s.TU()),dS.delete(s.TU()));if(e.w?.sgi&&e.w.sgi.c?.length)for(const s of e.w.sgi.c){const e=Object.assign({},i,{clearChildren:!1,createHierarchy:!1}),n=this.bDt(s,e);dS.set(n.Iq().TU(),n.Iq()),t.mJ(n.Iq(),this.dDt(s.f)),n.pDt(s.offsets),this.mDt(n.Iq(),s,e)}}const o=e.w?.zi,a=e.w?.l;e.w=null,t.mx(e),i?.Q_t||(fS.Qi(o)&&r&&t.DB().f1(o),fS.Qi(a)&&t.AOt(a)),this.gDt(t,e.uid,h,i)}xDt(t,s){return t.filter(t=>t.cU().Pc()===s.Pc()).length}yDt(t,s){if(fS.Qi(t.instIndex)){const i=s.$0(t.oci).pFt();return i?i[t.instIndex]:null}return fS.ae(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static aDt(t){let s=t.DB().kB().Z0(t.TU());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const s of[...t.h6()]){const t=s.DB();i.push([t.pB().C1(),t.kB().ML(),s.TU(),fS.a6.o6(t),s.cU().MU()?1:0,t.LB(),fS.a6.aDt(s)])}return fS.xe(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=fS.a6.GDt(),s[0][14][1]=i,s[0][14][2]=t.DB().LB()),s}static o6(t){let s=0;return s|=Number(t.DJ())<<8,s|=Number(t.FJ())<<7,s|=Number(t.EJ())<<6,s|=Number(t.LJ())<<5,s|=Number(t.PJ())<<4,s|=Number(t.CJ())<<3,s|=Number(t.GJ())<<2,s|=Number(t.xJ())<<1,s|=0|Number(t.bJ()),s}static GDt(t){let s=0;return s|=256,s|=128,s|=64,s|=32,s|=16,s|=8,s|=4,s|=2,s|=1,511}static _Dt(){dS.clear()}}}{const pS=self._s,mS=self.hs,gS=(mS.ys,mS.ws,pS.Un(pS.Rect)),yS=pS.Un(pS.Il),wS=pS.Un(pS.Event,"bboxchange",!1),SS=pS.Un(pS.xo,0,0,0,0),vS=pS.Un(pS.au),bS=pS.Un(pS.xo,1,1,1,1),MS=pS.Un(pS.Rect,0,0,-1,-1),xS=pS.Un(pS.Rect,0,0,-1,-1),TS=new Set(["absolute","relative"]),GS=[];let _S=!0;const CS=new WeakMap,IS=new WeakMap;pS.RFt=class extends pS.Vn{constructor(t,s){super(),this.fi=t,this.ppt=t.cU(),this.Nc=t.aW(),this.CDt=s,this.ppt.oFt(this,null,s),this.IDt=-1,this.PDt=-1,this.MTt=196635,this.ppt.zj().Gj()&&(this.MTt|=128),this.Pa=NaN,this.Aa=NaN,this.FM=NaN,this.ADt=NaN,this.EDt=NaN,this.nG=NaN,this.Co=NaN,this.RDt=NaN,this.FDt=NaN,this.ODt=NaN,this.DDt=NaN,this.kDt=pS.Un(pS.Rect),this.LDt=pS.Un(pS.Il),this.NDt=xS,this.BDt=MS,this.WDt=null,this.jDt=null,this.VDt=null,this.RM=bS,this.HDt=bS,this.UDt=null,this.zDt=null,this.fi.cU().WRt()&&(this.zDt=pS.Un(pS.JDt,this.fi,this)),this.$Dt=null,this.WOt=null,this.jOt=null,this.qDt=-1,this.XDt=null}zFt(){this.MTt|=256}zn(){if(this.ppt.oFt(this,this.CDt,null),this.UDt&&(this.Nc.mM().Pv(this.UDt),this.UDt=null),this.WDt=null,this.jDt&&(this.jDt.YDt.zn(),this.jDt=null),this.VDt&&(this.VDt.clear(),this.VDt=null),this.jJ(),this.zDt&&this.zDt.zn(),this.wJ()&&this.rJ().gJ(this),this.h5()){const t=[...this.h6()];for(const s of t)this.gJ(s)}this.KDt(),this.ZDt(),CS.delete(this),IS.delete(this),this.fi=null,this.ppt=null,this.Nc=null,this.CDt=null}OFt(t){if(_S=!1,this.xz(t[0],t[1]),this.tx(t[2]),this.BA(t[3],t[4]),this.nG=0,this.Gj()?this.RV(t[6]):this.Co=0,SS.wa(t[7]),this.QDt(SS),this.Iz(t[8]),this.Ez(t[9]),this.LM(t[10]),this.zDt&&this.zDt.tkt(t[12]),t[14]&&CS.set(this,{skt:t[14][1],ikt:t[14][2]}),t[15]){const s=t[15];this.BJ(s[0],s[1]);const i=this.JJ(),e=s[2];for(let t=0,s=e.length;t<s;++t){const s=e[t];for(let e=0,n=s.length;e<n;++e){const n=s[e],r=i.Ux(e,t);r.XM(n[0]),r.ZM(n[1]),r.tx(n[2]),r.ix(n[3]),r.hx(n[4])}}}if(t[16]){const s=t[16][0],i=t[16][1],e=!!i,n=!e,r=this.Nc.uOt();e&&r&&r.Sct(this.Iq(),i),n&&r&&r.Sct(this.Iq(),s)}_S=!0,this.ekt()}DFt(){this.Pa=0,this.Aa=0,this.FM=0,this.ADt=0,this.EDt=0,this.nG=0,this.Co=0,this.RDt=0,this.FDt=1,this.ODt=0,this.DDt=0,this.ekt()}aW(){return this.Nc}cU(){return this.ppt}Iq(){return this.fi}nkt(){return this.PJ()?this.rkt(this.rJ().hkt()-this.$Dt.sDt()):0}XM(t){if(t=+t,this.bJ()){const s=this.$Dt,i=t-this.qM(),e=-this.nkt();0===e?this.Pa+=i/s.QOt():(this.Pa+=Math.cos(e)*i/s.QOt(),this.xJ()&&(this.Aa+=Math.sin(e)*i/s.tDt()))}else this.Pa=t}mot(t,s=!1){t=+t,s?this.Pa+=t:this.bJ()?this.XM(this.qM()+t):this.Pa+=t}qM(){if(this.bJ()){let t=this.Pa;const s=this.$Dt,i=this.rJ(),e=this.nkt();return 0===e?t*=s.QOt():(t=t*s.QOt()*Math.cos(e),this.xJ()&&(t-=this.Aa*s.tDt()*Math.sin(e))),i.qM()+t}return this.Pa}ZM(t){if(t=+t,this.xJ()){const s=this.$Dt,i=t-this.KM(),e=-this.nkt();0===e?this.Aa+=i/s.tDt():(this.bJ()&&(this.Pa-=Math.sin(e)*i/s.QOt()),this.Aa+=Math.cos(e)*i/s.tDt())}else this.Aa=t}got(t,s=!1){t=+t,s?this.Aa+=t:this.xJ()?this.ZM(this.KM()+t):this.Aa+=t}KM(){if(this.xJ()){let t=this.Aa;const s=this.$Dt,i=this.rJ(),e=this.nkt();return 0===e?t*=s.tDt():(t=t*s.tDt()*Math.cos(e),this.bJ()&&(t+=this.Pa*s.QOt()*Math.sin(e))),i.KM()+t}return this.Aa}xz(t,s){if(t=+t,s=+s,this.okt()){const i=this.bJ(),e=this.xJ(),n=this.$Dt,r=t-this.qM(),h=s-this.KM(),o=-this.nkt();if(0===o)i?this.Pa+=r/n.QOt():this.Pa=t,e?this.Aa+=h/n.tDt():this.Aa=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.Pa+=e?(l*r-a*h)/n.QOt():l*r/n.QOt():this.Pa=t,e?this.Aa+=i?(a*r+l*h)/n.tDt():l*h/n.tDt():this.Aa=s}}else this.Pa=t,this.Aa=s}akt(){return[this.qM(),this.KM()]}Gz(t,s){t=+t,s=+s,this.okt()?this.xz(this.qM()+t,this.KM()+s):(this.Pa+=t,this.Aa+=s)}cGt(t,s){return this.qM()===t&&this.KM()===s}tx(t){if(t=+t,this.EJ()&&(t-=this.rJ().QM()),this.FM===t)return;this.FM=t,this.lkt();const s=this.kB();0!==this.FM&&s.u1(),s.jB(this)}lkt(){if(this.ekt(),this.h5()){const t=this.h6();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.EJ()&&i.lkt()}}}Rot(t){this.tx(this.QM()+t)}QM(){return this.EJ()?this.rJ().QM()+this.FM:this.FM}Dz(){return this.kB().QM()+this.QM()}yet(){return this.Iq().zj().sTt()<2&&this.Iq().s$().yet()}Xg(t){if(t=+t,this.GJ()){const s=this.Vg();0===s?this.ADt=Number.EPSILON:this.ADt*=t/s}else this.ADt=t;this.ukt()}Gy(t,s){t=+t,s?this.ADt+=t:this.GJ()?this.Xg(this.Vg()+t):this.ADt+=t,this.ukt()}Vg(){if(this.GJ()){const t=this.rJ(),s=t.Vg();return t.Hrt().Vrt()===Number.EPSILON?(this.Hrt().Vrt()+s)*this.ADt:s*this.ADt}return this.ADt}Hg(t){if(t=+t,this.CJ()){const s=this.Zg();0===s?this.EDt=Number.EPSILON:this.EDt*=t/s}else this.EDt=t;this.ukt()}Mot(t,s){t=+t,s?this.EDt+=t:this.CJ()?this.Hg(this.Zg()+t):this.EDt+=t,this.ukt()}Zg(){if(this.CJ()){const t=this.rJ(),s=t.Zg();return t.Hrt().$rt()===Number.EPSILON?(this.Hrt().$rt()+s)*this.EDt:s*this.EDt}return this.EDt}BA(t,s){if(t=+t,s=+s,this.GJ()){const s=this.Vg();0===s?this.ADt=Number.EPSILON:this.ADt*=t/s}else this.ADt=t;if(this.CJ()){const t=this.Zg();0===t?this.EDt=Number.EPSILON:this.EDt*=s/t}else this.EDt=s;this.ukt()}Fu(){return[this.Vg(),this.Zg()]}R3(){return this.nG}ckt(t){if(t<0)throw new RangeError("invalid depth");this.nG=t}fkt(){if(this.wJ()){const t=this.$Dt;return Math.min(t.QOt(),t.tDt())}return 1}Gj(){return!!(128&this.MTt)}RV(t){t=+t,this.Gj()&&(this.PJ()&&(t-=this.rJ().FV()),t=pS.Kn(t),this.Co!==t&&(this.Co=t,this.ukt()))}xot(t){0!==(t=+t)&&this.Gj()&&(this.Co=pS.Kn(this.Co+t),this.ukt())}ukt(){if(this.MTt|=262144,this.h5()){const t=this.h6();for(let s=0,i=t.length;s<i;s++)t[s].ukt()}}FV(){return this.PJ()&&this.Gj()?this.rkt(pS.Kn(this.rJ().hkt()+this.Co)):this.Co}hkt(){return this.PJ()&&this.Gj()?pS.Kn(this.rJ().hkt()+this.Co):this.Co}rkt(t){return this.GJ()&&this.oJ().Vg()<0&&(t=pS.Kn(pS.dr(t,this.oJ().FV()+Math.PI))),this.CJ()&&this.oJ().Zg()<0&&(t=pS.dr(t,this.oJ().FV())),t}dkt(){const t=this.rJ();return!!(this.GJ()&&t.Vg()<0)||!!(this.CJ()&&t.Zg()<0)}pkt(){const t=this.rJ();return!!(this.GJ()&&t.Vg()<0&&this.CJ()&&t.Zg()<0)}mkt(){const t=this.MTt;if(!(262144&t))return;const s=this.FV();this.RDt=Math.sin(s),this.FDt=Math.cos(s),this.MTt=-262145&t}gGt(){return this.mkt(),this.RDt}mGt(){return this.mkt(),this.FDt}Iz(t){this.ODt=+t}Aot(t){this.ODt+=+t}Cz(){return this.ODt}Ez(t){this.DDt=+t}Eot(t){this.DDt+=+t}Az(){return this.DDt}QDt(t){this.RM.equals(t)||(this.RM===bS?(this.RM=pS.Un(pS.xo,t),this.HDt=pS.Un(pS.xo,t),this.HDt.Ko()):t.$o(1,1,1,1)?(this.RM=bS,this.HDt=bS):(this.RM.set(t),this.HDt.set(t),this.HDt.Ko()),this.ekt())}vF(t){if(t=pS.Yn(+t,0,1),this.FJ()){if(this.Hrt().DGt()===t)return;this.Hrt().ZOt(t),t=this.wF()}else if(this.RM.a===t)return;this.gkt(t)}ykt(){if(!this.h5())return;const t=this.h6();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.gkt(i.wF())}}gkt(t){SS.ko(this.RM),SS.a=t,this.QDt(SS),this.ykt()}_ot(t){this.FJ()?this.vF(this.Hrt().DGt()+t):this.vF(this.wF()+t)}wF(){return this.FJ()?this.rJ().wF()*this.Hrt().DGt():this.RM.a}Jz(t){this.RM.zo(t)||(SS.ko(t),SS.a=this.wF(),this.QDt(SS))}oot(t,s,i){SS.Po(t,s,i),this.Jz(SS)}wkt(t,s,i){0===t&&0===s&&0===i||(SS.ko(this.RM),SS.r+=t,SS.g+=s,SS.b+=i,this.Jz(SS))}zz(){return this.RM}A0(){return this.HDt}LJ(){return!!(512&this.MTt)}Skt(t){this.vkt(512,t)}bJ(){return!!(1024&this.MTt)}bkt(t){this.vkt(1024,t)}xJ(){return!!(2048&this.MTt)}okt(){return!!(3072&this.MTt)}Mkt(t){this.vkt(2048,t)}GJ(){return!!(4096&this.MTt)}xkt(t){this.vkt(4096,t)}CJ(){return!!(8192&this.MTt)}Tkt(t){this.vkt(8192,t)}PJ(){return!!(16384&this.MTt)}Gkt(t){this.vkt(16384,t)}EJ(){return!!(32768&this.MTt)}_kt(t){this.vkt(32768,t)}FJ(){return!!(4194304&this.MTt)}Ckt(t){this.vkt(4194304,t)}DJ(){return!!(8388608&this.MTt)}Ikt(t){this.vkt(8388608,t)}Pkt(){this.MTt&=-12647937}mJ(t,s){if(t===this)return!1;if(t.wJ())return!1;if(this.Akt(t))return!1;if(this.Ekt(t))return!1;const i=t.qM(),e=t.KM(),n=t.Vg(),r=t.Zg(),h=t.FV(),o=t.QM(),a=t.wF();t.Rkt(this),t.bkt(s.vJ),t.Mkt(s.MJ),t.xkt(s.TJ),t.Tkt(s._J),t.Gkt(s.IJ),t._kt(s.AJ),t.Ckt(s.RJ),t.Ikt(s.OJ),t.Skt(s.kJ);const l=i-this.qM(),u=e-this.KM(),c=-this.FV(),f=Math.cos(c),d=Math.sin(c);if(s.vJ&&(s.IJ?t.Pa=l*f-u*d:t.Pa=l,s.TJ)){const s=this.Vg()/this.$Dt.Vrt();0!==s&&(t.Pa/=s)}if(s.MJ&&(s.IJ?t.Aa=l*d+u*f:t.Aa=u,s._J)){const s=this.Zg()/this.$Dt.$rt();0!==s&&(t.Aa/=s)}if(s.TJ){const s=this.Vg();0===s||s===Number.EPSILON?(t.ADt=1,t.$Dt.XOt(1)):(t.ADt=n/this.Vg(),t.$Dt.XOt(t.ADt))}if(s._J){const s=this.Zg();0===s||s===Number.EPSILON?(t.EDt=1,t.$Dt.KOt(1)):(t.EDt=r/this.Zg(),t.$Dt.KOt(t.EDt))}return s.IJ&&(t.Co=h-this.FV()),s.AJ&&(t.FM=o-this.QM()),s.RJ&&t.$Dt.ZOt(a),s.OJ&&t.yH(this.SH()),this.Fkt(t),this.Mz(),this.ykt(),!0}gJ(t){if(t.rJ()!==this)return;const s=t.qM(),i=t.KM(),e=t.Vg(),n=t.Zg(),r=t.FV(),h=t.QM(),o=t.wF();t.Rkt(null),t.Pkt(),t.xz(s,i),t.BA(e,n),t.RV(r),t.tx(h),t.vF(o),this.Okt(t),this.Mz()}Dkt(){return this.qDt}kkt(){this.Lkt();const t=[...this.children()];for(const s of t)this.gJ(s);const s=this.rJ();s&&s.gJ(this),this.Pkt()}Lkt(){if(this.Nkt(),!this.WOt){const t=[...this.children()];t.length&&(this.WOt=[],this.jOt=new WeakMap);let s=0;for(const i of t){const t=i.Iq();this.WOt.push(t),this.jOt.set(t,s),s++}}const t=this.rJ();t&&t.Lkt()}Nkt(){if(-1!==this.qDt)return;const t=[...this.aJ()];this.qDt=t.length;for(const s of t)s.Nkt();const s=[...this.children()];for(const t of s)t.Nkt()}ZDt(){this.WOt&&(this.WOt.length=0),this.WOt=null,this.jOt=null;const t=this.rJ();t&&t.ZDt(),this.qDt=-1}wJ(){return null!==this.rJ()}rJ(){const t=this.$Dt;return null!==t?t.rJ():null}oJ(){let t=this;for(;t.wJ();)t=t.rJ();return t}*aJ(){let t=this.rJ();for(;t;)yield t,t=t.rJ()}eOt(t){return this.h6().includes(t)}h5(){const t=this.$Dt;return null!==t&&t.h5()}h6(){const t=this.$Dt;return null!==t?t.h6():GS}children(){return this.h6()}*dJ(){for(const t of this.children())yield t,yield*t.dJ()}uJ(){return this.h6().length}f_t(){return[...this.dJ()].length}fJ(t){const s=this.h6();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}oOt(t){if(!t)return NaN;const s=this.h6();if(!s)return NaN;for(let i=0;i<s.length;i++)if(t===s[i])return i;return NaN}Bkt(t){this.$Dt||(this.$Dt=pS.Un(pS.a6,this)),t&&this.$Dt.zOt(t)}Hrt(){return this.$Dt}KDt(){this.$Dt&&(this.$Dt.zn(),this.$Dt=null)}Rkt(t){t?(t.Bkt(null),this.Bkt(t)):(this.$Dt&&this.$Dt.zOt(null),this.h5()||this.KDt())}Ekt(t){if(!this.wJ())return!1;const s=this.rJ();return s===t||s.Ekt(t)}Akt(t){if(this.eOt(t))return!0;for(const s of this.h6())if(s.Akt(t))return!0;return!1}Fkt(t){this.$Dt.h6().push(t)}Okt(t){const s=this.$Dt.h6(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.wJ()||this.KDt(),t.h5()||t.KDt()}lOt(){const t=CS.get(this);return t?t.skt:null}Wkt(){const t=CS.get(this);return t?t.ikt:NaN}r5(){const t=IS.get(this);return pS.Qi(t)?t:NaN}jkt(t){IS.set(this,t)}Vkt(){this.vkt(524288,!0),this.ekt()}ekt(){if(!_S)return;const t=this.Nc.mM();let s;this.UDt&&t.Pv(this.UDt),s=524288&this.MTt?t.cv()||"<point>":t.av()||"<default>",this.UDt=t.Gv(s,this.XH(),this.HDt,this.QM(),this.Hkt()?1:0,0)}W3(){return this.UDt}E1(){return this.RM===bS}LM(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.XH()!==t&&(this.MTt=-2080374785&this.MTt|t<<26,this.ekt())}XH(){return(2080374784&this.MTt)>>26}WB(t,s){const i=s&&this.CDt!==t;i&&this.a1(),this.ppt.oFt(this,this.CDt,t),this.CDt=t,i&&this.Ukt(),0!==this.QM()&&this.CDt.u1()}kB(){return this.CDt}pB(){return this.kB().pB()}f1(t){this.IDt=0|t}LB(){return this.CDt.I2(),this.IDt}R2(t){this.PDt=0|t}fX(){return this.CDt.A2(),this.PDt}lQ(){return this.IDt}vkt(t,s){s?this.MTt|=t:this.MTt&=~t}SH(){return!!(1&this.MTt)}yH(t){if(this.vkt(1,t),this.h5())for(const s of this.h6())s.DJ()&&s.yH(t)}iJ(){return!!(8&this.MTt)}eJ(t){t=!!t,this.iJ()!==t&&(this.vkt(8,t),t?this.Mz():this.zkt())}Jkt(t,s){if(this.vkt(32,t),this.VDt&&this.VDt.clear(),s.trim()){this.VDt||(this.VDt=new Set);for(const t of s.split(" "))t&&this.VDt.add(t.toLowerCase())}else this.VDt=null}$kt(t){const s=!!(32&this.MTt),i=this.VDt;if(!t||!i)return!s;for(const e of i)if(t.has(e))return s;return!s}Mz(){if(this.MTt|=65554,this.ppt.nFt(!0),this.Nc.VB(),this.CDt.H0()&&(this.Lz(this.kDt,this.LDt,!0),this.MTt&=-3,this.Ukt()),4&this.MTt&&this.fi.wf().dispatchEvent(wS),null!==this.$Dt){const t=this.$Dt.h6();for(let s=0,i=t.length;s<i;++s)t[s].Mz()}}Lz(t,s,i){const e=this.qM(),n=this.KM(),r=this.Vg(),h=this.Zg(),o=this.FV();t.Ua(e-this.ODt*r,n-this.DDt*h,r,h),i&&this.zJ()&&this.qkt(t),0===o?s.Xl(t):(t.offset(-e,-n),s.Kl(t,this.gGt(),this.mGt()),s.offset(e,n),s.Zl(t)),t.normalize()}Xkt(){const t=this.MTt;2&t&&(this.Lz(this.kDt,this.LDt,!0),this.MTt=-3&t)}Nz(){return this.Xkt(),this.kDt}Wz(){return this.Xkt(),this.LDt}Ykt(t){const s=this.qM(),i=this.KM(),e=Math.round(s)-s,n=Math.round(i)-i;return 0===e&&0===n?t:(yS.m(t),yS.offset(e,n),yS)}Kkt(t){this.kDt.m(t),this.LDt.Xl(this.kDt),this.MTt&=-3,this.hFt(),this.Ukt()}Zkt(t){this.vkt(4,t)}Qkt(){return!!(4&this.MTt)}C3(t,s,i){return s&&0!==this.R3()?this.A3(this.kB().P3()):0===this.QM()||i?t.Ml(this.Nz()):this.tLt()}tLt(){const t=this.kB(),s=this.Dz();return!(s>=t.Y1())&&(t.q1(s,gS),gS.Ml(this.Nz()))}A3(t){const s=this.Nz(),i=s.Za(),e=s.tl(),n=s.Qa(),r=s.sl(),h=this.Dz(),o=h+this.R3();return t.Xw(i,n,h,e,r,o)}Vz(){const t=this.kB();if(t.l2())return this.A3(t.P3());{const s=t.pB();return this.C3(t.QH(),s._3(),s.aH())}}L3(t){this.vkt(1048576,t)}D3(t){this.vkt(2097152,t)}sLt(){return!!(1048576&this.MTt)}iLt(){return!!(2097152&this.MTt)}eLt(t){(t=!!t)!==this.Hkt()&&(this.vkt(16777216,t),this.ekt())}Hkt(){return!!(16777216&this.MTt)}nLt(t){this.WDt=t,this.rLt(),this.zJ()&&(this.XDt.hLt=null)}oLt(){return this.WDt}aLt(){return null!==this.WDt||this.zJ()}lLt(){return this.uLt(this.Vg(),this.Zg(),this.FV(),this.gGt(),this.mGt())}cLt(t,s,i){let e=0,n=1;return 0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.uLt(t,s,i,e,n)}uLt(t,s,i,e,n){let r=this.jDt;null===r&&(r={YDt:pS.Un(pS.au),width:NaN,height:NaN,angle:NaN},this.jDt=r);const h=r.YDt;if(r.width===t&&r.height===s&&r.angle===i)return h;const o=this.WDt;if(this.zJ()){const i=this.Cz(),r=this.Az(),a=this.JJ();let l=this.XDt.hLt;l||(o?(vS.m(o),vS.offset(i,r)):vS.gu(),l=a.tT(vS),this.XDt.hLt=l),a.sT(l,h),h.offset(-i,-r),h.vu(t,s,e,n)}else o?(h.m(o),h.vu(t,s,e,n)):h.Su(this.Wz(),-this.qM(),-this.KM());return r.width=t,r.height=s,r.angle=i,h}rLt(){this.fLt(!0);const t=this.jDt;null!==t&&(t.width=NaN)}BJ(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.Iq().zj().Fj())throw new Error("object does not support mesh");this.jJ(),this.XDt={dLt:pS.Un(pS.Lw.Sx,t,s),pLt:pS.Un(pS.Lw.Sx,t,s),hLt:null}}zJ(){return null!==this.XDt}JJ(){if(!this.zJ())throw new Error("no mesh");return this.XDt.dLt}mLt(){if(!this.zJ())throw new Error("no mesh");return this.XDt.pLt}gLt(t){this.vkt(65536,t)}yLt(){return!!(65536&this.MTt)}fLt(t){this.vkt(131072,t)}wLt(){return!!(131072&this.MTt)}qkt(t){const s=this.XDt.dLt,i=Math.min(s.Nx(),0),e=Math.min(s.Bx(),0),n=Math.max(s.Wx(),1),r=Math.max(s.jx(),1),h=t.width(),o=t.height();t.offsetLeft(i*h),t.offsetTop(e*o),t.al((n-1)*h),t.ll((r-1)*o),this.nG=s.Vx()}jJ(){this.XDt&&(this.XDt.dLt.zn(),this.XDt.pLt.zn(),this.XDt=null,this.rLt())}HJ(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!TS.has(e))throw new Error("invalid mode");const n="relative"===e;let r=i.x,h=i.y;const o=i.WH;let a="number"==typeof i.$J?i.$J:n?0:-1,l="number"==typeof i.qJ?i.qJ:n?0:-1;if(!this.zJ())return!1;const u=this.JJ(),c=u.Ux(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.QM()!==o&&(c.tx(o),f=!0),n&&(r+=t/(u.Fx()-1),h+=s/(u.Ox()-1)),-1!==a||n?(n&&(a+=t/(u.Fx()-1)),a=pS.Yn(a,0,1)):a=c.sx(),-1!==l||n?(n&&(l+=s/(u.Ox()-1)),l=pS.Yn(l,0,1)):l=c.nx(),c.qM()===r&&c.KM()===h&&c.sx()===a&&c.nx()===l?f:(c.XM(r),c.ZM(h),c.ix(a),c.hx(l),this.rLt(),!0)}UFt(){return this.fi.UFt()}nJ(t,s){return!!this.Nz().Tl(t,s)&&!!this.Wz().Tl(t,s)&&(this.UFt()?this.fi.s$().IPt(t,s):!this.aLt()||this.lLt().Tl(t-this.qM(),s-this.KM()))}SLt(){return!!(16&this.MTt)}hFt(){if(!this.SLt()||!this.iJ()||256&this.MTt)return;const t=this.Nz(),s=this.ppt.eFt(),i=this.NDt;if(gS.set(s._Q(t.Za()),s.CQ(t.Qa()),s._Q(t.tl()),s.CQ(t.sl())),i.equals(gS))return;const e=this.fi;i===xS?(s.IQ(e,null,gS),this.NDt=pS.Un(pS.Rect,gS)):(s.IQ(e,i,gS),i.m(gS)),this.MTt&=-17}vLt(){this.MTt|=16}zkt(){const t=this.NDt;t!==xS&&(this.ppt.eFt().IQ(this.fi,t,null),this.NDt=xS)}Ukt(){const t=this.kB();if(!t.H0()||256&this.MTt)return;const s=t.F1(),i=this.Nz(),e=this.BDt;if(gS.set(s._Q(i.Za()),s.CQ(i.Qa()),s._Q(i.tl()),s.CQ(i.sl())),e.equals(gS))return;const n=this.fi;e===MS?(s.IQ(n,null,gS),this.BDt=pS.Un(pS.Rect,gS)):(s.IQ(n,e,gS),e.m(gS)),t.O1()}a1(){const t=this.BDt;t!==MS&&(this.kB().F1().IQ(this.fi,t,null),this.BDt=MS)}P2(){return this.BDt}qz(){const t=this.fi,s=this.CDt,i=s.BB();i.length&&i.at(-1)===t||(s.o1(t,!1),s.e1(t,!1),this.Nc.VB())}Yz(){const t=this.fi,s=this.CDt,i=s.BB();i.length&&i[0]===t||(s.o1(t,!1),s.h1(t,!1),this.Nc.VB())}Zz(t){const s=this.fi,i=this.CDt;if(i.pB()!==t.pB())throw new Error("layer from different layout");t!==i&&(i.o1(s,!0),this.WB(t),t.e1(s,!0),this.Nc.VB())}tJ(t,s){const i=this.fi;let e=!1;const n=this.CDt;if(t.TU()===i.TU())return;const r=t.DB();if(!r)throw new Error("expected world instance");const h=r.kB();n.ML()!==h.ML()&&(n.o1(i,!0),this.WB(h),h.e1(i,!0),e=!0);const o=h.D2(i,t,!!s);(e||o)&&this.Nc.VB()}vz(){return this.zDt}bLt(t){this.vkt(64,t)}H2(){return!!(64&this.MTt)}i5(t,s=null){const i={x:this.qM(),y:this.KM(),w:this.Vg(),h:this.Zg(),l:this.kB().C1(),zi:this.LB()};0!==this.QM()&&(i.ze=this.QM()),0!==this.FV()&&(i.a=this.hkt()),this.E1()||(i.c=this.RM.toJSON()),.5!==this.Cz()&&(i.oX=this.Cz()),.5!==this.Az()&&(i.oY=this.Az()),0!==this.XH()&&(i.bm=this.XH()),this.SH()||(i.v=this.SH()),this.iJ()||(i.ce=this.iJ()),this.Qkt()&&(i.be=this.Qkt()),this.zDt&&(i.fx=this.zDt.i5());const e=!!(32&this.MTt);return e&&(i.sfi=e),this.VDt&&(i.sft=[...this.VDt].join(" ")),this.$Dt&&"visual-state"!==t&&(i.sgi=this.$Dt.i5(t,s),CS.has(this)&&(i.sgcd=CS.get(this).skt,i.sgzid=CS.get(this).ikt)),this.zJ()&&(i.mesh=this.JJ().ux()),i}oDt(){return{x:this.Pa,y:this.Aa,z:this.FM,w:this.ADt,h:this.EDt,a:this.Co,sgi:this.Hrt()?this.Hrt().iDt():null}}pDt(t){t&&(this.Pa=t.x,this.Aa=t.y,this.FM=t.z,this.ADt=t.w,this.EDt=t.h,this.Co=t.a,t.sgi&&this.Hrt()&&this.Hrt().e5(t.sgi),this.ukt(),this.Mz())}gFt(){this.ZDt(),this.kkt(),this.Bkt(null),this.$Dt&&this.$Dt.lDt(this.WOt,this.jOt)}u8(t){"visual-state"!==t&&this.kkt()}f8(t,s="full",i=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==s){if(256&this.MTt)return;this.$Dt.f8(t.sgi,i)}}POt(t,s="full",i=null){if("visual-state"!==s)if(256&this.MTt)this.ZDt();else{if(t.hasOwnProperty("sgi"))this.$Dt.lDt(null,null,t.sgi,i);else if(i?.Q_t&&this.WOt)for(const t of this.WOt)t.wX()||this.Nc.yU(t);this.ZDt(),this.Mz()}}e5(t,s,i=null){if(_S=!1,this.XM(t.x),this.ZM(t.y),this.Xg(t.w),this.Hg(t.h),this.f1(t.zi),this.tx(t.hasOwnProperty("ze")?t.ze:0),this.RV(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?SS.wa(t.c):t.hasOwnProperty("o")?(SS.ko(this.RM),SS.a=t.o):SS.Io(1,1,1,1),this.QDt(SS),this.Iz(t.hasOwnProperty("oX")?t.oX:.5),this.Ez(t.hasOwnProperty("oY")?t.oY:.5),this.LM(t.hasOwnProperty("bm")?t.bm:0),this.yH(!t.hasOwnProperty("v")||t.v),this.eJ(!t.hasOwnProperty("ce")||t.ce),this.Zkt(!!t.hasOwnProperty("be")&&t.be),this.Jkt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.zDt&&t.hasOwnProperty("fx")&&this.zDt.e5(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==s){this.Bkt(null);const s=this.$Dt,i=t.sgi;s.e5(i),s.lDt(this.WOt,this.jOt),this.MLt(t.sgcd,t.sgzid)}if(t.hasOwnProperty("mesh")){const s=t.mesh;this.BJ(s.cols,s.rows),this.JJ().mx(s)}else this.jJ();this.Mz(),_S=!0,this.ekt(),"visual-state"!==s&&this.Nc.xLt(this.Iq(),t)}MLt(t,s){t&&pS.Qi(s)&&CS.set(this,{skt:t,ikt:s})}}}{const PS=self._s;PS.XEt=class extends PS.Vn{constructor(t,s){super();const i=t.aW(),e=i.Mbt(s[1]);i.TLt().xAt(e),this.Nc=i,this.ppt=t,this.iAt=PS.mj.g$(e),this.jIt=null,this.GLt=null,this._Et=e.Instance,this.JQ=s[2],this.qn=s[0],this.hMt=this.Nc.Hgt(s[3]);const n=this.iAt.sTt();if(n<2&&(this.jIt=PS.Un(e.fRt,this),!(this.jIt instanceof PS.sAt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(PS.mj.xIt(this,n),n>=2){const t=e.fRt??globalThis.AX;if(this.GLt=new t,!(this.GLt instanceof globalThis.AX))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.GLt=new globalThis.p$;PS.mj.TIt(n),this.SIt()}static UG(t,s){return PS.Un(PS.XEt,t,s)}zn(){this.Nc=null,this.iAt=null,this.jIt&&(this.jIt.zn(),this.jIt=null),this._Et=null}KTt(){return this.jIt}SIt(){this.jIt?this.jIt.SIt():this.GLt&&this.GLt.Uq()}aW(){return this.Nc}cU(){return this.ppt}a$(){return this.iAt}FRt(){return this._Et}Pc(){return this.qn}C1(){return this.JQ}u$(){return this.GLt}Hgt(){return this.hMt}}}{const AS=self._s,ES=self.h$;AS.PFt=class extends AS.Vn{constructor(t){super(),this.Nc=t.runtime,this.NMt=t.l$,this.iAt=this.NMt.a$(),this.fi=t.f$,this.Aw=t.index,this.bFt=null,this.MFt=null,this.iAt.e1(this.fi)}zn(){this.MFt&&(this.MFt.gU(),this.MFt=null),this.iAt.o1(this.fi),this.bFt&&(this.bFt.zn(),this.bFt=null),this.Nc=null,this.NMt=null,this.iAt=null,this.fi=null}PRt(t){if(this.bFt)throw new Error("already got sdk instance");if(this.a$().sTt()<2){if(this.bFt=AS.Un(this.NMt.FRt(),this,t),!(this.bFt instanceof AS.eAt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.a$().vIt();this.MIt(s.Instance,t)}}s$(){return this.bFt??this.MFt}d$(){return this.fi}aW(){return this.Nc}c$(){return this.NMt}a$(){return this.iAt}$ht(){return this.Aw}hAt(){this.bFt?this.bFt.hAt():this.MFt.FX()}uAt(t,s){this.bFt&&this.bFt.uAt(t,s)}IOt(){return this.bFt?this.bFt.aPt():this.MFt.az()}ux(t="full"){return this.bFt?this.bFt.ux(t):this.MFt.lz(t)}mx(t,s="full"){if(this.bFt)return this.bFt.mx(t,s);this.MFt.uz(t,s)}static _Lt(t,s,i){const e=globalThis.EX;let n,r;n=s instanceof e?t.qV(s):s.rAt(),r=i instanceof e?t.qV(i):i.rAt();const h=n.d$(),o=r.d$(),a=h.cU().ML(),l=o.cU().ML();if(a!==l)return a-l;const u=h.mOt(),c=o.mOt();return u!==c?u-c:n.$ht()-r.$ht()}MIt(t,s){const i=ES,e=t??this.bFt.vIt(),n=e||i,r=this.a$().sTt();if(AS.mj.xIt(this,r),AS.mj.TAt(s),this.MFt=new n,AS.mj.GAt(),AS.mj.TIt(r),e&&!(this.MFt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);return this.MFt}UIt(){return this.MFt||this.MIt()}fPt(){return!!this.MFt}}}{const RS=self._s;RS.I0=class extends RS.Vn{constructor(t,s){super(),this.Mx=t,this.CLt=[],this.ILt=[],this.PLt=new Map,this.ALt=[],this.ELt=[],this.RLt=new Set,this.nM=!0;for(const t of s){const s=RS.Un(RS.FLt,this,t,this.CLt.length);this.CLt.push(s),this.PLt.set(s.Pc().toLowerCase(),s),t.length>=3&&this.ALt.push(this.OLt(s,t[2]))}this.aW().DLt(this)}zn(){this.aW().kLt(this);for(const t of this.ELt)t.zn();RS.Sh(this.ELt),RS.Sh(this.CLt),RS.Sh(this.ILt),this.PLt.clear(),RS.Sh(this.ALt),this.Mx=null}LLt(t){this.RLt.add(t)}NLt(t){this.RLt.delete(t)}BLt(t){t.tv()&&(this.ELt=this.CLt.map(t=>{const s=t.z_();return s.WLt()>0?RS.Un(RS.Lw.jLt,s):null}),this.VLt());for(const s of this.RLt)s.BLt(t)}CRt(t){if(t.length){this.CLt=t.concat(this.CLt);for(const s of t)this.PLt.set(s.Pc().toLowerCase(),s);for(let t=0,s=this.CLt.length;t<s;++t)this.CLt[t].b1(t)}}OLt(t,s){t.HLt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=RS.Un(RS.xo);e.wa(s),i[t]=e}}return i}Dx(){return this.Mx}aW(){return this.Mx.aW()}S$(){RS.Sh(this.ILt);let t=!0;for(const s of this.CLt)s.lSt()&&(this.ILt.push(s),s.z_().bM()||(t=!1));this.nM=t}CV(){return this.CLt}jRt(){return this.CLt.length>0}Drt(t){return this.PLt.get(t.toLowerCase())||null}ULt(t){if((t=Math.floor(+t))<0||t>=this.CLt.length)throw new RangeError("invalid effect type index");return this.CLt[t]}y$(t){return this.ULt(t).lSt()}w$(t,s){this.ULt(t).HLt(s)}R1(){return this.ILt}H2(){return this.ILt.length>0}bM(){return this.nM}Ort(t){return this.ALt[t]}R0(t){return t<this.ELt.length?this.ELt[t]:this.ALt[t]}v$(t,s){if(t<0||t>=this.ALt.length)return null;const i=this.ALt[t];return s<0||s>=i.length?null:i[s]}b$(t,s,i){if(t<0||t>=this.ALt.length)return!1;const e=this.ALt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof RS.xo){if(n.zo(i))return!1;n.ko(i)}else{if(n===i)return!1;e[s]=i}return t<this.ELt.length&&this.ELt[t].zLt(s,i),!0}VLt(){const t=this.ALt,s=this.ELt;for(let i=0,e=Math.min(t.length,s.length);i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.zLt(t,n[t])}}static JLt(t){return t&&t instanceof RS.xo?{t:"color",v:t.toJSON()}:t}static $Lt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const s=RS.Un(RS.xo);return s.wa(t.v),s}throw new Error("invalid effect parameter type")}return t}static qLt(t){return t.map(RS.I0.JLt)}static XLt(t){return t.map(RS.I0.$Lt)}ux(){return this.CLt.map(t=>({name:t.Pc(),active:t.lSt(),params:RS.I0.qLt(this.ALt[t.ML()])}))}mx(t){for(const s of t){const t=this.Drt(s.name);t&&(t.HLt(s.active),this.ALt[t.ML()]=RS.I0.XLt(s.params))}this.S$(),this.VLt()}}}{const FS=self._s;FS.FLt=class extends FS.Vn{constructor(t,s,i){super(),this.C0=t,this.Wc=s[0],this.qn=s[1],this.Aw=i,this.PM=null,this.Nf=!0}zn(){this.C0=null,this.PM=null}_Rt(t){const s=FS.Un(FS.FLt,t,[this.Wc,this.qn],-1);return s.PM=this.PM,s.Nf=this.Nf,s}BLt(t){const s=t.ov(this.Wc);if(!s)throw new Error("failed to find shader program '"+this.Wc+"'");this.PM=s}_V(){return this.C0}Pc(){return this.qn}b1(t){this.Aw=t}ML(){return this.Aw}Dx(){return this.C0.Dx()}aW(){return this.C0.aW()}HLt(t){this.Nf=!!t}lSt(){return this.Nf}z_(){return this.PM}YLt(){const t=[];for(let s=0,i=this.PM.J_();s<i;++s){const i=this.PM.q_(s);if("float"===i||"percent"===i)t.push(0);else{if("color"!==i)throw new TypeError("unknown effect parameter type");t.push(FS.Un(FS.xo,1,1,1,1))}}return t}}}{const OS=self._s;OS.JDt=class extends OS.Vn{constructor(t,s){super(),this.fi=t,this.KLt=s,this.C0=t.cU()._V(),this.ZLt=!0,this.O0=!0,this.QLt=!1,this.tNt=!1,this.sNt=!1,this.iNt=!1,this.wL=OS.Un(OS.Lw.oD,t.aW().GB().P0(),{YO:(t,s)=>{const i=s.uL(),e=i.DB();t.NM(e.A0()),t.Hv(e.Dz()),i.Kx(t),t.Hv(0)},KO:t=>{const s=t.xPt(),[i,e]=t.MPt();return{iL:s,eL:i,nL:e}},ZO:t=>this.R0(t)}),this.eNt=[],this.ILt=[],this.nM=!0,this.ALt=[],this.ELt=[],this.BLt(t.aW().mM());for(let t=0,s=this.C0.CV().length;t<s;++t)this.eNt.push(!0);this.S$(),this.C0.LLt(this)}zn(){this.C0.NLt(this);for(const t of this.ELt)t&&t.zn();OS.Sh(this.ELt),this.wL.zn(),this.wL=null,OS.Sh(this.eNt),OS.Sh(this.ILt),OS.Sh(this.ALt),this.fi=null,this.C0=null}BLt(t){t.tv()&&(this.ELt=this.C0.CV().map(t=>{const s=t.z_();return s.WLt()>0?OS.Un(OS.Lw.jLt,s):null}))}tkt(t){let s=0;for(const i of t)this.ALt.push(this.OLt(s,i)),++s;this.VLt(),this.S$()}OLt(t,s){this.eNt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=OS.Un(OS.xo);e.wa(s),i[t]=e}}return i}kFt(){for(const t of this.C0.CV())this.ALt.push(t.YLt());this.VLt()}Dx(){return this.Mx}_V(){return this.C0}bL(){return this.A1(),this.wL}aW(){return this.fi.aW()}S$(){OS.Sh(this.ILt);const t=this.KLt,s=this.C0.CV(),i=this.ILt,e=this.eNt;let n=!0;for(let t=0,r=s.length;t<r;++t)if(e[t]){const e=s[t];i.push(e),e.z_().bM()||(n=!1)}this.nM=n,t.bLt(!!i.length),this.ZLt=!0}A1(){const t=this.fi,s=this.KLt,i=s.E1(),e=t.zj().Pj(),n=0!==s.FV()||0!==s.kB().FV()||s.Vg()<0||s.Zg()<0,r=t._Pt(),h=t.vM();(this.ZLt||i!==this.O0||e!==this.QLt||n!==this.tNt||r!==this.sNt||h!==this.iNt||this.wL.QD())&&(this.wL.tk(this.ILt.map(t=>t.z_()),{tD:this.ILt.map(t=>t.ML()),sD:!i||h,eD:e,nD:r,rD:n}),this.ZLt=!1,this.O0=i,this.QLt=e,this.tNt=n,this.sNt=r,this.iNt=h)}R1(){return this.ILt}Ort(t){return this.ALt[t]}R0(t){return t<this.ELt.length?this.ELt[t]:this.ALt[t]}v$(t,s){if(t<0||t>=this.ALt.length)return null;const i=this.ALt[t];return s<0||s>=i.length?null:i[s]}b$(t,s,i){if(t<0||t>=this.ALt.length)return!1;const e=this.ALt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof OS.xo){if(n.zo(i))return!1;n.ko(i)}else{if(n===i)return!1;e[s]=i}return t<this.ELt.length&&this.ELt[t].zLt(s,i),!0}VLt(){const t=this.ALt,s=this.ELt;for(let i=0,e=s.length;i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.zLt(t,n[t])}}bM(){return this.nM}nNt(){return this.ILt.some(t=>t.z_().TM())}y$(t){return this.eNt[t]}w$(t,s){this.eNt[t]=!!s}CV(){return this.C0.CV()}i5(){return this.C0.CV().map(t=>({name:t.Pc(),active:this.eNt[t.ML()],params:OS.I0.qLt(this.ALt[t.ML()])}))}e5(t){for(const s of t){const t=this.C0.Drt(s.name);t&&(this.eNt[t.ML()]=s.active,this.ALt[t.ML()]=OS.I0.XLt(s.params))}this.S$(),this.VLt()}}}{const DS=self._s,kS=[],LS=[],NS=[],BS=DS.Un(DS.au),WS=DS.Un(DS.au),jS=DS.Un(DS.Il),VS=DS.Un(DS.Rect),HS=DS.Un(DS.Rect);let US=null,zS=null,JS=null;DS.rNt=class extends DS.Vn{constructor(t){super(),this.Nc=t,this.hNt=0,this.oNt=0,this.aNt=[],this.lNt=0,this.uNt=0,this.cNt=0,this.fNt=0,this.dNt=new self.IW(this)}zn(){this.Nc=null}aW(){return this.Nc}PL(){return this.dNt}pNt(){this.uNt=this.lNt,this.lNt=0,this.fNt=this.cNt,this.cNt=0}mNt(){return this.uNt}gNt(){return this.fNt}yNt(t,s){const i=t.DB(),e=s.DB();i&&e&&i.iJ()&&e.iJ()&&this.aNt.push([t,s])}QGt(t,s,i){for(const[e,n]of this.aNt){let r=null;if(t===e)r=n;else{if(t!==n)continue;r=e}r.a_t(s)&&(i.includes(r)||i.push(r))}}t_t(t,s){if(!this.aNt.length)return!1;for(const[i,e]of this.aNt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}wNt(){DS.Sh(this.aNt)}AW(t,s){if(!t||!s||t===s)return!1;const i=t.DB(),e=s.DB();if(!i.iJ()||!e.iJ())return!1;this.lNt++;const n=i.kB(),r=e.kB();return n.T2(r)?this.SNt(i,e):this.vNt(i,e)}SNt(t,s){if(!t.Nz().Ml(s.Nz()))return!1;if(this.cNt++,!t.Wz().tu(s.Wz()))return!1;if(t.UFt()&&s.UFt())return!1;if(t.UFt())return this.bNt(t,s);if(s.UFt())return this.bNt(s,t);if(!t.aLt()&&!s.aLt())return!0;const i=t.lLt(),e=s.lLt();return i.bu(e,s.qM()-t.qM(),s.KM()-t.KM())}vNt(t,s){const i=t.UFt(),e=s.UFt();if(i&&!e)return this.MNt(t,s);if(e&&!i)return this.MNt(s,t);if(e||i)return!1;{const i=t.kB(),e=s.kB();BS.m(t.lLt()),WS.m(s.lLt());const n=BS.du();for(let s=0,e=n.length;s<e;s+=2){const e=s+1,r=n[s],h=n[e],[o,a]=i.eU(r+t.qM(),h+t.KM());n[s]=o,n[e]=a}const r=WS.du();for(let t=0,i=r.length;t<i;t+=2){const i=t+1,n=r[t],h=r[i],[o,a]=e.eU(n+s.qM(),h+s.KM());r[t]=o,r[i]=a}return BS.yu(),WS.yu(),this.cNt++,BS.bu(WS,0,0)}}MNt(t,s){const i=t.kB(),e=s.kB();US||(US=DS.Un(DS.au)),zS||(zS=DS.Un(DS.Rect)),JS||(JS=DS.Un(DS.Il));const n=s.qM(),r=s.KM(),[h,o]=e.eU(n,r),[a,l]=i.sU(h,o),u=a-n,c=l-r;if(zS.m(s.Nz()),zS.offset(u,c),!t.Nz().Ml(zS))return!1;if(JS.m(s.Wz()),JS.offset(u,c),this.cNt++,!t.Wz().tu(JS))return!1;US.m(s.lLt());const f=US.du();for(let t=0,s=f.length;t<s;t+=2){const s=t+1;f[t]+=u,f[s]+=c}return US.yu(),this.bNt(t,s,a,l,US,zS,JS)}bNt(t,s,i,e,n,r,h){const o=void 0!==r?r:s.Nz(),a=t.qM(),l=t.KM(),u=t.Iq().s$(),c=void 0!==i?i:s.qM(),f=void 0!==e?e:s.KM(),d=s.aLt(),p=void 0!==h?h:s.Wz(),m=LS;u.xNt(o,m);for(let t=0,i=m.length;t<i;++t){const i=m[t],e=i.TNt();if(this.lNt++,o.xl(e,a,l)&&(jS.Xl(e),jS.offset(a,l),jS.tu(p)))if(d){const t=void 0!==n?n:s.lLt();let r=c,h=f;void 0!==n&&(r=s.qM(),h=s.KM());const o=i.GNt();if(o){if(this.cNt++,o.bu(t,r-(a+e.Za()),h-(l+e.Qa())))return DS.Sh(m),!0}else if(BS.Su(jS,0,0),BS.bu(t,r,h))return DS.Sh(m),!0}else{const t=i.GNt();if(!t)return DS.Sh(m),!0;if(BS.Su(p,0,0),t.bu(BS,-(a+e.Za()),-(l+e.Qa())))return DS.Sh(m),!0}}return DS.Sh(m),!1}_Nt(t,s,i){const e=t.eV(),n=this.Nc.dN();if(!n)throw new Error("cannot call outside event");const r=n.Hpt(),h=new DS.CNt;if(e._pt()){i||(e.Fpt(!1),DS.Sh(e.Opt())),r&&DS.Sh(e.Dpt());for(const n of t.iV()){const t=n.DB(),o=t.kB();let a=!1;if(h.bH(o)&&t.Vz()&&(a=s.some(([s,i])=>{const[e,n]=h.sU(o,s,i,t.Dz());return t.nJ(e,n)})),a){if(i)return!1;e.Ept(n)}else r&&e.Rpt(n)}}else{let t,o=!1;r&&!n.Rvt(this.Nc.Ogt())?this.Nc.iGt()&&!e.Dpt().length&&e.Opt().length?t=e.Opt():(t=e.Dpt(),o=!0):t=e.Opt();let a=0;for(let n=0,l=t.length;n<l;++n){const l=t[n],u=l.DB(),c=u.kB();let f=!1;if(h.bH(c)&&u.Vz()&&(f=s.some(([t,s])=>{const[i,e]=h.sU(c,t,s,u.Dz());return u.nJ(i,e)})),f){if(i)return!1;o?e.Ept(l):t[a++]=l}else o?t[a++]=l:r&&e.Rpt(l)}i||(t.length=a)}return t.dbt(),h.zn(),!!i||e.Cpt()}INt(t,s){if(!t)return!0;for(const i of s.aFt())if(!t.T2(i))return!1;return!0}sGt(t,s,i,e){if(s.S1())for(const n of s.MV())this.INt(t,n)?(n.rFt(),n.eFt().PQ(i,e)):DS.Rn(e,n.iV());else this.INt(t,s)?(s.rFt(),s.eFt().PQ(i,e)):DS.Rn(e,s.iV())}WW(t,s,i,e){for(const n of s)this.sGt(t,n,i,e)}PNt(t,s,i){const e=this.Nc.CAt();e&&this.WW(t,e.k8(),s,i)}ANt(t,s,i){const e=this.Nc.IAt();e&&this.WW(t,e.k8(),s,i)}$kt(t,s){return t.$Ft()&&(!s||s.DB().$kt(t.oTt().get("solidTags")))}FW(t){const s=t.DB();this.PNt(s.kB(),s.Nz(),kS);for(const s of kS)if(this.$kt(s,t)&&this.AW(t,s))return DS.Sh(kS),s;return DS.Sh(kS),null}ENt(t,s){this.PNt(null,t,kS);for(const i of kS)if(this.$kt(i,s)&&this.RNt(t,i))return DS.Sh(kS),i;return DS.Sh(kS),null}FNt(t,s){let i=null;s&&(i=NS,DS.Sh(i));const e=t.DB();this.ANt(e.kB(),e.Nz(),kS);for(const e of kS)if(e.XFt()&&this.AW(t,e)){if(!s)return DS.Sh(kS),e;i.push(e)}return DS.Sh(kS),i}ONt(t,s,i,e,n){e=e||50;const r=t.DB(),h=r.qM(),o=r.KM();for(let a=0;a<e;++a)if(r.xz(h+s*a,o+i*a),r.Mz(),!this.AW(t,n))return!0;return r.xz(h,o),r.Mz(),!1}DNt(t,s,i,e,n,r){e=e||50;const h=t.DB(),o=h.qM(),a=h.KM();let l=null,u=null;for(let c=0;c<e;++c)if(h.xz(o+s*c,a+i*c),h.Mz(),!this.AW(t,l))if(l=this.FW(t),l)u=l;else if(n&&(l=r?this.AW(t,r)?r:null:this.FNt(t),l&&(u=l)),!l)return u&&this.kNt(t,s,i,u,16,!0),!0;return h.xz(o,a),h.Mz(),!1}LNt(t,s,i,e){e=e||50;const n=t.DB(),r=n.qM(),h=n.KM();let o=null,a=null;for(let l=0;l<e;++l)for(let e=0;e<2;++e){const u=2*e-1;if(n.xz(r+s*l*u,h+i*l*u),n.Mz(),!this.AW(t,o)){if(o=this.FW(t),!o)return a&&this.kNt(t,s*u,i*u,a,16,!0),!0;a=o}}return n.xz(r,h),n.Mz(),!1}kNt(t,s,i,e,n,r){let h=2,o=!1,a=!1;const l=t.DB();let u=l.qM(),c=l.KM();for(;h<=n;){const n=1/h;h*=2,l.Gz(s*n*(o?1:-1),i*n*(o?1:-1)),l.Mz(),this.AW(t,e)||r&&this.FW(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.qM(),c=l.KM())}a&&(l.xz(u,c),l.Mz())}NNt(t,s=100){let i=0;const e=t.DB(),n=e.qM(),r=e.KM();let h=0,o=this.FW(t);if(!o)return!0;for(;i<=s;){let s=0,a=0;switch(h){case 0:s=0,a=-1,i++;break;case 1:s=1,a=-1;break;case 2:s=1,a=0;break;case 3:s=1,a=1;break;case 4:s=0,a=1;break;case 5:s=-1,a=1;break;case 6:s=-1,a=0;break;case 7:s=-1,a=-1}if(h=(h+1)%8,e.xz(Math.floor(n+s*i),Math.floor(r+a*i)),e.Mz(),!this.AW(t,o)&&(o=this.FW(t),!o))return!0}return e.xz(n,r),e.Mz(),!1}BNt(t,s,i,e){const n=t.DB(),r=n.qM(),h=n.KM(),o=Math.max(10,DS.ir(s,i,r,h)),a=DS.nr(s,i,r,h),l=e||this.FW(t);if(!l)return DS.Kn(a+Math.PI);let u=l,c=0,f=0;const d=DS.Zn(5);let p;for(p=1;p<36;++p){const r=a-p*d;if(n.xz(s+Math.cos(r)*o,i+Math.sin(r)*o),n.Mz(),!this.AW(t,u)&&(u=e?null:this.FW(t),!u)){c=r;break}}for(36===p&&(c=DS.Kn(a+Math.PI)),u=l,p=1;p<36;++p){const r=a+p*d;if(n.xz(s+Math.cos(r)*o,i+Math.sin(r)*o),n.Mz(),!this.AW(t,u)&&(u=e?null:this.FW(t),!u)){f=r;break}}if(36===p&&(f=DS.Kn(a+Math.PI)),n.xz(r,h),n.Mz(),f===c)return f;const m=DS.rr(f,c)/2;let g;g=DS.ar(f,c)?DS.Kn(c+m+Math.PI):DS.Kn(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),v=Math.sin(g),b=y*S+w*v,M=y-2*b*S,x=w-2*b*v;return DS.nr(0,0,M,x)}WNt(t,s,i,e,n){if(!n)return!1;const r=n.DB();return!!r.iJ()&&(this.lNt++,VS.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!!r.Nz().Ml(VS)&&(n.UFt()?this.jNt(t,s,i,e,n,r):(this.cNt++,!!r.Wz().Ql(t,s,i,e)&&(!r.aLt()||r.lLt().Ql(r.qM(),r.KM(),t,s,i,e)))))}jNt(t,s,i,e,n,r){const h=r.qM(),o=r.KM(),a=n.s$(),l=LS;HS.set(t,s,i,e),HS.normalize(),a.xNt(HS,l);for(let n=0,r=l.length;n<r;++n){const r=l[n],a=r.TNt();if(this.lNt++,VS.xl(a,h,o)&&(jS.Xl(a),jS.offset(h,o),jS.Ql(t,s,i,e))){const n=r.GNt();if(!n)return DS.Sh(l),!0;if(this.cNt++,n.Ql(h+a.Za(),o+a.Qa(),t,s,i,e))return DS.Sh(l),!0}}return DS.Sh(l),!1}RNt(t,s){if(!s)return!1;const i=s.DB();if(!i.iJ())return!1;if(this.lNt++,!i.Nz().Ml(t))return!1;if(s.UFt())return this.VNt(t,s,i);if(this.cNt++,jS.Xl(t),!i.Wz().tu(jS))return!1;if(!i.aLt())return!0;const e=BS;e.Xl(t,i.qM(),i.KM());const n=i.lLt();return e.bu(n,0,0)}VNt(t,s,i){const e=i.qM(),n=i.KM(),r=s.s$(),h=LS;r.xNt(t,h);for(let s=0,i=h.length;s<i;++s){const i=h[s],r=i.TNt();if(this.lNt++,t.xl(r,e,n)){const s=i.GNt();if(!s)return DS.Sh(h),!0;if(this.cNt++,BS.Xl(t,0,0),s.bu(BS,-(e+r.Za()),-(n+r.Qa())))return DS.Sh(h),!0}}return DS.Sh(h),!1}HNt(t,s){if(!t)return;const i=t.DB();i.iJ()&&(this.lNt++,i.Nz().Ml(s.rect)&&(t.UFt()?this.UNt(t,i,s):(this.cNt++,i.aLt()?s.zNt(t,i.qM(),i.KM(),i.lLt()):s.JNt(t,i.Wz()))))}UNt(t,s,i){const e=s.qM(),n=s.KM(),r=LS;t.s$().xNt(i.rect,r);for(let h=0,o=r.length;h<o;h++){const o=r[h],a=o.TNt();if(this.lNt++,i.rect.xl(a,e,n)){const r=o.GNt();this.cNt++,r?i.zNt(t,e+a.Za(),n+a.Qa(),r):i.$Nt(t,s.qM(),s.KM(),a)}}DS.Sh(r)}DW(t,s){if(t===this.hNt&&s===this.oNt)return;this.hNt=t,this.oNt=s;const i=this.Nc.w1();for(const e of i)if(e.bj()){for(const t of e.sV())t.DB().zkt();e.eFt().qNt(t,s),e.nFt();for(const t of e.sV()){const s=t.DB();s.vLt(),s.hFt()}}}LW(){return[this.hNt,this.oNt]}XNt(t,s){this.hNt=t,this.oNt=s}}}{const $S=self._s;$S.kEt=class extends $S.Vn{constructor(t,s){super(),this.MQ=t,this.xQ=s,this.TQ=$S.Un($S.Cu)}zn(){this.TQ.zn(),this.TQ=null}qNt(t,s){if(!this.TQ.Au())throw new Error("grid not empty");this.MQ=t,this.xQ=s}GQ(t,s,i){let e=this.TQ.zs(t,s);return e||(i?(e=$S.Un($S.YNt,this,t,s),this.TQ.Set(t,s,e),e):null)}_Q(t){const s=Math.floor(t/this.MQ);return isFinite(s)?s:0}CQ(t){const s=Math.floor(t/this.xQ);return isFinite(s)?s:0}IQ(t,s,i){if(s)for(let e=s.Za(),n=s.tl();e<=n;++e)for(let n=s.Qa(),r=s.sl();n<=r;++n){if(i&&i.Tl(e,n))continue;const s=this.GQ(e,n,!1);s&&(s.Kf(t),s.Au()&&this.TQ.Eu(e,n))}if(i)for(let e=i.Za(),n=i.tl();e<=n;++e)for(let n=i.Qa(),r=i.sl();n<=r;++n)s&&s.Tl(e,n)||this.GQ(e,n,!0).wQ(t)}PQ(t,s){let i=this._Q(t.Za());const e=this.CQ(t.Qa()),n=this._Q(t.tl()),r=this.CQ(t.sl());if(isFinite(n)&&isFinite(r))for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.GQ(i,t,!1);e&&e.vQ(s)}}}}{const qS=self._s;qS.YNt=class extends qS.Vn{constructor(t,s,i){super(),this.cQ=t,this.Pa=s,this.Aa=i,this.fQ=qS.Un(qS.Du)}zn(){this.fQ.zn(),this.fQ=null,this.cQ=null}Au(){return this.fQ.Au()}wQ(t){this.fQ.Bu(t)}Kf(t){this.fQ.Eu(t)}vQ(t){qS.Rn(t,this.fQ.Wu())}}}{const XS=self._s,YS=1e-6;XS.KNt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new XS.Rect,this.ZNt=2,this.QNt=null,this.tBt=0,this.sBt=0,this.iBt=0,this.eBt=0,this.nBt=0,this.vt=0,this.rBt=1,this.hBt=0,this.oBt=1,this.aBt=0}lBt(){return this.ZNt<1.000001}Bf(){this.ZNt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.ZNt=2,this.QNt=null,this.tBt=0,this.sBt=0,this.iBt=0,this.eBt=0,this.nBt=0,this.vt=0,this.rBt=1,this.hBt=0,this.oBt=1,this.aBt=0,this}uBt(){if(!1===this.lBt())return;const t=this.dx*this.ZNt,s=this.dy*this.ZNt,i=XS.tr(t,s),e=t/i,n=s/i;this.vt=i-YS,this.eBt=this.x1+e*this.vt,this.nBt=this.y1+n*this.vt,this.tBt=Math.atan2(this.iBt,this.sBt)+Math.PI/2,this.rBt=Math.cos(this.tBt),this.hBt=Math.sin(this.tBt);const r=e*this.rBt+n*this.hBt;if(this.oBt=e-2*this.rBt*r,this.aBt=n-2*this.hBt*r,r>0){const t=Math.PI;this.tBt=XS.Kn(this.tBt+t),this.rBt=-this.rBt,this.hBt=-this.hBt}}cBt(t,s,i,e,n){const r=XS.$r(this.x1,this.y1,this.x2,this.y2,s,i,e,n);r>=0&&r<this.ZNt&&(this.ZNt=r,this.QNt=t.TU(),this.sBt=s-e,this.iBt=i-n)}$Nt(t,s,i,e){const n=s+e.Za(),r=s+e.tl(),h=i+e.Qa(),o=i+e.sl();this.cBt(t,n,h,r,h),this.cBt(t,r,h,r,o),this.cBt(t,r,o,n,o),this.cBt(t,n,o,n,h)}JNt(t,s){const i=s.Nr(),e=s.Br(),n=s.Wr(),r=s.jr(),h=s.Vr(),o=s.Hr(),a=s.Ur(),l=s.zr();this.cBt(t,i,e,n,r),this.cBt(t,n,r,h,o),this.cBt(t,h,o,a,l),this.cBt(t,a,l,i,e)}zNt(t,s,i,e){const n=e.du();for(let e=0,r=n.length;e<r;e+=2){const h=(e+2)%r,o=n[e]+s,a=n[e+1]+i,l=n[h]+s,u=n[h+1]+i;this.cBt(t,o,a,l,u)}}}}{const KS=self._s;KS.CNt=class{constructor(){this.fBt=new Map}zn(){for(const t of this.fBt.values())t.dBt.Pu();this.fBt.clear()}pBt(t){let s=this.fBt.get(t);return void 0===s&&(s={vH:null,dBt:new KS.Cu},this.fBt.set(t,s)),s}bH(t){const s=this.pBt(t);return null===s.vH&&(s.vH=t.CH()),s.vH}sU(t,s,i,e){if(0!==e)return t.sU(s,i,e);const n=this.pBt(t);let r=n.dBt.zs(s,i);return void 0===r&&(r=t.sU(s,i,e),n.dBt.Set(s,i,r)),r}}}{const ZS=self._s,QS=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),tv=new Set(["high","low"]),sv=self.hs,iv=sv.fs,ev=(sv.ys,iv.create()),nv=ZS.Un(ZS.Il),rv=ZS.Un(ZS.Rect);ZS.mBt=class extends ZS.Vn{constructor(t){super(),this.Nc=t,this.gBt=[],this.yBt=!1,this.wBt=null,this.SBt=null,this.vBt=null,this.bBt="high-performance",this.MBt=!1,this.xBt="auto",this.TBt=0,this.GBt=0,this._Bt="",this.CBt=0,this.IBt=0,this.PBt=0,this.ABt=0,this.EBt=0,this.RBt=0,this.nS="normalized",this.FBt=0,this.OBt=1,this.DBt=1e4,this.OS=!0,this.kBt=0,this.RD=0,this.FD=0,this.LBt="letterbox-scale",this.NBt="letterbox-scale",this.BBt=0,this.WBt=0,this.jBt=iv.create(),this.VBt="high",this.HBt=this.VBt,this.UBt=!1,this.zBt=[],this.JBt=new Set,this.$Bt=self.C3_Shaders,this.qBt=ZS.Un(ZS.Lw.kO,{RO:()=>[this.h3(),this.o3()],FO:()=>this.XBt(),OO:t=>this.YBt(t),getTime:()=>this.aW().ON(),DO:()=>this.aW().VB()}),this.KBt=0,this.ZBt=0,this.QBt=NaN,this.tWt=null,this.sWt=new Map,this.iWt=NaN,this.eWt=new Map,this.nWt="",this.rWt=1,this.hWt=ZS.Un(ZS.Rect),this.oWt="",this.aWt=null,this.lWt=null,this.uWt=0,this.cWt=0,this.fWt=-1,this.dWt=0,this.pWt=t=>this.dWt=t.progress,this.mWt=null,this.gWt={yWt:null,wWt:null,SWt:null},this.vWt=0,this.bWt=0,this.MWt=0,this.xWt="fade-in",this.TWt=null,this.GWt=new Promise(t=>this.TWt=t)}_Wt(t){this.bBt=t}CWt(t){this.yBt=!!t}IWt(t){this.nS=t}PWt(){return this.nS}AWt(t){this.FBt=t}EWt(t,s){this.OBt=t,this.DBt=s}RWt(t){this.MBt=!!t}FWt(t){this.xBt=t}async uo(t){let s=t.canvas;this.gBt.push({canvas:s,OWt:null}),this.Nc.YU("runtime","window-resize",t=>this.DWt(t)),this.Nc.YU("runtime","fullscreenchange",t=>this.kWt(t)),this.Nc.YU("runtime","fullscreenerror",t=>this.LWt(t)),s.addEventListener("webglcontextlost",t=>this.NWt(t)),s.addEventListener("webglcontextrestored",t=>this.BWt(t)),this.UBt=!!t.isFullscreen,this._Bt=t.cssDisplayMode;const i=navigator.gpu&&this.yBt;let e=!1;if(i)try{await this.WWt(!0)}catch(t){this.jWt("WebGPU",t),this.SBt=null}if(!this.mM())try{await this.VWt(!0)}catch(t){this.jWt("WebGL",t),this.wBt=null}if(this.mM()||(e=!0),!this.mM()&&i)try{await this.WWt(!1)}catch(t){this.jWt("WebGPU",t),this.SBt=null}if(!this.mM())try{await this.VWt(!1)}catch(t){this.jWt("WebGL",t),this.wBt=null}const n=this.mM();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.Bb(e),this.SBt&&(this.SBt.HWt=()=>this.UWt(),this.SBt.zWt=()=>this.JWt()),"normalized"===this.nS?n.YS():(n.KS(),n.qS(this.FBt)),this.BA(t.windowInnerWidth,t.windowInnerHeight,!0),await this.BLt()}jWt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async WWt(t){const s={Kw:this.OBt,Zw:this.DBt};let i=!0;"no"===this.xBt?i=!1:"auto"===this.xBt&&(i=ZS.Ks.ri);const e={powerPreference:this.bBt,depth:this.Nc.a2(),failIfMajorPerformanceCaveat:t,$Wt:this.Nc.w3(),qWt:this.Nc.XWt(),qE:this.Nc.YWt(),KWt:i};this.SBt=ZS.Un(ZS.Lw.ZWt,s),await this.SBt.UG(this.gBt[0].canvas,e)}async VWt(t){const s={alpha:!0,powerPreference:this.bBt,$E:"xbox-uwp-webview2"!==this.Nc.JW(),depth:this.Nc.a2(),qE:this.Nc.YWt(),failIfMajorPerformanceCaveat:t,Kw:this.OBt,Zw:this.DBt};this.MBt&&(s.XE=1),this.wBt=ZS.Un(ZS.Lw.ZE,this.gBt[0].canvas,s),await this.wBt.NS()}async QWt(){if(this.$Bt){const t=[];for(const[s,i]of Object.entries(this.$Bt)){i.src=i.tjt;const e=ZS.Lw.sjt.dC(this.SBt.KG());t.push(this.SBt.nF(Object.assign({jG:e,name:s},i)))}await Promise.all(t)}}async ijt(){if(this.$Bt){const t=[];for(const[s,i]of Object.entries(this.$Bt)){let e;if(i.ejt&&this.wBt.PT()>=2)i.src=i.ejt,e=ZS.Lw.BG.pC();else{if(!i.njt)throw new Error(`shader '${s}' does not support WebGL 1`);i.src=i.njt,e=ZS.Lw.BG.dC()}t.push(this.wBt.nF(Object.assign({jG:e,name:s},i)))}await Promise.all(t),this.wBt.rF(),this.wBt.lv()}this.wBt.bO()&&(this.tWt=ZS.Un(ZS.Lw.LE,this.wBt))}async BLt(){this.SBt?await this.QWt():this.wBt&&await this.ijt();const t=this.mM();t.Lb(this.OS),t.bO()&&(this.QBt=0);for(const s of this.Nc.rjt()){for(const i of s.CV())i.BLt(t);s.BLt(t),s.S$()}this.vBt=new self.dY(this.Nc,t)}zn(){this.Nc=null,this.wBt=null,this.gBt.length=0}zL(){return this.Nc.zL()}DWt(t){const s=this.Nc;if(s.hjt())return;const i=t.devicePixelRatio;this.zL()&&(self.devicePixelRatio=i),s.ojt(i),this.UBt=!!t.isFullscreen,this._Bt=t.cssDisplayMode,this.BA(t.innerWidth,t.innerHeight),s.VB();const e=new ZS.Event("window-resize");e.data=t,s.wf().If(e);const n=new ZS.Event("resize");n.ajt=this.ej(),n.ljt=this.rj(),n.ujt=this.oj(),n.cjt=this.lj(),s.IZ(n),this.Nc.RB()?.J3(),s.sz()&&(s.byt()||self.iz.fjt())&&s.ck()}kWt(t){this.UBt=!!t.isFullscreen,this.BA(t.innerWidth,t.innerHeight,!0),this.Nc.VB()}LWt(t){this.UBt=!!t.isFullscreen,this.BA(t.innerWidth,t.innerHeight,!0),this.Nc.VB()}BA(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.TBt===t&&this.GBt===s&&!i)return;this.TBt=t,this.GBt=s;const e=this.djt();"letterbox-scale"===e?this.pjt(t,s):"letterbox-integer-scale"===e?this.mjt(t,s):"off"===e?this.gjt(t,s):this.yjt(t,s),this.wjt(e);for(const{canvas:t}of this.gBt)t.width=this.PBt,t.height=this.ABt;this.Nc.jc("canvas","update-size",{marginLeft:this.EBt,marginTop:this.RBt,styleWidth:this.CBt,styleHeight:this.IBt,displayScale:this.SX()});const n=this.mM();n.BA(this.PBt,this.ABt,!0);for(const t of this.zBt)n.mO(t);ZS.Sh(this.zBt),this.Sjt();const r=this.Nc.dB();r.k6(),r.L6()}Sjt(){this.mM().QS(this.jBt,this.h3()/this.o3())}a3(){return this.jBt}pjt(t,s){const i=this.Nc.uj(),e=this.Nc.$L(),n=this.Nc.XL(),r=e/n;if(t/s>r){const i=s*r;this.CBt=Math.round(i),this.IBt=s,this.EBt=Math.floor((t-this.CBt)/2),this.RBt=0}else{const i=t/r;this.CBt=t,this.IBt=Math.round(i),this.EBt=0,this.RBt=Math.floor((s-this.IBt)/2)}this.PBt=Math.round(this.CBt*i),this.ABt=Math.round(this.IBt*i),this.Nc.vjt(e,n)}mjt(t,s){const i=this.Nc.uj();1!==i&&(t+=1,s+=1);const e=this.Nc.$L(),n=this.Nc.XL(),r=e/n;let h;h=t/s>r?s*r*i/e:t/r*i/n,h>1?h=Math.floor(h):h<1&&(h=1/Math.ceil(1/h)),this.PBt=Math.round(e*h),this.ABt=Math.round(n*h),this.CBt=this.PBt/i,this.IBt=this.ABt/i,this.EBt=Math.max(Math.floor((t-this.CBt)/2),0),this.RBt=Math.max(Math.floor((s-this.IBt)/2),0),this.Nc.vjt(e,n)}yjt(t,s){const i=this.Nc.uj();this.CBt=t,this.IBt=s,this.PBt=Math.round(this.CBt*i),this.ABt=Math.round(this.IBt*i),this.EBt=0,this.RBt=0;const e=this.SX();this.Nc.vjt(this.CBt/e,this.IBt/e)}gjt(t,s){const i=this.Nc.uj();this.CBt=this.Nc.K1(),this.IBt=this.Nc.Z1(),this.PBt=Math.round(this.CBt*i),this.ABt=Math.round(this.IBt*i),this.bjt()?(this.EBt=Math.floor((t-this.CBt)/2),this.RBt=Math.floor((s-this.IBt)/2)):(this.EBt=0,this.RBt=0),this.Nc.vjt(this.Nc.K1(),this.Nc.Z1())}wjt(t){if("high"===this.VBt)this.RD=this.PBt,this.FD=this.ABt,this.HBt="high";else{let s,i;if("off"===this.djt()?(s=this.Nc.K1(),i=this.Nc.Z1()):(s=this.Nc.$L(),i=this.Nc.XL()),this.PBt<s||this.ABt<i)this.RD=this.PBt,this.FD=this.ABt,this.HBt="high";else if(this.RD=s,this.FD=i,this.HBt="low","scale-inner"===t){const t=s/i,e=this.TBt/this.GBt;e<t?this.RD=this.FD*e:e>t&&(this.FD=this.RD/e)}else if("scale-outer"===t){const t=s/i,e=this.TBt/this.GBt;e>t?this.RD=this.FD*e:e<t&&(this.FD=this.RD/e)}}}aW(){return this.Nc}Mjt(){return this.gBt[0].canvas}P0(){return this.qBt}bjt(){return this.UBt}xjt(){return this._Bt}Tjt(t){if(!QS.has(t))throw new Error("invalid fullscreen mode");this.LBt=t;const s=this.Nc.dB();s.k6(),s.L6()}yX(){return this.LBt}Gjt(t){if(!QS.has(t))throw new Error("invalid fullscreen mode");this.NBt=t;const s=this.Nc.dB();s.k6(),s.L6()}_jt(){return this.NBt}djt(){return this.bjt()?this._jt():this.yX()}Cjt(t){if(!tv.has(t))throw new Error("invalid fullscreen scaling quality");this.VBt=t,this.Nc.dB().k6()}Ijt(){return this.VBt}S3(){return this.HBt}static Pjt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}nX(){return this.TBt}rX(){return this.GBt}h3(){return this.RD}o3(){return this.FD}Lb(t){this.OS=!!t}Ajt(t){this.kBt=t}rQ(){return this.kBt}Ejt(){return this.mM().pE()}NWt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.zBt=[],this.JBt.clear(),this.qBt.BM(),this.wBt.BM(),this.Nc.M4()}UWt(){console.log("[Construct] WebGPU device lost"),this.zBt=[],this.JBt.clear(),this.qBt.BM(),this.Nc.M4()}async BWt(t){await this.wBt.WM(),await this.BLt(),await this.Nc.Rjt(),console.log("[Construct] WebGL context restored")}async JWt(){await this.BLt(),await this.Nc.Rjt(),console.log("[Construct] WebGPU device restored")}Fjt(){return this.wBt}Ojt(){return this.SBt}mM(){return this.SBt||this.wBt}TB(){return this.vBt}XW(){let t="";return t=this.Nc.Ojt()?"webgpu":"webgl"+this.Nc.Fjt().PT(),this.Nc.mM().Wb()&&(t+="-software"),t}KW(){return this.Nc.Ojt()?this.Nc.Ojt().Djt():this.Nc.Fjt().IO()}lU(){return"low"===this.HBt?1/this.Nc.uj():this.SX()}SX(){const t=this.djt();if("off"===t||"crop"===t)return 1;const s=this.Nc.$L(),i=this.Nc.XL(),e=s/i,n=this.PBt/this.ABt;return"scale-inner"!==t&&n>e||"scale-inner"===t&&n<e?this.IBt/i:this.CBt/s}U3(){return"low"===this.S3()?1:this.SX()}V3(){return"low"===this.S3()?1:this.Nc.uj()}kjt(t,s){this.BBt=t,this.WBt=s}rK(t,s,i,e=!0){s=s||this.RD,i=i||this.FD;const n=s/2+this.BBt,r=i/2+this.WBt;if(e){let e=this.a3();s===this.RD&&i===this.FD||(t.QS(ev,s/i),e=ev),t.oF(e)}const h=t.nv(n,r,t.WS(i),n,r,0,i);t.dF(h)}Ljt(t,s=!0){const i=this.ej(),e=this.rj(),n=i/2,r=e/2;s&&t.oF(this.a3());const h=t.nv(n,r,t.WS(e),n,r,0,e);t.dF(h)}oj(){return this.PBt}lj(){return this.ABt}ej(){return this.CBt}rj(){return this.IBt}QW(){return this.EBt}sj(){return this.RBt}n4(){return this.gBt.length}Njt(){return"undefined"!=typeof OffscreenCanvas&&this.Mjt()instanceof OffscreenCanvas&&("Chromium"!==ZS.Ks.ei||ZS.Ks.ii>=124)}async C4(t,s=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.gBt.length===t)return;const i={count:t,layersDomState:this.Nc.dB().uB()._1().filter(t=>t.TH()).map(t=>t.O2()),immediate:s,marginLeft:this.EBt,marginTop:this.RBt,styleWidth:this.CBt,styleHeight:this.IBt};let e;if(e=this.zL()?await this.Nc.UB("canvas","set-html-layer-count",i):self.c3_runtimeInterface._OnSetHTMLLayerCount(i),t<this.gBt.length)this.gBt.length=t;else for(const t of e.addedCanvases){t.width=this.PBt,t.height=this.ABt;const s=this.Njt()?"bitmaprenderer":"2d",i=t.getContext(s);if(!i)throw new Error(`failed to acquire '${s}' canvas context`);this.gBt.push({canvas:t,OWt:i})}this.Nc.VB()}y6(t){if(t>=this.gBt.length)return;const s=this.Mjt(),i=this.gBt[t].OWt;this.Njt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}v3(t){t.depth=this.Nc.a2();const s=this.zBt,i=s.findIndex(s=>s.FG(t));let e;return-1!==i?(e=s[i],s.splice(i,1)):e=this.mM().uO(t),this.JBt.add(e),e}E0(t){if(!this.JBt.has(t))throw new Error("render target not in use");this.JBt.delete(t),this.zBt.push(t)}XBt(){const t={lT:this.Nc.YL()};return"low"===this.S3()&&(t.width=this.h3(),t.height=this.o3()),this.v3(t)}YBt(t){this.E0(t)}*Bjt(){for(const t of this.Nc.dB().F6())for(const s of t.UV()){const t=this.sWt.get(s);t&&(yield t)}}f3(t){if(!this.mM().bO())return null;let s=this.sWt.get(t);return s||(s={bz:t,name:t.Pc(),Wjt:ZS.Un(ZS.Lw.LE,this.wBt),jjt:0,Vjt:0,Hjt:0},this.sWt.set(t,s)),s.Wjt}Ujt(){const t=this.mM();if(t.bO()&&0===this.ZBt){this.ZBt=t.Db(),this.iWt=NaN;for(const t of this.Bjt())t.jjt=NaN}}zjt(){this.wBt&&this.wBt.bO()&&this.Jjt(),this.SBt&&this.SBt.bO()&&this.$jt()}Jjt(){if(isNaN(this.iWt)&&(this.iWt=this.tWt.UE(this.KBt,this.ZBt),!isNaN(this.iWt))){if(this.Nc.sz())for(const t of this.Bjt())if(t.jjt=t.Wjt.UE(this.KBt,this.ZBt),isNaN(t.jjt))return;if(this.tWt.zE(this.ZBt),this.QBt=Math.min(this.iWt,1),this.Nc.sz()){const t=new Map;for(const s of this.Bjt())s.Wjt.zE(this.ZBt),s.Vjt=Math.min(s.jjt,1),t.set(s.bz,s.Vjt);for(const s of this.Bjt()){const i=s.bz,e=(t.get(i)||0)-i.dH().reduce((s,i)=>s+(t.get(i)||0),0);s.Hjt=ZS.Yn(e,0,1)}const s=this.Nc.uB(),i=this.QBt-s._1().reduce((s,i)=>s+(t.get(i)||0),0);self.iz.qjt(ZS.Yn(i,0,1),this.QBt,[...this.Bjt()])}this.KBt=this.ZBt,this.ZBt=0}}Xjt(){return this.tWt}$jt(){if(0===this.ZBt)return;for(let t=this.KBt;t<this.ZBt;++t){const s=this.eWt.get(t);if(s&&!s._E())return}const t=this.Nc.uB(),s=ZS.Mo(t.Z5()+1,0);let i=0;for(let t=this.KBt;t<this.ZBt;++t){const e=this.eWt.get(t);if(!e)continue;const n=e.CE();let r=BigInt(0),h=BigInt(0);const o=BigInt(0);for(let t=0,i=Math.min(s.length,n.length/2);t<i;++t){const i=n[2*t],e=n[2*t+1];i!==o&&(r===o||i<r)&&(r=i),e>h&&(h=e);const a=Number(e-i)/1e9;s[t]+=a}i+=Number(h-r)/1e9}if(this.QBt=ZS.Yn(i,0,1),this.Nc.sz()){const i=t.UV(),e=new Map;for(let t=0,n=Math.min(i.length,s.length-1);t<n;++t){const n=s[t+1];e.set(i[t],n)}const n=[],r=new Map;for(const[t,s]of e){const i=[...t.mH()].reduce((t,s)=>t+(e.get(s)||0),0);r.set(t,i),n.push({name:t.Pc(),Hjt:ZS.Yn(s,0,1),Vjt:ZS.Yn(i,0,1)})}const h=this.QBt-t._1().reduce((t,s)=>t+(r.get(s)||0),0);self.iz.qjt(ZS.Yn(h,0,1),this.QBt,n)}for(let t=this.KBt;t<this.ZBt;++t)this.eWt.delete(t);this.KBt=this.ZBt,this.ZBt=0}Yjt(t){this.eWt.set(this.SBt.Db(),t)}XN(){return this.QBt}YB(t,s,i,e,n,r){return this.nWt=t,this.rWt=s,this.hWt.Ua(i,e,n,r),this.aWt||(this.aWt=new Promise(t=>{this.lWt=t})),this.aWt}Kjt(){if(!this.nWt)return;let t=this.Mjt();const s=this.hWt,i=ZS.Yn(Math.floor(s.Za()),0,t.width),e=ZS.Yn(Math.floor(s.Qa()),0,t.height);let n=s.width();n=0===n?t.width-i:ZS.Yn(Math.floor(n),0,t.width-i);let r=s.height();if(r=0===r?t.height-e:ZS.Yn(Math.floor(r),0,t.height-e),(0!==i||0!==e||n!==t.width||r!==t.height)&&n>0&&r>0){const s=ZS.uo(n,r);s.getContext("2d").drawImage(t,i,e,n,r,0,0,n,r),t=s}ZS.co(t,this.nWt,this.rWt).then(t=>{this.oWt&&URL.revokeObjectURL(this.oWt),this.oWt=URL.createObjectURL(t),this.aWt=null,this.lWt(t)}),this.nWt="",this.rWt=1}Zjt(){return this.oWt}Qjt(t){t?this.uWt++:this.uWt--}tVt(){return this.uWt>0}sVt(t){const s=this.mM();if(2===t)this.mWt=ZS.Un(ZS.Lw.$b,this.mM()),this.mWt.mA("Arial"),this.mWt.gA(16),this.mWt.AA("center"),this.mWt.RA("center"),this.mWt.BA(300,200);else if(0===t){const t=this.Nc.iVt();t&&t.YY(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.eVt("splash-images/splash-logo.svg").then(t=>{"done"===this.xWt?s.yG(t):this.gWt.yWt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.nVt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.xWt?s.yG(t):this.gWt.wWt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.nVt("splash-images/splash-website-512.png").then(t=>{"done"===this.xWt?s.yG(t):this.gWt.SWt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async eVt(t){t=new URL(t,this.Nc.rVt()).toString();const s=await ZS.eo(t),i=await this.Nc.hVt(s,2048,2048);return await this.mM().lO(i,{dT:"high"})}async nVt(t){t=new URL(t,this.Nc.rVt()).toString();const s=await ZS.eo(t);return await this.mM().lO(s,{dT:"high"})}oVt(){this.Nc.jc("runtime","hide-cordova-splash")}aVt(){this.cWt=Date.now(),this.Nc.wf().addEventListener("loadingprogress",this.pWt),this.fWt=requestAnimationFrame(()=>this.lVt()),3!==this.Nc.uVt()&&this.oVt()}async cVt(){const t=this.mM();this.dWt=1;const s=this.Nc.uVt();4===s&&await this.GWt,this.TWt=null,this.GWt=null,-1!==this.fWt&&(cancelAnimationFrame(this.fWt),this.fWt=-1),this.Nc.wf().removeEventListener("loadingprogress",this.pWt),this.pWt=null,this.mWt&&(this.mWt.zn(),this.mWt=null),this.Nc.fVt(),t.QF(),this.gWt.yWt&&(t.yG(this.gWt.yWt),this.gWt.yWt=null),this.gWt.wWt&&(t.yG(this.gWt.wWt),this.gWt.wWt=null),this.gWt.SWt&&(t.yG(this.gWt.SWt),this.gWt.SWt=null),t.ZF(0,0,0,0),t.Fb(),this.xWt="done",this.KBt=t.Db(),3===s&&this.oVt()}lVt(){if(-1===this.fWt)return;const t=this.mM();t.QF(),this.fWt=-1;const s=this.Nc.CL().CZ(),i=this.Nc.uVt();if(3!==i&&(this.Ljt(t),t.ZF(0,0,0,0),t.bF(),t.lv(),t.xF(null)),0===i)this.dVt(s);else if(1===i)this.pVt(s,120,0);else if(2===i)this.mVt(s);else if(3===i)ZS.mh();else{if(4!==i)throw new Error("invalid loader style");this.gVt(s)}t.Fb(),this.fWt=requestAnimationFrame(()=>this.lVt())}mVt(t){t?this.mWt.PA(1,0,0):this.mWt.PA(.6,.6,.6),this.mWt.Vc(Math.round(100*this.dWt)+"%");const s=this.CBt/2,i=this.IBt/2;nv.Ll(s-150,i-100,s+150,i+100);const e=this.mM();e.xF(this.mWt.xG()),e.tb(nv,this.mWt.gE())}pVt(t,s,i){const e=this.mM();e.mv(),t?e.SF(1,0,0,1):e.SF(.118,.565,1,1);const n=this.CBt/2,r=this.IBt/2,h=s/2;rv.Ua(n-h,r-4+i,Math.floor(s*this.dWt),8),e.Rect(rv),rv.Ua(n-h,r-4+i,s,8),rv.offset(-.5,-.5),rv.cl(.5,.5),e.SF(0,0,0,1),e.rb(rv),rv.cl(1,1),e.SF(1,1,1,1),e.rb(rv)}dVt(t){const s=this.mM(),i=this.Nc.iVt();if(!i)return void this.pVt(t,120,0);const e=i.xG();if(!e)return void this.pVt(t,120,0);const n=e.Vg(),r=e.Zg(),h=this.CBt/2,o=this.IBt/2,a=n/2,l=r/2;nv.Ll(h-a,o-l,h+a,o+l),s.xF(e),s.Il(nv),this.pVt(t,n,l+16)}gVt(t){const s=this.mM(),i=this.gWt.yWt,e=this.gWt.wWt,n=this.gWt.SWt,r=Date.now();0===this.vWt&&(this.cWt=r);const h=this.Nc.yVt()||this.Nc.wVt()&&!this.Nc.SVt(),o=h?0:200,a=h?0:3e3;let l=1;"fade-in"===this.xWt?l=Math.min((r-this.cWt)/300,1):"fade-out"===this.xWt&&(l=Math.max(1-(r-this.MWt)/300,0)),s.mv(),s.SF(.231*l,.251*l,.271*l,l),rv.set(0,0,this.CBt,this.IBt),s.Rect(rv);const u=Math.ceil(this.CBt),c=Math.ceil(this.IBt);let f,d;this.IBt>256?(s.SF(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),rv.Ua(0,.8*c-d/2,f,d),s.Rect(rv),t?s.SF(l,0,0,l):s.SF(.161*l,.953*l,.816*l,l),f=u*this.dWt,rv.Ua(.5*u-f/2,.8*c-d/2,f,d),s.Rect(rv),s.SF(l,l,l,l),s.lv(),e&&(f=1.5*ZS.Yn(.22*c,105,.6*u),d=f/8,rv.Ua(.5*u-f/2,.2*c-d/2,f,d),s.xF(e),s.Rect(rv)),i&&(f=Math.min(.395*c,.95*u),d=f,rv.Ua(.5*u-f/2,.485*c-d/2,f,d),s.xF(i),s.Rect(rv)),n&&(f=1.5*ZS.Yn(.22*c,105,.6*u),d=f/8,rv.Ua(.5*u-f/2,.868*c-d/2,f,d),s.xF(n),s.Rect(rv))):(s.SF(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),rv.Ua(0,.85*c-d/2,f,d),s.Rect(rv),t?s.SF(l,0,0,l):s.SF(.161*l,.953*l,.816*l,l),f=u*this.dWt,rv.Ua(.5*u-f/2,.85*c-d/2,f,d),s.Rect(rv),s.SF(l,l,l,l),s.lv(),i&&(f=.55*c,d=f,rv.Ua(.5*u-f/2,.45*c-d/2,f,d),s.xF(i),s.Rect(rv))),this.vWt++,"fade-in"===this.xWt&&r-this.cWt>=300&&this.vWt>=2&&(this.xWt="wait",this.bWt=r),"wait"===this.xWt&&r-this.bWt>=a&&this.dWt>=1&&(this.xWt="fade-out",this.MWt=r),("fade-out"===this.xWt&&r-this.MWt>=300+o||h&&this.dWt>=1&&r-this.cWt<500)&&this.TWt()}}}{const hv=self._s,ov=self.iz,av=(self.assert,self.EX),lv={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let uv=!0;hv.vVt=class extends hv.Vn{constructor(t){t=Object.assign({},lv,t),super(),this.bVt=t.messagePort,this.MVt=t.runtimeBaseUrl,this.xVt=t.previewUrl,this.TVt=!!t.headless,this.GVt=!!t.hasDom,this._Vt=!!t.isInWorker,uv=t.ife,this.CVt=!!t.useAudio,this.IVt=t.exportType,this.PVt=t.isNWjs,this._K=!!t.isiOSCordova,this.AVt=!!t.isiOSWebView,this.EVt=!!t.isWindowsWebView2,this.RVt=!!t.isAnyWebView2Wrapper,this.FVt=!!t.isFBInstantAvailable,this.OVt=!("preview"!==this.IVt||!t.isDebug),this.DVt=this.OVt,this.kVt=this.OVt,this.LVt=0,this.NVt=[],this.BVt=[],this.WVt=!1,this.jVt="",this.VVt="",this.HVt="",this.UVt="",this.zVt=0,this.JVt=0,this.$Vt=0,this.jD=self.devicePixelRatio,this.qVt=0,this.XVt=0,this.YVt=0,this.KVt=0,this.ZVt=0,this.QVt=!1,this.ww=!0,this.tHt=!1,this.sHt=!1,this.iHt=!1,this.eHt=null,this.zZ=hv.Un(hv.MK,this,t),this.a5=hv.Un(hv.G6,this),this.zpt=hv.Un(hv.Vmt,this),this.nHt=hv.Un(hv.mj,this,t.wrapperComponentIds),this.rHt=hv.Un(hv.rNt,this),this.stt=hv.Un(hv.N6,this),this.hHt=hv.Un(hv.cct,this),this.oHt=hv.Un(hv.dct,this),this.Cct=hv.Un(hv.bct,this),this.dw=hv.Un(hv.tw,{ew:t=>this.aHt(t),hw:t=>this.lHt(t)}),this.uHt=new Map,this.cHt=[],this.fHt=new Map,this.dHt=new Map,this.pHt=0,this.mHt=[],this.gHt=new Set,this.yHt=[],this.wHt=[],this.SHt=new Map,this.vHt=!1,this.bHt=!1,this.MHt=0,this.xHt=0,this.THt=new Map,this.GHt=new Set,this._Ht=new Set,this.CHt=[],this.IHt=[],this.PHt=null,this.AHt=!1,this.EHt="vsync",this.bT="trilinear",this.RHt=!1,this.FHt=!0,this.OHt=!1,this.DHt=!1,this.kHt=null,this.LHt={NHt:t=>{this.fWt=-1,this.BHt=-1,this.u7(t)},WHt:t=>{this.BHt=-1,this.u7(t,!1,"skip-render")},jHt:()=>{this.fWt=-1,this.ck()}},this.fWt=-1,this.BHt=-1,this.VHt=0,this.HHt=0,this.UHt=!1,this.zHt=!1,this.JHt=!1,this.$Ht=!0,this.qHt=!0,this.XHt=!1,this.YHt=0,this.KHt=new hv.Ud(1),this.ZHt=()=>Math.random(),this.QHt=0,this.tUt=0,this.sUt=0,this.iUt=0,this.eUt=0,this.EFt=1,this.nUt=1/30,this.rUt=0,this.hUt=hv.Un(hv.Qf),this.oUt=hv.Un(hv.Qf),this.aUt=hv.Un(hv.Qf),this.lUt=new Map,this.uUt=-1,this.cUt=0,this.fUt=0,this.dUt=-1,this.pUt=0,this.mUt=0,this.gUt=0,this.yUt=!1,this.wUt="",this.SUt=!1,this.vUt="",this.uz=null,this.bUt="",this.MUt=null,this.xUt=null,this.OEt=hv.Un(hv.Event.wf),this.TUt=new Map,this.GUt=new Map,this._Ut=0,this.CUt=!1,this.IUt=!1,this.PUt=!1,this.AUt=[],this.EUt={pretick:hv.Un(hv.Event,"pretick",!1),tick:hv.Un(hv.Event,"tick",!1),tick2:hv.Un(hv.Event,"tick2",!1),instancecreate:hv.Un(hv.Event,"instancecreate",!1),instancedestroy:hv.Un(hv.Event,"instancedestroy",!1),beforelayoutchange:hv.Un(hv.Event,"beforelayoutchange",!1),layoutchange:hv.Un(hv.Event,"layoutchange",!1)},this.EUt.instancecreate.f$=null,this.EUt.instancedestroy.f$=null,this.j0=hv.Un(hv.Event.wf),this.RUt=null;const s=(t,s)=>hv.PFt._Lt(this,t,s);this.FUt=hv.Un(hv.ld,s),this.OUt=hv.Un(hv.ld,s),this.DUt=hv.Un(hv.ld,s),this.kUt=hv.Un(hv.LUt,this,t.jobScheduler),t.canvas&&(this.PHt=hv.Un(hv.mBt,this)),this.bVt.onmessage=t=>this._OnMessageFromDOM(t.data),this.YU("runtime","visibilitychange",t=>this.NUt(t)),this.YU("runtime","wrapper-extension-message",t=>this.BUt(t)),this.YU("runtime","get-remote-preview-status-info",()=>this.WUt()),this.YU("runtime","js-invoke-function",t=>this.ggt(t)),this.YU("runtime","go-to-last-error-script",self.goToLastErrorScript),this.YU("runtime","offline-audio-render-completed",t=>this.jUt(t)),this.OEt.addEventListener("window-blur",t=>this.VUt(t)),this.OEt.addEventListener("window-focus",()=>this.HUt()),this.stt.w8(),this.oHt.w8(),this.UUt=null,this.zUt=new WeakMap,this.JUt={keyboard:null,bB:null,MB:null,xB:null},this.$Ut=new WeakMap,this.qUt=[]}static UG(t){return hv.Un(hv.vVt,t)}zn(){hv.Sh(this.cHt),this.fHt.clear(),this.dHt.clear(),this.a5.zn(),this.a5=null,this.zpt.zn(),this.zpt=null,this.nHt.zn(),this.nHt=null,this.zZ.zn(),this.zZ=null,this.rHt.zn(),this.rHt=null,this.stt.zn(),this.stt=null,this.hHt.zn(),this.hHt=null,this.oHt.zn(),this.oHt=null,this.Cct.zn(),this.Cct=null,this.dw.zn(),this.dw=null,this.PHt&&(this.PHt.zn(),this.PHt=null),this.OEt.zn(),this.OEt=null,this.XUt=null}_OnMessageFromDOM(t){const s=t.type;if("event"===s)this.YUt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.KUt(t)}}YUt(t){if(!this.PUt)return void this.AUt.push(t);const s=t.component,i=t.handler,e=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const t=new hv.Event(i);t.data=e,this.OEt.If(t)}if(h){const t=new hv.Event(i,!0);for(const[s,i]of Object.entries(e))t[s]=i;this.IZ(t)}}const a=this.TUt.get(s);if(!a)return void(r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`));const l=a.get(i);if(!l)return void(r||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`));let u=null;try{u=l(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.ZUt(o,!1,""+t))}null!==o&&(u&&u.then?u.then(t=>this.ZUt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.ZUt(o,!1,""+t)}):this.ZUt(o,!0,u))}ZUt(t,s,i){this.bVt.postMessage({type:"result",responseId:t,isOk:s,result:i})}KUt(t){const s=t.responseId,i=t.isOk,e=t.result,n=this.GUt.get(s);i?n.resolve(e):n.reject(e),this.GUt.delete(s)}YU(t,s,i){let e=this.TUt.get(t);if(e||(e=new Map,this.TUt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}jc(t,s,i,e){this.bVt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}UB(t,s,i,e){const n=this._Ut++,r=new Promise((t,s)=>{this.GUt.set(n,{resolve:t,reject:s})});return this.bVt.postMessage({type:"event",component:t,handler:s,data:i,responseId:n},e),r}VX(t,s,i,e=-1){this.jc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}HX(t,s,i){const e=this._Ut++,n=new Promise((t,s)=>{this.GUt.set(e,{resolve:t,reject:s})});return this.VX(t,s,i,e),n}BUt(t){if(-1!==t.asyncId){const s=t.asyncId;this.GUt.get(s).resolve(t.params),this.GUt.delete(s)}else this.YUt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}pz(t,s,i){this.YU("wrapper-extension:"+t,s,i)}fz(t){return this.nHt.fz(t)}QUt(t){if(!this.sz())throw new Error("not in debug mode");this.jc("runtime","post-to-debugger",t)}async OFt(t){hv.nGt(this),this.sz()?await ov.OFt(this):self.iz&&self.iz.tzt(this);const s=await this.zZ.io("data.json");if(await this.szt(s),await this.izt(t),this.yVt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.Fjt()){const t=this.Fjt();console.info(`[C3 runtime] Hosted in ${this.zL()?"worker":"DOM"}, rendering with WebGL ${t.PT()} [${t.IO()}]`)}else this.Ojt()&&console.info(`[C3 runtime] Hosted in ${this.zL()?"worker":"DOM"}, rendering with WebGPU [${this.Ojt().Djt()}]`);this.mM().Wb()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.PUt=!0;for(const t of this.AUt)this.YUt(t);hv.Sh(this.AUt),this.PHt&&this.PHt.aVt();for(const s of t.runOnStartupFunctions)this.NVt.push(this.ezt(s));if(await Promise.all([this.zZ.GZ(),...this.NVt]),hv.Sh(this.NVt),!this.zZ.CZ())return this.PHt&&await this.PHt.cVt(),await this.OEt._f(new hv.Event("beforeruntimestart")),await this.QF(),this.bVt.postMessage({type:"runtime-ready"}),this;this.PHt&&this.PHt.oVt()}async ezt(t){try{await t(this.UUt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async szt(t){const s=t.project;this.jVt=s[0],this.VVt=s[16],this.HVt=s[31],this.UVt=s[38],this.zVt=s[36];const i=s[39]||"loading-logo.png";this.RHt=!!s[9],this.JVt=this.YVt=s[10],this.$Vt=this.KVt=s[11],this.rHt.XNt(this.JVt,this.$Vt),this.qVt=this.JVt/2,this.XVt=this.$Vt/2,this.EHt=s[37],this.AHt=!!s[40],this.bT=s[14],this.tHt=s[15],this.sHt=s[42],this.iHt=s[17],this.QVt=!!s[18],this.ZVt=s[19],this.xHt=s[21],this.OHt=s[22];const e=this.zZ;if(e.QK(s[45]),e.DZ(s[7],s[25]),e.sZ(s[8]),e.iZ(s[32]),e.nZ(s[28]),e.EZ(s[29]),0===this.ZVt){let t="";t="flat"===e.gW()?e.rZ()+i:i,t&&(this.eHt=e.gZ({url:t}))}this.PHt&&(this.PHt.Tjt(hv.mBt.Pjt(s[12])),this.PHt.Cjt(s[23]?"high":"low"),this.PHt.Lb(0!==s[24]),this.PHt._Wt(s[34]),this.PHt.Ajt(s[41]),this.PHt.CWt(s[13]),this.PHt.IWt(s[30]),this.PHt.EWt(s[46],s[47]),this.PHt.AWt(s[26]),this.PHt.RWt(s[48]),this.PHt.FWt(s[50]));const n=s[43];n&&await this.nzt(n),this.rzt(),this.nHt.SAt(),this.CHt=self.hzt();const r=s[2];for(const t of r[1])this.nHt.vAt(t);for(const t of r[0])this.nHt.wAt(t);this.CHt=self.hzt(),this.ozt(),this.nHt._At();for(const t of s[3]){const s=hv.wct.UG(this,this.cHt.length,t);this.cHt.push(s),this.fHt.set(s.Pc().toLowerCase(),s),this.dHt.set(s.C1(),s)}for(const t of s[4])this.cHt[t[0]].wRt(t);for(const t of s[27]){const s=t.map(t=>this.cHt[t]);this.mHt.push(hv.Un(hv.wFt,this,s))}this.azt();for(const t of this.cHt)t.vRt();for(const t of s[5])this.a5.UG(t);const h=s[1];if(h){const t=this.a5.I6(h);t&&this.a5._6(t)}for(const t of s[35])this.hHt.UG(t);for(const t of s[33])this.stt.UG(t);for(const t of s[44])this.oHt.UG(t);this.oHt.gct()||(this.oHt.zn(),this.oHt=null);for(const t of s[49])this.Cct.UG(t);this.Cct.Gct()||(this.Cct.zn(),this.Cct=null);for(const t of s[6])this.zpt.UG(t);this.zpt.Sgt(),this.lzt(),hv.Sh(this.CHt),this.pV();let o="any";const a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.jc("runtime","set-target-orientation",{targetOrientation:o})}async nzt(t){const s=t.format;"image-sequence"===s?this.kHt=new self.uzt(this,t):"image-sequence-gif"===s?this.kHt=new self.czt(this,t):"webm"===s?this.kHt=new self.fzt(this,t):"mp4"===s&&(this.kHt=new self.dzt(this,t)),this.EHt="unlimited-frame",this.PHt.Tjt("off"),this.jD=1,self.devicePixelRatio=1,await this.UB("runtime","set-exporting-to-video",{message:this.kHt.pzt(0),duration:this.kHt.j$()})}uVt(){return this.ZVt}hjt(){return null!==this.kHt}mzt(){return this.kHt.j$()}gzt(){return this.kHt.yzt()}wzt(){return this.kHt.OFt({width:this.PHt.oj(),height:this.PHt.lj()})}Szt(){const t=this.VHt/this.gzt();return this.kHt.vzt(this.PHt.Mjt(),t)}bzt(){this.kHt&&this.kHt.Net()}jUt(t){this.kHt.Mzt(t)}xzt(){return this.kHt.Fb()}wVt(){return this.FVt}Tw(){return this.ww}qB(t){this.NVt.push(t)}P4(t){this.WVt=!!t}Tzt(t){this.WVt&&this.BVt.push(t)}D4(){return this.BVt}cRt(){return this.pHt++}MRt(){return this.pHt}DLt(t){this.gHt.add(t)}kLt(t){this.gHt.delete(t)}rjt(){return this.gHt}async izt(t){this.PHt&&(await this.PHt.uo(t),this.PHt.sVt(this.ZVt))}async QF(){this.UHt=!0,this.QHt=Date.now();let t=null;const s=new Promise(s=>t=s);if(this.QVt){for(const t of this.cHt)t.S1()||t.ERt()||!t.bj()||t.SIt();(async()=>{await this.zZ.GZ(),await s,this.ww=!1,this.Gzt()})()}else this.ww=!1;this.zZ._Z(),this.sz()&&ov._zt(uv);for(const t of this.a5.gB())t.K4();this.hjt()&&await this.wzt();const i=this.a5.C6();await i.f4(null,this.mM()),await i.x4(!0),this.cUt=performance.now(),t(),this.QVt||this.Gzt(),(await this.UB("runtime","before-start-ticking")).isSuspended&&!this.hjt()?(this.YHt++,this.XHt=!0):this.u7()}Gzt(){this.$U(hv.sW.tW.QB.Czt,null,null),this.jc("runtime","register-sw")}Mbt(t){t=Math.floor(t);const s=this.CHt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}ozt(){for(const t of self.Izt){const s=hv.Bh(Object.keys(t));this.IHt.push(s)}}Hgt(t){t=Math.floor(t);const s=this.IHt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}Pzt(){return this.GVt}Azt(){return this.TVt}zL(){return this._Vt}rVt(){return this.MVt}Ezt(){return this.xVt}oN(){return this.zpt}vN(){return this.zpt.vN()}Fgt(){return this.zpt.Fgt()}dN(){return this.zpt.dN()}Ogt(){return this.zpt.Ogt()}iGt(){return 0===this.Fgt().umt()}kgt(){return this.zpt.kgt()}TLt(){return this.nHt}AZ(){return this.nHt.AZ()}$0(t){if((t=Math.floor(t))<0||t>=this.cHt.length)throw new RangeError("invalid index");return this.cHt[t]}Rzt(t){return this.fHt.get(t.toLowerCase())||null}ZX(t){return this.dHt.get(t)||null}ght(t){const s=hv.mj.kj(t);return s?s.Wj():null}w1(){return this.cHt}*Fzt(){for(const t of this.cHt)t.S1()||(yield*t.$j())}wf(){return this.OEt}eN(){return this.j0}IZ(t){t.runtime=this.gj();const s=this.sz()&&!this.zpt.fV();s&&ov.b6(),this.j0.dispatchEvent(t),s&&ov.M6()}H4(t){return t.runtime=this.gj(),this.j0._f(t)}$L(){return this.JVt}XL(){return this.$Vt}Ozt(t,s){if(this.JVt===t&&this.$Vt===s)return;this.JVt=t,this.$Vt=s;const i=this.dB();i.k6(),i.L6()}K1(){return this.YVt}Z1(){return this.KVt}vjt(t,s){if(this.YVt===t&&this.KVt===s)return;this.YVt=t,this.KVt=s;const i=this.dB();i.k6(),i.L6()}ojt(t){this.hjt()||(this.jD=t)}uj(){return this.jD}Q2(){return this.qVt}t3(){return this.XVt}GB(){return this.PHt}h3(){return this.PHt?this.PHt.h3():this.YVt}o3(){return this.PHt?this.PHt.o3():this.KVt}lU(){return this.PHt?this.PHt.lU():1}SX(){return this.PHt?this.PHt.SX():1}U3(){return this.PHt?this.PHt.U3():1}V3(){return this.PHt?this.PHt.V3():1}QW(){return this.PHt?this.PHt.QW():0}sj(){return this.PHt?this.PHt.sj():0}Dzt(){return this.PHt?this.PHt.ej():0}kzt(){return this.PHt?this.PHt.rj():0}yX(){return this.PHt?this.PHt.yX():"off"}v3(t){return this.PHt?this.PHt.v3(t):null}E0(t){this.PHt&&this.PHt.E0(t)}w3(){return this.tHt}XWt(){return this.sHt}YWt(){return this.iHt}XN(){return this.PHt?this.PHt.XN():NaN}GG(){return"nearest"!==this.YL()}KN(){return this.EHt}ZN(t){this.EHt!==t&&(this.EHt=t,-1===this.fWt&&-1===this.BHt||(this.Lzt(),this.Nzt()))}YL(){return this.bT}mRt(){return this.QVt}iVt(){return this.eHt}fVt(){this.eHt&&(this.eHt.oA(),this.eHt.zn(),this.eHt=null)}dB(){return this.a5}uB(){return this.a5.uB()}Vtt(){return this.stt}Bzt(){return this.hHt}uOt(){return this.oHt}qct(){return this.Cct}CL(){return this.zZ}gZ(t){return this.zZ.gZ(t)}aV(t,s,i,e,n,r){if(r&&this.oHt){if(t instanceof hv.wct&&t.S1()){const h=t.MV(),o=Math.floor(this.lB()*h.length);return this.aV(h[o],s,i,e,n,r)}const h=this.oHt.yct(t,r);if(h){const t=this.i1(h,s,!1,i,e,!1,n,void 0,n);return this.oHt.Sct(t,r),t}}return this.i1(t,s,!1,i,e,!1,n,void 0,n)}i1(t,s,i,e,n,r,h,o,a){let l=null,u=null;if(t instanceof hv.wct){if(u=t,u.S1()){const t=u.MV();u=t[Math.floor(this.lB()*t.length)]}l=u.X0()}else l=t,u=this.$0(l[1]);const c=u.zj().bj();if(this.ww&&c&&!u.ERt())return null;const f=s;let d;c||(s=null),d=i&&!r&&l&&!this.THt.has(l[2])?l[2]:this.xHt++;const p=l?l[0]:null,m=hv.Un(hv.Instance,{runtime:this,objectType:u,bz:s,FFt:p,LFt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.THt.set(d,m);let g=null;if(c&&(g=m.DB(),void 0!==e&&void 0!==n&&(g.XM(e),g.ZM(n)),u.nFt(!0)),s&&(a||s.e1(m,!0),s.pB().m4(u)),this.MHt++,u.MU()&&!i&&!r){const t=new Set;for(const s of u.u4().xV()){if(s===u)continue;const i=this.Wzt(s,g,t);if(i){const t=this.i1(i,f,!1,g?g.qM():e,g?g.KM():n,!0,!1,void 0,a);m.X4(t)}else{const t=this.i1(s,f,!1,g?g.qM():e,g?g.KM():n,!0,!1,void 0,a);m.X4(t)}}for(const t of m.xU()){t.X4(m);for(const s of m.xU())t!==s&&t.X4(s)}}if(c&&!i&&h&&this.jzt(m,p,g,s,e,n,a),u.MU()&&!i&&!r&&h)for(const t of m.xU()){const i=t.DB();if(!i)continue;const e=t.zj(),n=t.cU().X0()[0];e.bj()?this.jzt(t,n,i,s,i.qM(),i.KM(),a):this.jzt(t,n,i,s,void 0,void 0,a)}if(!r&&h){void 0===e&&(e=p[0]),void 0===n&&(n=p[1]);const t=g.oJ(),s=e-g.qM()+t.qM(),i=n-g.KM()+t.KM();t.xz(s,i)}u.QRt();const y=l?hv.Rh(l[5]):null,w=l?l[4].map(t=>hv.Rh(t)):null,S=c&&p&&p[13];if(S&&m.HFt(),m.PRt(y,w),S){const t=p[13];m.s$().kIt(t[2],t[0],t[1])}this.wHt.push(m),this.vHt=!0,this.sz()&&ov.Vzt(m);const v=this.EUt.instancecreate;return v.f$=m,this.OEt.dispatchEvent(v),m}yDt(t){const s=t[0],i=t[1],e=t[2],n=t[6];return n||this.a5.P6(s).kB(i).Z0(e)}Wzt(t,s,i){const e=s?.lOt()??[];for(const s of e){const e=this.yDt(s),n=!!s[4],r=this.$0(e[1]);if(!i.has(e)&&t===r&&n)return i.add(e),e}}jzt(t,s,i,e,n,r,h){const o=i.Wkt(),a=i.lOt();if(t.DB().jkt(o),!a)return;void 0===n&&(n=s[0]),void 0===r&&(r=s[1]);const l=new Set,u=s[0],c=s[1];for(const s of a){const i=s[0],o=s[1],a=s[2],f=s[3],d=!!s[4],p=s[5],m=s[6];let g;g=m||this.a5.P6(i).kB(o).Z0(a);const y=this.$0(g[1]),w=t.fOt(y),S=l.has(y);if(w&&!S&&d){const s=t.dOt(y);s.DB().OFt(g[0]);const i=n+g[0][0]-u,e=r+g[0][1]-c;s.DB().xz(i,e),s.DB().jkt(p),t.mJ(s,{vJ:!!(1&f),MJ:!!(f>>1&1),TJ:!!(f>>2&1),_J:!!(f>>3&1),IJ:!!(f>>4&1),kJ:!!(f>>5&1),AJ:!!(f>>6&1),RJ:!!(f>>7&1),OJ:!!(f>>8&1)}),l.add(y)}else{const s=n+g[0][0]-u,i=r+g[0][1]-c,o=this.i1(g,e,!1,s,i,!1,!0,t,h);o.DB().jkt(p),t.mJ(o,{vJ:!!(1&f),MJ:!!(f>>1&1),TJ:!!(f>>2&1),_J:!!(f>>3&1),IJ:!!(f>>4&1),kJ:!!(f>>5&1),AJ:!!(f>>6&1),RJ:!!(f>>7&1),OJ:!!(f>>8&1)})}}}yU(t){if(this.GHt.has(t))return;const s=t.cU();let i=this.SHt.get(s);if(i){if(i.has(t))return;i.add(t)}else i=new Set,i.add(t),this.SHt.set(s,i);if(this.sz()&&ov.Hzt(t),t.zFt(),this.vHt=!0,t.MU())for(const s of t.xU())this.yU(s);for(const s of t.children())s.LJ()&&this.yU(s);if(!this.a5.dV()&&!this.yUt){const s=this.oN();s.uV(!0),t.GOt(),s.uV(!1)}t._Ot(this.a5.dV())}pV(){this.vHt&&(this.bHt=!0,this.Uzt(),this.zzt(),this.bHt=!1,this.vHt=!1,this.VB())}Uzt(){for(const t of this.wHt){const s=t.cU();s.e1(t);for(const i of s.gV())i.e1(t),i.QRt()}hv.Sh(this.wHt)}zzt(){this.OEt.cf(!0);for(const[t,s]of this.SHt.entries())this.Jzt(t,s),s.clear();this.SHt.clear(),this.OEt.cf(!1)}Jzt(t,s){for(const t of s){const s=this.EUt.instancedestroy;s.f$=t,this.OEt.dispatchEvent(s),this.THt.delete(t.TU()),this.lUt.delete(t);const i=t.DB();i&&(i.zkt(),i.a1(),i.zFt()),this.GHt.add(t),this.MHt--}hv.Ph(t.iV(),s),t.QRt(),this._Ht.add(t);for(const i of t.gV())hv.Ph(i.iV(),s),i.QRt(),this._Ht.add(i);if(t.zj().bj()){const t=new Set([...s].map(t=>t.DB().kB()));for(const i of t)i.C2(s)}}sFt(){return this.wHt}*o_t(t){for(const s of this.sFt())t.S1()?s.cU().eGt(t)&&(yield s):s.cU()===t&&(yield s)}IRt(){return this.xHt++}ARt(t,s){this.THt.set(t,s)}$X(t){t=!!t,this.qHt!==t&&(this.qHt=!!t,this.qHt&&this.XHt&&(this.YX(!1),this.XHt=!1))}qX(){return this.qHt}M4(){this.OEt.dispatchEvent(hv.Un(hv.Event,"renderercontextlost")),this.YX(!0);for(const t of this.cHt)!t.S1()&&t.RRt()&&t.v4();const t=this.uB();t&&t.M4(),hv.PAt.nQ(),hv.SZ.nQ()}async Rjt(){await this.uB().f4(null,this.mM()),this.OEt.dispatchEvent(hv.Un(hv.Event,"renderercontextrestored")),this.YX(!1),this.VB()}NUt(t){if(!this.qHt)return;const s=t.hidden;this.YX(s),this.XHt=s,s||this.VB()}VUt(t){this.yVt()&&this.OHt&&!hv.Ks.hi&&(t.data.parentHasFocus||(this.YX(!0),this.DHt=!0))}HUt(){this.DHt&&(this.YX(!1),this.DHt=!1)}Nzt(){const t=this.LHt;"vsync"===this.EHt?-1===this.fWt&&(this.fWt=self.requestAnimationFrame(t.NHt)):"unlimited-tick"===this.EHt?(-1===this.BHt&&(this.BHt=hv.Uh(t.WHt)),-1===this.fWt&&(this.fWt=self.requestAnimationFrame(t.jHt))):-1===this.BHt&&(this.BHt=hv.Uh(t.NHt))}Lzt(){-1!==this.fWt&&(self.cancelAnimationFrame(this.fWt),this.fWt=-1),-1!==this.BHt&&(hv.zh(this.BHt),this.BHt=-1)}IN(){return this.YHt>0}YX(t){if(this.hjt())return;const s=this.IN();this.YHt+=t?1:-1,this.YHt<0&&(this.YHt=0);const i=this.IN();if(!s&&i)console.log("[Construct] Suspending"),this.Lzt(),this.OEt.dispatchEvent(hv.Un(hv.Event,"suspend")),this.IZ(hv.Un(hv.Event,"suspend")),this.$U(hv.sW.tW.QB.$zt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const t=performance.now();this.tUt=t,this.cUt=t,this.uUt=0,this.fUt=0,this.dUt=0,this.pUt=0,this.gUt=0,this.mUt=0,this.OEt.dispatchEvent(hv.Un(hv.Event,"resume")),this.IZ(hv.Un(hv.Event,"resume")),this.$U(hv.sW.tW.QB.qzt,null,null),this.byt()||this.u7(t)}}OX(t){this.FUt.Bu(t)}NX(t){this.OUt.Bu(t)}kX(t){this.DUt.Bu(t)}DX(t){this.FUt.Kf(t)}BX(t){this.OUt.Kf(t)}LX(t){this.DUt.Kf(t)}Xzt(t,s){const i=s?performance.now():0;let e;return t instanceof av?(e=t.ez(),s&&ov.Yzt(t.behavior,performance.now()-i)):(e=t.u7(),s&&ov.Yzt(t.a$(),performance.now()-i)),e}Kzt(){const t=this.sz();this.FUt.Vd(!0);for(const s of this.FUt)this.Xzt(s,t);this.FUt.Vd(!1)}Zzt(t,s){const i=s?performance.now():0;let e;return t instanceof av?(e=t.jX(),s&&ov.Yzt(t.behavior,performance.now()-i)):(e=t.oAt(),s&&ov.Yzt(t.a$(),performance.now()-i)),e}Qzt(){const t=this.sz();this.OUt.Vd(!0);for(const s of this.OUt)this.Zzt(s,t);this.OUt.Vd(!1)}tJt(t,s){const i=s?performance.now():0;let e;return t instanceof av?(e=t.hz(),s&&ov.Yzt(t.behavior,performance.now()-i)):(e=t.ePt(),s&&ov.Yzt(t.a$(),performance.now()-i)),e}sJt(){const t=this.sz();this.DUt.Vd(!0);for(const s of this.DUt)this.tJt(s,t);this.DUt.Vd(!1)}*iJt(){const t=this.sz();this.FUt.Vd(!0);for(const s of this.FUt){const i=this.Xzt(s,t);hv.bo(i)&&(yield*i)}this.FUt.Vd(!1)}*eJt(){const t=this.sz();this.OUt.Vd(!0);for(const s of this.OUt){const i=this.Zzt(s,t);hv.bo(i)&&(yield*i)}this.OUt.Vd(!1)}*nJt(){const t=this.sz();this.DUt.Vd(!0);for(const s of this.DUt){const i=this.tJt(s,t);hv.bo(i)&&(yield*i)}this.DUt.Vd(!1)}async u7(t,s,i){this.JHt=!0;const e="background-wake"===i,n="background-wake"!==i&&"skip-render"!==i,r=this.dB(),h=this.GB();if(!this.UHt||this.IN()&&!s&&!e)return;const o=performance.now();this.zHt=!0,this.rJt(t||0),this.dUt++,this.hJt();const a=this.oJt();this.i_t()&&await a;const l=this.OEt.Cf(this.EUt.pretick);l instanceof Promise&&await l,this.IZ(this.RUt.pretick);const u=this.aJt();this.i_t()&&await u,this.lJt()&&await this.uJt(),r.wB()&&await this.cJt();const c=this.fJt();this.i_t()&&await c;const f=r.uB(),d=f.r4();let p=!1;if(-1!==d&&(f.h4(),h.n4()!==d)){const t=this.GB().C4(d);this.zL()&&(p=!0,await t)}this.jc("canvas","update-html-layer-dom-state",{layersDomState:f._1().filter(t=>t.TH()).map(t=>t.O2())}),n&&this.ck(),p&&this.jc("canvas","cleanup-html-layers"),this.hjt()&&(await this.Szt(),this.ON()>=this.mzt())?this.xzt():(this.IN()||e||this.Nzt(),this.VHt++,this.HHt++,this.zHt=!1,this.mUt+=performance.now()-o)}async oJt(){const t=this.zpt,s=this.sz();this.pV(),t.uV(!0),this.lyt(this.uB()),s&&ov.dJt(),this.i_t()?await t.Vyt():t.Lyt(),s&&ov.pJt(),this.uyt(),t.uV(!1),this.pV(),t.uV(!0)}async aJt(){const t=this.zpt,s=this.sz(),i=this.i_t(),e=this.OEt,n=this.EUt,r=this.RUt;s&&ov.dJt(),i?await this.mJt(this.iJt()):this.Kzt(),i?await this.mJt(this.eJt()):this.Qzt(),s&&ov.gJt(),s&&ov.dJt(),i?await this.yJt(n.tick):e.dispatchEvent(n.tick),s&&ov.wJt(),t.uV(!1),this.IZ(r.tick)}async fJt(){const t=this.zpt,s=this.OEt,i=this.EUt,e=this.RUt,n=this.sz(),r=this.i_t();n&&ov.dJt(),r?await t.cyt(this.a5):t.ayt(this.a5),n&&ov.pJt(),this.rHt.wNt(),this.hJt(),this.$Ht=!1,t.uV(!0),n&&ov.dJt(),r?await this.mJt(this.nJt()):this.sJt(),n&&ov.gJt(),n&&ov.dJt(),r?await this.yJt(i.tick2):s.dispatchEvent(i.tick2),n&&ov.wJt(),t.uV(!1),this.IZ(e.tick2),r&&await t.Myt(),this.pV(),this.hJt()}hJt(){if(0===this.GHt.size)return;const t=this.OEt;t.cf(!0);for(const t of this._Ht)t.Eyt().bpt(this.GHt);this._Ht.clear(),this.zpt.Uyt(this.GHt);for(const t of this.GHt)t.zn();this.GHt.clear(),t.cf(!1)}async cJt(){const t=this.dB();let s=0;for(;t.wB()&&s++<10;)await this.SJt(t.D6())}rJt(t){let s=0;this.hjt()?(s=1/this.gzt(),this.sUt=s,this.iUt=s):0!==this.tUt&&(s=Math.max(t-this.tUt,0)/1e3,s>.5&&(s=0),this.sUt=s,this.iUt=hv.Yn(s,this.rUt,this.nUt)),this.tUt=t,this.eUt=this.iUt*this.EFt,this.hUt.Bu(this.eUt),this.oUt.Bu(s*this.EFt),this.aUt.Bu(this.iUt);for(const[t,s]of this.lUt)s.Bu(this.iUt*t.WN());this.PHt&&this.PHt.zjt(),t-this.cUt>=1e3&&(this.cUt+=1e3,t-this.cUt>=1e3&&(this.cUt=t),this.fUt=this.uUt,this.uUt=0,this.pUt=this.dUt,this.dUt=0,this.gUt=Math.min(this.mUt/1e3,1),this.mUt=0,this.PHt&&this.PHt.Ujt(),this.rHt.pNt(),this.sz()&&ov.vJt())}jFt(t,s){if(s){if(!this.lUt.has(t)){const s=hv.Un(hv.Qf);s.rd(this.hUt),this.lUt.set(t,s)}}else this.lUt.delete(t)}VFt(t){const s=this.lUt.get(t);return s?s.zs():this.ON()}async SJt(t){const s=this.OEt,i=this.dB().uB();await i.Q4(),i.b4(t,this.mM()),i===t&&this.zpt.i6(),this.rHt.wNt(),this.hJt(),s.dispatchEvent(this.EUt.beforelayoutchange),hv.df.Af(!0),await t.f4(i,this.mM()),hv.df.Af(!1),await t.x4(!1),s.dispatchEvent(this.EUt.layoutchange),this.VB(),this.$Ht=!0,this.pV(),this.bzt()}VB(){this.FHt=!0}Fjt(){return this.PHt?this.PHt.Fjt():null}Ojt(){return this.PHt?this.PHt.Ojt():null}mM(){return this.PHt?this.PHt.mM():null}ck(){const t=this.PHt;if(!t||t.Ejt())return;const s=this.mM(),i=s.bO(),e=i&&s.jb(),n=i&&s.tv();if(e&&s.oO(),!this.FHt&&!this.hjt())return void s.kb();const r=this.a5.uB();this.uUt++,s.QF();const h=this.sz();h&&ov.dJt(),this.FHt=!1;let o=null;e&&(o=t.Xjt().VE(),s.vO(o));let a=null;n&&(a=s.bJt(2*(1+r.Z5())),s.m3(0,1)),this.a2()&&"low"===t.S3()?s.lF(t.h3(),t.o3()):s.uF(),this.MJt(this.mM(),r),o&&s.MO(o),n&&(s.xJt(),this.PHt.Yjt(a)),s.Fb(),h&&(ov.TJt(),ov.GJt()),t&&t.Kjt()}f6(t){return"low"===this.GB().S3()||t.jb()&&(this.w3()||this.a2())}MJt(t,s){t.lv(),t.CF(),t.Ib(),t.SF(1,1,1,1),t.cO(null),t.xF(null),t.sO(this.a2()),this.f6(t)&&s.u6(t);const i=s.n4();for(let e=1;e<i;++e)s.g6(t,e),t.tv()&&t._Jt();this.f6(t)||s.u6(t),s.m6(t)}$U(t,s,i){if(!this.UHt)return!1;const e=!this.zHt&&!this.zpt._yt();let n=0;e&&(n=performance.now());const r=this.sz();r&&this.nY(!1);const h=this.zpt.myt(this.a5,t,s,i);if(e){const t=performance.now()-n;this.mUt+=t,r&&ov.CJt(t)}return r&&this.nY(!0),h}zIt(t,s,i){if(!this.i_t())return this.$U(t,s,i);if(this.byt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.zHt&&!this.zpt._yt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this.zpt.wyt(this.a5,t,s,i)}async KB(t,s,i){if(!this.i_t())return this.$U(t,s,i);if(!this.UHt)return!1;if(this.byt())return this.zpt.Syt(t,s,i);if(!this.uB())return this.zpt.gyt(t,s,i);const e=performance.now(),n=this.zpt.wyt(this.a5,t,s,i);let r=n.next();for(;!r.done;)await this.dyt(r.value),r=n.next();return this.IN()||this.zpt._yt()||(await this.zpt.Myt(),this.JHt&&!this.zHt&&this.Nzt()),this.mUt+=performance.now()-e,r.value}JIt(t,s,i){const e=this.sz();e&&this.nY(!1);const n=this.zpt.xyt(this.a5,t,s,i);return e&&this.nY(!0),n}$It(t,s,i){return this.zpt.Tyt(this.a5,t,s,i)}qIt(t){return this.KHt.Bu(t)}lyt(t){this.yHt.push(t)}uyt(){if(!this.yHt.length)throw new Error("layout stack empty");this.yHt.pop()}RB(){return this.yHt.length?this.yHt.at(-1):this.uB()}AN(t){return t&&-1!==t.WN()?this.iUt*t.WN():this.eUt}a7(){return this.eUt}l7(){return this.iUt}RN(){return this.sUt}WN(){return this.EFt}jN(t){(isNaN(t)||t<0)&&(t=0),this.EFt=t}sB(t){this.rUt=Math.max(t,0)}tB(){return this.rUt}nB(t){this.nUt=Math.max(t,0)}eB(){return this.nUt}HN(){return this.fUt}zN(){return this.pUt}$N(){return this.gUt}IJt(){return this.QHt}ON(){return this.hUt.zs()}PJt(){return this.oUt.zs()}NN(){return this.aUt.zs()}kN(){return this.VHt}AJt(){return this.HHt}EJt(){return this.MHt}OL(){return this.jVt}kL(){return this.VVt}WL(){return this.HVt}NL(){return this.UVt}VL(){return this.zVt}PB(t){if(this.yUt)throw new Error("cannot call while loading state - wait until afterload event");return this.THt.get(t)||null}fDt(t){if(this.yUt)throw new Error("cannot call while loading state - wait until afterload event");this.THt.delete(t)}q4(){this.THt.clear();for(const t of this.cHt)if(!t.S1())for(const s of t.iV())this.THt.set(s.TU(),s)}yVt(){return"preview"===this.IVt}sz(){return this.OVt}JW(){return this.IVt}$W(){return"nwjs"===this.JW()||this.PVt}SVt(){return"cordova"===this.IVt}RJt(){return"Android"===hv.Ks.Zs&&("cordova"===this.IVt||"playable-ad-single-file"===this.IVt||"playable-ad-zip"===this.IVt||"instant-games"===this.IVt)}FJt(){return this._K}OJt(){return this.AVt}qW(){return this.EVt}DJt(){return this.RVt}AL(){return this.rHt}CAt(){return this.nHt.CAt()}IAt(){return this.nHt.IAt()}a2(){return this.AHt}kJt(){return this.mM().HS(this.Z1())}WS(t){return this.mM().WS(t||this.Z1())}LJt(){return this.$Ht}NJt(t){t=!!t,this.RHt!==t&&(this.RHt=t,this.dB().L6(),this.VB())}ZL(){return this.RHt}BJt(t){if(!this.uHt.has(t)){const s=()=>this.WJt(t);this.uHt.set(t,s),t.wf().addEventListener("animationframeimagechange",s)}const s=this.dw.ow(t);return s.xw()||s.Gw().then(()=>this.VB()),s}WJt(t){this.dw.cw(t)}aHt(t){const s=[];for(const i of t.HRt())for(const t of i.O$()){const i=t.W$();s.push({source:t,width:i.Vg(),height:i.Zg(),tag:t.tq()})}return{bw:s}}async lHt(t){const s=hv.Un(hv.Ud),i=[],e=new Map;for(const n of t.HRt())for(const t of n.O$()){const n=t.W$().XAt();e.has(n)||(e.set(n,null),i.push(s.Bu(async()=>{const t=await n.aQ();e.set(n,t)})))}await Promise.all(i);const n=[];for(const i of t.HRt())for(const t of i.O$())n.push(s.Bu(async()=>{const s=t.W$(),i=e.get(s.XAt()),n=await s.YAt(i);return{Cw:await createImageBitmap(n)}}));const r=await Promise.all(n);for(const t of e.values())t instanceof ImageBitmap&&t.close&&t.close();return{bw:r}}jJt(t){this.wUt=t,this.SUt=!1}VJt(){this.wUt="",this.SUt=!0}HJt(t){this.vUt=t}Y_t(t){this.uz=t}UJt(){return this.bUt}lJt(){return!!(this.wUt||this.SUt||this.vUt||null!==this.uz)}async uJt(){if(this.wUt&&(this.pV(),await this.zJt(this.wUt),this.JJt()),this.vUt&&(await this.$Jt(this.vUt),this.JJt(),this.sz()&&ov.qJt()),this.SUt){const t=await this.XJt();this.bUt=t,await this.KB(hv.sW.tW.QB.YJt,null),this.bUt="",this.JJt()}if(null!==this.uz){this.pV();try{await this.KJt(this.uz),this.bUt=this.uz,await this.KB(hv.sW.tW.QB.ZJt,null),this.bUt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.KB(hv.sW.tW.QB.QJt,null)}this.JJt()}}JJt(){this.wUt="",this.SUt=!1,this.vUt="",this.uz=null}fj(){return this.MUt||(this.MUt=localforage.Gi({name:"c3-localstorage-"+this.WL(),description:this.OL()})),this.MUt}t$t(){return this.xUt||(this.xUt=localforage.Gi({name:"c3-savegames-"+this.WL(),description:this.OL()})),this.xUt}async zJt(t){const s=await this.XJt();try{await this.t$t().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.bUt=s,await this.KB(hv.sW.tW.QB.YJt,null),this.bUt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.KB(hv.sW.tW.QB.s$t,null)}}async $Jt(t){try{const s=await this.t$t().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.KJt(s),this.bUt=s,await this.KB(hv.sW.tW.QB.ZJt,null),this.bUt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.KB(hv.sW.tW.QB.QJt,null)}}async XJt(){const t={c3save:!0,version:1,rt:{time:this.ON(),timeRaw:this.PJt(),walltime:this.NN(),timescale:this.WN(),tickcount:this.kN(),next_uid:this.xHt,running_layout:this.uB().C1(),start_time_offset:Date.now()-this.QHt},types:{},layouts:{},events:this.zpt.i5(),timelines:this.stt.i5(),user_script_data:null};for(const s of this.cHt)s.S1()||s.cFt()||(t.types[s.C1().toString()]=s.i5());for(const s of this.a5.gB())t.layouts[s.C1().toString()]=s.i5();const s=this.i$t("save");return s.saveData=null,await this.H4(s),t.user_script_data=s.saveData,JSON.stringify(t)}L4(){return this.yUt}async KJt(t){const s=this.dB(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(i.version>1)throw new Error("C3 save data from future version");this.K_t(),this.OEt.dispatchEvent(hv.Un(hv.Event,"beforeload"));for(const t of this.Fzt())t.cU().cFt()||t.u8();const e=i.rt;this.hUt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.oUt.Set(e.timeRaw),this.aUt.Set(e.walltime),this.EFt=e.timescale,this.VHt=e.tickcount,this.QHt=Date.now()-e.start_time_offset;const n=e.running_layout;this.yUt=!0;let r=!1;if(n!==this.uB().C1()){const t=s.P6(n);if(!t)return;await this.SJt(t),r=!0}for(const[t,e]of Object.entries(i.layouts)){const i=parseInt(t,10),n=s.P6(i);n&&n.e5(e)}const h=new Set;for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.ZX(i);!e||e.S1()||e.cFt()||e.e5(s,h)}for(const t of this.a5.gB())for(const s of t.zV())s.n5();if(this.pV(),this.q4(),this.yUt=!1,r){for(const t of this.Fzt())t.N4();for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.ZX(i);!e||e.S1()||e.cFt()||e.gFt(s)}}this.xHt=e.next_uid,this.zpt.e5(i.events);for(const t of this.cHt)if(!t.S1()&&t.MU())for(const s of t.iV()){const i=s._U();s.cOt();for(const e of t.u4().xV()){if(e===t)continue;const n=e.iV();if(i<0||i>=n.length)throw new Error("missing sibling instance");s.X4(n[i])}}this.stt.e5(i.timelines),s.k6(),s.L6();for(const t of h)t.TOt();this.Z_t(),this.OEt.dispatchEvent(hv.Un(hv.Event,"afterload")),this.IZ(this.i$t("afterload"));for(const[t,s]of Object.entries(i.types)){const s=parseInt(t,10),i=this.ZX(s);i&&i.mFt()}const o=this.i$t("load");o.saveData=i.user_script_data,await this.H4(o),this.VB()}e$t(t,s){return s.DB().Dkt()-t.DB().Dkt()}xLt(t,s){t.DB()&&(this.$Ut.has(t)||(this.$Ut.set(t,s),this.qUt.push(t)))}K_t(){this.$Ut=new WeakMap,hv.Sh(this.qUt),hv.a6._Dt()}Z_t(t="full",s=null){this.qUt.sort(this.e$t),s||(s={}),s.cDt=new Set;const i=this.qUt.length;for(const i of this.qUt)i.f8(this.$Ut.get(i),t,s);for(const i of this.qUt)i.POt(this.$Ut.get(i),t,s);if(this.K_t(),i){this.pV(),this.q4();for(const t of this.a5.gB())for(const s of t.zV())s.c1(),s.jB()}}async n$t(t){const s=await Promise.all(t.map(async t=>{if(this.SVt()&&this.zZ.hZ()||"playable-ad-single-file"===this.JW()){const s=await this.zZ.eo(t);return URL.createObjectURL(s)}return new URL(t,location.href).toString()}));this.kUt.r$t(s)}h$t(t,s){this.kUt.o$t(t,s)}a$t(t,s){this.kUt.l$t(t,s)}u$t(t,s,i,e){return this.kUt.u$t(t,s,i,null,null,e)}c$t(t,s,i,e){return this.kUt.c$t(t,s,i,e)}f$t(){return this.kUt.d$t()}CB(t,s){this.jc("runtime","invoke-download",{url:t,filename:s})}async hVt(t,s,i,e,n,r){if(e=e||s,n=n||i,this.zL())return(await this.UB("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:n,imageBitmapOpts:r})).imageBitmap;{const h=await self.C3_RasterSvgImageBlob(t,s,i,e,n);return r?await self.createImageBitmap(h,r):h}}async p$t(t){return this.zL()?await this.UB("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}m$t(){this.CUt||(this.CUt=!0,this.jc("runtime","enable-device-orientation"))}g$t(){this.IUt||(this.IUt=!0,this.jc("runtime","enable-device-motion"))}lB(){return this.ZHt()}y$t(t){this.ZHt=t}WUt(){const t=this.mM();return{fps:this.HN(),tps:this.zN(),cpu:this.$N(),gpu:this.XN(),layout:this.uB()?this.uB().Pc():"",renderer:t.jb()?t.IO():t.Djt()}}byt(){return!!this.sz()&&ov.byt()}dyt(t){return this.i_t()?ov.dyt(t):Promise.resolve()}$vt(){return!!this.i_t()&&ov.w$t()}S$t(t){this.DVt=!!t,this.v$t()}b$t(){return this.DVt}i_t(){return this.kVt}nY(t){t?this.LVt--:this.LVt++,this.v$t()}v$t(){this.kVt=this.sz()&&this.DVt&&0===this.LVt}fSt(){return this.sz()&&ov.fSt()}c3(){return this.sz()&&this.mM().bO()&&ov.c3()}async mJt(t){if(t)for(const s of t)await this.dyt(s)}yJt(t){return this.mJt(this.OEt.Pf(t))}ggt(t){return this.zpt.ggt(t.name,t.params)}JB(t){if(this.zL())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}gj(){return this.UUt}i$t(t){const s=hv.Un(hv.Event,t,!1);return s.runtime=this.UUt,s}rzt(){this.UUt=new self.TL(this),this.RUt={pretick:this.i$t("pretick"),tick:this.i$t("tick"),tick2:this.i$t("tick2")}}azt(){const t={};for(const s of this.cHt)t[s.Hgt()]={value:s.Bj(),enumerable:!0,writable:!1};this.UUt.nN(t)}lzt(){const t={};for(const s of this.oN().Ygt())t[s.Hgt()]=s.Ugt();this.UUt.rN(t)}vB(){return this.JUt}Oj(t,s){this.zUt.set(t,s)}qV(t){return this.zUt.get(t)}BW(t){if(!(t instanceof self.Hj))throw new TypeError("expected IObjectClass");const s=this.qV(t);if(!(s&&s instanceof hv.wct))throw new Error("invalid IObjectClass");return s}Qj(t){if(!(t instanceof self.uU))throw new TypeError("expected IInstance");const s=this.qV(t);if(!(s&&s instanceof hv.Instance))throw new Error("invalid IInstance");return s}OB(t){if(!(t instanceof self.YJ))throw new TypeError("expected IWorldInstance");const s=this.qV(t);if(!(s&&s instanceof hv.Instance))throw new Error("invalid IInstance");return s}},self.C3_CreateRuntime=hv.vVt.UG,self.C3_InitRuntime=(t,s)=>t.OFt(s)}{const cv=self._s;cv.LUt=class extends cv.Vn{constructor(t,s){super(),this.Nc=t,this.M$t=new Map,this.x$t=0,this.T$t=s.inputPort,s.outputPort.onmessage=t=>this.G$t(t),this._$t=s.maxNumWorkers,this.C$t=1,this.I$t=!1,this.P$t=!1}d$t(){return this._$t}r$t(t){this.T$t.postMessage({type:"_import_scripts",scripts:t})}o$t(t,s){this.T$t.postMessage({type:"_send_blob",blob:t,id:s})}l$t(t,s){this.T$t.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}u$t(t,s,i,e,n,r){if(i||(i=[]),"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.x$t++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:i},a=new Promise((t,s)=>{this.M$t.set(h,{resolve:t,progress:e,reject:s,A$t:!1,E$t:r})});return n&&n.Xf(()=>this.R$t(h)),this.T$t.postMessage(o,i),this.F$t(),a}c$t(t,s,i,e){if(i||(i=[]),"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const n={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:this.x$t++,params:s,transferables:i};this.T$t.postMessage(n,i)}R$t(t){const s=this.M$t.get(t);s&&(s.A$t=!0,s.resolve=null,s.progress=null,s.reject=null,this.T$t.postMessage({type:"_cancel",jobId:t}))}G$t(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.O$t(e,s.result);break;case"progress":this.D$t(e,s.progress);break;case"error":this.k$t(e,s.error);break;case"ready":this.L$t();break;default:throw new Error(`unknown message from worker '${i}'`)}}O$t(t,s){const i=this.M$t.get(t);if(!i)throw new Error("invalid job ID");i.A$t||i.resolve(s),this.M$t.delete(t)}D$t(t,s){const i=this.M$t.get(t);if(!i)throw new Error("invalid job ID");!i.A$t&&i.progress&&i.progress(s)}k$t(t,s){const i=this.M$t.get(t);if(!i)throw new Error("invalid job ID");i.A$t||i.reject(s),this.M$t.delete(t)}L$t(){this.I$t&&(this.I$t=!1,this.C$t++,this.C$t<this._$t?this.F$t():this.T$t.postMessage({type:"_no_more_workers"}))}N$t(){let t=0;const s=[...this.M$t.values()].sort((t,s)=>(t.E$t||1/0)-(s.E$t||1/0));for(const i of s)t<(i.E$t||1/0)&&t++;return t}async F$t(){if(!(this.C$t>=this._$t||this.I$t||this.P$t||this.N$t()<=this.C$t))try{this.I$t=!0,(await this.Nc.UB("runtime","create-job-worker")).outputPort.onmessage=t=>this.G$t(t)}catch(t){this.P$t=!0,this.I$t=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.C$t} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.skymen_BetterOutline={njt:"uniform lowp vec3 outlinecolor;\nuniform lowp float width;\nuniform lowp float precisionStep;\nuniform lowp float samples;\nuniform lowp float outlineOpacity;\nvarying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform mediump vec2 layoutStart;\nuniform mediump vec2 layoutEnd;\nuniform lowp sampler2D samplerBack;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nuniform mediump float seconds;\nuniform mediump vec2 pixelSize;\nuniform mediump float layerScale;\nuniform mediump float layerAngle;\n#define PI 3.14159265359\n#define SAMPLES 96\n#define PASSES 64\nvoid main(void)\n{\nif (width <= 0.0 || outlineOpacity <= 0.0) {\ngl_FragColor = texture2D( samplerFront, vTex );\nreturn;\n}\nmediump float outlineAlpha = 0.0;\nmediump vec2 actualWidth;\nmediump float widthCopy = width;\nmediump vec4 color = vec4(outlinecolor.x, outlinecolor.y, outlinecolor.z, 1.0);\nmediump float angle;\nmediump vec2 layoutSize = abs(vec2(layoutEnd.x-layoutStart.x,(layoutEnd.y-layoutStart.y)));\nmediump vec2 texelSize = abs(srcOriginEnd-srcOriginStart)/layoutSize;\nmediump vec4 fragColor;\nmediump vec2 testPoint;\nmediump float sampledAlpha;\nint passes = int(clamp(width / precisionStep, 1.0, float(PASSES)));\nfor (int j=0; j<PASSES; j++) {\nif (j >= passes ) break;\nwidthCopy = mix(0.0, width, float(j)/float(passes));\nactualWidth = widthCopy * texelSize;\nangle = 0.0;\nfor( int i=0; i<SAMPLES; i++ ){\nif (i >= int(samples)) break;\nangle += 1.0/(clamp(samples, 0.0, float(SAMPLES))/2.0) * PI;\ntestPoint = vTex + actualWidth * vec2(cos(angle), sin(angle));\nsampledAlpha = texture2D( samplerFront,  testPoint ).a;\noutlineAlpha = max( outlineAlpha, sampledAlpha );\n}\n}\nfragColor = color * outlineAlpha * outlineOpacity;\nmediump vec4 tex0 = texture2D( samplerFront, vTex );\ngl_FragColor = fragColor * (1. - tex0.a) + tex0;\n}",ejt:"#version 300 es\nin mediump vec2 vTex;\nout lowp vec4 outColor;\n#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nprecision lowp float;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform mediump vec2 layoutStart;\nuniform mediump vec2 layoutEnd;\nuniform lowp sampler2D samplerBack;\nuniform lowp sampler2D samplerDepth;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nuniform highmedp float seconds;\nuniform mediump vec2 pixelSize;\nuniform mediump float layerScale;\nuniform mediump float layerAngle;\nuniform mediump float devicePixelRatio;\nuniform mediump float zNear;\nuniform mediump float zFar;\nuniform lowp vec3 outlinecolor;\nuniform lowp float width;\nuniform lowp float precisionStep;\nuniform lowp float samples;\nuniform lowp float outlineOpacity;\n#define PI 3.14159265359\n#define SAMPLES 96\n#define PASSES 64\nvoid main(void)\n{\nif (width <= 0.0 || outlineOpacity <= 0.0) {\noutColor = texture( samplerFront, vTex );\nreturn;\n}\nmediump float outlineAlpha = 0.0;\nmediump vec2 actualWidth;\nmediump float widthCopy = width;\nmediump vec4 color = vec4(outlinecolor.x, outlinecolor.y, outlinecolor.z, 1.0);\nmediump float angle;\nmediump vec2 layoutSize = abs(vec2(layoutEnd.x-layoutStart.x,(layoutEnd.y-layoutStart.y)));\nmediump vec2 texelSize = abs(srcOriginEnd-srcOriginStart)/layoutSize;\nmediump vec4 fragColor;\nmediump vec2 testPoint;\nmediump float sampledAlpha;\nint passes = int(clamp(width / precisionStep, 1.0, float(PASSES)));\nint sampleCount = int(clamp(samples, 0.0, float(SAMPLES)));\nfor (int j = 0; j <= passes; j++) {\nwidthCopy = mix(0.0, width, float(j)/float(passes));\nactualWidth = widthCopy * texelSize;\nangle = 0.0;\nfor( int i = 0; i < sampleCount; i++ ) {\nangle += 1.0/(float(sampleCount)/2.0) * PI;\ntestPoint = vTex + actualWidth * vec2(cos(angle), sin(angle));\nsampledAlpha = texture( samplerFront,  testPoint ).a;\noutlineAlpha = max( outlineAlpha, sampledAlpha );\n}\n}\nfragColor = color * outlineAlpha * outlineOpacity;\nmediump vec4 tex0 = texture( samplerFront, vTex );\noutColor = fragColor * (1. - tex0.a) + tex0;\n}",tjt:"%%FRAGMENTINPUT_STRUCT%%\n/* input struct contains the following fields:\nfragUV : vec2<f32>\nfragPos : vec4<f32>\nfn c3_getBackUV(fragPos : vec2<f32>, texBack : texture_2d<f32>) -> vec2<f32>\nfn c3_getDepthUV(fragPos : vec2<f32>, texDepth : texture_depth_2d) -> vec2<f32>\n*/\n%%FRAGMENTOUTPUT_STRUCT%%\n%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\noutlinecolor : vec3<f32>,\nwidth : f32,\nprecisionStep : f32,\nsamples : f32,\noutlineOpacity : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3PARAMS_STRUCT%%\n/* c3Params struct contains the following fields:\nsrcStart : vec2<f32>,\nsrcEnd : vec2<f32>,\nsrcOriginStart : vec2<f32>,\nsrcOriginEnd : vec2<f32>,\nlayoutStart : vec2<f32>,\nlayoutEnd : vec2<f32>,\ndestStart : vec2<f32>,\ndestEnd : vec2<f32>,\ndevicePixelRatio : f32,\nlayerScale : f32,\nlayerAngle : f32,\nseconds : f32,\nzNear : f32,\nzFar : f32,\nisSrcTexRotated : u32\nfn c3_srcToNorm(p : vec2<f32>) -> vec2<f32>\nfn c3_normToSrc(p : vec2<f32>) -> vec2<f32>\nfn c3_srcOriginToNorm(p : vec2<f32>) -> vec2<f32>\nfn c3_normToSrcOrigin(p : vec2<f32>) -> vec2<f32>\nfn c3_clampToSrc(p : vec2<f32>) -> vec2<f32>\nfn c3_clampToSrcOrigin(p : vec2<f32>) -> vec2<f32>\nfn c3_getLayoutPos(p : vec2<f32>) -> vec2<f32>\nfn c3_srcToDest(p : vec2<f32>) -> vec2<f32>\nfn c3_clampToDest(p : vec2<f32>) -> vec2<f32>\nfn c3_linearizeDepth(depthSample : f32) -> f32\n*/\n/*\nfn c3_premultiply(c : vec4<f32>) -> vec4<f32>\nfn c3_unpremultiply(c : vec4<f32>) -> vec4<f32>\nfn c3_grayscale(rgb : vec3<f32>) -> f32\nfn c3_getPixelSize(t : texture_2d<f32>) -> vec2<f32>\nfn c3_RGBtoHSL(color : vec3<f32>) -> vec3<f32>\nfn c3_HSLtoRGB(hsl : vec3<f32>) -> vec3<f32>\n*/\nconst PI:f32 = 3.14159265359;\nconst SAMPLES:i32 = 96;\nconst PASSES:i32 = 64;\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar output : FragmentOutput;\nif (shaderParams.width <= 0.0 || shaderParams.outlineOpacity <= 0.0) {\noutput.color = textureSample(textureFront, samplerFront, input.fragUV );\nreturn output;\n}\nvar outlineAlpha: f32 = 0.0;\nvar actualWidth: vec2<f32>;\nvar widthCopy: f32 = shaderParams.width;\nvar color: vec4<f32> = vec4<f32>(shaderParams.outlinecolor.x, shaderParams.outlinecolor.y, shaderParams.outlinecolor.z, 1.0);\nvar angle: f32;\nlet layoutSize: vec2<f32> = abs(vec2<f32>(c3Params.layoutEnd.x - c3Params.layoutStart.x, c3Params.layoutEnd.y - c3Params.layoutStart.y));\nlet texelSize: vec2<f32> = abs(c3Params.srcOriginEnd - c3Params.srcOriginStart) / layoutSize;\nvar fragColor: vec4<f32>;\nvar testPoint: vec2<f32>;\nvar sampledAlpha: f32;\nlet passes: u32 = u32(clamp(shaderParams.width / shaderParams.precisionStep, 1.0, f32(SAMPLES)));\nlet sampleCount: u32 = u32(clamp(shaderParams.samples, 0.0, f32(SAMPLES)));\nfor (var j: u32 = 0u; j <= passes; j = j + 1u) {\nwidthCopy = mix(0.0, shaderParams.width, f32(j) / f32(passes));\nactualWidth = widthCopy * texelSize;\nangle = 0.0;\nfor (var i: u32 = 0u; i < sampleCount; i = i + 1u) {\nangle = angle + 1.0 / (f32(sampleCount) / 2.0) * PI;\ntestPoint = input.fragUV + actualWidth * vec2<f32>(cos(angle), sin(angle));\nsampledAlpha = textureSample(textureFront, samplerFront, testPoint).a; // Assuming 'samplerFrontSampler' is the sampler associated with 'samplerFront'\noutlineAlpha = max(outlineAlpha, sampledAlpha);\n}\n}\nfragColor = color * outlineAlpha * shaderParams.outlineOpacity;\nvar tex0 : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV );\noutput.color = fragColor * (1. - tex0.a) + tex0;\nreturn output;\n}",uM:!1,fM:!1,Kb:50,Qb:50,sM:!0,eM:!0,rM:!1,oM:!1,animated:!1,parameters:[["outlinecolor",0,"color"],["width",0,"float"],["precisionStep",0,"float"],["samples",0,"float"],["outlineOpacity",0,"percent"]]};{let fv=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const t=""+i,s=""+e;return t<s?-1:t>s?1:0}};0;const dv=self._s;let pv=null,mv="",gv="",yv=[],wv="",Sv="",vv="";const bv=dv.Un(dv.jmt);dv.sW.tW=class extends dv.YCt{constructor(t){super(t),this.kmt=this.Nc.oN().iY(),this.Mpt=this.Nc.oN().vN(),this.B$t=0,this.W$t=0,this.j$t=new Map}zn(){super.zn()}VB(){this.Nc.VB()}$U(t){this.Nc.$U(t,null,null)}V$t(t,s){return pv&&t===mv&&s===gv||(pv=new RegExp(t,s),mv=t,gv=s),pv.lastIndex=0,pv}H$t(t,s,i){if(t===wv&&s===Sv&&i===vv)return yv;const e=this.V$t(s,i);return yv=t.match(e),wv=t,Sv=s,vv=i,yv}async U$t(t,s){if(!s.length)return;this.B$t+=s.length;const i=[];for(const e of s)i.push(t.m4(e));await dv.jh(i,()=>{this.W$t++}),this.W$t++,this.W$t===this.B$t&&(this.W$t=0,this.B$t=0,this.Nc.$U(dv.sW.tW.QB.z$t,null,null))}PZ(){return 0===this.B$t?1:this.W$t/this.B$t}J$t(t,s){for(const i of s)0===i.hV()&&t.S4(i)}$$t(){return bv}q$t(t){const s=this.Nc.oN(),i=s.vN(),e=i.tY(),n=e.dN(),r=n.QX(),h=e.Mmt(),o=i.sY(n),a=s.iY(),l=a.sY();if(l.Bmt(t),h)for(let i=0;i<t&&!l.cY();++i)s.hY(r),l.lY(i),n.oY(e,o),s.aY(r);else for(let s=0;s<t&&!l.cY();++s)l.lY(s),n.oY(e,o);return i.fY(),a.fY(),!1}*X$t(t){const s=this.Nc.oN(),i=s.vN(),e=i.tY(),n=e.dN(),r=n.QX(),h=e.Mmt(),o=i.sY(n),a=s.iY(),l=a.sY();if(l.Bmt(t),h)for(let i=0;i<t&&!l.cY();++i)s.hY(r),l.lY(i),yield*n.nbt(e,o),s.aY(r);else for(let s=0;s<t&&!l.cY();++s)l.lY(s),yield*n.nbt(e,o);return i.fY(),a.fY(),!1}Y$t(){const t=this.Nc.oN(),s=t.vN(),i=s.tY(),e=i.dN(),n=e.QX(),r=i.Mmt(),h=s.sY(e),o=t.iY(),a=o.sY();if(r)for(let s=0;!a.cY();++s)t.hY(n),a.lY(s),e.oY(i,h)||a.eq(),t.aY(n);else for(let t=0;!a.cY();++t)a.lY(t),e.oY(i,h)||a.eq();return s.fY(),o.fY(),!1}*K$t(){const t=this.Nc.oN(),s=t.vN(),i=s.tY(),e=i.dN(),n=e.QX(),r=i.Mmt(),h=s.sY(e),o=t.iY(),a=o.sY();if(r)for(let s=0;!a.cY();++s)t.hY(n),a.lY(s),(yield*e.nbt(i,h))||a.eq(),t.aY(n);else for(let t=0;!a.cY();++t)a.lY(t),(yield*e.nbt(i,h))||a.eq();return s.fY(),o.fY(),!1}Z$t(t,s,i){const e=this.Nc.oN(),n=e.vN(),r=n.tY(),h=r.dN(),o=h.QX(),a=r.Mmt(),l=n.sY(h),u=e.iY(),c=u.sY();if(c.eY(t),c.Bmt(i),i<s)if(a)for(let t=s;t>=i&&!c.cY();--t)e.hY(o),c.lY(t),h.oY(r,l),e.aY(o);else for(let t=s;t>=i&&!c.cY();--t)c.lY(t),h.oY(r,l);else if(a)for(let t=s;t<=i&&!c.cY();++t)e.hY(o),c.lY(t),h.oY(r,l),e.aY(o);else for(let t=s;t<=i&&!c.cY();++t)c.lY(t),h.oY(r,l);return n.fY(),u.fY(),!1}*Q$t(t,s,i){const e=this.Nc.oN(),n=e.vN(),r=n.tY(),h=r.dN(),o=h.QX(),a=r.Mmt(),l=n.sY(h),u=e.iY(),c=u.sY();if(c.eY(t),c.Bmt(i),i<s)if(a)for(let t=s;t>=i&&!c.cY();--t)e.hY(o),c.lY(t),yield*h.nbt(r,l),e.aY(o);else for(let t=s;t>=i&&!c.cY();--t)c.lY(t),yield*h.nbt(r,l);else if(a)for(let t=s;t<=i&&!c.cY();++t)e.hY(o),c.lY(t),yield*h.nbt(r,l),e.aY(o);else for(let t=s;t<=i&&!c.cY();++t)c.lY(t),yield*h.nbt(r,l);return n.fY(),u.fY(),!1}tqt(t){const s=t.eV(),i=s.iV();if(0===i.length)return!1;const e=this.Nc.oN(),n=e.vN(),r=n.tY(),h=r.dN(),o=h.QX(),a=r.Mmt(),l=n.sY(h),u=e.iY(),c=u.sY(),f=t.MU(),d=bv.sY();if(dv.Th(d,i),c.Bmt(d.length),a)for(let s=0,i=d.length;s<i&&!c.cY();++s){e.hY(o);const i=d[s];t.eV().kpt(i),f&&i.wSt(),c.lY(s),h.oY(r,l),e.aY(o)}else{s.Fpt(!1);const t=s.Opt();dv.Sh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.cY();++s){const i=d[s];t[0]=i,f&&i.wSt(),c.lY(s),h.oY(r,l)}}return n.fY(),u.fY(),dv.Sh(d),bv.fY(),!1}*sqt(t){const s=t.eV(),i=s.iV();if(0===i.length)return!1;const e=this.Nc.oN(),n=e.vN(),r=n.tY(),h=r.dN(),o=h.QX(),a=r.Mmt(),l=n.sY(h),u=e.iY(),c=u.sY(),f=t.MU(),d=bv.sY();if(dv.Th(d,i),c.Bmt(d.length),a)for(let s=0,i=d.length;s<i&&!c.cY();++s){e.hY(o);const i=d[s];t.eV().kpt(i),f&&i.wSt(),c.lY(s),yield*h.nbt(r,l),e.aY(o)}else{s.Fpt(!1);const t=s.Opt();dv.Sh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.cY();++s){const i=d[s];t[0]=i,f&&i.wSt(),c.lY(s),yield*h.nbt(r,l)}}return n.fY(),u.fY(),dv.Sh(d),bv.fY(),!1}iqt(t,s){const i=t.eV(),e=i.iV();if(0===e.length)return!1;const n=this.Nc.oN(),r=n.vN(),h=n.Ogt(),o=r.tY(),a=o.dN(),l=a.QX(),u=o.Mmt(),c=r.sY(a),f=n.iY(),d=f.sY(),p=t.MU(),m=bv.sY();dv.Sh(m),d.Bmt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.vTt(1,t)]);if(m.sort(fv),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.cY();++s){n.hY(l);const i=m[s][0];t.eV().kpt(i),p&&i.wSt(),d.lY(s),a.oY(o,c),n.aY(l)}else{i.Fpt(!1);const t=i.Opt();dv.Sh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.cY();++s){const i=m[s][0];t[0]=i,p&&i.wSt(),d.lY(s),a.oY(o,c)}}return r.fY(),f.fY(),dv.Sh(m),bv.fY(),!1}*eqt(t,s){const i=t.eV(),e=i.iV();if(0===e.length)return!1;const n=this.Nc.oN(),r=n.vN(),h=n.Ogt(),o=r.tY(),a=o.dN(),l=a.QX(),u=o.Mmt(),c=r.sY(a),f=n.iY(),d=f.sY(),p=t.MU(),m=bv.sY();dv.Sh(m),d.Bmt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.vTt(1,t)]);if(m.sort(fv),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.cY();++s){n.hY(l);const i=m[s][0];t.eV().kpt(i),p&&i.wSt(),d.lY(s),yield*a.nbt(o,c),n.aY(l)}else{i.Fpt(!1);const t=i.Opt();dv.Sh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.cY();++s){const i=m[s][0];t[0]=i,p&&i.wSt(),d.lY(s),yield*a.nbt(o,c)}}return r.fY(),f.fY(),dv.Sh(m),bv.fY(),!1}nqt(t,s){let i=this.j$t.get(t);return i||(s?(i={rqt:null,hqt:new Map},this.j$t.set(t,i),i):null)}oqt(t,s,i,e,n){s.cN().vbt(i,s.gN()),e&&t.aY(n)}*aqt(t,s,i,e,n){yield*s.cN().bbt(i,s.gN()),e&&t.aY(n)}}}{const Mv=self._s;Mv.sW.tW.fRt=class extends Mv.Vn{constructor(t){super(),this.ppt=t,this.Nc=t.aW(),this.DIt=t.zj()}SIt(){}zn(){this.ppt=null,this.Nc=null,this.DIt=null}}}{const xv=self._s;xv.sW.tW.Instance=class extends xv.Vn{constructor(t,s){super(),this.fi=t,this.ppt=this.fi.cU(),this.jIt=this.ppt.KTt(),this.Nc=this.fi.aW()}zn(){this.fi=null,this.ppt=null,this.jIt=null,this.Nc=null}}}{const Tv=self._s,Gv=[];Tv.sW.tW.QB={lqt:()=>!0,z4:()=>!0,t6:()=>!0,$zt:()=>!0,qzt:()=>!0,IN(){return this.Nc.IN()},ivt(){const t=this.Nc.Fgt();return!t.ymt()&&!t.mmt()},uqt(){const t=this.Nc.Ogt().oTt();let s=t.get("TriggerOnce_lastTick");void 0===s&&(s=-1,t.set("TriggerOnce_lastTick",-1));const i=this.Nc.kN();return t.set("TriggerOnce_lastTick",i),this.Nc.LJt()||s!==i-1},cqt(t){const s=this.Nc.Ogt().oTt(),i=s.get("Every_lastTime")||0,e=this.Nc.ON();s.has("Every_seconds")||s.set("Every_seconds",t);const n=s.get("Every_seconds");return e>=i+n?(s.set("Every_lastTime",i+n),e>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",e),s.set("Every_seconds",t),!0):(e<i-.1&&s.set("Every_lastTime",e),!1)},wwt(t){const s=this.Nc.oN().tyt(t);return s&&s.wwt()},yVt(){return this.Nc.yVt()},hi:()=>Tv.Ks.hi,Czt:()=>!0,ZB:()=>!0,fqt:()=>!0,YJt:()=>!0,s$t:()=>!0,ZJt:()=>!0,QJt:()=>!0,dqt(t){return!!this.Nc.PB(t)},pqt(t){switch(t){case 0:return"browser"===Tv.Ks.ni;case 1:return"iOS"===Tv.Ks.Zs;case 2:return"Android"===Tv.Ks.Zs;case 8:return"cordova"===Tv.Ks.ni;case 9:return"scirra-arcade"===this.Nc.JW();case 10:return"nwjs"===Tv.Ks.ni;case 13:return"windows-uwp"===this.Nc.JW();default:return!1}},mqt(t,s,i){return this.V$t(s,i).test(t)},gqt:(t,s,i)=>Tv.compare(t,s,i),yqt:(t,s,i)=>t>=s&&t<=i,wqt:(t,s,i)=>Tv.compare(t.Cnt(),s,i),Sqt:t=>!!t.Cnt(),vqt(t,s){const i=this.Nc.ON();if(0===t){const t=this.Nc.Ogt().oTt();return!t.get("CompareTime_executed")&&i>=s&&(t.set("CompareTime_executed",!0),!0)}return Tv.compare(i,t,s)},bqt:t=>isNaN(t),wCt:(t,s,i)=>Tv.rr(Tv.Zn(t),Tv.Zn(i))<=Tv.Zn(s),SCt:(t,s)=>Tv.ar(Tv.Zn(t),Tv.Zn(s)),IGt(t,s,i){let e=Tv.Zn(t),n=Tv.Zn(s),r=Tv.Zn(i);return Tv.ar(r,n)?Tv.ar(e,n)&&!Tv.ar(e,r):!(!Tv.ar(e,n)&&Tv.ar(e,r))},Mqt:(t,s)=>"number"==typeof t?0===s:1===s,xqt:t=>!!t,Yyt(t){return t.toLowerCase()===this.Nc.oN().twt()},Tqt(t,s,i,e){if(!t)return!1;const n=this.$$t(),r=n.sY(),h=t.eV();Tv.Th(r,h.iV()),h._pt()&&Tv.Sh(h.Dpt());const o=this.Nc.Ogt();let a=0;for(let t=0,n=r.length;t<n;++t){const n=r[t];r[a]=n,s=o.vTt(1,t),e=o.vTt(3,t),Tv.compare(s,i,e)?++a:h.Rpt(n)}Tv.wh(r,a),h.Lpt(r);const l=!!r.length;return Tv.Sh(r),n.fY(),t.dbt(),l},Gqt(t,s){if(!t)return!1;const i=this.$$t(),e=i.sY(),n=t.eV();Tv.Th(e,n.iV()),n._pt()&&Tv.Sh(n.Dpt());const r=this.Nc.Ogt();let h=0;for(let t=0,s=e.length;t<s;++t){const s=e[t];e[h]=s,r.vTt(1,t)?++h:n.Rpt(s)}Tv.wh(e,h),n.Lpt(e);const o=!!e.length;return Tv.Sh(e),i.fY(),t.dbt(),o},_qt(t,s,i){if(!t)return!1;const e=t.eV(),n=e.iV();if(0===n.length)return!1;const r=this.Nc.Ogt();let h=null,o=0;for(let t=0,e=n.length;t<e;++t){const e=n[t];i=r.vTt(2,t),(null===h||0===s&&i<o||1===s&&i>o)&&(o=i,h=e)}return e.Vpt(h),t.dbt(),!0},Cqt(t,s){if(!t)return!1;const i=t.eV(),e=i.iV();if((s=Math.floor(s))>=e.length)return!1;const n=e[s];return i.Vpt(n),t.dbt(),!0},Iqt(t){if(!t)return!1;const s=t.eV(),i=s.iV(),e=Math.floor(this.Nc.lB()*i.length);if(e>=i.length)return!1;const n=i[e];return s.Vpt(n),t.dbt(),!0},Pqt:t=>!!t&&(!!t.hV()&&(t.eV().Fpt(!0),t.dbt(),!0)),Aqt(t,s,i){if(!t)return!1;const e=t.eV(),n=e.iV(),r=this.Nc.dN().Hpt(),h=this.Nc.Ogt().iTt();e._pt()?(Tv.Th(Gv,n),e.Gpt(),e.Fpt(!1)):r?(Tv.Th(Gv,e.Dpt()),Tv.Sh(e.Dpt())):(Tv.Th(Gv,e.Opt()),Tv.Sh(e.Opt()));for(let t=0,n=Gv.length;t<n;++t){const n=Gv[t];Tv.xor(n.DB().nJ(s,i),h)?e.Ept(n):e.Rpt(n)}return t.dbt(),Tv.xor(!!e.Opt().length,h)},Eqt(t){if(!t)return!1;const s=t.S1();let i=null;const e=this.Nc.sFt();for(let n=e.length-1;n>=0;--n){const r=e[n];if(s){if(r.cU().eGt(t)){i=r;break}}else if(r.cU()===t){i=r;break}}if(!i){const s=t.iV();s.length&&(i=s.at(-1))}return!!i&&(t.eV().Vpt(i),t.dbt(),!0)},Rqt(t){return this.Nc.i_t()?this.X$t(t):this.q$t(t)},Fqt(){return this.Nc.i_t()?this.K$t():this.Y$t()},Oqt(t,s,i){return this.Nc.i_t()?this.Q$t(t,s,i):this.Z$t(t,s,i)},Hd(t){return this.Nc.i_t()?this.sqt(t):this.tqt(t)},Dqt(t,s,i){return this.Nc.i_t()?this.eqt(t,i):this.iqt(t,i)},kqt:t=>!!t&&t.SH(),Lqt:t=>!!t&&t.CH(),Nqt:t=>!!t&&t.TH(),Bqt:t=>!!t&&!t.hV(),Wqt:(t,s,i)=>!!t&&Tv.compare(100*t.wF(),s,i),jqt(t){const s=this.Nc.uB();return!!s&&s.Q5(t)},z$t:()=>!0,Vqt(){return this.B$t>0},Hqt(t,s){const i=this.Nc.uOt();return!!i&&!!s&&!!i.yct(t,s)}}}{let _v=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]},Cv=function(t,s){return t[1]-s[1]};0;const Iv=self._s,Pv=[],Av=[],Ev=Iv.Un(Iv.Rect),Rv=Iv.Un(Iv.xo),Fv=[];Iv.sW.tW.yht={Uqt(t,s){t.lrt(s)},zqt(t,s){t.Zi()&&"number"!=typeof s&&(s=parseFloat(s)),t.lrt(t.Cnt()+s)},Jqt(t,s){t.Zi()&&t.lrt(t.Cnt()-s)},$qt(t,s){t.lrt(!!s)},qqt(t){t.lrt(!t.Cnt())},Xqt(t){t.lrt(t.Rgt())},Yqt(t){this.Nc.oN().Zgt(t)},Kqt(t,s,i,e,n,r){if(!t||!s)return;const h=this.Nc.aV(t,s,i,e,n,r);if(!h)return;n&&s.lV(h);const o=this.Nc.oN();o.uV(!0),h.cV(),o.uV(!1);const a=new Map;h.sOt(a,t,n);for(const[t,s]of a)t.eV().Npt(s)},Zqt(t,s,i,e,n,r){if(!t||!s)return;const h=this.Nc.Rzt(t);h&&Iv.sW.tW.yht.Kqt.call(this,h,s,i,e,n,r)},g1(t,s,i,e,n,r,h,o,a,l,u){if(!t)return;const c=this.Nc.RB();let f=c;if(r){const t=this.Nc.dB().I6(r);if(!t)return;f=t}let d=null;if(("number"!=typeof h||h>=0)&&(d=f.kB(h),!d))return;let p=null;if(("number"!=typeof o||o>=0)&&(p=c.kB(o),!p))return;Ev.set(s,i,e,n);const m=f.g1(t,Ev,d,p,a,l,u);t.eV().Lpt(m),t.dbt()},Qqt(){const t=this.kmt;t.Rmt()&&t.Amt().eq()},Swt(t,s){const i=this.Nc.oN().tyt(t);i&&(0===s?i.Swt(!1):1===s?i.Swt(!0):i.Swt(!i.wwt()))},tXt(t){this.Nc.jN(t)},sXt(t,s){if(s<0&&(s=0),!t)return;const i=t.eV().iV();for(const t of i)t.jN(s)},iXt(t){if(!t)return;const s=t.eV().iV();for(const t of s)t.EU()},dh(t,s){if(t<0)return;const i=this.Nc.oN().Oyt();return s?i.jCt(t):i.VCt(t),!0},GN(t){return this.Nc.oN().Oyt().HCt(t),!0},eXt(){const t=this.Nc.oN();return t.Oyt().UCt(t.Xyt()),!0},xN(t){this.Nc.oN().xN(t)},async YB(t,s,i,e,n,r){const h=this.Nc.GB();h&&(this.VB(),await h.YB(0===t?"image/png":"image/jpeg",s/100,i,e,n,r),await this.Nc.KB(Iv.sW.tW.QB.ZB,null))},nXt(t,s){if(t<=0||s<=0)return;this.Nc.vjt(t,s),this.Nc.RB().J3();const i=this.Nc.GB();i&&("off"===i.djt()||this.Nc.Ozt(t,s),i.BA(i.nX(),i.rX(),!0),this.Nc.VB())},rXt(t){const s=this.Nc.GB();s&&"off"!==s.djt()&&(s.Cjt(0!==t?"high":"low"),s.BA(s.nX(),s.rX(),!0))},zet(t){this.Nc.jJt(t)},hXt(){this.Nc.VJt()},oXt(t){this.Nc.HJt(t)},aXt(t){this.Nc.Y_t(t)},lXt(t){},uXt(){for(const t of this.Nc.dB().gB())t.l6()},cXt(t){this.Nc.NJt(0!==t)},fXt(t,s){this.Nc.nB(1/t),this.Nc.sB(1/s)},dXt(t,s){this.Nc.sB(t),this.Nc.nB(s)},pXt(t){this.Nc.ZN(["vsync","unlimited-tick","unlimited-frame"][t])},mXt(t,s){if(!t)return;const i=t.eV().iV(),e=Pv,n=Av,r=this.Nc.RB(),h=t.S1(),o=t.kMt();for(let t=0,r=i.length;t<r;++t){const r=i[t],a=r.DB();if(!a)continue;let l;l=h?r.lot(s+r.cU().DMt(o)):r.lot(s),e.push([a.kB().ML(),a.LB()]),n.push([r,l])}if(!e.length)return;e.sort(_v),n.sort(Cv);let a=!1;for(let t=0,s=e.length;t<s;++t){const s=n[t][0],i=r.NB(e[t][0]),h=e[t][1],o=i.BB();o[h]!==s&&(o[h]=s,s.DB().WB(i,!0),i.jB(s),a=!0)}a&&this.Nc.VB(),Iv.Sh(Pv),Iv.Sh(Av)},DW(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Nc.AL().DW(t,s)},gXt(t){if(this.Nc.Tw())return;const s=this.Nc.dB();s.wB()||s.SB(t)},yXt(t){if(this.Nc.Tw())return;const s=this.Nc.dB();if(s.wB())return;const i=s.I6(t);i&&s.SB(i)},wXt(t){if(this.Nc.Tw())return;const s=this.Nc.dB();if(s.wB())return;const i=s.gB(),e=i.indexOf(s.uB());if(t&&0===e)return;if(!t&&e===i.length-1)return;const n=i[e+(t?-1:1)];s.SB(n)},SXt(){if(this.Nc.Tw())return;const t=this.Nc.dB();t.wB()||(t.SB(t.uB()),this.Nc.oN().nyt())},vXt(t,s){t&&t.yH(s)},bXt(t,s){t&&t.MH(s)},MXt(t,s){t&&t.GH(s)},xXt(t,s){t&&t.vF(s/100)},TXt(t,s){t&&t.IH(s)},GXt(t,s){t&&t.EH(s)},_Xt(t,s){t&&t.RV(Iv.Zn(+s))},CXt(t,s,i){t&&(t.KH(!0),t.OV(s),t.kV(i))},IXt(t){t&&t.KH(!1)},PXt(t,s,i){t&&t.Q1(s/100,i/100)},AXt(t,s){t&&t.tx(+s)},EXt(t,s){t&&t.jH(1===s)},RXt(t,s){if(!t)return;Rv.Qo(s),Rv.Yn();const i=t.YH();i.zo(Rv)||(i.ko(Rv),this.VB())},FXt(t,s){t&&t.UH(s)},OXt(t,s){t&&t.LM(s)},DXt(t,s,i){if(!t)return;const e=t._V().Drt(i);if(!e)return;const n=1===s;e.lSt()!==n&&(e.HLt(n),t.S$(),this.Nc.VB())},kXt(t,s,i,e){if(!t)return;const n=t._V(),r=n.Drt(s);if(!r)return;i=Math.floor(i);const h=r.z_().q_(i);h&&("color"===h?(Rv.Qo(e),e=Rv):"percent"===h&&(e/=100),n.b$(r.ML(),i,e)&&r.lSt()&&this.Nc.VB())},LXt(t,s){t&&t.$H(s)},NXt(t){this.Nc.RB().AV(+t)},BXt(t){this.Nc.RB().RV(Iv.Zn(+t))},WXt(t,s){const i=this.Nc.RB(),e=i._V().Drt(s);if(!e)return;const n=1===t;e.lSt()!==n&&(e.HLt(n),i.S$(),this.Nc.VB())},jXt(t,s,i){const e=this.Nc.RB()._V(),n=e.Drt(t);if(!n)return;s=Math.floor(s);const r=n.z_().q_(s);r&&("color"===r?(Rv.Qo(i),i=Rv):"percent"===r&&(i/=100),e.b$(n.ML(),s,i)&&n.lSt()&&this.Nc.VB())},VXt(t,s){this.Nc.RB().eH(t/100,s/100)},HXt(t){const s=this.Nc.RB();0===t?s.hH():s.oH()},UXt(t){this.Nc.RB().OV(t)},zXt(t){this.Nc.RB().kV(t)},JXt(t,s){const i=this.Nc.RB();i.OV(t),i.kV(s)},$Xt(t){if(!t)return;const s=t.UGt();if(!s)return;const i=s.DB();if(!i)return;const e=this.Nc.RB();e.OV(i.qM()),e.kV(i.KM())},XV(t,s,i){const e=this.Nc.RB();try{e.XV(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},KV(t,s,i){if(!t)return;const e=this.Nc.RB();try{e.KV(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},QV(t){t&&this.Nc.RB().QV(t)},sH(){this.Nc.RB().sH()},async qXt(t){const s=this.Nc.uB();if(!s||!t||this.Nc.Tw())return;const i=t.S1()?t.MV():[t];await this.U$t(s,i)},async XXt(t){await Iv.sW.tW.yht.qXt.call(this,this.Nc.Rzt(t))},YXt(t){const s=this.Nc.uB();if(!s||!t)return;const i=t.S1()?t.MV():[t];this.J$t(s,i)},KXt(t){Iv.sW.tW.yht.YXt.call(this,this.Nc.Rzt(t))},ZXt(){const t=this.Nc.uB();if(!t)return;const s=t.c4();this.J$t(t,s)},async QXt(t){const s=this.Nc.uB();t&&s&&!this.Nc.Tw()&&await this.U$t(s,t.a4())},async tYt(t){const s=this.Nc.uB(),i=this.Nc.dB().I6(t);i&&s&&!this.Nc.Tw()&&await this.U$t(s,i.a4())},MN(t){const s=this.Mpt.SN();if(s)switch(s.bN()){case 1:"number"==typeof t&&s.MN(t);break;case 2:"string"==typeof t&&s.MN(t);break;case 3:s.MN(t)}},sYt(t,s,i){const e=this.nqt(t.toLowerCase(),!0),n=e.hqt,r=s.toLowerCase();n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`);const h=Iv.Bh(n.values())||e.rqt;h&&0!==h.yN()!=(0!==i.yN())?console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`):n.set(r,i)},iYt(t,s){const i=this.nqt(t.toLowerCase(),!0);i.rqt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const e=Iv.Bh(i.hqt.values())||i.rqt;e&&0!==e.yN()!=(0!==s.yN())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):i.rqt=s},eYt(t,s,i){const e=this.Nc,n=e.i_t()?Fv:null;i=Math.floor(i);const r=this.nqt(t.toLowerCase(),!1);if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r.hqt.get(s.toLowerCase());if(!h){if(!r.rqt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.rqt,i=0}if(!h._u())return n;if(0!==h.yN())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=e.oN(),a=o.dN(),l=a.fN(),u=l.length>0;u&&(h.gN()?o.hY(l):o.Ryt(l));const c=[],f=o.Gwt(a);if(f){const t=f.Cwt();for(let s=i,e=t.length;s<e;++s)c.push(t[s].Cnt())}const d=h.Cwt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].Rgt());return e.i_t()?this.aqt(o,h,c,u,l):this.oqt(o,h,c,u,l)}}}{const Ov=self._s;Ov.sW.tW.wht={nYt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},I:t=>t.toString(),kt:t=>"string"==typeof t?t.length:0,random(t,s){return void 0===s?this.Nc.lB()*t:this.Nc.lB()*(s-t)+t},vMt(...t){return t[Math.floor(this.Nc.lB()*t.length)]},rYt:(t,...s)=>("number"!=typeof t&&(t=0),s[t=Ov.Yn(Math.floor(t),0,s.length-1)]),hYt:()=>Math.PI,oYt:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),aYt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(Ov.Zn(t)),cos:t=>Math.cos(Ov.Zn(t)),tan:t=>Math.tan(Ov.Zn(t)),asin:t=>Ov.Qn(Math.asin(t)),acos:t=>Ov.Qn(Math.acos(t)),atan:t=>Ov.Qn(Math.atan(t)),exp:t=>Math.exp(t),Vt:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s<e&&(s=e)}return s},min(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s>e&&(s=e)}return s},Yn:(t,s,i)=>Ov.Yn(t,s,i),vt:(t,s,i,e)=>Ov.ir(t,s,i,e),angle:(t,s,i,e)=>Ov.Qn(Ov.nr(t,s,i,e)),_t:(t,s,i)=>Ov._t(t,s,i),pr:(t,s,i)=>Ov.pr(t,s,i),gr:(t,s,i,e)=>Ov.gr(t,s,i,e),yr:(t,s,i,e,n)=>Ov.yr(t,s,i,e,n),wr:(t,s,i)=>Ov.wr(t,s,i),lYt:(t,s)=>Ov.Qn(Ov.rr(Ov.Zn(t),Ov.Zn(s))),uYt:(t,s,i)=>Ov.Qn(Ov.lr(Ov.Zn(t),Ov.Zn(s),i)),cYt:(t,s,i)=>Ov.Qn(Ov.hr(Ov.Zn(t),Ov.Zn(s),Ov.Zn(i))),fYt:(t,s,i)=>(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s,dYt:(t,s)=>(t|=0)^1<<s,pYt:(t,s)=>(t|=0)&1<<(s|=0)?1:0,mYt:()=>"\n",gYt:t=>"string"==typeof t?t.toUpperCase():"",yYt:t=>"string"==typeof t?t.toLowerCase():"",left:(t,s)=>"string"==typeof t?t.substr(0,s):"",mid:(t,s,i)=>"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i),right:(t,s)=>"string"==typeof t?t.substr(Math.max(t.length-s,0)):"",trim:t=>"string"==typeof t?t.trim():"",wYt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},SYt:(t,s)=>"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0,find:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(Ov.Yi(s),"i")):-1,vYt:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(Ov.Yi(s),"")):-1,replace:(t,s,i)=>"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(Ov.Yi(s),"gi"),i):"string"==typeof t?t:"",bYt(t,...s){let i=t;for(let t=0,e=s.length;t<e;++t)i=i.replaceAll(`{${t}}`,s[t].toString());return i},MYt(t,s,i){const e=this.V$t(s,i);return t?t.search(e):-1},xYt(t,s,i,e){const n=this.V$t(s,i);return t?t.replace(n,e):""},TYt(t,s,i){const e=this.H$t(t.toString(),s,i);return e?e.length:0},GYt(t,s,i,e){e=Math.floor(e);const n=this.H$t(t.toString(),s,i);return!n||e<0||e>=n.length?"":n[e]},_Yt(t,s){let i=t<0?"-":"";t<0&&(t=-t);const e=s-t.toString().length;return i+="0".repeat(Math.max(e,0)),i+t.toString()},CYt:t=>encodeURIComponent(t),IYt:t=>decodeURIComponent(t),PN(){return this.Nc.a7()},PYt(){return this.Nc.l7()},AYt(){return this.Nc.WN()},EYt(){return(Date.now()-this.Nc.IJt())/1e3},RYt:()=>Date.now(),time(){return this.Nc.ON()},FYt(){return this.Nc.kN()},OYt(){return this.Nc.EJt()},VN(){return this.Nc.HN()},DYt(){return this.Nc.$N()},kYt(){return this.Nc.XN()},LYt(){return this.Nc.GB().oj()},NYt(){return this.Nc.GB().lj()},BYt(){return this.Nc.$L()},WYt(){return this.Nc.XL()},jYt(){return this.Nc.$L()},VYt(){return this.Nc.XL()},HYt(){return this.Nc.RB().DV()},UYt(){return this.Nc.RB().LV()},zYt(){return this.Nc.RB().Pc()},JYt(){return this.Nc.RB().EV()},$Yt(){return Ov.Qn(this.Nc.RB().FV())},qYt(){return this.Nc.RB().Vg()},XYt(){return this.Nc.RB().Zg()},YYt(){return 100*this.Nc.RB().J5()},KYt(){return 100*this.Nc.RB().q5()},ZYt(t){const s=this.Nc.RB().kB(t);return s?s.z1().Za():0},QYt(t){const s=this.Nc.RB().kB(t);return s?s.z1().Qa():0},tKt(t){const s=this.Nc.RB().kB(t);return s?s.z1().tl():0},sKt(t){const s=this.Nc.RB().kB(t);return s?s.z1().sl():0},iKt(t){const s=this.Nc.RB().kB(t);return s?s.z1().width():0},eKt(t){const s=this.Nc.RB().kB(t);return s?s.z1().height():0},nKt(t){const s=this.Nc.RB().kB(t);if(s){const t=s.z1();return(t.Za()+t.tl())/2}return 0},rKt(t){const s=this.Nc.RB().kB(t);if(s){const t=s.z1();return(t.Qa()+t.sl())/2}return 0},hKt(t,s,i){const e=this.Nc.RB().kB(t);return e?e.sU(s,i)[0]:0},oKt(t,s,i){const e=this.Nc.RB().kB(t);return e?e.sU(s,i)[1]:0},aKt(t,s,i){const e=this.Nc.RB().kB(t);return e?e.eU(s,i)[0]:0},lKt(t,s,i){const e=this.Nc.RB().kB(t);return e?e.eU(s,i)[1]:0},uKt(t,s,i,e){const n=this.Nc.RB(),r=n.kB(t),h=n.kB(s);if(!r||!h||r===h)return i;const[o,a]=r.eU(i,e);return h.sU(o,a)[0]},cKt(t,s,i,e){const n=this.Nc.RB(),r=n.kB(t),h=n.kB(s);if(!r||!h||r===h)return e;const[o,a]=r.eU(i,e);return h.sU(o,a)[1]},fKt(t){const s=this.Nc.RB().kB(t);return s?s.PH():0},dKt(t){const s=this.Nc.RB().kB(t);return s?Ov.Qn(s.FH()):0},pKt(t){const s=this.Nc.RB().kB(t);return s?100*s.wF():0},mKt(t){const s=this.Nc.RB().kB(t);return s?s.RH():0},gKt(t){const s=this.Nc.RB().kB(t);return s?s.DV():0},yKt(t){const s=this.Nc.RB().kB(t);return s?s.LV():0},wKt(t){const s=this.Nc.RB().kB(t);return s?100*s.kH():0},SKt(t){const s=this.Nc.RB().kB(t);return s?100*s.BH():0},vKt(t){const s=this.Nc.RB().kB(t);return s?s.QM():0},bKt(t){const s=this.Nc.RB().kB(t);return s?s.ML():-1},MKt(){const t=this.Nc.GB();return t?t.Zjt():""},xKt(t){const s=this.kmt;if(!s.Rmt())return 0;if(t){const i=s.Omt(t);return i?i.ML():0}return s.Amt().ML()},TKt(){return this.Nc.UJt()},GKt(t,s,...i){const e=this.nqt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=e.hqt.get(s.toLowerCase());if(!n){if(!e.rqt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=e.rqt}const r=n.yN(),h=n.lN();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n._u())return h;const o=this.Nc.oN(),a=o.dN().fN(),l=a.length>0;l&&(n.gN()?o.hY(a):o.Ryt(a));const u=n.Cwt();for(let t=i.length,s=u.length;t<s;++t)i.push(u[t].Rgt());const c=n.cN(),f=c.mN(c.fN(),n.gN(),r,h,...i);return l&&o.aY(a),f},_Kt(){return this.Nc.CL().hB()},CKt(){return this.PZ()},JC(){return this.Nc.Ojt()?"webgpu":"webgl"},IKt(){return this.Nc.Ojt()?this.Nc.Ojt().Djt():this.Nc.Fjt().IO()},PKt(){let t=this.Nc.mM().Ub();return Math.round(100*t/1048576)/100},AKt:(t,s,i)=>Ov._r(t,s,i),EKt:(t,s,i)=>Ov.Ir(t/100,s/100,i/100),RKt:(t,s,i,e)=>Ov.Cr(t/100,s/100,i/100,e/100),FKt:(t,s,i)=>Ov.Ir(t/255,s/255,i/255),OKt:(t,s,i,e)=>Ov.Cr(t/255,s/255,i/255,e/255),DKt(){return this.Nc.OL()},kKt(){return this.Nc.kL()},LKt(){return this.Nc.NL()},NKt(){return this.Nc.WL()},BKt(){return this.Nc.dN().K5().Pc()},WKt(){return this.Nc.dN().xvt()}}}{const Dv=self._s;Dv.sW.Nrt=class extends Dv.YCt{constructor(t){super(t)}zn(){super.zn()}}}{const kv=self._s,Lv=self.Ls,Nv=[];kv.sW.Nrt.fRt=class extends kv.OIt{constructor(t){super(t),this.rRt=t.HRt()}zn(){kv.Sh(this.rRt),super.zn()}SIt(){for(const t of this.rRt)t.hEt(this.Nc)}d4(t){const s={lT:this.Nc.YL()};return Promise.all(this.rRt.map(i=>i.oEt(t,s)))}v4(){for(const t of this.rRt)t.aEt()}y4(){this.jKt()}jKt(){for(const t of this.ppt.sV())t.s$().VKt()}dTt(t){kv.sW.Nrt.ICt(this,t)}ZTt(t){Nv.push({NIt:null,HKt:!1,$j:[]})}UKt(t,s,i){const e=Nv.at(-1);e.NIt=t,e.HKt=i,e.$j.push(s)}QTt(t){const s=Nv.pop(),i=s.NIt,e=s.HKt;if(!i)return;const n=new Map;for(const t of s.$j)t.sOt(n,i,e);for(const[t,s]of n)t.eV().Npt(s)}zKt(t){const s=this.cU().qRt(t),i=this.aW();return s.lEt(0).W$().YY(i.mM(),{lT:i.YL()}).then(()=>this.jKt()),s}JKt(t){for(const s of this.ppt.sV())s.s$().$Kt(t);this.cU().XRt(t)}qKt(t,s){const i=this.ppt.JRt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.dEt(s);e<0&&(e+=i.R$()+1);const n=kv.eEt.rEt(this.aW());i.uEt(n,e);const r=this.aW();n.W$().YY(r.mM(),{lT:r.YL()}).then(()=>this.jKt());for(const t of this.ppt.sV())t.s$().XKt();return n}YKt(t,s){const i=this.ppt.JRt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.R$())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.dEt(s);e<0&&(e+=i.R$()),i.cEt(e);for(const t of this.ppt.sV())t.s$().XKt()}vIt(){return self.KKt}};const Bv=new WeakMap;self.KKt=class extends self.nV{constructor(t){super(t),Bv.set(this,t.KTt())}ZKt(t){Lv.le(t);const s=Bv.get(this).cU().JRt(t);return s?s.pEt():null}QKt(){return Bv.get(this).cU().zRt().map(t=>t.pEt())}tZt(t){return Lv.le(t),Bv.get(this).zKt(t).pEt()}sZt(t){Lv.le(t),Bv.get(this).JKt(t)}iZt(t,s){if(Lv.le(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return Bv.get(this).qKt(t,s).D$()}eZt(t,s){if(Lv.le(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");Bv.get(this).YKt(t,s)}}}{const Wv=self._s,jv=self.Ls,Vv=0,Hv=1,Uv=2,zv=3,Jv=Wv.Un(Wv.Rect),$v=Wv.Un(Wv.Il),qv=Wv.Un(Wv.Ia),Xv=1,Yv=2,Kv=4;Wv.sW.Nrt.Instance=class extends Wv.dPt{constructor(t,s){super(t);let i=!0,e="",n=0,r=!0;s&&(i=!!s[Vv],e=s[Hv],n=s[Uv],r=s[zv]),this.nZt=this.ppt.JRt(e)||this.ppt.HRt()[0],this.rZt=Wv.Yn(n,0,this.nZt.R$()-1),this.hZt=this.nZt.lEt(this.rZt);const h=this.hZt.W$();this.oZt=h.xG(),this.aZt=h.gE(),this.lZt=h.GPt(),this.yPt(),t.QFt(Yv,!0),t.QFt(Xv,this.nZt.x$()>=0),this.uZt=Math.abs(this.nZt.x$()),this.cZt=this.nZt.P$(),this.fZt=Wv.Un(Wv.Qf),this.dZt=0,this.pZt=0,this.mZt="",this.gZt=-1,this.yZt="",this.wZt=0;const o=this.DB();this.SZt=o.Wz(),o.yH(i),o.eJ(r),o.Iz(this.hZt.Cz()),o.Ez(this.hZt.Az()),o.nLt(this.hZt.Y$()),o.Mz(),1===this.ppt.URt()&&1===this.ppt.HRt()[0].R$()||0===this.uZt||this.nPt()}zn(){this.nZt=null,this.hZt=null,this.oZt=null,this.fZt=null,super.zn()}bPt(){return this.hZt.W$()}yet(){return!0}nQ(){this.oZt=null}vPt(){this.VKt()}Kx(t){const s=this.oZt;if(null===s)return;t.xF(s);const i=this.DB();i.zJ()?this.vZt(i,t):this.bZt(i,t)}bZt(t,s){let i=this.SZt;this.Nc.ZL()&&(i=t.Ykt(i)),s.DF(i,this.lZt)}vZt(t,s){const i=t.mLt();if(t.yLt()){t.Lz(Jv,$v,!1);let s=$v;this.Nc.ZL()&&(s=t.Ykt(s)),i.zx(t.JJ(),s,this.lZt),t.gLt(!1)}i.Kx(s,t.Dz())}MZt(){return this.fZt.zs()}xZt(){return this.fi.tOt(Yv)}TZt(t){this.fi.QFt(Yv,t)}GZt(){return this.fi.tOt(Xv)}_Zt(t){this.fi.QFt(Xv,t)}CZt(){return this.fi.tOt(Kv)}IZt(t){this.fi.QFt(Kv,t)}u7(){this.yZt&&this.PZt(),this.gZt>=0&&this.AZt();const t=this.uZt;if(!this.xZt()||0===t)return void this.VIt();const s=this.Nc.AN(this.fi);this.fZt.Bu(s);const i=this.MZt(),e=this.hZt,n=e.j$()/t;if(i<this.dZt+n)return;const r=this.nZt,h=this.cZt,o=r.R$(),a=r.C$(),l=r.G$(),u=r.E$();this.GZt()?this.rZt++:this.rZt--,this.dZt+=n,this.rZt>=o&&(u?(this._Zt(!1),this.rZt=o-2):l?this.rZt=h:(this.pZt++,this.pZt>=a?this.EZt(!1):this.rZt=h)),this.rZt<0&&(u?(this.rZt=1,this._Zt(!0),l||(this.pZt++,this.pZt>=a&&this.EZt(!0))):l?this.rZt=h:(this.pZt++,this.pZt>=a?this.EZt(!0):this.rZt=h)),this.rZt=Wv.Yn(this.rZt,0,o-1);const c=r.lEt(this.rZt);i>this.dZt+c.j$()/t&&(this.dZt=i),this.RZt(e,c)}EZt(t){this.rZt=t?0:this.nZt.R$()-1,this.TZt(!1),this.mZt=this.nZt.Pc(),this.IZt(!0),this.LIt("animationend",!1,{animationName:this.mZt}),this.$U(Wv.sW.Nrt.QB.FZt),this.$U(Wv.sW.Nrt.QB.OZt),this.IZt(!1),this.pZt=0}RZt(t,s,i){if(t===s)return;const e=this.DB(),n=t.W$(),r=s.W$(),h=n.Vg(),o=n.Zg(),a=r.Vg(),l=r.Zg();i&&i.Brt?i.Brt(e,h,o,a,l):(h!==a&&e.Xg(e.Vg()*(a/h)),o!==l&&e.Hg(e.Zg()*(l/o))),e.Iz(s.Cz()),e.Ez(s.Az()),e.nLt(s.Y$()),e.Mz(),this.hZt=s,this.oZt=r.xG(),this.aZt=r.gE(),this.lZt=r.GPt();const u=this.Iq().Rrt();for(let i=0,e=u.length;i<e;++i)u[i].uAt(t,s);this.LIt("framechange",!1,{animationName:this.nZt.Pc(),DZt:this.rZt}),this.$U(Wv.sW.Nrt.QB.kZt),this.Nc.VB()}LZt(t){this.TZt(!0),this.dZt=this.MZt(),1===t&&0!==this.rZt&&(this.gZt=0,this.CZt()||this.AZt()),this.nPt()}NZt(t,s,i){this.yZt=t,this.wZt=s,this.nPt(),!i&&this.CZt()||this.PZt()}BZt(){return this.nZt}WZt(){return this.yZt?this.yZt:this.nZt.Pc()}$Kt(t){Wv.Ke(t,this.WZt())&&this.NZt(this.ppt.YRt().Pc(),1,!0)}jZt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.ppt.JRt(this.WZt());if(!s)return;if(-1===(t=s.fEt(t)))return}isFinite(t)&&(this.gZt=t,this.CZt()||this.AZt())}XKt(){if(this.yZt||-1!==this.gZt)return;const t=this.hZt,s=this.nZt.lEt(Wv.Yn(this.rZt,0,this.nZt.R$()-1));t!==s&&this.RZt(t,s),this.nZt.R$()>1&&this.uZt>0&&this.nPt()}VZt(){return this.rZt}HZt(){return this.hZt.tq()}UZt(t){this.uZt=Math.abs(t),this._Zt(t>=0),this.uZt>0&&this.nPt()}zZt(){return this.GZt()?this.uZt:-this.uZt}JZt(t){"string"==typeof t&&-1===(t=this.nZt.fEt(t))||(t=Wv.Yn(Math.floor(t),0,this.nZt.R$()-1),this.cZt=t)}$Zt(){return this.cZt}PZt(t){const s=this.hZt,i=this.ppt.JRt(this.yZt);if(this.yZt="",!i)return;if(i===this.nZt&&this.xZt())return;this.nZt=i,this._Zt(i.x$()>=0),this.uZt=Math.abs(i.x$()),this.cZt=i.P$(),this.rZt=Wv.Yn(this.rZt,0,this.nZt.R$()-1),1===this.wZt&&(this.rZt=0),this.TZt(!0),this.dZt=this.MZt();const e=this.nZt.lEt(this.rZt);this.RZt(s,e,t)}AZt(t){const s=this.hZt,i=this.rZt;if(this.rZt=Wv.Yn(Math.floor(this.gZt),0,this.nZt.R$()-1),this.gZt=-1,!t&&i===this.rZt)return;const e=this.nZt.lEt(this.rZt);this.RZt(s,e),this.dZt=this.MZt()}VKt(){const t=this.hZt.W$();this.oZt=t.xG(),this.aZt=t.gE(),this.lZt=t.GPt(),this.DB().gLt(!0)}xG(){return this.oZt}gE(){return this.aZt}GPt(){return this.lZt}H$(){return this.hZt.H$()}dGt(t){const s=this.hZt,i=this.DB();let e=null;if("string"==typeof t)e=s.q$(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.$$(t-1)}let n=i.Dz();if(!e)return[i.qM(),i.KM(),n];if(qv.m(e.GEt()),i.zJ()){const[t,s,e]=i.JJ().nT(qv.Fa(),qv.Da());qv.set(t,s),n+=e}return qv.offset(-s.Cz(),-s.Az()),qv.scale(i.Vg(),i.Zg()),qv.rotate(i.FV()),qv.offset(i.qM(),i.KM()),[qv.Fa(),qv.Da(),n]}qZt(){return this.DB().lLt().pu()}XZt(t){t=Math.floor(t);const s=this.DB(),i=s.lLt(),e=i.pu();if(t===e&&(t=0),t<0||t>=e)return[0,0];const n=i.du();return[n[2*t+0]+s.qM(),n[2*t+1]+s.KM()]}aPt(){const t=Wv.sW.Nrt.yht,s="plugins.sprite.debugger.animation-properties";return[{title:s+".title",properties:[{name:s+".current-animation",value:this.nZt.Pc(),YZt:s=>this.uPt(t.KZt,s,0)},{name:s+".current-frame",value:this.rZt,YZt:s=>this.uPt(t.ZZt,s)},{name:s+".is-playing",value:this.xZt(),YZt:s=>s?this.uPt(t.QZt,0):this.uPt(t.tQt)},{name:s+".speed",value:this.uZt,YZt:s=>this.uPt(t.sQt,s)},{name:s+".repeats",value:this.pZt,YZt:t=>this.pZt=t}]}]}ux(){const t={a:this.nZt.C1()};0!==this.dZt&&(t.fs=this.dZt);const s=this.MZt();0!==s&&(t.at=s),0!==this.rZt&&(t.f=this.rZt),0!==this.uZt&&(t.cas=this.uZt),1!==this.pZt&&(t.ar=this.pZt),0!==this.cZt&&(t.rt=this.cZt),this.xZt()||(t.ap=this.xZt()),this.GZt()||(t.af=this.GZt());const i=this.DB();return i.iJ()&&(t.ce=i.iJ()),t}mx(t){const s=this.cU().$Rt(t.a);s&&(this.nZt=s),this.dZt=t.hasOwnProperty("fs")?t.fs:0,this.fZt.Set(t.hasOwnProperty("at")?t.at:0);const i=t.hasOwnProperty("f")?t.f:0;this.rZt=Wv.Yn(i,0,this.nZt.R$()-1),this.uZt=t.hasOwnProperty("cas")?t.cas:0,this.pZt=t.hasOwnProperty("ar")?t.ar:1;const e=t.hasOwnProperty("rt")?t.rt:0;this.cZt=Wv.Yn(e,0,this.nZt.R$()-1),this.TZt(!t.hasOwnProperty("ap")||!!t.ap),this._Zt(!t.hasOwnProperty("af")||!!t.af);const n=this.nZt.lEt(this.rZt);this.hZt=n,this.VKt();const r=this.DB();r.Iz(n.Cz()),r.Ez(n.Az()),r.nLt(n.Y$()),r.eJ(!!t.ce),this.xZt()&&this.nPt()}tot(t){const s=this.DB();switch(t){case zv:return s.iJ();case Uv:return Wv.Yn(this.rZt,0,this.nZt.R$()-1);case Hv:return this.nZt.Pc()}}hot(t,s,i){const e=this.DB();switch(t){case zv:e.eJ(!!s);break;case Uv:{this.TZt(!1);const t=this.nZt.R$()-1,e=s=Wv.Yn(s,0,t),n=this.nZt.lEt(this.rZt),r=this.nZt.lEt(e);this.RZt(n,r,i),this.rZt=Wv.Yn(e,0,t);break}case Hv:this.yZt=s,this.PZt(i),this.nZt.R$()>1&&this.nZt.x$()>0?this.nPt():this.VIt()}}vIt(){return self.iQt}};const Zv=new WeakMap,Qv=new Map([["current-frame",0],["beginning",1]]);self.iQt=class extends self.YJ{constructor(){super(),Zv.set(this,self.uU.pU().s$())}V$(){return Zv.get(this).H$()}U$(t){return this.z$(t)[0]}J$(t){return this.z$(t)[1]}eQt(t){return this.z$(t)[2]}z$(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return Zv.get(this).dGt(t)}X$(){return Zv.get(this).qZt()}K$(t){return jv.re(t),Zv.get(this).XZt(t)[0]}Q$(t){return jv.re(t),Zv.get(this).XZt(t)[1]}Z$(t){return jv.re(t),Zv.get(this).XZt(t)}nQt(){Zv.get(this).TZt(!1)}rQt(t="current-frame"){jv.le(t);const s=Qv.get(t);if(void 0===s)throw new Error("invalid mode");Zv.get(this).LZt(s)}hQt(t,s="beginning"){jv.le(t),jv.le(s);const i=Qv.get(s);if(void 0===i)throw new Error("invalid mode");const e=Zv.get(this);if(!e.cU().JRt(t))throw new Error(`animation name "${t}" does not exist`);e.NZt(t,i)}ZKt(t){jv.le(t);const s=Zv.get(this).cU().JRt(t);return s?s.pEt():null}get animation(){return Zv.get(this).BZt().pEt()}get animationName(){return Zv.get(this).WZt()}set DZt(t){jv.re(t),Zv.get(this).jZt(t)}get DZt(){return Zv.get(this).VZt()}set oQt(t){jv.le(t),Zv.get(this).jZt(t)}get oQt(){return Zv.get(this).HZt()}set aQt(t){jv.re(t),Zv.get(this).UZt(t)}get aQt(){return Zv.get(this).zZt()}set lQt(t){jv.re(t),Zv.get(this).JZt(t)}get lQt(){return Zv.get(this).$Zt()}get imageWidth(){return Zv.get(this).bPt().Vg()}get imageHeight(){return Zv.get(this).bPt().Zg()}uQt(){const t=Zv.get(this).bPt();return[t.Vg(),t.Zg()]}async cQt(t){jv.Ne(t,Blob);const s=Zv.get(this),i=s.aW(),e=s.bPt(),n=Wv.Un(Wv.PAt);if(n.HAt(i,t),await n.YY(i.mM(),{lT:i.YL()}),s.Jn())return void n.zn();e.UAt(n);const r=s.KTt();r.jKt(),r.cU().wf().dispatchEvent(new Wv.Event("animationframeimagechange")),i.VB()}fQt(t,s){jv.le(s),Zv.get(this).DB().Jkt(!!t,s)}}}{const tb=self._s;tb.sW.Nrt.QB={dQt(t){return tb.Ke(this.WZt(),t)},pQt(t,s){return tb.compare(this.rZt,t,s)},mQt(t,s){if("string"!=typeof s)return!1;const i=this.hZt.tq();return tb.compare(i.toLowerCase(),t,s.toLowerCase())},gQt(t,s){return tb.compare(this.zZt(),t,s)},OZt(t){return tb.Ke(this.mZt,t)},FZt:()=>!0,kZt:()=>!0,yQt(){return this.DB().Vg()<0},wQt(){return this.DB().Zg()<0},SQt:()=>!0,vQt:()=>!0,iJ(){return this.DB().iJ()}}}{const sb=self._s;sb.sW.Nrt.yht={bQt(t,s,i,e,n){if(!t||!s)return;const[r,h]=this.dGt(i),o=this.Nc.aV(t,s,r,h,e,n);if(!o)return;if(e&&s.lV(o),t.zj().Gj()){const t=o.DB();t.RV(this.DB().FV()),t.Mz()}const a=this.Nc.oN();a.uV(!0),o.cV(),a.uV(!1),t!==this.Nc.kgt().cU()&&this.jIt.UKt(t,o,e)},tQt(){this.TZt(!1)},QZt(t){this.LZt(t)},KZt(t,s){this.NZt(t,s)},ZZt(t){this.jZt(t)},sQt(t){this.UZt(t)},MQt(t){this.JZt(t)},xQt(t,s){try{0===t?this.KTt().zKt(s):this.KTt().JKt(s)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation: `,s)}},TQt(t,s,i){try{0===t?this.KTt().qKt(s,i):this.KTt().YKt(s,i)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation frame: `,s)}},GQt(t){const s=this.DB(),i=s.Vg(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Xg(e),s.Mz())},_Qt(t){const s=this.DB(),i=s.Zg(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Hg(e),s.Mz())},AV(t){const s=this.hZt.W$(),i=this.DB(),e=i.Vg()<0?-1:1,n=i.Zg()<0?-1:1,r=s.Vg()*t*e,h=s.Zg()*t*n;i.Vg()===r&&i.Zg()===h||(i.BA(r,h),i.Mz())},async CQt(t,s,i){const e=this.hZt.W$(),n=this.DB(),r=this.Nc,h=this.jIt;if(e.xZ()===t)return 0===s&&(n.BA(e.Vg(),e.Zg()),n.Mz()),void this.$U(sb.sW.Nrt.QB.SQt);const o=sb.Un(sb.PAt);try{if(await o.VAt(r,t),!o.KZ())throw new Error("image failed to load");if(this.Jn())return void o.zn();await o.YY(r.mM(),{lT:r.YL()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jn()||this.$U(sb.sW.Nrt.QB.vQt))}this.Jn()?o.zn():(e.UAt(o),h.jKt(),h.cU().wf().dispatchEvent(new sb.Event("animationframeimagechange")),r.VB(),0===s&&(n.BA(e.Vg(),e.Zg()),n.Mz()),await this.KB(sb.sW.Nrt.QB.SQt))},IQt(t){this.DB().eJ(t)},Jkt(t,s){this.DB().Jkt(0===t,s)},PQt(t){this.DB().LM(t),this.Nc.VB()}}}self._s.sW.Nrt.wht={AQt(){return this.VZt()},EQt(){return this.HZt()},RQt(){return this.nZt.R$()},FQt(){return this.nZt.Pc()},OQt(){return this.zZt()},DQt(){return this.nZt.x$()},kQt(t){return this.dGt(t)[0]},LQt(t){return this.dGt(t)[1]},NQt(t){return this.dGt(t)[2]},BQt(){return this.H$()},WQt(){return this.bPt().Vg()},jQt(){return this.bPt().Zg()},VQt(t){return this.XZt(t)[0]},HQt(t){return this.XZt(t)[1]},UQt(){return this.qZt()}};{const ib=self._s;ib.sW.zQt=class extends ib.YCt{constructor(t){super(t)}zn(){super.zn()}},ib.sW.zQt.JQt=-2147483648,ib.sW.zQt.$Qt=1073741824,ib.sW.zQt.qQt=536870912,ib.sW.zQt.XQt=3758096384,ib.sW.zQt.YQt=536870911}{const eb=self._s,nb=eb.sW.zQt.JQt,rb=eb.sW.zQt.$Qt,hb=eb.sW.zQt.qQt,ob=eb.sW.zQt.YQt;eb.sW.zQt.fRt=class extends eb.OIt{constructor(t){super(t),this.KQt=[],this.ZQt=!1,this.QQt=0,this.t0t=[],this.s0t=null}zn(){this.s0t.clear(),this.s0t=null,super.zn()}SIt(){this.W$().oW(this.Nc)}d4(t){return this.W$().YY(t,{lT:this.Nc.YL()})}v4(){this.W$().oA()}y4(){for(const t of this.cU().sV())t.s$().i0t()}kIt(t,s,i){this.QQt=s;for(const s of t)if(s){const t=s[0],i=!!s[1];this.KQt.push({YDt:t,use:i,e0t:[[[null,null],[null,null]],[[null,null],[null,null]]]})}else this.KQt.push(null);for(const t of i){const s=t[0],i=t[1],e=t[2];this.t0t.push({name:s,type:i,n0t:e})}}r0t(t,s){this.ZQt=!1,this.h0t(t,s)}h0t(t,s){if(!this.ZQt){this.ZQt=!0;for(let i=0,e=this.KQt.length;i<e;++i)this.KQt[i]&&(this.o0t(i,t,s,!1,!1,!1),this.o0t(i,t,s,!1,!1,!0),this.o0t(i,t,s,!1,!0,!1),this.o0t(i,t,s,!1,!0,!0),this.o0t(i,t,s,!0,!1,!1),this.o0t(i,t,s,!0,!1,!0),this.o0t(i,t,s,!0,!0,!1),this.o0t(i,t,s,!0,!0,!0))}}o0t(t,s,i,e,n,r){if(t<0||t>=this.KQt.length)return;const h=this.KQt[t];if(!h)return;const o=eb.Un(eb.au,h.YDt,h.use);o.transform(s,i,0),r&&o.ru(),e&&o.iu(s/2),n&&o.nu(i/2),h.e0t[e?1:0][n?1:0][r?1:0]=null,h.e0t[e?1:0][n?1:0][r?1:0]=o}a0t(t){if(-1===t)return null;const s=t&ob;if(s<0||s>=this.KQt.length)return null;const i=this.KQt[s];if(!i)return null;const e=t&nb?1:0,n=t&rb?1:0,r=t&hb?1:0;return i.e0t[e][n][r]}l0t(t){return!t||t._u()}u0t(){return this.QQt}c0t(t){this.s0t||(this.s0t=new Map);const s=this.s0t.get(t);if("number"==typeof s&&s>=0)return this.t0t[s];for(let s=0;s<this.t0t.length;s++)if(this.t0t[s].name===t)return this.s0t.set(t,s),this.t0t[s]}}}{let ab=function(t){const s=[],i=t.split(",");for(let t=0,e=i.length;t<e;++t){const e=i[t],n=e.indexOf("x");if(n>-1){let t=parseInt(e.substring(0,n),10);const i=e.substring(n+1);let r=parseInt(i,10);for(i.includes("h")&&(r|=wb),i.includes("v")&&(r|=Sb),i.includes("d")&&(r|=vb);t>0;--t)s.push(r)}else{let t=parseInt(e,10);e.includes("h")&&(t|=wb),e.includes("v")&&(t|=Sb),e.includes("d")&&(t|=vb),s.push(t)}}return s};0;const lb=self._s,ub=self.Ls,cb=0,fb=1,db=2,pb=3,mb=4,gb=5,yb=6,wb=lb.sW.zQt.JQt,Sb=lb.sW.zQt.$Qt,vb=lb.sW.zQt.qQt,bb=lb.sW.zQt.XQt,Mb=lb.sW.zQt.YQt,xb=lb.Un(lb.Rect),Tb=lb.Un(lb.Rect),Gb=lb.Un(lb.Rect);lb.sW.zQt.Instance=class extends lb.dPt{constructor(t,s){super(t);const i=this.DB();this.f0t=32,this.d0t=32,this.p0t=0,this.m0t=0,this.g0t=0,this.y0t=0,this.w0t=0,this.S0t=0,this.v0t=i.Vg(),this.b0t=i.Zg(),this.MQ=0,this.xQ=0,this.M0t=[],this.x0t=new Map,this.T0t=!0,this.G0t=null,s&&(i.yH(s[cb]),this.f0t=Math.max(s[fb],1),this.d0t=Math.max(s[db],1),this.p0t=s[pb],this.m0t=s[mb],this.g0t=s[gb],this.y0t=s[yb]),this.MQ=Math.ceil(this.Nc.$L()/this.f0t),this.xQ=Math.ceil(this.Nc.XL()/this.d0t),this.jIt.h0t(this.f0t,this.d0t),this._0t=null}zn(){this.C0t(),lb.Sh(this.M0t),this.M0t=null,this.x0t.clear(),this.x0t=null,super.zn()}C0t(){this.G0t&&(this.G0t.zn(),this.G0t=null)}kIt(t,s,i){this.w0t=s,this.S0t=i,this.I0t(!0),this.P0t(t),this.A0t()}I0t(t){const[s,i]=this.E0t();if(s<=this.w0t&&i<=this.S0t&&!t)return;let e=0,n=0;t?(e=Math.ceil(this.S0t/this.xQ),n=Math.ceil(this.w0t/this.MQ)):(e=this.M0t.length,n=Math.ceil(this.w0t/this.MQ),i>this.S0t&&(this.S0t=i,e=Math.ceil(this.S0t/this.xQ)),s>this.w0t&&(this.w0t=s,n=Math.ceil(this.w0t/this.MQ)),this.R0t(),this.F0t(),this.Nc.VB());const r=this.M0t;if(r.length<e)for(let t=r.length;t<e;++t)r.push([]);for(let t=0;t<e;++t){const s=r[t];for(let i=s.length;i<n;++i)s.push(lb.Un(lb.sW.zQt.O0t,this,i,t))}}P0t(t){const s=ab(t);let i=0;const e=this.w0t,n=this.MQ,r=this.xQ;for(let t=0,h=this.S0t;t<h;++t)for(let h=0;h<e;++h){const e=s[i++],o=this.D0t(h,t);o&&o.k0t(h%n,t%r,e)}}L0t(){let t="";if(this.w0t<=0||this.S0t<=0)return t;let s=1,i=this.N0t(0,0);const[e,n]=this.E0t();let r=-1,h=!1,o=!1,a=!1;for(let l=0;l<n;++l)for(let n=0===l?1:0;n<e;++n){const e=this.N0t(n,l);e===i?++s:(-1===i?(r=-1,h=!1,o=!1,a=!1):(r=i&Mb,h=0!==(i&wb),o=0!==(i&Sb),a=0!==(i&vb)),t+=1===s?""+r:s+"x"+r,h&&(t+="h"),o&&(t+="v"),a&&(t+="d"),t+=",",s=1,i=e)}return-1===i?(r=-1,h=!1,o=!1,a=!1):(r=i&Mb,h=0!==(i&wb),o=0!==(i&Sb),a=0!==(i&vb)),t+=1===s?""+r:s+"x"+r,h&&(t+="h"),o&&(t+="v"),a&&(t+="d"),t}R0t(){const t=this.M0t;for(let s=0,i=t.length;s<i;++s){const i=t[s];for(let t=0,s=i.length;t<s;++t)i[t].B0t()}this.T0t=!0}A0t(){if(!this.T0t)return;this.T0t=!1;const t=this.M0t;for(let s=0,i=t.length;s<i;++s){const i=t[s];for(let t=0,s=i.length;t<s;++t)i[t].W0t()}}j0t(){this.T0t=!0,this.F0t(),this.Nc.VB()}F0t(){this.DB().fLt(!0)}D0t(t,s){if(t<0||s<0)return null;const i=Math.floor(s/this.xQ);if(i>=this.M0t.length)return null;const e=this.M0t[i],n=Math.floor(t/this.MQ);return n>=e.length?null:e[n]}V0t(t,s){if(t<0||s<0||s>=this.M0t.length)return null;const i=this.M0t[s];return t>=i.length?null:i[t]}N0t(t,s){if(t=Math.floor(t),s=Math.floor(s),t<0||s<0||t>=this.w0t||s>=this.S0t)return-1;const i=this.D0t(t,s);return i?i.H0t()[s%this.xQ][t%this.MQ]:-1}k0t(t,s,i){if(t=Math.floor(t),s=Math.floor(s),t<0||s<0||t>=this.w0t||s>=this.S0t)return;if(-1!==i&&(i&Mb)>this.u0t())return;const e=this.D0t(t,s);e&&e.k0t(t%this.MQ,s%this.xQ,i)}u0t(){return this.jIt.u0t()}U0t(t){return Math.floor((t-this.DB().qM())/(this.MQ*this.f0t))}z0t(t){return Math.floor((t-this.DB().KM())/(this.xQ*this.d0t))}J0t(t){return Math.floor((t-this.DB().qM())/this.f0t)}$0t(t){return Math.floor((t-this.DB().KM())/this.d0t)}q0t(){return this.w0t}X0t(){return this.S0t}Y0t(){return Math.floor(this.DB().Vg()/this.K0t())}Z0t(){return Math.floor(this.DB().Zg()/this.Q0t())}E0t(){const t=this.DB();return[Math.floor(t.Vg()/this.K0t()),Math.floor(t.Zg()/this.Q0t())]}K0t(){return this.f0t}Q0t(){return this.d0t}t1t(){return this.MQ}s1t(){return this.xQ}xNt(t,s){const i=this.U0t(t.Za()),e=this.z0t(t.Qa()),n=this.U0t(t.tl()),r=this.z0t(t.sl());for(let t=i;t<=n;++t)for(let i=e;i<=r;++i){const e=this.V0t(t,i);e&&(e.W0t(),lb.Rn(s,e.i1t()))}}IPt(t,s){const i=this.J0t(t),e=this.$0t(s),n=this.N0t(i,e);if(-1===n)return!1;const r=this.jIt.a0t(n);if(!r)return!0;if(!this.jIt.l0t(r))return!1;const h=this.DB();return t-=Math.floor((t-h.qM())/this.f0t)*this.f0t+h.qM(),s-=Math.floor((s-h.KM())/this.d0t)*this.d0t+h.KM(),r.Tl(t,s)}e1t(t){const s=this.M0t;for(let i=0,e=s.length;i<e;++i){const e=s[i];for(let s=0,i=e.length;s<i;++s){const i=e[s];i.W0t(),lb.Rn(t,i.i1t())}}}bPt(){return this.G0t||this.ppt.W$()}n1t(t){const s=this.x0t,i=s.get(t);if(i)return i;const e=t&Mb,n=0!==(t&wb),r=0!==(t&Sb),h=0!==(t&vb),o=this.bPt(),a=o.Vg(),l=this.f0t,u=this.p0t,c=this.g0t,f=Math.floor((a-u)/(l+c)*l)+c,d=Math.floor(f/l),p=e%d,m=Math.floor(e/d),g=o.zAt()+this.p0t+(this.f0t+this.g0t)*p,y=o.JAt()+this.m0t+(this.d0t+this.y0t)*m;xb.Ua(g,y,this.f0t,this.d0t),xb.wt(o.$At(),o.qAt());const w=lb.Un(lb.Il);return w.Xl(xb),h&&w.ru(),n&&w.iu(),r&&w.nu(),w.offset(p,m),s.set(t,w),w}i0t(){this.x0t.clear(),this.R0t()}Kx(t){const s=this.bPt(),i=s.xG();if(!i)return;xb.m(s.gE()),xb.offsetLeft(this.p0t/i.Vg()),xb.offsetTop(this.m0t/i.Zg()),t.dv(),t.qF(xb,i.Vg(),i.Zg(),this.f0t,this.d0t,this.g0t,this.y0t),t.xF(i);const e=this.DB(),n=e.kB();e.Vg()===this.v0t&&e.Zg()===this.b0t||(this.F0t(),this.R0t(),this.v0t=e.Vg(),this.b0t=e.Zg());let r=e.qM(),h=e.KM();this.Nc.ZL()&&(r=Math.round(r),h=Math.round(h));const o=this.MQ*this.f0t,a=this.xQ*this.d0t,l=e.Dz(),u=Tb;if(n.l2()){u.set(-1/0,-1/0,1/0,1/0);const s=Gb,i=n.P3();for(const e of this.M0t)for(const n of e)n.r1t(s),i.Xw(s.Za(),s.Qa(),l,s.tl(),s.sl(),l)&&(n.W0t(),n.Kx(t,u,r,h))}else{n.q1(l,u);const s=Math.floor((u.Za()-r)/o),i=Math.floor((u.tl()-r)/o),e=Math.floor((u.Qa()-h)/a),c=Math.floor((u.sl()-h)/a);for(let n=s;n<=i;++n)for(let s=e;s<=c;++s){const i=this.V0t(n,s);i&&(i.W0t(),i.Kx(t,u,r,h))}}}ux(){this.I0t();const[t,s]=this.E0t();return{tw:this.f0t,th:this.d0t,tox:this.p0t,toy:this.m0t,tsx:this.g0t,tsy:this.y0t,w:t,h:s,d:this.L0t()}}mx(t){this.f0t=t.tw,this.d0t=t.th,this.p0t=t.tox,this.m0t=t.toy,this.g0t=t.tsx,this.y0t=t.tsy,this.w0t=t.w,this.S0t=t.h,this.I0t(!0),this.P0t(t.d),this.F0t(),this.R0t()}h1t(){this.I0t();const[t,s]=this.E0t();return JSON.stringify({c2tilemap:!0,width:t,height:s,data:this.L0t()})}o1t(t){switch(t){case 0:default:return 0;case 1:return wb;case 2:return Sb;case 3:return wb|vb;case 4:return wb|Sb;case 5:return Sb|vb;case 6:return wb|Sb|vb;case 7:return vb}}tot(t){switch(t){case fb:return this.f0t;case db:return this.d0t;case pb:return this.p0t;case mb:return this.m0t;case gb:return this.g0t;case yb:return this.y0t}}hot(t,s){switch(t){case fb:if(this.f0t===s)return;this.f0t=Math.max(s,1),this.MQ=Math.ceil(this.Nc.$L()/this.f0t),this.jIt.r0t(),this.a1t();break;case db:if(this.d0t===s)return;this.d0t=Math.max(s,1),this.xQ=Math.ceil(this.Nc.XL()/this.d0t),this.jIt.r0t(),this.a1t();break;case pb:if(this.p0t===s)return;this.p0t=s,this.a1t();break;case mb:if(this.m0t===s)return;this.m0t=s,this.a1t();break;case gb:if(this.g0t===s)return;this.g0t=s,this.a1t();break;case yb:if(this.y0t===s)return;this.y0t=s,this.a1t()}}a1t(){this.x0t.clear(),this.R0t(),this.A0t()}vIt(){return Cb}};const _b=new WeakMap,Cb=self.l1t=class extends self.YJ{constructor(){super(),_b.set(this,self.uU.pU().s$())}get u1t(){return _b.get(this).q0t()}get c1t(){return _b.get(this).X0t()}f1t(){const t=_b.get(this);return[t.q0t(),t.X0t()]}get d1t(){return _b.get(this).Y0t()}get p1t(){return _b.get(this).Z0t()}m1t(){const t=_b.get(this);return[t.Y0t(),t.Z0t()]}get g1t(){return _b.get(this).K0t()}get y1t(){return _b.get(this).Q0t()}w1t(){const t=_b.get(this);return[t.K0t(),t.Q0t()]}S1t(t,s){return ub.re(t),ub.re(s),_b.get(this).N0t(t,s)}v1t(t,s,i){ub.re(t),ub.re(s),ub.re(i);const e=_b.get(this);e.I0t(),e.k0t(t,s,i)}async b1t(t){ub.Ne(t,Blob);const s=_b.get(this),i=s.aW(),e=lb.Un(lb.PAt);e.HAt(i,t),await e.YY(i.mM(),{lT:i.YL()}),s.Jn()?e.zn():(s.C0t(),s.G0t=e,s.x0t.clear(),s.R0t(),i.VB())}};Cb.JQt=wb,Cb.$Qt=Sb,Cb.qQt=vb,Cb.XQt=bb,Cb.YQt=Mb}{const Ib=self._s,Pb=Ib.sW.zQt.XQt,Ab=Ib.sW.zQt.YQt;Ib.sW.zQt.QB={M1t(t,s,i,e){let n=this.N0t(t,s);return-1!==n&&(n&=Ab),Ib.compare(n,i,e)},x1t(t,s,i){const e=this.N0t(t,s);let n=0;return-1!==e&&(n=e&Pb),n===this.o1t(i)},SQt:()=>!0,vQt:()=>!0,T1t(t){return this._0t||(this._0t=new Ib.sW.zQt.G1t(this,this.jIt)),this._0t.T1t(t)}}}{const Eb=self._s,Rb=Eb.sW.zQt.YQt;Eb.sW.zQt.yht={_1t(t,s){this.I0t(),this.k0t(t,s,-1)},C1t(t,s,i,e){this.I0t(),this.k0t(t,s,i&Rb|this.o1t(e))},I1t(t,s,i){const e=this.N0t(t,s);-1!==e&&(this.I0t(),this.k0t(t,s,e&Rb|this.o1t(i)))},P1t(t,s,i,e){const n=Math.floor(Math.max(t,0)),r=Math.floor(Math.max(s,0)),h=Math.floor(Math.min(t+i,this.w0t)),o=Math.floor(Math.min(s+e,this.S0t));for(let t=r;t<o;++t)for(let s=n;s<h;++s)this.k0t(s,t,-1)},A1t(t,s,i,e,n,r){this.I0t();const h=Math.floor(Math.max(t,0)),o=Math.floor(Math.max(s,0)),a=Math.floor(Math.min(t+i,this.w0t)),l=Math.floor(Math.min(s+e,this.S0t)),u=n&Rb|this.o1t(r);for(let t=o;t<l;++t)for(let s=h;s<a;++s)this.k0t(s,t,u)},E1t(t,s,i,e,n){this.I0t();const r=Math.floor(Math.max(t,0)),h=Math.floor(Math.max(s,0)),o=Math.floor(Math.min(t+i,this.w0t)),a=Math.floor(Math.min(s+e,this.S0t)),l=this.o1t(n);for(let t=h;t<a;++t)for(let s=r;s<o;++s){const i=this.N0t(s,t);-1!==i&&this.k0t(s,t,i&Rb|l)}},R1t(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse tilemap JSON: ",t)}s.c2tilemap?(this.w0t=s.width,this.S0t=s.height,this.I0t(!0),this.P0t(s.data),this.R0t(),this.F0t()):console.error("[Construct] Unrecognized JSON data format")},F1t(t){const s=URL.createObjectURL(new Blob([this.h1t()],{type:"application/json"}));this.Nc.CB(s,t)},async CQt(t,s){if(this.G0t&&this.G0t.xZ()===t)return;const i=this.Nc,e=Eb.Un(Eb.PAt);try{if(await e.VAt(i,t),!e.KZ())throw new Error("image failed to load");if(this.Jn())return e.zn(),null;if(!await e.YY(i.mM(),{lT:i.YL()}))return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jn()||this.$U(Eb.sW.zQt.QB.vQt))}this.Jn()?e.zn():(this.C0t(),this.G0t=e,i.VB(),this.x0t.clear(),this.R0t(),await this.KB(Eb.sW.zQt.QB.SQt))},PQt(t){t>=2&&t++,this.DB().LM(t),this.Nc.VB()},O1t(t,s,i){if(this.I0t(),this._0t||(this._0t=new Eb.sW.zQt.G1t(this,this.jIt)),this._0t.T1t(i))switch(this._0t.D1t(i)){case 0:case 1:this._0t.k1t(t,s,i);break;case 2:this._0t.L1t(t,s,i)}},N1t(t,s,i,e,n,r,h){this.I0t(),this._0t||(this._0t=new Eb.sW.zQt.G1t(this,this.jIt)),this._0t.T1t(i)&&2===this._0t.D1t(i)&&this._0t.L1t(t,s,i,e,n,r,h)},B1t(t,s,i){if(this.I0t(),this._0t||(this._0t=new Eb.sW.zQt.G1t(this,this.jIt)),this._0t.T1t(i))switch(this._0t.D1t(i)){case 0:case 1:this._0t.W1t(t,s,i);break;case 2:this._0t.j1t(t,s,i)}},V1t(t,s,i,e,n,r){this.I0t(),this._0t||(this._0t=new Eb.sW.zQt.G1t(this,this.jIt)),this._0t.T1t(i)&&2===this._0t.D1t(i)&&this._0t.j1t(t,s,i,e,n,r)},H1t(t,s,i,e,n,r,h){Eb.sW.zQt.yht.N1t.call(this,t,s,i,e,n,r,h)},U1t(t,s,i,e,n,r){Eb.sW.zQt.yht.V1t.call(this,t,s,i,e,n,r)},z1t(t,s,i){Eb.sW.zQt.yht.O1t.call(this,t,s,i)},J1t(t,s,i){Eb.sW.zQt.yht.B1t.call(this,t,s,i)}}}{const Fb=self._s,Ob=Fb.sW.zQt.YQt;Fb.sW.zQt.wht={$1t(t,s){const i=this.N0t(t,s);return-1===i?-1:i&Ob},q1t(t){return this.J0t(t)},X1t(t){return this.$0t(t)},Y1t(t){return t*this.f0t+this.DB().qM()+this.f0t/2},K1t(t){return t*this.d0t+this.DB().KM()+this.d0t/2},Z1t(t){const s=this.DB().qM();return Math.floor((t-s)/this.f0t)*this.f0t+s+this.f0t/2},Q1t(t){const s=this.DB().KM();return Math.floor((t-s)/this.d0t)*this.d0t+s+this.d0t/2},t2t(){return this.h1t()},s2t(){return this.K0t()},i2t(){return this.Q0t()},e2t(){return this.Y0t()},n2t(){return this.Z0t()},r2t(t){return this._0t||(this._0t=new Fb.sW.zQt.G1t(this,this.jIt)),this._0t.T1t(t)&&2===this._0t.D1t(t)?this._0t.h2t(t):0},o2t(t){return this._0t||(this._0t=new Fb.sW.zQt.G1t(this,this.jIt)),this._0t.T1t(t)&&2===this._0t.D1t(t)?this._0t.a2t(t):0}}}{const Db=self._s,kb=Db.sW.zQt.JQt,Lb=Db.sW.zQt.$Qt,Nb=Db.sW.zQt.qQt,Bb=Db.sW.zQt.YQt,Wb=Db.Un(Db.Rect),jb=Db.Un(Db.Il);Db.sW.zQt.l2t=class extends Db.Vn{constructor(){super(),this.Wc=-1,this.u2t=-1,this.c2t=!1,this.f2t=!1,this.d2t=!1,this.p2t=Db.Un(Db.Rect),this.m2t=null}IQ(t,s,i,e,n,r,h,o){this.Wc=t,this.u2t=t&Bb,this.c2t=0!==(t&kb),this.f2t=0!==(t&Lb),this.d2t=0!==(t&Nb),this.p2t.Ua(e*s+r,n*i+h,s,i),this.m2t=o.n1t(this.Wc)}Kx(t,s,i,e,n){Wb.m(this.p2t),Wb.offset(i,e),Wb.Ml(s)&&(jb.Xl(Wb),t.DF(jb,this.m2t))}}}{const Vb=self._s;Vb.sW.zQt.g2t=class extends Vb.Vn{constructor(){super(),this.Wc=-1,this.y2t=null,this.p2t=Vb.Un(Vb.Rect)}IQ(t,s,i,e,n,r,h,o){this.Wc=t,this.y2t=s,this.p2t.Ua(n*i+h,r*e+o,i,e)}w2t(t){this.p2t.qa(this.p2t.tl()+t)}S2t(){return this.Wc}v2t(){return!!this.y2t}GNt(){return this.y2t}TNt(){return this.p2t}}}{const Hb=self._s;Hb.sW.zQt.YQt;Hb.sW.zQt.O0t=class extends Hb.Vn{constructor(t,s,i){super();const e=t.t1t(),n=t.s1t();this.bFt=t,this.Pa=s,this.Aa=i,this.Wa=this.Pa*e*t.K0t(),this.ja=this.Aa*n*t.Q0t(),this.b2t=[],this.M2t=[],this.x2t=[],this.T2t=!1;for(let t=0;t<n;++t){const t=new Int32Array(e);t.fill(-1),this.b2t.push(t)}}Pu(){const t=this.bFt.t1t(),s=this.bFt.s1t(),i=this.b2t;if(i.length<s)for(let e=i.length;e<s;++e)i.push(new Int32Array(t));else i.length>s&&Hb.wh(i,s);for(let s=0,e=i.length;s<e;++s){let e=i[s];e.length!==t&&(e=new Int32Array(t),i[s]=e),e.fill(-1)}}r1t(t){const s=this.bFt,i=s.DB(),e=s.t1t()*s.K0t(),n=s.s1t()*s.Q0t(),r=i.qM()+this.Wa,h=i.KM()+this.ja;t.set(r,h,r+e,h+n)}B0t(){this.T2t=!1}W0t(){if(this.T2t)return;const t=this.bFt,s=t.KTt(),i=t.DB(),e=t.K0t(),n=t.Q0t(),r=t.t1t(),h=t.s1t(),o=this.Wa,a=this.ja;if(e<=0||n<=0)return;let l=Math.min(t.q0t(),Math.floor(i.Vg()/e)),u=Math.min(t.X0t(),Math.floor(i.Zg()/n));l-=o/e,u-=a/n,l>r&&(l=r),u>h&&(u=h);const c=this.b2t,f=this.M2t;let d=0;for(let s=0;s<u;++s){const i=c[s];for(let r=0;r<l;++r){const h=i[r];if(-1===h)continue;let l=null;d<f.length?l=f[d]:(l=Hb.Un(Hb.sW.zQt.l2t),f.push(l)),l.IQ(h,e,n,r,s,o,a,t),++d}}d<f.length&&Hb.wh(f,d);let p=null,m=!1;const g=this.x2t;Hb.Sh(g);for(let t=0;t<u;++t){const i=c[t];for(let r=0;r<l;++r){const h=i[r],l=s.a0t(h),u=s.l0t(l);-1!==h&&u?!p||l||m?(p&&g.push(p),p=Hb.Un(Hb.sW.zQt.g2t),p.IQ(h,l,e,n,r,t,o,a),m=!!l):p.w2t(e):p&&(g.push(p),p=null,m=!1)}p&&(g.push(p),p=null,m=!1)}let y=g.length;for(let t=0;t<y;++t){const s=g[t];if(s.v2t())continue;const i=s.TNt();for(let s=t+1;s<y;++s){const t=g[s],e=t.TNt();e.Qa()<i.sl()||e.Qa()>i.sl()||e.tl()>i.tl()||e.Za()>i.Za()||t.v2t()||e.Za()===i.Za()&&e.tl()===i.tl()&&(g.splice(s,1),--y,i.Xa(i.sl()+n),--s)}}this.T2t=!0}k0t(t,s,i){this.b2t[s][t]!==i&&(this.b2t[s][t]=i,this.T2t=!1,this.bFt.j0t())}H0t(){return this.b2t}i1t(){return this.x2t}Kx(t,s,i,e){const n=this.bFt,r=this.M2t;for(let h=0,o=r.length;h<o;++h)r[h].Kx(t,s,i,e,n)}}}{const Ub=self._s,zb=Object.freeze([[0,0,0],[0,0,0],[0,0,0]]);Ub.sW.zQt.G1t=class{constructor(t,s){this.bFt=t,this.jIt=s,this.G2t=[null,null,null],this._2t=[Ub.sW.zQt.C2t,Ub.sW.zQt.I2t,Ub.sW.zQt.P2t],this.A2t=new Ub._c}get E2t(){return zb}get R2t(){return-999}get F2t(){return-998}get O2t(){return-1}get D2t(){return 0}get k2t(){return 1}L2t(){return this.bFt}KTt(){return this.jIt}N2t(){return this.A2t}h2t(t){return this.T1t(t)?this.B2t(t):0}a2t(t){return this.T1t(t)?this.W2t(t):0}k1t(t,s,i){this.T1t(i)&&(this.j2t(i,0),this.V2t(t,s,this.H2t(t,s,i)))}W1t(t,s,i){this.T1t(i)&&(this.j2t(i,1),this.U2t(t,s),this.V2t(t,s,this.H2t(t,s,i)))}L1t(t,s,i,e,n,r,h){this.T1t(i)&&(this.j2t(i,0),this.z2t(t,s,i,this.H2t(t,s,i),e,n,r,h,0))}j1t(t,s,i,e,n,r){this.T1t(i)&&(this.j2t(i,1),this.z2t(t,s,i,this.H2t(t,s,i),e,n,r,0,1))}D1t(t){return this.J2t(t)}T1t(t){return!!this.KTt().c0t(t)}$2t(t,s){return this.L2t().N0t(t,s)}q2t(t,s,i){this.L2t().k0t(t,s,i)}U2t(t,s){this.L2t().k0t(t,s,-1)}V2t(t,s,i){i&&(this.q2t(t-1,s-1,i[0][0]),this.q2t(t,s-1,i[1][0]),this.q2t(t+1,s-1,i[2][0]),this.q2t(t-1,s,i[0][1]),this.q2t(t,s,i[1][1]),this.q2t(t+1,s,i[2][1]),this.q2t(t-1,s+1,i[0][2]),this.q2t(t,s+1,i[1][2]),this.q2t(t+1,s+1,i[2][2]))}z2t(t,s,i,e,n=!1,r=!1,h=0,o=0,a=0){if(!e)return;const l=(e=this.X2t(e,i,n,r,h,o,a))[0].length,u=e.length;for(let i=0;i<u;i++)for(let n=0;n<l;n++)if(e[i][n]!==this.R2t)switch(o){case 0:e[i][n]===this.O2t?this.U2t(t+n,s+i):this.q2t(t+n,s+i,e[i][n]);break;case 1:-1!==e[i][n]&&this.q2t(t+n,s+i,e[i][n])}}J2t(t){return this.KTt().c0t(t).type}Y2t(t){const s=this.J2t(t);this.G2t[s]||(this.G2t[s]=new this._2t[s](this))}j2t(t,s){this.Y2t(t);const i=this.J2t(t);this.G2t[i]&&this.G2t[i].K2t(s)}Z2t(t){this.Y2t(t);const s=this.J2t(t);if(this.G2t[s])return this.G2t[s].Q2t()}H2t(t,s,i){this.Y2t(i);const e=this.KTt().c0t(i);if(this.G2t[e.type])return this.G2t[e.type].t3t(t,s,e)}X2t(t,s,i=!1,e=!1,n=0,r=0,h=0){this.Y2t(s);const o=this.KTt().c0t(s);if(this.G2t[o.type])return this.G2t[o.type].s3t(t,i,e,n,r,h)}B2t(t){this.Y2t(t);const s=this.KTt().c0t(t);if(this.G2t[s.type])return this.G2t[s.type].h2t(s)}W2t(t){this.Y2t(t);const s=this.KTt().c0t(t);if(this.G2t[s.type])return this.G2t[s.type].a2t(s)}}}self._s.sW.zQt.i3t=class{constructor(t){this.Vp=t}e3t(t,s,i){const e=this.Vp.$2t(t,s);return!!this.n3t(e,!0,e,i)}n3t(t,s,i,e){return t===this.Vp.O2t?0:s&&t===this.Vp.F2t?1:s&&e&&!this.r3t(i,e)?0:1}h3t(t,s,i,e){const n=e.n0t[t];if(!n.length)return this.Vp.O2t;if(1===n.length)return n[0][0];const r=this.Vp.$2t(s,i);if(this.n3t(r)&&n.some(t=>r===t[0]))return r;const h=this.Vp.N2t();h.Pu();for(let[t,s]of n)t>this.Vp.L2t().u0t()||("number"!=typeof s&&(s=1),h.Fc(s,t));return h.Ec()}r3t(t,s){for(const i of s.n0t)for(const[s]of i)if(s===t)return!0;return!1}};{const Jb=self._s;Jb.sW.zQt.C2t=class{constructor(t){this.Vp=t,this.o3t=new Jb.sW.zQt.i3t(t),this.a3t=t.D2t}K2t(t){this.a3t=t}Q2t(){return this.a3t}h2t(t){return 0}a2t(t){return 0}s3t(t,s=!1,i=!1,e=0,n=0,r=0){return t}t3t(t,s,i){return this.l3t(t,s,i)}l3t(t,s,i){const e=this.a3t===this.Vp.D2t?this.u3t(t,s,void 0,i):this.Vp.O2t,n=this.c3t(t,s-1,"s",i),r=this.c3t(t-1,s,"e",i),h=this.c3t(t+1,s,"w",i),o=this.c3t(t,s+1,"n",i),a=this.Vp.E2t;return a[0][0]=this.Vp.R2t,a[1][0]=this.f3t(n,t,s-1,i),a[2][0]=this.Vp.R2t,a[0][1]=this.f3t(r,t-1,s,i),a[1][1]=this.f3t(e,t,s,i),a[2][1]=this.f3t(h,t+1,s,i),a[0][2]=this.Vp.R2t,a[1][2]=this.f3t(o,t,s+1,i),a[2][2]=this.Vp.R2t,a}c3t(t,s,i,e){return this.o3t.e3t(t,s,e)?this.u3t(t,s,i,e):this.Vp.R2t}u3t(t,s,i,e){this.a3t===this.Vp.k2t&&(i=void 0);const n=this.Vp.$2t(t,s-1),r=this.Vp.$2t(t-1,s),h=this.Vp.$2t(t+1,s),o=this.Vp.$2t(t,s+1),a="n"===i?this.Vp.F2t:n,l="w"===i?this.Vp.F2t:r,u="e"===i?this.Vp.F2t:h,c="s"===i?this.Vp.F2t:o;return 1*this.o3t.n3t(a,!0,n,e)+2*this.o3t.n3t(l,!0,r,e)+4*this.o3t.n3t(u,!0,h,e)+8*this.o3t.n3t(c,!0,o,e)}f3t(t,s,i,e){return t===this.Vp.R2t||t===this.Vp.O2t?t:this.o3t.h3t(t,s,i,e)}}}{const $b=self._s,qb=new Map([[2,1],[8,2],[10,3],[11,4],[16,5],[18,6],[22,7],[24,8],[26,9],[27,10],[30,11],[31,12],[64,13],[66,14],[72,15],[74,16],[75,17],[80,18],[82,19],[86,20],[88,21],[90,22],[91,23],[94,24],[95,25],[104,26],[106,27],[107,28],[120,29],[122,30],[123,31],[126,32],[127,33],[208,34],[210,35],[214,36],[216,37],[218,38],[219,39],[222,40],[223,41],[248,42],[250,43],[251,44],[254,45],[255,46],[0,47]]);$b.sW.zQt.I2t=class{constructor(t){this.Vp=t,this.o3t=new $b.sW.zQt.i3t(t),this.a3t=t.D2t}K2t(t){this.a3t=t}Q2t(){return this.a3t}h2t(t){return 0}a2t(t){return 0}s3t(t,s=!1,i=!1,e=0,n=0,r=0){return t}t3t(t,s,i){return this.d3t(t,s,i)}d3t(t,s,i){const e=this.a3t===this.Vp.D2t?this.p3t(t,s,void 0,i):this.Vp.O2t,n=this.m3t(t-1,s-1,"se",i),r=this.m3t(t,s-1,"s",i),h=this.m3t(t+1,s-1,"sw",i),o=this.m3t(t-1,s,"e",i),a=this.m3t(t+1,s,"w",i),l=this.m3t(t-1,s+1,"ne",i),u=this.m3t(t,s+1,"n",i),c=this.m3t(t+1,s+1,"nw",i),f=this.Vp.E2t;return f[0][0]=this.g3t(n,t-1,s-1,i),f[1][0]=this.g3t(r,t,s-1,i),f[2][0]=this.g3t(h,t+1,s-1,i),f[0][1]=this.g3t(o,t-1,s,i),f[1][1]=this.g3t(e,t,s,i),f[2][1]=this.g3t(a,t+1,s,i),f[0][2]=this.g3t(l,t-1,s+1,i),f[1][2]=this.g3t(u,t,s+1,i),f[2][2]=this.g3t(c,t+1,s+1,i),f}m3t(t,s,i,e){return this.o3t.e3t(t,s,e)?this.p3t(t,s,i,e):this.Vp.R2t}p3t(t,s,i,e){this.a3t===this.Vp.k2t&&(i=void 0);const n=this.Vp.$2t(t,s-1),r=this.Vp.$2t(t-1,s),h=this.Vp.$2t(t+1,s),o=this.Vp.$2t(t,s+1),a=this.Vp.$2t(t-1,s-1),l=this.Vp.$2t(t+1,s-1),u=this.Vp.$2t(t-1,s+1),c=this.Vp.$2t(t+1,s+1),f="n"===i?this.Vp.F2t:n,d="w"===i?this.Vp.F2t:r,p="e"===i?this.Vp.F2t:h,m="s"===i?this.Vp.F2t:o,g="nw"===i?this.Vp.F2t:a,y="ne"===i?this.Vp.F2t:l,w="sw"===i?this.Vp.F2t:u,S="se"===i?this.Vp.F2t:c,v=this.o3t.n3t(f,!0,n,e),b=this.o3t.n3t(d,!0,r,e),M=this.o3t.n3t(p,!0,h,e),x=this.o3t.n3t(m,!0,o,e);return 1*(v&&b?this.o3t.n3t(g,!0,a,e):0)+2*v+4*(v&&M?this.o3t.n3t(y,!0,l,e):0)+8*b+16*M+32*(x&&b?this.o3t.n3t(w,!0,u,e):0)+64*x+128*(x&&M?this.o3t.n3t(S,!0,c,e):0)}g3t(t,s,i,e){return t===this.Vp.R2t||t===this.Vp.O2t?t:this.o3t.h3t(qb.get(t),s,i,e)}}}self._s.sW.zQt.P2t=class{constructor(t){this.Vp=t,this.a3t=t.D2t,this.y3t=0,this.w3t=0,this.S3t=0,this.v3t=0,this.b3t=0,this.M3t=0}K2t(t){this.a3t=t}Q2t(){return this.a3t}h2t(t){return t.n0t[0].length}a2t(t){return t.n0t.length}s3t(t,s=!1,i=!1,e=0,n=0,r=0){switch(t=this.x3t(0,0,e,t),this.v3t=this.y3t,this.b3t=this.w3t,this.M3t=this.S3t,this.S3t&&(t=this.T3t(t)),this.y3t&&(t=this.G3t(t,r===this.Vp.D2t)),this.w3t&&(t=this._3t(t,r===this.Vp.D2t)),t=this.x3t(s?1:0,i?1:0,0,t),e){case 0:this.v3t=this.y3t,this.b3t=this.w3t;break;case 1:this.v3t=1^this.y3t,this.b3t=this.w3t;break;case 2:this.v3t=1^this.y3t,this.b3t=1^this.w3t;break;case 3:this.v3t=this.y3t,this.b3t=1^this.w3t}return this.y3t&&(t=this.G3t(t,r===this.Vp.D2t)),this.w3t&&(t=this._3t(t,r===this.Vp.D2t)),t}t3t(t,s,i){const e=i.n0t[0].length,n=i.n0t.length,r=Array.from({length:n},()=>new Array(e).fill(this.Vp.O2t)),h=this.Vp.N2t();h.Pu();for(let t=0;t<n;t++)for(let s=0;s<e;s++){const e=i.n0t[t][s];switch(this.a3t){case this.Vp.D2t:if(1===e.length){const i=e[0][0];if(i>this.Vp.L2t().u0t())continue;r[t][s]=i}else{for(let[t,s]of e)t>this.Vp.L2t().u0t()||("number"!=typeof s&&(s=1),h.Fc(s,t));r[t][s]=h.Ec()}break;case this.Vp.k2t:i.n0t[t][s][0][0]===this.Vp.O2t?r[t][s]=this.Vp.R2t:r[t][s]=this.Vp.O2t}}return r}x3t(t,s,i,e){switch(i){case 0:this.y3t=t,this.w3t=s,this.S3t=0;break;case 1:this.y3t=1^s,this.w3t=t,this.S3t=1;break;case 2:this.y3t=1^t,this.w3t=1^s,this.S3t=0;break;case 3:this.y3t=s,this.w3t=1^t,this.S3t=1}return e}C3t(t){if(t===this.Vp.R2t||t===this.Vp.O2t)return t;const s=globalThis.l1t;let i=t&s.YQt;return this.M3t&&(i|=s.qQt),this.v3t&&(i|=s.JQt),this.b3t&&(i|=s.$Qt),i}G3t(t,s){for(let s=0;s<t.length;s++)t[s].reverse();if(s){let s=t[0].length,i=t.length;for(let e=0;e<i;e++)for(let i=0;i<s;i++){const s=this.C3t(t[e][i]);t[e][i]=s}}return t}_3t(t,s){if(t.reverse(),s){let s=t[0].length,i=t.length;for(let e=0;e<i;e++)for(let i=0;i<s;i++){const s=this.C3t(t[e][i]);t[e][i]=s}}return t}T3t(t){let s=[],i=t.length,e=t[0].length;for(let n=0;n<e;n++){let e=[];for(let s=0;s<i;s++)e.push(t[s][n]);s.push(e)}return s}};{const Xb=self._s;Xb.sW.Keyboard=class extends Xb.YCt{constructor(t){super(t)}zn(){super.zn()}}}{let Yb=function(){return Zb.Vj().s$()};0;const Kb=self._s;self.Ls,Kb.sW.Keyboard.fRt=class extends Kb.OIt{constructor(t){super(t)}zn(){super.zn()}SIt(){}vIt(){return self.I3t}};let Zb=null;self.I3t=class extends self.nV{constructor(t){super(t),Zb=t,t.aW().vB().keyboard=this}P3t(t){const s=Yb();if("string"==typeof t)return s.A3t(t);if("number"==typeof t)return s.E3t(t);throw new TypeError("expected string or number")}}}{const Qb=self._s,tM="keyboard";Qb.sW.Keyboard.Instance=class extends Qb.BIt{constructor(t,s){super(t,tM),this.R3t=new Set,this.F3t=new Set,this.O3t=0,this.D3t="",this.k3t="",this.L3t=!1;const i=this.aW().wf();this.Yf=new Qb.$f(Qb.jf.Jf(i,"keydown",t=>this.N3t(t.data)),Qb.jf.Jf(i,"keyup",t=>this.B3t(t.data)),Qb.jf.Jf(i,"window-blur",()=>this.W3t()),Qb.jf.Jf(i,"keyboard-blur",()=>this.W3t())),this.Nc.qB(this.$M())}zn(){super.zn()}async $M(){const t=await this.ZIt("init");this.L3t=t.isKeyboardLockSupported}N3t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.R3t.has(i)||(this.R3t.add(i),this.F3t.add(s),this.D3t=i,this.O3t=s,this.k3t=e,this.$U(Qb.sW.Keyboard.QB.j3t),this.$U(Qb.sW.Keyboard.QB.V3t),this.$U(Qb.sW.Keyboard.QB.H3t),this.$U(Qb.sW.Keyboard.QB.U3t))}B3t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.R3t.delete(i),this.F3t.delete(s),this.D3t=i,this.O3t=s,this.k3t=e,this.$U(Qb.sW.Keyboard.QB.z3t),this.$U(Qb.sW.Keyboard.QB.J3t),this.$U(Qb.sW.Keyboard.QB.$3t),this.$U(Qb.sW.Keyboard.QB.q3t)}W3t(){for(const t of this.F3t)this.F3t.delete(t),this.O3t=t,this.$U(Qb.sW.Keyboard.QB.z3t),this.$U(Qb.sW.Keyboard.QB.J3t),this.$U(Qb.sW.Keyboard.QB.q3t);this.R3t.clear()}A3t(t){return this.R3t.has(t)}E3t(t){return this.F3t.has(t)}ux(){return{tk:this.O3t,tkk:this.k3t}}mx(t){this.O3t=t.tk,t.hasOwnProperty("tkk")&&(this.k3t=t.tkk)}aPt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.O3t},{name:t+".debugger.last-key-string",value:Qb.sW.Keyboard.wht.X3t(this.O3t)},{name:t+".debugger.last-typed-key",value:this.k3t}]}]}}}{const sM=self._s,iM=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];sM.sW.Keyboard.QB={A3t(t){return this.F3t.has(t)},V3t(t){return this.O3t===t},j3t:()=>!0,z3t:()=>!0,J3t(t){return this.O3t===t},E3t(t){return t=Math.floor(t),this.F3t.has(t)},U3t(t){return this.O3t===t},q3t(t){return this.O3t===t},H3t(t){const s=iM[t];return this.D3t===s},$3t(t){const s=iM[t];return this.D3t===s},Y3t(t){const s=iM[t];return this.R3t.has(s)},K3t(){return this.L3t},Z3t:()=>!0,Q3t:()=>!0}}{const eM=self._s;eM.sW.Keyboard.yht={async t5t(t){if(!this.L3t)return;let s=[];t&&(s=t.split(",")),(await this.ZIt("lock-keyboard",{keysArr:s})).isOk?this.$U(eM.sW.Keyboard.QB.Z3t):this.$U(eM.sW.Keyboard.QB.Q3t)},s5t(){this.L3t&&this.ZIt("unlock-keyboard")}}}{let nM=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};self._s.sW.Keyboard.wht={i5t(){return this.O3t},X3t:t=>nM(t),e5t(){return this.k3t}}}{const rM=self._s;rM.sW.gamepad=class extends rM.YCt{constructor(t){super(t)}zn(){super.zn()}}}{const hM=self._s;hM.sW.gamepad.fRt=class extends hM.OIt{constructor(t){super(t)}zn(){super.zn()}SIt(){}}}{const oM=self._s,aM="gamepad";class lM{constructor(t,s,i){this.Aw=t,this.Wc=s,this.n5t=new Set(i),this.r5t=new uM,this.h5t=new uM,this.o5t=[],this.a5t=[]}yj(){return this.Wc}IQ(t,s){const i=this.h5t;this.h5t=this.r5t,this.r5t=i,this.r5t.IQ(t,s),oM.xh(this.o5t,this.r5t.l5t(),!1),oM.xh(this.a5t,this.r5t.l5t(),!1);for(let t=0,s=this.r5t.l5t();t<s;++t){const s=this.h5t.u5t(t),i=this.r5t.u5t(t);i>=.5&&s<.5&&(this.o5t[t]=!0),i<.5&&s>=.5&&(this.a5t[t]=!0)}}l5t(){return this.r5t.l5t()}c5t(){return this.r5t.c5t()}f5t(t){return!((t=Math.floor(t))<0||t>=this.o5t.length)&&this.o5t[t]}d5t(t){return!((t=Math.floor(t))<0||t>=this.a5t.length)&&this.a5t[t]}p5t(){this.o5t.fill(!1),this.a5t.fill(!1)}u5t(t){return this.r5t.u5t(t)}m5t(t){return this.r5t.u5t(t)>=.5}g5t(t){return this.r5t.g5t(t)}ML(){return this.Aw}y5t(){return this.n5t}}class uM{constructor(){this.w5t=[],this.S5t=[]}IQ(t,s){const i=this.w5t;let e=0;for(let s=t.length;e<s;++e){const s=t[e];e===i.length?i.push(s.value):i[e]=s.value}e<i.length&&oM.wh(i,e),oM.Th(this.S5t,s)}l5t(){return this.w5t.length}c5t(){return this.S5t.length}u5t(t){return(t=Math.floor(t))<0||t>=this.w5t.length?0:this.w5t[t]}g5t(t){return(t=Math.floor(t))<0||t>=this.S5t.length?0:this.S5t[t]}}oM.sW.gamepad.Instance=class extends oM.BIt{constructor(t,s){super(t,aM),this.v5t=25,this.b5t=0,this.M5t=-1,this.x5t=new Map,s&&(this.v5t=s[0]),this.XIt("gamepad-connected",t=>this.T5t(t)),this.XIt("gamepad-disconnected",t=>this.G5t(t)),this.XIt("input-update",t=>this._5t(t));const i=this.aW().wf();this.Yf=new oM.$f(oM.jf.Jf(i,"tick2",()=>this.i8()),oM.jf.Jf(i,"suspend",()=>this.C5t()),oM.jf.Jf(i,"resume",()=>this.I5t())),this.KIt("ready")}zn(){super.zn()}T5t(t){const s=t.index,i=t.id,e=t.vibrationEffects;this.x5t.has(s)||(this.x5t.set(s,new lM(s,i,e)),this.M5t=s,this.$U(oM.sW.gamepad.QB.P5t),this.M5t=-1)}G5t(t){const s=t.index;this.M5t=s,this.$U(oM.sW.gamepad.QB.A5t),this.M5t=-1,this.x5t.delete(s)}_5t(t){for(const s of t)this.E5t(s)}E5t(t){const s=t.index;this.x5t.has(s)||this.T5t(t);const i=this.x5t.get(s);i.IQ(t.buttons,t.axes);for(let t=0,s=i.l5t();t<s;++t)i.f5t(t)&&(this.b5t=t)}R5t(t){return this.x5t.get(Math.floor(t))||null}F5t(t){if(-1===t)return[...this.x5t.values()];{const s=this.x5t.get(Math.floor(t));return s?[s]:[]}}i8(){for(const t of this.x5t.values())t.p5t()}C5t(){this.KIt("suspend")}I5t(){this.KIt("resume")}aPt(){const t="plugins.gamepad";return[{title:t+".name",properties:[{name:t+".debugger.last-button",value:this.b5t},{name:t+".properties.analog-deadzone.name",value:this.v5t}]}]}}}{const cM=self._s;cM.sW.gamepad.QB={P5t:()=>!0,A5t:()=>!0,m5t(t,s){const i=this.R5t(t);if(!i)return!1;const e=i.m5t(s);return e&&(this.b5t=s),e},O5t(t,s){const i=this.R5t(t);if(!i)return!1;const e=i.f5t(s);return e&&(this.b5t=s),e},D5t(t,s){const i=this.R5t(t);if(!i)return!1;const e=i.d5t(s);return e&&(this.b5t=s),e},k5t(){return this.x5t.size>0},L5t(t,s,i,e){s=Math.floor(s);const n=this.R5t(t);if(!n)return!1;let r=n.g5t(s),h=0;return h=s%2==0?n.g5t(s+1):n.g5t(s-1),r*=100,h*=100,Math.hypot(r,h)<=this.v5t&&(r=0),cM.compare(r,i,e)},N5t(t){const s=this.F5t(t);if(0===s.length)return!1;const i=this.Nc,e=i.oN(),n=i.dN(),r=n.QX(),h=i.vN(),o=h.tY(),a=h.sY(n);i.nY(!1);for(const t of s)for(let s=0,i=t.l5t();s<i;++s)t.f5t(s)&&(this.M5t=t.ML(),this.b5t=s,e.hY(r),n.oY(o,a),e.aY(r),this.M5t=-1);return i.nY(!0),h.fY(),!1},B5t(t){const s=this.F5t(t);if(0===s.length)return!1;const i=this.Nc,e=i.oN(),n=i.dN(),r=n.QX(),h=i.vN(),o=h.tY(),a=h.sY(n);i.nY(!1);for(const t of s)for(let s=0,i=t.l5t();s<i;++s)t.d5t(s)&&(this.M5t=t.ML(),this.b5t=s,e.hY(r),n.oY(o,a),e.aY(r),this.M5t=-1);return i.nY(!0),h.fY(),!1},W5t(t,s){s=Math.floor(s);const i=this.R5t(t);if(!i)return!1;const e=i.m5t(s);return e&&(this.b5t=s),e},j5t(t,s){s=Math.floor(s);const i=this.R5t(t);if(!i)return!1;const e=i.f5t(s);return e&&(this.b5t=s),e},V5t(t,s){s=Math.floor(s);const i=this.R5t(t);if(!i)return!1;const e=i.d5t(s);return e&&(this.b5t=s),e},H5t(t,s){const i=this.R5t(t);if(!i)return!1;const e=i.y5t();return 0===s?e.has("dual-rumble"):1===s&&e.has("trigger-rumble")},U5t:()=>!0}}{const fM=self._s;fM.sW.gamepad.yht={z5t(t,s,i,e){this.KIt("vibrate-dual-rumble",{index:t,duration:s,weakMag:fM.Yn(i/100,0,1),strongMag:fM.Yn(e/100,0,1)})},J5t(t,s,i,e,n,r){this.KIt("vibrate-trigger-rumble",{index:t,duration:s,weakMag:fM.Yn(i/100,0,1),strongMag:fM.Yn(e/100,0,1),leftMag:fM.Yn(n/100,0,1),rightMag:fM.Yn(r/100,0,1)})},$5t(t){this.KIt("reset-vibrate",{index:t})}}}self._s.sW.gamepad.wht={q5t(){return this.x5t.size},X5t(t){const s=this.R5t(t);return s?s.yj():""},Y5t(){return this.M5t},K5t(t){const s=this.R5t(t);if(!s)return"";let i="";for(let t=0,e=s.c5t();t<e;++t)i+=`Axis ${t}: ${Math.round(100*s.g5t(t))}\n`;return i},Z5t(t){const s=this.R5t(t);if(!s)return"";let i="";for(let t=0,e=s.l5t();t<e;++t)i+=`Button ${t}: ${Math.round(100*s.u5t(t))}\n`;return i},Q5t(t,s){const i=this.R5t(t);return i?i.u5t(Math.floor(s)):0},t4t(t,s){const i=this.R5t(t);return i?i.g5t(Math.floor(s)):0},s4t(t){const s=this.R5t(t);return s?s.l5t():0},i4t(t){const s=this.R5t(t);return s?s.c5t():0},e4t(t,s){const i=this.R5t(t);return i?100*i.u5t(Math.floor(s)):0},n4t(t,s){s=Math.floor(s);const i=this.R5t(t);if(!i)return 0;let e=i.g5t(s),n=0;return n=s%2==0?i.g5t(s+1):i.g5t(s-1),e*=100,n*=100,Math.hypot(e,n)<=this.v5t&&(e=0),e},r4t(){return this.b5t},h4t(){return this.b5t}};{const dM=self._s;dM.sW.o4t=class extends dM.YCt{constructor(t){super(t)}zn(){super.zn()}}}{let pM=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};0;const mM=self._s;mM.sW.o4t.fRt=class extends mM.OIt{constructor(t,s){super(t),this.ST="repeat",this.vT="repeat",s&&(this.ST=pM(s[0]),this.vT=pM(s[1]))}zn(){super.zn()}SIt(){this.W$().oW(this.Nc)}d4(t){return this.W$().YY(t,{lT:this.Nc.YL(),oT:this.ST,aT:this.vT})}v4(){this.W$().oA()}a4t(){return this.ST}l4t(){return this.vT}}}{const gM=self._s,yM=self.Ls,wM=0,SM=4,vM=5,bM=6,MM=7,xM=8,TM=9,GM=10,_M=11,CM=12,IM=13,PM=14,AM=gM.Un(gM.Rect),EM=gM.Un(gM.Il),RM=gM.Un(gM.Rect),FM=gM.Un(gM.Il);gM.sW.o4t.Instance=class extends gM.dPt{constructor(t,s){super(t),this.u4t=0,this.c4t=0,this.f4t=1,this.d4t=1,this.p4t=0,this.m4t=!1,this.g4t=0,this.y4t=0,this.w4t=0,this.S4t=0,this.v4t=0,this.G0t=null,s&&(this.DB().yH(!!s[wM]),this.u4t=s[SM],this.c4t=s[vM],this.f4t=s[bM],this.d4t=s[MM],this.p4t=gM.Zn(s[xM]),this.m4t=!!s[TM],this.g4t=s[GM],this.y4t=s[_M],this.w4t=s[CM],this.S4t=s[IM],this.v4t=s[PM])}zn(){this.C0t(),super.zn()}C0t(){this.G0t&&(this.G0t.zn(),this.G0t=null)}b4t(t,s,i){const e=this.bPt(),n=e.Vg(),r=e.Zg(),h=this.u4t/n,o=this.c4t/r,a=this.p4t;RM.set(0,0,t/(n*this.f4t),s/(r*this.d4t)),RM.offset(-h,-o),0===a?i.Xl(RM):i.Yl(RM,-a)}M4t(t,s=!0){if(this.m4t){const s=this.bPt();t.pv(),t.XF(s.Vg()*this.f4t,s.Zg()*this.d4t,this.g4t,this.y4t,this.w4t,this.S4t,this.v4t)}else s&&t.lv()}Kx(t){const s=this.bPt(),i=s.xG();if(null===i)return;this.M4t(t),t.xF(i);const e=s.Vg(),n=s.Zg();let r=this.u4t/e,h=this.c4t/n;0!==this.p4t||this.m4t||("repeat"===this.KTt().a4t()&&(r%=1),"repeat"===this.KTt().l4t()&&(h%=1));const o=this.DB();RM.set(0,0,o.Vg()/(e*this.f4t),o.Zg()/(n*this.d4t)),RM.offset(-r,-h),o.zJ()?this.vZt(o,t):this.bZt(o,t)}bZt(t,s){let i=t.Wz();this.Nc.ZL()&&(i=t.Ykt(i)),0===this.p4t?s.tb(i,RM):(FM.Yl(RM,-this.p4t),s.DF(i,FM))}vZt(t,s){const i=t.mLt();if(t.yLt()){t.Lz(AM,EM,!1);let s=EM;this.Nc.ZL()&&(s=t.Ykt(s));let e=RM;0!==this.p4t&&(FM.Yl(RM,-this.p4t),e=FM),i.zx(t.JJ(),s,e),t.gLt(!1)}i.Kx(s,t.Dz())}bPt(){return this.G0t||this.ppt.W$()}yet(){return!0}xG(){return this.bPt().xG()}x4t(){this.DB().gLt(!0)}T4t(t){this.u4t!==t&&(this.u4t=t,this.Nc.VB(),this.x4t())}G4t(){return this.u4t}_4t(t){this.c4t!==t&&(this.c4t=t,this.Nc.VB(),this.x4t())}C4t(){return this.c4t}I4t(t){this.f4t!==t&&(this.f4t=t,this.Nc.VB(),this.x4t())}P4t(){return this.f4t}A4t(t){this.d4t!==t&&(this.d4t=t,this.Nc.VB(),this.x4t())}E4t(){return this.d4t}R4t(t){this.p4t!==t&&(this.p4t=t,this.Nc.VB(),this.x4t())}F4t(){return this.p4t}O4t(t){t=!!t,this.m4t!==t&&(this.m4t=t,this.Nc.VB())}D4t(){return this.m4t}k4t(t){this.g4t!==t&&(this.g4t=t,this.D4t()&&this.Nc.VB())}L4t(){return this.g4t}N4t(t){this.y4t!==t&&(this.y4t=t,this.D4t()&&this.Nc.VB())}B4t(){return this.y4t}W4t(t){this.w4t!==t&&(this.w4t=t,this.D4t()&&this.Nc.VB())}j4t(){return this.w4t}V4t(t){this.S4t!==t&&(this.S4t=t,this.D4t()&&this.Nc.VB())}H4t(){return this.S4t}U4t(t){this.v4t!==t&&(this.v4t=t,this.D4t()&&this.Nc.VB())}z4t(){return this.v4t}ux(){const t={};return 0!==this.u4t&&(t.iox=this.u4t),0!==this.c4t&&(t.ioy=this.c4t),1!==this.f4t&&(t.isx=this.f4t),1!==this.d4t&&(t.isy=this.d4t),0!==this.p4t&&(t.ia=this.p4t),this.m4t&&(t.tr=!0),1!==this.g4t&&(t.trx=this.g4t),1!==this.y4t&&(t.try=this.y4t),1!==this.w4t&&(t.tra=this.w4t),.1!==this.S4t&&(t.trbmx=this.S4t),.1!==this.v4t&&(t.trbmy=this.v4t),t}mx(t){this.u4t=t.iox||0,this.c4t=t.ioy||0,this.f4t=t.hasOwnProperty("isx")?t.isx:1,this.d4t=t.hasOwnProperty("isy")?t.isy:1,this.p4t=t.ia||0,this.m4t=!!t.tr,this.g4t=t.hasOwnProperty("trx")?t.trx:1,this.y4t=t.hasOwnProperty("try")?t.try:1,this.w4t=t.hasOwnProperty("tra")?t.tra:1,this.S4t=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.v4t=t.hasOwnProperty("trbmy")?t.trbmy:.1}aPt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.G4t(),YZt:t=>this.T4t(t)},{name:t+".image-offset-y.name",value:this.C4t(),YZt:t=>this._4t(t)},{name:t+".image-scale-x.name",value:100*this.P4t(),YZt:t=>this.I4t(t/100)},{name:t+".image-scale-y.name",value:100*this.E4t(),YZt:t=>this.A4t(t/100)},{name:t+".image-angle.name",value:gM.Qn(this.F4t()),YZt:t=>this.R4t(gM.Zn(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.D4t(),YZt:t=>this.O4t(t)},{name:t+".x-random.name",value:100*this.L4t(),YZt:t=>this.k4t(t/100)},{name:t+".y-random.name",value:100*this.B4t(),YZt:t=>this.N4t(t/100)},{name:t+".angle-random.name",value:100*this.j4t(),YZt:t=>this.W4t(t/100)},{name:t+".blend-margin-x.name",value:100*this.H4t(),YZt:t=>this.V4t(t/100)},{name:t+".blend-margin-y.name",value:100*this.z4t(),YZt:t=>this.U4t(t/100)}]}]}tot(t){switch(t){case SM:return this.G4t();case vM:return this.C4t();case bM:return this.P4t();case MM:return this.E4t();case xM:return this.F4t();case TM:return this.D4t();case GM:return this.L4t();case _M:return this.B4t();case CM:return this.j4t();case IM:return this.H4t();case PM:return this.z4t()}}hot(t,s){switch(t){case SM:this.T4t(s);break;case vM:this._4t(s);break;case bM:this.I4t(s);break;case MM:this.A4t(s);break;case xM:this.R4t(s);break;case TM:this.O4t(!!s);break;case GM:this.k4t(s);break;case _M:this.N4t(s);break;case CM:this.W4t(s);break;case IM:this.V4t(s);break;case PM:this.U4t(s)}}vIt(){return self.J4t}};const OM=new WeakMap;self.J4t=class extends self.YJ{constructor(){super(),OM.set(this,self.uU.pU().s$())}set $4t(t){yM.re(t),OM.get(this).T4t(t)}get $4t(){return OM.get(this).G4t()}set q4t(t){yM.re(t),OM.get(this)._4t(t)}get q4t(){return OM.get(this).C4t()}X4t(t,s){yM.re(t),yM.re(s);const i=OM.get(this);i.T4t(t),i._4t(s)}Y4t(){const t=OM.get(this);return[t.G4t(),t.C4t()]}set K4t(t){yM.re(t),OM.get(this).I4t(t)}get K4t(){return OM.get(this).P4t()}set Z4t(t){yM.re(t),OM.get(this).A4t(t)}get Z4t(){return OM.get(this).E4t()}Q4t(t,s){yM.re(t),yM.re(s);const i=OM.get(this);i.I4t(t),i.A4t(s)}t6t(){const t=OM.get(this);return[t.P4t(),t.E4t()]}set s6t(t){yM.re(t),OM.get(this).R4t(t)}get s6t(){return OM.get(this).F4t()}set i6t(t){yM.re(t),OM.get(this).R4t(gM.Zn(t))}get i6t(){return gM.Qn(OM.get(this).F4t())}get imageWidth(){return OM.get(this).bPt().Vg()}get imageHeight(){return OM.get(this).bPt().Zg()}uQt(){const t=OM.get(this).bPt();return[t.Vg(),t.Zg()]}set e6t(t){OM.get(this).O4t(!!t)}get e6t(){return OM.get(this).D4t()}set n6t(t){yM.re(t),OM.get(this).k4t(t)}get n6t(){return OM.get(this).L4t()}set r6t(t){yM.re(t),OM.get(this).N4t(t)}get r6t(){return OM.get(this).B4t()}h6t(t,s){yM.re(t),yM.re(s);const i=OM.get(this);i.k4t(t),i.N4t(s)}o6t(){const t=OM.get(this);return[t.L4t(),t.B4t()]}set a6t(t){yM.re(t),OM.get(this).W4t(t)}get a6t(){return OM.get(this).j4t()}set l6t(t){yM.re(t),OM.get(this).V4t(t)}get l6t(){return OM.get(this).H4t()}set u6t(t){yM.re(t),OM.get(this).U4t(t)}get u6t(){return OM.get(this).z4t()}c6t(t,s){yM.re(t),yM.re(s);const i=OM.get(this);i.V4t(t),i.U4t(s)}f6t(){const t=OM.get(this);return[t.H4t(),t.z4t()]}async b1t(t){yM.Ne(t,Blob);const s=OM.get(this),i=s.aW(),e=gM.Un(gM.PAt);e.HAt(i,t),await e.YY(i.mM(),{lT:i.YL(),oT:s.KTt().a4t(),aT:s.KTt().l4t()}),s.Jn()?e.zn():(s.C0t(),s.G0t=e,i.VB())}}}self._s.sW.o4t.QB={SQt:()=>!0,vQt:()=>!0,d6t(){return this.D4t()}};{const DM=self._s;DM.sW.o4t.yht={p6t(t){this.T4t(t)},m6t(t){this._4t(t)},g6t(t){this.I4t(t/100)},y6t(t){this.A4t(t/100)},w6t(t){this.R4t(DM.Zn(t))},S6t(t){this.O4t(t)},v6t(t,s){this.k4t(t/100),this.N4t(s/100)},b6t(t){this.W4t(t/100)},M6t(t,s){this.V4t(t/100),this.U4t(s/100)},PQt(t){this.DB().LM(t),this.Nc.VB()},async CQt(t,s){if(this.G0t&&this.G0t.xZ()===t)return;const i=this.Nc,e=DM.Un(DM.PAt);try{if(await e.VAt(i,t,!0),!e.KZ())throw new Error("image failed to load");if(this.Jn())return e.zn(),null;if(!await e.YY(i.mM(),{lT:i.YL(),oT:this.KTt().a4t(),aT:this.KTt().l4t()}))return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jn()||this.$U(DM.sW.o4t.QB.vQt))}this.Jn()?e.zn():(this.C0t(),this.G0t=e,i.VB(),await this.KB(DM.sW.o4t.QB.SQt))}}}{const kM=self._s;kM.sW.o4t.wht={WQt(){return this.bPt().Vg()},jQt(){return this.bPt().Zg()},x6t(){return this.u4t},T6t(){return this.c4t},G6t(){return 100*this.f4t},_6t(){return 100*this.d4t},C6t(){return kM.Qn(this.p4t)},I6t(){return 100*this.L4t()},P6t(){return 100*this.B4t()},A6t(){return 100*this.j4t()},E6t(){return 100*this.H4t()},R6t(){return 100*this.z4t()}}}{const LM=self._s,NM=[];LM.sW.Audio=class extends LM.YCt{constructor(t){super(t)}F6t(t){NM.push(t)}static async O6t(){await Promise.all(NM),LM.Sh(NM)}zn(){super.zn()}}}{let BM=function(){return HM.Vj().s$()},WM=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};0;const jM=self._s,VM=self.Ls;jM.sW.Audio.fRt=class extends jM.OIt{constructor(t){super(t)}zn(){super.zn()}SIt(){}vIt(){return self.D6t}};let HM=null;self.D6t=class extends self.nV{constructor(t){super(t),HM=t}get k6t(){return WM().GetAudioContextExtern()}get L6t(){return WM().GetDestinationNodeExtern()}get N6t(){return BM().B6t()}set N6t(t){BM().W6t(t)}get j6t(){return BM().V6t()}set j6t(t){VM.re(t),BM().H6t(t)}U6t(){BM().z6t()}}}{const UM=self._s,zM="audio",JM=["interactive","balanced","playback"];UM.sW.Audio.Instance=class extends UM.BIt{constructor(t,s){super(t,zM),this.J6t=0,this.$6t=0,this.q6t=[],this.X6t=!0,this.Y6t=0,this.K6t=0,this.Z6t=!1,this.Q6t=1,this.t8t=1,this.s8t=[this.Nc.K1()/2,this.Nc.Z1()/2,600],this.i8t=[0,0,-1],this.e8t=[0,1,0],this.n8t=600,this.r8t=1e4,this.h8t=1,this.o8t=null,this.a8t=-1,this.l8t=1,this.u8t=!1,this.c8t=0,this.f8t="suspended",this.d8t=0,this.p8t=new Map,this.m8t=0,this.g8t=0,this.y8t=new Map,this.w8t=new Map;let i="interactive";s&&(this.Y6t=s[0],this.K6t=s[1],this.Z6t=s[2],i=JM[s[3]],this.X6t=s[4],this.Q6t=s[5],this.t8t=s[6],this.s8t[2]=s[7],this.n8t=s[8],this.r8t=s[9],this.h8t=s[10]),this.S8t=[],this.v8t=[],this.b8t=[],this.YIt([["state",t=>this.M8t(t)],["audiocontext-state",t=>this.x8t(t)],["fxstate",t=>this.T8t(t)],["trigger",t=>this.G8t(t)],["buffer-metadata",t=>this._8t(t)]]);const e=this.aW().wf();this.Yf=new UM.$f(UM.jf.Jf(e,"instancedestroy",t=>this.C8t(t.f$)),UM.jf.Jf(e,"afterload",()=>this.f8()),UM.jf.Jf(e,"suspend",()=>this.C5t()),UM.jf.Jf(e,"resume",()=>this.I5t()));const n=this.Nc.JW(),r="Safari"===UM.Ks.ti,h=this.Nc.OJt()||"macos-wkwebview"===n,o=this.Nc.CL().hZ(),a="playable-ad-single-file"===n,l="cordova"===n&&"Android"===UM.Ks.Zs,u=r||h||o||a||l;this.Nc.qB(this.ZIt("create-audio-context",{preloadList:this.Nc.CL().jZ().map(t=>({originalUrl:t.VZ,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.Y6t,latencyHint:i,panningModel:this.Q6t,distanceModel:this.t8t,refDistance:this.n8t,maxDistance:this.r8t,rolloffFactor:this.h8t,listenerPos:this.s8t,usePlayMusicAsSoundWorkaround:u}).then(t=>{this.c8t=t.sampleRate,this.f8t=t.audioContextState,this.d8t=t.outputLatency})),this.nPt()}zn(){this.o8t=null,super.zn()}I8t(t){return this.X6t?t.split(" ").filter(t=>!!t):t?[t]:[]}P8t(t,s){for(const i of s){let s=!1;for(const e of t)if(UM.Ke(e,i)){s=!0;break}if(!s)return!1}return!0}A8t(t,s){return this.P8t(t,this.I8t(s))}F6t(t){this.zj().F6t(t)}C8t(t){this.o8t===t&&(this.o8t=null)}E8t(t){return Math.pow(10,t/20)}R8t(t){const s=this.E8t(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}F8t(t){return Math.log(t)/Math.log(10)*20}O8t(t){return this.F8t(Math.max(Math.min(t,1),0))}D8t(){let t=0;const s=!!self.C3_GetAudioContextCurrentTime;return t=s?this.J6t:this.$6t,this.J6t=0,this.$6t=0,{k8t:t,L8t:s}}C5t(){this.Z6t||this.KIt("set-suspended",{isSuspended:!0})}I5t(){this.Z6t||this.KIt("set-suspended",{isSuspended:!1})}M8t(t){const s=t.tickCount;this.d8t=t.outputLatency;const i=this.S8t.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder));this.S8t=t.audioInstances,this.b8t=t.analysers,i.length>0&&UM.Rn(this.S8t,i)}_8t(t){this.y8t.set(t.originalUrl,{duration:t.duration})}x8t(t){this.f8t=t.audioContextState}Cht(){return this.Nc.hjt()?"running":this.f8t}T8t(t){this.v8t=t.fxstate}N8t(t){const s=this.I8t(t);for(const t of this.S8t)if(this.P8t(t.tags,s))return t;return null}B8t(t){const s=this.I8t(t);return this.S8t.some(t=>this.P8t(t.tags,s)&&t.isPlaying)}W8t(t,s,i,e,n){if(this.B8t(s))return null;const r=this.y8t.get(t),h={tags:this.I8t(s),duration:r?r.duration:0,volume:n,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.S8t.push(h),h}j8t(t){const s=this.I8t(t);for(const t of this.S8t)this.P8t(t.tags,s)&&(t.isPlaying=!1)}async G8t(t){const s=t.type;this.q6t=t.tags;const i=t.aiid;if("ended"===s){for(const t of this.S8t)if(t.aiid===i){t.isPlaying=!1;break}await this.KB(UM.sW.Audio.QB.V8t)}else"fade-ended"===s&&await this.KB(UM.sW.Audio.QB.H8t)}U8t(t){return this.A8t(this.q6t,t)}u7(){const t={timeScale:this.Nc.WN(),gameTime:this.Nc.PJt(),instPans:this.z8t(),tickCount:this.Nc.AJt()};if(this.o8t){const s=this.o8t.DB();this.s8t[0]=s.qM(),this.s8t[1]=s.KM(),t.listenerPos=this.s8t,t.listenerOrientation=[...this.i8t,...this.e8t]}this.KIt("tick",t)}J8t(t,s,i,e,n){if(0===i)return[t,s];const r=Math.sin(i),h=Math.cos(i),o=(t-=e)*r;return t=t*h-(s-=n)*r,s=s*h+o,[t+=e,s+=n]}z8t(){return this.S8t.filter(t=>-1!==t.uid).map(t=>this.Nc.PB(t.uid)).filter(t=>t).map(t=>{const s=t.DB(),i=s.kB().FV(),[e,n]=this.J8t(s.qM(),s.KM(),-i,this.s8t[0],this.s8t[1]);return{uid:t.TU(),x:e,y:n,z:s.Dz(),angle:s.FV()-i}})}$8t(t,s){for(const i of this.b8t)if(i.index===s&&UM.Ke(i.tag,t))return i;return null}q8t(t){for(const s of this.I8t(t)){const t=s.toLowerCase();this.p8t.set(t,(this.p8t.get(t)||0)+1)}}B6t(){return this.u8t}W6t(t){t=!!t,this.u8t!==t&&(this.u8t=t,this.KIt("set-silent",{isSilent:t}))}V6t(){return this.l8t}H6t(t){this.l8t!==t&&(this.l8t=t,this.KIt("set-master-volume",{vol:t}))}z6t(){this.KIt("stop-all");for(const t of this.S8t)t.isPlaying=!1}X8t(t){return!(t.hasOwnProperty("placeholder")||3===this.K6t||t.isMusic&&1===this.K6t||!t.isMusic&&2===this.K6t)}ux(){return{isSilent:this.u8t,masterVolume:this.l8t,listenerZ:this.s8t[2],listenerForwardVec:this.i8t,listenerUpVec:this.e8t,listenerUid:this.o8t?this.o8t.TU():-1,remoteUrls:[...this.w8t.entries()],playing:this.S8t.filter(t=>this.X8t(t)),effects:this.v8t,analysers:this.b8t}}mx(t){if(this.u8t=t.isSilent,this.l8t=t.masterVolume,this.s8t[2]=t.listenerZ,this.o8t=null,this.a8t=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.i8t=t.listenerForwardVec:this.i8t=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.e8t=t.listenerUpVec:this.e8t=[0,1,0],this.w8t.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.w8t.set(s,i);this.S8t=t.playing;for(const t of this.S8t)t.hasOwnProperty("tag")&&!t.hasOwnProperty("tags")&&(t.tags=[t.tag].filter(t=>!!t));this.v8t=t.effects,this.b8t=t.analysers}f8(){if(-1!==this.a8t&&(this.o8t=this.Nc.PB(this.a8t),this.a8t=-1,this.o8t)){const t=this.o8t.DB();this.s8t[0]=t.qM(),this.s8t[1]=t.KM()}for(const t of this.S8t){const s=this.Nc.CL().WZ(t.bufferOriginalUrl);s?(t.bufferUrl=s.url,t.bufferType=s.type):t.bufferUrl=null}for(const t of Object.values(this.v8t))for(const s of t)if(s.hasOwnProperty("bufferOriginalUrl")){const t=this.Nc.CL().WZ(s.bufferOriginalUrl);t&&(s.bufferUrl=t.url,s.bufferType=t.type)}this.KIt("load-state",{saveLoadMode:this.K6t,timeScale:this.Nc.WN(),gameTime:this.Nc.PJt(),listenerPos:this.s8t,listenerOrientation:[...this.i8t,...this.e8t],isSilent:this.u8t,masterVolume:this.l8t,playing:this.S8t.filter(t=>null!==t.bufferUrl),effects:this.v8t})}aPt(){const t=[];for(const[s,i]of Object.entries(this.v8t))t.push({name:"$"+s,value:i.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.S8t.length},...this.S8t.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / ${Math.round(10*t.duration)/10}`}))]}]}}}self._s.sW.Audio.QB={V8t(t){return this.U8t(t)},H8t(t){return this.U8t(t)},Y8t(){return this.g8t===this.m8t},K8t:()=>!0,Z8t(){return this.B6t()},Q8t(){for(const t of this.S8t)if(t.isPlaying)return!0;return!1},t7t(t){return this.B8t(t)}};{const $M=self._s,qM=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];$M.sW.Audio.yht={Play(t,s,i,e,n){const r=$M.sW.Audio.yht.s7t.call(this,t,s,i,e,n);return this.F6t(r),r},Iht(t,s,i,e){$M.sW.Audio.yht.s7t.call(this,t,0,s,0,i,e)},async s7t(t,s,i,e,n,r){if(this.u8t)return;const h=t[1],o=this.Nc.CL().WZ(t[0]);if(!o)return;const{k8t:a,L8t:l}=this.D8t(),u=this.W8t(t[0],n,h,0!==s,this.R8t(i));try{await this.ZIt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:h,tags:this.I8t(n),isLooping:0!==s,vol:this.R8t(i),stereoPan:$M.Yn(e/100,-1,1),pos:r||0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.Nc.AJt())}},async i7t(t,s,i,e,n,r,h,o,a,l,u){if(this.u8t)return;const c=t[1],f=this.Nc.CL().WZ(t[0]);if(!f)return;const{k8t:d,L8t:p}=this.D8t(),m=this.W8t(t[0],u,c,0!==s,this.R8t(i));try{await this.ZIt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.I8t(u),isLooping:0!==s,vol:this.R8t(i),pos:0,off:d,trueClock:p,panning:{x:e,y:n,z:r,angle:$M.Zn(h),innerAngle:$M.Zn(o),outerAngle:$M.Zn(a),outerGain:this.R8t(l)}})}finally{m&&(m.placeholder=this.Nc.AJt())}},async e7t(t,s,i,e,n,r,h,o){if(this.u8t)return;if(!e)return;const a=e.UGt();if(!a||!a.DB())return;const l=a.DB(),u=l.kB().FV(),[c,f]=this.J8t(l.qM(),l.KM(),-u,this.s8t[0],this.s8t[1]),d=t[1],p=this.Nc.CL().WZ(t[0]);if(!p)return;const{k8t:m,L8t:g}=this.D8t(),y=this.W8t(t[0],o,d,0!==s,this.R8t(i));try{await this.ZIt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.I8t(o),isLooping:0!==s,vol:this.R8t(i),pos:0,off:m,trueClock:g,panning:{x:c,y:f,z:l.Dz(),angle:l.FV()-u,innerAngle:$M.Zn(n),outerAngle:$M.Zn(r),outerGain:this.R8t(h),uid:a.TU()}})}finally{y&&(y.placeholder=this.Nc.AJt())}},async n7t(t,s,i,e,n,r){if(this.u8t)return;const h=1===t,o=this.Nc.CL().WZ(s)||this.w8t.get(s.toLowerCase());if(!o)return;const{k8t:a,L8t:l}=this.D8t(),u=this.W8t(s,r,h,0!==i,this.R8t(e));try{await this.ZIt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:h,tags:this.I8t(r),isLooping:0!==i,vol:this.R8t(e),stereoPan:$M.Yn(n/100,-1,1),pos:0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.Nc.AJt())}},async r7t(t,s,i,e,n,r,h,o,a,l,u,c){if(this.u8t)return;const f=1===t,d=this.Nc.CL().WZ(s)||this.w8t.get(s.toLowerCase());if(!d)return;const{k8t:p,L8t:m}=this.D8t(),g=this.W8t(s,c,f,0!==i,this.R8t(e));try{await this.ZIt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.I8t(c),isLooping:0!==i,vol:this.R8t(e),pos:0,off:p,trueClock:m,panning:{x:n,y:r,z:h,angle:$M.Zn(o),innerAngle:$M.Zn(a),outerAngle:$M.Zn(l),outerGain:this.R8t(u)}})}finally{g&&(g.placeholder=this.Nc.AJt())}},async h7t(t,s,i,e,n,r,h,o,a){if(this.u8t)return;if(this.u8t)return;if(!n)return;const l=n.UGt();if(!l||!l.DB())return;const u=l.DB(),c=u.kB().FV(),[f,d]=this.J8t(u.qM(),u.KM(),-c,this.s8t[0],this.s8t[1]),p=1===t,m=this.Nc.CL().WZ(s)||this.w8t.get(s.toLowerCase());if(!m)return;const{k8t:g,L8t:y}=this.D8t(),w=this.W8t(s,a,p,0!==i,this.R8t(e));try{await this.ZIt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.I8t(a),isLooping:0!==i,vol:this.R8t(e),pos:0,off:g,trueClock:y,panning:{x:f,y:d,z:u.Dz(),angle:u.FV()-c,innerAngle:$M.Zn(r),outerAngle:$M.Zn(h),outerGain:this.R8t(o),uid:l.TU()}})}finally{w&&(w.placeholder=this.Nc.AJt())}},o7t(t,s){this.KIt("set-looping",{tags:this.I8t(t),isLooping:0===s})},a7t(t,s){this.KIt("set-muted",{tags:this.I8t(t),isMuted:0===s})},Ght(t,s){this.KIt("set-volume",{tags:this.I8t(t),vol:this.R8t(s)})},l7t(t,s,i,e){this.KIt("fade-volume",{tags:this.I8t(t),vol:this.R8t(s),duration:i,stopOnEnd:0===e})},u7t(t,s){this.KIt("set-stereo-pan",{tags:this.I8t(t),p:$M.Yn(s/100,-1,1)})},async c7t(t){const s=t[1],i=this.Nc.CL().WZ(t[0]);i&&(this.m8t++,await this.ZIt("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.g8t++)},async f7t(t,s){const i=1===t,e=this.Nc.CL().WZ(s)||this.w8t.get(s.toLowerCase());e&&(this.m8t++,await this.ZIt("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.g8t++)},pq(t,s){this.KIt("set-playback-rate",{tags:this.I8t(t),rate:Math.max(s,0)})},eq(t){this.j8t(t),this.KIt("stop",{tags:this.I8t(t)})},d7t(){this.z6t()},p7t(t,s){this.KIt("set-paused",{tags:this.I8t(t),paused:0===s})},m7t(t,s){this.KIt("seek",{tags:this.I8t(t),pos:s})},g7t(t){2===t&&(t=this.B6t()?1:0),this.W6t(0===t)},y7t(t){const s=this.R8t(t);this.H6t(s)},w7t(t,s,i,e,n,r,h){const o=qM[s];this.q8t(t),this.KIt("add-effect",{type:"filter",tags:this.I8t(t),params:[o,i,e,n,r,$M.Yn(h/100,0,1)]})},S7t(t,s,i,e){this.q8t(t),this.KIt("add-effect",{type:"delay",tags:this.I8t(t),params:[s,this.R8t(i),$M.Yn(e/100,0,1)]})},v7t(t,s,i,e,n,r){this.q8t(t),this.KIt("add-effect",{type:"flanger",tags:this.I8t(t),params:[s/1e3,i/1e3,e,n/100,$M.Yn(r/100,0,1)]})},b7t(t,s,i,e,n,r,h){this.q8t(t),this.KIt("add-effect",{type:"phaser",tags:this.I8t(t),params:[s,i,e,n,r,$M.Yn(h/100,0,1)]})},M7t(t,s,i,e){const n=this.Nc.CL().WZ(s[0]);n&&(this.q8t(t),this.KIt("add-effect",{type:"convolution",tags:this.I8t(t),bufferOriginalUrl:s[0],bufferUrl:n.url,bufferType:n.type,params:[0===i,$M.Yn(e/100,0,1)]}))},x7t(t,s){this.q8t(t),this.KIt("add-effect",{type:"gain",tags:this.I8t(t),params:[this.R8t(s)]})},T7t(t,s){this.q8t(t),this.KIt("add-effect",{type:"stereopan",tags:this.I8t(t),params:[$M.Yn(s/100,-1,1)]})},G7t(t){this.q8t(t),this.KIt("add-effect",{type:"gain",tags:this.I8t(t),params:[0]})},_7t(t,s,i){this.q8t(t),this.KIt("add-effect",{type:"tremolo",tags:this.I8t(t),params:[s,$M.Yn(i/100,0,1)]})},C7t(t,s,i){this.q8t(t),this.KIt("add-effect",{type:"ringmod",tags:this.I8t(t),params:[s,$M.Yn(i/100,0,1)]})},I7t(t,s,i,e,n,r){this.q8t(t),this.KIt("add-effect",{type:"distortion",tags:this.I8t(t),params:[this.E8t(s),this.E8t(i),e,this.E8t(n),$M.Yn(r/100,0,1)]})},P7t(t,s,i,e,n,r){this.q8t(t),this.KIt("add-effect",{type:"compressor",tags:this.I8t(t),params:[s,i,e,n/1e3,r/1e3]})},A7t(t,s,i){this.q8t(t),this.KIt("add-effect",{type:"analyser",tags:this.I8t(t),params:[s,i]})},E7t(t){const s=this.I8t(t);for(const t of s)this.p8t.set(t.toLowerCase(),0);this.KIt("remove-effects",{tags:s}),this.v8t={}},b$(t,s,i,e,n,r){this.KIt("set-effect-param",{tags:this.I8t(t),index:Math.floor(s),param:i,value:e,ramp:n,time:r})},R7t(t){if(!t)return;const s=t.UGt();s&&s.DB()&&(this.o8t=s)},F7t(t){this.s8t[2]=t},O7t(t,s,i,e,n,r){this.i8t[0]=t,this.i8t[1]=s,this.i8t[2]=-i,this.e8t[0]=e,this.e8t[1]=n,this.e8t[2]=-r},D7t(t){this.J6t=Math.max(t,0),this.$6t=Math.max(t-performance.now()/1e3,0)},k7t(t){const s=t[1],i=this.Nc.CL().WZ(t[0]);i&&this.KIt("unload",{url:i.url,type:i.type,isMusic:s})},L7t(t,s){const i=1===t,e=this.Nc.CL().WZ(s)||this.w8t.get(s.toLowerCase());e&&this.KIt("unload",{url:e.url,type:e.type,isMusic:i})},N7t(){this.KIt("unload-all")},B7t(t,s,i){this.w8t.set(i.toLowerCase(),{url:t,type:s})}}}{const XM=self._s;XM.sW.Audio.wht={W7t(t){const s=this.N8t(t);return s?s.duration:0},bht(t){const s=this.N8t(t);return s?s.playbackTime:0},_ht(t){const s=this.N8t(t);return s?s.playbackRate:0},Mht(t){const s=this.N8t(t);return s?this.O8t(s.volume):0},j7t(){return this.O8t(this.V6t())},V7t(t){return this.p8t.get(t.toLowerCase())||0},H7t(t,s){const i=this.$8t(t,Math.floor(s));return i?i.binCount:0},U7t(t,s,i){const e=this.$8t(t,Math.floor(s));return e?(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]:0},z7t(t,s){const i=this.$8t(t,Math.floor(s));return i?i.peak:0},J7t(t,s){const i=this.$8t(t,Math.floor(s));return i?i.rms:0},$7t(){return this.c8t},q7t:()=>self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3,X7t(){return this.d8t},Y7t(t,s){return 0==(t=XM.Yn(+t,0,100)/100)?-1/0:t<.1?this.O8t(XM._t(0,this.R8t(s),10*t)):XM._t(s,0,(t-.1)/.9)}}}{const YM=self._s;YM.sW.Text=class extends YM.YCt{constructor(t){super(t)}zn(){super.zn()}}}{const KM=self._s;KM.sW.Text.fRt=class extends KM.OIt{constructor(t){super(t)}zn(){super.zn()}SIt(){}d4(t){}v4(){}}}{const ZM=self._s,QM=self.Ls,tx=[0,0,0],sx=0,ix=1,ex=2,nx=3,rx=4,hx=5,ox=6,ax=7,lx=8,ux=9,cx=10,fx=11,dx=12,px=13,mx=15,gx=["left","center","right"],yx=["top","center","bottom"],wx=["ltr","rtl"],Sx=["word","cjk","character"],vx=new ZM.Rect,bx=new ZM.Il,Mx=new ZM.xo,xx=ZM.Un(ZM.Ia),Tx=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]);ZM.sW.Text.Instance=class extends ZM.dPt{constructor(t,s){if(super(t),this.Bc="",this.K7t=!0,this.Z7t="Arial",this.Q7t=12,this.t9t=0,this.TP=!1,this.GP=!1,this.RM=ZM.Un(ZM.xo),this.EP=0,this.RP=0,this.DP="word",this.kP=0,this.s9t="auto",this.i9t=1,this.e9t=null,this.n9t="",this.r9t=!1,this.h9t=!1,this.o9t=null,this.a9t=-1,this.l9t=-1,this.u9t=0,this.c9t=ZM.Un(ZM.Lw.$b,this.Nc.mM(),{timeout:5}),this.c9t.lA=()=>this.Nc.VB(),this.f9t=()=>this.d9t(),this.p9t=!1,s){this.Bc=s[sx],this.K7t=!!s[ix],this.Z7t=s[ex],this.Q7t=s[nx],this.t9t=s[rx],this.TP=!!s[hx],this.GP=!!s[ox],this.EP=s[lx],this.RP=s[ux],this.DP=Sx[s[cx]],this.kP=s[fx],this.m9t(this.Nc.ZX(s[dx]));const t=s[ax];this.RM.Po(t[0],t[1],t[2]),this.DB().yH(s[px]),this.h9t=!!s[mx]}this.g9t(),this.y9t()}zn(){this.m9t(null),this.w9t(),this.o9t&&(this.o9t.zn(),this.o9t=null),this.c9t.zn(),this.c9t=null,super.zn()}g9t(){const t=this.c9t;t.Vc(this.Bc),t.dA(this.K7t),this.c9t.yP()&&this.e9t?this.c9t.Wg(this.aW().BJt(this.e9t)):this.c9t.Wg(null),t.pA("nearest"!==this.Nc.YL()),t.mA(this.Z7t),t.SA(this.t9t),t.bA(this.TP),t.xA(this.GP),t.NM(this.RM),t.AA(gx[this.EP]),t.RA(yx[this.RP]),t.OA(this.DP),t.kA(wx[this.kP])}S9t(){const t=this.DB();this.c9t.gA(this.Q7t),this.c9t.wA(t.fkt());const s=t.kB();let i;"auto"===this.s9t?i=s.J2(t.Dz()):"fixed"===this.s9t&&(i=this.i9t),t.zJ()&&i!==this.c9t.WA()&&t.gLt(!0),this.c9t.BA(t.Vg(),t.Zg(),i)}m9t(t){t&&(t.S1()||t.zj().constructor!==ZM.sW.Nrt)||t!==this.e9t&&(this.e9t&&this.e9t.wf().removeEventListener("animationframeimagechange",this.f9t),this.e9t=t,this.e9t&&this.e9t.wf().addEventListener("animationframeimagechange",this.f9t),this.g9t(),this.r9t=!1,this.Nc.VB())}d9t(){this.Nc.WJt(this.e9t),this.Nc.VB(),this.p9t=!0}y9t(){if(this.h9t){let t=this.Bc;this.K7t&&(t=ZM.dn.Og(t)),this.o9t?this.o9t.Vc(t):this.o9t=ZM.Un(ZM.Lc,this.Nc,t)}else this.o9t&&(this.o9t.zn(),this.o9t=null)}Kx(t){const s=this.DB();this.S9t(),this.p9t&&(this.p9t=!1,this.c9t.yP()&&this.e9t&&this.c9t.Wg(this.aW().BJt(this.e9t)));const i=this.c9t.xG();if(!i)return;const e=s.kB();if(0===s.FV()&&0===e.FV()&&0===s.Dz()&&!s.zJ()&&e.o2()){const n=s.Wz(),[r,h]=e.oU(n.Nr(),n.Br()),[o,a]=e.oU(n.Vr(),n.Hr()),l=r-Math.round(r),u=h-Math.round(h);vx.set(r,h,o,a),vx.offset(-l,-u),bx.Xl(vx);const[c,f]=t.WF(t.rO());t.jb()?this.Nc.GB().rK(t,c,f):(t.zk(!0),bx.wt(c,f)),t.xF(i),t.tb(bx,this.c9t.gE()),t.jb()?e.oK(t):t.zk(!1)}else t.xF(i),s.zJ()?this.vZt(s,t):this.bZt(s,t)}bZt(t,s){let i=t.Wz();this.Nc.ZL()&&(i=this.v9t(i)),s.tb(i,this.c9t.gE())}vZt(t,s){const i=t.mLt();if(t.yLt()){t.Lz(vx,bx,!1);let s=bx;this.Nc.ZL()&&(s=this.v9t(s)),i.zx(t.JJ(),s,this.c9t.gE()),t.gLt(!1)}i.Kx(s,t.Dz())}v9t(t){const s=t.Nr()-Math.round(t.Nr()),i=t.Br()-Math.round(t.Br());return 0===s&&0===i?t:(bx.m(t),bx.offset(-s,-i),bx)}MPt(){const t=this.c9t.xG();return t?[t.Vg(),t.Zg()]:[100,100]}xPt(){return this.c9t.gE()}_Pt(){return!1}ux(){const t={t:this.Bc,c:this.RM.toJSON(),fn:this.Z7t,ps:this.Q7t};return this.K7t&&(t.bbc=this.K7t),0!==this.EP&&(t.ha=this.EP),0!==this.RP&&(t.va=this.RP),"word"!==this.DP&&(t.wr=this.DP),0!==this.t9t&&(t.lho=this.t9t),this.TP&&(t.b=this.TP),this.GP&&(t.i=this.GP),-1!==this.l9t&&(t.tw={st:this.a9t,en:this.l9t,l:this.u9t}),this.e9t&&(t.ioc=this.e9t.C1()),"fixed"===this.s9t&&(t.fs=this.i9t),t}mx(t){if(this.w9t(),this.Bc=t.t,this.RM.wa(t.c),this.Z7t=t.fn,this.Q7t=t.ps,this.K7t=!!t.hasOwnProperty("bbc")&&t.bbc,this.EP=t.hasOwnProperty("ha")?t.ha:0,this.RP=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.DP="boolean"==typeof s?s?"word":"character":s}else this.DP="word";if(this.t9t=t.hasOwnProperty("lho")?t.lho:0,this.TP=!!t.hasOwnProperty("b")&&t.b,this.GP=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const s=t.tw;this.a9t=s.st,this.l9t=s.en,this.u9t=s.l}if(t.hasOwnProperty("ioc")){const s=this.aW().ZX(t.ioc);s&&this.m9t(s)}else this.m9t(null);t.hasOwnProperty("fs")?(this.s9t="fixed",this.i9t=t.fs):this.s9t="auto",this.g9t(),this.y9t(),this.r9t=!1,-1!==this.l9t&&this.nPt()}tot(t){switch(t){case sx:return this.NA();case ix:return this.K7t;case ex:return this.b9t();case nx:return this.M9t();case rx:return this.x9t();case hx:return this.T9t();case ox:return this.G9t();case ax:return tx[0]=this.RM.Lo(),tx[1]=this.RM.No(),tx[2]=this.RM.Bo(),tx;case lx:return this._9t();case ux:return this.C9t();case cx:return this.I9t();case mx:return this.P9t()}}hot(t,s){switch(t){case sx:this.A9t(s);break;case ix:if(this.K7t===!!s)return;this.K7t=!!s,this.g9t();break;case ex:this.E9t(s);break;case nx:this.R9t(s);break;case rx:this.F9t(s);break;case hx:this.O9t(s);break;case ox:this.D9t(s);break;case ax:const t=this.RM,i=s;if(t.Lo()===i[0]&&t.No()===i[1]&&t.Bo()===i[2])return;this.RM.Po(i[0],i[1],i[2]),this.g9t();break;case lx:this.k9t(s);break;case ux:this.L9t(s);break;case cx:this.N9t(s)}}lPt(t,s,i,e){0===s&&0===i&&0===e||t!==ax||(this.RM.Ao(s,i,e),this.g9t())}A9t(t){this.Bc!==t&&(this.Bc=t,this.c9t.Vc(t),this.y9t(),this.r9t=!1,this.Nc.VB())}NA(){return this.Bc}B9t(t,s){this.S9t(),this.A9t(t),this.a9t=this.Nc.NN(),this.l9t=this.a9t+s/this.Iq().PU(),this.u9t=this.c9t.UA(),this.c9t.GA(0),this.nPt()}w9t(){this.a9t=-1,this.l9t=-1,this.u9t=0,this.c9t.GA(-1),this.VIt()}W9t(){-1!==this.l9t&&(this.w9t(),this.$U(ZM.sW.Text.QB.j9t),this.Nc.VB())}E9t(t){this.Z7t!==t&&(this.Z7t=t,this.c9t.mA(t),this.Nc.VB())}b9t(){return this.Z7t}O9t(t){t=!!t,this.TP!==t&&(this.TP=t,this.c9t.bA(t),this.Nc.VB())}T9t(){return this.TP}D9t(t){t=!!t,this.GP!==t&&(this.GP=t,this.c9t.xA(t),this.Nc.VB())}G9t(){return this.GP}R9t(t){this.Q7t!==t&&(this.Q7t=t,this.Nc.VB())}M9t(){return this.Q7t}V9t(t){this.RM.zo(t)||(this.RM.ko(t),this.c9t.NM(this.RM),this.Nc.VB())}H9t(){return this.RM}F9t(t){this.t9t!==t&&(this.t9t=t,this.g9t(),this.Nc.VB())}x9t(){return this.t9t}k9t(t){this.EP!==t&&(this.EP=t,this.g9t(),this.Nc.VB())}_9t(){return this.EP}L9t(t){this.RP!==t&&(this.RP=t,this.g9t(),this.Nc.VB())}C9t(){return this.RP}U9t(t){this.N9t(Sx[t])}N9t(t){this.DP!==t&&(this.DP=t,this.g9t(),this.Nc.VB())}I9t(){return this.DP}z9t(t){this.kP!==t&&(this.kP=t,this.g9t(),this.Nc.VB())}J9t(){return this.kP}$9t(t){this.h9t=!!t,this.y9t()}P9t(){return this.h9t}q9t(t){this.s9t!==t&&(this.s9t=t,this.Nc.VB())}X9t(){return this.s9t}Y9t(t){this.i9t!==t&&(this.i9t=t,"fixed"===this.s9t&&this.Nc.VB())}K9t(){return this.i9t}Z9t(){return this.S9t(),this.c9t.jA()}Q9t(){return this.S9t(),this.c9t.HA()}tts(t,s){this.S9t();const i=this.DB();xx.set(t-i.qM(),s-i.KM()),xx.rotate(-i.FV()),xx.offset(i.Vg()*i.Cz(),i.Zg()*i.Az()),xx.wt(i.Vg(),i.Zg()),xx.scale(this.c9t.Vg(),this.c9t.Zg());const e=this.c9t.JA(xx.Fa(),xx.Da());if(e){const t=e.Uy("tag");if(t)return t.Ig}return""}sts(t,s,i){const e=this.tts(s,i);return e&&ZM.Ke(t,e)}its(t,s){this.S9t(),s=Math.floor(s);const i=this.c9t.qA(t,s);if(!i)return null;const e=this.DB(),n=this.c9t.IA(),r=i.By(),h=i.jy()-(i.Zg()-i.ty())*n,o=i.Vg()*n/this.c9t.Vg()*e.Vg(),a=i.Zg()*n/this.c9t.Zg()*e.Zg();return xx.set(r,h),xx.wt(this.c9t.Vg(),this.c9t.Zg()),xx.scale(e.Vg(),e.Zg()),xx.offset(-e.Vg()*e.Cz(),-e.Zg()*e.Az()),xx.rotate(e.FV()),xx.offset(e.qM(),e.KM()),{x:xx.Fa(),y:xx.Da(),width:o,height:a}}ets(t){return this.S9t(),this.c9t.XA(t)}nts(t){let s=Tx.get(t);return null===s?"":(s||(s="span"),`</${s||"span"}>`)}rts(t,s){let i=Tx.get(t);if(null===i)return"";switch(i||(i="span"),t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async hts(){if(this.r9t)return this.n9t;const t=new ZM.dn(this.Bc,{dg:!0})._g(),s=new Map;let i='<span class="c3-text"';const e=[];e.push(`font-family: '${this.b9t()}';`),this.T9t()&&e.push("font-weight: bold;"),this.G9t()&&e.push("font-style: italic;"),"character"===this.I9t()&&e.push("word-break: break-all;"),i+=` style="${e.join(" ")}">`;const n=this.e9t?this.aW().BJt(this.e9t):null;if(this.e9t){const i=ZM.Un(ZM.Ud),e=[],r=new Map;for(const s of t)if(s.Yg()){const t=s.Yy(n);if(t){const s=t.Fw().W$().XAt();if(r.has(s))continue;r.set(s,null),e.push(i.Bu(async()=>{const t=await s.aQ();r.set(s,t)}))}}await Promise.all(e);const h=[];for(const e of t)if(e.Yg()){const t=e.Yy(n);if(t){const e=t.Fw(),n=e.W$().XAt();h.push(i.Bu(async()=>{const i=await e.W$().KAt(r.get(n));s.set(t,i)}))}}await Promise.all(h);for(const t of r.values())t instanceof ImageBitmap&&t.close&&t.close()}const r=new Map;for(const e of t){const t=e.Jy();let h=[...r.keys()];h.reverse();for(const s of h)t.has(s)&&t.get(s)===r.get(s)||(r.delete(s),i+=this.nts(s));for(const[s,e]of t)r.has(s)||(r.set(s,e),i+=this.rts(s,e));if(e.qg()&&(i+=ZM.Pm(ZM.Cm(e.yy().join("")),"\n","<br>")),e.Yg()&&n){const r=e.Yy(n);if(r){const n=s.get(r);if(n){const s=[];let h="0.2em";const o=t.get("iconoffsety");if(o){let t=o.trim();h=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}s.push(`top: ${h}`),"nearest"===this.Nc.YL()&&s.push("image-rendering: pixelated"),i+=`<img class="c3-text-icon" data-icon="${e.Xy()}" width="${r.Vg()}" height="${r.Zg()}" style="${s.join(";")}" src="${n}">`}}}}const h=[...r.keys()];h.reverse();for(const t of h)i+=this.nts(t);return i+="</span>",this.n9t=i,this.r9t=!0,this.n9t}u7(){const t=this.Nc.NN();if(t>=this.l9t)this.w9t(),this.$U(ZM.sW.Text.QB.j9t),this.Nc.VB();else{let s=ZM.mr(this.a9t,this.l9t,t,0,this.u9t);s=Math.floor(s),s!==this.c9t._A()&&(this.c9t.GA(s),this.Nc.VB())}}aPt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.NA(),YZt:t=>this.A9t(t)},{name:t+".properties.font.name",value:this.b9t(),YZt:t=>this.E9t(t)},{name:t+".properties.size.name",value:this.M9t(),YZt:t=>this.R9t(t)},{name:t+".properties.line-height.name",value:this.x9t(),YZt:t=>this.F9t(t)},{name:t+".properties.bold.name",value:this.T9t(),YZt:t=>this.O9t(t)},{name:t+".properties.italic.name",value:this.G9t(),YZt:t=>this.D9t(t)},{name:t+".debugger.text-width",value:this.Z9t()},{name:t+".debugger.text-height",value:this.Q9t()}]}]}vIt(){return self.ots}};const Gx=new WeakMap,_x=new Map([["left",0],["center",1],["right",2]]),Cx=new Map([["top",0],["center",1],["bottom",2]]),Ix=["ltr","rtl"];self.ots=class extends self.YJ{constructor(){super(),Gx.set(this,self.uU.pU().s$())}get text(){return Gx.get(this).NA()}set text(t){QM.le(t);const s=Gx.get(this);s.w9t(),s.A9t(t)}ats(t,s){QM.le(t),QM.re(s);const i=Gx.get(this);i.w9t(),i.B9t(t,s)}lts(){Gx.get(this).W9t()}set lK(t){QM.le(t),Gx.get(this).E9t(t)}get lK(){return Gx.get(this).b9t()}set cK(t){Gx.get(this).O9t(t)}get cK(){return Gx.get(this).T9t()}set fK(t){Gx.get(this).D9t(t)}get fK(){return Gx.get(this).G9t()}set uK(t){QM.re(t),Gx.get(this).R9t(t)}get uK(){return Gx.get(this).M9t()}set uts(t){if(QM.Te(t),t.length<3)throw new Error("expected 3 elements");Mx.Po(t[0],t[1],t[2]),Gx.get(this).V9t(Mx)}get uts(){const t=Gx.get(this).H9t();return[t.Lo(),t.No(),t.Bo()]}set lineHeight(t){QM.re(t),Gx.get(this).F9t(t)}get lineHeight(){return Gx.get(this).x9t()}set mK(t){QM.le(t);const s=_x.get(t);if(void 0===s)throw new Error("invalid mode");Gx.get(this).k9t(s)}get mK(){return gx[Gx.get(this)._9t()]}set verticalAlign(t){QM.le(t);const s=Cx.get(t);if(void 0===s)throw new Error("invalid mode");Gx.get(this).L9t(s)}get verticalAlign(){return yx[Gx.get(this).C9t()]}set gK(t){if(!Sx.includes(t))throw new Error("invalid mode");Gx.get(this).N9t(t)}get gK(){return Gx.get(this).I9t()}set yK(t){QM.le(t);const s=Ix.indexOf(t);if(-1===s)throw new Error("invalid text direction");Gx.get(this).z9t(s)}get yK(){return Ix[Gx.get(this).J9t()]}set cts(t){Gx.get(this).$9t(!!t)}get cts(){return Gx.get(this).P9t()}fts(t){QM.re(t);const s=Gx.get(this);s.q9t("fixed"),s.Y9t(t)}dts(){Gx.get(this).q9t("auto")}get vK(){return Gx.get(this).Z9t()}get bK(){return Gx.get(this).Q9t()}pts(){const t=Gx.get(this);return[t.Z9t(),t.Q9t()]}mts(t,s,i){return QM.le(t),QM.re(s),QM.re(i),Gx.get(this).sts(t,s,i)}gts(t,s){return QM.re(t),QM.re(s),Gx.get(this).tts(t,s)}yts(t,s=0){return QM.le(t),QM.re(s),Gx.get(this).its(t,s)}wts(t){return QM.le(t),Gx.get(this).ets(t)}Sts(t){const s=Gx.get(this),i=s.aW().BW(t);s.m9t(i)}vts(){return Gx.get(this).hts()}}}{const Px=self._s;Px.sW.Text.QB={bts(t,s){return s?this.Bc===t:Px.Ke(this.Bc,t)},Mts(){return-1!==this.l9t},j9t:()=>!0,xts(t,s,i){return this.sts(t,s,i)}}}{const Ax=self._s,Ex=Ax.Un(Ax.xo);Ax.sW.Text.yht={Vc(t){this.w9t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.A9t(t.toString())},Tts(t){this.w9t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.A9t(this.Bc+t)},Gts(t,s){this.w9t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.B9t(t.toString(),s)},_ts(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.Z7t&&i===this.TP&&e===this.GP||(this.E9t(t),this.O9t(i),this.D9t(e))},gA(t){this.R9t(t)},Cts(t){Ex.Qo(t),Ex.Yn(),this.V9t(Ex)},Its(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},PQt(t){this.DB().LM(t),this.Nc.VB()},Pts(){this.W9t()},SA(t){this.F9t(t)},Ats(t){this.k9t(t)},Ets(t){this.L9t(t)},Rts(t){this.U9t(t)},kA(t){this.z9t(t)},Fts(t){this.m9t(t)},Ots(){return this.hts()},Dts(t){this.$9t(t)},kts(t,s){this.q9t(["auto","fixed"][t]),this.Y9t(s)}}}{const Rx=self._s;Rx.sW.Text.wht={Text(){return this.Bc},Lts(){return this.K7t?Rx.dn.Og(this.Bc):this.Bc},Nts(){return this.Z7t},Bts(){return this.Q7t},Wts(){return this.Z9t()},jts(){return this.Q9t()},Vts(){return this.t9t},Hts(t,s){return this.tts(t,s)},Uts(t){return this.ets(t)},zts(t,s){const i=this.its(t,s);return i?i.x:0},Jts(t,s){const i=this.its(t,s);return i?i.y:0},$ts(t,s){const i=this.its(t,s);return i?i.width:0},qts(t,s){const i=this.its(t,s);return i?i.height:0},Xts(){return this.n9t}}}{const Fx=self._s;Fx.sW.Yts=class extends Fx.YCt{constructor(t){super(t)}zn(){super.zn()}}}{const Ox=self._s;Ox.sW.Yts.fRt=class extends Ox.OIt{constructor(t){super(t),this.Kts=Ox.Un(self.Zts)}zn(){super.zn()}SIt(){this.W$().oW(this.Nc)}d4(t){return this.W$().YY(t,{lT:this.Nc.YL()})}v4(){this.W$().oA()}Qts(){return this.Kts}tss(t,s,i,e){const n=this.W$(),r=this.Kts;r.Xg(n.Vg()),r.Hg(n.Zg()),r.sss(t),r.iss(s),r.ess(i),r.nss(e),r.rss()}}}{const Dx=self._s,kx=self.Ls,Lx=Dx.Un(Dx.Ia),Nx=0,Bx=1,Wx=2,jx=3,Vx=4,Hx=5,Ux=6,zx=7,Jx=8,$x=9,qx=10,Xx=11,Yx=14,Kx=["left","center","right"],Zx=["top","center","bottom"],Qx=["word","cjk","character"];Dx.sW.Yts.Instance=class extends Dx.dPt{constructor(t,s){super(t),this.Bc="",this.K7t=!0,this.hss=16,this.oss=16,this.ass="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,;:?!-_~#\"'&()[]|`\\/@+=*$<>";let i="";this.lss=1,this.uss=0,this.xP=0,this.EP=0,this.RP=0,this.DP="word",this.css=!0,this.h9t=!1,this.o9t=null,this.fss=null,this.a9t=-1,this.l9t=-1,this.u9t=0,s&&(this.Bc=s[0],this.K7t=s[1],this.hss=s[2],this.oss=s[3],this.ass=s[4],i=s[5],this.lss=s[6],this.uss=s[7],this.xP=s[8],this.EP=s[9],this.RP=s[10],this.DP=Qx[s[11]],this.DB().yH(s[12]),this.h9t=!!s[Yx]),this.jIt.tss(this.hss,this.oss,this.ass,i),this.fss=Dx.Un(self.dss,this.jIt.Qts());const e=this.DB();this.fss.BA(e.Vg(),e.Zg()),this.pss(),this.y9t(),this.fi.JFt()}zn(){this.w9t(),this.o9t&&(this.o9t.zn(),this.o9t=null),this.fss.zn(),this.fss=null,super.zn()}pss(){const t=this.fss;t&&(t.dA(this.K7t),t.Vc(this.Bc),t.OA(this.DP),t.mss(Kx[this.EP]),t.gss(Zx[this.RP]),t.yss(this.uss),t.SA(this.xP))}S9t(){const t=this.DB();this.fss.BA(t.Vg(),t.Zg()),this.fss.AV(this.lss)}y9t(){if(this.h9t){let t=this.Bc;this.K7t&&(t=Dx.dn.Og(t)),this.o9t?this.o9t.Vc(t):this.o9t=Dx.Un(Dx.Lc,this.Nc,t)}else this.o9t&&(this.o9t.zn(),this.o9t=null)}Kx(t){const s=this.ppt.W$(),i=s.xG();if(!i)return;t.xF(i);const e=this.DB();let n=e.Wz();const r=this.fss;r.AV(this.lss),r.wss(e.fkt()),this.Nc.ZL()&&(n=e.Ykt(n)),r.BA(e.Vg(),e.Zg()),r.Qts().Sss(s.gE()),r.NM(e.zz()),r.Kx(t,n.Nr(),n.Br(),e.FV()),this.css=!1}ux(){const t={t:this.Bc,ebbc:this.K7t,csc:this.lss,csp:this.uss,lh:this.xP,ha:this.EP,va:this.RP,w:this.DP,cw:this.jIt.Qts().vss(),ch:this.jIt.Qts().bss(),cs:this.jIt.Qts().Mss(),sd:this.jIt.Qts().xss()};return-1!==this.l9t&&(t.tw={st:this.a9t,en:this.l9t,l:this.u9t}),t}mx(t){if(this.w9t(),this.Bc=t.t,this.K7t=t.ebbc,this.lss=t.csc,this.uss=t.csp,this.xP=t.lh,this.EP=t.ha,this.RP=t.va,t.hasOwnProperty("w")){const s=t.w;this.DP="boolean"==typeof s?s?"word":"character":s}else this.DP="word";if(t.hasOwnProperty("tw")){const s=t.tw;this.a9t=s.st,this.l9t=s.en,this.u9t=t.l}const s=this.jIt.Qts();s.sss(t.cw),s.iss(t.ch),s.ess(t.cs),s.nss(t.sd),this.pss(),this.y9t(),-1!==this.l9t&&this.nPt()}tot(t){switch(t){case Nx:return this.NA();case Bx:return this.K7t;case Wx:return this.jIt.Qts().vss();case jx:return this.jIt.Qts().bss();case Vx:return this.jIt.Qts().Mss();case Hx:return this.jIt.Qts().xss();case Ux:return this.Tss();case zx:return this.Gss();case Jx:return this.x9t();case $x:return this._9t();case qx:return this.C9t();case Xx:return this.I9t()}}hot(t,s){switch(t){case Nx:this.A9t(s);break;case Bx:if(this.K7t===!!s)return;this.K7t=!!s,this.pss();break;case Wx:this.jIt.Qts().sss(s);break;case jx:this.jIt.Qts().iss(s);break;case Vx:this.jIt.Qts().ess(s);break;case Hx:this.jIt.Qts().nss(s);break;case Ux:this._ss(s);break;case zx:this.Css(s);break;case Jx:this.F9t(s);break;case $x:this.k9t(s);break;case qx:this.L9t(s);break;case Xx:this.N9t(s)}}A9t(t){this.Bc!==t&&(this.Bc=t,this.fss.Vc(t),this.y9t(),this.Nc.VB())}NA(){return this.Bc}B9t(t,s){this.A9t(t),this.a9t=this.Nc.NN(),this.l9t=this.a9t+s/this.Iq().PU(),this.u9t=Dx.$m(Dx.dn.Og(t)),this.fss.GA(0),this.nPt()}w9t(){this.a9t=-1,this.l9t=-1,this.u9t=0,this.fss.GA(-1),this.VIt()}W9t(){-1!==this.l9t&&(this.w9t(),this.$U(Dx.sW.Yts.QB.j9t),this.Nc.VB())}_ss(t){this.lss!==t&&(this.lss=t,this.fss.AV(this.lss),this.Nc.VB())}Tss(){return this.lss}Css(t){this.uss!==t&&(this.uss=t,this.fss.yss(this.uss),this.Nc.VB())}Gss(){return this.uss}F9t(t){this.xP!==t&&(this.xP=t,this.fss.SA(this.xP),this.Nc.VB())}x9t(){return this.xP}k9t(t){this.EP!==t&&(this.EP=t,this.pss(),this.Nc.VB())}_9t(){return this.EP}L9t(t){this.RP!==t&&(this.RP=t,this.pss(),this.Nc.VB())}C9t(){return this.RP}U9t(t){this.N9t(Qx[t])}N9t(t){this.DP!==t&&(this.DP=t,this.pss(),this.Nc.VB())}I9t(){return this.DP}$9t(t){this.h9t=!!t,this.y9t()}P9t(){return this.h9t}Z9t(){return this.S9t(),this.fss.jA()}Q9t(){return this.S9t(),this.fss.HA()}tts(t,s){this.S9t();const i=this.DB();Lx.set(t-i.qM(),s-i.KM()),Lx.rotate(-i.FV()),Lx.offset(i.Vg()*i.Cz(),i.Zg()*i.Az());const e=this.fss.JA(Lx.Fa(),Lx.Da());if(e){const t=e.Uy("tag");if(t)return t.Ig}return""}sts(t,s,i){const e=this.tts(s,i);return e&&Dx.Ke(t,e)}its(t,s){this.S9t(),s=Math.floor(s);const i=this.fss.qA(t,s);if(!i)return null;const e=this.DB();return Lx.set(i.By(),i.jy()),Lx.offset(-e.Vg()*e.Cz(),-e.Zg()*e.Az()),Lx.rotate(e.FV()),Lx.offset(e.qM(),e.KM()),{x:Lx.Fa(),y:Lx.Da(),width:i.Vg(),height:i.Zg()}}ets(t){return this.S9t(),this.fss.XA(t)}u7(){const t=this.Nc.NN();if(t>=this.l9t)this.w9t(),this.$U(Dx.sW.Yts.QB.j9t),this.Nc.VB();else{let s=Dx.mr(this.a9t,this.l9t,t,0,this.u9t);s=Math.floor(s),s!==this.fss._A()&&(this.fss.GA(s),this.Nc.VB())}}aPt(){const t="plugins.spritefont2";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.NA(),YZt:t=>this.A9t(t)},{name:t+".properties.scale.name",value:this.Tss(),YZt:t=>this._ss(t)},{name:t+".properties.character-spacing.name",value:this.Gss(),YZt:t=>this.Css(t)},{name:t+".properties.line-height.name",value:this.x9t(),YZt:t=>this.F9t(t)},{name:t+".debugger.text-width",value:this.Z9t()},{name:t+".debugger.text-height",value:this.Q9t()}]}]}vIt(){return self.Iss}};const tT=new WeakMap,sT=new Map([["left",0],["center",1],["right",2]]),iT=new Map([["top",0],["center",1],["bottom",2]]);self.Iss=class extends self.YJ{constructor(){super(),tT.set(this,self.uU.pU().s$())}get text(){return tT.get(this).NA()}set text(t){kx.le(t);const s=tT.get(this);s.w9t(),s.A9t(t)}ats(t,s){kx.le(t),kx.re(s);const i=tT.get(this);i.w9t(),i.B9t(t,s)}lts(){tT.get(this).W9t()}set Pss(t){kx.re(t),tT.get(this)._ss(t)}get Pss(){return tT.get(this).Tss()}set Ass(t){kx.re(t),tT.get(this).Css(t)}get Ass(){return tT.get(this).Gss()}set lineHeight(t){kx.re(t),tT.get(this).F9t(t)}get lineHeight(){return tT.get(this).x9t()}set mK(t){kx.le(t);const s=sT.get(t);if(void 0===s)throw new Error("invalid mode");tT.get(this).k9t(s)}get mK(){return Kx[tT.get(this)._9t()]}set verticalAlign(t){kx.le(t);const s=iT.get(t);if(void 0===s)throw new Error("invalid mode");tT.get(this).L9t(s)}get verticalAlign(){return Zx[tT.get(this).C9t()]}set gK(t){if(!Qx.includes(t))throw new Error("invalid mode");tT.get(this).N9t(t)}get gK(){return tT.get(this).I9t()}set cts(t){tT.get(this).$9t(!!t)}get cts(){return tT.get(this).P9t()}get vK(){return tT.get(this).Z9t()}get bK(){return tT.get(this).Q9t()}pts(){const t=tT.get(this);return[t.Z9t(),t.Q9t()]}mts(t,s,i){return kx.le(t),kx.re(s),kx.re(i),tT.get(this).sts(t,s,i)}gts(t,s){return kx.re(t),kx.re(s),tT.get(this).tts(t,s)}yts(t,s=0){return kx.le(t),kx.re(s),tT.get(this).its(t,s)}wts(t){return kx.le(t),tT.get(this).ets(t)}}}{const eT=self._s;eT.sW.Yts.QB={bts(t,s){return s?this.Bc===t:eT.Ke(this.Bc,t)},Mts(){return-1!==this.l9t},j9t:()=>!0,xts(t,s,i){return this.sts(t,s,i)}}}self._s.sW.Yts.yht={Vc(t){this.w9t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.A9t(t.toString())},Tts(t){this.w9t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.A9t(this.Bc+t)},Gts(t,s){this.w9t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.B9t(t.toString(),s)},Pts(){this.W9t()},AV(t){this._ss(t)},Ess(t){this.Css(t)},SA(t){this.F9t(t)},sss(t,s){let i=!1;const e=this.jIt.Qts();for(const n of t)if(" "===n)e.Rss(s),i=!0;else{const t=e.Fss(n);t&&(t.Oss(s),i=!0)}i&&e.Dss(),this.Nc.VB()},PQt(t){this.DB().LM(t),this.Nc.VB()},Ats(t){this.k9t(t)},Ets(t){this.L9t(t)},Rts(t){this.U9t(t)},Dts(t){this.$9t(t)}};{const nT=self._s;nT.sW.Yts.wht={kss(t){const s=this.jIt.Qts().Fss(t);return s?s.Lss():this.jIt.Qts().vss()},Nss(){return this.oss},Bss(){return this.lss},Wss(){return this.uss},Vts(){return this.xP},Text(){return this.Bc},Lts(){return this.K7t?nT.dn.Og(this.Bc):this.Bc},Wts(){return this.Z9t()},jts(){return this.Q9t()},Hts(t,s){return this.tts(t,s)},Uts(t){return this.ets(t)},zts(t,s){const i=this.its(t,s);return i?i.x:0},Jts(t,s){const i=this.its(t,s);return i?i.y:0},$ts(t,s){const i=this.its(t,s);return i?i.width:0},qts(t,s){const i=this.its(t,s);return i?i.height:0}}}{const rT=self._s;self.jss=class{constructor(t,s,i,e){let n=t.vss(),r=t.bss();this.Kts=t,this.Vss=s,this.Hss=new rT.Rect(i,e,i+n,e+r),this.Uss=new rT.Rect,this.zss=-1,this.Jss()}zn(){this.Kts=null,this.Hss=null,this.Uss=null}Jss(){let t=this.Kts.Vg(),s=this.Kts.Zg();this.Uss.m(this.Hss),this.Uss.wt(t,s),this.Uss.Cl(this.Kts.gE())}Qts(){return this.Kts}$ss(){return this.Vss}gE(){return this.Uss}Oss(t){this.zss=t}Lss(){return this.zss<0?this.Kts.vss():this.zss}}}{let hT=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0},oT=function(t){return mT||(mT=aT.uo(32,32).getContext("2d")),mT.fillStyle="#FFFFFF",mT.fillStyle=t,mT.fillStyle};0;const aT=self._s,lT=new aT.Rect,uT=new aT.Il,cT=new aT.xo,fT=new Set(["left","center","right"]),dT=new Set(["top","center","bottom"]),pT=new Set(["word","cjk","character"]);let mT=null;self.dss=class{constructor(t){this.Kts=t,this.VP=0,this.HP=0,this.Bc="",this.CP=!1,this.FP=null,this.OP=aT.Un(aT.Dg),this.DP="word",this.LP=!1,this.NP=!1,this.EP="left",this.RP="top",this.o0=1,this.qss=1,this.Xss=0,this.xP=0,this.RM=aT.Un(aT.xo),this.WP=-1,this.jP=0,this.iA=t=>this.eA(t),this.Kts.Yss(this)}zn(){this.Kts.Kss(this),this.RM=null,this.iA=null,this.OP.Pu(),this.OP=null,this.Kts=null,this.FP=null}eA(t){if(t.Yg())return{width:0,height:0};const s=t.yy(),i=t.Uy("scale"),e=(i?parseFloat(i.Ig):this.o0)*this.qss,n=t.Uy("scalex"),r=(n?parseFloat(n.Ig):1)*e,h=t.Uy("scaley"),o=(h?parseFloat(h.Ig):1)*e,a=this.Kts.bss()*o+this.xP,l=this.Qts(),u=l.vss()*r,c=this.Zss();if(l.Qss()){let t=0,i=0;for(const e of s){let s=u;const n=l.Fss(e);n?s=n.Lss()*r:" "===e&&(s=l.tis()*r),i+=s,++t}return{width:i+t*c,height:a}}{const t=s.length;return{width:u*t+Math.max(t,0)*c,height:a}}}fA(){this.NP=!0}SP(){this.fA(),this.LP=!0,this.OP.Pu()}BA(t,s){t<=0||s<=0||this.VP===t&&this.HP===s||(this.VP!==t?this.SP():this.fA(),this.VP=t,this.HP=s)}GA(t){this.WP=Math.floor(t)}_A(){return this.WP}JA(t,s){this.VA();const i=this.OP.Ng();for(const e of i)if(s>e.jy()&&s<e.jy()+e.Zg())for(const s of e.ny())if(t>=s.By()&&t<s.By()+s.Vg())return s;return null}*$A(t){this.VA();const s=this.OP.Ng();for(const i of s)for(const s of i.ny()){const i=s.Uy("tag");i&&aT.Ke(i.Ig,t)&&(yield s)}}qA(t,s){for(const i of this.$A(t)){if(0===s)return i;--s}return null}XA(t){let s=0;for(const i of this.$A(t))++s;return s}VA(){this.iE(),this.eE()}iE(){if(!this.LP)return;!this.CP||this.FP&&this.FP.toString()===this.Bc||(this.FP=new aT.dn(this.Bc,{dg:!0}));const t=-this.Zss();this.OP.Dg(this.CP?this.FP._g():this.Bc,this.iA,this.VP,this.DP,t),this.LP=!1}eE(){this.NP&&(this.nE(),this.NP=!1)}nE(){let t=0;const s=this.xP,i=aT.Rh(this.OP.Ng());for(const t of i){t.Ny(NaN),t.Wy(NaN);for(const s of t.ny())s.Ny(NaN),s.Wy(NaN)}const e=i.reduce((t,s)=>t+s.Zg(),0)-s;"center"===this.RP?t=Math.max(Math.floor(this.HP/2-e/2),0):"bottom"===this.RP&&(t=Math.floor(this.HP-e));for(let e=0,n=i.length;e<n;++e){const n=i[e],r=n.Zg();if(e>0&&t>this.HP-(r-s))break;t>=0&&this.lE(n,t),t+=r}}lE(t,s){let i=0;"center"===this.EP?i=Math.max(Math.floor((this.VP-t.Vg())/2),0):"right"===this.EP&&(i=Math.max(Math.floor(this.VP-t.Vg()),0)),t.Ny(i),t.Wy(s);for(const e of t.ny())e.Yg()||(this.sis(e,i,s),i+=e.Vg())}sis(t,s,i){const e=t.Uy("offsetx");s+=e?hT(e.Ig,t.Zg()):0;const n=t.Uy("offsety");i+=n?hT(n.Ig,t.Zg()):0,t.Ny(s),t.Wy(i)}Kx(t,s,i,e){this.VA(),this.jP=0;const n=aT.Rh(this.OP.Ng()),r=Math.sin(e),h=Math.cos(e);for(const e of n)this.iis(t,e,s,i,r,h)}iis(t,s,i,e,n,r){const h=s.By(),o=s.jy();if(!Number.isFinite(h)||!Number.isFinite(o))return;const a=s.Zg();for(const h of s.ny())this.fE(t,h,i,e,n,r,a)}fE(t,s,i,e,n,r,h){let o=s.By(),a=s.jy();if(!Number.isFinite(o)||!Number.isFinite(a))return;let l=s.yy(),u=s.Vg();if(-1!==this.WP){if(this.jP>=this.WP)return;this.jP+l.length>this.WP&&(l=l.slice(0,this.WP-this.jP),u=this.eA(s).width),this.jP+=l.length}const c=s.Uy("background");if(aT.vm(l)&&!c||s.zy("hide"))return;const f=s.Uy("scale"),d=(f?parseFloat(f.Ig):this.o0)*this.qss,p=s.Uy("scalex"),m=(p?parseFloat(p.Ig):1)*d,g=s.Uy("scaley"),y=(g?parseFloat(g.Ig):1)*d,w=this.Kts.bss()*y;a+=h-this.xP-w;let S=1;const v=s.Uy("opacity");v&&(S=parseFloat(v.Ig)/100),c&&(t.mv(),cT.ua(oT(c.Ig)),cT.Do(cT.Wo()*S*this.RM.Wo()),cT.Ko(),t.NM(cT),lT.set(o,a,o+u,a+w),lT.tl()>this.VP&&lT.qa(this.VP),uT.Kl(lT,n,r),uT.offset(i,e),t.Il(uT),t.lv());const b=s.Uy("color");b?(cT.ua(oT(b.Ig)),cT.Do(this.RM.Wo())):cT.m(this.RM),cT.Do(cT.Wo()*S),cT.Ko(),t.NM(cT);const M=this.Kts.vss()*m,x=Math.abs(this.Zss());for(const s of l){const h=this.Kts.Fss(s);if(h){const s=h.Lss()*m;if(o+s>this.VP+x+1e-5)return;lT.set(o,a,o+M,a+w),uT.Kl(lT,n,r),uT.offset(i,e),t.tb(uT,h.gE()),o+=s+this.Xss}else o+=this.Kts.tis()*m+this.Xss}}Qts(){return this.Kts}dA(t){t=!!t,this.CP!==t&&(this.CP=t,this.SP())}yP(){return this.CP}Vc(t){this.Bc!==t&&(this.Bc=t,this.SP())}OA(t){if(!pT.has(t))throw new Error("invalid word wrap mode");this.DP!==t&&(this.DP=t,this.SP())}mss(t){if(!fT.has(t))throw new Error("invalid alignment");this.EP!==t&&(this.EP=t,this.fA())}gss(t){if(!dT.has(t))throw new Error("invalid alignment");this.RP!==t&&(this.RP=t,this.fA())}AV(t){this.o0!==t&&(this.o0=t,this.SP())}EV(){return this.o0}wss(t){this.qss!==t&&(this.qss=t,this.SP())}fkt(){return this.qss}yss(t){this.Xss!==t&&(this.Xss=t,this.SP())}Zss(){return this.Xss}SA(t){this.xP=t,this.SP()}vA(){return this.xP}vF(t){t=aT.Yn(t,0,1),this.RM.a=t}NM(t){this.RM.equals(t)||this.RM.m(t)}MF(){return this.RM}jA(){return this.VA(),this.OP.Cy()}HA(){this.VA();const t=this.Kts.bss()*this.o0,s=this.xP,i=t+s;return this.OP.Bg()*i-s}}}{const gT=self._s,yT=(self.dss,{width:256,height:256,eis:16,nis:16,characterSet:""});self.Zts=class{constructor(t){if((t=Object.assign({},yT,t)).width<=0||t.height<=0||t.eis<=0||t.nis<=0)throw new Error("invalid size");this.Py=t.width,this.Ay=t.height,this.hss=t.eis,this.oss=t.nis,this.ass=t.characterSet,this.ris="",this.his=null,this.ois=!1,this.ais=-1,this.Uss=new gT.Rect(0,0,1,1),this.lis=new Map,this.uis=!0,this.cis=new Set}zn(){this.Uss=null,this.fis(),this.lis=null,this.cis&&this.cis.clear(),this.cis=null}fis(){for(let t of this.lis.values())t.zn();this.lis.clear()}Yss(t){this.cis.add(t)}Kss(t){this.cis.delete(t)}rss(){if(!this.uis)return;this.fis();let t=gT.zm(this.ass),s=Math.floor(this.Py/this.hss),i=s*Math.floor(this.Ay/this.oss);for(let e=0,n=t.length;e<n&&!(e>=i);++e){let i=t[e];if(this.lis.has(i))continue;let n=e%s,r=Math.floor(e/s);this.lis.set(i,gT.Un(self.jss,this,i,n*this.hss,r*this.oss))}if(this.ois=!1,this.ais=-1,Array.isArray(this.his))for(let t of this.his){if(!Array.isArray(t))continue;if(2!==t.length)continue;let s=t[0],i=t[1];if("number"==typeof s&&isFinite(s)&&"string"==typeof i&&s!==this.hss)for(let t of i){let i=this.lis.get(t);i?(i.Oss(s),this.ois=!0):" "===t&&(this.ais=s,this.ois=!0)}}this.uis=!1;for(let t of this.cis)t.SP()}Dss(){this.ois=!0;for(const t of this.cis)t.SP()}Fss(t){return this.rss(),this.lis.get(t)||null}Qss(){return this.ois}Xg(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.Py!==t&&(this.Py=t,this.uis=!0)}Vg(){return this.Py}Hg(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.Ay!==t&&(this.Ay=t,this.uis=!0)}Zg(){return this.Ay}Sss(t){if(!this.Uss.equals(t)){this.Uss.m(t);for(const t of this.lis.values())t.Jss()}}gE(){return this.Uss}sss(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.hss!==t&&(this.hss=t,this.uis=!0)}vss(){return this.hss}iss(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.oss!==t&&(this.oss=t,this.uis=!0)}bss(){return this.oss}ess(t){this.ass!==t&&(this.ass=t,this.uis=!0)}Mss(){return this.ass}nss(t){if(this.ris!==t&&(this.ris=t,this.uis=!0,this.his=null,this.ris.length))try{this.his=JSON.parse(this.ris)}catch(t){this.his=null}}xss(){return this.ris}Rss(t){t<0&&(t=-1),this.ais!==t&&(this.ais=t,this.ais>=0&&(this.ois=!0))}tis(){return this.ais<0?this.hss:this.ais}}}{const wT=self._s;wT.sW.dis=class extends wT.YCt{constructor(t){super(t)}zn(){super.zn()}}}{let ST=function(){return MT.Vj().s$()};0;const vT=self._s,bT=self.Ls;vT.sW.dis.fRt=class extends vT.OIt{constructor(t){super(t)}zn(){super.zn()}SIt(){}vIt(){return self.pis}};let MT=null;self.pis=class extends self.nV{constructor(t){super(t),MT=t,t.aW().vB().bB=this}mis(t){return ST().gis(t)[0]}yis(t){return ST().gis(t)[1]}wis(t){return ST().gis(t)}Sis(t){return ST().vis(t)}bis(t){bT.le(t),ST().Mis(t)}xis(t){const s=ST(),i=s.aW().BW(t);s.Tis(i)}}}{const xT=self._s,TT="mouse";let GT=null;xT.sW.dis.Instance=class extends xT.BIt{constructor(t,s){super(t,TT),this.Gis=[!1,!1,!1,!1,!1],this._is=0,this.Cis=0,this.Iis=0,this.Pis=0,this.Ais=0,this.Eis=0,this.Ris=0,this.Fis=0,this.Ois=!1,this.Dis=0,this.kis=0,this.YIt([["pointer-lock-change",t=>this.Lis(t)],["pointer-lock-error",t=>this.Nis(t)]]);const i=this.aW().wf();this.Yf=new xT.$f(xT.jf.Jf(i,"pointermove",t=>this.Bis(t.data)),xT.jf.Jf(i,"pointerdown",t=>this.Wis(t.data)),xT.jf.Jf(i,"pointerup",t=>this.jis(t.data)),xT.jf.Jf(i,"dblclick",t=>this.Vis(t.data)),xT.jf.Jf(i,"wheel",t=>this.His(t.data)),xT.jf.Jf(i,"window-blur",()=>this.VUt()))}zn(){super.zn()}Wis(t){"mouse"===t.pointerType&&(this._is=t.pageX-this.Nc.QW(),this.Cis=t.pageY-this.Nc.sj(),this.Uis(t.lastButtons,t.buttons))}Bis(t){this.Dis=t.movementX,this.kis=t.movementY,this.$U(xT.sW.dis.QB.zis),this.Dis=0,this.kis=0,"mouse"===t.pointerType&&(this._is=t.pageX-this.Nc.QW(),this.Cis=t.pageY-this.Nc.sj(),this.Uis(t.lastButtons,t.buttons))}jis(t){"mouse"===t.pointerType&&this.Uis(t.lastButtons,t.buttons)}Uis(t,s){this.Jis(t,s,1,0),this.Jis(t,s,4,1),this.Jis(t,s,2,2),this.Jis(t,s,8,3),this.Jis(t,s,16,4)}Jis(t,s,i,e){!(t&i)&&s&i?this.$is(e):t&i&&!(s&i)&&this.qis(e)}$is(t){this.Gis[t]=!0,this.$U(xT.sW.dis.QB.Xis),this.Iis=t,this.Pis=0,this.$U(xT.sW.dis.QB.Yis),this.$U(xT.sW.dis.QB.Kis)}qis(t){this.Gis[t]&&(this.Gis[t]=!1,this.Iis=t,this.$U(xT.sW.dis.QB.Zis))}Vis(t){this.Iis=t.button,this.Pis=1,this.$U(xT.sW.dis.QB.Yis),this.$U(xT.sW.dis.QB.Kis)}His(t){this.Ais=t.deltaY<0?1:0,this.Eis=t.deltaX,this.Ris=t.deltaY,this.Fis=t.deltaZ,this.$U(xT.sW.dis.QB.Qis)}VUt(){for(let t=0,s=this.Gis.length;t<s;++t){if(!this.Gis[t])return;this.Gis[t]=!1,this.Iis=t,this.$U(xT.sW.dis.QB.Zis)}}gis(t){const s=this.Nc.uB(),i=this._is,e=this.Cis;if(void 0===t)return s.NB(0).Y3(i,e);{const n=s.kB(t);return n?n.sU(i,e):[0,0]}}vis(t){return t=Math.floor(t),!!this.Gis[t]}tes(){return this._is>=0&&this.Cis>=0&&this._is<this.Nc.Dzt()&&this.Cis<this.Nc.kzt()}Mis(t){GT!==t&&(GT=t,this.KIt("cursor",t))}async Tis(t){if(xT.Ks.hi||!t)return;const s=t.UGt();if(!s)return;const i=s.DB(),e=s.bPt();if(!i||!e)return;if(GT===e)return;GT=e;const n=`url(${await e.KAt()}) ${Math.round(i.Cz()*e.Vg())} ${Math.round(i.Az()*e.Zg())}, auto`;this.KIt("cursor",n)}Lis(t){this.ses(t["has-pointer-lock"])}Nis(t){this.ses(t["has-pointer-lock"]),this.$U(xT.sW.dis.QB.ies)}ses(t){this.Ois!==t&&(this.Ois=t,this.Ois?this.$U(xT.sW.dis.QB.ees):this.$U(xT.sW.dis.QB.nes))}aPt(){const t="plugins.mouse";return[{title:t+".name",properties:[{name:t+".debugger.absolute-position",value:this._is+","+this.Cis},{name:t+".debugger.left-button",value:this.Gis[0]},{name:t+".debugger.middle-button",value:this.Gis[1]},{name:t+".debugger.right-button",value:this.Gis[2]},{name:t+".debugger.button-4",value:this.Gis[3]},{name:t+".debugger.button-5",value:this.Gis[4]}]},{title:t+".debugger.position-on-each-layer",properties:this.Nc.uB().UV().map(t=>({name:"$"+t.Pc(),value:t.sU(this._is,this.Cis).join(", ")}))}]}}}{const _T=self._s;_T.sW.dis.QB={Yis(t,s){return this.Iis===t&&this.Pis===s},Xis:()=>!0,m5t(t){return this.Gis[t]},Zis(t){return this.Iis===t},res(t){const s=this.Nc.Ogt().iTt(),i=[];return this.tes()&&i.push([this._is,this.Cis]),_T.xor(this.Nc.AL()._Nt(t,i,s),s)},Kis(t,s,i){if(t!==this.Iis||s!==this.Pis)return!1;if(!this.tes())return!1;const e=this._is,n=this.Cis;return this.Nc.AL()._Nt(i,[[e,n]],!1)},Qis(t){return 2===t||this.Ais===t},ees:()=>!0,nes:()=>!0,ies:()=>!0,hes(){return this.Ois},zis:()=>!0}}{const CT=self._s,IT=["auto","pointer","text","crosshair","move","help","wait","none"],PT=["auto","all-scroll","none","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","not-allowed","grab","grabbing","col-resize","row-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out"];CT.sW.dis.yht={oes(t){this.Mis(IT[t])},aes(t){this.Mis(PT[t])},les(t){this.Tis(t)},ues(t){this.QIt("request-pointer-lock",{unadjustedMovement:t})},ces(){this.KIt("release-pointer-lock")}}}self._s.sW.dis.wht={aCt(t){return this.gis(t)[0]},lCt(t){return this.gis(t)[1]},fes(){return this._is},des(){return this.Cis},pes(){return this.Dis},mes(){return this.kis},ges(){return this.Eis},yes(){return this.Ris},wes(){return this.Fis}};{const AT=self._s;AT.sW.Ses=class extends AT.YCt{constructor(t){super(t)}zn(){super.zn()}}}{const ET=self._s;ET.sW.Ses.fRt=class extends ET.OIt{constructor(t){super(t)}zn(){super.zn()}SIt(){}}}{let RT=function(t,s,i){if(s<t.length)FT.wh(t,s);else if(s>t.length)if("function"==typeof i)for(let e=t.length;e<s;++e)t.push(i());else for(let e=t.length;e<s;++e)t.push(i)};0;const FT=self._s,OT=self.Ls,DT=self.uU;FT.sW.Ses.Instance=class extends FT.BIt{constructor(t,s){super(t),this.ves=10,this.bes=1,this.Mes=1,this.Lu=null,this.xes=[],this.Tes=[],this.Ges=[],this._es=-1,s&&(this.ves=s[0],this.bes=s[1],this.Mes=s[2]),this.Lu=FT.Mo(this.ves,()=>FT.Mo(this.bes,()=>FT.Mo(this.Mes,0)))}zn(){this.Lu=null,super.zn()}Ces(t,s,i){return t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),t>=0&&t<this.ves&&s>=0&&s<this.bes&&i>=0&&i<this.Mes?this.Lu[t][s][i]:0}Set(t,s,i,e){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),t>=0&&t<this.ves&&s>=0&&s<this.bes&&i>=0&&i<this.Mes&&(this.Lu[t][s][i]=e)}BA(t,s,i){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),t<0&&(t=0),s<0&&(s=0),i<0&&(i=0),this.ves===t&&this.bes===s&&this.Mes===i)return;this.ves=t,this.bes=s,this.Mes=i;const e=this.Lu;RT(e,t,()=>FT.Mo(s,()=>FT.Mo(i,0)));for(let n=0;n<t;++n){RT(e[n],s,()=>FT.Mo(i,0));for(let t=0;t<s;++t)RT(e[n][t],i,0)}}Vg(){return this.ves}Zg(){return this.bes}R3(){return this.Mes}Ies(t,s,i,e,n){for(;s>0;){const r=Math.floor(this.Nc.lB()*s);if(--s,0===t){const t=this.Ces(s,e,n),i=this.Ces(r,e,n);this.Set(s,e,n,i),this.Set(r,e,n,t)}else if(1===t){const t=this.Ces(i,s,n),e=this.Ces(i,r,n);this.Set(i,s,n,e),this.Set(i,r,n,t)}else if(2===t){const t=this.Ces(i,e,s),n=this.Ces(i,e,r);this.Set(i,e,s,n),this.Set(i,e,r,t)}}}aPt(){const t="plugins.arr.debugger",s="plugins.arr.properties",i=[{title:t+".array-properties.title",properties:[{name:s+".width.name",value:this.ves,YZt:t=>this.BA(t,this.bes,this.Mes)},{name:s+".height.name",value:this.bes,YZt:t=>this.BA(this.ves,t,this.Mes)},{name:s+".depth.name",value:this.Mes,YZt:t=>this.BA(this.ves,this.bes,t)},{name:s+".elements.name",value:this.ves*this.bes*this.Mes}]}],e=[];if(1===this.bes&&1===this.Mes)for(let t=0;t<this.ves;++t)e.push({name:"$"+t,value:this.Lu[t][0][0],YZt:s=>this.Lu[t][0][0]=s});else for(let t=0;t<this.ves;++t)e.push({name:"$"+t,value:this.Lu[t].toString()});return e.length&&i.push({title:t+".array-data.title",properties:e}),i}h1t(){return JSON.stringify({c2array:!0,size:[this.ves,this.bes,this.Mes],data:this.Lu})}ux(){return{size:[this.ves,this.bes,this.Mes],data:this.Lu}}mx(t){const s=t.size;this.ves=s[0],this.bes=s[1],this.Mes=s[2],this.Lu=t.data}Pes(){return this._es>=0&&this._es<this.xes.length?this.xes[this._es]:0}Aes(){return this._es>=0&&this._es<this.Tes.length?this.Tes[this._es]:0}Ees(){return this._es>=0&&this._es<this.Ges.length?this.Ges[this._es]:0}vIt(){return self.Res}};const kT=new WeakMap;self.Res=class extends DT{constructor(){super(),kT.set(this,DT.pU().s$())}get width(){return kT.get(this).Vg()}get height(){return kT.get(this).Zg()}get depth(){return kT.get(this).R3()}PV(t,s=1,i=1){OT.re(t),OT.re(s),OT.re(i),kT.get(this).BA(t,s,i)}Fes(t,s=0,i=0){return OT.re(t),OT.re(s),OT.re(i),kT.get(this).Ces(t,s,i)}Oes(t,s,i=0,e=0){if(OT.re(s),OT.re(i),OT.re(e),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid type");kT.get(this).Set(s,i,e,t)}}}{let LT=function(t,s,i,e,n,r){t.hY(i),r.cU().eV().Vpt(r.Iq()),s.oY(e,n),t.aY(i)};0;const NT=self._s;NT.sW.Ses.QB={rGt(t,s,i){return NT.compare(this.Ces(t,0,0),s,i)},Des(t,s,i,e){return NT.compare(this.Ces(t,s,0),i,e)},kes(t,s,i,e,n){return NT.compare(this.Ces(t,s,i),e,n)},Les(t){const s=this.Nc,i=s.oN(),e=s.dN(),n=e.QX(),r=s.vN(),h=r.tY(),o=r.sY(e),a=++this._es,l=this.xes,u=this.Tes,c=this.Ges,f=this.ves,d=this.bes,p=this.Mes;if(a===this.xes.length?(l.push(0),u.push(0),c.push(0)):(l[a]=0,u[a]=0,c[a]=0),s.nY(!1),0===t)for(let t=0;t<f;++t)for(let s=0;s<d;++s)for(let r=0;r<p;++r)l[a]=t,u[a]=s,c[a]=r,LT(i,e,n,h,o,this);else if(1===t)for(let t=0;t<f;++t)for(let s=0;s<d;++s)l[a]=t,u[a]=s,LT(i,e,n,h,o,this);else for(let t=0;t<f;++t)l[a]=t,LT(i,e,n,h,o,this);return s.nY(!0),this._es--,r.fY(),!1},Nes(t,s){return NT.compare(this.Ces(this.Pes(),this.Aes(),this.Ees()),t,s)},Bes(t){const s=this.ves,i=this.bes,e=this.Mes,n=this.Lu;for(let r=0;r<s;++r)for(let s=0;s<i;++s)for(let i=0;i<e;++i)if(n[r][s][i]===t)return!0;return!1},Au(){return 0===this.ves||0===this.bes||0===this.Mes},Wes(t,s,i){let e=0;switch(t){case 0:e=this.ves;break;case 1:e=this.bes;break;case 2:e=this.Mes}return NT.compare(e,s,i)}}}{let BT=function(t,s){if("number"==typeof t&&"number"==typeof s)return t-s;{const i=t.toString(),e=s.toString();return i<e?-1:i>e?1:0}};0;const WT=self._s;WT.sW.Ses.yht={Pu(t){const s=this.ves,i=this.bes,e=this.Mes,n=this.Lu;for(let r=0;r<s;++r)for(let s=0;s<i;++s)for(let i=0;i<e;++i)n[r][s][i]=t},BA(t,s,i){this.BA(t,s,i)},XM(t,s){this.Set(t,0,0,s)},xz(t,s,i){this.Set(t,s,0,i)},jes(t,s,i,e){this.Set(t,s,i,e)},sY(t,s,i){const e=this.ves,n=this.bes,r=this.Mes,h=this.Lu;if(0===i){const i=WT.Mo(n,()=>WT.Mo(r,s));0===t?h.push(i):h.unshift(i),this.ves++}else if(1===i){for(let i=0;i<e;++i){const e=WT.Mo(r,s);0===t?h[i].push(e):h[i].unshift(e)}this.bes++}else{for(let i=0;i<e;++i)for(let e=0;e<n;++e)0===t?h[i][e].push(s):h[i][e].unshift(s);this.Mes++}},fY(t,s){const i=this.ves,e=this.bes,n=this.Mes,r=this.Lu;if(0===s){if(0===i)return;0===t?r.pop():r.shift(),this.ves--}else if(1===s){if(0===e)return;for(let s=0;s<i;++s)0===t?r[s].pop():r[s].shift();this.bes--}else{if(0===n)return;for(let s=0;s<i;++s)for(let i=0;i<e;++i)0===t?r[s][i].pop():r[s][i].shift();this.Mes--}},Ves(t){const s=this.ves,i=this.bes,e=this.Mes,n=this.Lu;if(0!==s&&0!==i&&0!==e)if(0===t)n.reverse();else if(1===t)for(let t=0;t<s;++t)n[t].reverse();else for(let t=0;t<s;++t)for(let s=0;s<i;++s)n[t][s].reverse()},Hes(t){const s=this.ves,i=this.bes,e=this.Mes,n=this.Lu;if(0!==s&&0!==i&&0!==e)if(0===t)n.sort((t,s)=>BT(t[0][0],s[0][0]));else if(1===t)for(let t=0;t<s;++t)n[t].sort((t,s)=>BT(t[0],s[0]));else for(let t=0;t<s;++t)for(let s=0;s<i;++s)n[t][s].sort(BT)},Ues(t){const s=this.ves,i=this.bes,e=this.Mes,n=this.Lu;if(0!==s&&0!==i&&0!==e)if(0===t)n.sort((t,s)=>{for(let e=0;e<i;++e){const i=BT(t[e][0],s[e][0]);if(0!==i)return i}return 0});else if(1===t)for(let t=0;t<i;++t){const i=[];for(let e=0;e<s;++e)i.push(n[e][t]);i.sort((t,s)=>BT(t[0],s[0]));for(let e=0;e<s;++e)n[e][t]=i[e]}else if(2===t){const t=[];for(let s=0;s<i;++s)t.push(s);t.sort((t,i)=>{for(let e=0;e<s;++e){const s=BT(n[e][t],n[e][i]);if(0!==s)return s}return 0});for(let i=0;i<s;++i){let s=[];for(const e of t)s.push(n[i][e]);n[i]=s}}else if(3===t)for(let t=0;t<s;++t)n[t].sort((t,s)=>BT(t[0],s[0]));else for(let t=0;t<s;++t)for(let s=0;s<i;++s)n[t][s].sort(BT)},zes(t){const s=this.ves,i=this.bes,e=this.Mes;if(0!==s&&0!==i&&0!==e)if(0===t)for(let n=0;n<i;++n)for(let i=0;i<e;++i)this.Ies(t,s,0,n,i);else if(1===t)for(let n=0;n<s;++n)for(let s=0;s<e;++s)this.Ies(t,i,n,0,s);else for(let n=0;n<s;++n)for(let s=0;s<i;++s)this.Ies(t,e,n,s,0)},Eu(t,s){if((t=Math.floor(t))<0)return;const i=this.ves,e=this.bes,n=this.Mes,r=this.Lu;if(0===s){if(t>=i)return;r.splice(t,1),this.ves--}else if(1===s){if(t>=e)return;for(let s=0;s<i;++s)r[s].splice(t,1);this.bes--}else{if(t>=n)return;for(let s=0;s<i;++s)for(let i=0;i<e;++i)r[s][i].splice(t,1);this.Mes--}},wQ(t,s,i){if((s=Math.floor(s))<0)return;const e=this.ves,n=this.bes,r=this.Mes,h=this.Lu;if(0===i){if(s>e)return;h.splice(s,0,WT.Mo(n,()=>WT.Mo(r,t))),this.ves++}else if(1===i){if(s>n)return;for(let i=0;i<e;++i)h[i].splice(s,0,WT.Mo(r,t));this.bes++}else{if(s>r)return;for(let i=0;i<e;++i)for(let e=0;e<n;++e)h[i][e].splice(s,0,t);this.Mes++}},Jes(t,s,i){const e=t.split(s);this.BA(e.length,1,1);for(let t=0,s=e.length;t<s;++t){let s=e[t];0===i?String(Number(s))===s&&(s=Number(s)):2===i&&(s=Number(s)),this.Set(t,0,0,s)}},$es(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse JSON: ",t)}if(!s.c2array)return void console.warn("[Array] Attempted to load JSON that does not appear to be Construct array data - no data loaded");const i=s.size;this.ves=i[0],this.bes=i[1],this.Mes=i[2],this.Lu=s.data},F1t(t){const s=URL.createObjectURL(new Blob([this.h1t()],{type:"application/json"}));this.Nc.CB(s,t)}}}self._s.sW.Ses.wht={Ces(t,s,i){return this.Ces(t,s||0,i||0)},uCt(){return this.ves},cCt(){return this.bes},qes(){return this.Mes},Xes(){return this.Pes()},Yes(){return this.Aes()},Kes(){return this.Ees()},Zes(){return this.Ces(this.Pes(),this.Aes(),this.Ees())},Wd(){return this.Ces(0,0,0)},Qes(){return this.Ces(this.ves-1,0,0)},tns(t){const s=this.Lu;for(let i=0,e=this.ves;i<e;++i)if(s[i][0][0]===t)return i;return-1},sns(t){const s=this.Lu;for(let i=this.ves-1;i>=0;--i)if(s[i][0][0]===t)return i;return-1},ins(t){let s=[];for(let t=0;t<this.ves;++t)s.push(this.Ces(t,0,0));return s.join(t)},tCt(){return this.h1t()}};{const jT=self._s;jT.sW.ens=class extends jT.YCt{constructor(t){super(t)}zn(){super.zn()}}}{const VT=self._s;VT.sW.ens.fRt=class extends VT.OIt{constructor(t){super(t)}zn(){super.zn()}SIt(){}}}{const HT=self._s;HT.sW.ens.Instance=class extends HT.BIt{constructor(t,s){if(super(t),this.nns="",this.rns=0,this.hns="",this.ons=0,this.kf=-1,this.ans=new Map,this.lns=null,this.uns="",this.cns=!1,this.fns=null,this.pns=null,this.mns=null,this.PVt=this.Nc.$W(),this.PVt){this.fns=_t("fs"),this.pns=_t("path");const t=self.process||nw.process;this.mns=this.pns.dirname(t.execPath)+"\\"}}zn(){super.zn()}async gns(t,s,i){console.error(`[Construct] AJAX request to '${s}' (tag '${t}') failed: `,i),this.hns=t,await this.KB(HT.sW.ens.QB.yns),this.hns=t,await this.KB(HT.sW.ens.QB.wns)}async Sns(t){this.hns=t,await this.KB(HT.sW.ens.QB.vns),this.hns=t,await this.KB(HT.sW.ens.QB.bns)}async Mns(t,s){s.lengthComputable&&(this.ons=s.loaded/s.total,this.hns=t,await this.KB(HT.sW.ens.QB.xns))}async Tns(t,s){s.lengthComputable&&(this.ons=s.loaded/s.total,this.hns=t,await this.KB(HT.sW.ens.QB.Gns))}_ns(t,s,i){if(!this.PVt)return void this.gns(t,s,i);const e=this.fns,n=this.mns+s;e.existsSync(n)?e.readFile(n,{encoding:"utf8"},(i,e)=>{i?this.gns(t,s,i):(this.nns=e.replace(/\r\n/g,"\n"),this.Sns(t))}):this.gns(t,s,i)}async Cns(t,s){const i=this.Nc.CL(),e=this.lns;this.lns=null;try{if(e){const n=await i.aZ(s);e.Ins(n),this.nns="",this.rns=0,this.Sns(t)}else{const e=await i.lZ(s);this.nns=e.replace(/\r\n/g,"\n"),this.rns=0,this.Sns(t)}}catch(i){this.gns(t,s,i)}}Pns(t,s,i,e){return new Promise(n=>{const r=i=>{this._ns(t,s,i),n()},h=this.lns;this.lns=null;try{const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4===o.readyState){if(this.nns=h?"":(o.responseText||"").replace(/\r\n/g,"\n"),this.rns=o.status,o.status>=400)this.gns(t,s,o.status+o.statusText);else{const s=this.nns.length||h&&o.response instanceof ArrayBuffer;this.PVt&&!s||!this.PVt&&0===o.status&&!s||(h&&h.Ins(o.response),this.Sns(t))}n()}},o.onerror=r,o.ontimeout=r,o.onabort=r,o.onprogress=s=>this.Mns(t,s),o.upload.onprogress=s=>this.Tns(t,s),o.open(i,s),this.kf>=0&&void 0!==o.timeout&&(o.timeout=this.kf),o.responseType=h?"arraybuffer":"text",e&&!this.ans.has("Content-Type")&&("string"!=typeof e?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));for(const[t,s]of this.ans)try{o.setRequestHeader(t,s)}catch(i){console.error(`[Construct] AJAX: Failed to set header '${t}: ${s}': `,i)}if(this.ans.clear(),this.uns){try{o.overrideMimeType(this.uns)}catch(t){console.error("[Construct] AJAX: failed to override MIME type: ",t)}this.uns=""}this.cns&&(o.withCredentials=!0,this.cns=!1),e?o.send(e):o.send()}catch(t){r(t)}})}aPt(){const t="plugins.ajax.debugger";return[{title:t+".title",properties:[{name:t+".last-status-code",value:this.rns},{name:t+".last-data",value:this.nns}]}]}ux(){return{lastData:this.nns,lastStatusCode:this.rns}}mx(t){this.nns=t.lastData,this.rns=t.hasOwnProperty("lastStatusCode")?t.lastStatusCode:0,this.hns="",this.ons=0}}}{const UT=self._s;UT.sW.ens.QB={bns(t){return UT.Ke(this.hns,t)},vns:()=>!0,wns(t){return UT.Ke(this.hns,t)},yns:()=>!0,xns(t){return UT.Ke(this.hns,t)},Gns(t){return UT.Ke(this.hns,t)}}}{const zT=self._s;zT.sW.ens.yht={async Request(t,s){this.Nc.SVt()&&zT.Kh(s)&&this.Nc.CL().hZ()?await this.Cns(t,s):await this.Pns(t,s,"GET",null)},async Ans(t,s){this.Nc.SVt()&&this.Nc.CL().hZ()?await this.Cns(t,s):await this.Pns(t,s,"GET",null)},async Ens(t,s,i,e){await this.Pns(t,s,e,i)},async Rns(t,s,i,e){if(!i)return;const n=i.UGt(this.fi);if(!n)return;const r=n.s$().Fns();await this.Pns(t,s,e,r)},Ons(t){this.kf=1e3*t},Dns(t,s){this.ans.set(t,s)},kns(t){if(!t)return;const s=t.UGt(this.fi);s&&(this.lns=s.s$())},Lns(t){this.uns=t},Nns(t){this.cns=!!t}}}self._s.sW.ens.wht={Bns(){return this.nns},Wns(){return this.rns},jns(){return this.ons},Tag(){return this.hns}};{const JT=self._s;JT.gut.Ks=class extends JT.YPt{constructor(t){super(t)}zn(){super.zn()}}}{const $T=self._s;$T.gut.Ks.fRt=class extends $T.sAt{constructor(t){super(t)}zn(){super.zn()}SIt(){}}}{let qT=function(t,s,i,e,n){const r=s*n,h=i*n;return XT.Yn(t*n+.5*e*n*n,r,h)};0;const XT=self._s,YT=self.Ls,KT=self.h$,ZT=0,QT=1,tG=2,sG=3,iG=4,eG=5,nG=6,rG=7,hG=8,oG=9,aG=.05;XT.gut.Ks.Instance=class extends XT.eAt{constructor(t,s){super(t),this.Vns=null,this.Hns=!1,this.Uns=!1,this.zns=!1,this.Jns=!1,this.$ns=!1,this.qns=!1,this.Xns=!1,this.Yns=!1,this.Kns=!1,this.Zns=!1,this.Qns=null,this.trs=-1,this.srs=0,this.irs=0,this.ers=!1,this.nrs=!1,this.rrs=this.Nc.AL().FNt(this.fi),this.hrs=-1,this.ors="stopped",this.ars=-1,this.lrs=!0,this.urs=0,this.crs=0,this.frs=0,this.drs=0,this.prs=0,this.mrs=0,this.Go=1500,this.grs=1500,this.yrs=XT.Zn(90),this.wrs=330,this.Srs=1500,this.vrs=1500,this.brs=650,this.Mrs=1e3,this.xrs=!1,this.Trs=0,this.Grs=0,this._rs=!0,this.Crs=0,this.Rbt=!0,s&&(this.wrs=s[ZT],this.Srs=s[QT],this.vrs=s[tG],this.brs=s[sG],this.Go=s[iG],this.Mrs=s[eG],this.xrs=!!s[nG],this.Trs=s[rG]/1e3,this._rs=!!s[hG],this.Rbt=!!s[oG]);const i=this.Nc.wf();this.Yf=new XT.$f(XT.jf.Jf(i,"instancedestroy",t=>this.C8t(t.f$)),XT.jf.Jf(i,"afterload",t=>this.f8())),this._rs&&this.Irs(),this.Rbt&&this.aAt(),this.Prs()}zn(){this.Vns&&(this.Vns.zn(),this.Vns=null),this.Qns=null,this.rrs=null,super.zn()}Irs(){if(this.Vns)return;const t=this.Nc.wf();this.Vns=new XT.$f(XT.jf.Jf(t,"keydown",t=>this.N3t(t.data)),XT.jf.Jf(t,"keyup",t=>this.B3t(t.data)),XT.jf.Jf(t,"window-blur",()=>this.W3t()),XT.jf.Jf(t,"keyboard-blur",()=>this.W3t()))}Ars(){this.Vns&&(this.Vns.zn(),this.Vns=null)}C8t(t){this.Qns===t&&(this.Qns=null),this.rrs===t&&(this.rrs=null)}N3t(t){switch(t.key){case"ArrowLeft":this.Hns=!0;break;case"ArrowRight":this.Uns=!0;break;case"ArrowUp":this.zns=!0}}B3t(t){switch(t.key){case"ArrowLeft":this.Hns=!1;break;case"ArrowRight":this.Uns=!1;break;case"ArrowUp":this.zns=!1,this.Jns=!1}}W3t(){this.Hns=!1,this.Uns=!1,this.zns=!1,this.Jns=!1}ux(){return{ii:this.Xns,lfx:this.srs,lfy:this.irs,lfo:this.Qns?this.Qns.TU():-1,am:this.ors,en:this.Rbt,fallt:this.ars,ft:this.lrs,dx:this.urs,dy:this.crs,ms:this.wrs,acc:this.Srs,dec:this.vrs,js:this.brs,g:this.Go,g1:this.grs,mf:this.Mrs,wof:this.nrs,woj:this.rrs?this.rrs.TU():-1,ga:this.yrs,edj:this.xrs,cdj:this.qns,dj:this.$ns,sus:this.Trs,dc:this._rs,cc:this.Crs}}mx(t){this.Xns=t.ii,this.srs=t.lfx,this.irs=t.lfy,this.trs=t.lfo,this.ors=t.am;const s=t.en;this.ars=t.fallt||-1,this.lrs=t.ft,this.urs=t.dx,this.crs=t.dy,this.wrs=t.ms,this.Srs=t.acc,this.vrs=t.dec,this.brs=t.js,this.Go=t.g,this.grs=t.g1,this.Mrs=t.mf,this.nrs=t.wof,this.hrs=t.woj,this.yrs=t.ga,this.xrs=t.edj,this.qns=t.cdj,this.$ns=t.dj,this.Trs=t.sus,this._rs=t.dc,this.Crs=t.cc||0,this.Hns=!1,this.Uns=!1,this.zns=!1,this.Jns=!1,this.Yns=!1,this.Kns=!1,this.Zns=!1,this.Grs=0,this._rs?this.Irs():this.Ars(),this.P_t(s),this.Prs()}f8(){-1===this.trs?this.Qns=null:this.Qns=this.Nc.PB(this.trs),-1===this.hrs?this.rrs=null:this.rrs=this.Nc.PB(this.hrs)}Ers(t){if(this.Qns=t,t){const s=t.DB();this.srs=s.qM(),this.irs=s.KM()}}Rrs(){return this.Nc.ON()>this.ars+aG}Prs(){this.frs=Math.cos(this.yrs),this.drs=Math.sin(this.yrs),this.prs=Math.cos(this.yrs-Math.PI/2),this.mrs=Math.sin(this.yrs-Math.PI/2),this.frs=XT.Tr(this.frs,6),this.drs=XT.Tr(this.drs,6),this.prs=XT.Tr(this.prs,6),this.mrs=XT.Tr(this.mrs,6),this.grs=this.Go,this.Go<0&&(this.frs*=-1,this.drs*=-1,this.Go=Math.abs(this.Go))}Frs(){return this.Go<0?-1:1}Ors(){const t=this.fi.DB(),s=this.Nc.AL(),i=this.fi,e=this.Qns,n=t.qM(),r=t.KM();if(t.Gz(this.frs,this.drs),t.Mz(),!e||!s.AW(i,e)||e.cU().lFt()&&!s.$kt(e,i)||e.cU().uFt()&&!e.XFt()){let e=s.FW(i),h=null;if(!e&&this.Rrs()&&(h=s.FNt(i,!0)),t.xz(n,r),t.Mz(),e)return s.AW(i,e)?null:(this.ers=!1,e);if(h&&h.length){let t=0;for(let e=0,n=h.length;e<n;++e)h[t]=h[e],s.AW(i,h[e])||++t;if(t>=1)return this.ers=!0,h[0]}return null}return t.xz(n,r),t.Mz(),e}oAt(){if(!this.Rbt)return;const t=this.Nc.AN(this.fi);this.zns||this.Zns||(this.Jns=!1);let s=this.Hns||this.Yns,i=this.Uns||this.Kns,e=this.zns||this.Zns,n=e&&!this.Jns;this.Yns=!1,this.Kns=!1,this.Zns=!1,this.Xns&&(s=!1,i=!1,e=!1,n=!1),e||(this.Grs=0),this.Drs();const[r,h,o]=this.krs();let a=this.Ors();const l=a&&!this.nrs;let u=!1;if([u,a]=this.Lrs(a),u)return;this.Nrs(a,o,r,e),n=this.Brs(a,n,e),a||this.Wrs(n,e,t),this.nrs=!!a;const c=this.jrs(s,i);let f=!1,d=0;if(0!==this.urs&&([f,a]=this.Vrs(t,c,a,n)),0!==this.crs){const[s,i]=this.Hrs(t,a);f=f||s,d=i}!f&&l&&this.crs<0&&d>0&&(this.crs=0,f=!0),this.Urs(s,i,c,t),a&&!n||f||(this.crs=Math.min(this.crs+this.Go*t,this.Mrs)),this.zrs(a,f,n),this.rrs=this.Nc.AL().FNt(this.fi)}Drs(){if(!this.lrs)return;const t=this.fi,s=this.Nc.AL();(s.FW(t)||s.FNt(t))&&s.DNt(t,-this.frs,-this.drs,4,!0),this.lrs=!1}krs(){const t=this.Qns,s=t?t.DB():null;let i=0,e=0,n=!1;if(t&&0===this.crs&&(s.KM()!==this.irs||s.qM()!==this.srs)){const t=this.fi,r=t.DB(),h=this.Nc.AL(),o=s.qM(),a=s.KM();i=o-this.srs,e=a-this.irs,r.Gz(i,e),r.Mz(),this.srs=o,this.irs=a,n=!0;const l=h.FW(t);l&&(h.yNt(t,l),h.DNt(t,-i,-e,2.5*XT.tr(i,e)))}return[i,e,n]}Lrs(t){let s=!1;const i=this.fi,e=i.DB(),n=this.Nc.AL(),r=n.FW(i);if(!r)return[!1,t];const h=Math.abs(e.Vg()),o=Math.abs(e.Zg());return n.DNt(i,-this.frs,-this.drs,o/8)?(n.yNt(i,r),t=r,this.Ers(r),this.ers=!1,this.crs=0):n.LNt(i,this.prs,this.mrs,h/2)||n.LNt(i,this.frs,this.drs,o/2)||n.NNt(i,Math.max(h,o)/2)?n.yNt(i,r):s=!0,[s,t]}Nrs(t,s,i,e){const n=this.fi,r=this.Nc.AL();if(t){const e=this.frs,h=this.drs,o=this.prs,a=this.mrs;if(this.$ns=!1,this.qns=!1,this.crs>0&&(this.nrs||(r.kNt(n,-e,-h,t,16),this.nrs=!0),this.crs=0),this.Qns!==t)this.Ers(t),r.yNt(n,t);else if(s){const t=r.FW(n);t&&(r.yNt(n,t),0!==i&&(i>0?r.DNt(n,-o,-a):r.DNt(n,o,a)),r.DNt(n,-e,-h))}}else e||(this.qns=!0)}Brs(t,s,i){if(t&&s||!t&&this.xrs&&i&&this.qns&&!this.$ns){const i=this.fi,e=i.DB(),n=this.Nc.AL(),r=e.qM(),h=e.KM();e.Gz(-this.frs,-this.drs),e.Mz(),n.FW(i)?s=!1:(this.Grs=this.Trs,this.$U(XT.gut.Ks.QB.Jrs),this.ors="jumping",this.crs=-this.brs,s=!0,t?this.Jns=!0:this.$ns=!0),e.xz(r,h),e.Mz()}return s}Wrs(t,s,i){s&&this.Grs>0?(this.crs=-this.brs,this.Grs-=i):this.Qns=null,t&&(this.Jns=!0)}jrs(t,s){let i=0;const e=this.Srs,n=this.vrs;return t&&!s&&(i=this.urs>0?-(e+n):-e),s&&!t&&(i=this.urs<0?e+n:e),i}Urs(t,s,i,e){const n=this.vrs;t===s&&(this.urs<0?this.urs=Math.min(this.urs+n*e,0):this.urs>0&&(this.urs=Math.max(this.urs-n*e,0))),this.urs=XT.Yn(this.urs+i*e,-this.wrs,this.wrs);const r=this.Nc.AL(),h=this.urs<0?this.$rs(0,1,1):null;if(h)this.urs=0,r.yNt(this.fi,h);else{const t=this.urs>0?this.$rs(1,1,1):null;t&&(this.urs=0,r.yNt(this.fi,t))}}Vrs(t,s,i,e){const n=this.fi,r=n.DB(),h=this.Nc.AL(),o=this.frs,a=this.drs,l=this.prs,u=this.mrs,c=this.wrs;let f=!1;const d=new Set(h.FNt(n,!0));let p=r.qM(),m=r.KM();const g=qT(this.urs,-c,c,s,t)*l,y=qT(this.urs,-c,c,s,t)*u;r.Gz(l*(this.urs>1?1:-1)-o,u*(this.urs>1?1:-1)-a),r.Mz();let w=!1;const S=h.FW(n);r.xz(p+g,m+y),r.Mz();let v=h.FW(n);if(!v&&i&&this.ers&&(v=h.FNt(n),d.has(v)?v=null:w=!0),v){let s=Math.abs(this.urs*t)+2;S||!h.DNt(n,-o,-a,s,w,v)?(h.yNt(n,v),s=Math.max(Math.abs(this.urs*t*2.5),Math.floor(r.Vg())),h.DNt(n,l*(this.urs<0?1:-1),u*(this.urs<0?1:-1),s,!1)?!i||w||this.ers||(p=r.qM(),m=r.KM(),r.Gz(o,a),h.FW(n)&&h.DNt(n,-o,-a,3,!1)||(r.xz(p,m),r.Mz())):(r.xz(p,m),r.Mz()),w||(this.urs=0)):!S&&!e&&Math.abs(this.crs)<Math.abs(this.brs/4)&&(this.crs=0,i||(f=!0))}else{const s=this.Ors();if(i&&!s){const s=Math.ceil(Math.abs(this.urs*t))+2;p=r.qM(),m=r.KM(),r.Gz(o*s,a*s),r.Mz();const e=h.FNt(n);let l=!1;e&&!d.has(e)&&h.DNt(n,-o,-a,s+2,!0,e)&&(i=e,this.Ers(e),this.ers=!0,l=!0),l||(h.FW(n)?h.DNt(n,-o,-a,s+2,!1):(r.xz(p,m),r.Mz()))}else s&&(!i&&this.ers&&(this.Ers(s),this.crs=0,f=!0),0===this.crs&&h.kNt(n,-o,-a,s,16))}return[f,i]}Hrs(t,s){const i=this.fi,e=i.DB(),n=this.Nc.AL(),r=this.frs,h=this.drs;let o=!1,a=e.qM(),l=e.KM();const u=qT(this.crs,-1/0,this.Mrs,this.Go,t);e.Gz(u*r,u*h);const c=e.qM(),f=e.KM();e.Mz();let d=n.FW(i),p=!1;if(!d&&this.crs>0&&!s){const t=this.Rrs()?n.FNt(i,!0):null;if(t&&t.length){if(this.rrs){e.xz(a,l),e.Mz();let s=0;for(let e=0,r=t.length;e<r;++e)t[s]=t[e],n.AW(i,t[e])||++s;XT.wh(t,s),e.xz(c,f),e.Mz()}t.length>=1&&(d=t[0])}p=!!d}if(d){n.yNt(i,d),this.Grs=0;let s=1.1;p&&!this.rrs&&(s=2);const u=Math.max(Math.abs(this.crs*t*s),2);n.DNt(i,r*(this.crs<0?1:-1),h*(this.crs<0?1:-1),u,p,d)?(this.Ers(d),this.ers=p,this.crs>0&&(o=!0),(this.crs>0||0===this.Crs)&&(this.crs=0),this.crs<0&&1===this.Crs&&n.kNt(i,r,h,d,32)):(e.xz(a,l),e.Mz(),this.nrs=!0,p||(this.crs=0))}return[o,u]}zrs(t,s,i){"falling"!==this.ors&&this.crs>0&&!t&&(this.$U(XT.gut.Ks.QB.qrs),this.ors="falling"),(t||s)&&this.crs>=0&&("falling"===this.ors||s||i&&0===this.crs?(this.$U(XT.gut.Ks.QB.Xrs),0===this.urs&&0===this.crs?this.ors="stopped":this.ors="moving"):("stopped"!==this.ors&&0===this.urs&&0===this.crs&&(this.$U(XT.gut.Ks.QB.Yrs),this.ors="stopped"),"moving"===this.ors||0===this.urs&&0===this.crs||i||(this.$U(XT.gut.Ks.QB.Krs),this.ors="moving")))}Zrs(){return 0!==this.Qrs()||0!==this.ths()}shs(){if(0!==this.crs)return!1;const t=this.fi,s=this.DB(),i=this.Nc.AL(),e=s.qM(),n=s.KM();s.Gz(this.frs,this.drs),s.Mz();const r=i.FW(t);let h=null;if(!r&&this.Rrs()&&(h=i.FNt(t,!0)),s.xz(e,n),s.Mz(),r)return!i.AW(t,r);if(h&&h.length){let s=0;for(let e=0,n=h.length;e<n;++e)h[s]=h[e],i.AW(t,h[e])||s++;if(s>=1)return!0}return!1}ihs(t,s=2,i=3){return!!this.$rs(t,s,i)}$rs(t,s=2,i=3){const e=this.fi,n=this.DB(),r=this.Nc.AL(),h=n.qM(),o=n.KM();if(0===t?n.Gz(-this.prs*s,-this.mrs*s):n.Gz(this.prs*s,this.mrs*s),n.Mz(),!r.FW(e))return n.xz(h,o),n.Mz(),null;n.Gz(-this.frs*i,-this.drs*i),n.Mz();const a=r.FW(e);return n.xz(h,o),n.Mz(),a}ehs(){const t=this.DB(),s=t.qM(),i=t.KM();t.Gz(this.frs,this.drs),t.Mz();const e=this.Nc.AL().FNt(this.fi,!1);t.xz(s,i),t.Mz(),e&&(this.ars=this.Nc.ON(),this.Qns=null)}nhs(t){this.$ns=!t}rhs(){return Math.hypot(this.urs,this.crs)}hhs(){return Math.atan2(this.crs,this.urs)}ohs(){return this.crs<0}ahs(){return this.crs>0}lhs(t){this.wrs=Math.max(t,0)}uhs(){return this.wrs}chs(t){this.Srs=Math.max(t,0)}fhs(){return this.Srs}dhs(t){this.vrs=Math.max(t,0)}phs(){return this.vrs}mhs(t){this.brs=Math.max(t,0)}ghs(){return this.brs}yhs(t){this.Mrs=Math.max(t,0)}whs(){return this.Mrs}Shs(t){if(this.grs===t)return;this.Go=t,this.Prs();const s=this.Nc.AL(),i=this.DB();s.FW(this.fi)&&(s.DNt(this.fi,this.frs,this.drs,10),i.Gz(2*this.frs,2*this.drs),i.Mz()),this.Qns=null}vhs(){return this.Go}bhs(t){t=XT.Kn(t),this.yrs!==t&&(this.yrs=t,this.Prs(),this.Qns=null)}Mhs(){return this.yrs}xhs(t){this.xrs=!!t}Ths(){return this.xrs}Ghs(t){this.Trs=t}_hs(){return this.Trs}Chs(t){this.Crs=t}Ihs(){return this.Crs}Phs(t){this.urs=t}Qrs(){return this.urs}Ahs(t){this.crs=t}ths(){return this.crs}Ehs(t){if(this.Rbt)switch(t){case 0:this.Yns=!0;break;case 1:this.Kns=!0;break;case 2:this.Zns=!0}}Rhs(t){t=!!t,this._rs!==t&&(this._rs=t,this._rs?this.Irs():(this.Ars(),this.W3t()))}Fhs(){return this._rs}Ohs(t){this.Xns=!!t}Dhs(){return this.Xns}P_t(t){t=!!t,this.Rbt!==t&&(this.Rbt=t,this.Rbt?this.aAt():(this.nAt(),this.Qns=null,this.Yns=!1,this.Kns=!1,this.Zns=!1))}E_t(){return this.Rbt}tot(t){switch(t){case ZT:return this.uhs();case QT:return this.fhs();case tG:return this.phs();case sG:return this.ghs();case iG:return this.vhs();case eG:return this.whs();case nG:return this.Ths();case rG:return 1e3*this._hs();case hG:return this.Fhs();case oG:return this.E_t()}}hot(t,s){switch(t){case ZT:this.lhs(s);break;case QT:this.chs(s);break;case tG:this.dhs(s);break;case sG:this.mhs(s);break;case iG:this.Shs(s);break;case eG:this.yhs(s);break;case nG:this.xhs(!!s);break;case rG:this.Ghs(s/1e3);break;case hG:this.Rhs(!!s);break;case oG:this.P_t(!!s)}}aPt(){const t="behaviors.platform";return[{title:"$"+this.c$().Pc(),properties:[{name:t+".debugger.vector-x",value:this.Qrs(),YZt:t=>this.Phs(t)},{name:t+".debugger.vector-y",value:this.ths(),YZt:t=>this.Ahs(t)},{name:t+".properties.max-speed.name",value:this.uhs(),YZt:t=>this.lhs(t)},{name:t+".properties.acceleration.name",value:this.fhs(),YZt:t=>this.chs(t)},{name:t+".properties.deceleration.name",value:this.phs(),YZt:t=>this.dhs(t)},{name:t+".properties.jump-strength.name",value:this.ghs(),YZt:t=>this.mhs(t)},{name:t+".properties.gravity.name",value:this.vhs(),YZt:t=>this.Shs(t)},{name:t+".debugger.gravity-angle",value:XT.Qn(this.Mhs()),YZt:t=>this.bhs(XT.Zn(t))},{name:t+".properties.max-fall-speed.name",value:this.whs(),YZt:t=>this.yhs(t)},{name:t+".properties.double-jump.name",value:this.Ths(),YZt:t=>this.xhs(t)},{name:t+".properties.jump-sustain.name",value:1e3*this._hs(),YZt:t=>this.Ghs(t/1e3)},{name:t+".debugger.animation-mode",value:[t+".debugger.anim-"+this.ors]},{name:t+".properties.enabled.name",value:this.E_t(),YZt:t=>this.P_t(t)}]}]}vIt(){return self.khs}};const lG=new WeakMap,uG=new Map([["left",0],["right",1],["jump",2]]);self.khs=class extends KT{constructor(){super(),lG.set(this,KT.pU().s$())}Lhs(){lG.get(this).ehs()}Nhs(t){lG.get(this).nhs(!!t)}Bhs(t){YT.le(t);const s=uG.get(t);if("number"!=typeof s)throw new Error("invalid control");lG.get(this).Ehs(s)}get speed(){return lG.get(this).rhs()}get Whs(){return lG.get(this).uhs()}set Whs(t){YT.re(t),lG.get(this).lhs(t)}get acceleration(){return lG.get(this).fhs()}set acceleration(t){YT.re(t),lG.get(this).chs(t)}get jhs(){return lG.get(this).phs()}set jhs(t){YT.re(t),lG.get(this).dhs(t)}get Vhs(){return lG.get(this).ghs()}set Vhs(t){YT.re(t),lG.get(this).mhs(t)}get Hhs(){return lG.get(this).whs()}set Hhs(t){YT.re(t),lG.get(this).yhs(t)}get Uhs(){return lG.get(this).vhs()}set Uhs(t){YT.re(t),lG.get(this).Shs(t)}get zhs(){return lG.get(this).Mhs()}set zhs(t){YT.re(t),lG.get(this).bhs(t)}get Jhs(){return lG.get(this).Ths()}set Jhs(t){lG.get(this).xhs(!!t)}get $hs(){return lG.get(this)._hs()}set $hs(t){YT.re(t),lG.get(this).Ghs(t)}get qhs(){return 0===lG.get(this).Ihs()?"stop":"preserve-momentum"}set qhs(t){YT.le(t);const s=lG.get(this);if("stop"===t)s.Chs(0);else{if("preserve-momentum"!==t)throw new Error("invalid mode");s.Chs(1)}}get Xhs(){return lG.get(this).shs()}Yhs(t){YT.le(t);const s=lG.get(this);if("left"===t)return s.ihs(0);if("right"===t)return s.ihs(1);throw new Error("invalid side")}get Khs(){return lG.get(this).Zrs()}get Zhs(){return lG.get(this).ohs()}get Qhs(){return lG.get(this).ahs()}get tos(){return lG.get(this).Qrs()}set tos(t){YT.re(t),lG.get(this).Phs(t)}get sos(){return lG.get(this).ths()}set sos(t){YT.re(t),lG.get(this).Ahs(t)}ios(t,s){YT.re(t),YT.re(s);const i=lG.get(this);i.Phs(t),i.Ahs(s)}eos(){const t=lG.get(this);return[t.Qrs(),t.ths()]}get nos(){return lG.get(this).Fhs()}set nos(t){lG.get(this).Rhs(!!t)}get ros(){return lG.get(this).Dhs()}set ros(t){lG.get(this).Ohs(!!t)}get isEnabled(){return lG.get(this).E_t()}set isEnabled(t){lG.get(this).P_t(!!t)}}}{const cG=self._s;cG.gut.Ks.QB={hos(){return this.Zrs()},oos(t,s){return cG.compare(this.rhs(),t,s)},aos(){return this.shs()},los(t){return this.ihs(t)},uos(){return this.ohs()},fos(){return this.ahs()},dos(){return this.Ths()},Jrs:()=>!0,qrs:()=>!0,Yrs:()=>!0,Krs:()=>!0,Xrs:()=>!0,_u(){return this.E_t()}}}{const fG=self._s;fG.gut.Ks.yht={pos(t){this.lhs(t)},mos(t){this.chs(t)},gos(t){this.dhs(t)},yos(t){this.mhs(t)},wos(t){this.yhs(t)},Sos(t){this.Shs(t)},vos(t){this.Ehs(t)},bos(t){this.Ohs(!!t)},Mos(t){this.Phs(t)},xos(t){this.Ahs(t)},Tos(t){this.bhs(fG.Zn(t))},CCt(t){this.P_t(0!==t)},Gos(){this.ehs()},_os(t){this.xhs(0!==t)},Cos(t){this.Ghs(t/1e3)},Ios(t){this.Chs(t)},Pos(t){this.Rhs(t)},Aos(t){this.nhs(t)}}}{const dG=self._s;dG.gut.Ks.wht={Eos(){return this.rhs()},Ros(){return this.uhs()},Fos(){return this.fhs()},Oos(){return this.phs()},Dos(){return this.ghs()},kos(){return this.vhs()},Los(){return dG.Qn(this.Mhs())},Nos(){return this.whs()},Bos(){return dG.Qn(this.hhs())},Wos(){return this.Qrs()},jos(){return this.ths()},Vos(){return 1e3*this._hs()}}}{const pG=self._s;pG.gut.Hos=class extends pG.YPt{constructor(t){super(t)}zn(){super.zn()}}}{const mG=self._s;mG.gut.Hos.fRt=class extends mG.sAt{constructor(t){super(t)}zn(){super.zn()}SIt(){}}}{const gG=self._s,yG=self.Ls,wG=self.h$;gG.gut.Hos.Uos=class{constructor(t,s,i,e){this.ypt=gG.Un(gG.Qf),this.ypt.Set(t||0),this.zos=gG.Un(gG.Qf),this.zos.Set(s||0),this.gEt=i||0,this.Jos=!!e,this.$os=!1}qos(){return this.ypt.zs()}aq(){return this.zos.zs()}j$(){return this.gEt}p7t(t){this.$os=!!t}vq(){return this.$os}Bu(t){this.ypt.Bu(t),this.zos.Bu(t)}Xos(){return this.ypt.zs()>=this.gEt}IQ(){if(this.Xos()){if(!this.Jos)return!0;this.ypt.nd(this.gEt)}return!1}ux(){return{c:this.ypt.zs(),t:this.zos.zs(),d:this.gEt,r:this.Jos,p:this.$os}}mx(t){this.ypt.Set(t.c),this.zos.Set(t.t),this.gEt=t.d,this.Jos=!!t.r,this.$os=!!t.p}},gG.gut.Hos.Instance=class extends gG.eAt{constructor(t,s){super(t),this.Yos=new Map}zn(){this.Yos.clear(),super.zn()}Kos(t,s,i){const e=new gG.gut.Hos.Uos(0,0,t,i);this.Yos.set(s.toLowerCase(),e),this.Zos()}Qos(t){this.Yos.delete(t.toLowerCase()),this.Zos()}tas(){this.Yos.clear(),this.Zos()}sas(t){return this.Yos.has(t.toLowerCase())}ias(t){const s=this.Yos.get(t.toLowerCase());return s?s.qos():0}eas(t){const s=this.Yos.get(t.toLowerCase());return s?s.qos()/s.j$():0}nas(t){const s=this.Yos.get(t.toLowerCase());return s?s.aq():0}ras(t){const s=this.Yos.get(t.toLowerCase());return s?s.j$():0}oas(t){const s=this.Yos.get(t.toLowerCase());return!!s&&s.Xos()}aas(t,s){const i=this.Yos.get(t.toLowerCase());i&&i.p7t(s)}las(t){const s=this.Yos.get(t.toLowerCase());return!!s&&s.vq()}uas(t){for(const s of this.Yos.values())s.p7t(t)}Zos(){this.Yos.size>0?(this.nPt(),this.hPt()):(this.VIt(),this.HIt())}ux(){const t={};for(const[s,i]of this.Yos.entries())t[s]=i.ux();return t}mx(t){this.Yos.clear();for(const[s,i]of Object.entries(t)){const t=new gG.gut.Hos.Uos;t.mx(i),this.Yos.set(s,t)}this.Zos()}u7(){const t=this.Nc.AN(this.fi);for(const[s,i]of this.Yos)i.vq()||(i.Bu(t),i.Xos()&&this.LIt("timer",!1,{tag:s}))}ePt(){for(const[t,s]of this.Yos.entries())s.IQ()&&this.Yos.delete(t)}aPt(){return[{title:"behaviors.timer.debugger.timers",properties:[...this.Yos.entries()].map(t=>({name:"$"+t[0],value:`${Math.round(10*t[1].qos())/10} / ${Math.round(10*t[1].j$())/10}`}))}]}vIt(){return self.cas}};const SG=["once","regular"];self.cas=class extends wG{#t;constructor(){super(),this.#t=wG.pU().s$()}fas(t,s,i="once"){yG.re(t),yG.le(s);const e=SG.indexOf(i);if(-1===e)throw new Error("invalid type");this.#t.Kos(t,s,1===e)}das(t,s){yG.le(t),this.#t.aas(t,!!s)}pas(t){this.#t.uas(!!t)}mas(t){yG.le(t),this.#t.Qos(t)}gas(){this.#t.tas()}yas(t){return yG.le(t),this.#t.sas(t)}was(t){return yG.le(t),this.#t.las(t)}getCurrentTime(t){return yG.le(t),this.#t.ias(t)}Sas(t){return yG.le(t),this.#t.eas(t)}vas(t){return yG.le(t),this.#t.nas(t)}bas(t){return yG.le(t),this.#t.ras(t)}Mas(t){return yG.le(t),this.#t.oas(t)}}}self._s.gut.Hos.QB={xas(t){return this.oas(t)},Tas(t){return this.sas(t)},Gas(t){return this.las(t)}},self._s.gut.Hos.yht={_as(t,s,i){this.Kos(t,i,1===s)},Cas(t){this.Qos(t)},Ias(){this.tas()},Pas(t,s){this.aas(t,0===s)},Aas(t){this.uas(0===t)}},self._s.gut.Hos.wht={q7t(t){return this.ias(t)},Eas(t){return this.eas(t)},Ras(t){return this.nas(t)},W7t(t){return this.ras(t)}};{const vG=self._s;vG.gut.Fas=class extends vG.YPt{constructor(t){super(t)}zn(){super.zn()}}}{const bG=self._s;bG.gut.Fas.fRt=class extends bG.sAt{constructor(t){super(t)}zn(){super.zn()}SIt(){}}}{const MG=self._s,xG=self.Ls,TG=self.h$;MG.gut.Fas.Instance=class extends MG.eAt{constructor(t,s){super(t),this.Oas=0,this.Das=0,this.kas=0,this.Las=0,this.Nas=0,this.nPt()}zn(){super.zn()}Bas(t,s,i){this.Oas=t,this.Das=s,this.kas=1,this.Las=s,this.Nas=i,this.fi.DB().yH(!1),this.Nc.VB()}Was(){this.Nas=0,this.fi.DB().yH(!0),this.Nc.VB()}jas(){return this.Nas>0}ux(){return{on:this.Oas,off:this.Das,s:this.kas,stl:this.Las,tl:this.Nas}}mx(t){this.Oas=t.on,this.Das=t.off,this.kas=t.s,this.Las=t.stl,this.Nas=null===t.tl?1/0:t.tl}u7(){if(this.Nas<=0)return;const t=this.Nc.AN(this.fi);if(this.Nas-=t,this.Nas<=0)return this.Nas=0,this.fi.DB().yH(!0),this.Nc.VB(),this.LIt("flashend"),this.zIt(MG.gut.Fas.QB.Vas);this.Las-=t,this.Las<=0&&(0===this.kas?(this.fi.DB().yH(!1),this.kas=1,this.Las+=this.Das):(this.fi.DB().yH(!0),this.kas=0,this.Las+=this.Oas),this.Nc.VB())}aPt(){const t="behaviors.flash.debugger";return[{title:"$"+this.c$().Pc(),properties:[{name:t+".on-time",value:this.Oas,YZt:t=>this.Oas=t},{name:t+".off-time",value:this.Das,YZt:t=>this.Das=t},{name:t+".is-flashing",value:this.Nas>0},{name:t+".time-left",value:this.Nas}]}]}vIt(){return self.Has}};const GG=new WeakMap;self.Has=class extends TG{constructor(){super(),GG.set(this,TG.pU().s$())}Uas(t,s,i){xG.re(t),xG.re(s),xG.re(i),GG.get(this).Bas(t,s,i)}stop(){GG.get(this).Was()}get zas(){return GG.get(this).jas()}}}self._s.gut.Fas.QB={Jas(){return this.jas()},Vas:()=>!0},self._s.gut.Fas.yht={Fas(t,s,i){this.Bas(t,s,i)},$as(){this.Was()}},self._s.gut.Fas.wht={};{const _G=self._s;_G.gut.qas=class extends _G.YPt{constructor(t){super(t),this.Xas=0,this.Yas=0,this.Kas=0,this.Zas=0}zn(){super.zn()}Qas(t){this.Xas=t}tls(){return this.Xas}sls(t){this.Yas=t}ils(){return this.Yas}els(t){this.Kas=t}nls(){return this.Kas}rls(t){this.Zas=t}hls(){return this.Zas}}}{const CG=self._s;CG.gut.qas.fRt=class extends CG.sAt{constructor(t){super(t)}zn(){super.zn()}SIt(){}}}{const IG=self._s,PG=0;IG.gut.qas.Instance=class extends IG.eAt{constructor(t,s){super(t),this.Rbt=!0,s&&(this.Rbt=s[PG]),this.Rbt&&this.hPt()}zn(){super.zn()}ux(){const t=this.a$();return{e:this.Rbt,smg:t.tls(),ss:t.ils(),se:t.nls(),smd:t.hls()}}mx(t){const s=this.a$();s.Qas(t.smg),s.sls(t.ss),s.els(t.se),s.rls(t.smd),this.Rbt=t.e,this.Rbt?this.hPt():this.HIt()}P_t(t){this.Rbt=!!t,this.Rbt?this.hPt():this.HIt()}_u(){return this.Rbt}ePt(){if(!this._u())return;this.Nc.AN(this.fi);const t=this.a$(),s=t.iV();let i=0,e=0,n=0;for(const t of s){const s=t.yOt(IG.gut.qas);if(!s||!s.s$()._u())continue;const r=t.DB();i+=r.qM(),e+=r.KM(),++n}const r=this.fi.DB().pB(),h=this.Nc.ON();let o=0,a=0;if(h>=t.ils()&&h<t.nls()){let s=t.tls()*Math.min(this.Nc.WN(),1);0===t.hls()&&(s*=1-(h-t.ils())/(t.nls()-t.ils()));const i=this.Nc.lB()*Math.PI*2,e=this.Nc.lB()*s;o=Math.cos(i)*e,a=Math.sin(i)*e}r.OV(i/n+o),r.kV(e/n+a)}tot(t){if(t===PG)return this.Rbt}hot(t,s){t===PG&&(this.Rbt=!!s,this.Rbt?this.hPt():this.HIt())}aPt(){return[{title:"$"+this.c$().Pc(),properties:[{name:"behaviors.scrollto.properties.enabled.name",value:this._u(),YZt:t=>this.P_t(t)}]}]}}}self._s.gut.qas.QB={_u(){return this._u()}},self._s.gut.qas.yht={ols(t,s,i){const e=this.a$();e.Qas(t),e.sls(this.Nc.ON()),e.els(this.Nc.ON()+s),e.rls(i)},CCt(t){this.P_t(0!==t)}},self._s.gut.qas.wht={};{const AG=self._s;AG.gut.bAt=class extends AG.YPt{constructor(t){super(t)}zn(){super.zn()}}}{const EG=self._s;EG.gut.bAt.fRt=class extends EG.sAt{constructor(t){super(t)}zn(){super.zn()}SIt(){}}}{const RG=self._s,FG=self.Ls,OG=self.h$,DG=0,kG=1,LG=new Set;RG.gut.bAt.Instance=class extends RG.eAt{constructor(t,s){super(t),this.CCt(!0),s&&(this.CCt(s[DG]),this.nst(s[kG]))}zn(){super.zn()}CCt(t){this.fi.qFt(!!t)}_u(){return this.fi.$Ft()}nst(t){const s=this.fi.oTt();if(!t.trim())return void s.delete("solidTags");let i=s.get("solidTags");i||(i=new Set,s.set("solidTags",i)),i.clear();for(const s of t.split(" "))s&&i.add(s.toLowerCase())}gq(){return this.fi.oTt().get("solidTags")||LG}als(){return[...this.gq()].join(" ")}ux(){return{e:this._u()}}mx(t){this.CCt(t.e)}tot(t){if(t===DG)return this._u()}hot(t,s){t===DG&&this.CCt(s)}aPt(){return[{title:"$"+this.c$().Pc(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this._u(),YZt:t=>this.CCt(t)},{name:"behaviors.solid.properties.tags.name",value:this.als(),YZt:t=>this.nst(t)}]}]}vIt(){return self.lls}};const NG=new WeakMap;self.lls=class extends OG{constructor(){super(),NG.set(this,OG.pU().s$())}set isEnabled(t){NG.get(this).CCt(!!t)}get isEnabled(){return NG.get(this)._u()}set tags(t){FG.le(t),NG.get(this).nst(t)}get tags(){return NG.get(this).als()}}}self._s.gut.bAt.QB={_u(){return this._u()}},self._s.gut.bAt.yht={CCt(t){this.CCt(t)},nst(t){this.nst(t)}},self._s.gut.bAt.wht={};{const BG=self._s;BG.gut.mut=class extends BG.YPt{constructor(t){super(t)}zn(){super.zn()}}}{const WG=self._s;WG.gut.mut.fRt=class extends WG.sAt{constructor(t){super(t)}zn(){super.zn()}SIt(){}}}{const jG=self._s,VG=jG.gut.mut,HG=0;VG.Instance=class extends jG.eAt{constructor(t,s){super(t),this.uls=!1,this.fu=!0,s&&(this.uls=!1,this.fu=!!s[HG]),this.cls=new Map,this.fls=[],this.dls=new Map,this.pls=null,this.mls=null,this.gls=null,this.yls=null,this.wls="",this.Sls=[],this.c8=t=>this.f8(),this.aW().wf().addEventListener("afterload",this.c8)}zn(){this.aW().wf().removeEventListener("afterload",this.c8),this.c8=null,this.pls&&(this.vls(this.pls),this.pls=null),this.bls(),this.Mls=null,this.xls(),this.fls=null,this.Tls(),this.dls=null,this.Sls=null,super.zn()}vut(t){this.Sls.push(t)}but(){this.Sls.pop()}Gls(){return this.Sls[this.Sls.length-1]}CCt(t){this.fu=!!t,t?this.dls&&this.dls.size&&this.hPt():this.HIt();for(const s of this._ls())t?this.Cls(s)&&s.nq():((s.IsPlaying()||s.Mst())&&this.Ils(s),s.eq());t&&this.xls()}_u(){return this.fu}Ils(t){this.fls.push(t)}Cls(t){return this.fls.includes(t)}xls(){jG.Sh(this.fls)}Pls(){return this.pls}Hit(){const t=this.d$();return!!t&&!t.wX()}Als(t,s,i=!1){const e=s?this.Els(s,i):this._ls(i);if(e&&e.length)for(const s of e)if(s.rq(t))return s}Rls(t,s){for(const i of this.cls.values())for(const e of i)if(!e.sq()&&e.rq(t)&&s(e))return!0;for(const i of this.dls.values())for(const e of i)if(!e.sq()&&e.rq(t)&&s(e))return!0;return!1}Fls(t){for(const s of this.cls.values())for(const i of s)if(!i.sq()&&t(i))return!0;for(const s of this.dls.values())for(const i of s)if(!i.sq()&&t(i))return!0;return!1}Ols(t,s){return this.Als(t,s,!0)}*Dls(t,s,i=!1){const e=s?this.Els(s,i):this._ls(i);if(e&&e.length)for(const s of e)s.rq(t)&&(yield s)}*kls(t,s){yield*this.Dls(t,s,!0)}Els(t,s){if(s){let s=this.cls.get(t),i=this.dls.get(t);return s||(s=[]),i||(i=[]),s.concat(i).filter(t=>t).filter(t=>!t.sq())}{let s=this.cls.get(t);return s||(s=[]),s.filter(t=>t).filter(t=>!t.sq())}}_ls(t){if(t){const t=[...this.cls.values()].flat(),s=[...this.dls.values()].flat();return t.concat(s).filter(t=>t).filter(t=>!t.sq())}return[...this.cls.values()].flat().filter(t=>t).filter(t=>!t.sq())}Lls(){return this._ls(!0)}ux(t="full"){return{s:!1,e:!!this.fu,at:this.Nls(),dt:this.Bls(),wt:this.Wls(),ft:this.jls()}}mx(t,s="full"){t&&(this.mls=t.at,this.gls=t.dt,this.yls=t.wt,this.wls=t.ft,this.uls=!1,this.fu=!!t.e,"state"===s&&this.f8())}f8(){const t=this.aW().Vtt();if(this.Vls(this.mls,this.cls,t),this.gls){jG.Sh(this.fls);for(const s of this.gls)this.Hls(this.fls,s,t)}this.Vls(this.yls,this.dls,t),this.pls=this.Uls(this.wls,t),this.fu?this.dls&&this.dls.size&&this.hPt():this.HIt()}Vls(t,s,i){if(t)for(const e in t){let n=s.get(e);n?jG.Sh(n):n=[];const r=t[e];for(const t of r)if(this.Hls(n,t.name,i))this.zls(t.name,t,i);else{const s=jG.qot.Tut({runtime:this.aW(),json:t});jG.qot.aet(s,this.d$().TU()),s.sut(t=>this.Jls(t)),s.Qlt(this),i.U8(s),this.Hls(n,s,i)}s.set(e,n)}}Uls(t,s){return s.j8(t)}Hls(t,s,i){if("string"!=typeof s)return!!t.push(s);{const e=this.Uls(s,i);if(e)return!!t.push(e)}return!1}zls(t,s,i){if("string"==typeof t){const e=this.Uls(t,i);e&&(e.e5(s),jG.qot.aet(e,this.d$().TU()),jG.qot.Qlt(e,this))}else t.e5(s),jG.qot.aet(t,this.d$().TU()),jG.qot.Qlt(t,this)}Nls(){const t={};for(const[s,i]of this.cls)t[s]=i.filter(t=>!t.sq()).map(t=>t.i5());return t}Bls(){return this.fls.filter(t=>!t.sq()).map(t=>t.Pc())}Wls(){const t={};for(const[s,i]of this.dls)t[s]=i.map(t=>t.i5());return t}jls(){return this.pls?this.pls.Pc():""}ePt(){this.Tls()}$ls(t){const s=VG.Xls.qls(t.ret,t.Fut,t.Out,t.Rut,t.Put,this.d$()),i=VG.Kls.Yls(t.ret);VG.Kls.Zls(i)||this.Qls(t.ret);const e=jG.qot.Tut({runtime:this.aW(),id:i,tags:t.tags,time:t.time,f$:this.d$(),Cut:!!t.Cut,loop:!!t.loop,Iut:!!t.Iut,_$:t._$,_ut:t._ut,Gut:s});return e.sut(t=>this.Jls(t)),e.Qlt(this),this.tus(e,t.ret),e}sus(t){const s=t.Rq();if(this.cls.has(s)){const i=this.cls.get(s);if(i){const s=i.indexOf(t);-1!==s&&i.splice(s,1)}}}Gq(t,s=!1){this.sus(t),t.sq()||this.ius(t)||(t.eq(s),this.eus(t))}Qls(t,s=!1){if(jG.Qi(t)){const i=VG.Kls.Yls(t);if(!this.cls.has(i))return;const e=this.cls.get(i),n=this.Pls();for(const t of e)t!==n&&(t.sq()||this.ius(t)||(t.eq(s),t.zn()));jG.Sh(e)}else{const t=this.Pls();for(const i of this._ls())i!==t&&(i.sq()||this.ius(i)||(i.eq(s),i.zn()));for(const t of this.cls.keys())jG.Sh(this.cls.get(t)),this.cls.delete(t);this.cls.clear()}}vls(t){this.Gq(t,!0)}bls(){this.Qls(NaN,!0)}tot(t){if(t===HG)return this.fu}hot(t,s){t===HG&&(this.fu=!!s)}nus(t){const s=t.Iq().Rrt();for(const t of s){const s=t.c$();if(s.FRt()===this.constructor)return s}}$U(t,s,i,e){return this.Nc?super.$U(t):s.$U(t,i,e)}Jls(t){let s,i;if(this.pls=t,VG.QB.rus(t),this.aW())s=this.fi,i=this.Nc,this.$U(VG.QB.hus),this.$U(VG.QB.ous),this.Gq(t);else{if(s=t.Iq(),!s)return;if(s&&s.wX())return;i=s.aW();const e=this.nus(t);this.$U(VG.QB.hus,i,s,e),this.$U(VG.QB.ous,i,s,e),t.eq()}this.pls=null,VG.QB.rus(null),t.Aq()&&i.yU(s)}tus(t,s){const i=VG.Kls.Yls(s);this.cls.has(i)||this.cls.set(i,[]),this.cls.get(i).push(t)}eus(t){const s=t.Rq();this.dls.has(s)||this.dls.set(s,[]),this.dls.get(s).push(t),this.oPt()||this.hPt()}ius(t){const s=t.Rq();return!!this.dls.has(s)&&this.dls.get(s).includes(t)}Tls(){if(this.dls.size){for(const t of this.dls.values()){for(const s of t)s.sq()||s.zn();jG.Sh(t)}this.dls.clear(),this.oPt()&&this.HIt()}}aPt(){return[{title:"$"+this.c$().Pc(),properties:[{name:"behaviors.tween.properties.enabled.name",value:this._u(),YZt:t=>this.CCt(t)}]}]}vIt(){return self.aus}}}{const UG=self._s;let zG=null;UG.gut.mut.QB={dut:()=>!0,yut(t){const s=this.Gls();return!!s&&s.rq(t)},wut(t){const s=this.Gls();return!!s&&(s.ist()===t||2===t)},Sut(t,s){const i=this.Gls();return!!i&&(i.ist()===s||2===s)&&i.rq(t)},rus(t){zG=t},hus:t=>zG.rq(t),ous:()=>!0,IsPlaying(t){return this.Rls(t,UG.qot.IsPlaying)},Q8t(){return this.Fls(UG.qot.IsPlaying)},vq(t){return this.Rls(t,UG.qot.vq)},lus(){return this.Fls(UG.qot.vq)},E$(t,s){return 0===s?this.Rls(t,UG.qot.Mut):1===s&&this.Rls(t,UG.qot.xut)},uus(t){return 0===t?this.Fls(UG.qot.Mut):1===t&&this.Fls(UG.qot.xut)}}}{const JG=self._s,$G=self.Vu,qG=JG.gut.mut;qG.yht={CCt(t){this.CCt(!!t)},async cus(...t){if(!this._u()||!this.Hit())return;const s=this.$ls(qG.dus.fus(this,...t));s.Play()&&await s.yq()},async pus(...t){if(!this._u()||!this.Hit())return;const s=this.$ls(qG.dus.mus(this,...t));s.Play()&&await s.yq()},async gus(...t){if(!this._u()||!this.Hit())return;const s=this.$ls(qG.dus.yus(this,...t));s.Play()&&await s.yq()},wus(t){if(this._u()&&this.Hit())for(const s of this.Dls(t))s.eq()},Sus(){if(this._u()&&this.Hit())for(const t of this._ls())t.eq()},vus(t){if(this._u()&&this.Hit())for(const s of this.Dls(t))s.nq()},bus(){if(this._u()&&this.Hit())for(const t of this._ls())t.nq()},Mus(t){if(this._u()&&this.Hit())for(const s of this.Dls(t))this.Gq(s)},xus(){if(this._u()&&this.Hit())for(const t of this._ls())this.Gq(t)},Tus(t,s,i){if(!this._u()||!this.Hit())return;const e=JG.gut.mut.Kls.Gus(s);for(const s of this.Dls(t))s.hut([e]),s.out(i,e)},_us(t,s,i,e){if(!this._u()||!this.Hit())return;const n=JG.gut.mut.Kls.Cus(s);for(const s of this.Dls(t))s.hut(n),s.out(i,n[0]),s.out(e,n[1])},Ius(t,s){if(this._u()&&this.Hit())for(const i of this.Dls(t,"value"))i.nut(s,"value")},Pus(t,s){if(this._u()&&this.Hit())for(const i of this.Dls(t,"value"))i.hut(["value"]),i.out(s,"value")},Aus(t,s){if(!this._u()||!this.Hit())return;const i=$G.oc(s);for(const s of this.Dls(t))s.Cq(i)},Eus(t){if(!this._u()||!this.Hit())return;const s=$G.oc(t);for(const t of this._ls())t.Cq(s)},Rus(t,s){if(this._u()&&this.Hit())for(const i of this.Dls(t))i.hq(s)},Fus(t){if(this._u()&&this.Hit())for(const s of this._ls())s.hq(t)},Ous(t,s){if(this._u()&&this.Hit())for(const i of this.Dls(t))i.pq(s)},Dus(t){if(this._u()&&this.Hit())for(const s of this._ls())s.pq(t)},kus(t,s){if(this._u()&&this.Hit())for(const i of this.Dls(t))i.Eq(!!s)},Lus(t){if(this._u()&&this.Hit())for(const s of this._ls())s.Eq(!!t)}}}self._s.gut.mut.wht={Nus(t){const s=this.Ols(t);return s?s.qO():0},jns(t){const s=this.Ols(t);return s?s.qO()/s.aq():0},_ht(t){const s=this.Ols(t);return s?s.mq():0},Bus(t){const s=this.Ols(t,"value");return s?s.Oq("value").Fq():0},k_t(){let t=this.Pls();return t?t.hst():(t=this.Gls(),t?t.hst():"")}};{const XG=self._s,YG=self.Vu,KG=["position","size","scale"],ZG=["offsetX","offsetY","offsetWidth","offsetHeight","offsetAngle","offsetOpacity","offsetColor","offsetZElevation","offsetScaleX","offsetScaleY"],QG=["value"],t_=[].concat(KG).concat(ZG).concat(QG),s_={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},i_=Object.assign({},t_.reduce((t,s)=>Object.assign({},t,{[s]:[s]}),{}),s_);XG.gut.mut.Kls=class{constructor(){}static Wus(){return[...YG.Yu()]}static oc(t){return[...YG.Yu()][t]}static Yls(t){return t_[t]}static jus(t){return t_.indexOf(t)}static Vus(t){return KG[t]}static Gus(t){return ZG[t]}static Hus(t){return QG[t]}static Uus(t){return s_[t]}static Cus(t){return XG.ae(t)?i_[t]:i_[t_[t]]}static zus(t){return!!s_[t]}static Jus(t){return"offsetColor"===t}static $us(t){return"offsetAngle"===t}static qus(t){return"offsetOpacity"===t}static Zls(t){return"value"===t}}}{const e_=self._s,n_=e_.gut.mut,r_=new Map;n_.Xls=class{constructor(){}static qls(t,s,i,e,n,r){0===r_.size&&this.Xus();const h=n_.Kus.Yus(t);let o=r_.get(h);return e_.Qi(t)&&(t=n_.Kls.Yls(t)),this.Zus(o,t,s,i,e,n,r)}static Qus(t,s){return e_.gut.mut.qls(t).tcs(s)}static Xus(){const t=n_.Kus,s=n_.scs;this.ics(t.ecs,this.ncs,s.rcs),this.ics(t.COLOR,this.hcs,s.ocs),this.ics(t.acs,this.lcs,s.ucs),this.ics(t.ccs,this.fcs,s.rcs),this.ics(t.dcs,this.pcs,s.rcs)}static ics(t,s,i){r_.set(t,this.mcs(t,s,i))}static mcs(t,s,i){return{name:t,gcs:s,tcs:i}}static Zus(t,s,i,e,n,r,h){return t.gcs(s,t.tcs(i),t.tcs(e),n,r,h)}static ncs(t,s,i,e,n,r){return n_.Kls.Uus(t).map((t,r)=>({Aut:"world-instance",ret:t,type:"float",valueType:"numeric",Fut:s[r],Out:i[r],Rut:n_.Kls.oc(e),Put:n}))}static hcs(t,s,i,e,n,r){return e_.sW.Text&&r.zj()instanceof e_.sW.Text?{Aut:"plugin",Eut:[7],ret:"color",type:"color",valueType:"color",Fut:s,Out:i,Rut:n_.Kls.oc(e),Put:n}:{Aut:"world-instance",ret:t,type:"color",valueType:"color",Fut:s,Out:i,Rut:n_.Kls.oc(e),Put:n}}static lcs(t,s,i,e,n,r){return{Aut:"world-instance",ret:t,type:"angle",valueType:"angle",Fut:s,Out:i,Rut:n_.Kls.oc(e),Put:n}}static pcs(t,s,i,e,n,r){return{Aut:"world-instance",ret:t,type:"float",valueType:"numeric",Fut:s,Out:i,Rut:n_.Kls.oc(e),Put:n}}static fcs(t,s,i,e,n,r){return{Aut:"value",ret:t,type:"float",valueType:"numeric",Fut:s,Out:i,Rut:n_.Kls.oc(e),Put:n}}}}{const h_=self._s,o_=h_.gut.mut,a_={Put:"absolute"},l_=Object.assign({},a_,{tags:"",ret:"",time:0,Rut:0,Cut:0,loop:!1,Iut:!1,_$:1}),u_=Object.assign({},l_,{_ut:"current-state",Fut:0,Out:0}),c_=Object.assign({},l_,{_ut:"current-state",Fut:[0,0],Out:[0,0]}),f_=Object.assign({},l_,{_ut:"current-state",Fut:[0,0,0],Out:[0,0,0]}),d_=Object.assign({},u_,{_ut:"start-value"});o_.dus=class{constructor(){}static ycs(t,s,i,e,n,r,h,o){t.tags=s,t.time=i,t.Rut=e,t.Cut=n,t.loop=r,t.Iut=h,t._$=o}static fus(t,s,i,e,n,r,h,o,a,l){const u="string"==typeof i?i:o_.Kls.Gus(i),c=o_.Kls.Jus(u)?f_:u_;return this.ycs(c,s,n,r,h,o,a,l),o_.Kls.Jus(u)?(f_.Out[0]=h_.Pr(e),f_.Out[1]=h_.Ar(e),f_.Out[2]=h_.Er(e),f_.ret=o_.Kls.jus(u)):o_.Kls.qus(u)?u_.Out=e/100:u_.Out=e,c.ret=o_.Kls.jus(u),c}static mus(t,s,i,e,n,r,h,o,a,l,u){this.ycs(c_,s,r,h,o,a,l,u);const c="string"==typeof i?i:o_.Kls.Vus(i);return c_.Out[0]=e,c_.Out[1]=n,c_.ret=o_.Kls.jus(c),c_}static yus(t,s,i,e,n,r,h,o,a,l){return this.ycs(d_,s,n,r,h,o,a,l),d_.Fut=i,d_.Out=e,d_.ret=o_.Kls.jus("value"),d_}}}{const p_=self._s,m_=p_.gut.mut,g_=[];m_.Kus=class{constructor(){}static Yus(t){if(0===g_.length){const t=g_;t.push({JE:m_.Kls.zus,result:this.ecs}),t.push({JE:m_.Kls.Jus,result:this.COLOR}),t.push({JE:m_.Kls.$us,result:this.acs}),t.push({JE:m_.Kls.Zls,result:this.ccs}),t.push({JE:()=>!0,result:this.dcs})}p_.Qi(t)&&(t=p_.gut.mut.Kls.Yls(t));for(const s of g_)if(s.JE(t))return s.result}static get ecs(){return"pair"}static get COLOR(){return"color"}static get acs(){return"angle"}static get ccs(){return"value"}static get dcs(){return"other"}}}{const y_=self._s;y_.gut.mut.scs=class{constructor(){}static ucs(t){const s=y_.Zn(parseFloat(t));return y_.Kn(s)}static ocs(t){return t.slice(0)}static rcs(t){return t}}}{let w_=function(t){b_.le(t);const s=x_.zu(t);let i;if(i=s?x_.ac(s,null):x_.ac(t,null),-1===i)throw new Error(`invalid ease name '${t}'`);return i},S_=function(t,s=!1){if(!(s&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")};0;const v_=self._s,b_=self.Ls,M_=self.h$,x_=self.Vu,T_=v_.gut.mut,G_=new WeakMap,__=new Map([["x",{name:"offsetX",type:"one"}],["y",{name:"offsetY",type:"one"}],["width",{name:"offsetWidth",type:"one"}],["height",{name:"offsetHeight",type:"one"}],["angle",{name:"offsetAngle",type:"one"}],["opacity",{name:"offsetOpacity",type:"one"}],["color",{name:"offsetColor",type:"color"}],["z-elevation",{name:"offsetZElevation",type:"one"}],["x-scale",{name:"offsetScaleX",type:"one"}],["y-scale",{name:"offsetScaleY",type:"one"}],["position",{name:"position",type:"two"}],["size",{name:"size",type:"two"}],["scale",{name:"scale",type:"two"}],["value",{name:"value",type:"value"}]]),C_={tags:"",wcs:!1,loop:!1,Iut:!1,_$:1,Fut:0},I_={Tq:w_};self.aus=class extends M_{constructor(){super(),G_.set(this,M_.pU().s$())}Scs(t,s,i,e,n){const r=G_.get(this);if(!r._u()||!r.Hit())return null;const h=__.get(t);if(!h)throw new Error("invalid tween property");"one"===h.type||"value"===h.type?b_.te(s):(b_.Te(s),"two"===h.type?(b_.te(s[0]),b_.te(s[1])):"color"===h.type&&(b_.te(s[0]),b_.te(s[1]),b_.te(s[2]))),"angle"===t?s=v_.Qn(s):"opacity"===t?s*=100:"color"===t&&(s=v_.Ir(s[0],s[1],s[2]));const o=w_(e);let a;if(b_.re(i),n=Object.assign({},C_,n),"value"===h.type&&b_.te(n.Fut),S_(n.tags,!0),"one"===h.type||"color"===h.type?a=r.$ls(T_.dus.fus(r,n.tags,h.name,s,i,o,!!n.wcs,!!n.loop,!!n.Iut,n._$)):"two"===h.type?a=r.$ls(T_.dus.mus(r,n.tags,h.name,s[0],s[1],i,o,!!n.wcs,!!n.loop,!!n.Iut,n._$)):"value"===h.type&&(a=r.$ls(T_.dus.yus(r,n.tags,n.Fut,s,i,o,!!n.wcs,!!n.loop,!!n.Iut,n._$))),a.Qlt(r.rAt().s$()),!a.Play())throw new Error("failed to start tween");return a.Dut(r,I_)}*vcs(){const t=G_.get(this);for(const s of t._ls())yield s.Dut(t,I_)}*bcs(t){S_(t);const s=G_.get(this);for(const i of s.Dls(t))yield i.Dut(s,I_)}get isEnabled(){return G_.get(this)._u()}set isEnabled(t){G_.get(this).CCt(t)}}}{const P_=self._s;P_.gut.Mcs=class extends P_.YPt{constructor(t){super(t)}zn(){super.zn()}}}{const A_=self._s;A_.gut.Mcs.fRt=class extends A_.sAt{constructor(t){super(t)}zn(){super.zn()}SIt(){}}}{const E_=self._s,R_=0,F_=1,O_=2;E_.gut.Mcs.Instance=class extends E_.eAt{constructor(t,s){super(t),this.urs=0,this.crs=0,this.xcs=0,this.Tcs=0,this.Gcs=5,this.Rbt=!0,s&&(this.Tcs=s[R_],this.Gcs=s[F_],this.Rbt=s[O_]),this.Rbt&&this.nPt()}zn(){super.zn()}ux(){return{dx:this.urs,dy:this.crs,cs:this.xcs,sm:this.Tcs,px:this.Gcs,e:this.Rbt}}mx(t){this.urs=t.dx,this.crs=t.dy,this.xcs=t.cs,this.Tcs=t.sm,this.Gcs=t.px,this.P_t(t.e)}x$(){return Math.hypot(this.urs,this.crs)}FV(){return Math.atan2(this.crs,this.urs)}_cs(t,s,i){if(0===t&&0===s)return;const e=this.DB(),n=e.qM(),r=e.KM();let h=Math.round(E_.tr(t,s)/this.Gcs);0===h&&(h=1);for(let o=1;o<=h;++o){let a=o/h;if(e.xz(n+t*a,r+s*a),e.Mz(),this.$U(i),1===this.xcs)return o--,a=o/h,e.xz(n+t*a,r+s*a),void e.Mz();if(2===this.xcs)return}}u7(){if(!this.Rbt||0===this.urs&&0===this.crs)return;const t=this.fi.DB(),s=this.Nc.AN(this.fi),i=this.urs*s,e=this.crs*s;this.xcs=0,0===this.Tcs?(t.Gz(i,e),t.Mz()):1===this.Tcs?this._cs(i,e,E_.gut.Mcs.QB.Ccs):2===this.Tcs?(this._cs(i,0,E_.gut.Mcs.QB.Ics),this.xcs=0,this._cs(0,e,E_.gut.Mcs.QB.Pcs)):3===this.Tcs&&(this._cs(0,e,E_.gut.Mcs.QB.Pcs),this.xcs=0,this._cs(i,0,E_.gut.Mcs.QB.Ics))}tot(t){switch(t){case R_:return this.Tcs;case F_:return this.Gcs;case O_:return this.Rbt}}hot(t,s){switch(t){case R_:this.Tcs=s;break;case F_:this.Gcs=s;break;case O_:this.P_t(s)}}P_t(t){this.Rbt=!!t,this.Rbt?this.nPt():this.VIt()}aPt(){const t="behaviors.custom";return[{title:"$"+this.c$().Pc(),properties:[{name:t+".debugger.vector-x",value:this.urs,YZt:t=>this.urs=t},{name:t+".debugger.vector-y",value:this.crs,YZt:t=>this.crs=t},{name:t+".properties.pixels-per-step.name",value:this.Gcs,YZt:t=>this.Gcs=t},{name:t+".properties.enabled.name",value:this.Rbt,YZt:t=>this.P_t(t)}]}]}}}{const D_=self._s;D_.gut.Mcs.QB={hos(){return 0!==this.urs||0!==this.crs},oos(t,s,i){let e=0;switch(t){case 0:e=this.x$();break;case 1:e=this.urs;break;case 2:e=this.crs}return D_.compare(e,s,i)},Ccs:()=>!0,Ics:()=>!0,Pcs:()=>!0,_u(){return this.Rbt}}}{const k_=self._s;k_.gut.Mcs.yht={eq(){this.urs=0,this.crs=0},Ves(t){switch(t){case 0:this.urs*=-1,this.crs*=-1;break;case 1:this.urs*=-1;break;case 2:this.crs*=-1}},Acs(t,s){let i=0;switch(t){case 0:i=this.FV(),this.urs=Math.cos(i)*s,this.crs=Math.sin(i)*s;break;case 1:this.urs=s;break;case 2:this.crs=s}},Ecs(t,s){const i=s*this.Nc.AN(this.fi);let e;switch(t){case 0:e=this.FV(),this.urs+=Math.cos(e)*i,this.crs+=Math.sin(e)*i;break;case 1:this.urs+=i;break;case 2:this.crs+=i}},Rcs(t,s){s=k_.Zn(s);const i=t*this.Nc.AN(this.fi);this.urs+=Math.cos(s)*i,this.crs+=Math.sin(s)*i},Fcs(t,s,i){const e=this.DB(),n=t*this.Nc.AN(this.fi),r=Math.atan2(i-e.KM(),s-e.qM());this.urs+=Math.cos(r)*n,this.crs+=Math.sin(r)*n},Ocs(t){t=k_.Zn(t);const s=this.x$();this.urs=Math.cos(t)*s,this.crs=Math.sin(t)*s},Dcs(t){t=this.FV()+k_.Zn(t);const s=this.x$();this.urs=Math.cos(t)*s,this.crs=Math.sin(t)*s},kcs(t){t=this.FV()-k_.Zn(t);const s=this.x$();this.urs=Math.cos(t)*s,this.crs=Math.sin(t)*s},Lcs(t){this.xcs=t+1},DNt(t){let s,i,e;const n=this.fi,r=this.aW().AL();switch(t){case 0:s=this.FV(),i=Math.cos(s),e=Math.sin(s),r.DNt(n,-i,-e,Math.max(3*this.x$(),100));break;case 1:r.NNt(n);break;case 2:r.DNt(n,0,-1,Math.max(3*Math.abs(this.crs),100));break;case 3:r.DNt(n,0,1,Math.max(3*Math.abs(this.crs),100));break;case 4:r.DNt(n,-1,0,Math.max(3*Math.abs(this.urs),100));break;case 5:r.DNt(n,1,0,Math.max(3*Math.abs(this.urs),100))}},Ncs(t){t=k_.Zn(t);const s=Math.cos(t),i=Math.sin(t);this.aW().AL().DNt(this.fi,s,i,Math.max(3*this.x$(),100))},CCt(t){this.P_t(t)}}}{const L_=self._s;L_.gut.Mcs.wht={Eos(){return this.x$()},Bos(){return L_.Qn(this.FV())},dx(){return this.urs},dy(){return this.crs}}}{const N_=self._s;N_.gut.Bcs=class extends N_.YPt{constructor(t){super(t)}zn(){super.zn()}}}{const B_=self._s;B_.gut.Bcs.fRt=class extends B_.sAt{constructor(t){super(t)}zn(){super.zn()}SIt(){}}}{const W_=self._s,j_=self.Ls,V_=self.h$,H_=0,U_=1,z_=2,J_=3,$_=4;W_.gut.Bcs.Instance=class extends W_.eAt{constructor(t,s){super(t),this.Wcs=0,this.jcs=0,this.Vcs=0,this.Hcs=!0,this.Ucs=!0,this.zcs=!1,this.kas=0,this.Jcs=W_.Un(W_.Qf),this.$cs=this.fi.DB().wF()||1,s&&(this.Wcs=s[H_],this.jcs=s[U_],this.Vcs=s[z_],this.Hcs=!!s[J_],this.Ucs=!!s[$_],this.kas=this.Ucs?0:3),this.Ucs&&(0===this.Wcs?(this.kas=1,0===this.jcs&&(this.kas=2)):(this.fi.DB().vF(0),this.Nc.VB())),this.nPt()}zn(){super.zn()}ux(){return{fit:this.Wcs,wt:this.jcs,fot:this.Vcs,d:this.Hcs,s:this.kas,st:this.Jcs.zs(),mo:this.$cs}}mx(t){this.Wcs=t.fit,this.jcs=t.wt,this.Vcs=t.fot,this.Hcs=t.d,this.kas=t.s,this.Jcs.Set(t.st),this.$cs=t.mo,3===this.kas?this.VIt():this.nPt()}u7(){const t=this.Nc.AN(this.fi);this.Jcs.Bu(t);const s=this.fi.DB();0===this.kas&&(s.vF(this.Jcs.zs()/this.Wcs*this.$cs),this.Nc.VB(),s.wF()>=this.$cs&&(s.vF(this.$cs),this.kas=1,this.Jcs.Bf(),this.LIt("fadeinend"),this.$U(W_.gut.Bcs.QB.qcs))),1===this.kas&&this.Jcs.zs()>=this.jcs&&(this.kas=2,this.Jcs.Bf(),this.LIt("waitend"),this.$U(W_.gut.Bcs.QB.Xcs)),2===this.kas&&(0!==this.Vcs?(s.vF(this.$cs-this.Jcs.zs()/this.Vcs*this.$cs),this.Nc.VB(),s.wF()<=0&&(this.kas=3,this.Jcs.Bf(),this.LIt("fadeoutend"),this.$U(W_.gut.Bcs.QB.Ycs),this.Hcs&&this.Nc.yU(this.fi))):(this.kas=3,this.Jcs.Bf())),3===this.kas&&this.VIt()}Kcs(){this.Ucs||this.zcs||(this.$cs=this.fi.DB().wF()||1,this.zcs=!0),3===this.kas&&this.QF()}Zcs(){this.QF()}QF(){this.kas=0,this.Jcs.Bf(),0===this.Wcs?(this.kas=1,0===this.jcs&&(this.kas=2)):(this.fi.DB().vF(0),this.Nc.VB()),this.nPt()}Qcs(t){this.Wcs=Math.max(t,0)}tfs(){return this.Wcs}sfs(t){this.jcs=Math.max(t,0)}ifs(){return this.jcs}efs(t){this.Vcs=Math.max(t,0)}nfs(){return this.Vcs}tot(t){switch(t){case H_:return this.tfs();case U_:return this.ifs();case z_:return this.nfs();case J_:return this.Hcs}}hot(t,s){switch(t){case H_:this.Qcs(s);break;case U_:this.sfs(s);break;case z_:this.efs(s);break;case J_:this.Hcs=!!s}}aPt(){const t="behaviors.fade";return[{title:"$"+this.c$().Pc(),properties:[{name:t+".properties.fade-in-time.name",value:this.tfs(),YZt:t=>this.Qcs(t)},{name:t+".properties.wait-time.name",value:this.ifs(),YZt:t=>this.sfs(t)},{name:t+".properties.fade-out-time.name",value:this.nfs(),YZt:t=>this.efs(t)},{name:t+".debugger.stage",value:[t+".debugger."+["fade-in","wait","fade-out","done"][this.kas]]}]}]}vIt(){return self.rfs}};const q_=new WeakMap;self.rfs=class extends V_{constructor(){super(),q_.set(this,V_.pU().s$())}hfs(){q_.get(this).Kcs()}ofs(){q_.get(this).Zcs()}set afs(t){j_.re(t),q_.get(this).Qcs(t)}get afs(){return q_.get(this).tfs()}set lfs(t){j_.re(t),q_.get(this).sfs(t)}get lfs(){return q_.get(this).ifs()}set ufs(t){j_.re(t),q_.get(this).efs(t)}get ufs(){return q_.get(this).nfs()}}}self._s.gut.Bcs.QB={Ycs:()=>!0,qcs:()=>!0,Xcs:()=>!0},self._s.gut.Bcs.yht={cfs(){this.Kcs()},ffs(){this.Zcs()},dfs(t){this.Qcs(t)},pfs(t){this.sfs(t)},mfs(t){this.efs(t)}},self._s.gut.Bcs.wht={gfs(){return this.tfs()},yfs(){return this.ifs()},wfs(){return this.nfs()}};{const X_=self._s;X_.gut.dFt=class extends X_.YPt{constructor(t){super(t)}zn(){super.zn()}}}{const Y_=self._s;Y_.gut.dFt.fRt=class extends Y_.sAt{constructor(t){super(t)}zn(){super.zn()}SIt(){}}}{const K_=self._s;K_.gut.dFt.Instance=class extends K_.eAt{constructor(t,s){super(t)}zn(){super.zn()}}}self._s.gut.dFt.QB={},self._s.gut.dFt.yht={},self._s.gut.dFt.wht={};{let Z_=function(t,s){return"number"==typeof t&&"number"==typeof s},Q_=function(t,s){return Z_(t,s)?t+s:t},tC=function(t,s){return Z_(t,s)?t-s:t},sC=function(t,s){return Z_(t,s)?t*s:t},iC=function(t,s){return Z_(t,s)?t/s:t},eC=function(t,s){return Z_(t,s)?t%s:t},nC=function(t,s){return Z_(t,s)?Math.pow(t,s):t},rC=function(t,s){if("string"==typeof t||"string"==typeof s){let i,e;return i="number"==typeof t?(Math.round(1e10*t)/1e10).toString():t,e="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,i+e}return t&&s?1:0},hC=function(t,s){return Z_(t,s)?t||s?1:0:t};0;const oC=self._s;self.JMt=[()=>0,()=>"back",()=>"easy",()=>1,()=>"controller",()=>"keyboard",()=>"fade",()=>.02,t=>{const s=t.ixt(0).MMt();return()=>s("fade")-2},t=>{const s=t.ixt(0);return()=>s.IMt()},()=>100,t=>{const s=t.ixt(0).MMt();return()=>s("fade")+1},()=>"time",()=>.1,t=>{const s=t.ixt(0).zMt();return()=>rC("0:",s.Cnt())},()=>60,t=>{const s=t.ixt(0).MMt(),i=t.ixt(1).zMt(),e=t.ixt(2).zMt(),n=t.ixt(3).MMt(),r=t.ixt(4).zMt();return()=>rC(rC(s(Math.floor(i.Cnt())/60),":"),e.Cnt()-60*n(Math.floor(r.Cnt())/60))},t=>{const s=t.ixt(0).zMt();return()=>-15-s.Cnt()},()=>"overworldBG",()=>"cameraToTreeBoss",()=>"burden",()=>3,()=>"underground",t=>{const s=t.ixt(0).zMt();return()=>10+s.Cnt()},()=>"normal",t=>{const s=t.ixt(0).zMt();return()=>5+s.Cnt()},()=>"hard",t=>{const s=t.ixt(0).zMt();return()=>3+s.Cnt()},()=>"hardcore",()=>"Player",t=>{const s=t.ixt(0).MMt();return()=>s("fade")+.5},t=>{const s=t.ixt(0).MMt();return()=>1-s("fade")/100},()=>"die",()=>"",()=>"Player Health",()=>"retract",()=>"damage",()=>.05,()=>.75,()=>"Player Animations",()=>"roll",t=>{const s=t.ixt(0);return()=>"crouch_"+s.RMt()},()=>"crouchWalk",t=>{const s=t.ixt(0);return()=>"crouchWalk_"+s.RMt()},()=>"idle",t=>{const s=t.ixt(0);return()=>"idle_"+s.RMt()},()=>"idlePointUp",t=>{const s=t.ixt(0);return()=>"idlePointUp_"+s.RMt()},()=>"runPointUp",t=>{const s=t.ixt(0);return()=>"runPointUp_"+s.RMt()},()=>"run",t=>{const s=t.ixt(0);return()=>"run_"+s.RMt()},()=>"jump",t=>{const s=t.ixt(0);return()=>"jump_"+s.RMt()},()=>"jumpPointUp",t=>{const s=t.ixt(0);return()=>"jumpPointUp_"+s.RMt()},()=>"Keyboard Support",()=>.2,()=>"jumpOnLand",()=>.01,()=>"Controller Support",()=>-50,()=>50,()=>-30,()=>30,()=>"Player Controls",()=>"pause",()=>"press start to unpause\npress b to quit to menu",()=>"press p to unpause\npress backspace to quit to menu",()=>"firerate",()=>140,()=>1500,()=>200,()=>3e3,t=>{const s=t.ixt(0);return()=>-s.WMt()},()=>90,t=>{const s=t.ixt(0).zMt();return()=>s.Cnt()/3*2},t=>{const s=t.ixt(0).zMt();return()=>s.Cnt()},()=>.3,t=>{const s=t.ixt(0);return()=>s.RMt()},()=>"pistol",()=>"objects",()=>"barrel",()=>9999,()=>180,()=>400,()=>225,()=>315,()=>"shotgun",()=>.5,()=>175,()=>185,()=>355,()=>5,()=>220,()=>230,()=>320,()=>310,()=>"rifle",()=>.4,()=>.03,()=>4,()=>"ninja",()=>"gunsmith",()=>"gunsmithShop",()=>"gunsmithShopItems",()=>"cleric",t=>{const s=t.ixt(0).MMt();return()=>s()},()=>"noJump",()=>2,()=>"Enemies",()=>"spider",t=>{const s=t.ixt(0),i=t.ixt(1),e=t.ixt(2),n=t.ixt(3);return()=>oC.ir(s.IMt(),i.IMt(),e.IMt(),n.IMt())},()=>"shooting",()=>"shoot",()=>.07,()=>"acid",t=>{const s=t.ixt(0);return()=>s.IMt()-10},()=>999999,()=>250,()=>.8,()=>"reload",()=>"dead",()=>"Baby Ravens",()=>500,()=>"retreat",t=>{const s=t.ixt(0),i=t.ixt(1).MMt(),e=t.ixt(2),n=t.ixt(3).MMt();return()=>rC(rC(s.IMt()+i(-50,50),","),e.IMt()+n(-30,30))},t=>{const s=t.ixt(0).MMt(),i=t.ixt(1).MMt(),e=t.ixt(2);return()=>s(i(e.RMt(),0,","))},t=>{const s=t.ixt(0).MMt(),i=t.ixt(1).MMt(),e=t.ixt(2);return()=>s(i(e.RMt(),1,","))},()=>150,t=>{const s=t.ixt(0).MMt(),i=t.ixt(1).MMt(),e=t.ixt(2);return()=>s(i(e.RMt(),0,","))+5},t=>{const s=t.ixt(0).MMt(),i=t.ixt(1).MMt(),e=t.ixt(2);return()=>s(i(e.RMt(),0,","))-5},t=>{const s=t.ixt(0).MMt(),i=t.ixt(1).MMt(),e=t.ixt(2);return()=>s(i(e.RMt(),1,","))+5},t=>{const s=t.ixt(0).MMt(),i=t.ixt(1).MMt(),e=t.ixt(2);return()=>s(i(e.RMt(),1,","))-5},()=>"flyAtPlayer",()=>"retreatWhenAway",t=>{const s=t.ixt(0),i=t.ixt(1);return()=>rC(rC(s.IMt(),","),i.IMt())},()=>"Clog",()=>"Clog Bullet Logic",()=>"destroy",()=>40,()=>120,()=>"walk",()=>"attack",()=>"bullet",()=>"ceiling",()=>"Tree Boss",()=>"Tree Boss Activation",()=>"TreeBoss",()=>"activate",()=>"activation",()=>"player",()=>"afterSinkPause",()=>"startAttack",()=>"attacking",()=>1.5,()=>"spawnRoot",()=>"Attack Phase",()=>"rise",()=>"tiles",t=>{const s=t.ixt(0);return()=>s.IMt()+160},()=>.7,t=>{const s=t.ixt(0);return()=>s.IMt()+256},()=>"up",()=>"down",()=>"Rise / Hurt",()=>"hurt",()=>"dig",()=>15,()=>25,()=>-100,t=>{const s=t.ixt(0).zMt();return()=>0-s.Cnt()},()=>5.5,t=>{const s=t.ixt(0).zMt();return()=>-10-s.Cnt()},()=>"Camera",t=>{const s=t.ixt(0),i=t.ixt(1),e=t.ixt(2).MMt();return()=>oC._t(s.IMt(),i.IMt(),5*e())},t=>{const s=t.ixt(0),i=t.ixt(1),e=t.ixt(2).MMt();return()=>oC._t(s.IMt(),i.IMt()-20,6*e())},t=>{const s=t.ixt(0),i=t.ixt(1),e=t.ixt(2).MMt();return()=>oC._t(s.IMt(),i.IMt()-20,4*e())},()=>"raven",()=>"zoomOutSpider",t=>{const s=t.ixt(0),i=t.ixt(1),e=t.ixt(2),n=t.ixt(3),r=t.ixt(4).MMt();return()=>oC._t(s.IMt(),(i.IMt()+e.IMt()+n.IMt())/3,5*r())},t=>{const s=t.ixt(0),i=t.ixt(1),e=t.ixt(2),n=t.ixt(3),r=t.ixt(4).MMt();return()=>oC._t(s.IMt(),(i.IMt()+e.IMt()+n.IMt())/3,4*r())},t=>{const s=t.ixt(0).MMt();return()=>s()-.02},t=>{const s=t.ixt(0).MMt();return()=>s()+.01},t=>{const s=t.ixt(0).MMt();return()=>s()+.02},t=>{const s=t.ixt(0),i=t.ixt(1).zMt(),e=t.ixt(2).zMt();return()=>s.IMt(i.Cnt(),e.Cnt())},()=>"Special Triggers",()=>"cameraToRaven",()=>"cameraToSpider",()=>"startRavenFight",()=>"RavenFight",()=>"spiderBossFight",()=>"spiderFight",()=>"Sound",t=>{const s=t.ixt(0).MMt();return()=>s("shoot1","shoot2","shoot3")},t=>{const s=t.ixt(0).zMt();return()=>-5-s.Cnt()},()=>"UI",()=>"UI Text",()=>"soulCount",()=>"playerHealth",()=>"bossHealth",()=>"Moving Platforms",()=>"left",()=>"right",()=>270,()=>"RavenBoss",()=>"laserAttack",t=>{const s=t.ixt(0);return()=>s.IMt()-2},t=>{const s=t.ixt(0);return()=>s.IMt()+5},()=>"laserTrace",()=>"startLaserAttack",()=>"eggDropAttack",()=>"startEggAttack",()=>"dropEgg",()=>"egg",()=>1.25,()=>"stopDropping",()=>9,()=>1e3,()=>434,()=>607,t=>{const s=t.ixt(0).MMt();return()=>Math.ceil(s(1,9))},()=>.6,()=>"spawnLaser",()=>2e3,()=>"attackAgain",()=>"spawn",()=>"NPCs",()=>"interact",()=>"dialog",()=>"exit",()=>"option1",()=>"sold out",()=>"option2",()=>"equip shotgun",()=>20,()=>"option3",()=>"equip rifle",()=>10,()=>"orangeCleric",()=>"Ninja",()=>"highlighted",()=>"press x to talk",()=>"press e to talk",()=>"SpiderBoss",()=>"hangAndShoot",()=>"shootAcid",t=>{const s=t.ixt(0);return()=>s.IMt()-8},()=>"hangOn",()=>"leftSpamPhase",()=>"corner",()=>"goToLeftCorner",()=>45,()=>"leftCornerSpam",()=>"rightSpamPhase",()=>"rightCornerSpam",()=>"goToRightCorner",()=>135,()=>.06,()=>"rainPhase",()=>"middle",()=>"rainSetup",()=>"fadeOut",t=>{const s=t.ixt(0);return()=>s.IMt()-3},()=>"leadRainDown",t=>{const s=t.ixt(0);return()=>s.IMt()-400},()=>"rainDown",t=>{const s=t.ixt(0);return()=>s.IMt()+400},()=>"rainLeft",()=>"rain",()=>"rainUp",()=>"rainRight",()=>"leadRainLeft",()=>"rainup",()=>"leadRainUp",()=>"leadRainRight",()=>"hangPhase",()=>"hang",()=>"top",t=>{const s=t.ixt(0),i=t.ixt(1).MMt(),e=t.ixt(2),n=t.ixt(3);return()=>s.IMt()+i(-e.IMt()/2,n.IMt()/2)},()=>99999999,()=>"bottom",()=>-562949953422335,t=>{const s=t.ixt(0),i=t.ixt(1).MMt();return()=>s.IMt()+i(-45,45)},()=>160,()=>"Bullet Logic",t=>{const s=t.ixt(0).zMt();return()=>-15+s.Cnt()},()=>"menu",()=>6,()=>"gameSettings",()=>"\nspeedrun",()=>"\nwith all power ups",()=>"ui",()=>"text",()=>"all power ups",()=>.12,()=>"speedrun",()=>.15,()=>"settings",()=>.13,()=>"higher",()=>1e-4,()=>"play",()=>"about",()=>"lower",()=>"start",()=>-15,()=>"credits",t=>{const s=t.ixt(0);return()=>s.IMt()+1},t=>{const s=t.ixt(0).MMt();return()=>s("fade")-1},t=>{const s=t.ixt(0).MMt(),i=t.ixt(1).zMt(),e=t.ixt(2).zMt(),n=t.ixt(3).MMt(),r=t.ixt(4).zMt(),h=t.ixt(5).zMt();return()=>rC(rC(s(Math.floor(i.Cnt())/60),":"),e.Cnt()-60*n(Math.floor(r.Cnt())/60))+"\n"+h.Cnt()},()=>"Player1",()=>"Player Animations1",()=>"Player Combat1",()=>"Player Movement1",()=>"Controls",()=>"Keyboard",()=>"Camera1"]}var Ct=self._s;self.hzt=function(){return[Ct.sW.Nrt,Ct.gut.Ks,Ct.gut.Hos,Ct.gut.Fas,Ct.gut.qas,Ct.sW.zQt,Ct.gut.bAt,Ct.sW.Keyboard,Ct.sW.gamepad,Ct.gut.mut,Ct.gut.Mcs,Ct.sW.o4t,Ct.sW.Audio,Ct.sW.Text,Ct.sW.Yts,Ct.gut.Bcs,Ct.gut.dFt,Ct.sW.dis,Ct.sW.Ses,Ct.sW.ens,Ct.sW.tW.QB.Sqt,Ct.sW.gamepad.QB.O5t,Ct.sW.Keyboard.QB.V3t,Ct.sW.tW.yht.gXt,Ct.sW.tW.yht.Uqt,Ct.sW.tW.yht.$qt,Ct.sW.gamepad.QB.N5t,Ct.sW.Keyboard.QB.j3t,Ct.sW.Nrt.QB.R_t,Ct.sW.tW.QB.Wqt,Ct.sW.tW.QB.cqt,Ct.sW.tW.yht.xXt,Ct.sW.tW.wht.pKt,Ct.sW.tW.QB.gqt,Ct.sW.Nrt.wht.iCt,Ct.sW.tW.yht.dh,Ct.gut.Hos.QB.xas,Ct.sW.tW.yht.zqt,Ct.sW.Text.yht.Vc,Ct.sW.tW.QB.wqt,Ct.sW.tW.wht.nYt,Ct.sW.tW.QB.z4,Ct.sW.Audio.yht.d7t,Ct.sW.Audio.yht.Play,Ct.sW.Nrt.yht.V_t,Ct.sW.Nrt.yht.HGt,Ct.gut.Hos.yht._as,Ct.sW.Text.yht.V_t,Ct.sW.tW.QB.Hd,Ct.gut.bAt.yht.CCt,Ct.sW.Nrt.yht.yH,Ct.sW.Yts.QB.R_t,Ct.sW.Yts.yht.V_t,Ct.sW.Nrt.QB.F_t,Ct.sW.Nrt.yht.z_t,Ct.sW.tW.QB.wwt,Ct.sW.tW.yht.sXt,Ct.sW.tW.yht.SXt,Ct.sW.Nrt.yht.KZt,Ct.sW.Nrt.QB.s_t,Ct.gut.Fas.QB.Jas,Ct.gut.Hos.yht.Cas,Ct.sW.Nrt.QB.e_t,Ct.sW.Nrt.QB.dQt,Ct.sW.Nrt.yht.q_t,Ct.gut.Fas.yht.Fas,Ct.sW.Nrt.yht.$_t,Ct.gut.Ks.yht.Mos,Ct.sW.Nrt.QB.OZt,Ct.gut.Ks.QB.hos,Ct.gut.Ks.QB.aos,Ct.gut.Ks.QB.fos,Ct.gut.Ks.QB.uos,Ct.sW.Keyboard.QB.A3t,Ct.sW.Keyboard.QB.J3t,Ct.sW.gamepad.QB.k5t,Ct.sW.gamepad.QB.m5t,Ct.sW.gamepad.QB.L5t,Ct.sW.gamepad.QB.D5t,Ct.sW.tW.yht.qqt,Ct.sW.tW.yht.tXt,Ct.sW.tW.yht.vXt,Ct.sW.Yts.yht.yH,Ct.sW.Yts.yht.Vc,Ct.gut.Hos.QB.Tas,Ct.gut.Ks.yht.vos,Ct.sW.Nrt.yht.GQt,Ct.gut.Ks.yht.pos,Ct.gut.Ks.yht.mos,Ct.gut.Ks.yht.xos,Ct.gut.Ks.wht.Dos,Ct.gut.Ks.yht.yos,Ct.sW.Nrt.yht.bQt,Ct.sW.Nrt.QB.yQt,Ct.gut.Mcs.yht.Rcs,Ct.gut.Mcs.yht.Acs,Ct.sW.Nrt.yht.RV,Ct.sW.ens.yht.Ans,Ct.sW.ens.QB.bns,Ct.sW.Ses.yht.$es,Ct.sW.ens.wht.Bns,Ct.gut.Ks.QB.Xrs,Ct.sW.Nrt.wht.aCt,Ct.sW.Nrt.wht.lCt,Ct.sW.Nrt.QB.oGt,Ct.sW.Nrt.yht.FGt,Ct.sW.Nrt.wht.vCt,Ct.gut.Ks.yht.CCt,Ct.sW.Nrt.QB.H_t,Ct.sW.Nrt.wht.ACt,Ct.sW.tW.QB.lqt,Ct.sW.tW.wht.random,Ct.sW.Nrt.yht.RGt,Ct.sW.tW.wht.wYt,Ct.sW.Nrt.QB.rGt,Ct.sW.Nrt.QB.hGt,Ct.sW.Nrt.QB.lGt,Ct.sW.Nrt.yht.IQt,Ct.gut.Mcs.yht.eq,Ct.sW.Nrt.yht._Qt,Ct.sW.tW.QB.Rqt,Ct.sW.Nrt.QB.D_t,Ct.sW.Audio.yht.eq,Ct.sW.Nrt.wht.eCt,Ct.sW.tW.yht.Kqt,Ct.gut.mut.yht.pus,Ct.sW.Nrt.wht.uCt,Ct.sW.Nrt.wht.cCt,Ct.sW.Audio.yht.l7t,Ct.sW.Nrt.yht.uGt,Ct.sW.tW.wht.PN,Ct.sW.tW.wht.JYt,Ct.sW.tW.yht.NXt,Ct.sW.Ses.wht.Ces,Ct.sW.Audio.yht.n7t,Ct.sW.tW.wht.vMt,Ct.sW.Nrt.QB.U_t,Ct.sW.Nrt.yht.fGt,Ct.gut.Mcs.yht.DNt,Ct.sW.Nrt.yht.vF,Ct.sW.Nrt.wht.Opacity,Ct.sW.Nrt.QB.OGt,Ct.sW.Nrt.yht.tQt,Ct.sW.Nrt.yht.Xg,Ct.sW.Nrt.yht.QZt,Ct.sW.tW.yht.Jqt,Ct.sW.Nrt.yht.J_t,Ct.sW.Nrt.QB.SH,Ct.gut.mut.yht.cus,Ct.gut.mut.QB.hus,Ct.gut.qas.yht.ols,Ct.sW.Nrt.yht.kGt,Ct.sW.Nrt.QB.aGt,Ct.sW.dis.yht.oes,Ct.sW.Yts.yht.Tts,Ct.sW.Yts.yht.z_t,Ct.sW.Yts.yht.AV,Ct.sW.Nrt.yht.WGt,Ct.sW.Audio.yht.Ght,Ct.sW.tW.yht.uXt,Ct.sW.Nrt.yht.XM,Ct.sW.Text.yht.Tts]},self.Izt=[{Sfs:0},{vfs:0},{bfs:0},{Mfs:0},{xfs:0},{Tfs:0},{Gfs:0},{_fs:0},{Cfs:0},{Ks:0},{Hos:0},{Fas:0},{Ifs:0},{target:0},{Pfs:0},{camera:0},{Afs:0},{Efs:0},{Rfs:0},{Ffs:0},{Keyboard:0},{Gamepad:0},{Ofs:0},{mut:0},{Dfs:0},{kfs:0},{Lfs:0},{Nfs:0},{Bfs:0},{Wfs:0},{jfs:0},{Vfs:0},{Hfs:0},{Ufs:0},{zfs:0},{Jfs:0},{$fs:0},{qfs:0},{Xfs:0},{Audio:0},{Yfs:0},{Kfs:0},{Zfs:0},{Bcs:0},{font:0},{Qfs:0},{tds:0},{sds:0},{ids:0},{eds:0},{nds:0},{rds:0},{direction:0},{hds:0},{ods:0},{ads:0},{lds:0},{uds:0},{cds:0},{fds:0},{dds:0},{pds:0},{mds:0},{gds:0},{yds:0},{wds:0},{Sds:0},{vds:0},{bds:0},{order:0},{Mds:0},{button:0},{xds:0},{Tds:0},{Gds:0},{_ds:0},{text:0},{Cds:0},{Ids:0},{Pds:0},{dFt:0},{Ads:0},{Eds:0},{Rds:0},{Fds:0},{Ods:0},{Dds:0},{kds:0},{Lds:0},{Nds:0},{Bds:0},{Wds:0},{jds:0},{Vds:0},{Hds:0},{Uds:0},{zds:0},{dis:0},{Jds:0},{$ds:0},{qds:0},{Xds:0},{Yds:0},{Kds:0},{Zds:0},{Qds:0},{tps:0},{ens:0},{od:0},{sps:0},{ips:0},{eps:0},{nps:0},{rps:0},{hps:0},{ops:0},{aps:0},{lps:0},{ups:0},{cps:0},{fps:0},{dps:0},{pps:0},{mps:0},{gps:0},{yps:0},{wps:0},{Sps:0},{vps:0},{bps:0},{Mps:0},{xps:0},{Tps:0},{Gps:0},{_ps:0},{paused:0},{Cps:0},{Ips:0},{Pps:0},{Aps:0},{Eps:0},{Rps:0},{Fps:0},{Ops:0},{Dps:0},{kps:0},{Lps:0},{Nps:0},{Bps:0},{volume:0},{Wps:0},{jps:0}],self.Vps={Ifs:class extends self.iQt{},camera:class extends self.iQt{},Efs:class extends self.l1t{},Ffs:class extends self.iQt{},Keyboard:class extends self.uU{},Gamepad:class extends self.uU{},Dfs:class extends self.iQt{},Lfs:class extends self.iQt{},Bfs:class extends self.iQt{},Vfs:class extends self.iQt{},Hfs:class extends self.J4t{},Ufs:class extends self.J4t{},zfs:class extends self.J4t{},Jfs:class extends self.J4t{},$fs:class extends self.J4t{},qfs:class extends self.l1t{},Xfs:class extends self.iQt{},Audio:class extends self.uU{},Yfs:class extends self.ots{},Kfs:class extends self.iQt{},font:class extends self.Iss{},nds:class extends self.iQt{},rds:class extends self.iQt{},hds:class extends self.iQt{},ods:class extends self.J4t{},fds:class extends self.iQt{},dds:class extends self.iQt{},pds:class extends self.iQt{},wds:class extends self.iQt{},vds:class extends self.iQt{},button:class extends self.iQt{},xds:class extends self.iQt{},Gds:class extends self.iQt{},_ds:class extends self.iQt{},Ads:class extends self.iQt{},Eds:class extends self.ots{},Rds:class extends self.iQt{},Ods:class extends self.iQt{},kds:class extends self.iQt{},Lds:class extends self.iQt{},Bds:class extends self.iQt{},Wds:class extends self.iQt{},Vds:class extends self.iQt{},Hds:class extends self.iQt{},zds:class extends self.iQt{},dis:class extends self.uU{},Jds:class extends self.ots{},qds:class extends self.iQt{},Xds:class extends self.iQt{},Yds:class extends self.iQt{},Kds:class extends self.iQt{},Qds:class extends self.iQt{},tps:class extends self.Res{},ens:class extends self.uU{},od:class extends self.iQt{},sps:class extends self.iQt{},ips:class extends self.l1t{},eps:class extends self.iQt{},nps:class extends self.J4t{},rps:class extends self.iQt{},hps:class extends self.iQt{}};
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/