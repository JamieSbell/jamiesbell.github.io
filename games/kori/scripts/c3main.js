import "./../box2d.wasm.js";
// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__require=(t=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(t,{get:(t,s)=>("undefined"!=typeof require?require:t)[s]}):t)(function(t){if("undefined"!=typeof require)return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),__commonJS=(t,s)=>function(){return s||(0,t[__getOwnPropNames(t)[0]])((s={exports:{}}).exports,s),s.exports},__copyProps=(t,s,i,e)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let n of __getOwnPropNames(s))__hasOwnProp.call(t,n)||n===i||__defProp(t,n,{get:()=>s[n],enumerable:!(e=__getOwnPropDesc(s,n))||e.enumerable});return t},__toESM=(t,s,i)=>(i=null!=t?__create(__getProtoOf(t)):{},__copyProps(!s&&t&&t.i?i:__defProp(i,"default",{value:t,enumerable:!0}),t)),require_c3runtime=__commonJS({"file-map:scripts/c3runtime.js"(exports,module){{let e=function(t){ARRAY_TYPE=t},n=function(t){return t*degree},h=function(t,s){return Math.abs(t-s)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(s))},u=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},p=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},m=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},g=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},y=function(t,s,i,e){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},w=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},S=function(t,s){if(t===s){var i=s[1];t[1]=s[2],t[2]=i}else t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3];return t},v=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*r-n*e;return h?(h=1/h,t[0]=r*h,t[1]=-e*h,t[2]=-n*h,t[3]=i*h,t):null},b=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},M=function(t){return t[0]*t[3]-t[2]*t[1]},C=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*o+r*a,t[1]=n*o+h*a,t[2]=e*l+r*u,t[3]=n*l+h*u,t},T=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+r*o,t[1]=n*a+h*o,t[2]=e*-o+r*a,t[3]=n*-o+h*a,t},x=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1];return t[0]=e*o,t[1]=n*o,t[2]=r*a,t[3]=h*a,t},I=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t},_=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},G=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},P=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},A=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},R=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},E=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},O=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},D=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-o)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},F=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},k=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},L=function(){var t=new ARRAY_TYPE(6);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},N=function(t){var s=new ARRAY_TYPE(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},B=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},$=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},W=function(t,s,i,e,n,r){var h=new ARRAY_TYPE(6);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h[4]=n,h[5]=r,h},j=function(t,s,i,e,n,r,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t},V=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=i*r-e*n;return a?(a=1/a,t[0]=r*a,t[1]=-e*a,t[2]=-n*a,t[3]=i*a,t[4]=(n*o-r*h)*a,t[5]=(e*h-i*o)*a,t):null},U=function(t){return t[0]*t[3]-t[1]*t[2]},H=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return t[0]=e*l+r*u,t[1]=n*l+h*u,t[2]=e*c+r*f,t[3]=n*c+h*f,t[4]=e*d+r*p+o,t[5]=n*d+h*p+a,t},z=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=Math.sin(i),u=Math.cos(i);return t[0]=e*u+r*l,t[1]=n*u+h*l,t[2]=e*-l+r*u,t[3]=n*-l+h*u,t[4]=o,t[5]=a,t},J=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e*l,t[1]=n*l,t[2]=r*u,t[3]=h*u,t[4]=o,t[5]=a,t},q=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=e*l+r*u+o,t[5]=n*l+h*u+a,t},Y=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t[4]=0,t[5]=0,t},X=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},K=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},Z=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Q=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},tt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},st=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},it=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},et=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},nt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},rt=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=s[0],l=s[1],u=s[2],c=s[3],f=s[4],d=s[5];return Math.abs(i-a)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(e-l)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(n-u)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(h-f)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(o-d)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(d))},ht=function(){var t=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},ot=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},at=function(t){var s=new ARRAY_TYPE(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},ut=function(t,s,i,e,n,r,h,o,a){var l=new ARRAY_TYPE(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=n,l[5]=r,l[6]=h,l[7]=o,l[8]=a,l},ct=function(t,s,i,e,n,r,h,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},dt=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[5];t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=n}else t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8];return t},pt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=u*h-o*l,f=-u*r+o*a,d=l*r-h*a,p=i*c+e*f+n*d;return p?(p=1/p,t[0]=c*p,t[1]=(-u*e+n*l)*p,t[2]=(o*e-n*h)*p,t[3]=f*p,t[4]=(u*i-n*a)*p,t[5]=(-o*i+n*r)*p,t[6]=d*p,t[7]=(-l*i+e*a)*p,t[8]=(h*i-e*r)*p,t):null},mt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8];return t[0]=h*u-o*l,t[1]=n*l-e*u,t[2]=e*o-n*h,t[3]=o*a-r*u,t[4]=i*u-n*a,t[5]=n*r-i*o,t[6]=r*l-h*a,t[7]=e*a-i*l,t[8]=i*h-e*r,t},gt=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8];return s*(l*r-h*a)+i*(-l*n+h*o)+e*(a*n-r*o)},yt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1],p=i[2],m=i[3],g=i[4],y=i[5],w=i[6],S=i[7],v=i[8];return t[0]=f*e+d*h+p*l,t[1]=f*n+d*o+p*u,t[2]=f*r+d*a+p*c,t[3]=m*e+g*h+y*l,t[4]=m*n+g*o+y*u,t[5]=m*r+g*a+y*c,t[6]=w*e+S*h+v*l,t[7]=w*n+S*o+v*u,t[8]=w*r+S*a+v*c,t},wt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=f*e+d*h+l,t[7]=f*n+d*o+u,t[8]=f*r+d*a+c,t},St=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=Math.sin(i),d=Math.cos(i);return t[0]=d*e+f*h,t[1]=d*n+f*o,t[2]=d*r+f*a,t[3]=d*h-f*e,t[4]=d*o-f*n,t[5]=d*a-f*r,t[6]=l,t[7]=u,t[8]=c,t},vt=function(t,s,i){var e=i[0],n=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=n*s[3],t[4]=n*s[4],t[5]=n*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Mt=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=-i,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ct=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Tt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},xt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[3]=u-y,t[6]=f+g,t[1]=u+y,t[4]=1-l-p,t[7]=d-m,t[2]=f-g,t[5]=d+m,t[8]=1-l-c,t},It=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,v=i*l-r*h,b=e*a-n*o,M=e*l-r*o,C=n*l-r*a,T=u*m-c*p,x=u*g-f*p,I=u*y-d*p,_=c*g-f*m,G=c*y-d*m,P=f*y-d*g,A=w*P-S*G+v*_+b*I-M*x+C*T;return A?(A=1/A,t[0]=(o*P-a*G+l*_)*A,t[1]=(a*I-h*P-l*x)*A,t[2]=(h*G-o*I+l*T)*A,t[3]=(n*G-e*P-r*_)*A,t[4]=(i*P-n*I+r*x)*A,t[5]=(e*I-i*G-r*T)*A,t[6]=(m*C-g*M+y*b)*A,t[7]=(g*v-p*C-y*S)*A,t[8]=(p*M-m*v+y*w)*A,t):null},_t=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Gt=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Pt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},At=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},Rt=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Et=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Ot=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Dt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},Ft=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=s[0],f=s[1],d=s[2],p=s[3],m=s[4],g=s[5],y=s[6],w=s[7],S=s[8];return Math.abs(i-c)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(e-f)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(n-d)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(h-m)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(o-g)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-y)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-w)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(u-S)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(S))},kt=function(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},Lt=function(t){var s=new ARRAY_TYPE(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},Nt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},Bt=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m){var g=new ARRAY_TYPE(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=n,g[5]=r,g[6]=h,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},$t=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},Wt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},jt=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[3],r=s[6],h=s[7],o=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t},Vt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,v=i*l-r*h,b=e*a-n*o,M=e*l-r*o,C=n*l-r*a,T=u*m-c*p,x=u*g-f*p,I=u*y-d*p,_=c*g-f*m,G=c*y-d*m,P=f*y-d*g,A=w*P-S*G+v*_+b*I-M*x+C*T;return A?(A=1/A,t[0]=(o*P-a*G+l*_)*A,t[1]=(n*G-e*P-r*_)*A,t[2]=(m*C-g*M+y*b)*A,t[3]=(f*M-c*C-d*b)*A,t[4]=(a*I-h*P-l*x)*A,t[5]=(i*P-n*I+r*x)*A,t[6]=(g*v-p*C-y*S)*A,t[7]=(u*C-f*v+d*S)*A,t[8]=(h*G-o*I+l*T)*A,t[9]=(e*I-i*G-r*T)*A,t[10]=(p*M-m*v+y*w)*A,t[11]=(c*v-u*M-d*w)*A,t[12]=(o*x-h*_-a*T)*A,t[13]=(i*_-e*x+n*T)*A,t[14]=(m*S-p*b-g*w)*A,t[15]=(u*b-c*S+f*w)*A,t):null},Ut=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,v=i*l-r*h,b=e*a-n*o,M=e*l-r*o,C=n*l-r*a,T=u*m-c*p,x=u*g-f*p,I=u*y-d*p,_=c*g-f*m,G=c*y-d*m,P=f*y-d*g;return t[0]=o*P-a*G+l*_,t[1]=n*G-e*P-r*_,t[2]=m*C-g*M+y*b,t[3]=f*M-c*C-d*b,t[4]=a*I-h*P-l*x,t[5]=i*P-n*I+r*x,t[6]=g*v-p*C-y*S,t[7]=u*C-f*v+d*S,t[8]=h*G-o*I+l*T,t[9]=e*I-i*G-r*T,t[10]=p*M-m*v+y*w,t[11]=c*v-u*M-d*w,t[12]=o*x-h*_-a*T,t[13]=i*_-e*x+n*T,t[14]=m*S-p*b-g*w,t[15]=u*b-c*S+f*w,t},Ht=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],g=s*h-i*r,y=s*o-e*r,w=i*o-e*h,S=l*p-u*d,v=l*m-c*d,b=u*m-c*p;return a*(s*b-i*v+e*S)-n*(r*b-h*v+o*S)+t[15]*(l*w-u*y+c*g)-f*(d*w-p*y+m*g)},zt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],w=s[15],S=i[0],v=i[1],b=i[2],M=i[3];return t[0]=S*e+v*o+b*c+M*m,t[1]=S*n+v*a+b*f+M*g,t[2]=S*r+v*l+b*d+M*y,t[3]=S*h+v*u+b*p+M*w,S=i[4],v=i[5],b=i[6],M=i[7],t[4]=S*e+v*o+b*c+M*m,t[5]=S*n+v*a+b*f+M*g,t[6]=S*r+v*l+b*d+M*y,t[7]=S*h+v*u+b*p+M*w,S=i[8],v=i[9],b=i[10],M=i[11],t[8]=S*e+v*o+b*c+M*m,t[9]=S*n+v*a+b*f+M*g,t[10]=S*r+v*l+b*d+M*y,t[11]=S*h+v*u+b*p+M*w,S=i[12],v=i[13],b=i[14],M=i[15],t[12]=S*e+v*o+b*c+M*m,t[13]=S*n+v*a+b*f+M*g,t[14]=S*r+v*l+b*d+M*y,t[15]=S*h+v*u+b*p+M*w,t},Jt=function(t,s,i){var e,n,r,h,o,a,l,u,c,f,d,p,m=i[0],g=i[1],y=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*y+s[12],t[13]=s[1]*m+s[5]*g+s[9]*y+s[13],t[14]=s[2]*m+s[6]*g+s[10]*y+s[14],t[15]=s[3]*m+s[7]*g+s[11]*y+s[15]):(e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*y+s[12],t[13]=n*m+a*g+f*y+s[13],t[14]=r*m+l*g+d*y+s[14],t[15]=h*m+u*g+p*y+s[15]),t},qt=function(t,s,i){var e=i[0],n=i[1],r=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*r,t[9]=s[9]*r,t[10]=s[10]*r,t[11]=s[11]*r,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},Yt=function(t,s,i,e){var n,r,h,o,a,l,u,c,f,d,p,m,g,y,w,S,v,b,M,C,T,x,I,_,G=e[0],P=e[1],A=e[2],R=Math.hypot(G,P,A);return R<EPSILON?null:(G*=R=1/R,P*=R,A*=R,n=Math.sin(i),h=1-(r=Math.cos(i)),o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],f=s[5],d=s[6],p=s[7],m=s[8],g=s[9],y=s[10],w=s[11],S=G*G*h+r,v=P*G*h+A*n,b=A*G*h-P*n,M=G*P*h-A*n,C=P*P*h+r,T=A*P*h+G*n,x=G*A*h+P*n,I=P*A*h-G*n,_=A*A*h+r,t[0]=o*S+c*v+m*b,t[1]=a*S+f*v+g*b,t[2]=l*S+d*v+y*b,t[3]=u*S+p*v+w*b,t[4]=o*M+c*C+m*T,t[5]=a*M+f*C+g*T,t[6]=l*M+d*C+y*T,t[7]=u*M+p*C+w*T,t[8]=o*x+c*I+m*_,t[9]=a*x+f*I+g*_,t[10]=l*x+d*I+y*_,t[11]=u*x+p*I+w*_,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},Xt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[4],h=s[5],o=s[6],a=s[7],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=r*n+l*e,t[5]=h*n+u*e,t[6]=o*n+c*e,t[7]=a*n+f*e,t[8]=l*n-r*e,t[9]=u*n-h*e,t[10]=c*n-o*e,t[11]=f*n-a*e,t},Kt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n-l*e,t[1]=h*n-u*e,t[2]=o*n-c*e,t[3]=a*n-f*e,t[8]=r*e+l*n,t[9]=h*e+u*n,t[10]=o*e+c*n,t[11]=a*e+f*n,t},Zt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[4],u=s[5],c=s[6],f=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n+l*e,t[1]=h*n+u*e,t[2]=o*n+c*e,t[3]=a*n+f*e,t[4]=l*n-r*e,t[5]=u*n-h*e,t[6]=c*n-o*e,t[7]=f*n-a*e,t},Qt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ts=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ss=function(t,s,i){var e,n,r,h=i[0],o=i[1],a=i[2],l=Math.hypot(h,o,a);return l<EPSILON?null:(h*=l=1/l,o*=l,a*=l,e=Math.sin(s),r=1-(n=Math.cos(s)),t[0]=h*h*r+n,t[1]=o*h*r+a*e,t[2]=a*h*r-o*e,t[3]=0,t[4]=h*o*r-a*e,t[5]=o*o*r+n,t[6]=a*o*r+h*e,t[7]=0,t[8]=h*a*r+o*e,t[9]=o*a*r-h*e,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},is=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},es=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rs=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=e+e,a=n+n,l=r+r,u=e*o,c=e*a,f=e*l,d=n*a,p=n*l,m=r*l,g=h*o,y=h*a,w=h*l;return t[0]=1-(d+m),t[1]=c+w,t[2]=f-y,t[3]=0,t[4]=c-w,t[5]=1-(u+m),t[6]=p+g,t[7]=0,t[8]=f+y,t[9]=p-g,t[10]=1-(u+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},hs=function(t,s){var i=new ARRAY_TYPE(3),e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+n*n+r*r+h*h;return c>0?(i[0]=2*(o*h+u*e+a*r-l*n)/c,i[1]=2*(a*h+u*n+l*e-o*r)/c,i[2]=2*(l*h+u*r+o*n-a*e)/c):(i[0]=2*(o*h+u*e+a*r-l*n),i[1]=2*(a*h+u*n+l*e-o*r),i[2]=2*(l*h+u*r+o*n-a*e)),rs(t,s,i),t},os=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},as=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[4],h=s[5],o=s[6],a=s[8],l=s[9],u=s[10];return t[0]=Math.hypot(i,e,n),t[1]=Math.hypot(r,h,o),t[2]=Math.hypot(a,l,u),t},ls=function(t,s){var i=new ARRAY_TYPE(3);as(i,s);var e=1/i[0],n=1/i[1],r=1/i[2],h=s[0]*e,o=s[1]*n,a=s[2]*r,l=s[4]*e,u=s[5]*n,c=s[6]*r,f=s[8]*e,d=s[9]*n,p=s[10]*r,m=h+u+p,g=0;return m>0?(g=2*Math.sqrt(m+1),t[3]=.25*g,t[0]=(c-d)/g,t[1]=(f-a)/g,t[2]=(o-l)/g):h>u&&h>p?(g=2*Math.sqrt(1+h-u-p),t[3]=(c-d)/g,t[0]=.25*g,t[1]=(o+l)/g,t[2]=(f+a)/g):u>p?(g=2*Math.sqrt(1+u-h-p),t[3]=(f-a)/g,t[0]=(o+l)/g,t[1]=.25*g,t[2]=(c+d)/g):(g=2*Math.sqrt(1+p-h-u),t[3]=(o-l)/g,t[0]=(f+a)/g,t[1]=(c+d)/g,t[2]=.25*g),t},us=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var n=e[0],r=e[1],h=e[2],o=e[4],a=e[5],l=e[6],u=e[8],c=e[9],f=e[10];i[0]=Math.hypot(n,r,h),i[1]=Math.hypot(o,a,l),i[2]=Math.hypot(u,c,f);var d=1/i[0],p=1/i[1],m=1/i[2],g=n*d,y=r*p,w=h*m,S=o*d,v=a*p,b=l*m,M=u*d,C=c*p,T=f*m,x=g+v+T,I=0;return x>0?(I=2*Math.sqrt(x+1),t[3]=.25*I,t[0]=(b-C)/I,t[1]=(M-w)/I,t[2]=(y-S)/I):g>v&&g>T?(I=2*Math.sqrt(1+g-v-T),t[3]=(b-C)/I,t[0]=.25*I,t[1]=(y+S)/I,t[2]=(M+w)/I):v>T?(I=2*Math.sqrt(1+v-g-T),t[3]=(M-w)/I,t[0]=(y+S)/I,t[1]=.25*I,t[2]=(b+C)/I):(I=2*Math.sqrt(1+T-g-v),t[3]=(y-S)/I,t[0]=(M+w)/I,t[1]=(b+C)/I,t[2]=.25*I),t},cs=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3],a=n+n,l=r+r,u=h+h,c=n*a,f=n*l,d=n*u,p=r*l,m=r*u,g=h*u,y=o*a,w=o*l,S=o*u,v=e[0],b=e[1],M=e[2];return t[0]=(1-(p+g))*v,t[1]=(f+S)*v,t[2]=(d-w)*v,t[3]=0,t[4]=(f-S)*b,t[5]=(1-(c+g))*b,t[6]=(m+y)*b,t[7]=0,t[8]=(d+w)*M,t[9]=(m-y)*M,t[10]=(1-(c+p))*M,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},fs=function(t,s,i,e,n){var r=s[0],h=s[1],o=s[2],a=s[3],l=r+r,u=h+h,c=o+o,f=r*l,d=r*u,p=r*c,m=h*u,g=h*c,y=o*c,w=a*l,S=a*u,v=a*c,b=e[0],M=e[1],C=e[2],T=n[0],x=n[1],I=n[2],_=(1-(m+y))*b,G=(d+v)*b,P=(p-S)*b,A=(d-v)*M,R=(1-(f+y))*M,E=(g+w)*M,O=(p+S)*C,D=(g-w)*C,F=(1-(f+m))*C;return t[0]=_,t[1]=G,t[2]=P,t[3]=0,t[4]=A,t[5]=R,t[6]=E,t[7]=0,t[8]=O,t[9]=D,t[10]=F,t[11]=0,t[12]=i[0]+T-(_*T+A*x+O*I),t[13]=i[1]+x-(G*T+R*x+D*I),t[14]=i[2]+I-(P*T+E*x+F*I),t[15]=1,t},ds=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[1]=u+y,t[2]=f-g,t[3]=0,t[4]=u-y,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ps=function(t,s,i,e,n,r,h){var o=1/(i-s),a=1/(n-e),l=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(n+e)*a,t[10]=(h+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*l,t[15]=0,t},ms=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=(n+e)*h,t[14]=2*n*e*h}else t[10]=-1,t[14]=-2*e;return t},gs=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=n*h,t[14]=n*e*h}else t[10]=-1,t[14]=-e;return t},ys=function(t,s,i,e){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=Math.tan(s.rightDegrees*Math.PI/180),a=2/(h+o),l=2/(n+r);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(h-o)*a*.5,t[9]=(n-r)*l*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},ws=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=(h+r)*l,t[15]=1,t},Ss=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=r*l,t[15]=1,t},vs=function(t,s,i,e){var n,r,h,o,a,l,u,c,f,d,p=s[0],m=s[1],g=s[2],y=e[0],w=e[1],S=e[2],v=i[0],b=i[1],M=i[2];return Math.abs(p-v)<EPSILON&&Math.abs(m-b)<EPSILON&&Math.abs(g-M)<EPSILON?Wt(t):(u=p-v,c=m-b,f=g-M,n=w*(f*=d=1/Math.hypot(u,c,f))-S*(c*=d),r=S*(u*=d)-y*f,h=y*c-w*u,(d=Math.hypot(n,r,h))?(n*=d=1/d,r*=d,h*=d):(n=0,r=0,h=0),o=c*h-f*r,a=f*n-u*h,l=u*r-c*n,(d=Math.hypot(o,a,l))?(o*=d=1/d,a*=d,l*=d):(o=0,a=0,l=0),t[0]=n,t[1]=o,t[2]=u,t[3]=0,t[4]=r,t[5]=a,t[6]=c,t[7]=0,t[8]=h,t[9]=l,t[10]=f,t[11]=0,t[12]=-(n*p+r*m+h*g),t[13]=-(o*p+a*m+l*g),t[14]=-(u*p+c*m+f*g),t[15]=1,t)},bs=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=e[0],a=e[1],l=e[2],u=n-i[0],c=r-i[1],f=h-i[2],d=u*u+c*c+f*f;d>0&&(u*=d=1/Math.sqrt(d),c*=d,f*=d);var p=a*f-l*c,m=l*u-o*f,g=o*c-a*u;return(d=p*p+m*m+g*g)>0&&(p*=d=1/Math.sqrt(d),m*=d,g*=d),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=c*g-f*m,t[5]=f*p-u*g,t[6]=u*m-c*p,t[7]=0,t[8]=u,t[9]=c,t[10]=f,t[11]=0,t[12]=n,t[13]=r,t[14]=h,t[15]=1,t},Ms=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Cs=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Ts=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},xs=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Is=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},_s=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Gs=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ps=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],y=t[15],w=s[0],S=s[1],v=s[2],b=s[3],M=s[4],C=s[5],T=s[6],x=s[7],I=s[8],_=s[9],G=s[10],P=s[11],A=s[12],R=s[13],E=s[14],O=s[15];return Math.abs(i-w)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(e-S)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(S))&&Math.abs(n-v)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-b)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(h-M)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(o-C)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(C))&&Math.abs(a-T)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(l-x)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(u-I)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(c-_)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-G)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(G))&&Math.abs(d-P)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(p-A)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(m-R)<=EPSILON*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(g-E)<=EPSILON*Math.max(1,Math.abs(g),Math.abs(E))&&Math.abs(y-O)<=EPSILON*Math.max(1,Math.abs(y),Math.abs(O))},As=function(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},Rs=function(t){var s=new ARRAY_TYPE(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Es=function(t){var s=t[0],i=t[1],e=t[2];return Math.hypot(s,i,e)},Os=function(t,s,i){var e=new ARRAY_TYPE(3);return e[0]=t,e[1]=s,e[2]=i,e},Ds=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Fs=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},ks=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Ls=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},Ns=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},Bs=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},$s=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Ws=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},js=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Vs=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Us=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},Hs=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},zs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},Js=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return Math.hypot(i,e,n)},qs=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return i*i+e*e+n*n},Ys=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e},Xs=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},Ks=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},Zs=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=s[0]*r,t[1]=s[1]*r,t[2]=s[2]*r,t},Qs=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},ti=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2];return t[0]=n*a-r*o,t[1]=r*h-e*a,t[2]=e*o-n*h,t},si=function(t,s,i,e){var n=s[0],r=s[1],h=s[2];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t},ii=function(t,s,i,e){var n=Math.acos(Math.min(Math.max(Qs(s,i),-1),1)),r=Math.sin(n),h=Math.sin((1-e)*n)/r,o=Math.sin(e*n)/r;return t[0]=h*s[0]+o*i[0],t[1]=h*s[1]+o*i[1],t[2]=h*s[2]+o*i[2],t},ei=function(t,s,i,e,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,l=h*(r-1),u=h*(3-2*r);return t[0]=s[0]*o+i[0]*a+e[0]*l+n[0]*u,t[1]=s[1]*o+i[1]*a+e[1]*l+n[1]*u,t[2]=s[2]*o+i[2]*a+e[2]*l+n[2]*u,t},ni=function(t,s,i,e,n,r){var h=1-r,o=h*h,a=r*r,l=o*h,u=3*r*o,c=3*a*h,f=a*r;return t[0]=s[0]*l+i[0]*u+e[0]*c+n[0]*f,t[1]=s[1]*l+i[1]*u+e[1]*c+n[1]*f,t[2]=s[2]*l+i[2]*u+e[2]*c+n[2]*f,t},ri=function(t,s){s=s||1;var i=2*RANDOM()*Math.PI,e=2*RANDOM()-1,n=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=e*s,t},hi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[3]*e+i[7]*n+i[11]*r+i[15];return h=h||1,t[0]=(i[0]*e+i[4]*n+i[8]*r+i[12])/h,t[1]=(i[1]*e+i[5]*n+i[9]*r+i[13])/h,t[2]=(i[2]*e+i[6]*n+i[10]*r+i[14])/h,t},oi=function(t,s,i){var e=s[0],n=s[1],r=s[2];return t[0]=e*i[0]+n*i[3]+r*i[6],t[1]=e*i[1]+n*i[4]+r*i[7],t[2]=e*i[2]+n*i[5]+r*i[8],t},ai=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=n*l-r*a,c=r*o-e*l,f=e*a-n*o,d=n*f-r*c,p=r*u-e*f,m=e*c-n*u,g=2*h;return u*=g,c*=g,f*=g,d*=2,p*=2,m*=2,t[0]=o+u+d,t[1]=a+c+p,t[2]=l+f+m,t},li=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(e)-n[2]*Math.sin(e),r[2]=n[1]*Math.sin(e)+n[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},ui=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[2]*Math.sin(e)+n[0]*Math.cos(e),r[1]=n[1],r[2]=n[2]*Math.cos(e)-n[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},ci=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0]*Math.cos(e)-n[1]*Math.sin(e),r[1]=n[0]*Math.sin(e)+n[1]*Math.cos(e),r[2]=n[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},fi=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2],a=Math.sqrt((i*i+e*e+n*n)*(r*r+h*h+o*o)),l=a&&Qs(t,s)/a;return Math.acos(Math.min(Math.max(l,-1),1))},di=function(t){return t[0]=0,t[1]=0,t[2]=0,t},pi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},mi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},gi=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2];return Math.abs(i-r)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-h)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(o))},yi=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},wi=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Si=function(t,s,i,e){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},vi=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},bi=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},Mi=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Ci=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ti=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},xi=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ii=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},_i=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Gi=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Pi=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Ai=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Ri=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Ei=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Oi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return Math.hypot(i,e,n,r)},Di=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return i*i+e*e+n*n+r*r},Fi=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return Math.hypot(s,i,e,n)},ki=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return s*s+i*i+e*e+n*n},Li=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},Ni=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Bi=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r;return h>0&&(h=1/Math.sqrt(h)),t[0]=i*h,t[1]=e*h,t[2]=n*h,t[3]=r*h,t},$i=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Wi=function(t,s,i,e){var n=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],h=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],l=i[2]*e[3]-i[3]*e[2],u=s[0],c=s[1],f=s[2],d=s[3];return t[0]=c*l-f*a+d*o,t[1]=-u*l+f*h-d*r,t[2]=u*a-c*h+d*n,t[3]=-u*o+c*r-f*n,t},ji=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t[3]=o+e*(i[3]-o),t},Vi=function(t,s){var i,e,n,r,h,o;s=s||1;do{h=(i=2*RANDOM()-1)*i+(e=2*RANDOM()-1)*e}while(h>=1);do{o=(n=2*RANDOM()-1)*n+(r=2*RANDOM()-1)*r}while(o>=1);var a=Math.sqrt((1-h)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*n*a,t[3]=s*r*a,t},Ui=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3];return t[0]=i[0]*e+i[4]*n+i[8]*r+i[12]*h,t[1]=i[1]*e+i[5]*n+i[9]*r+i[13]*h,t[2]=i[2]*e+i[6]*n+i[10]*r+i[14]*h,t[3]=i[3]*e+i[7]*n+i[11]*r+i[15]*h,t},Hi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2],l=i[3],u=l*e+o*r-a*n,c=l*n+a*e-h*r,f=l*r+h*n-o*e,d=-h*e-o*n-a*r;return t[0]=u*l+d*-h+c*-a-f*-o,t[1]=c*l+d*-o+f*-h-u*-a,t[2]=f*l+d*-a+u*-o-c*-h,t[3]=s[3],t},zi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Ji=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},qi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Yi=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-o)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},Xi=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Ki=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},Zi=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return e>EPSILON?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){var i=dot$2(t,s);return Math.acos(2*i*i-1)},se=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,t},ie=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+h*o,t[1]=n*a+r*o,t[2]=r*a-n*o,t[3]=h*a-e*o,t},ee=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a-r*o,t[1]=n*a+h*o,t[2]=r*a+e*o,t[3]=h*a-n*o,t},ne=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+n*o,t[1]=n*a-e*o,t[2]=r*a+h*o,t[3]=h*a-r*o,t},re=function(t,s){var i=s[0],e=s[1],n=s[2];return t[0]=i,t[1]=e,t[2]=n,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-n*n)),t},he=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=Math.exp(r),a=h>0?o*Math.sin(h)/h:0;return t[0]=i*a,t[1]=e*a,t[2]=n*a,t[3]=o*Math.cos(h),t},oe=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=h>0?Math.atan2(h,r)/h:0;return t[0]=i*o,t[1]=e*o,t[2]=n*o,t[3]=.5*Math.log(i*i+e*e+n*n+r*r),t},ae=function(t,s,i){return oe(t,s),scale$2(t,t,i),he(t,t),t},le=function(t,s,i,e){var n,r,h,o,a,l=s[0],u=s[1],c=s[2],f=s[3],d=i[0],p=i[1],m=i[2],g=i[3];return(r=l*d+u*p+c*m+f*g)<0&&(r=-r,d=-d,p=-p,m=-m,g=-g),1-r>EPSILON?(n=Math.acos(r),h=Math.sin(n),o=Math.sin((1-e)*n)/h,a=Math.sin(e*n)/h):(o=1-e,a=e),t[0]=o*l+a*d,t[1]=o*u+a*p,t[2]=o*c+a*m,t[3]=o*f+a*g,t},ue=function(t){var s=RANDOM(),i=RANDOM(),e=RANDOM(),n=Math.sqrt(1-s),r=Math.sqrt(s);return t[0]=n*Math.sin(2*Math.PI*i),t[1]=n*Math.cos(2*Math.PI*i),t[2]=r*Math.sin(2*Math.PI*e),t[3]=r*Math.cos(2*Math.PI*e),t},ce=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r,o=h?1/h:0;return t[0]=-i*o,t[1]=-e*o,t[2]=-n*o,t[3]=r*o,t},fe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},de=function(t,s){var i,e=s[0]+s[4]+s[8];if(e>0)i=Math.sqrt(e+1),t[3]=.5*i,i=.5/i,t[0]=(s[5]-s[7])*i,t[1]=(s[6]-s[2])*i,t[2]=(s[1]-s[3])*i;else{var n=0;s[4]>s[0]&&(n=1),s[8]>s[3*n+n]&&(n=2);var r=(n+1)%3,h=(n+2)%3;i=Math.sqrt(s[3*n+n]-s[3*r+r]-s[3*h+h]+1),t[n]=.5*i,i=.5/i,t[3]=(s[3*r+h]-s[3*h+r])*i,t[r]=(s[3*r+n]+s[3*n+r])*i,t[h]=(s[3*h+n]+s[3*n+h])*i}return t},pe=function(t,s,i,e){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ANGLE_ORDER,r=Math.PI/360;s*=r,e*=r,i*=r;var h=Math.sin(s),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(n){case"xyz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"xzy":t[0]=h*l*c-o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c+h*a*u;break;case"yxz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;case"yzx":t[0]=h*l*c+o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c-h*a*u;break;case"zxy":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"zyx":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;default:throw new Error("Unknown angle order "+n)}return t},me=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},ge=function(t,s){return Math.abs($i(t,s))>=1-EPSILON},ye=function(){var t=new ARRAY_TYPE(8);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},we=function(t){var s=new ARRAY_TYPE(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},Se=function(t,s,i,e,n,r,h,o){var a=new ARRAY_TYPE(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=n,a[5]=r,a[6]=h,a[7]=o,a},ve=function(t,s,i,e,n,r,h){var o=new ARRAY_TYPE(8);o[0]=t,o[1]=s,o[2]=i,o[3]=e;var a=.5*n,l=.5*r,u=.5*h;return o[4]=a*e+l*i-u*s,o[5]=l*e+u*t-a*i,o[6]=u*e+a*s-l*t,o[7]=-a*t-l*s-u*i,o},be=function(t,s,i){var e=.5*i[0],n=.5*i[1],r=.5*i[2],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h,t[1]=o,t[2]=a,t[3]=l,t[4]=e*l+n*a-r*o,t[5]=n*l+r*h-e*a,t[6]=r*l+e*o-n*h,t[7]=-e*h-n*o-r*a,t},Me=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},Ce=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Te=function(t,s){var i=Xi();ls(i,s);var e=new ARRAY_TYPE(3);return os(e,s),be(t,i,e),t},xe=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},Ie=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},_e=function(t,s,i,e,n,r,h,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},Ge=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Pe=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Ae=function(t,s){var i=s[4],e=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],l=s[3];return t[0]=2*(i*l+r*h+e*a-n*o),t[1]=2*(e*l+r*o+n*h-i*a),t[2]=2*(n*l+r*a+i*o-e*h),t},Re=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=.5*i[0],a=.5*i[1],l=.5*i[2],u=s[4],c=s[5],f=s[6],d=s[7];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*l-r*a+u,t[5]=h*a+r*o-e*l+c,t[6]=h*l+e*a-n*o+f,t[7]=-e*o-n*a-r*l+d,t},Ee=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ie(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Oe=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ee(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},De=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ne(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Fe=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=s[3];return t[0]=o*h+u*e+a*r-l*n,t[1]=a*h+u*n+l*e-o*r,t[2]=l*h+u*r+o*n-a*e,t[3]=u*h-o*e-a*n-l*r,o=s[4],a=s[5],l=s[6],u=s[7],t[4]=o*h+u*e+a*r-l*n,t[5]=a*h+u*n+l*e-o*r,t[6]=l*h+u*r+o*n-a*e,t[7]=u*h-o*e-a*n-l*r,t},ke=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,o=i[4],a=i[5],l=i[6],u=i[7],t[4]=e*u+h*o+n*l-r*a,t[5]=n*u+h*a+r*o-e*l,t[6]=r*u+h*l+e*a-n*o,t[7]=h*u-e*o-n*a-r*l,t},Le=function(t,s,i,e){if(Math.abs(e)<EPSILON)return xe(t,s);var n=Math.hypot(i[0],i[1],i[2]);e*=.5;var r=Math.sin(e),h=r*i[0]/n,o=r*i[1]/n,a=r*i[2]/n,l=Math.cos(e),u=s[0],c=s[1],f=s[2],d=s[3];t[0]=u*l+d*h+c*a-f*o,t[1]=c*l+d*o+f*h-u*a,t[2]=f*l+d*a+u*o-c*h,t[3]=d*l-u*h-c*o-f*a;var p=s[4],m=s[5],g=s[6],y=s[7];return t[4]=p*l+y*h+m*a-g*o,t[5]=m*l+y*o+g*h-p*a,t[6]=g*l+y*a+p*o-m*h,t[7]=y*l-p*h-m*o-g*a,t},Ne=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Be=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],p=s[7],m=i[0],g=i[1],y=i[2],w=i[3];return t[0]=e*w+h*m+n*y-r*g,t[1]=n*w+h*g+r*m-e*y,t[2]=r*w+h*y+e*g-n*m,t[3]=h*w-e*m-n*g-r*y,t[4]=e*u+h*o+n*l-r*a+c*w+p*m+f*y-d*g,t[5]=n*u+h*a+r*o-e*l+f*w+p*g+d*m-c*y,t[6]=r*u+h*l+e*a-n*o+d*w+p*y+c*g-f*m,t[7]=h*u-e*o-n*a-r*l+p*w-c*m-f*g-d*y,t},$e=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},We=function(t,s,i,e){var n=1-e;return dot$1(s,i)<0&&(e=-e),t[0]=s[0]*n+i[0]*e,t[1]=s[1]*n+i[1]*e,t[2]=s[2]*n+i[2]*e,t[3]=s[3]*n+i[3]*e,t[4]=s[4]*n+i[4]*e,t[5]=s[5]*n+i[5]*e,t[6]=s[6]*n+i[6]*e,t[7]=s[7]*n+i[7]*e,t},je=function(t,s){var i=squaredLength$1(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},Ve=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Ue=function(t,s){var i=squaredLength$1(s);if(i>0){i=Math.sqrt(i);var e=s[0]/i,n=s[1]/i,r=s[2]/i,h=s[3]/i,o=s[4],a=s[5],l=s[6],u=s[7],c=e*o+n*a+r*l+h*u;t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=(o-e*c)/i,t[5]=(a-n*c)/i,t[6]=(l-r*c)/i,t[7]=(u-h*c)/i}return t},He=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},ze=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Je=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7];return Math.abs(i-u)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(n-f)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(y))},qe=function(){var t=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t},Ye=function(t){var s=new ARRAY_TYPE(2);return s[0]=t[0],s[1]=t[1],s},Xe=function(t,s){var i=new ARRAY_TYPE(2);return i[0]=t,i[1]=s,i},Ke=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ze=function(t,s,i){return t[0]=s,t[1]=i,t},Qe=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},tn=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},sn=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},en=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},nn=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},rn=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},hn=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},on=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},an=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},un=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},cn=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},fn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return Math.hypot(i,e)},dn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},pn=function(t){var s=t[0],i=t[1];return Math.hypot(s,i)},mn=function(t){var s=t[0],i=t[1];return s*s+i*i},gn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},yn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},wn=function(t,s){var i=s[0],e=s[1],n=i*i+e*e;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t},Sn=function(t,s){return t[0]*s[0]+t[1]*s[1]},vn=function(t,s,i){var e=s[0]*i[1]-s[1]*i[0];return t[0]=t[1]=0,t[2]=e,t},bn=function(t,s,i,e){var n=s[0],r=s[1];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t},Mn=function(t,s){s=s||1;var i=2*RANDOM()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},Cn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n,t[1]=i[1]*e+i[3]*n,t},Tn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t},xn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[3]*n+i[6],t[1]=i[1]*e+i[4]*n+i[7],t},In=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[4]*n+i[12],t[1]=i[1]*e+i[5]*n+i[13],t},_n=function(t,s,i,e){var n=s[0]-i[0],r=s[1]-i[1],h=Math.sin(e),o=Math.cos(e);return t[0]=n*o-r*h+i[0],t[1]=n*h+r*o+i[1],t},Gn=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1],h=Math.sqrt((i*i+e*e)*(n*n+r*r)),o=h&&(i*n+e*r)/h;return Math.acos(Math.min(Math.max(o,-1),1))},Pn=function(t){return t[0]=0,t[1]=0,t},An=function(t){return"vec2("+t[0]+", "+t[1]+")"},Rn=function(t,s){return t[0]===s[0]&&t[1]===s[1]},En=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1];return Math.abs(i-n)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(r))};setMatrixArrayType=e,toRadian=n,equals$9=h,create$8=u,clone$8=p,copy$8=m,identity$5=g,fromValues$8=y,set$8=w,transpose$2=S,invert$5=v,adjoint$2=b,determinant$3=M,multiply$8=C,rotate$4=T,scale$8=x,fromRotation$4=I,fromScaling$3=_,str$8=G,frob$3=P,LDU=A,add$8=R,subtract$6=E,exactEquals$8=O,equals$8=D,multiplyScalar$3=F,multiplyScalarAndAdd$3=k,create$7=L,clone$7=N,copy$7=B,identity$4=$,fromValues$7=W,set$7=j,invert$4=V,determinant$2=U,multiply$7=H,rotate$3=z,scale$7=J,translate$3=q,fromRotation$3=Y,fromScaling$2=X,fromTranslation$3=K,str$7=Z,frob$2=Q,add$7=tt,subtract$5=st,multiplyScalar$2=it,multiplyScalarAndAdd$2=et,exactEquals$7=nt,equals$7=rt,create$6=ht,fromMat4$1=ot,clone$6=at,copy$6=lt,fromValues$6=ut,set$6=ct,identity$3=ft,transpose$1=dt,invert$3=pt,adjoint$1=mt,determinant$1=gt,multiply$6=yt,translate$2=wt,rotate$2=St,scale$6=vt,fromTranslation$2=bt,fromRotation$2=Mt,fromScaling$1=Ct,fromMat2d=Tt,fromQuat$1=xt,normalFromMat4=It,projection=_t,str$6=Gt,frob$1=Pt,add$6=At,subtract$4=Rt,multiplyScalar$1=Et,multiplyScalarAndAdd$1=Ot,exactEquals$6=Dt,equals$6=Ft,create$5=kt,clone$5=Lt,copy$5=Nt,fromValues$5=Bt,set$5=$t,identity$2=Wt,transpose=jt,invert$2=Vt,adjoint=Ut,determinant=Ht,multiply$5=zt,translate$1=Jt,scale$5=qt,rotate$1=Yt,rotateX$3=Xt,rotateY$3=Kt,rotateZ$3=Zt,fromTranslation$1=Qt,fromScaling=ts,fromRotation$1=ss,fromXRotation=is,fromYRotation=es,fromZRotation=ns,fromRotationTranslation$1=rs,fromQuat2=hs,getTranslation$1=os,getScaling=as,getRotation=ls,decompose=us,fromRotationTranslationScale=cs,fromRotationTranslationScaleOrigin=fs,fromQuat=ds,frustum=ps,perspectiveNO=ms,perspectiveZO=gs,perspectiveFromFieldOfView=ys,orthoNO=ws,orthoZO=Ss,lookAt=vs,targetTo=bs,str$5=Ms,frob=Cs,add$5=Ts,subtract$3=xs,multiplyScalar=Is,multiplyScalarAndAdd=_s,exactEquals$5=Gs,equals$5=Ps,create$4=As,clone$4=Rs,length$4=Es,fromValues$4=Os,copy$4=Ds,set$4=Fs,add$4=ks,subtract$2=Ls,multiply$4=Ns,divide$2=Bs,ceil$2=$s,floor$2=Ws,min$2=js,max$2=Vs,round$2=Us,scale$4=Hs,scaleAndAdd$2=zs,distance$2=Js,squaredDistance$2=qs,squaredLength$4=Ys,negate$2=Xs,inverse$2=Ks,normalize$4=Zs,dot$4=Qs,cross$2=ti,lerp$4=si,slerp$1=ii,hermite=ei,bezier=ni,random$3=ri,transformMat4$2=hi,transformMat3$1=oi,transformQuat$1=ai,rotateX$2=li,rotateY$2=ui,rotateZ$2=ci,angle$1=fi,zero$2=di,str$4=pi,exactEquals$4=mi,equals$4=gi,create$3=yi,clone$3=wi,fromValues$3=Si,copy$3=vi,set$3=bi,add$3=Mi,subtract$1=Ci,multiply$3=Ti,divide$1=xi,ceil$1=Ii,floor$1=_i,min$1=Gi,max$1=Pi,round$1=Ai,scale$3=Ri,scaleAndAdd$1=Ei,distance$1=Oi,squaredDistance$1=Di,length$3=Fi,squaredLength$3=ki,negate$1=Li,inverse$1=Ni,normalize$3=Bi,dot$3=$i,cross$1=Wi,lerp$3=ji,random$2=Vi,transformMat4$1=Ui,transformQuat=Hi,zero$1=zi,str$3=Ji,exactEquals$3=qi,equals$3=Yi,create$2=Xi,identity$1=Ki,setAxisAngle=Zi,getAxisAngle=Qi,getAngle=te,multiply$2=se,rotateX$1=ie,rotateY$1=ee,rotateZ$1=ne,calculateW=re,exp=he,ln=oe,pow=ae,slerp=le,random$1=ue,invert$1=ce,conjugate$1=fe,fromMat3=de,fromEuler=pe,str$2=me,equals$2=ge,create$1=ye,clone$1=we,fromValues$1=Se,fromRotationTranslationValues=ve,fromRotationTranslation=be,fromTranslation=Me,fromRotation=Ce,fromMat4=Te,copy$1=xe,identity=Ie,set$1=_e,getDual=Ge,setDual=Pe,getTranslation=Ae,translate=Re,rotateX=Ee,rotateY=Oe,rotateZ=De,rotateByQuatAppend=Fe,rotateByQuatPrepend=ke,rotateAroundAxis=Le,add$1=Ne,multiply$1=Be,scale$1=$e,lerp$1=We,invert=je,conjugate=Ve,normalize$1=Ue,str$1=He,exactEquals$1=ze,equals$1=Je,create=qe,clone=Ye,fromValues=Xe,copy=Ke,set=Ze,add=Qe,subtract=tn,multiply=sn,divide=en,ceil=nn,floor=rn,min=hn,max=on,round=an,scale=un,scaleAndAdd=cn,distance=fn,squaredDistance=dn,length=pn,squaredLength=mn,negate=gn,inverse=yn,normalize=wn,dot=Sn,cross=vn,lerp=bn,random=Mn,transformMat2=Cn,transformMat2d=Tn,transformMat3=xn,transformMat4=In,rotate=_n,angle=Gn,zero=Pn,str=An,exactEquals=Rn,equals=En,EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random,ANGLE_ORDER="zyx",degree=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),common={__proto__:null,EPSILON:EPSILON,get h(){return ARRAY_TYPE},o:RANDOM,l:ANGLE_ORDER,u:e,m:n,equals:h},mul$8=C,sub$6=E,mat2=Object.freeze({__proto__:null,create:u,clone:p,S:m,identity:g,v:y,set:w,M:S,C:v,T:b,I:M,multiply:C,rotate:T,scale:x,_:I,G:_,P:G,A:P,R:A,add:R,O:E,D:O,equals:D,F:F,L:k,mul:mul$8,sub:sub$6}),mul$7=H,sub$5=st,mat2d=Object.freeze({__proto__:null,create:L,clone:N,S:B,identity:$,v:W,set:j,C:V,I:U,multiply:H,rotate:z,scale:J,translate:q,_:Y,G:X,N:K,P:Z,A:Q,add:tt,O:st,F:it,L:et,D:nt,equals:rt,mul:mul$7,sub:sub$5}),mul$6=yt,sub$4=Rt,mat3=Object.freeze({__proto__:null,create:ht,B:ot,clone:at,S:lt,v:ut,set:ct,identity:ft,M:dt,C:pt,T:mt,I:gt,multiply:yt,translate:wt,rotate:St,scale:vt,N:bt,_:Mt,G:Ct,$:Tt,W:xt,j:It,V:_t,P:Gt,A:Pt,add:At,O:Rt,F:Et,L:Ot,D:Dt,equals:Ft,mul:mul$6,sub:sub$4}),perspective=ms,ortho=ws,mul$5=zt,sub$3=xs,mat4=Object.freeze({__proto__:null,create:kt,clone:Lt,S:Nt,v:Bt,set:$t,identity:Wt,M:jt,C:Vt,T:Ut,I:Ht,multiply:zt,translate:Jt,scale:qt,rotate:Yt,U:Xt,H:Kt,J:Zt,N:Qt,G:ts,_:ss,Y:is,X:es,K:ns,Z:rs,tt:hs,st:os,it:as,et:ls,nt:us,rt:cs,ht:fs,W:ds,ot:ps,lt:ms,perspective:perspective,ut:gs,ct:ys,ft:ws,dt:ortho,gt:Ss,yt:vs,wt:bs,P:Ms,A:Cs,add:Ts,O:xs,F:Is,L:_s,D:Gs,equals:Ps,mul:mul$5,sub:sub$3}),sub$2=Ls,mul$4=Ns,div$2=Bs,dist$2=Js,sqrDist$2=qs,len$4=Es,sqrLen$4=Ys,t=As(),forEach$2=function(s,i,e,n,r,h){var o,a;for(i||(i=3),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2];return s},vec3=Object.freeze({__proto__:null,create:As,clone:Rs,length:Es,v:Os,S:Ds,set:Fs,add:ks,O:Ls,multiply:Ns,St:Bs,ceil:$s,floor:Ws,min:js,max:Vs,round:Us,scale:Hs,vt:zs,bt:Js,Mt:qs,Ct:Ys,Tt:Xs,inverse:Ks,normalize:Zs,xt:Qs,It:ti,_t:si,Gt:ii,Pt:ei,At:ni,random:ri,Rt:hi,Et:oi,Ot:ai,U:li,H:ui,J:ci,angle:fi,Dt:di,P:pi,D:mi,equals:gi,sub:sub$2,mul:mul$4,div:div$2,Ft:dist$2,kt:sqrDist$2,Lt:len$4,Nt:sqrLen$4,forEach:forEach$2}),sub$1=Ci,mul$3=Ti,div$1=xi,dist$1=Oi,sqrDist$1=Di,len$3=Fi,sqrLen$3=ki,forEach$1=function(){var t=yi();return function(s,i,e,n,r,h){var o,a;for(i||(i=4),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],t[3]=s[o+3],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2],s[o+3]=t[3];return s}}(),vec4=Object.freeze({__proto__:null,create:yi,clone:wi,v:Si,S:vi,set:bi,add:Mi,O:Ci,multiply:Ti,St:xi,ceil:Ii,floor:_i,min:Gi,max:Pi,round:Ai,scale:Ri,vt:Ei,bt:Oi,Mt:Di,length:Fi,Ct:ki,Tt:Li,inverse:Ni,normalize:Bi,xt:$i,It:Wi,_t:ji,random:Vi,Rt:Ui,Ot:Hi,Dt:zi,P:Ji,D:qi,equals:Yi,sub:sub$1,mul:mul$3,div:div$1,Ft:dist$1,kt:sqrDist$1,Lt:len$3,Nt:sqrLen$3,forEach:forEach$1}),clone$2=wi,fromValues$2=Si,copy$2=vi,set$2=bi,add$2=Mi,mul$2=se,scale$2=Ri,dot$2=$i,lerp$2=ji,length$2=Fi,len$2=length$2,squaredLength$2=ki,sqrLen$2=squaredLength$2,normalize$2=Bi,exactEquals$2=qi,rotationTo=function(){var t=As(),s=Os(1,0,0),i=Os(0,1,0);return function(e,n,r){var h=Qs(n,r);return h<-.999999?(ti(t,s,n),len$4(t)<1e-6&&ti(t,i,n),Zs(t,t),Zi(e,t,Math.PI),e):h>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(ti(t,n,r),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+h,normalize$2(e,e))}}(),sqlerp=function(){var t=Xi(),s=Xi();return function(i,e,n,r,h,o){return le(t,e,h,o),le(s,n,r,o),le(i,t,s,2*o*(1-o)),i}}(),setAxes=function(){var t=ht();return function(s,i,e,n){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],normalize$2(s,de(s,t))}}(),quat=Object.freeze({__proto__:null,create:Xi,identity:Ki,Bt:Zi,$t:Qi,Wt:te,multiply:se,U:ie,H:ee,J:ne,jt:re,exp:he,Vt:oe,pow:ae,Gt:le,random:ue,C:ce,Ut:fe,Ht:de,zt:pe,P:me,clone:clone$2,v:fromValues$2,S:copy$2,set:set$2,add:add$2,mul:mul$2,scale:scale$2,xt:dot$2,_t:lerp$2,length:length$2,Lt:len$2,Ct:squaredLength$2,Nt:sqrLen$2,normalize:normalize$2,D:exactEquals$2,equals:ge,Jt:rotationTo,qt:sqlerp,Yt:setAxes}),getReal=copy$2,setReal=copy$2,mul$1=Be,dot$1=dot$2,length$1=length$2,len$1=length$1,squaredLength$1=squaredLength$2,sqrLen$1=squaredLength$1,quat2=Object.freeze({__proto__:null,create:ye,clone:we,v:Se,Xt:ve,Z:be,N:Me,_:Ce,B:Te,S:xe,identity:Ie,set:_e,Kt:getReal,Zt:Ge,Qt:setReal,ts:Pe,st:Ae,translate:Re,U:Ee,H:Oe,J:De,ss:Fe,es:ke,ns:Le,add:Ne,multiply:Be,mul:mul$1,scale:$e,xt:dot$1,_t:We,C:je,Ut:Ve,length:length$1,Lt:len$1,Ct:squaredLength$1,Nt:sqrLen$1,normalize:Ue,P:He,D:ze,equals:Je}),len=pn,sub=tn,mul=sn,div=en,dist=fn,sqrDist=dn,sqrLen=mn,forEach=function(){var t=qe();return function(s,i,e,n,r,h){var o,a;for(i||(i=2),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],r(t,t,h),s[o]=t[0],s[o+1]=t[1];return s}}(),vec2=Object.freeze({__proto__:null,create:qe,clone:Ye,v:Xe,S:Ke,set:Ze,add:Qe,O:tn,multiply:sn,St:en,ceil:nn,floor:rn,min:hn,max:on,round:an,scale:un,vt:cn,bt:fn,Mt:dn,length:pn,Ct:mn,Tt:gn,inverse:yn,normalize:wn,xt:Sn,It:vn,_t:bn,random:Mn,rs:Cn,hs:Tn,Et:xn,Rt:In,rotate:_n,angle:Gn,Dt:Pn,P:An,D:Rn,equals:En,Lt:len,sub:sub,mul:mul,div:div,Ft:dist,kt:sqrDist,Nt:sqrLen,forEach:forEach}),globalThis.ls=common,globalThis.ls.us=mat2,globalThis.ls.cs=mat2d,globalThis.ls.fs=mat3,globalThis.ls.ds=mat4,globalThis.ls.ps=quat,globalThis.ls.gs=quat2,globalThis.ls.ys=vec2,globalThis.ls.ws=vec3,globalThis.ls.Ss=vec4}var t,EPSILON,ARRAY_TYPE,RANDOM,ANGLE_ORDER,degree,common,mul$8,sub$6,mat2,mul$7,sub$5,mat2d,mul$6,sub$4,mat3,perspective,ortho,mul$5,sub$3,mat4,sub$2,mul$4,div$2,dist$2,sqrDist$2,len$4,sqrLen$4,forEach$2,vec3,sub$1,mul$3,div$1,dist$1,sqrDist$1,len$3,sqrLen$3,forEach$1,vec4,clone$2,fromValues$2,copy$2,set$2,add$2,mul$2,scale$2,dot$2,lerp$2,length$2,len$2,squaredLength$2,sqrLen$2,normalize$2,exactEquals$2,rotationTo,sqlerp,setAxes,quat,getReal,setReal,mul$1,dot$1,length$1,len$1,squaredLength$1,sqrLen$1,quat2,len,sub,mul,div,dist,sqrDist,sqrLen,forEach,vec2,setMatrixArrayType,toRadian,equals$9,create$8,clone$8,copy$8,identity$5,fromValues$8,set$8,transpose$2,invert$5,adjoint$2,determinant$3,multiply$8,rotate$4,scale$8,fromRotation$4,fromScaling$3,str$8,frob$3,LDU,add$8,subtract$6,exactEquals$8,equals$8,multiplyScalar$3,multiplyScalarAndAdd$3,create$7,clone$7,copy$7,identity$4,fromValues$7,set$7,invert$4,determinant$2,multiply$7,rotate$3,scale$7,translate$3,fromRotation$3,fromScaling$2,fromTranslation$3,str$7,frob$2,add$7,subtract$5,multiplyScalar$2,multiplyScalarAndAdd$2,exactEquals$7,equals$7,create$6,fromMat4$1,clone$6,copy$6,fromValues$6,set$6,identity$3,transpose$1,invert$3,adjoint$1,determinant$1,multiply$6,translate$2,rotate$2,scale$6,fromTranslation$2,fromRotation$2,fromScaling$1,fromMat2d,fromQuat$1,normalFromMat4,projection,str$6,frob$1,add$6,subtract$4,multiplyScalar$1,multiplyScalarAndAdd$1,exactEquals$6,equals$6,create$5,clone$5,copy$5,fromValues$5,set$5,identity$2,transpose,invert$2,adjoint,determinant,multiply$5,translate$1,scale$5,rotate$1,rotateX$3,rotateY$3,rotateZ$3,fromTranslation$1,fromScaling,fromRotation$1,fromXRotation,fromYRotation,fromZRotation,fromRotationTranslation$1,fromQuat2,getTranslation$1,getScaling,getRotation,decompose,fromRotationTranslationScale,fromRotationTranslationScaleOrigin,fromQuat,frustum,perspectiveNO,perspectiveZO,perspectiveFromFieldOfView,orthoNO,orthoZO,lookAt,targetTo,str$5,frob,add$5,subtract$3,multiplyScalar,multiplyScalarAndAdd,exactEquals$5,equals$5,create$4,clone$4,length$4,fromValues$4,copy$4,set$4,add$4,subtract$2,multiply$4,divide$2,ceil$2,floor$2,min$2,max$2,round$2,scale$4,scaleAndAdd$2,distance$2,squaredDistance$2,squaredLength$4,negate$2,inverse$2,normalize$4,dot$4,cross$2,lerp$4,slerp$1,hermite,bezier,random$3,transformMat4$2,transformMat3$1,transformQuat$1,rotateX$2,rotateY$2,rotateZ$2,angle$1,zero$2,str$4,exactEquals$4,equals$4,create$3,clone$3,fromValues$3,copy$3,set$3,add$3,subtract$1,multiply$3,divide$1,ceil$1,floor$1,min$1,max$1,round$1,scale$3,scaleAndAdd$1,distance$1,squaredDistance$1,length$3,squaredLength$3,negate$1,inverse$1,normalize$3,dot$3,cross$1,lerp$3,random$2,transformMat4$1,transformQuat,zero$1,str$3,exactEquals$3,equals$3,create$2,identity$1,setAxisAngle,getAxisAngle,getAngle,multiply$2,rotateX$1,rotateY$1,rotateZ$1,calculateW,exp,ln,pow,slerp,random$1,invert$1,conjugate$1,fromMat3,fromEuler,str$2,equals$2,create$1,clone$1,fromValues$1,fromRotationTranslationValues,fromRotationTranslation,fromTranslation,fromRotation,fromMat4,copy$1,identity,set$1,getDual,setDual,getTranslation,translate,rotateX,rotateY,rotateZ,rotateByQuatAppend,rotateByQuatPrepend,rotateAroundAxis,add$1,multiply$1,scale$1,lerp$1,invert,conjugate,normalize$1,str$1,exactEquals$1,equals$1,create,clone,fromValues,copy,set,add,subtract,multiply,divide,ceil,floor,min,max,round,scale,scaleAndAdd,distance,squaredDistance,length,squaredLength,negate,inverse,normalize,dot,cross,lerp,random,transformMat2,transformMat2d,transformMat3,transformMat4,rotate,angle,zero,str,exactEquals,equals,tmpPoint1,tmpPoint2,tmpLine1,tmpLine2,lineInt,lineSegmentsIntersect,triangleArea,isLeft,isLeftOn,isRight,isRightOn,collinear,sqdist,polygonAt,polygonClear,polygonAppend,polygonMakeCCW,polygonReverse,polygonIsReflex,polygonCanSee,polygonCanSee2,polygonCopy,polygonGetCutEdges,polygonDecomp,polygonSlice,polygonIsSimple,getIntersectionPoint,polygonQuickDecomp,polygonRemoveCollinearPoints,polygonRemoveDuplicatePoints,scalar_eq,points_eq,ReadBrandList,RunTest,GetWindowsNTVersionName,s,a,c,i,l,f,d,r,a,o,arrayFlat,assertFail,isValidTypeChange,logDefendedObjectWarning,CheckDefendedObjectsUsedCorrectly,getObjectPropertySet,VerifyObjectPropertiesConsistent,isNegativeZero,padTwoDigits,hueToRGB,RequireStringOrNumber,SetNewCallback,DoAsyncifiedWork,DoNextAsyncifiedJob,ClearTimeCache,CheckActiveIdleTimeouts,lookupHtmlEntity,bbToHtmlReplacerFunc,IsWordBreakWhiteSpace,IsOpeningCJKPunctiationChar,IsContinuingCJKPunctuationChar,WordBreakTrimEnd,IsNewline,PlaneFromPoints,IsInFrontOfPlane,IsPointInFrontOfPlane,interpolateQuad,GetFormatSpecifiers,fillOrStrokeRect,ptToPx,getOffsetParam,CheckPendingPolls,SortZOrderList,GetDispatcher,MakeIWorldInstanceClass,GetDispatcher,GetTimelineState,GetTimelineState,GetTweenState,IsStaticTextureDataType,getActual,GetTypeFromFileExtension,AddScript,SortByInstLastCachedZIndex,SortByInstLastCachedZIndex,SortByInstZElevation,vec3EqualsXYZ,MaybePrepareLayerDraw,SortSolArray,IsSolArrayIdentical,NoActions,WrapIndex,GetExpressionFunc,EvalParams,EvalParams,GetInst,GetWorldInfo,GetInst_SDKv2,GetWorldInfo_SDKv2,GetObjectClass,GetLayer,CollMemory_Add,CollMemory_Remove,CollMemory_RemoveInstance,CollMemory_Get,DoOverlapCondition,FinishCollisionConditionPicking,FinishCollisionCondition,PickByUID_Normal,PickByUID_Inverted,GetNextParamMap,ValidateInternalAPIToken,ForEachOrdered_SortInstances,SortZOrderList,SortInstancesByValue,CopyBinaryFileSync,IsExpressionType,GetSdkInstance,ModeToDCType,InterpNetValue,CloneDrawable,ResizeArray,DoForEachTrigger,CompareValues,GetKeyboardSdkInstance,StringFromCharCode,GetTouchSdkInstance,GetMouseSdkInstance,WrapModeToStr,SortFacesToDrawByDist,sqDistanceTo3D,distanceTo3D,lerp3d,lerp3d2,GetParticleEngine,randomOffset,GetAudioSdkInstance,GetAudioDOMInterface,RunLengthDecode,accelerate,getIndexForEase,ValidateTags,SetObjectTypeCollisionsEnabled,UnwrapIWorldInstance,CloneVec2,SplitConvexPolysOver8Points,SplitConvexPoly,unaryminus,bothNumbers,add,subtract,multiply,divide,mod,pow,and,or;{let On=function(t,s,i){i=i||0;var e,n,r,h,o,a,l,u=[0,0];return e=t[1][1]-t[0][1],n=t[0][0]-t[1][0],r=e*t[0][0]+n*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],a=h*s[0][0]+o*s[0][1],rr(l=e*o-h*n,0,i)||(u[0]=(o*r-n*a)/l,u[1]=(e*a-h*r)/l),u},Dn=function(t,s,i,e){var n=s[0]-t[0],r=s[1]-t[1],h=e[0]-i[0],o=e[1]-i[1];if(h*r-o*n===0)return!1;var a=(n*(i[1]-t[1])+r*(t[0]-i[0]))/(h*r-o*n),l=(h*(t[1]-i[1])+o*(i[0]-t[0]))/(o*n-h*r);return a>=0&&a<=1&&l>=0&&l<=1},Fn=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},kn=function(t,s,i){return Fn(t,s,i)>0},Ln=function(t,s,i){return Fn(t,s,i)>=0},Nn=function(t,s,i){return Fn(t,s,i)<0},Bn=function(t,s,i){return Fn(t,s,i)<=0},$n=function(t,s,i,e){if(e){var n=tmpPoint1,r=tmpPoint2;n[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=i[0]-s[0],r[1]=i[1]-s[1];var h=n[0]*r[0]+n[1]*r[1],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return Math.acos(h/(o*a))<e}return 0===Fn(t,s,i)},Wn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},jn=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},Vn=function(t){t.length=0},Un=function(t,s,i,e){for(var n=i;n<e;n++)t.push(s[n])},Hn=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!kn(jn(t,s-1),jn(t,s),jn(t,s+1))&&(zn(t),!0)},zn=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},Jn=function(t,s){return Nn(jn(t,s-1),jn(t,s),jn(t,s+1))},qn=function(t,s,i){var e,n,r=tmpLine1,h=tmpLine2;if(Ln(jn(t,s+1),jn(t,s),jn(t,i))&&Bn(jn(t,s-1),jn(t,s),jn(t,i)))return!1;n=Wn(jn(t,s),jn(t,i));for(var o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&Ln(jn(t,s),jn(t,i),jn(t,o+1))&&Bn(jn(t,s),jn(t,i),jn(t,o))&&(r[0]=jn(t,s),r[1]=jn(t,i),h[0]=jn(t,o),h[1]=jn(t,o+1),e=On(r,h),Wn(jn(t,s),e)<n))return!1;return!0},Yn=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&Dn(jn(t,s),jn(t,i),jn(t,e),jn(t,e+1)))return!1;return!0},Xn=function(t,s,i,e){var n=e||[];if(Vn(n),s<i)for(var r=s;r<=i;r++)n.push(t[r]);else{for(r=0;r<=i;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},Kn=function(t){for(var s=[],i=[],e=[],n=[],r=Number.MAX_VALUE,h=0;h<t.length;++h)if(Jn(t,h))for(var o=0;o<t.length;++o)if(qn(t,h,o)){i=Kn(Xn(t,h,o,n)),e=Kn(Xn(t,o,h,n));for(var a=0;a<e.length;a++)i.push(e[a]);i.length<r&&(s=i,r=i.length,s.push([jn(t,h),jn(t,o)]))}return s},Zn=function(t){var s=Kn(t);return s.length>0?Qn(t,s):[t]},Qn=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var n=s[e],r=0;r<i.length;r++){var h=Qn(i[r],n);if(h){i.splice(r,1),i.push(h[0],h[1]);break}}return i}return n=s,e=t.indexOf(n[0]),r=t.indexOf(n[1]),-1!==e&&-1!==r&&[Xn(t,e,r),Xn(t,r,e)]},tr=function(t){var s,i=t;for(s=0;s<i.length-1;s++)for(var e=0;e<s-1;e++)if(Dn(i[s],i[s+1],i[e],i[e+1]))return!1;for(s=1;s<i.length-2;s++)if(Dn(i[0],i[i.length-1],i[s],i[s+1]))return!1;return!0},sr=function(t,s,i,e,n){n=n||0;var r=s[1]-t[1],h=t[0]-s[0],o=r*t[0]+h*t[1],a=e[1]-i[1],l=i[0]-e[0],u=a*i[0]+l*i[1],c=r*l-a*h;return rr(c,0,n)?[0,0]:[(l*o-h*u)/c,(r*u-a*o)/c]},ir=function(t,s,i,e,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,v=t;if(v.length<3)return s;if(++h>r)return console.warn("quickDecomp: max level ("+r+") reached."),s;for(var b=0;b<t.length;++b)if(Jn(S,b)){i.push(S[b]),u=c=Number.MAX_VALUE;for(var M=0;M<t.length;++M)kn(jn(S,b-1),jn(S,b),jn(S,M))&&Bn(jn(S,b-1),jn(S,b),jn(S,M-1))&&(l=sr(jn(S,b-1),jn(S,b),jn(S,M),jn(S,M-1)),Nn(jn(S,b+1),jn(S,b),l)&&(f=Wn(S[b],l))<c&&(c=f,a=l,m=M)),kn(jn(S,b+1),jn(S,b),jn(S,M+1))&&Bn(jn(S,b+1),jn(S,b),jn(S,M))&&(l=sr(jn(S,b+1),jn(S,b),jn(S,M),jn(S,M+1)),kn(jn(S,b-1),jn(S,b),l)&&(f=Wn(S[b],l))<u&&(u=f,o=l,p=M));if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),b<p?(Un(y,S,b,p+1),y.push(l),w.push(l),0!==m&&Un(w,S,m,S.length),Un(w,S,0,b+1)):(0!==b&&Un(y,S,b,S.length),Un(y,S,0,p+1),y.push(l),w.push(l),Un(w,S,m,b+1));else{if(m>p&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(M=m;M<=p;++M)Ln(jn(S,b-1),jn(S,b),jn(S,M))&&Bn(jn(S,b+1),jn(S,b),jn(S,M))&&(f=Wn(jn(S,b),jn(S,M)))<d&&Yn(S,b,M)&&(d=f,g=M%t.length);b<g?(Un(y,S,b,g+1),0!==g&&Un(w,S,g,v.length),Un(w,S,0,b+1)):(0!==b&&Un(y,S,b,v.length),Un(y,S,0,g+1),Un(w,S,g,b+1))}return y.length<w.length?(ir(y,s,i,e,n,r,h),ir(w,s,i,e,n,r,h)):(ir(w,s,i,e,n,r,h),ir(y,s,i,e,n,r,h)),s}return s.push(t),s},er=function(t,s){for(var i=0,e=t.length-1;t.length>3&&e>=0;--e)$n(jn(t,e-1),jn(t,e),jn(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},nr=function(t,s){for(var i=t.length-1;i>=1;--i)for(var e=t[i],n=i-1;n>=0;--n)hr(e,t[n],s)&&t.splice(i,1)},rr=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},hr=function(t,s,i){return rr(t[0],s[0],i)&&rr(t[1],s[1],i)};lineInt=On,lineSegmentsIntersect=Dn,triangleArea=Fn,isLeft=kn,isLeftOn=Ln,isRight=Nn,isRightOn=Bn,collinear=$n,sqdist=Wn,polygonAt=jn,polygonClear=Vn,polygonAppend=Un,polygonMakeCCW=Hn,polygonReverse=zn,polygonIsReflex=Jn,polygonCanSee=qn,polygonCanSee2=Yn,polygonCopy=Xn,polygonGetCutEdges=Kn,polygonDecomp=Zn,polygonSlice=Qn,polygonIsSimple=tr,getIntersectionPoint=sr,polygonQuickDecomp=ir,polygonRemoveCollinearPoints=er,polygonRemoveDuplicatePoints=nr,scalar_eq=rr,points_eq=hr,tmpPoint1=[],tmpPoint2=[],tmpLine1=[],tmpLine2=[],self.vs={bs:Zn,Ms:ir,Cs:tr,Ts:er,xs:nr,Is:Hn}}{let ar=!1,lr=!1,ur="dev";const cr=Symbol("Construct internal API token");let fr=16;const dr=self._s=class{constructor(){throw TypeError("static class can't be instantiated")}static Gs(){if(fr<=0)throw new Error("cannot obtain internal API token");return--fr,cr}static Ps(){ar=!0}static As(){return ar}static Rs(){lr=!0}static Es(){return lr}static Os(t){ur=t}static Ds(){return ur}static Fs(){return"final"===ur}};dr.ks=!1,dr.Ls=!1,dr.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ns={}}{const pr=self._s;pr.Bs=class{constructor(t){this.$s=t,this.Ws=new Map,this.js()}js(){let t=this.$s;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const s=t.split("&");for(const t of s)this.Vs(t)}Vs(t){if(!t)return;if(!t.includes("="))return void this.Ws.set(t,null);const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Ws.set(i,e)}Us(){for(const t of this.Ws)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Hs(t){return this.Ws.has(t)}zs(t){const s=this.Ws.get(t);return void 0===s?null:s}Js(){history.replaceState("",document.title,location.pathname+location.search)}qs(t){this.$s=t,this.Ws.clear(),this.js()}},pr.Ys=new pr.Bs(location.search),pr.Xs=new pr.Bs(location.hash),pr.Ys.Hs("perf")&&(pr.Ks=!0),"dev"!==pr.Ys.zs("mode")&&pr.Os("final")}{let mr=function(t){const s=parseFloat(t);return wr.get(s)||(s>=13?"11":"NT "+t)};GetWindowsNTVersionName=mr;const gr=self._s,yr="(unknown)";gr.Zs={Qs:yr,ti:yr,si:yr,ii:yr,ei:NaN,ni:yr,ri:"browser",hi:!0,oi:!1,ai:!1,li:!1,ci:async()=>{}};const wr=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),Sr=navigator.userAgent,vr=navigator.userAgentData;if(vr&&vr.brands.length>0){let Mr=function(t){let s="",i="",e="",n="";for(const r of t){const t=Cr.get(r.brand);!s&&t&&(s=t,i=r.version);const h=Tr.get(r.brand);!e&&h&&(e=h,n=r.version)}s||"Chromium"!==e||(gr.Zs.si="Chromium",gr.Zs.ii=n),gr.Zs.si=s||yr,gr.Zs.ii=i||yr,gr.Zs.ni=e||yr};ReadBrandList=Mr,gr.Zs.Qs=vr.platform,gr.Zs.oi=vr.mobile,gr.Zs.hi=!gr.Zs.oi;const Cr=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),Tr=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);Mr(vr.brands);let xr=!1;gr.Zs.ci=async()=>{if(!xr)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);Mr(t.fullVersionList),"Windows"===gr.Zs.Qs?gr.Zs.ti=mr(t.platformVersion):gr.Zs.ti=t.platformVersion,xr=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let Ir=function(t,s){const i=Array.isArray(t)?t:[t];for(const t of i){const i=t.exec(Sr);if(i){s(i);break}}};RunTest=Ir,Ir(/windows\s+nt\s+([\d\.]+)/i,t=>{gr.Zs.Qs="Windows";const s=t[1];gr.Zs.ti=mr(s)}),Ir(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{gr.Zs.Qs="macOS",gr.Zs.ti=t[1].replace(/_/g,".")}),Ir(/CrOS/,()=>{gr.Zs.Qs="Chrome OS"}),Ir(/linux|openbsd|freebsd|netbsd/i,()=>{gr.Zs.Qs="Linux"}),Ir(/android/i,()=>{gr.Zs.Qs="Android"}),Ir(/android\s+([\d\.]+)/i,t=>{gr.Zs.Qs="Android",gr.Zs.ti=t[1]}),gr.Zs.Qs===yr&&(Ir(/(iphone|ipod|ipad)/i,t=>{gr.Zs.Qs="iOS"}),Ir([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{gr.Zs.Qs="iOS",gr.Zs.ti=t[1].replace(/_/g,".")}));const _r=/chrome\//i.test(Sr),Gr=/chromium\//i.test(Sr),Pr=/edg\//i.test(Sr),Ar=/OPR\//.test(Sr),Rr=/nwjs/i.test(Sr),Er=/safari\//i.test(Sr),Or=/webkit/i.test(Sr);Pr||Ar||Ir(/chrome\/([\d\.]+)/i,t=>{gr.Zs.si="Chrome",gr.Zs.ii=t[1],gr.Zs.ni="Chromium"}),Ir(/edg\/([\d\.]+)/i,t=>{gr.Zs.si="Edge",gr.Zs.ii=t[1],gr.Zs.ni="Chromium"}),Ir(/OPR\/([\d\.]+)/,t=>{gr.Zs.si="Opera",gr.Zs.ii=t[1],gr.Zs.ni="Chromium"}),Ir(/chromium\/([\d\.]+)/i,t=>{gr.Zs.si="Chromium",gr.Zs.ii=t[1],gr.Zs.ni="Chromium"}),Ir(/nwjs\/[0-9.]+/i,t=>{gr.Zs.si="NW.js",gr.Zs.ii=t[1],gr.Zs.ni="Chromium",gr.Zs.ri="nwjs"}),Ir(/firefox\/([\d\.]+)/i,t=>{gr.Zs.si="Firefox",gr.Zs.ii=t[1],gr.Zs.ni="Gecko"}),!Er||_r||Gr||Pr||Ar||Rr||(gr.Zs.si="Safari",gr.Zs.ni="WebKit",Ir(/version\/([\d\.]+)/i,t=>{gr.Zs.ii=t[1]}),Ir(/crios\/([\d\.]+)/i,t=>{gr.Zs.si="Chrome for iOS",gr.Zs.ii=t[1]}),Ir(/fxios\/([\d\.]+)/i,t=>{gr.Zs.si="Firefox for iOS",gr.Zs.ii=t[1]}),Ir(/edgios\/([\d\.]+)/i,t=>{gr.Zs.si="Edge for iOS",gr.Zs.ii=t[1]})),gr.Zs.ni===yr&&Or&&(gr.Zs.ni="WebKit"),"Android"===gr.Zs.Qs&&"Safari"===gr.Zs.si&&(gr.Zs.si="Stock");const Dr=new Set(["Windows","macOS","Linux","Chrome OS"]).has(gr.Zs.Qs)||"nwjs"===gr.Zs.ri;gr.Zs.hi=Dr,gr.Zs.oi=!Dr}"Chrome"===gr.Zs.si&&"browser"===gr.Zs.ri&&/wv\)/.test(Sr)&&(gr.Zs.ri="webview"),"nwjs"!==gr.Zs.ri&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(gr.Zs.ri="webapp"),gr.Zs.ei=parseFloat(gr.Zs.ii);const br="macOS"===gr.Zs.Qs&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2;br&&(gr.Zs.Qs="iOS",gr.Zs.ti=gr.Zs.ii,gr.Zs.hi=!1,gr.Zs.oi=!0,gr.Zs.li=!0),gr.Zs.ai="macOS"===gr.Zs.Qs||"iOS"===gr.Zs.Qs}{let Fr=function(t){return new Promise((s,i)=>{t.onsuccess=()=>s(t.result),t.onerror=()=>i(t.error)})},kr=function(t){return new Promise((s,i)=>{t.oncomplete=()=>s(),t.onerror=()=>i(t.error),t.onabort=()=>i(t.error)})},Lr=function(t,s){return Jr(t,s)},Nr=function(t,s){return Jr(t,s,!0)},Br=function(t){$r(t);let s=Ur.get(t);return s instanceof Promise||(s=qr(t),Ur.set(t,s),s.catch(s=>Ur.delete(t))),s},$r=function(t){if("string"!=typeof t)throw new TypeError("expected string")},Wr=function(t,s){const i=t.objectStore(Vr).openCursor();return new Promise(t=>{const e=[];i.onsuccess=i=>{const n=i.target.result;if(n){switch(s){case"entries":e.push([n.key,n.value]);break;case"keys":e.push(n.key);break;case"values":e.push(n.value)}n.continue()}else t(e)}})};s=Fr,a=kr,c=Lr,i=Nr,l=Br,f=$r,d=Wr;const jr=2,Vr="keyvaluepairs",Ur=new Map,Hr="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,zr="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function Jr(t,s,i=!1,e=!0){const n=await Br(t);try{return s(n.transaction([Vr],i?"readwrite":"readonly"))}catch(n){if(e&&"InvalidStateError"===n.name)return Ur.delete(t),Jr(t,s,i,!1);throw n}}async function qr(t){$r(t);const s=indexedDB.open(t,jr);return s.addEventListener("upgradeneeded",s=>{try{s.target.result.createObjectStore(Vr)}catch(s){console.error(`Failed to create objectstore for database ${t}`,s)}}),Fr(s)}class Yr{constructor(t){$r(t),this.name=t}async ready(){await Br(this.name)}set(t,s){return $r(t),Nr(this.name,async i=>{const e=Fr(i.objectStore(Vr).put(s,t)),n=kr(i);await Promise.all([n,e])})}get(t){return $r(t),Lr(this.name,async s=>{const i=Fr(s.objectStore(Vr).get(t)),e=kr(s),[n,r]=await Promise.all([e,i]);return r})}delete(t){return $r(t),Nr(this.name,async s=>{const i=Fr(s.objectStore(Vr).delete(t)),e=kr(s);await Promise.all([e,i])})}clear(){return Nr(this.name,async t=>{const s=Fr(t.objectStore(Vr).clear()),i=kr(t);await Promise.all([i,s])})}keys(){return Lr(this.name,async t=>{let s;s=zr?Fr(t.objectStore(Vr).getAllKeys()):Wr(t,"keys");const i=kr(t),[e,n]=await Promise.all([i,s]);return n})}values(){return Lr(this.name,async t=>{let s;s=Hr?Fr(t.objectStore(Vr).getAll()):Wr(t,"values");const i=kr(t),[e,n]=await Promise.all([i,s]);return n})}entries(){return Lr(this.name,async t=>{const s=Wr(t,"entries"),i=kr(t),[e,n]=await Promise.all([i,s]);return n})}}self.fi=Yr}{let Xr=function(t){throw new Error(`"${t}" is not implemented`)},Kr=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},Zr=function(t){return"object"==typeof t?new Promise(s=>{const{port1:i,port2:e}=new MessageChannel;e.onmessage=t=>s(t.data),i.postMessage(t)}):Promise.resolve(t)};r=Xr,a=Kr,o=Zr;const Qr=self.fi,th=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class sh{constructor(t){this.di=t,this.pi=!this.di,this.pi||"undefined"!=typeof indexedDB||(this.pi=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.mi=new Map}gi(t){if(!this.pi)for(const s of th)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.pi=!0;break}}async yi(t){const s=this.mi.get(t),i=await Zr(s);return void 0===i?null:i}async wi(t,s){s=await Zr(s),this.mi.set(t,s)}Si(t){this.mi.delete(t)}bi(){this.mi.clear()}Mi(){return Array.from(this.mi.keys())}Ci(){return this.pi}Ti(){return this.mi}xi(t){this.mi=t}async getItem(t,s){if(Kr(s),this.pi)return await this.yi(t);let i;try{i=await this.di.get(t)}catch(s){return this.gi(s),this.pi?await this.yi(t):(console.error(`Error reading '${t}' from storage, returning null: `,s),null)}return void 0===i?null:i}async setItem(t,s,i){if(Kr(i),void 0===s&&(s=null),this.pi)await this.wi(t,s);else try{await this.di.set(t,s)}catch(i){if(this.gi(i),!this.pi)throw i;await this.wi(t,s)}}async removeItem(t,s){if(Kr(s),this.pi)this.Si(t);else try{await this.di.delete(t)}catch(s){this.gi(s),this.pi?this.Si(t):console.error(`Error removing '${t}' from storage: `,s)}}async clear(t){if(Kr(t),this.pi)this.bi();else try{await this.di.clear()}catch(t){this.gi(t),this.pi?this.bi():console.error("Error clearing storage: ",t)}}async keys(t){if(Kr(t),this.pi)return this.Mi();let s=[];try{s=await this.di.keys()}catch(t){if(this.gi(t),this.pi)return this.Mi();console.error("Error getting storage keys: ",t)}return s}ready(t){return Kr(t),this.pi?Promise.resolve(!0):this.di.ready()}Ii(t){if(t._i)return new sh(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new Qr(s);return new sh(i)}}length(t){Xr("localforage.length()")}key(t,s){Xr("localforage.key()")}iterate(t,s){Xr("localforage.iterate()")}Gi(t){Xr("localforage.setDriver()")}config(t){Xr("localforage.config()")}Pi(t){Xr("localforage.defineDriver()")}Ai(){Xr("localforage.driver()")}supports(t){Xr("localforage.supports()")}dropInstance(){Xr("localforage.dropInstance()")}}self.localforage=new sh(new Qr("localforage"))}{const ih=self._s;if(ih.Ri={},ih.Ri.Ei=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),ih.Ri.Oi="undefined"!=typeof HTMLDialogElement,ih.Ri.Di=!!self.requestIdleCallback,ih.Ri.ImageBitmap=!!self.createImageBitmap,ih.Ri.ImageBitmapOptions=!1,ih.Ri.Fi=!1,ih.Ri.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{ih.Ri.ImageBitmapOptions=!0}).catch(()=>{ih.Ri.ImageBitmapOptions=!1})}catch(eh){ih.Ri.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{ih.Ri.Fi=10===t.width&&10===t.height}).catch(()=>{ih.Ri.Fi=!1})}catch(nh){ih.Ri.Fi=!1}}if(ih.Ri.ki=!(!navigator.clipboard||!navigator.clipboard.readText),ih.Ri.Li=!(!navigator.permissions||!navigator.permissions.query),ih.Ri.Ni=!1,ih.Ri.Li){const rh={name:"clipboard-read"};navigator.permissions.query(rh).then(()=>{ih.Ri.Ni=!0}).catch(()=>{ih.Ri.Ni=!1})}ih.Ri.Bi=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),ih.Ri.$i="undefined"!=typeof Proxy,ih.Ri.Wi="undefined"!=typeof document&&void 0!==document.createElement("a").download,ih.Ri.ji="function"==typeof fetch,ih.Ri.Vi=!!(self.isSecureContext&&"Opera"!==ih.Zs.si&&navigator.storage&&navigator.storage.persist),ih.Ri.Ui=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),ih.Ri.Hi=(()=>{if("undefined"==typeof document)return!1;if("iOS"===ih.Zs.Qs)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),ih.Ri.ImageDecoder=void 0!==self.ImageDecoder,ih.Ri.zi=!!self.VideoEncoder,ih.Ri.Ji=!!self.showOpenFilePicker,ih.Ri.Yi=!!self.queryLocalFonts,ih.Ri.UserActivation=!!navigator.userActivation,ih.Ri.Xi=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const s=t.getContext("2d");s.fillStyle="blue",s.fillRect(0,0,32,32);let i=null;try{t.convertToBlob?i=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(i=await new Promise(s=>t.toBlob(s,"image/webp",1))),ih.Ri.Xi=i&&"image/webp"===i.type}catch(t){ih.Ri.Xi=!1}})()}{const hh=self._s;if(!String.prototype.trimStart){const oh=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(oh,"")}}if(!String.prototype.trimEnd){const ah=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(ah,"")}}if(String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(hh.Ki(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),!Array.prototype.flat){let lh=function(t,s){return t.reduce((t,i)=>s>0&&Array.isArray(i)?(Array.prototype.push.apply(t,lh(i,s-1)),t):(t.push(i),t),[])};arrayFlat=lh,Array.prototype.flat=function(t=1){return lh(this,t)}}Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((t,s)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((s,i)=>t({usage:s,quota:i}),s))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let uh=function(t){let s="Assertion failure: "+t+"\n\nStack trace:\n"+ch.Zi();console.error(s)};assertFail=uh;const ch=self._s;self.assert=function(t,s){t||uh(s)}}{const fh=self._s,dh=self.Ns;fh.Qi=function(t){return"number"==typeof t},fh.te=function(t){return fh.Qi(t)&&isFinite(t)},fh.se=function(t){if(!fh.Qi(t))throw new TypeError("expected number")},fh.ie=function(t){fh.ee(t)},fh.ne=function(t,s,i){if(!fh.Qi(t)||isNaN(t)||s>t||i<t)throw new RangeError("number outside of range")},fh.re=function(...t){for(let s of t);},fh.he=function(t){if(!fh.te(t))throw new TypeError("expected finite number")},fh.oe=function(t){fh.ee(t)},fh.ae=function(...t){for(let s of t);},fh.le=function(t){return"string"==typeof t},fh.ue=function(t){if(!fh.le(t))throw new TypeError("expected string")},fh.ce=function(t){fh.ee(t)},fh.fe=function(...t){for(let s of t);},fh.de=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},fh.pe=function(t){if(!fh.de(t))throw new TypeError("expected simple object")},fh.me=function(t){if(!fh.ee(t)&&!fh.de(t))throw new TypeError("expected simple object")},fh.ge=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},fh.ye=function(t){if(!fh.ge(t))throw new TypeError("expected object")},fh.we=function(t){fh.ee(t)},fh.Se=function(...t){for(let s of t);},fh.ve=function(t){return fh.be(t,Blob)&&"string"==typeof t.name},fh.Me=function(t){if(!fh.ve(t))throw new TypeError("expected file")},fh.Ce=function(t){fh.ee(t)},fh.Te=function(t){return Array.isArray(t)},fh.xe=function(t){if(!fh.Te(t))throw new TypeError("expected array")},fh.Ie=function(t){fh.ee(t)},fh._e=function(...t){for(let s of t);},fh.Ge=function(t){return!(!fh.Te(t)||t.length&&!fh.Te(t[0]))},fh.Pe=function(t){if(!fh.Ge(t))throw new TypeError("expected 2d array");for(let s of t)if(!fh.Te(s))throw new TypeError("expected 2d array")},fh.Ae=function(t){fh.ee(t)},fh.Re=function(t){return"function"==typeof t},fh.Ee=function(t,s){if(!fh.Re(t))throw new TypeError("expected function");if(!fh.ee(s)&&t!==s)throw new TypeError("expected same function reference")},fh.Oe=function(t){fh.ee(t)},fh.De=function(...t){for(let s of t);},fh.Fe=function(t,...s){if(!fh.Re(t))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let i of s)if(!fh.ee(i)&&t===i)return;throw new TypeError("expected same function reference")},fh.ke=function(...t){if(!fh.ee(t))for(let s of t);},fh.Le=function(t,s){return t instanceof s},fh.Ne=function(t,...s){for(let i of s)if(fh.Le(t,i))return!0;return!1},fh.Be=function(t,s){if(!fh.Le(t,s))throw new TypeError("unexpected type")},fh.$e=function(t,s){fh.ee(t)},fh.We=function(t,...s){for(let t of s);},fh.je=function(t,...s){if(!fh.Ne(t,...s))throw new TypeError("unexpected type")},fh.Ve=function(t,...s){if(!fh.ee(t)&&!fh.Ne(t,...s))throw new TypeError("unexpected type")},fh.Ue=function(t,s){for(let i of t)if(!fh.Le(i,s))return!1;return!0},fh.He=function(t){for(let s of t)if(!fh.te(s))return!1;return!0},fh.ze=function(t,s){for(let s of t);},fh.Je=function(t,s){if(!fh.ee(t))for(let s of t);},fh.qe=function(t,s){if(!fh.ee(t))for(let s of t);},fh.Ye=function(t,...s){for(let s of t);},fh.Xe=function(t,...s){if(!fh.ee(t))for(let s of t);},fh.Ke=function(t,s){return!(fh.ee(t)||!fh.le(t.nodeName))&&(!s||fh.Ze(t.nodeName,s))},fh.Qe=function(t,s){if(fh.ee(t)||!fh.le(t.nodeName))throw new TypeError("expected DOM node");if(s&&!fh.Ze(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},fh.tn=function(t,s){fh.ee(t)},fh.sn=function(t,s){return!(fh.ee(t)||!fh.le(t.tagName))&&(!s||fh.Ze(t.tagName,s))},fh.en=function(t,s){if(fh.ee(t)||!fh.le(t.tagName))throw new TypeError("expected HTML element");if(s&&!fh.Ze(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},fh.nn=function(t,s){fh.ee(t)},fh.rn=function(t){return fh.sn(t,"img")||fh.sn(t,"canvas")||fh.sn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},fh.hn=function(t){if(!fh.rn(t))throw new TypeError("expected drawable")},fh.an=function(t){fh.ee(t)},fh.ln=function(t){return t instanceof ImageData||fh.rn(t)},fh.un=function(t){if(!fh.ln(t))throw new TypeError("expected drawable or image data")},fh.cn=function(t){if(!fh.ee(t)&&!fh.ln(t))throw new TypeError("expected drawable or image data")},fh.fn=function(t){return"string"==typeof t||fh.dn&&t instanceof fh.dn||t instanceof fh.pn},fh.mn=function(t){if(!fh.fn(t))throw new TypeError("expected string-like")},fh.gn=function(t){fh.ee(t)},fh.yn=function(...t){for(let s of t);},fh.wn=function(){throw new Error("must be overridden")},fh.Sn=function(){throw new Error("not yet implemented")},fh.vn=function(t){return t.constructor===function*(){}.constructor},fh.bn=function(t){if(!fh.vn(t))throw new Error("expected generator function")},fh.Mn=function(t){return"function"===t[Symbol.iterator]},fh.Cn=function(t){if(!fh.Mn(t))throw new Error("expected iterable")},fh.Tn=function(t){return!fh.ee(t)},fh.ee=function(t){return null==t},fh.xn=function(t){let s=t[0].constructor;for(let i of t)if(i.constructor!==s)return!1;return s},fh.In=function(t,s){for(let i of t)if(!(i instanceof s))return!1;return!0};const ph=Object.getPrototypeOf(Uint8Array);fh._n=function(t){return fh.Le(t,ph)},fh.Gn=function(t){},fh.Pn=function(t){fh.An(t,ph)},fh.Rn=function(t,...s){if(!fh.En(t,...s))throw new TypeError("unexpected type")},fh.En=function(t,...s){for(const i of s)if(fh.be(t,i))return!0;return!1},fh.An=function(t,s){if(!fh.be(t,s))throw new TypeError("unexpected type")},fh.be=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},dh.se=fh.se,dh.ie=fh.ie,dh.he=fh.he,dh.oe=fh.oe,dh.ue=fh.ue,dh.ce=fh.ce,dh.ye=fh.ye,dh.we=fh.we,dh.xe=fh.xe,dh.Ie=fh.Ie,dh.Ee=fh.Ee,dh.Oe=fh.Oe,dh.Be=fh.Be,dh.$e=fh.$e,dh.ee=fh.ee}{let mh=function(t,s){let i=vh.getType(t),e=vh.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},gh=function(t){console.warn("[Defence] "+t+" @",vh.Zi())},yh=function(){if(Gh=-1,Ch.size>0||Th.size>0){let t=[...new Set([...Ch.keys()].map(t=>vh.getName(t)))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),Ch.clear(),Th.clear()}},wh=function(t){let s=new Set;for(let i in t)s.add(i);return s},Sh=function(t,s){let i=wh(s),e=Ph.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);vh.On(s,[...i]),s.length&&console.warn(`[Defence] '${vh.getName(t)}' constructor creates inconsistent properties: ${s.join(", ")}`)}else Ph.set(t,i)};isValidTypeChange=mh,logDefendedObjectWarning=gh,CheckDefendedObjectsUsedCorrectly=yh,getObjectPropertySet=wh,VerifyObjectPropertiesConsistent=Sh;const vh=self._s,bh=new Map;let Mh;vh.Dn=function(t,s){console.log(`%c${t}`,`font-weight: bold; color:${s}`)},vh.Fn=function(t,...s){bh.has(t)||bh.set(t,-1),-1===bh.get(t)&&bh.set(t,requestAnimationFrame(()=>{console.log(`%c${t}`,"font-weight: bold",...s),bh.set(t,-1)}))},vh.kn=function(t){performance.mark(t),Mh||(Mh=new Map),Mh.has(t)||Mh.set(t,{Ln:0,total:0,Nn:0,Bn:1,toString:function(){return`${t} :: current => ${this.Ln.toPrecision(3)} :: average => ${this.Nn.toPrecision(3)} :: calls => ${this.Bn}`}})},vh.$n=function(t){performance.measure(`measure-${t}`,t);const s=performance.getEntriesByName(`measure-${t}`)[0],i=Mh.get(t);i.Ln=s.duration,i.total+=i.Ln,i.Nn=i.total/i.Bn,console.log(i.toString()),i.Bn++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},vh.Zi=function(){return(new Error).stack},vh.Wn=function(){},vh.cast=function(t,s){return t&&t instanceof s?t:null},vh.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":vh.Qi(t)?"<number>":vh.le(t)?"<string>":vh.Te(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":vh.Re(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},vh.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},vh.range=function*(t,s){if(!isFinite(Math.abs(t-s)))throw new Error("Invalid parameters");if(t>s)for(let i=t-1;i>=s;i--)yield i;else for(let i=t;i<s;i++)yield i};let Ch=new Map,Th=new Map,xh=new WeakMap,Ih=new WeakMap;vh.jn={};const _h=new Set(["then","splice"]);vh.jn.get=function(t,s){return s in t||"symbol"==typeof s||_h.has(s)||gh(`Accessed missing property '${s}' from defended object '${vh.getName(t)}', returning undefined`),Ih.has(t)&&"symbol"!=typeof s&&!_h.has(s)&&gh(`Accessed property '${s}' on a released object '${vh.getName(t)}'\nObject was originally released at: ${Ih.get(t)})\nCall stack at access: `),t[s]},vh.jn.set=function(t,s,i){return s in t||Ch.has(t)||gh(`Set non-existent property '${s}' to '${i}' on defended object '${vh.getName(t)}'`),mh(t[s],i)||Ch.has(t)||gh(`Set '${vh.getType(t[s])}' property '${s}' to type '${vh.getType(i)}' on defended object '${vh.getName(t)}'`),Ih.has(t)&&gh(`Set property '${s}' on a released object '${vh.getName(t)}'\nObject was originally released at: ${Ih.get(t)})\nCall stack at access: `),t[s]=i,!0},vh.jn.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${vh.getName(t)}'`)},vh.jn.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${vh.getName(t)}'`)},vh.jn.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${vh.getName(t)}'`)};let Gh=-1;vh.Vn=class{constructor(){if(!vh.Ls||!vh.Ri.$i)return;let t=new.target,s=Object.create(t.prototype),i=new Proxy(s,vh.jn);return Ch.set(s,i),Th.set(i,s),xh.set(i,s),-1===Gh&&(Gh=requestAnimationFrame(yh)),i}},vh.Un=function(t){if(vh.Ls&&vh.Ri.$i&&t instanceof vh.Vn){if(!Th.has(t))return t;let s=Th.get(t);return Th.delete(t),Ch.delete(s),t}return vh.ks?Object.seal(t):t},vh.Hn=function(t,...s){let i;try{i=new t(...s)}catch(t){throw Th.clear(),Ch.clear(),t}return vh.Ls&&Sh(t,i),vh.Un(i)},vh.zn=function(t){let s=xh.get(t);s&&Ih.set(s,vh.Zi())},vh.Jn=function(t){let s=xh.get(t);return!!s&&!!Ih.get(s)};let Ph=new Map;vh.qn=class{constructor(t){this.Yn="",t&&this.start(t)}start(t){vh.Ks&&(this.Yn=t,performance.mark(this.Yn+"-Start"))}end(){vh.Ks&&(performance.mark(this.Yn+"-End"),performance.measure(this.Yn,this.Yn+"-Start",this.Yn+"-End"))}next(t){vh.Ks&&(this.end(),this.Yn=t,performance.mark(this.Yn+"-Start"))}}}{let Ah=function(t){return 0===t&&1/t<0};isNegativeZero=Ah;const Rh=self._s,Eh=2*Math.PI,Oh=Math.PI/180,Dh=180/Math.PI;Rh.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0===e)return i;if(t<s){const n=i-(s-t)%e;return n===i?0:n}return s+(t-s)%e},Rh.Xn=function(t,s,i,e,n){const r=i-s;return 0===r&&0===e?t:(t-s)*(n-e)/r+e},Rh.normalize=function(t,s,i){return s-i===0?1:(t-s)/(i-s)},Rh.Kn=function(t,s,i){return t<s?s:t>i?i:t},Rh.Zn=function(t){return(t%=Eh)<0&&(t+=Eh),t},Rh.Qn=function(t){return t*Oh},Rh.tr=function(t){return t*Dh},Rh.sr=function(t,s){return Math.sqrt(t*t+s*s)},Rh.ir=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},Rh.er=function(t,s,i,e){return Rh.sr(i-t,e-s)},Rh.nr=function(t,s,i,e){const n=i-t,r=e-s;return n*n+r*r},Rh.rr=function(t,s,i,e){return Math.atan2(e-s,i-t)},Rh.hr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),n=i*Math.sin(s)+e*Math.cos(s);return n>=1?0:n<=-1?Math.PI:Math.acos(n)},Rh.ar=function(t,s,i){let e=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(e*r+n*h)>i?n*r-e*h>0?Rh.Zn(t+i):Rh.Zn(t-i):Rh.Zn(s)},Rh.lr=function(t,s){let i=Math.sin(t);return Math.cos(t)*Math.sin(s)-i*Math.cos(s)<=0},Rh.ur=function(t,s,i,e=0){let n=Rh.hr(t,s);const r=Eh*e;return Rh.lr(s,t)?Rh.Zn(t+(n+r)*i):Rh.Zn(t-(n+r)*i)},Rh.cr=function(t,s,i,e=0){const n=Rh.hr(t,s),r=Eh*e;return Rh.lr(s,t)?Rh.Zn(t+(n+r)*i):Rh.Zn(t+(Eh-n+r)*i)},Rh.dr=function(t,s,i,e=0){const n=Rh.hr(t,s),r=Eh*e;return Rh.lr(s,t)?Rh.Zn(t-(-Eh+n-r)*i):Rh.Zn(t-(n+r)*i)},Rh.pr=function(t,s){const i=Rh.hr(t,s);return Rh.lr(t,s)?Rh.Zn(s-i):Rh.Zn(s+i)},Rh._t=function(t,s,i){return t+i*(s-t)},Rh.mr=function(t,s,i){return t===s?0:(i-t)/(s-t)},Rh.gr=function(t,s,i,e,n){return Rh._t(e,n,Rh.mr(t,s,i))},Rh.yr=function(t,s,i,e){return Rh._t(Rh._t(t,s,e),Rh._t(s,i,e),e)},Rh.wr=function(t,s,i,e,n){return Rh._t(Rh.yr(t,s,i,n),Rh.yr(s,i,e,n),n)},Rh.Sr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},Rh.vr=function(t){return t>0&&!(t-1&t)},Rh.br=function(t){--t;for(let s=1;s<32;s<<=1)t|=t>>s;return t+1},Rh.Mr=function(t,s){return Math.round(t*s)/s},Rh.Cr=function(t,s){return Math.floor(t*s)/s},Rh.Tr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},Rh.Ir=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},Rh.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;e>=0&&"0"===i.charAt(e);--e);return e>=0&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},Rh._r=function(t,s,i){return Rh.Kn(t,0,255)|Rh.Kn(s,0,255)<<8|Rh.Kn(i,0,255)<<16};const Fh=1024,kh=1023,Lh=16384,Nh=8191,Bh=-8192;Rh.Gr=function(t,s,i,e){return(t=Rh.Kn(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(s=Rh.Kn(Math.floor(1024*s),-8192,8191))<0&&(s+=16384),(i=Rh.Kn(Math.floor(1024*i),-8192,8191))<0&&(i+=16384),-(16384*t*16384*1024+16384*s*1024+1024*i+(e=Rh.Kn(Math.floor(1023*e),0,1023)))},Rh.Pr=function(t,s,i){return Rh.Gr(t,s,i,1)},Rh.Ar=function(t){if(t>=0)return(255&t)/255;{let s=Math.floor(-t/274877906944);return s>8191&&(s-=16384),s/1024}},Rh.Rr=function(t){if(t>=0)return((65280&t)>>8)/255;{let s=Math.floor(-t%274877906944/16777216);return s>8191&&(s-=16384),s/1024}},Rh.Er=function(t){if(t>=0)return((16711680&t)>>16)/255;{let s=Math.floor(-t%16777216/1024);return s>8191&&(s-=16384),s/1024}},Rh.Or=function(t){return Ah(t)?0:t>=0?1:Math.floor(-t%1024)/1023},Rh.Dr=function(t,s){for(t=Math.floor(t),s=Math.floor(s);0!==s;){let i=s;s=t%s,t=i}return t};const $h=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];Rh.Fr=function(t,s){if((t=Math.floor(t))===(s=Math.floor(s)))return[1,1];for(let i of $h){let e=t/i[0]*i[1];if(Math.abs(s-e)<1)return i.slice(0);if(e=t/i[1]*i[0],Math.abs(s-e)<1)return[i[1],i[0]]}let i=Rh.Dr(t,s);return[t/i,s/i]},Rh.kr=function(t,s,i,e,n,r,h,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(n,h),c=Math.max(n,h);if(l<u||a>c)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||f>m)return!1;const g=n-t+h-i,y=r-s+o-e,w=i-t,S=e-s,v=h-n,b=o-r,M=Math.abs(S*v-b*w),C=v*y-b*g;if(Math.abs(C)>M)return!1;const T=w*y-S*g;return Math.abs(T)<=M},Rh.Lr=function(t,s,i,e,n,r,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||n>d)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||h>m)return!1;const g=a-t+u-i,y=l-s+c-e,w=i-t,S=e-s,v=u-a,b=c-l,M=Math.abs(S*v-b*w),C=v*y-b*g;if(Math.abs(C)>M)return!1;const T=w*y-S*g;return Math.abs(T)<=M},Rh.Nr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=n.Br(),u=n.$r(),c=n.Wr(),f=n.jr(),d=n.Vr(),p=n.Ur(),m=n.Hr(),g=n.zr();return Rh.Lr(t,s,i,e,r,h,o,a,l,u,c,f)||Rh.Lr(t,s,i,e,r,h,o,a,c,f,d,p)||Rh.Lr(t,s,i,e,r,h,o,a,d,p,m,g)||Rh.Lr(t,s,i,e,r,h,o,a,m,g,l,u)},Rh.Jr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e);let l=0;for(let u=n.length-4;l<=u;l+=2)if(Rh.Lr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[l+2],n[l+3]))return!0;return Rh.Lr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[0],n[1])};const Wh=2,jh=1e-6;Rh.qr=function(t,s,i,e,n,r,h,o){const a=i-t,l=o-r,u=a*l-(e-s)*(h-n);if(0===u)return 2;const c=((s-e)*(h-t)+a*(o-s))/u;return 0<c&&c<1.000001?(l*(h-t)+(n-h)*(o-s))/u:2},Rh.Yr=function(t,s,i,e,n,r,h,o,a){const l=(h-n)*a,u=(o-r)*a;return Rh.qr(t,s,i,e,n-l,r-u,h+l,o+u)},Rh.Xr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,S=1/(p*y-m*m),v=(y*g-m*w)*S,b=(p*w-m*g)*S;return v>=0&&b>=0&&v+b<=1},Rh.Kr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,S=p*g-m*m,v=(g*y-m*w)/S,b=(p*w-m*y)/S;return[1-v-b,v,b]},Rh.Zr=function(t,s,i,e,n,r,h,o,a,l,u,c){return[t*e+s*h+i*l,t*n+s*o+i*u,t*r+s*a+i*c]}}{const Vh=self._s;let Uh=null,Hh="";if("undefined"!=typeof document){Uh=document;const Kh=document.querySelector("base");Hh=Kh&&Kh.hasAttribute("href")?Kh.getAttribute("href"):"",Hh&&(Hh.startsWith("/")&&(Hh=Hh.substr(1)),Hh.endsWith("/")||(Hh+="/"))}Vh.Qr=function(){return Hh},Vh.th=function(){if(!Uh)return"";const t=Uh.location;return Vh.sh(t.origin+t.pathname)+Hh},Vh.sh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},Vh.ih=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},Vh.eh=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},Vh.nh=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},Vh.rh=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},Vh.hh=function(t){return t.replace(/\\/g,"/")},Vh.oh=function(t,s){return s===(t?Vh.eh(t).slice(1):"")},Vh.ah=function(t,s){let i,e;return Vh.ve(t)&&(i=Vh.rh(t.name)),Vh.le(t)&&(i=Vh.rh(t)),Vh.ve(s)&&(e=Vh.rh(s.name)),Vh.le(s)&&(e=Vh.rh(s)),i===e},Vh.uh=function(t){t=Vh.hh(t);let s=/^\w\:\//.exec(t);s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const i=t.lastIndexOf("/")+1;let e,n="",r=t,h="";i>0&&(n=t.slice(0,i),r=t.slice(i)),e=r;const o=r.lastIndexOf(".");return o>0&&(h=r.slice(o),e=r.slice(0,-h.length)),{dir:n,fh:r,name:e,root:s,ext:h,dh:s+n+r}},Vh.ph=function(t,s){return new Promise((i,e)=>{self.setTimeout(i,t,s)})},Vh.mh=function(t){try{t()}catch(t){Vh.ks&&console.warn("Swallowed exception: ",t)}},Vh.gh=function(){},Vh.Ze=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},Vh.yh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},Vh.wh=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},Vh.Sh=function(t,s){t.length=s},Vh.bh=function(t){t&&0!==t.length&&Vh.Sh(t,0)},Vh.Mh=function(t){if(t){for(let s=0;s<t.length;s++){let i=t[s];Vh.Sh(i,0)}Vh.Sh(t,0)}},Vh.Ch=function(t,s,i){s|=0;const e=t.length;if(!(s<=e))for(let n=e;n<s;++n)t.push(i)},Vh.Th=function(t,s,i){s|=0;const e=t.length;s<e?Vh.Sh(t,s):s>e&&Vh.Ch(t,s,i)},Vh.xh=function(t,s){Vh.bh(t),Vh.On(t,s)},Vh.On=function(t,s){if(s.length<1e4)t.push(...s);else for(let i=0,e=s.length;i<e;++i)t.push(s[i])},Vh.Ih=function(t,s){if((s=Math.floor(s))<0||s>=t.length)return;let i=t.length-1;for(let e=s;e<i;++e)t[e]=t[e+1];Vh.Sh(t,i)},Vh._h=function(t,s){let i=t.indexOf(s);i>=0&&t.splice(i,1)},Vh.Gh=function(t,s){let i=t.length;if(s.length!==i)return!1;for(let e=0;e<i;++e)if(t[e]!==s[e])return!1;return!0},Vh.Ph=function(t,s){let i=[],e=0;for(let n=0,r=t.length;n<r;++n){let r=t[n];s(r)?i.push(r):(t[e]=r,++e)}return Vh.Sh(t,e),i},Vh.Ah=function(t,s){const i=t.length;let e=0;for(let i=0,n=t.length;i<n;++i){let n=t[i];s.has(n)||(t[e++]=n)}return Vh.Sh(t,e),i-e},Vh.Rh=function(t,s){return t===Math.floor(t)&&t>=0&&t<s.length},Vh.Eh=function(t,s){if(!Vh.Rh(t,s))throw new RangeError("array index out of bounds")},Vh.Oh=function(t){return t.slice()},Vh.Dh=function(t,s){let i=[];for(let e of t)if(Vh.ge(e)){let t=s(e);if(!t)throw new Error("missing clone");if(t.constructor!==e.constructor)throw new Error("object is not a clone");i.push(t)}else Vh.Te(e)?i.push(Vh.Dh(e,s)):i.push(e);return i},Vh.Fh=function(t){let s=[];for(let i of t)s.push(i.slice());return s},Vh.kh=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},Vh.Lh=function(t,s,i){const e=new Set;for(const n of t.values())s(n)&&(i?e.add(i(n)):e.add(n));return e},Vh.Nh=function(t,s){return t.union?t.union(s):new Set([...t,...s])},Vh.Bh=function(t,s){for(const i of s)t.add(i);return t},Vh.$h=function(t){for(let s of t)return s;return null},Vh.xor=function(t,s){return!t!=!s},Vh.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return t>i;case 5:return t>=i;default:return!1}},Vh.Wh=function(t){for(let s in t)if(t.hasOwnProperty(s))return!0;return!1},Vh.jh=function(t,s){return t.length?new Promise((i,e)=>{const n=[];let r=0,h=!1;for(let o=0,a=t.length;o<a;++o)n.push(void 0),t[o].then(e=>{h||(n[o]=e,++r,r===t.length?i(n):s(r,t.length))}).catch(t=>{h=!0,e(t)})}):Promise.resolve([])};let zh=[];Vh.Vh=function(t){zh.push(t)},Vh.Uh=function(){let t=0;for(let s of zh)t+=s();return Math.floor(t)};let Jh=1;const qh=new Map,Yh=new MessageChannel;Yh.port2.onmessage=function(t){const s=t.data,i=qh.get(s);qh.delete(s),i&&i(performance.now())},Vh.Hh=function(t){const s=Jh++;return qh.set(s,t),Yh.port1.postMessage(s),s},Vh.zh=function(t){qh.delete(t)},Vh.Jh=Vh.Hh,Vh.qh=function(){return new Promise(t=>Vh.Jh(t))};const Xh=new Set;Vh.Yh=function(t){const s=self.requestAnimationFrame(async i=>{await Vh.qh(),Xh.has(s)&&(Xh.delete(s),t(i))});return Xh.add(s),s},Vh.Xh=function(t){Xh.has(t)&&(self.cancelAnimationFrame(t),Xh.delete(t))}}{const Zh=self._s;Zh.Kh=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},Zh.Zh=function(t){return!Zh.Kh(t)},Zh.Qh=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},Zh.so=function(t,s){return fetch(t,s).then(t=>(Zh.Qh(t),t))},Zh.io=function(t){return Zh.so(t).then(t=>t.text())},Zh.eo=function(t){return Zh.so(t).then(t=>t.json())},Zh.no=function(t){return Zh.so(t).then(t=>t.blob())},Zh.ro=function(t){return Zh.so(t).then(t=>t.arrayBuffer())},Zh.ho=function(t){return new Promise((s,i)=>{const e=new Image;e.onload=()=>s(e),e.onerror=t=>i(t),e.src=t})},Zh.oo=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsArrayBuffer(t)})},Zh.ao=function(t){return"function"==typeof t.text?t.text():new Promise((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsText(t)})},Zh.lo=function(t){return Zh.ao(t).then(t=>JSON.parse(t))},Zh.uo=async function(t,s){let i=URL.createObjectURL(t);try{const t=await Zh.ho(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof t.decode&&await t.decode(),t}finally{i&&URL.revokeObjectURL(i)}},Zh.co=function(t,s){if("undefined"!=typeof document&&"function"==typeof document.createElement){const i=document.createElement("canvas");return i.width=t,i.height=s,i}return new OffscreenCanvas(t,s)},Zh.fo=function(t,s,i){if("number"!=typeof i&&(i=1),s=s||"image/png",i=Zh.Kn(i,0,1),t.convertToBlob)return t.convertToBlob({type:s,quality:i});if(t.toBlob)return new Promise(e=>t.toBlob(e,s,i));throw new Error("could not convert canvas to blob")},Zh.do=function(t,s,i){const e=Zh.co(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),Zh.fo(e,s,i)},Zh.po=function(t,s,i){if(Zh.Ri.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>Zh.do(t,s,i));if(Zh.Ri.ImageBitmap)return createImageBitmap(t).then(t=>Zh.do(t,s,i));{const e=Zh.co(t.width,t.height);return e.getContext("2d").putImageData(t,0,0),Zh.fo(e,s,i)}},Zh.mo=function(t,s){t.clear();for(const i of s)t.add(i)},Zh.yo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},Zh.wo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},Zh.So=function t(s){if("object"==typeof s&&null!==s){if(s instanceof Set)return{_c3type_:"set",data:[...s].map(s=>t(s))};if(s instanceof Map)return{_c3type_:"map",data:[...s].map(s=>[s[0],t(s[1])])};{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},Zh.vo=function t(s){if("object"==typeof s&null!==s){if("set"===s._c3type_)return new Set(s.data.map(s=>t(s)));if("map"===s._c3type_)return new Map(s.data.map(s=>[s[0],t(s[1])]));{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},Zh.bo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const n of t)"-"===n?e>0&&(i=!0):i?(s+=n.toUpperCase(),i=!1):s+=n,++e;return s},Zh.Mo=function(t){return"object"==typeof t&&"function"==typeof t.next},Zh.Co=function(t,s){const i=[];if("function"==typeof s)for(let e=0;e<t;++e)i.push(s());else for(let e=0;e<t;++e)i.push(s);return i}}{let Qh=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},to=function(t,s,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};padTwoDigits=Qh,hueToRGB=to;const so=self._s,io=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,eo=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;so.To=class{constructor(t,s,i,e){this.xo=NaN,this.Io=NaN,this._o=NaN,this.Go=NaN,this.xo=0,this.Io=0,this._o=0,this.Go=0,t instanceof so.To?this.set(t):this.Po(t||0,s||0,i||0,e||0)}Ao(t,s,i){return this.xo=+t,this.Io=+s,this._o=+i,this.Kn(),this}Po(t,s,i,e){return this.xo=+t,this.Io=+s,this._o=+i,this.Go=+e,this.Kn(),this}set(t){return this.xo=t.xo,this.Io=t.Io,this._o=t._o,this.Go=t.Go,this}S(t){return this.set(t)}add(t){this.xo+=t.xo,this.Io+=t.Io,this._o+=t._o,this.Go+=t.Go,this.Kn()}Ro(t,s,i,e=0){this.xo+=+t,this.Io+=+s,this._o+=+i,this.Go+=+e,this.Kn()}Eo(t){this.Oo(Math.max(this.xo,t.xo)-Math.min(this.xo,t.xo)),this.Do(Math.max(this.Io,t.Io)-Math.min(this.Io,t.Io)),this.Fo(Math.max(this._o,t._o)-Math.min(this._o,t._o)),this.ko(Math.max(this.Go,t.Go)-Math.min(this.Go,t.Go)),this.Kn()}Lo(t){this.xo=t.xo,this.Io=t.Io,this._o=t._o}Oo(t){this.xo=so.Kn(+t,0,1)}No(){return this.xo}Do(t){this.Io=so.Kn(+t,0,1)}Bo(){return this.Io}Fo(t){this._o=so.Kn(+t,0,1)}$o(){return this._o}ko(t){this.Go=so.Kn(+t,0,1)}Wo(){return this.Go}clone(){return so.Hn(so.To,this.xo,this.Io,this._o,this.Go)}toArray(){return[this.xo,this.Io,this._o,this.Go]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.xo,t[s++]=this.Io,t[s++]=this._o,t[s]=this.Go}Uo(t,s){const i=this.xo,e=this.Io,n=this._o,r=this.Go;for(let h=0;h<4;++h)t[s++]=i,t[s++]=e,t[s++]=n,t[s++]=r}Ho(t,s){t[s++]=this.xo,t[s++]=this.Io,t[s]=this._o}equals(t){return this.xo===t.xo&&this.Io===t.Io&&this._o===t._o&&this.Go===t.Go}zo(t){return this.xo===t.xo&&this.Io===t.Io&&this._o===t._o}Jo(t,s,i){return this.xo===t&&this.Io===s&&this._o===i}qo(t,s,i,e){return this.xo===t&&this.Io===s&&this._o===i&&this.Go===e}Yo(t,s){return t[s]===Math.fround(this.xo)&&t[s+1]===Math.fround(this.Io)&&t[s+2]===Math.fround(this._o)&&t[s+3]===Math.fround(this.Go)}Xo(t,s){return t[s]===Math.fround(this.xo)&&t[s+1]===Math.fround(this.Io)&&t[s+2]===Math.fround(this._o)}multiply(t){this.xo*=t.xo,this.Io*=t.Io,this._o*=t._o,this.Go*=t.Go}Ko(t){this.xo*=t,this.Io*=t,this._o*=t,this.Go*=t}Zo(){return this.xo*=this.Go,this.Io*=this.Go,this._o*=this.Go,this}Qo(){return this.xo/=this.Go,this.Io/=this.Go,this._o/=this.Go,this}Kn(){return this.xo=so.Kn(this.xo,0,1),this.Io=so.Kn(this.Io,0,1),this._o=so.Kn(this._o,0,1),this.Go=so.Kn(this.Go,0,1),this}ta(t){this.xo=so.Ar(t),this.Io=so.Rr(t),this._o=so.Er(t),this.Go=so.Or(t)}sa(t,s,i){return`rgb(${100*(so.te(t)?t:this.No())}%, ${100*(so.te(s)?s:this.Bo())}%, ${100*(so.te(i)?i:this.$o())}%)`}ia(t,s,i,e){return`rgba(${100*(so.te(t)?t:this.No())}%, ${100*(so.te(s)?s:this.Bo())}%, ${100*(so.te(i)?i:this.$o())}%, ${so.te(e)?e:this.Wo()})`}ea(){const t=Math.round(255*this.No()),s=Math.round(255*this.Bo()),i=Math.round(255*this.$o());return"#"+Qh(t.toString(16))+Qh(s.toString(16))+Qh(i.toString(16))}na(t){if("string"!=typeof t)return!1;let s,i,e;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Oo(s),isFinite(i)&&this.Do(i),isFinite(e)&&this.Fo(e),this.ko(1),!0}ra(){return`${Math.round(255*this.No())}, ${Math.round(255*this.Bo())}, ${Math.round(255*this.$o())}`}ha(){return[Math.round(255*this.No()),Math.round(255*this.Bo()),Math.round(255*this.$o())]}oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Do(e),isFinite(n)&&this.Fo(n),this.ko(1),!0}aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Do(e),isFinite(n)&&this.Fo(n),this.ko(1),!0}la(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Do(e),isFinite(n)&&this.Fo(n),isFinite(r)&&this.ko(r),!0}ua(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Do(e),isFinite(n)&&this.Fo(n),isFinite(r)&&this.ko(r),!0}ca(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.aa(t):this.oa(t);if(t.startsWith("rgba("))return t.includes("%")?this.ua(t):this.la(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.fa(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.aa(t):4===s.length&&this.ua(t):3===s.length?this.oa(t):4===s.length&&this.la(t)}}return this.na(t)}toJSON(){return[this.xo,this.Io,this._o,this.Go]}da(t,s,i,e){let n,r,h;if(t%=360,s=so.Kn(s,0,100),i=so.Kn(i,0,100),e=so.Kn(e,0,1),t/=360,i/=100,0==(s/=100))n=r=h=i;else{const e=i<.5?i*(1+s):i+s-i*s,o=2*i-e;n=to(o,e,t+1/3),r=to(o,e,t),h=to(o,e,t-1/3)}return this.Oo(n),this.Do(r),this.Fo(h),this.ko(e),this}fa(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=io.exec(s),e=eo.exec(s);return i&&4===i.length?(this.da(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.da(+i[1],+i[2],+i[3],+i[4]),0))}pa(){const t=this.xo,s=this.Io,i=this._o,e=this.Go;return`hsla(${so.To.ma(t,s,i)}, ${so.To.ga(t,s,i)}%, ${so.To.ya(t,s,i)}%, ${e})`}wa(){const t=this.xo,s=this.Io,i=this._o;return[so.To.ma(t,s,i),so.To.ga(t,s,i),so.To.ya(t,s,i),this.Go]}Sa(t){Array.isArray(t)&&(t.length<3||(this.xo=t[0],this.Io=t[1],this._o=t[2],t.length>=4?this.Go=t[3]:this.Go=1))}set r(t){this.Oo(t)}get r(){return this.No()}set g(t){this.Do(t)}get g(){return this.Bo()}set b(t){this.Fo(t)}get b(){return this.$o()}set a(t){this.ko(t)}get a(){return this.Wo()}va(t,s){switch(t){case 0:this.Oo(s);break;case 1:this.Do(s);break;case 2:this.Fo(s);break;case 3:this.ko(s);break;default:throw new RangeError("invalid color index")}}ba(t){switch(t){case 0:return this.No();case 1:return this.Bo();case 2:return this.$o();case 3:return this.Wo();default:throw new RangeError("invalid color index")}}static Ma(t,s){let i,e;if(Array.isArray(t))i=new so.To,i.Sa(t);else{if(!(t instanceof so.To))throw new Error("unexpected type");i=t}if(Array.isArray(s))e=new so.To,e.Sa(s);else{if(!(s instanceof so.To))throw new Error("unexpected type");e=s}return i.equals(e)}static Ca(t,s){return so.Kn(Math.max(t,s)-Math.min(t,s),0,1)}static Ta(t,s){const i=new so.To;return i.Oo(Math.max(t.xo,s.xo)-Math.min(t.xo,s.xo)),i.Do(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i.Fo(Math.max(t._o,s._o)-Math.min(t._o,s._o)),i.ko(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),i}static xa(t,s){const i=new so.To(0,0,0,1);return i.Oo(Math.max(t.xo,s.xo)-Math.min(t.xo,s.xo)),i.Do(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i.Fo(Math.max(t._o,s._o)-Math.min(t._o,s._o)),i}static ma(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;let r=0;switch(e){case t:r=(s-i)/(e-n)+(s<i?6:0);break;case s:r=(i-t)/(e-n)+2;break;case i:r=(t-s)/(e-n)+4}return Math.round(r/6*360)}static ga(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;const r=e-n,h=(e+n)/2>.5?r/(2-e-n):r/(e+n);return Math.round(100*h)}static ya(t,s,i){const e=Math.max(t,s,i),n=(e+Math.min(t,s,i))/2;return e?Math.round(100*n):0}},so.To.Ia=Object.freeze(so.Hn(so.To,1,1,1,1)),so.To._a=Object.freeze(so.Hn(so.To,0,0,0,1)),so.To.Ga=Object.freeze(so.Hn(so.To,0,0,0,0))}{const no=self._s;no.Pa=class{constructor(t,s){this.Aa=0,this.Ra=0,t instanceof no.Pa?this.S(t):this.set(t||0,s||0)}set(t,s){this.Aa=+t,this.Ra=+s}S(t){this.Aa=t.Aa,this.Ra=t.Ra}equals(t){return this.Aa===t.Aa&&this.Ra===t.Ra}Ea(t,s){return this.Aa===t&&this.Ra===s}Yo(t,s){return t[s]===Math.fround(this.Aa)&&t[s+1]===Math.fround(this.Ra)}Oa(t){this.Aa=+t}Da(){return this.Aa}Fa(t){this.Ra=+t}ka(){return this.Ra}toArray(){return[this.Aa,this.Ra]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.Aa,t[s]=this.Ra}offset(t,s){this.Aa+=+t,this.Ra+=+s}scale(t,s){this.Aa*=t,this.Ra*=s}St(t,s){this.Aa/=t,this.Ra/=s}round(){this.Aa=Math.round(this.Aa),this.Ra=Math.round(this.Ra)}floor(){this.Aa=Math.floor(this.Aa),this.Ra=Math.floor(this.Ra)}ceil(){this.Aa=Math.ceil(this.Aa),this.Ra=Math.ceil(this.Ra)}angle(){return no.rr(0,0,this.Aa,this.Ra)}La(){return this.Aa*this.Aa+this.Ra*this.Ra}length(){return no.sr(this.Aa,this.Ra)}Na(t,s){const i=this.Aa*s-this.Ra*t;this.Ra=this.Ra*s+this.Aa*t,this.Aa=i}rotate(t){0!==t&&this.Na(Math.sin(t),Math.cos(t))}Ba(t,s,i){0===t||s===this.Aa&&i===this.Ra||(this.Aa-=s,this.Ra-=i,this.Na(Math.sin(t),Math.cos(t)),this.Aa+=+s,this.Ra+=+i)}move(t,s){0!==s&&(this.Aa+=Math.cos(t)*s,this.Ra+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Aa/=t,this.Ra/=t)}Kn(t,s){this.Aa=no.Kn(this.Aa,t,s),this.Ra=no.Kn(this.Ra,t,s)}xt(t){return this.Aa*t.Aa+this.Ra*t.Ra}reverse(){this.Aa=-this.Aa,this.Ra=-this.Ra}$a(){let t=this.Aa;return this.Aa=this.Ra,this.Ra=-t,this}}}{const ro=self._s;ro.Rect=class{constructor(t,s,i,e){this.Wa=NaN,this.ja=NaN,this.Va=NaN,this.Ua=NaN,this.Wa=0,this.ja=0,this.Va=0,this.Ua=0,t instanceof ro.Rect?this.S(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.Wa=+t,this.ja=+s,this.Va=+i,this.Ua=+e}Ha(t,s,i,e){t=+t,s=+s,this.Wa=t,this.ja=s,this.Va=t+ +i,this.Ua=s+ +e}S(t){this.Wa=+t.Wa,this.ja=+t.ja,this.Va=+t.Va,this.Ua=+t.Ua}clone(){return new ro.Rect(this.Wa,this.ja,this.Va,this.Ua)}static za(t,s){const i=new ro.Rect;return i.Ja(Math.min(t.Wa,s.Wa)),i.qa(Math.min(t.ja,s.ja)),i.Ya(Math.max(t.Va,s.Va)),i.Xa(Math.max(t.Ua,s.Ua)),i}static Ka(t){return new ro.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Wa===t.Wa&&this.ja===t.ja&&this.Va===t.Va&&this.Ua===t.Ua}Za(t,s,i,e){return this.Wa===t&&this.ja===s&&this.width()===i&&this.height()===e}Yo(t,s){return t[s]===Math.fround(this.Wa)&&t[s+1]===Math.fround(this.ja)&&t[s+2]===Math.fround(this.Va)&&t[s+3]===Math.fround(this.Ua)}Ja(t){this.Wa=+t}Qa(){return this.Wa}qa(t){this.ja=+t}tl(){return this.ja}Ya(t){this.Va=+t}sl(){return this.Va}Xa(t){this.Ua=+t}il(){return this.Ua}toArray(){return[this.Wa,this.ja,this.Va,this.Ua]}jo(){return new Float64Array(this.toArray())}el(){return new DOMRect(this.Wa,this.ja,this.width(),this.height())}static nl(t){return ro.Hn(ro.Rect,t.left,t.top,t.right,t.bottom)}Vo(t,s){t[s++]=this.Wa,t[s++]=this.ja,t[s++]=this.Va,t[s]=this.Ua}rl(t,s){t[s++]=this.Wa,t[s++]=this.ja,t[s++]=this.Va,t[s++]=this.ja,t[s++]=this.Va,t[s++]=this.Ua,t[s++]=this.Wa,t[s]=this.Ua}hl(t,s,i){t[s++]=this.Wa,t[s++]=this.ja,t[s++]=i,t[s++]=this.Va,t[s++]=this.ja,t[s++]=i,t[s++]=this.Va,t[s++]=this.Ua,t[s++]=i,t[s++]=this.Wa,t[s++]=this.Ua,t[s]=i}width(){return this.Va-this.Wa}height(){return this.Ua-this.ja}ol(){return(this.Wa+this.Va)/2}al(){return(this.ja+this.Ua)/2}offset(t,s){t=+t,s=+s,this.Wa+=t,this.ja+=s,this.Va+=t,this.Ua+=s}offsetLeft(t){this.Wa+=+t}offsetTop(t){this.ja+=+t}ll(t){this.Va+=+t}ul(t){this.Ua+=+t}cl(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.ja<this.Ua?this.Wa<this.Va?this.Ua=this.ja+this.width():this.Ua=this.ja-this.width():this.Wa<this.Va?this.Ua=this.ja-this.width():this.Ua=this.ja+this.width()}fl(t,s){t=+t,s=+s,this.Wa-=t,this.ja-=s,this.Va+=t,this.Ua+=s}dl(t,s){t=+t,s=+s,this.Wa+=t,this.ja+=s,this.Va-=t,this.Ua-=s}multiply(t,s){this.Wa*=t,this.ja*=s,this.Va*=t,this.Ua*=s}St(t,s){this.Wa/=t,this.ja/=s,this.Va/=t,this.Ua/=s}pl(t){this.Wa=+t-this.Wa,this.Va=+t-this.Va}ml(t){this.ja=+t-this.ja,this.Ua=+t-this.Ua}gl(t,s){const i=this.width(),e=this.height(),n=this.Qa()+i*t,r=this.tl()+e*s;this.Ha(n-e*s,r-i*t,e,i)}yl(){const t=this.Wa;this.Wa=this.Va,this.Va=t}wl(){const t=this.ja;this.ja=this.Ua,this.Ua=t}Sl(t){const s=this.ja;this.ja=+t-this.Ua,this.Ua=+t-s}round(){this.Wa=Math.round(this.Wa),this.ja=Math.round(this.ja),this.Va=Math.round(this.Va),this.Ua=Math.round(this.Ua)}vl(){this.Wa=Math.ceil(this.Wa),this.ja=Math.ceil(this.ja),this.Va=Math.floor(this.Va),this.Ua=Math.floor(this.Ua)}bl(){this.Wa=Math.floor(this.Wa),this.ja=Math.floor(this.ja),this.Va=Math.ceil(this.Va),this.Ua=Math.ceil(this.Ua)}floor(){this.Wa=Math.floor(this.Wa),this.ja=Math.floor(this.ja),this.Va=Math.floor(this.Va),this.Ua=Math.floor(this.Ua)}ceil(){this.Wa=Math.ceil(this.Wa),this.ja=Math.ceil(this.ja),this.Va=Math.ceil(this.Va),this.Ua=Math.ceil(this.Ua)}Kn(t,s,i,e){this.Wa=Math.max(this.Wa,+t),this.ja=Math.max(this.ja,+s),this.Va=Math.min(this.Va,+i),this.Ua=Math.min(this.Ua,+e)}Ml(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.Wa=ro.Kn(this.Wa,t,i),this.ja=ro.Kn(this.ja,s,e),this.Va=ro.Kn(this.Va,t,i),this.Ua=ro.Kn(this.Ua,s,e)}normalize(){this.Wa>this.Va&&this.yl(),this.ja>this.Ua&&this.wl()}Cl(t){return!(t.Va<this.Wa||t.Ua<this.ja||t.Wa>this.Va||t.ja>this.Ua)}Tl(t,s,i){return!(t.Va+s<this.Wa||t.Ua+i<this.ja||t.Wa+s>this.Va||t.ja+i>this.Ua)}xl(t,s){return t>=this.Wa&&t<=this.Va&&s>=this.ja&&s<=this.Ua}Il(t){return t.Wa>=this.Wa&&t.ja>=this.ja&&t.Va<=this.Va&&t.Ua<=this.Ua}_l(t){t.Wa<this.Wa&&(this.Wa=+t.Wa),t.ja<this.ja&&(this.ja=+t.ja),t.Va>this.Va&&(this.Va=+t.Va),t.Ua>this.Ua&&(this.Ua=+t.Ua)}Gl(t){this.Wa=ro._t(t.Wa,t.Va,this.Wa),this.ja=ro._t(t.ja,t.Ua,this.ja),this.Va=ro._t(t.Wa,t.Va,this.Va),this.Ua=ro._t(t.ja,t.Ua,this.Ua)}}}{const ho=self._s;ho.Pl=class{constructor(t,s,i,e,n,r,h,o){this.Al=NaN,this.Rl=NaN,this.El=NaN,this.Ol=NaN,this.Dl=NaN,this.Fl=NaN,this.kl=NaN,this.Ll=NaN,this.Al=0,this.Rl=0,this.El=0,this.Ol=0,this.Dl=0,this.Fl=0,this.kl=0,this.Ll=0,t instanceof ho.Pl?this.S(t):this.set(t||0,s||0,i||0,e||0,n||0,r||0,h||0,o||0)}set(t,s,i,e,n,r,h,o){this.Al=+t,this.Rl=+s,this.El=+i,this.Ol=+e,this.Dl=+n,this.Fl=+r,this.kl=+h,this.Ll=+o}Nl(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}S(t){this.Al=t.Al,this.Rl=t.Rl,this.El=t.El,this.Ol=t.Ol,this.Dl=t.Dl,this.Fl=t.Fl,this.kl=t.kl,this.Ll=t.Ll}equals(t){return this.Al===t.Al&&this.Rl===t.Rl&&this.El===t.El&&this.Ol===t.Ol&&this.Dl===t.Dl&&this.Fl===t.Fl&&this.kl===t.kl&&this.Ll===t.Ll}Bl(t){this.Al=+t}Br(){return this.Al}$l(t){this.Rl=+t}$r(){return this.Rl}Wl(t){this.El=+t}Wr(){return this.El}jl(t){this.Ol=+t}jr(){return this.Ol}Vl(t){this.Dl=+t}Vr(){return this.Dl}Ul(t){this.Fl=+t}Ur(){return this.Fl}Hl(t){this.kl=+t}Hr(){return this.kl}zl(t){this.Ll=+t}zr(){return this.Ll}Jl(){return new DOMQuad(new DOMPoint(this.Al,this.Rl),new DOMPoint(this.El,this.Ol),new DOMPoint(this.Dl,this.Fl),new DOMPoint(this.kl,this.Ll))}static ql(t){return ho.Hn(ho.Pl,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Al,this.Rl,this.El,this.Ol,this.Dl,this.Fl,this.kl,this.Ll]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.Al,t[s++]=this.Rl,t[s++]=this.El,t[s++]=this.Ol,t[s++]=this.Dl,t[s++]=this.Fl,t[s++]=this.kl,t[s]=this.Ll}Yl(t,s,i){t[s++]=this.Al,t[s++]=this.Rl,t[s++]=i,t[s++]=this.El,t[s++]=this.Ol,t[s++]=i,t[s++]=this.Dl,t[s++]=this.Fl,t[s++]=i,t[s++]=this.kl,t[s++]=this.Ll,t[s]=i}offset(t,s){t=+t,s=+s,this.Al+=t,this.Rl+=s,this.El+=t,this.Ol+=s,this.Dl+=t,this.Fl+=s,this.kl+=t,this.Ll+=s}round(){this.Al=Math.round(this.Al),this.Rl=Math.round(this.Rl),this.El=Math.round(this.El),this.Ol=Math.round(this.Ol),this.Dl=Math.round(this.Dl),this.Fl=Math.round(this.Fl),this.kl=Math.round(this.kl),this.Ll=Math.round(this.Ll)}floor(){this.Al=Math.floor(this.Al),this.Rl=Math.floor(this.Rl),this.El=Math.floor(this.El),this.Ol=Math.floor(this.Ol),this.Dl=Math.floor(this.Dl),this.Fl=Math.floor(this.Fl),this.kl=Math.floor(this.kl),this.Ll=Math.floor(this.Ll)}ceil(){this.Al=Math.ceil(this.Al),this.Rl=Math.ceil(this.Rl),this.El=Math.ceil(this.El),this.Ol=Math.ceil(this.Ol),this.Dl=Math.ceil(this.Dl),this.Fl=Math.ceil(this.Fl),this.kl=Math.ceil(this.kl),this.Ll=Math.ceil(this.Ll)}Xl(t){this.Al=t.Wa,this.Rl=t.ja,this.El=t.Va,this.Ol=t.ja,this.Dl=t.Va,this.Fl=t.Ua,this.kl=t.Wa,this.Ll=t.Ua}Kl(t,s){0===s?this.Xl(t):this.Zl(t,Math.sin(s),Math.cos(s))}Zl(t,s,i){const e=t.Wa*s,n=t.ja*s,r=t.Va*s,h=t.Ua*s,o=t.Wa*i,a=t.ja*i,l=t.Va*i,u=t.Ua*i;this.Al=o-n,this.Rl=a+e,this.El=l-n,this.Ol=a+r,this.Dl=l-h,this.Fl=u+r,this.kl=o-h,this.Ll=u+e}Ql(t){t.set(Math.min(this.Al,this.El,this.Dl,this.kl),Math.min(this.Rl,this.Ol,this.Fl,this.Ll),Math.max(this.Al,this.El,this.Dl,this.kl),Math.max(this.Rl,this.Ol,this.Fl,this.Ll))}xl(t,s){let i=this.El-this.Al,e=this.Ol-this.Rl;const n=this.Dl-this.Al,r=this.Fl-this.Rl,h=t-this.Al,o=s-this.Rl;let a=i*i+e*e,l=i*n+e*r,u=i*h+e*o;const c=n*n+r*r,f=n*h+r*o;let d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return p>=0&&m>0&&p+m<1||(i=this.kl-this.Al,e=this.Ll-this.Rl,a=i*i+e*e,l=i*n+e*r,u=i*h+e*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d,p>=0&&m>0&&p+m<1)}ol(){return(this.Al+this.El+this.Dl+this.kl)/4}al(){return(this.Rl+this.Ol+this.Fl+this.Ll)/4}tu(t,s,i,e){return!(!this.xl(t,s)&&!this.xl(i,e))||ho.Nr(t,s,i,e,this)}su(t){let s=t.ol(),i=t.al();if(this.xl(s,i))return!0;if(s=this.ol(),i=this.al(),t.xl(s,i))return!0;const e=this.Al,n=this.Rl,r=this.El,h=this.Ol,o=this.Dl,a=this.Fl,l=this.kl,u=this.Ll;return ho.Nr(e,n,r,h,t)||ho.Nr(r,h,o,a,t)||ho.Nr(o,a,l,u,t)||ho.Nr(l,u,e,n,t)}iu(){const t=this.Al,s=this.Rl;this.Al=this.El,this.Rl=this.Ol,this.El=this.Dl,this.Ol=this.Fl,this.Dl=this.kl,this.Fl=this.Ll,this.kl=t,this.Ll=s}eu(){this.nu(0,2),this.nu(1,3),this.nu(6,4),this.nu(7,5)}ru(){this.nu(0,6),this.nu(1,7),this.nu(2,4),this.nu(3,5)}hu(){this.nu(2,6),this.nu(3,7)}nu(t,s){const i=this.ou(t);this.au(t,this.ou(s)),this.au(s,i)}ou(t){switch(t){case 0:return this.Al;case 1:return this.Rl;case 2:return this.El;case 3:return this.Ol;case 4:return this.Dl;case 5:return this.Fl;case 6:return this.kl;case 7:return this.Ll;default:throw new RangeError("invalid quad point index")}}au(t,s){switch(s=+s,t){case 0:this.Al=s;break;case 1:this.Rl=s;break;case 2:this.El=s;break;case 3:this.Ol=s;break;case 4:this.Dl=s;break;case 5:this.Fl=s;break;case 6:this.kl=s;break;case 7:this.Ll=s;break;default:throw new RangeError("invalid quad point index")}}St(t,s){this.Al/=t,this.Rl/=s,this.El/=t,this.Ol/=s,this.Dl/=t,this.Fl/=s,this.kl/=t,this.Ll/=s}}}{const oo=self._s,ao=self.assert,lo=[0,0,1,0,1,1,0,1],uo=oo.Hn(oo.Pl);oo.lu=class extends oo.Vn{constructor(t,s=!0){super(),t||(t=lo),this.uu=Float64Array.from(t),this.cu=new oo.Rect,this.fu=!0,this.du=s}zn(){}pu(){return this.uu}mu(){return this.uu.length/2}gu(t){this.uu.length===t.length?this.uu.set(t):this.uu=Float64Array.from(t),this.fu=!0}yu(){this.gu(lo)}S(t){this.gu(t.uu)}wu(){this.fu=!0}Su(){if(!this.fu)return;const t=this.uu;let s=t[0],i=t[1],e=s,n=i;for(let r=0,h=t.length;r<h;r+=2){const h=t[r],o=t[r+1];h<s&&(s=h),h>e&&(e=h),o<i&&(i=o),o>n&&(n=o)}this.cu.set(s,i,e,n),this.fu=!1}Xl(t,s,i){let e=this.uu;8!==e.length&&(e=new Float64Array(8),this.uu=e),e[0]=t.Qa()-s,e[1]=t.tl()-i,e[2]=t.sl()-s,e[3]=t.tl()-i,e[4]=t.sl()-s,e[5]=t.il()-i,e[6]=t.Qa()-s,e[7]=t.il()-i,this.cu.S(t),0===s&&0===i||this.cu.offset(-s,-i),this.fu=!1}vu(t,s,i){uo.S(t),uo.offset(s,i),this.gu(uo.toArray()),this.fu=!0}transform(t,s,i){let e=0,n=1;0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.bu(t,s,e,n)}bu(t,s,i,e){const n=this.uu;for(let r=0,h=n.length;r<h;r+=2){const h=r+1,o=n[r]*t,a=n[h]*s;n[r]=o*e-a*i,n[h]=a*e+o*i}this.fu=!0}offset(t,s){const i=this.uu;for(let e=0,n=i.length;e<n;e+=2)i[e]+=t,i[e+1]+=s}xl(t,s){const i=this.uu;if(t===i[0]&&s===i[1])return!0;this.Su();const e=this.cu,n=e.Qa()-110,r=e.tl()-101,h=e.sl()+131,o=e.il()+120;let a=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0;n<t?(a=n,u=t):(a=t,u=n),r<s?(l=r,c=s):(l=s,c=r),h<t?(f=h,p=t):(f=t,p=h),o<s?(d=o,m=s):(d=s,m=o);let g=0,y=0;for(let e=0,w=i.length;e<w;e+=2){const S=(e+2)%w,v=i[e],b=i[e+1],M=i[S],C=i[S+1];oo.Lr(n,r,t,s,a,u,l,c,v,b,M,C)&&++g,oo.Lr(h,o,t,s,f,p,d,m,v,b,M,C)&&++y}return g%2==1||y%2==1}Mu(t,s,i){const e=t.uu,n=this.uu;if(this.xl(e[0]+s,e[1]+i))return!0;if(t.xl(n[0]-s,n[1]-i))return!0;for(let t=0,r=n.length;t<r;t+=2){const h=(t+2)%r,o=n[t],a=n[t+1],l=n[h],u=n[h+1];let c=0,f=0,d=0,p=0;o<l?(c=o,d=l):(c=l,d=o),a<u?(f=a,p=u):(f=u,p=a);for(let t=0,n=e.length;t<n;t+=2){const r=(t+2)%n,h=e[t]+s,m=e[t+1]+i,g=e[r]+s,y=e[r+1]+i;if(oo.Lr(o,a,l,u,c,d,f,p,h,m,g,y))return!0}}return!1}tu(t,s,i,e,n,r){if(this.xl(i-t,e-s))return!0;if(this.xl(n-t,r-s))return!0;let h=0,o=0,a=0,l=0;i<n?(h=i,a=n):(h=n,a=i),e<r?(o=e,l=r):(o=r,l=e);const u=this.uu;for(let c=0,f=u.length;c<f;c+=2){const d=(c+2)%f,p=u[c]+t,m=u[c+1]+s,g=u[d]+t,y=u[d+1]+s;if(oo.Lr(i,e,n,r,h,a,o,l,p,m,g,y))return!0}return!1}eu(t){const s=this.uu;for(let i=0,e=s.length;i<e;i+=2)s[i]=2*t-s[i];this.fu=!0}ru(t){const s=this.uu;for(let i=0,e=s.length;i<e;i+=2){const e=i+1;s[e]=2*t-s[e]}this.fu=!0}hu(){const t=this.uu;for(let s=0,i=t.length;s<i;s+=2){const i=s+1,e=t[s];t[s]=t[i],t[i]=e}this.fu=!0}Cu(){const t=this.uu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i];return s/this.mu()}Tu(){const t=this.uu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i+1];return s/this.mu()}xu(){return this.uu}Iu(){return this.mu()}_u(){return this.du}}}{const co=self._s;co.Gu=class extends co.Vn{constructor(t){if(super(),this.Pu=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}zn(){this.Au(),this.Pu=null}Ru(){return 0===this.Pu.size}Au(){const t=this.Pu;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){const e=this.Pu;let n=e.get(t);n||(n=new Map,e.set(t,n)),n.set(s,i)}zs(t,s){const i=this.Pu.get(t);return i?i.get(s):i}Hs(t,s){const i=this.Pu.get(t);return!!i&&i.has(s)}Eu(t,s){const i=this.Pu,e=i.get(t);if(!e)return!1;const n=e.delete(s);return n&&0===e.size&&i.delete(t),n}Ou(t){const s=this.Pu,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[i,e]of s.entries())e.delete(t)&&0===e.size&&s.delete(i)}Du(){let t=0;for(const s of this.Pu.values())t+=s.size;return t}*values(){for(const t of this.Pu.values())yield*t.values()}*Fu(){for(const[t,s]of this.Pu.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Pu.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const fo=self._s;fo.ku=class extends fo.Vn{constructor(){super(),this.Lu=new Set,this.Nu=[],this.Bu=!1}zn(){this.Au()}Au(){this.Lu.clear(),fo.bh(this.Nu),this.Bu=!1}$u(t){this.Lu.has(t)||(this.Lu.add(t),this.Bu||this.Nu.push(t))}Hs(t){return this.Lu.has(t)}Eu(t){this.Lu.delete(t)&&(this.Bu=!0)}Du(){return this.Lu.size}Ru(){return 0===this.Lu.size}Wu(){return this.Bu&&(this.ju(),this.Bu=!1),this.Nu}ju(){const t=this.Nu;fo.bh(t);for(const s of this.Lu)t.push(s)}}}{const po=self._s,mo=new Map,go=new Map,yo=new Map,wo=new Map,So=new Map,vo=new Map,bo=new Map,Mo=new Map,Co=new Map;Co.set("linear","noease"),Co.set("default","noease");const To=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],xo=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Io=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.Vu=class t{constructor(){}static Uu(){return"default"}static Hu(){return"noease"}static zu(t){return Io.get(t)}static Ju(s,...i){let e,n;this.qu(),s?(yo.has(s)||yo.set(s,new Map),e=yo.get(s),n=[...e.keys()].filter(i=>!t.Yu(i,s)||t.Yu(i,s).transition.Xu())):(e=So,n=[...e.keys()]);const r=n.sort();return[...go.keys()].concat(r).filter(t=>!i.includes(t))}static Ku(){this.qu();const t=[...So.keys()];return t.sort(),[...go.keys()].concat(t)}static Zu(){this.qu();const t=[...So.keys()];return t.sort(),t}static Qu(t){for(const s of To)if(self.lang(`ui.bars.timeline.eases.${s}`)===t)return!0;for(const s of xo)if(self.lang(`ui.bars.timeline.short-eases.${s}`)===t)return!0}static tc(t){return this.qu(),[...go.keys()].includes(t)}static sc(s){const i=Co.get(s);return i?mo.get(i):t.tc(s)?mo.get(s):bo.has(s)?bo.get(s):void 0}static ec(t){return this.qu(),Mo.get(t)}static nc(s,i){this.qu();const e=t.sc(s);if(e)return e;if(!i)throw new Error("missing ease function");return yo.get(i).get(s)}static Yu(t,s){this.qu();const i=wo.get(s);if(i)return i.get(t)}static rc(s,i){return this.qu(),!!t.sc(s)||!!yo.get(i).get(s)}static hc(s){this.qu();return t.sc(s)||So.get(s)}static oc(t){return this.qu(),vo.get(t)}static ac(t){return this.qu(),this.Ku()[t]}static lc(t,s){return this.qu(),this.Ju(s).indexOf(t)}static uc(t){return this.lc(t)}static qu(){0===mo.size&&(this.cc("default",()=>{}),this.cc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.cc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.cc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.cc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.cc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.cc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.cc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.cc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.cc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.cc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.cc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.cc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.cc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.cc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.cc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.cc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.cc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.cc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.cc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.cc("easeinquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.cc("easeoutquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.cc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.cc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.cc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.cc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.cc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.cc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.cc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.cc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.cc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.cc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.fc("cubicbezier",this.dc),this.fc("spline",this.mc))}static cc(s,i,e=!1){if("function"==typeof i)t.yc(s,i,"predefined");else{if(!po.Te(i))throw new Error("unexpected arguments");if(self.wc){const n=po.Hn(self.wc,s,e);n.Sc(i),t.yc(s,(t,s,i,e)=>n.vc(t,s,i,e),"predefined"),Mo.set(s,n)}else{const n=po.Hn(po.bc,[s,i.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);n.Mc(e),t.yc(s,(t,s,i,e)=>n.vc(t,s,i,e),"predefined")}}}static fc(s,i){t.yc(s,i,"private")}static Cc(s,i,e,n){this.qu(),t.yc(s,i,"custom",e,n)}static Tc(t,s){if(this.tc(t))return;if([...bo.keys()].includes(t))return;const i=yo.get(s);i&&i.delete(t);const e=wo.get(s);e&&e.delete(t)}static yc(t,s,i,e,n){switch(i){case"predefined":mo.set(t,s),go.set(t,s);break;case"custom":e?(yo.has(e)||yo.set(e,new Map),wo.has(e)||wo.set(e,new Map),yo.get(e).set(t,s),wo.get(e).set(t,n)):(So.set(t,s),vo.set(t,n));break;case"private":mo.set(t,s),bo.set(t,s);break;default:throw new Error("unexpected ease mode")}}static xc(t,s,i,e){return 0===e?s:i*t/e+s}static dc(t,s,i,e,n){return s+3*t*(i-s)+3*t**2*(s+e-2*i)+t**3*(n-s+3*i-3*e)}static mc(t,s,i,e,n,r,h,o,a,l){if(e===n&&r===h)return t;const u=No(t,s,e,r,o,l),c=Oo(i,n,h,a),f=Do(i,n,h,a),d=Fo(i,n,h,a);return ko(u,c,f,d)}static Ic(t,s,i,e){const n=[],r=Oo(t,s,i,e),h=Do(t,s,i,e),o=Fo(t,s,i,e);for(let t=0;t<_o;++t){const s=ko(t*Go,r,h,o);n.push(s)}return n}};const _o=11,Go=1/(_o-1),Po=4,Ao=.01,Ro=1e-7,Eo=10,Oo=(t,s,i,e)=>e-3*i+3*s-t,Do=(t,s,i,e)=>3*i-6*s+3*t,Fo=(t,s,i,e)=>3*(s-t),ko=(t,s,i,e)=>((s*t+i)*t+e)*t,Lo=(t,s,i,e)=>3*s*t*t+2*i*t+e,No=(t,s,i,e,n,r)=>{if(1==t)return 1;let h=0,o=1,a=r[o],l=_o-1;for(r[_o-1];o!=l&&a<=t;)o++,a=r[o],h+=Go;o--,a=r[o];let u=h+(t-a)/(r[o+1]-a)*Go;const c=Oo(s,i,e,n),f=Do(s,i,e,n),d=Fo(s,i,e,n),p=Lo(u,c,f,d);if(0===p)return u;if(p>=.01){for(let s=0;s<4;++s)u-=(ko(u,c,f,d)-t)/Lo(u,c,f,d);return u}{let s,i,e=h,n=h+Go,r=0;do{u=e+(n-e)/2;let h=ko(u,c,f,d)-t;h>0?n=u:e=u,s=Math.abs(h)>1e-7,i=++r<10}while(s&&i);return u}}}{let Bo=function(t){$o.le(t)};RequireStringOrNumber=Bo;const $o=self._s;$o._c=class{constructor(t){this.Gc=[],this.Yn=t||"",this.Pc=0}zn(){this.Au(),this.Gc=null}Ac(){return this.Yn}Au(){$o.Mh(this.Gc),this.Pc=0}Rc(){return this.Pc}Ec(t=Math.random()*this.Rc()){let s=0;for(const[i,e]of this.Gc)if(s+=i,t<s)return e;return 0}Oc(){return!!this.Gc.length}Dc(t,s){Bo(s),this.Pc+=t,this.Gc.push([t,s])}Fc(t,s){Bo(s);const i=0===t;for(let e=0;e<this.Gc.length;e++){const n=this.Gc[e],r=i||n[0]===t,h=n[1]===s;if(r&&h){this.Gc.splice(e,1),this.Pc-=n[0];break}}}kc(){return JSON.stringify(this.Gc)}static Lc(t,s){const i=new $o._c(s),e=JSON.parse(t);for(const t of e){const s=t[0],e=t[1];i.Dc(s,e)}return i}}}{const Wo=self._s;let jo=0;Wo.Nc=class{constructor(t,s){this.Bc=t,this.$c=s,this.Wc=jo++,this.Bc.jc("runtime","screen-reader-text",{type:"create",id:this.Wc,text:this.$c})}zn(){this.Bc.jc("runtime","screen-reader-text",{type:"release",id:this.Wc}),this.Bc=null,this.$c="",this.Wc=-1}Vc(t){this.$c!==t&&(this.$c=t,this.Bc.jc("runtime","screen-reader-text",{type:"update",id:this.Wc,text:this.$c}))}}}{const Vo=self._s;Vo.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Uc=!1,this.Hc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Hc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Uc=!0}}}{const Uo=self._s,Ho=self.assert;Uo.Event.zc=class extends Uo.Vn{constructor(t){super(),this.Jc=t,this.qc=[],this.Yc=new Set,this.Xc=[],this.Kc=new Set,this.Zc=0,this.Qc=[]}zn(){this.Zc>0||(Uo.bh(this.qc),this.Yc.clear(),Uo.bh(this.Xc),this.Kc.clear(),Uo.bh(this.Qc),Uo.zn(this))}tf(t,s){if(this.sf())this.Qc.push({if:"add",ef:t,capture:s});else if(s){if(this.Yc.has(t))return;this.qc.push(t),this.Yc.add(t)}else{if(this.Kc.has(t))return;this.Xc.push(t),this.Kc.add(t)}}nf(t,s){this.sf()?this.Qc.push({if:"remove",ef:t,capture:s}):s?this.Yc.has(t)&&(this.Yc.delete(t),Uo._h(this.qc,t)):this.Kc.has(t)&&(this.Kc.delete(t),Uo._h(this.Xc,t))}rf(){return!this.qc.length&&!this.Xc.length}sf(){return this.Zc>0}hf(){const t=new Set,s=new Set;for(const i of this.Qc)if("add"===i.if)this.tf(i.ef,i.capture),i.capture?s.delete(i.ef):t.delete(i.ef);else{if("remove"!==i.if)throw new Error("invalid op");i.capture?(this.Yc.delete(i.ef),s.add(i.ef)):(this.Kc.delete(i.ef),t.add(i.ef))}Uo.Ah(this.Xc,t),Uo.Ah(this.qc,s),Uo.bh(this.Qc)}af(t){this.lf();let s=!1;for(let i=0,e=this.qc.length;i<e;++i)if(this.qc[i](t),t.Uc){s=!0;break}if(!s)for(let s=0,i=this.Xc.length;s<i&&(this.Xc[s](t),!t.Uc);++s);return this.uf(),!t.defaultPrevented}cf(t){this.lf();for(let s=0,i=this.qc.length;s<i;++s)this.qc[s](t);for(let s=0,i=this.Xc.length;s<i;++s)this.Xc[s](t);return this.uf(),!0}lf(){this.Zc++}uf(){this.Zc--,0===this.Zc&&this.Qc.length>0&&this.hf()}ff(t){t?this.lf():this.uf()}df(t){let s=[];for(let i=0,e=this.qc.length;i<e;++i){let e=this.qc[i];s.push(Uo.pf(()=>e(t)))}for(let i=0,e=this.Xc.length;i<e;++i){let e=this.Xc[i];s.push(Uo.pf(()=>e(t)))}return Promise.all(s).then(()=>!t.defaultPrevented)}mf(t){const s=[];this.lf();for(let i=0,e=this.qc.length;i<e;++i){const e=this.qc[i](t);e instanceof Promise&&s.push(e)}for(let i=0,e=this.Xc.length;i<e;++i){const e=this.Xc[i](t);e instanceof Promise&&s.push(e)}return this.uf(),s.length?Promise.all(s).then(()=>!t.defaultPrevented):!t.defaultPrevented}async gf(t){return await this.mf(t)}async yf(t){this.lf();for(let s=0,i=this.qc.length;s<i;++s){const i=this.qc[s](t);i instanceof Promise&&await i}for(let s=0,i=this.Xc.length;s<i;++s){const i=this.Xc[s](t);i instanceof Promise&&await i}return this.uf(),!t.defaultPrevented}*wf(t){this.lf();for(let s=0,i=this.qc.length;s<i;++s){const i=this.qc[s](t);Uo.Mo(i)&&(yield*i)}for(let s=0,i=this.Xc.length;s<i;++s){const i=this.Xc[s](t);Uo.Mo(i)&&(yield*i)}this.uf()}}}{const zo=self._s;zo.Event.Sf=class extends zo.Vn{constructor(){super(),this.vf=new Map,this.bf=!1}zn(){if(this.bf)throw new Error("already released");this.Mf(),this.bf=!0,zo.zn(this)}Jn(){return this.bf}Mf(){if(this.vf){for(let t of this.vf.values())t.zn();this.vf.clear()}}Cf(t,s){let i=this.vf.get(t);return i||(s?(i=zo.Hn(zo.Event.zc,t),this.vf.set(t,i),i):null)}Tf(t){return this.vf.has(t)}addEventListener(t,s,i){this.Cf(t,!0).tf(s,!!i)}removeEventListener(t,s,i){let e=this.Cf(t,!1);e&&(e.nf(s,!!i),e.rf()&&this.vf.delete(t))}dispatchEvent(t){const s=this.Cf(t.type,!1);return!s||(t.cancelable?s.af(t):s.cf(t))}xf(t){const s=this.Cf(t.type,!1);return s?(t.Hc=!0,s.df(t)):Promise.resolve(!0)}async If(t){const s=this.Cf(t.type,!1);if(!s)return!0;this.vf.delete(t.type),t.Hc=!0;const i=await s.df(t);return s.zn(),i}async _f(t){const s=this.Cf(t.type,!1);return!s||await s.gf(t)}Gf(t){const s=this.Cf(t.type,!1);return!s||s.mf(t)}async Pf(t){const s=this.Cf(t.type,!1);return!s||await s.yf(t)}Af(t){const s=this.Cf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.wf(t)}ff(t){for(const s of this.vf.values())s.ff(t)}}}{let Jo=function(t){ia=ta&&0===ea?requestIdleCallback(qo,{timeout:35}):setTimeout(qo,ea>0?1:t)},qo=function(t){if(ia=-1,!sa.length)return;let s=performance.now(),i=s,e=0,n=0;do{Yo(sa.shift()),i=performance.now(),++e,n=(i-s)/e*1.1}while(sa.length&&(ta&&0===ea&&void 0!==t?n<t.timeRemaining():i-s+n<12));if(-1===ia&&sa.length){let t=i-s;Jo(Math.max(16-t,4))}},Yo=function(t){let s;try{s=t.ef()}catch(s){return void t.reject(s)}t.resolve(s)};SetNewCallback=Jo,DoAsyncifiedWork=qo,DoNextAsyncifiedJob=Yo;const Xo=self._s,Ko=12,Zo=16,Qo=35,ta="undefined"!=typeof requestIdleCallback;let sa=[],ia=-1,ea=0,na=Xo.Ys.Hs("disable-asyncify");na&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),Xo.pf=function(t){let s=null;return Xo.ks&&(s=Xo.Zi()),new Promise((i,e)=>{sa.push({ef:t,resolve:i,reject:e,stack:s}),na?Yo(sa.pop()):-1===ia&&Jo(16)})},Xo.pf.Rf=function(t){if(t)++ea;else if(--ea,ea<0)throw new Error("already turned off high throughput mode")}}{let ra=function(){ua=-1},ha=function(){ca=-1,fa=-1;let t=Date.now();for(let s of da)if(s.Ef(t)){let t=s.Of();(-1===fa||t<fa)&&(fa=t)}else da.delete(s);if(-1!==fa){let s=Math.max(fa-t+100,1e3);ca=self.setTimeout(ha,s)}};ClearTimeCache=ra,CheckActiveIdleTimeouts=ha;const oa=self._s,aa=1e3,la=100;let ua=-1;oa.Df=function(){return-1===ua&&(ua=Date.now(),self.setTimeout(ra,16)),ua};let ca=-1,fa=-1,da=new Set;oa.Ff=class{constructor(t,s){this.kf=t,this.Lf=1e3*s,this.Nf=0,this.Bf=!1}$f(){let t=oa.Df();this.Nf=t+this.Lf,this.Bf||(da.add(this),this.Bf=!0),-1===ca?(fa=this.Nf,ca=self.setTimeout(ha,this.Lf+100)):this.Nf<fa&&fa>t+1e3&&(self.clearTimeout(ca),fa=this.Nf,ca=self.setTimeout(ha,this.Lf+100))}Ef(t){return!(t>=this.Nf&&(this.kf()?(this.Nf=t+this.Lf,0):(this.Bf=!1,1)))}Of(){return this.Nf}Wf(){this.Bf&&(da.delete(this),this.Bf=!1,0===da.size&&-1!==ca&&(self.clearTimeout(ca),ca=-1,fa=-1))}zn(){this.Wf(),this.kf=null}}}{const pa=self._s;pa.jf=class t{constructor(t){this.Vf=!1,this.Uf=t}Hf(){this.Vf||(this.Vf=!0,this.Uf&&(this.Uf(),this.Uf=null))}zf(){return this.Vf}zn(){this.Hf()}static zn(s){return new t(()=>s.zn())}static Jf(t,s,i,e,n){if("string"!=typeof s&&!Array.isArray(s))throw new TypeError("expected string or array");if(null==e)e=!1;else if("boolean"!=typeof e&&"object"!=typeof e)throw new TypeError("invalid event listener options");if(n&&(i=i.bind(n)),Array.isArray(s)||s.includes(" ")){"string"==typeof s&&(s=s.split(" "));const n=new pa.qf;for(const r of s)t.addEventListener(r,i,e),n.$u(pa.Hn(pa.jf,()=>t.removeEventListener(r,i,e)));return n}return t.addEventListener(s,i,e),pa.Hn(pa.jf,()=>t.removeEventListener(s,i,e))}},pa.Yf=class extends pa.jf{Xf(t){this.Uf=t}},pa.qf=class extends pa.jf{constructor(...t){super(),this.Kf=new Set;for(let s of t)this.$u(s)}$u(...t){if(this.Vf)throw new Error("already disposed");for(let s of t)this.Kf.add(s)}Zf(t){if(this.Vf)throw new Error("already disposed");this.Kf.delete(t)}Qf(){if(this.Vf)throw new Error("already disposed");if(this.Kf){for(let t of this.Kf)t.Hf();this.Kf.clear()}}zf(){return this.Vf}Hf(){if(this.Vf)throw new Error("already disposed");this.Vf=!0;for(let t of this.Kf)t.Hf();this.Kf.clear(),this.Kf=null}zn(){this.Hf()}}}{const ma=self._s;ma.td=class extends ma.Vn{constructor(){super(),this.sd=0,this.Ra=0,this.ed=0,this.nd=0}$u(t){t=+t,this.Ra=t-this.sd,this.ed=this.nd+this.Ra,this.sd=this.ed-this.nd-this.Ra,this.nd=this.ed}rd(t){this.nd-=+t}zs(){return this.nd}$f(){this.sd=0,this.Ra=0,this.ed=0,this.nd=0}Set(t){this.sd=0,this.Ra=0,this.ed=0,this.nd=+t}hd(t){this.sd=t.sd,this.Ra=t.Ra,this.ed=t.ed,this.nd=t.nd}zn(){}}}{const ga=self._s,ya={},wa=!0,Sa=!1;ya.od=function(t){this.ad=t,this.right=this.ad.ld,this.left=this.ad.ld,this.parent=null,this.color=!1,this.key=null},ya.ud=function(t){this.size=0,this.ld=new ya.od(this),this.ld.color=!1,this.root=this.ld,this.root.parent=this.ld,this.compare=t||this.fd},ya.ud.prototype.fd=function(t,s){return t<s?-1:s<t?1:0},ya.ud.prototype.clone=function(){var t=new ya.ud(this.compare);return t.dd(this),t},ya.ud.prototype.clear=function(){this.size=0,this.ld=new ya.od(this),this.ld.color=!1,this.root=this.ld,this.root.parent=this.ld},ya.ud.prototype.pd=function(t){var s=t.right;t.right=s.left,s.left!=this.ld&&(s.left.parent=t),s.parent=t.parent,t.parent==this.ld?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,s.left=t,t.parent=s},ya.ud.prototype.md=function(t){var s=t.left;t.left=s.right,s.right!=this.ld&&(s.right.parent=t),s.parent=t.parent,t.parent==this.ld?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,s.right=t,t.parent=s},ya.ud.prototype.gd=function(t){if(this.contains(t))this.yd(t).key=t;else{var s=new ya.od(this);s.key=t;for(var i=this.ld,e=this.root;e!=this.ld;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;s.parent=i,i==this.ld?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.ld,s.right=this.ld,s.color=wa,this.wd(s),this.size++}},ya.ud.prototype.wd=function(t){for(;t!=this.ld&&t!=this.root&&t.parent.color==wa;){var s;t.parent==t.parent.parent.left?(s=t.parent.parent.right).color==wa?(t.parent.color=!1,s.color=!1,t.parent.parent.color=wa,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.pd(t)),t.parent.color=!1,t.parent.parent.color=wa,t.parent.parent!=this.ld&&this.md(t.parent.parent)):(s=t.parent.parent.left).color==wa?(t.parent.color=!1,s.color=!1,t.parent.parent.color=wa,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.md(t)),t.parent.color=!1,t.parent.parent.color=wa,t.parent.parent!=this.ld&&this.pd(t.parent.parent))}this.root.color=!1},ya.ud.prototype.Sd=function(t){var s,i;(i=(s=t.left==this.ld||t.right==this.ld?t:this.vd(t)).left!=this.ld?s.left:s.right).parent=s.parent,s.parent==this.ld?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.bd(i),this.size--},ya.ud.prototype.bd=function(t){for(;t!=this.root&&0==t.color;){var s;t==t.parent.left?((s=t.parent.right).color==wa&&(s.color=!1,t.parent.color=wa,this.pd(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=wa,t=t.parent):(0==s.right.color&&(s.left.color=!1,s.color=wa,this.md(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.pd(t.parent),t=this.root)):((s=t.parent.left).color==wa&&(s.color=!1,t.parent.color=wa,this.md(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=wa,t=t.parent):(0==s.left.color&&(s.right.color=!1,s.color=wa,this.pd(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.md(t.parent),t=this.root))}t.color=!1},ya.ud.prototype.remove=function(t){var s=this.yd(t);if(s!=this.ld){var i=s.key;return this.Sd(s),i}return null},ya.ud.prototype.Md=function(t,s){this.remove(s)},ya.ud.prototype.min=function(t){for(;t.left!=this.ld;)t=t.left;return t},ya.ud.prototype.max=function(t){for(;t.right!=this.ld;)t=t.right;return t},ya.ud.prototype.vd=function(t){if(t.right!=this.ld)return this.min(t.right);for(var s=t.parent;s!=this.ld&&t==s.right;)t=s,s=s.parent;return s},ya.ud.prototype.Cd=function(t){if(t.left!=this.ld)return this.max(t.left);for(var s=t.parent;s!=this.ld&&t==s.left;)t=s,s=s.parent;return s},ya.ud.prototype.Td=function(t){if(this.size>0){var s=this.yd(t);if(s==this.ld)return null;if(s.right!=this.ld)return this.min(s.right).key;for(var i=s.parent;i!=this.ld&&s==i.right;)s=i,i=i.parent;return i!=this.ld?i.key:null}return null},ya.ud.prototype.xd=function(t){if(this.size>0){var s=this.yd(t);if(s==this.ld)return null;if(s.left!=this.ld)return this.max(s.left).key;for(var i=s.parent;i!=this.ld&&s==i.left;)s=i,i=i.parent;return i!=this.ld?i.key:null}return null},ya.ud.prototype.Id=function(){return this.min(this.root).key},ya.ud.prototype._d=function(){return this.max(this.root).key},ya.ud.prototype.yd=function(t){for(var s=this.root;s!=this.ld&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},ya.ud.prototype.contains=function(t){return null!=this.yd(t).key},ya.ud.prototype.getValues=function(){var t=[];return this.forEach(function(s){t.push(s)}),t},ya.ud.prototype.dd=function(t){if("array"==ya.Gd(t))for(var s=0;s<t.length;s++)this.gd(t[s]);else if("function"==ya.Gd(t.forEach))t.forEach(this.gd,this);else if("function"==ya.Gd(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.gd(i[s])}else if("object"==ya.Gd(t))for(var e in t)this.gd(t[e])},ya.ud.prototype.Pd=function(t){if("array"==ya.Gd(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==ya.Gd(t.forEach))t.forEach(this.Md,this);else if("function"==ya.Gd(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.remove(i[s])}else if("object"==ya.Gd(t))for(var e in t)this.remove(t[e])},ya.ud.prototype.Ad=function(t){if("array"==ya.Gd(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==ya.Gd(t.forEach))return t.every(this.contains,this);if("function"==ya.Gd(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==ya.Gd(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},ya.ud.prototype.range=function(t,s){var i=[];return this.Rd(function(t){i.push(t)},t,s),i},ya.ud.prototype.Ed=function(t,s){if(!this.Od())for(var i=this.min(this.root);i!=this.ld;){if(t.call(s,i.key,this))return;i=this.vd(i)}},ya.ud.prototype.Dd=function(t,s,i){if(!this.Od())for(var e=this.yd(s);e!=this.ld;){if(t.call(i,e.key,this))return;e=this.vd(e)}},ya.ud.prototype.traverseTo=function(t,s,i){if(!this.Od())for(var e=this.min(this.root),n=this.yd(s);e!=n;){if(t.call(i,e.key,this))return;e=this.vd(e)}},ya.ud.prototype.Rd=function(t,s,i,e){if(!this.Od())for(var n=this.yd(s),r=this.yd(i);n!=r;){if(t.call(e,n.key,this))return;n=this.vd(n)}},ya.ud.prototype.Fd=function(t,s){if(!this.Od())for(var i=this.max(this.root);i!=this.ld;){if(t.call(s,i.key,this))return;i=this.Cd(i)}},ya.ud.prototype.forEach=function(t,s){if(!this.Od())for(var i=this.min(this.root);i!=this.ld;i=this.vd(i))t.call(s,i.key,i.key,this)},ya.ud.prototype.some=function(t,s){if(this.Od())return!1;for(var i=this.min(this.root);i!=this.ld;i=this.vd(i))if(t.call(s,i.key,i.key,this))return!0;return!1},ya.ud.prototype.every=function(t,s){if(this.Od())return!1;for(var i=this.min(this.root);i!=this.ld;i=this.vd(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},ya.ud.prototype.map=function(t,s){var i=[];if(this.Od())return i;for(var e=this.min(this.root);e!=this.ld;e=this.vd(e))i.push(t.call(s,e.key,e.key,this));return i},ya.ud.prototype.filter=function(t,s){var i=[];if(this.Od())return i;for(var e=this.min(this.root);e!=this.ld;e=this.vd(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},ya.ud.prototype.kd=function(){return this.size},ya.ud.prototype.Od=function(){return 0==this.size},ya.ud.prototype.isSubsetOf=function(t){var s=ya.kd(t);if(this.kd()>s)return!1;var i=0;if(this.Od())return!0;for(var e=this.min(this.root);e!=this.ld;e=this.vd(e))ya.contains.call(t,t,e.key)&&i++;return i==this.kd()},ya.ud.prototype.intersection=function(t){var s=new ya.ud(this.compare);if(this.Od())return s;for(var i=this.min(this.root);i!=this.ld;i=this.vd(i))t.contains.call(t,i.key,i.key,this)&&s.gd(i.key);return s},ga.ud=class extends ga.Vn{constructor(t){super(),this.Ld=new ya.ud(t),this.Nd=!1,this.Bd=new Set,this.$d=new Set}$u(t){this.Nd?this.Ld.contains(t)?this.$d.delete(t):this.Bd.add(t):this.Ld.gd(t)}Zf(t){this.Nd?this.Ld.contains(t)?this.$d.add(t):this.Bd.delete(t):this.Ld.remove(t)}Hs(t){return this.Nd?!!this.Bd.has(t)||!this.$d.has(t)&&this.Ld.contains(t):this.Ld.contains(t)}Au(){this.Ld.clear(),this.Bd.clear(),this.$d.clear()}toArray(){if(this.Nd)throw new Error("cannot be used in queueing mode");return this.Ld.getValues()}Du(){return this.Ld.kd()+this.Bd.size-this.$d.size}Ru(){return 0===this.Du()}Wd(){if(this.Ru())throw new Error("empty set");if(this.Nd)throw new Error("cannot be used in queueing mode");const t=this.Ld;return t.min(t.root).key}jd(){if(this.Ru())throw new Error("empty set");if(this.Nd)throw new Error("cannot be used in queueing mode");const t=this.Wd();return this.Zf(t),t}Vd(t){if(t=!!t,this.Nd!==t&&(this.Nd=t,!t)){for(const t of this.$d)this.Ld.remove(t);this.$d.clear();for(const t of this.Bd)this.Ld.gd(t);this.Bd.clear()}}Ud(t){this.Ld.forEach(t)}*values(){if(this.Ru())return;const t=this.Ld;for(let s=t.min(t.root);s!=t.ld;s=t.vd(s))yield s.key}[Symbol.iterator](){return this.values()}}}{const va=self._s;va.Hd=class{constructor(t=va.hardwareConcurrency){this.zd=t,this.Jd=[],this.qd=0}$u(t,s){return new Promise((i,e)=>{const n={ef:t,resolve:i,reject:e,Yd:s};s?.signal&&s.signal.aborted?e(new Error("abort")):(s?.signal&&(n.onabort=()=>{const t=this.Jd.indexOf(n);-1!==t&&(this.Jd.splice(t,1),e(new Error("abort")))},s.signal.addEventListener("abort",n.onabort)),this.Jd.push(n),this.Xd())})}Kd(t){for(let s=0,i=this.Jd.length;s<i;++s)if(this.Jd[s].ef===t)return s;return-1}Zd(t,s){const i=this.Kd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.Jd[i].resolve(s),this.Jd.splice(i,1)}Qd(t,s){const i=this.Kd(t);if(-1===i)throw new Error("cannot find promise to reject");this.Jd[i].reject(s),this.Jd.splice(i,1)}async Xd(){if(!this.Jd.length)return;if(this.qd>=this.zd)return;this.qd++;const t=this.Jd.shift();t.Yd?.signal&&t.onabort&&t.Yd.signal.removeEventListener("abort",t.onabort);try{const s=await t.ef();t.resolve(s)}catch(s){t.reject(s)}this.qd--,this.Xd()}}}{const ba=self._s;ba.tp=class{constructor(t,s,i){this.kf=t,this.sp=s,this.ip=i||2*s,this.ep=-1,this.np=-1/0,this.rp=()=>this.hp(),this.op=!1,this.ap=!1,this.lp=null}up(t){this.ap=!!t}cp(){return void 0!==ba.fp&&ba.fp.pp()?this.ip:this.sp}mp(...t){if(-1!==this.ep)return;this.lp=t;let s=ba.Df(),i=s-this.np,e=this.cp();i>=e&&this.ap?(this.np=s,this.gp()):this.ep=self.setTimeout(this.rp,Math.max(e-i,4))}gp(){this.op=!0;const t=this.lp;this.lp=null,t?this.kf(...t):this.kf(),this.op=!1}$f(){this.op||(this.yp(),this.lp=null,this.np=ba.Df())}hp(){this.ep=-1,this.np=ba.Df(),this.gp()}yp(){-1!==this.ep&&(self.clearTimeout(this.ep),this.ep=-1)}zn(){this.yp(),this.kf=null,this.lp=null,this.rp=null}}}{const Ma=self._s;Ma.wp=class{constructor(){this.Sp=new Map,this.vp=!1,this.bp=null,this.Mp=null,this.Cp=null,this.Tp=null}xp(t){this.vp=!!t}Ip(){return this.vp}_p(t){this.bp=t}Gp(t){if(!this.bp)throw new Error("no get base size callback set");return this.bp(t)}Pp(t){this.Mp=t}Ap(t,s,i,e,n,r){if(!this.Mp)throw new Error("no raster at size callback set");return this.Mp(t,s,i,e,n,r)}Rp(t){this.Cp=t}Ep(t){if(!this.Cp)throw new Error("no release result callback set");this.Cp(t)}Op(t){this.Tp=t}Dp(){if(!this.Tp)throw new Error("no redraw callback set");this.Tp()}Fp(t){let s=this.Sp.get(t);return s||(s=Ma.Hn(Ma.kp,this,t),this.Sp.set(t,s)),s.Lp(),s}Np(t){this.Sp.delete(t.Bp())}$p(){for(const t of this.Sp.values())t.Wp(),t.jp()}}}{const Ca=self._s,Ta=4096;Ca.kp=class{constructor(t,s){this.Vp=t,this.Up=s,this.Hp=0,this.zp=0,this.Jp=0,this.qp=this.Vp.Gp(s).then(t=>{this.Vp&&(this.zp=t[0],this.Jp=t[1],this.Vp.Dp())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.Yp=!0,this.Vp&&this.Vp.Dp()}),this.Xp=0,this.Kp=0,this.Zp=0,this.Qp=0,this.tm=!1,this.sm=null,this.im=!1,this.Yp=!1}zn(){if(this.Hp<=0)throw new Error("already released");this.Hp--,0===this.Hp&&this.nm()}Wp(){this.sm&&(this.Vp.Ep(this.sm),this.sm=null)}nm(){this.Wp(),this.Vp.Np(this),this.Vp=null}Bp(){return this.Up}Lp(){this.Hp++}rm(){return this.Hp>0}hm(){return this.sm}jp(){this.im=!0}async om(t,s,i){if(0===s||0===i||this.Yp)return;if(this.tm)return;let e=Ca.br(Math.ceil(s)),n=Ca.br(Math.ceil(i));const r=Math.max(e,n);if(r>4096){const t=4096/r;s*=t,i*=t,e=Math.min(Math.ceil(e*t),4096),n=Math.min(Math.ceil(n*t),4096)}if(s<e&&i<n){const t=s/i;e/n>t?(s=n*t,i=n):(s=e,i=e/t)}if(this.Vp.Ip()&&(e=Math.ceil(s),n=Math.ceil(i)),e<=this.Xp&&n<=this.Kp&&!this.im)return;this.tm=!0,this.Xp=e,this.Kp=n;const h=await this.Vp.Ap(this.Up,t,this.Xp,this.Kp,s,i);this.Vp&&(this.Wp(),this.sm=h,this.Zp=s,this.Qp=i,this.tm=!1,this.im=!1,this.Vp.Dp())}am(){return this.qp}lm(){return this.zp}um(){return this.Jp}fm(){return this.Zp}dm(){return this.Qp}pm(){return this.Yp}}}{let xa=function(t){return Ra.get(t)};lookupHtmlEntity=xa;const Ia=self._s;Ia.gm="\ufeff";const _a=new Set("0123456789");Ia.ym=function(t){return _a.has(t)};const Ga=new Set(" \t\n\r            ​\u2028\u2029  　");Ia.wm=function(t){return Ga.has(t)},Ia.Sm=function(t){return[...t].filter(t=>!Ia.wm(t)).join("")},Ia.vm=function(t){for(const s of t)if(!Ia.wm(s))return!1;return!0},Ia.bm=function(t){for(const s of t)if(!Ia.wm(s))return!1;return!0},Ia.Mm=function(t){return 1===t.length&&t.charCodeAt(0)<32},Ia.Cm=function(t){return[...t].filter(t=>!Ia.Mm(t)).join("")};let Pa=null;try{Pa=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}Ia.Tm=function(t){return!Ia.wm(t)&&Pa&&Pa.test(t)};const Aa=new Set("0123456789.+-e");Ia.xm=function(t){if(!(t=t.trim()).length)return!1;let s=t.charAt(0);if("-"!==s&&!_a.has(s))return!1;for(let s of t)if(!Aa.has(s))return!1;return!0},Ia.Im=function(t){let s=t.length;for(;s>0;){let i=t.charAt(s-1);if(!Ia.ym(i))break;--s}return t.substr(0,s)},Ia._m=function(t){let s=Ia.Im(t),i=t.substr(s.length);return i=i?(parseInt(i,10)+1).toString():"2",s+i};const Ra=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),Ea=/[&<>"']/g;Ia.Gm=function(t){return t.replace(Ea,xa)},Ia.Pm=function(t){let s=Ia.Am(t,"\\","\\\\");return s=Ia.Am(s,'"','\\"'),s=Ia.Am(s,"\t","\\t"),s=Ia.Am(s,"\r",""),Ia.Am(s,"\n","\\n")},Ia.Rm=function(t){let s=Ia.Am(t,"&","&amp;");return s=Ia.Am(s,"<","&lt;"),s=Ia.Am(s,">","&gt;"),Ia.Am(s,'"',"&quot;")};const Oa=/[-[\]{}()*+?.,\\^$|#\s]/g;Ia.Ki=function(t){return t.replace(Oa,"\\$&")},Ia.Em=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},Ia.Om=function(t,s){let i=0,e=0;for(;i<s;){if(i=t.indexOf("\n",i),-1===i)return e;e++,i++}return e},Ia.Dm=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());const e=s.length;let n=0,r=0,h=[];for(;(r=t.indexOf(s,n))>-1;)h.push(r),n=r+e;return h},Ia.Am=function(t,s,i){return t.replaceAll(s,()=>i)},Ia.Fm=function(t,s,i){return t.replace(new RegExp(Ia.Ki(s),"gi"),()=>i)},Ia.km=function(t,s){"string"==typeof s?t.textContent=s:s.Lm()?t.textContent=s.toString():(t.innerHTML=s.Nm(),s instanceof Ia.pn&&s.Bm(t))},Ia.$m=function(t,s){return t instanceof Ia.dn||t instanceof Ia.pn?t.equals(s):s instanceof Ia.dn||s instanceof Ia.pn?s.equals(t):t===s},Ia.Wm=function(t,...s){let i=t;for(let e=0,n=s.length;e<n;++e){const n=`{${e}}`;if(!t.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);i=i.replace(n,s[e].toString())}return i},Ia.jm=function(t,...s){let i=t,e=-1,n=-1;for(let r=0,h=s.length;r<h;++r){const h=`{${r}}`;t.includes(h)?(n=r,i=i.replace(h,s[r].toString())):-1===e&&(e=r)}if(e>=0&&n>=0&&e<n)throw new Error(`missing placeholder '${e}' in string substitution`);return i},Ia.Vm=function(t,s){let i=t;for(let[t,e]of Object.entries(s))i=i.replaceAll(t,e.toString());return i},Ia.Um=function(t,s){return t>s?1:t<s?-1:0},Ia.Hm=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return i>e?1:i<e?-1:0};const Da=new self.Intl.Segmenter;Ia.zm=function(t){const s=[];for(const i of Da.segment(t))s.push(i.segment);return s},Ia.Jm=function*(t){for(const s of Da.segment(t))yield s.segment},Ia.qm=function(t){let s=0;for(const i of Da.segment(t))++s;return s};const Fa=1024,ka=1048576,La=1073741824,Na=1099511627776;Ia.Ym=function(t,s){let i="common."+(s?"dataRates":"dataSizes")+".";const e=self.Xm;if(t<1024)return e(i+"bytes",t);if(t<1048576){let s=t/1024;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"kilobytes",s)}if(t<La){let s=t/1048576;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"megabytes",s)}if(t<Na){let s=t/La;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"gigabytes",s)}{let s=t/Na;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"terabytes",s)}};const Ba={Km:!1,Zm:!0,Qm:!0,tg:!0,sg:!0};Ia.ig=function(t,s){s=Object.assign({},Ba,s),Ia.ng.eg("common.time");const i=[],e=self.lang,n=self.rg;if(s.Zm){const s=Math.floor(t/86400);s>0&&(t-=24*s*3600,i.push(n(".days",null,s)))}if(s.Qm){const s=Math.floor(t/3600);(s>0||i.length)&&(t-=3600*s,i.push(n(".hours",null,s)))}if(s.tg){const e=Math.floor(t/60);(e>0||i.length||!s.sg)&&(t-=60*e,i.push(n(".minutes",null,e)))}if(s.sg){const s=Math.floor(t%60);i.push(n(".seconds",null,s))}const r=(s.Km?e(".approx-prefix"):"")+i.join(e(".separator"));return Ia.ng.hg(),r},Ia.og=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),n=s-e.length;for(let t=0;t<n;++t)i+="0";return i+e},Ia.ag=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},Ia.lg=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());Ia.Th(i,4,"0"),Ia.Th(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const s=i[t]-e[t];if(0!==s)return s<0?-1:1}return 0},Ia.ug=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random());return("x"===t?s:3&s|8).toString(16)})},Ia.cg=function(t,s){if(t.length!==s.length)throw new Error("strings must be same length");let i=0;for(let e=0,n=t.length;e<n;++e)t.charAt(e)!==s.charAt(e)&&++i;return i},Ia.fg=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,n,r,h,o;for(t.length>s.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,n=1;n<=t.length;n++)h=s[e-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]}}{let $a=function(t,s,i){const e=Va.get(i);if(!e)return"class"===i?s?"</span>":`<span class="bbclass${Ya++}">`:t;if("string"==typeof e){if("a"===e&&0===Ja.length||"abbr"===e&&0===qa.length)return t;if("a"!==e||s){if("abbr"!==e||s)return"<"+s+e+">";{const t=parseInt(i.substring(3),10)-1;if(t<0||t>=qa.length)throw new Error("invalid bbcode tip substitution");const s=qa[t];let e="";if("string"==typeof s?e=s:"function"==typeof s&&(e=s()),"string"!=typeof e)throw new TypeError("invalid bbcode tip");return`<abbr title="${Wa.Am(e,'"',"&quot;")}">`}}{const t=parseInt(i.substring(1),10)-1;if(t<0||t>=Ja.length)throw new Error("invalid bbcode link substitution");const s=Ja[t];if("string"==typeof s)return`<a href="${Ja[t]}">`;if("function"==typeof s)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(e)){let t=e[0],i=e[1];return s?"</"+t+">":`<${t} class="${i}">`}};bbToHtmlReplacerFunc=$a;const Wa=self._s,ja=self.assert,Va=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),Ua=new Set(["icon"]),Ha=/\[(\/?)([a-zA-Z0-9]+)\]/g,za=/\[(\/?)([^\[\n]*?)\]/g;let Ja=null,qa=null,Ya=0;const Xa=/\n/g;Wa.pn=class{constructor(t,s){if(this.dg=s&&s.pg?t:Wa.Gm(t),this.mg="",this.gg=!1,this.yg=[],this.wg=[],s){if(this.gg=!!s.Sg,s.links){if(s.links.length>9)throw new Error("too many links");this.yg=s.links}if(s.vg){if(s.vg.length>9)throw new Error("too many tips");this.wg=s.vg}}this.bg=this.dg.includes("["),this.Mg=this.gg&&this.dg.includes("\n"),this.Cg=!this.bg&&!this.Mg&&!this.dg.includes("&"),this.Tg=!1,this.xg=[]}toString(){return this.dg}valueOf(){return this.dg}Lm(){return this.Cg}Ig(){return this.bg?this.dg.replace(Ha,""):this.dg}Nm(){if(this.Cg)return this.dg;if(!this.mg&&this.dg){let t=this.dg;this.bg&&(Ya=0,Ja=this.yg,qa=this.wg,t=t.replace(Ha,$a),Ja=null,qa=null),this.Mg&&(t=t.replace(Xa,"<br>")),this.mg=t}return this.mg}Bm(t){if(this.yg.length)for(let s=0,i=this.yg.length;s<i;++s){const i=this.yg[s];if("function"!=typeof i)continue;const e=t.querySelector(".bblink"+s);if(!e)throw new Error("unable to attach BBString link handler");e.onclick=i}}equals(t){return t instanceof Wa.dn?this.Nm()===t.Nm():t instanceof Wa.pn?this.dg===t.dg:this.dg===t}_g(){if(this.Tg)return this.xg;const t=[],s=this.dg,i=[];za.lastIndex=0;let e=0,n=null;for(;null!==(n=za.exec(s));){const r=n.index;if(r>0&&"\\"===s.charAt(r-1))continue;const h=n[0],o=n[1],a=n[2],l=s.substring(e,r);if(e=r+h.length,l&&t.push({text:l,Gg:i.slice(0)}),a)if(o){const t=a.toLowerCase();for(let s=i.length-1;s>=0;--s)if(i[s].tag===t){i.splice(s,1);break}}else{let s=a,e=null;const n=a.indexOf("=");if(-1!==n?(s=a.substring(0,n).toLowerCase(),e=a.substring(n+1)):s=s.toLowerCase(),Ua.has(s)){if("icon"!==s)throw new Error(`unknown self-closing tag ${s}`);t.push({icon:e,Gg:i.slice(0)})}else i.push({tag:s,Pg:e})}}e<s.length&&t.push({text:s.substring(e),Gg:i.slice(0)});for(const s of t)s.text&&(s.text=this.Ag(s.text));return this.xg=t.map(t=>t.icon?Wa.Hn(Wa.Rg,{icon:t.icon,Gg:t.Gg}):Wa.Hn(Wa.Eg,{Og:Wa.zm(t.text),Gg:t.Gg})),this.Tg=!0,this.xg}Ag(t){return t=Wa.Am(t,"\\[","["),Wa.Am(t,"\\\\","\\")}static Dg(t){return Wa.Hn(Wa.pn,t,{pg:!0}).Ig()}static Fg(t){return t.replace(za,"")}}}{let Ka=function(t){return" "!==t&&" "!==t&&il.wm(t)},Za=function(t){return el.has(t)},Qa=function(t){return il.Tm(t)&&!Za(t)},tl=function(t){for(;t.length>0&&Ka(t.at(-1));)t.pop()},sl=function(t){return"\n"===t||"\r\n"===t};IsWordBreakWhiteSpace=Ka,IsOpeningCJKPunctiationChar=Za,IsContinuingCJKPunctuationChar=Qa,WordBreakTrimEnd=tl,IsNewline=sl;const il=self._s,el=new Set("〈《「『【〔〖〘〚〝");il.kg=class{constructor(){this.Lg=[],this.Ng=null}Bg(){return this.Lg}$g(){return this.Lg.length}Wg(t){this.Ng=t}jg(t,s){let i=0,e=0,n=0,r=0,h=0;for(const o of t){if(-1===o.Vg()){const t=s(o);o.Ug(t.height),o.Hg(t.fontBoundingBoxAscent||0),o.zg(t.fontBoundingBoxDescent||0),o.Jg(t.qg||0),o.Yg()?o.Xg(t.width):o.Kg()&&o.Zg(this.Ng)}i+=o.Vg(),e=Math.max(e,o.Qg()),n=Math.max(n,o.ty()),r=Math.max(r,o.sy()),h=Math.max(h,o.iy())}return{width:i,height:e,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,qg:h}}ey(t,s,i,e,n,r){this.Lg.push(il.Hn(il.kg.ny,{hy:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:n,qg:r}))}kg(t,s,i,e,n){if("string"==typeof t&&(t=[il.Hn(il.Eg,{Og:il.zm(t)})]),il.bh(this.Lg),!t.length||1===t.length&&t[0].Yg()&&t[0].Ru()||i<2)return;if(1===t.length){const e=t[0];if(e.Yg()&&e.oy()<=100&&!e.ly()){let{width:t,height:r,fontBoundingBoxAscent:h,fontBoundingBoxDescent:o,qg:a}=s(e);if(t+=n,e.Xg(t),e.Ug(r),e.Hg(h||0),e.zg(o||0),e.Jg(a||0),t<=i)return void this.ey([e],t,r,h,o,a)}}let r;r="word"===e?this.uy(t):"cjk"===e?this.py(t):this.my(t),this.gy(r,s,i,n)}uy(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.yy();if(n.Kg())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.wy())if(sl(r))i.length>0&&s.push(i),s.push([il.Hn(il.Eg,{Og:["\n"],Gg:t})]),i=[];else if(0===i.length)i.push(il.Hn(il.Eg,{Og:[r],Gg:t})),e=Ka(r);else{const n=Ka(r);if(n===e){const s=i.at(-1);s.yy()===t?s.Sy(r):i.push(il.Hn(il.Eg,{Og:[r],Gg:t}))}else s.push(i),i=[il.Hn(il.Eg,{Og:[r],Gg:t})],e=n}}return i.length>0&&s.push(i),s}py(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.yy();if(n.Kg())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.wy())if(sl(r))i.length>0&&s.push(i),s.push([il.Hn(il.Eg,{Og:["\n"],Gg:t})]),i=[];else if(0===i.length)i.push(il.Hn(il.Eg,{Og:[r],Gg:t})),e=Za(r);else if(e||Qa(r)){const s=i.at(-1);s.yy()===t?s.Sy(r):i.push(il.Hn(il.Eg,{Og:[r],Gg:t})),e=Za(r)}else s.push(i),i=[il.Hn(il.Eg,{Og:[r],Gg:t})],e=Za(r)}return i.length>0&&s.push(i),s}my(t){const s=[];for(const i of t)if(i.Yg()){const t=i.wy();il.On(s,t.map(t=>[il.Hn(il.Eg,{Og:[t],Gg:i.yy()})]))}else s.push([i]);return s}vy(t){return t.map(t=>t.by())}My(t,s){const i=t.length?t.at(-1):null;let e=0;i&&i.Yg()&&s[0].Yg()&&s[0].yy()===i.yy()&&(i.Cy(s[0].wy()),e=1);for(let i=s.length;e<i;++e){const i=s[e];t.push(i.by())}}gy(t,s,i,e){let n=[],r=0,h=0,o=0,a=0,l=0;for(const e of t){if(1===e.length&&e[0].Yg()&&1===e[0].oy()&&sl(e[0].wy()[0])){if(0===h){const t=s(il.Hn(il.Eg,{Og:[" "],Gg:e[0].yy()}));h=t.height,o=t.fontBoundingBoxAscent||0,a=t.fontBoundingBoxDescent||0,l=t.qg||0}this.ey(n,r,h,o,a,l),n=[],r=0,h=0,o=0,a=0,l=0;continue}const t=this.vy(n);this.My(t,e);const u=this.jg(t,s),c=u.width;if(c>=i)if(n.length>0&&this.ey(n,r,h,o,a,l),n=[],e[0].Yg()&&il.bm(e[0].wy()))r=0,h=0,o=0,a=0,l=0;else{this.My(n,e);const t=this.jg(n,s);r=t.width,h=t.height,o=t.fontBoundingBoxAscent,a=t.fontBoundingBoxDescent,l=t.qg}else n=t,r=c,h=u.height,o=u.fontBoundingBoxAscent,a=u.fontBoundingBoxDescent,l=u.qg}n.length>0&&this.ey(n,r,h,o,a,l),this.Ty(s,e)}Ty(t,s){for(const i of this.Lg){const e=i.xy();if(!e.length)continue;let n=e.at(-1);if(n.Yg()){const r=n.wy(),h=r.slice(0);if(tl(h),0===h.length)i.Iy(-n.Vg()),e.pop();else if(h.length<r.length){n._y(h);const s=t(n).width,e=n.Vg()-s;n.Xg(s),i.Iy(-e)}0!==s&&e.length>0&&(n=e.at(-1),n.Iy(s),i.Iy(s))}}}Au(){il.bh(this.Lg)}Gy(){return this.Lg.reduce((t,s)=>Math.max(t,s.Vg()),0)}Py(){return this.Lg.reduce((t,s)=>t+s.Qg(),0)}}}{const nl=self._s;nl.kg.ny=class{constructor(t){this.xg=t.hy||[],this.Ay=t.width||-1,this.Ry=t.height||-1,this.Ey=t.fontBoundingBoxAscent||-1,this.Oy=t.fontBoundingBoxDescent||-1,this.Dy=t.qg||-1,this.Fy=0,this.ky=0}hy(){return this.xg.values()}*Ly(){const t=this.xg;for(let s=t.length-1;s>=0;--s)yield t[s]}xy(){return this.xg}Iy(t){this.Ay+=t}Vg(){return this.Ay}Qg(){return this.Ry}Ny(){return this.Ey}sy(){return this.Oy}iy(){return this.Dy}By(t){this.Fy=t}$y(){return this.Fy}Wy(t){this.ky=t}jy(){return this.ky}}}{const rl=self._s;rl.Vy=class{constructor(t){this.Uy=t.Gg||[],this.Ay=t.width||-1,this.Ry=t.height||-1,this.Ey=t.fontBoundingBoxAscent||-1,this.Oy=t.fontBoundingBoxDescent||-1,this.Dy=t.qg||-1,this.Fy=0,this.ky=0}Yg(){return!1}Kg(){return!1}yy(){return this.Uy}Hy(t){const s=this.Uy;for(let i=s.length-1;i>=0;--i){const e=s[i];if(e.tag===t)return e}return null}zy(t){return!!this.Hy(t)}Jy(){const t=new Map;for(const s of this.Uy)t.set(s.tag,s.Pg);return t}Iy(t){this.Ay+=t}Xg(t){this.Ay=t}Vg(){return this.Ay}Ug(t){this.Ry=t}Qg(){return this.Ry}Hg(t){this.Ey=t}ty(){return this.Ey}zg(t){this.Oy=t}sy(){return this.Oy}Jg(t){this.Dy=t}iy(){return this.Dy}By(t){this.Fy=t}$y(){return this.Fy}Wy(t){this.ky=t}jy(){return this.ky}}}{const hl=self._s;hl.Eg=class extends hl.Vy{constructor(t){super(t),this.qy=t.Og}Yg(){return!0}Cy(t){hl.On(this.qy,t),this.Ay=-1,this.Ry=-1,this.Ey=-1,this.Oy=-1,this.Dy=-1}Sy(t){this.qy.push(t)}by(){return hl.Hn(hl.Eg,{Og:this.qy.slice(0),Gg:this.Uy,width:this.Ay,height:this.Ry,fontBoundingBoxAscent:this.Ey,fontBoundingBoxDescent:this.Oy,qg:this.Dy})}wy(){return this.qy}_y(t){this.qy=t}oy(){return this.qy.length}Ru(){return 0===this.qy.length}ly(){return this.qy.includes("\n")}}}{const ol=self._s;ol.Rg=class extends ol.Vy{constructor(t){super(t),this.Yy=t.icon}Kg(){return!0}Xy(){return this.Yy}by(){return ol.Hn(ol.Rg,{icon:this.Yy,Gg:this.Uy,width:this.Ay,height:this.Ry,fontBoundingBoxAscent:this.Ey,fontBoundingBoxDescent:this.Oy,qg:this.Dy})}Ky(t){if(!t)return null;let s=Number(this.Yy);return String(s)===this.Yy?(s=Math.floor(s),t.Zy(s)):t.Qy(this.Yy)}Zg(t){const s=this.Ky(t);this.Ay=s?this.Ry*s.Vg()/s.Qg():0}tw(t){const s=this.Ky(t);return s?s.tw():null}oy(){return 1}}}{const al=self._s;al.sw=class{constructor(t){this.iw=new Map,this.ew=t.rw,this.hw=t.ow}zn(){for(const t of this.iw.values())t.zn();this.iw.clear()}aw(t){let s=this.iw.get(t);if(s)return s;const i=this.ew(t);return s=al.Hn(al.lw,this,{source:t,uw:i}),this.iw.set(t,s),s}cw(t){return this.iw.has(t)}fw(t){const s=this.iw.get(t);s&&s.zn(),this.iw.delete(t)}async dw(t){return await this.hw(t)}}}{const ll=self._s;ll.lw=class{constructor(t,s){this.pw=t,this.mw=s.source,this.gw=[],this.yw=new Map,this.ww=!1,this.Sw=!1,this.bw=null;const i=s.uw.Mw;for(let t=0,s=i.length;t<s;++t){const s=i[t],e=ll.Hn(ll.Cw,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this.gw.push(e),s.tag&&this.yw.set(s.tag.toLowerCase(),e)}}zn(){for(const t of this.gw)t.zn();ll.bh(this.gw),this.yw.clear(),this.pw=null,this.mw=null}Tw(){return this.ww}xw(){return this.Sw}Iw(){return this.bw||(this.bw=this._w()),this.bw}async _w(){if(this.ww)return;this.ww=!0,this.Sw=!0;const t=await this.pw.dw(this.mw);if(!this.pw)return;const s=t.Mw;for(let t=0,i=Math.min(s.length,this.gw.length);t<i;++t){const i=s[t].Gw;this.gw[t].Pw(i)}this.Sw=!1}Zy(t){return(t=Math.floor(t))<0||t>=this.gw.length?null:this.gw[t]}Qy(t){return this.yw.get(t.toLowerCase())||null}}}{const ul=self._s;ul.Cw=class{constructor(t,s){this.Aw=t,this.mw=s.source||null,this.Rw=s.index,this.Ew=s.tag,this.Ay=s.width,this.Ry=s.height,this.Ow=null}zn(){this.Ay=0,this.Ry=0,this.Aw=null}Dw(){return this.mw}Vg(){return this.Ay}Qg(){return this.Ry}Pw(t){this.Ow=t}tw(){return this.Ow}}}{let cl=function(t,s,i,e){const n=bl;gl.O(Sl,i,s),gl.O(vl,t,s),gl.It(n,Sl,vl),gl.normalize(n,n),e.set(n[0],n[1],n[2],gl.xt(t,n))},fl=function(t,s,i,e,n,r,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.Fw,f=h.kw,d=h.Lw,p=1-c,m=1-f,g=1-d;return o*t*c+o*e*p+a*s*f+a*n*m+l*i*d+l*r*g>=u||o*e*c+o*t*p+a*n*f+a*s*m+l*r*d+l*i*g>u},dl=function(t,s,i,e){return e.x*t+e.y*s+e.z*i>=e.w};PlaneFromPoints=cl,IsInFrontOfPlane=fl,IsPointInFrontOfPlane=dl;const pl=self._s,ml=self.ls,gl=ml.ws,yl=ml.Ss,wl=ml.ds,Sl=gl.create(),vl=gl.create(),bl=gl.create(),Ml=yl.create(),Cl=wl.create(),Tl=gl.create(),xl=gl.create(),Il=gl.create(),_l=gl.create(),Gl=gl.create(),Pl=gl.create(),Al=gl.create(),Rl=gl.create(),El=yl.v(0,0,1,1);pl.Nw={Bw(t,s,i,e,n,r,h){const o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15];let c=n[0]*o+n[4]*a+n[8]*l+n[12]*u,f=n[1]*o+n[5]*a+n[9]*l+n[13]*u,d=n[2]*o+n[6]*a+n[10]*l+n[14]*u,p=n[3]*o+n[7]*a+n[11]*l+n[15]*u;return 0!==p&&(p=1/p,c*=p,f*=p,d*=p,h[0]=(.5*c+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},$w(t,s,i,e,n,r,h){const o=Cl,a=Ml;return wl.multiply(o,n,e),null!==wl.C(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,yl.Rt(a,a,o),0!==a[3]&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0))},Ww(t,s,i,e,n,r,h){const o=Sl,a=vl;if(!pl.Nw.$w(t,s,0,e,n,r,o))return!1;if(!pl.Nw.$w(t,s,1,e,n,r,a))return!1;const l=vl;gl.O(l,a,o);const u=bl;gl.set(u,0,0,1);const c=-i,f=gl.xt(u,l);let d=0;if(0===f){if(0!==gl.xt(u,o)+c)return!1}else if(d=-(gl.xt(o,u)+c)/f,d<0)return!1;return gl.vt(h,o,l,d),!0}};class Ol{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Fw=NaN,this.kw=NaN,this.Lw=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Fw=t>0?1:0,this.kw=s>0?1:0,this.Lw=i>0?1:0}}pl.Nw.jw=class{constructor(){this.Vw=new Ol,this.Uw=new Ol,this.Hw=new Ol,this.zw=new Ol,this.Jw=new Ol,this.qw=new Ol}Yw(t,s){const i=El;pl.Nw.$w(0,1,0,t,s,i,Tl),pl.Nw.$w(1,1,0,t,s,i,xl),pl.Nw.$w(0,0,0,t,s,i,Il),pl.Nw.$w(1,0,0,t,s,i,_l),pl.Nw.$w(0,1,1,t,s,i,Gl),pl.Nw.$w(1,1,1,t,s,i,Pl),pl.Nw.$w(0,0,1,t,s,i,Al),pl.Nw.$w(1,0,1,t,s,i,Rl),cl(Il,Tl,Gl,this.Vw),cl(Tl,xl,Pl,this.Uw),cl(xl,_l,Rl,this.Hw),cl(_l,Il,Al,this.zw),cl(Al,Gl,Pl,this.qw),cl(_l,xl,Tl,this.Jw)}Xw(t,s,i,e,n,r){return fl(t,s,i,e,n,r,this.Vw)&&fl(t,s,i,e,n,r,this.Uw)&&fl(t,s,i,e,n,r,this.Hw)&&fl(t,s,i,e,n,r,this.zw)&&fl(t,s,i,e,n,r,this.Jw)&&fl(t,s,i,e,n,r,this.qw)}Kw(t,s,i){return!dl(t,s,i,this.Jw)}}}{const Dl=self._s,Fl=self.ls,kl=Fl.ws,Ll=Fl.Ss,Nl=Fl.ds,Bl=Nl.create(),$l=kl.v(0,0,0),Wl=kl.v(0,0,0),jl=kl.v(0,0,0),Vl=kl.v(0,1,0),Ul=Ll.v(0,0,0,0),Hl=new Dl.Pl,zl=new Dl.Rect,Jl=new Dl.Pl(0,0,1,0,1,1,0,1),ql={Zw:1,Qw:1e4},Yl=Nl.v(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Dl.Nw.tS=class{constructor(t){t=Object.assign({},ql,t),this.Ay=0,this.Ry=0,this.sS=Dl.Qn(45),this.iS=Math.tan(this.sS/2),this.eS=Nl.create(),this.nS=Nl.create(),this.rS=!1,this.hS=t.Zw,this.oS=t.Qw,this.aS=[],this.lS=new Map,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=null,this.gS=null,this.yS=null,this.wS=null,this.SS=null,this.vS=null,this.bS=null,this.MS=new Map,this.CS=null,this.TS=[],this.xS=new Map,this.IS=0,this._S=0,this.GS=1,this.PS=[this.GS],this.AS=1,this.RS=[this.AS],this.ES=.5,this.OS=[this.ES],this.DS=0,this.FS=!0,this.kS=!1}LS(){this.IS=0,this._S=0,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=null,this.gS=null,this.yS=null,this.wS=null,this.SS=null,this.vS=null,this.bS=null,this.NS()}BS(){this.LS(),this.CS=null}$S(){for(const t of this.aS)t.zn();this.LS()}Vg(){return this.Ay}Qg(){return this.Ry}WS(t){return this.jS()?100:t/(2*this.VS())}US(t){return this.jS()?t/(2*this.VS())/this.WS(t):1}HS(t){this.hS=t}zS(){return this.hS}JS(t){this.oS=t}qS(){return this.oS}YS(t){this.sS=t,this.iS=Math.tan(this.sS/2)}XS(){return this.sS}VS(){return this.iS}KS(){this.rS=!1}ZS(){this.rS=!0}jS(){return!this.rS}QS(){return this.rS}tv(t,s,i=.5,e=.5){const n=this.zS(),r=this.qS(),h=this.XS();if(.5===i&&.5===e)this.sv()?Nl.ut(t,h,s,n,r):Nl.perspective(t,h,s,n,r);else{const h=2*(i=1-i)-2,o=2*i,a=2*e-2,l=2*e,u=this.VS()*n,c=u*s;Nl.ot(t,h*c,o*c,a*u,l*u,n,r),this.sv()&&Nl.mul(t,Yl,t)}}ev(t,s,i,e=1){const n=self.devicePixelRatio,r=2*this.WS(i)*n*this.VS()/i,h=s*r/(2*n*e),o=i*r/(2*n*e),a=-h,l=h,u=-o,c=o;this.sv()?Nl.gt(t,a,l,u,c,this.zS(),this.qS()):Nl.dt(t,a,l,u,c,this.zS(),this.qS())}nv(t,s,i,e,n,r=1){let h=1;this.jS()&&(h=200*this.VS()/n);const o=jl;kl.set(o,h,-h,1);const a=$l,l=Wl;kl.multiply(a,s,o),kl.multiply(l,i,o),Nl.yt(t,a,l,e||Vl),o[2]=r,Nl.scale(t,t,o)}rv(t,s,i,e,n,r,h,o){return kl.set($l,t,s,i),kl.set(Wl,e,n,r),this.nv(Bl,$l,Wl,Vl,h,o),Bl}hv(t){this.aS.push(t),this.lS.set(t.Ac(),t)}ov(t){const s=this.aS.indexOf(t);-1!==s&&this.aS.splice(s,1),this.lS.delete(t.Ac())}NS(){Dl.bh(this.aS),this.lS.clear()}av(t){return this.lS.get(t)||null}lv(){return this.uS}uv(){this.cv(this.uS)}fv(){return this.cS}dv(){this.cv(this.cS)}pv(){this.cv(this.fS)}mv(){this.cv(this.dS)}gv(){this.cv(this.pS)}yv(){this.cv(this.mS)}wv(){this.cv(this.gS)}Sv(){this.cv(this.yS)}vv(){this.cv(this.wS)}bv(){this.cv(this.SS)}Mv(){this.cv(this.vS)}Cv(){this.cv(this.bS)}Tv(t){this.CS=t}xv(){return this.CS}Iv(t,s,i,e,n,r){const h=Dl.Nw.Gv._v(t,s,i,e,n,r);let o=this.MS.get(h);return o||(o=Dl.Hn(Dl.Nw.Gv,this,t,s,i,e,n,r),this.MS.set(h,o)),o.Pv(),o}Av(t){t.Rv(),0===t.Ev()&&(this.CS===t&&(this.CS=null),this.MS.delete(t.Ov()),t.zn())}Dv(t){Dl.bh(this.TS),this.xS.clear();let s=0;for(const i of t){const t=i[0],e=i[1],n=i[2];this.TS.push([e,n]),this.xS.set(t,{number:s,Fv:e,kv:n}),s++}}Lv(t){return this.TS[t]}Nv(t){return this.Lv(t)[0]}Bv(t){return this.Lv(t)[1]}$v(t){const s=this.xS.get(t);if(void 0===s)throw new Error("invalid blend name");return s}Wv(t){const s=this.xS.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}jv(t){this.IS=t}Vv(){return this.IS}Uv(t){this._S=t,this.CS=null}Hv(){return this._S}ny(t,s,i,e){const n=Dl.rr(t,s,i,e),r=Math.sin(n),h=Math.cos(n),o=.5*this.GS,a=r*o,l=h*o,u=this.AS;2===u?this.zv(t,s,0,i,e,0,a,l):1===u?this.Jv(t,s,0,i,e,0,a,l):this.qv(t,s,0,i,e,0,a,l)}Yv(t,s,i,e,n,r){const h=Dl.rr(t,s,e,n),o=Math.sin(h),a=Math.cos(h),l=.5*this.GS,u=o*l,c=a*l,f=this.AS;2===f?this.zv(t,s,i,e,n,r,u,c):1===f?this.Jv(t,s,i,e,n,r,u,c):this.qv(t,s,i,e,n,r,u,c)}zv(t,s,i,e,n,r,h,o){const a=this.ES,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=2*o,p=2*h,m=l+h,g=u-o,y=l-h+d,w=u+o+p,S=c+h,v=f-o,b=c-h-d,M=f+o-p;this.Xv(m,g,i,S,v,r,b,M,r,y,w,i,Jl)}Jv(t,s,i,e,n,r,h,o){const a=this.ES,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,v=f+o;this.Xv(d,p,i,y,w,r,S,v,r,m,g,i,Jl)}qv(t,s,i,e,n,r,h,o){const a=this.ES,l=t+a,u=s+a,c=e+a,f=n+a,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,v=f+o;this.Xv(d,p,i,y,w,r,S,v,r,m,g,i,Jl)}Kv(t,s,i,e,n,r){const h=Dl.rr(t,s,i,e),o=Math.sin(h),a=Math.cos(h),l=.5*this.GS,u=o*l,c=a*l,f=this.AS;2===f?this.Zv(t,s,i,e,u,c,n,r):1===f?this.Qv(t,s,i,e,u,c,n,r):this.tb(t,s,i,e,u,c,n,r)}Zv(t,s,i,e,n,r,h,o){const a=this.ES,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=2*r,p=2*n,m=l+n,g=u-r,y=l-n+d,w=u+r+p,S=c+n,v=f-r,b=c-n-d,M=f+r-p;Hl.set(m,g,S,v,b,M,y,w),zl.set(h,0,o,0),this.sb(Hl,zl)}Qv(t,s,i,e,n,r,h,o){const a=this.ES,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,v=f+r;Hl.set(d,p,y,w,S,v,m,g),zl.set(h,0,o,0),this.sb(Hl,zl)}tb(t,s,i,e,n,r,h,o){const a=this.ES,l=t+a,u=s+a,c=i+a,f=e+a,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,v=f+r;Hl.set(d,p,y,w,S,v,m,g),zl.set(h,0,o,0),this.sb(Hl,zl)}ib(t,s,i,e){const n=.5*this.GS,r=this.AS;2===r?this.eb(t,s,i,e,n):1===r?this.nb(t,s,i,e,n):this.rb(t,s,i,e,n)}eb(t,s,i,e,n){this.zv(t,s,0,i,s,0,0,n),this.zv(i,s,0,i,e,0,n,0),this.zv(i,e,0,t,e,0,0,-n),this.zv(t,e,0,t,s,0,-n,0)}nb(t,s,i,e,n){this.Jv(t,s,0,i,s,0,0,n),this.Jv(i,s,0,i,e,0,n,0),this.Jv(i,e,0,t,e,0,0,-n),this.Jv(t,e,0,t,s,0,-n,0)}rb(t,s,i,e,n){this.qv(t,s,0,i,s,0,0,n),this.qv(i,s,0,i,e,0,n,0),this.qv(i,e,0,t,e,0,0,-n),this.qv(t,e,0,t,s,0,-n,0)}hb(t){this.ib(t.Qa(),t.tl(),t.sl(),t.il())}ob(t){const s=Dl.rr(t.Br(),t.$r(),t.Wr(),t.jr()),i=Math.sin(s),e=Math.cos(s),n=.5*this.GS,r=i*n,h=e*n,o=this.AS;2===o?this.ab(t,r,h):1===o?this.lb(t,r,h):this.ub(t,r,h)}ab(t,s,i){this.zv(t.Br(),t.$r(),0,t.Wr(),t.jr(),0,s,i),this.zv(t.Wr(),t.jr(),0,t.Vr(),t.Ur(),0,i,-s),this.zv(t.Vr(),t.Ur(),0,t.Hr(),t.zr(),0,-s,-i),this.zv(t.Hr(),t.zr(),0,t.Br(),t.$r(),0,-i,s)}lb(t,s,i){this.Jv(t.Br(),t.$r(),0,t.Wr(),t.jr(),0,s,i),this.Jv(t.Wr(),t.jr(),0,t.Vr(),t.Ur(),0,i,-s),this.Jv(t.Vr(),t.Ur(),0,t.Hr(),t.zr(),0,-s,-i),this.Jv(t.Hr(),t.zr(),0,t.Br(),t.$r(),0,-i,s)}ub(t,s,i){this.qv(t.Br(),t.$r(),0,t.Wr(),t.jr(),0,s,i),this.qv(t.Wr(),t.jr(),0,t.Vr(),t.Ur(),0,i,-s),this.qv(t.Vr(),t.Ur(),0,t.Hr(),t.zr(),0,-s,-i),this.qv(t.Hr(),t.zr(),0,t.Br(),t.$r(),0,-i,s)}cb(t){this.GS=t,this.PS[this.PS.length-1]=t}fb(){return this.GS}pb(t){if(this.PS.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this.PS.push(t),this.GS=t}mb(){if(this.PS.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.PS.pop(),this.GS=this.PS.at(-1)}gb(){this.AS=0,this.RS[this.RS.length-1]=0}yb(){this.AS=1,this.RS[this.RS.length-1]=0}wb(){this.AS=2,this.RS[this.RS.length-1]=0}Sb(t){if("butt"===t)this.bb();else if("square"===t)this.Mb();else{if("zag"!==t)throw new Error("invalid line cap");this.Cb()}}bb(){if(this.RS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.RS.push(0),this.AS=0}Mb(){if(this.RS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.RS.push(1),this.AS=1}Cb(){if(this.RS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.RS.push(2),this.AS=2}Tb(){if(this.RS.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.RS.pop(),this.AS=this.RS.at(-1)}xb(t){this.ES=t,this.OS[this.OS.length-1]=t}Ib(){return this.ES}_b(t){if(this.OS.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this.OS.push(t),this.ES=t}Gb(){if(this.OS.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.OS.pop(),this.ES=this.OS.at(-1)}Pb(){this.Ab(0),this.Rb(0)}Eb(t){const s=t.length/2;if(s<3)throw new Error("need at least 3 points");const i=s-2,e=i-1,n=t[0],r=t[1];for(let s=0;s<i;s+=2){const i=2*s,h=t[i+2],o=t[i+3],a=t[i+4],l=t[i+5];if(s===e)this.Ob(n,r,h,o,a,l,a,l);else{const s=t[i+6],e=t[i+7];this.Ob(n,r,h,o,a,l,s,e)}}}Db(){this.Fb(!0),this.DS++}kb(){return this.DS}Lb(){this.DS++}Nb(t){this.FS=!!t}Bb(){return this.FS}$b(t){this.kS=!!t}Wb(){return this.kS}jb(){return!1}sv(){return!1}Vb(){}Ub(){}Hb(){}zb(){return this.Vb()+this.Ub()+this.Hb()}Jb(){return Dl.Hn(Dl.Nw.qb,this)}}}{const Xl=self._s;Xl.Nw.Yb=class{constructor(t,s){this.Yn=s.name,this.Xb=t,this.Kb=s.Zb||0,this.Qb=s.tM||0,this.sM=!!s.iM,this.eM=!!s.nM,this.rM=!!s.hM,this.oM=!!s.aM,this.lM=!!s.animated,this.uM=!!s.cM,this.fM=!!s.dM,this.pM=!1,this.mM=this.sM||this.uM||0!==this.Kb||0!==this.Qb}zn(){this.Xb=null}gM(){return this.Xb}Ac(){return this.Yn}yM(){return 0!==this.Kb||0!==this.Qb}wM(){return this.Kb}SM(){return this.Qb}vM(){return this.sM}bM(){return this.eM}MM(){return this.rM}CM(){return this.oM}TM(){return this.lM}xM(){return this.uM}IM(){return this.fM}_M(){return this.pM}GM(){return this.mM}PM(){return!1}}}{const Kl=self._s;Kl.Nw.Gv=class{constructor(t,s,i,e,n,r,h){this.Xb=t,this.Hp=0,this.AM=null,this.RM="",this.EM=i,this.OM=Kl.Hn(Kl.To),this.OM.set(e),this.DM=n,this.FM=r,this.kM=h,"string"==typeof s?this.RM=s:(this.AM=s,this.RM=this.AM.Ac())}zn(){if(this.Hp>0)throw new Error("releasing state group still in use");this.Xb=null,this.AM=null,this.RM=""}LM(){const t=this.Xb;t.cv(this.AM),t.NM(this.EM),t.BM(this.OM),t.Uv(this.DM),t.Ab(this.FM),t.Rb(this.kM),t.Tv(this)}Ov(){return Kl.Nw.Gv._v(this.RM,this.EM,this.OM,this.DM,this.FM,this.kM)}Pv(){++this.Hp}Rv(){--this.Hp}Ev(){return this.Hp}$M(){this.AM=null}WM(t){if(this.AM=t.av(this.RM),!this.AM)throw new Error("failed to restore shader program")}static _v(t,s,i,e,n,r){return("string"==typeof t?t:t.Ac())+","+s+","+i.No()+","+i.Bo()+","+i.$o()+","+i.Wo()+","+e+","+n+","+r}}}{let Zl=function(t,s,i){const e=i.Br(),n=i.$r(),r=i.Wr()-e,h=i.jr()-n;return[e+r*t+(i.Hr()-e)*s,n+h*t+(i.zr()-n)*s]};interpolateQuad=Zl;const Ql=globalThis._s,tu=globalThis.assert,su=65535;Ql.Nw.jM=class{constructor(t,s,i){this.VM=t,this.UM=s,this.HM=i,this.Aa=NaN,this.Ra=NaN,this.DM=NaN,this.zM=NaN,this.JM=NaN,this.Aa=0,this.Ra=0,this.DM=0,this.zM=0,this.JM=0}qM(t,s,i,e){this.Aa=t,this.Ra=s,this.zM=i,this.JM=e}YM(){return this.Aa}XM(t){this.Aa!==t&&(this.Aa=t,this.VM.KM())}ZM(){return this.Ra}QM(t){this.Ra!==t&&(this.Ra=t,this.VM.KM())}tC(){return this.DM}sC(t){this.DM!==t&&(this.DM=Math.max(t,0),this.VM.KM())}iC(){return this.zM}eC(t){this.zM=t}nC(){return this.JM}rC(t){this.JM=t}hC(t,s,i){[this.Aa,this.Ra]=Zl(t.Aa,t.Ra,s),this.DM=t.DM,this.zM=Ql._t(i.Qa(),i.sl(),t.zM),this.JM=Ql._t(i.tl(),i.il(),t.JM)}oC(t,s,i){[this.Aa,this.Ra]=Zl(t.Aa,t.Ra,s),this.DM=t.DM,[this.zM,this.JM]=Zl(t.zM,t.JM,i)}aC(){return{x:this.YM(),y:this.ZM(),z:this.tC(),u:this.iC(),v:this.nC()}}lC(t){this.XM(t.x),this.QM(t.y),t.hasOwnProperty("z")&&this.sC(t.z),this.eC(t.u),this.rC(t.v)}uC(){return this.VM}cC(){return this.UM}fC(){return this.HM}},Ql.Nw.dC=class{constructor(t,s,i){if(t<2||s<2)throw new Error("invalid mesh size");this.pC=t,this.mC=s,this.gC=i||null,this.yC=[],this.wC=0,this.SC=0,this.vC=1,this.bC=1,this.MC=0,this.CC=!1,this.TC=[],this.xC=0,this.IC=!0;const e=t-1,n=s-1;for(let i=0;i<s;++i){const s=[];for(let r=0;r<t;++r){const t=Ql.Hn(Ql.Nw.jM,this,r,i),h=r/e,o=i/n;t.qM(h,o,h,o),s.push(t)}this.yC.push(s)}}zn(){Ql.bh(this.yC),Ql.bh(this.TC)}_C(){return this.pC}GC(){return this.mC}PC(){return this.gC}AC(){return this.yC}KM(){this.CC=!0,this.IC=!0}RC(){if(!this.CC)return;let t=1/0,s=1/0,i=-1/0,e=-1/0,n=0;for(const r of this.yC)for(const h of r){const r=h.YM(),o=h.ZM();t=Math.min(t,r),s=Math.min(s,o),i=Math.max(i,r),e=Math.max(e,o),n=Math.max(n,h.tC())}this.wC=t,this.SC=s,this.vC=i,this.bC=e,this.MC=n,this.CC=!1}EC(){return this.RC(),this.wC}OC(){return this.RC(),this.SC}DC(){return this.RC(),this.vC}FC(){return this.RC(),this.bC}kC(){return this.RC(),this.MC}LC(){return this.kC()>0}NC(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.pC||s<0||s>=this.mC?null:this.yC[s][t]}BC(t,s,i){const e=i instanceof Ql.Rect;if(t._C()!==this._C()||t.GC()!==this.GC())throw new Error("source mesh wrong size");const n=t.yC,r=this.yC;for(let t=0,h=r.length;t<h;++t){const h=n[t],o=r[t];for(let t=0,n=o.length;t<n;++t){const n=h[t],r=o[t];e?r.hC(n,s,i):r.oC(n,s,i)}}this.IC=!0}$C(t){if(!this.IC&&this.xC===t)return;const s=this.pC,i=this.mC,e=this.TC,n=Math.floor(65535/s)-1;if(n<=0)throw new Error("mesh too large");const r=Math.ceil((i-1)/n);r<e.length&&(e.length=r);let h=0;for(let o=0;o<r;++o){const r=Math.min(n,i-h-1),a=(r+1)*s,l=3*a,u=2*a,c=(s-1)*r*6;if(o===e.length)e.push({WC:new Float32Array(l),jC:new Float32Array(u),VC:new Uint16Array(c)});else{const t=e[o];t.WC.length!==l&&(t.WC=new Float32Array(l)),t.jC.length!==u&&(t.jC=new Float32Array(u)),t.VC.length!==c&&(t.VC=new Uint16Array(c))}const{WC:f,jC:d,VC:p}=e[o];this.UC(h,r,t,f,d,p),h+=n}this.xC=t,this.IC=!1}UC(t,s,i,e,n,r){const h=this.yC,o=this.pC;let a=0,l=0,u=0;for(let c=t,f=t+s+1;c<f;++c){const s=h[c],d=c+1,p=c-t,m=p*o,g=(p+1)*o;for(let t=0,h=s.length;t<h;++t){const o=s[t],c=t+1;if(e[a++]=o.YM(),e[a++]=o.ZM(),e[a++]=o.tC()+i,n[l++]=o.iC(),n[l++]=o.nC(),c<h&&d<f){const s=t+m,i=c+m,e=c+g,n=t+g;r[u++]=s,r[u++]=i,r[u++]=e,r[u++]=s,r[u++]=e,r[u++]=n}}}}HC(t,s){this.$C(s);for(const{WC:s,jC:i,VC:e}of this.TC)t.zC(s,i,e)}JC(t,s){s||(s=(t,s,i)=>[t,s,i]);const i=this.yC;let e=i[0];for(let n=1,r=i.length;n<r;++n){const h=i[n];let o=e[0],a=h[0];for(let i=1,l=h.length;i<l;++i){const u=e[i],c=h[i],[f,d,p]=s(o.YM(),o.ZM(),o.tC()),[m,g,y]=s(u.YM(),u.ZM(),u.tC()),[w,S,v]=s(c.YM(),c.ZM(),c.tC()),[b,M,C]=s(a.YM(),a.ZM(),a.tC());t.Yv(f,d,p,m,g,y),t.Yv(f,d,p,w,S,v),t.Yv(f,d,p,b,M,C),i===l-1&&t.Yv(m,g,y,w,S,v),n===r-1&&t.Yv(b,M,C,w,S,v),o=u,a=c}e=h}}qC(t){const s=.001,i=.99999999,e=t.pu(),n=[],r=this._C()-1,h=this.GC()-1,o=1/r,a=1/h,l=r-1,u=h-1;let c=e[0],f=e[1],d=Ql.Kn(Math.floor(c*r),0,l),p=Ql.Kn(Math.floor(f*h),0,u),m=!0,g=0,y=0,w=0,S=-1;const v=()=>{c=Ql.Kn(Ql._t(c,g,w),0,1),f=Ql.Kn(Ql._t(f,y,w),0,1),n.push(c,f)};for(let t=0,b=e.length;t<b;t+=2){c=e[t],f=e[t+1],n.push(c,f),d=Ql.Kn(Math.floor(c*r),0,l),p=Ql.Kn(Math.floor(f*h),0,u);const M=(t+2)%b;for(g=e[M],y=e[M+1],S=-1;;){if(n.length>1e6)throw new Error("Too many mesh poly points");const t=d*o,e=p*a,r=(d+1)*o,h=(p+1)*a;if(m=Ql.Xr(c,f,t,e,r,e,r,h),0!==S&&(w=Ql.Yr(c,f,g,y,t,e,r,h,-.001),w>=0&&w<=i))v(),m=!m,S=0;else if(p>0&&2!==S&&(w=Ql.Yr(c,f,g,y,t,e,r,e,s),w>=0&&w<=i))v(),p--,m=!1,S=4;else if(d<l&&3!==S&&(w=Ql.Yr(c,f,g,y,r,e,r,h,s),w>=0&&w<=i))v(),d++,m=!1,S=1;else if(d>0&&1!==S&&(w=Ql.Yr(c,f,g,y,t,e,t,h,s),w>=0&&w<=i))v(),d--,m=!0,S=3;else{if(!(p<u&&4!==S&&(w=Ql.Yr(c,f,g,y,t,h,r,h,s),w>=0&&w<=i)))break;v(),p++,m=!0,S=2}}}return Ql.Hn(Ql.lu,n)}YC(t,s){const i=this.XC(t);this.KC(i),s.gu(i)}XC(t){const s=[],i=t.pu();for(let t=0,e=i.length;t<e;t+=2){const e=i[t],n=i[t+1],[r,h]=this.ZC(e,n);s.push(r,h)}return s}ZC(t,s){const i=this._C()-1,e=this.GC()-1,n=1/i,r=1/e,h=Ql.Kn(Math.floor(t*i),0,i-1),o=Ql.Kn(Math.floor(s*e),0,e-1),a=h*n,l=o*r,u=(h+1)*n,c=(o+1)*r,f=this.NC(h,o),d=this.NC(h+1,o+1),p=Ql.Xr(t,s,a,l,u,l,u,c),m=p?a+n:a,g=p?l:l+r,y=this.NC(h+(p?1:0),o+(p?0:1)),[w,S,v]=Ql.Kr(t,s,a,l,m,g,u,c);return Ql.Zr(w,S,v,f.YM(),f.ZM(),f.tC(),y.YM(),y.ZM(),y.tC(),d.YM(),d.ZM(),d.tC())}KC(t){const s=[],i=1e-7;let e=t[0],n=t[1],r=e-t.at(-2),h=n-t.at(-1);for(let o=0,a=t.length;o<a;o+=2){const l=(o+2)%a,u=t[l],c=t[l+1],f=u-e,d=c-n,p=Math.abs(f)<i&&Math.abs(r)<i&&Math.sign(d)===Math.sign(h),m=Math.abs(d)<i&&Math.abs(h)<i&&Math.sign(f)===Math.sign(r);(!p&&!m&&Math.abs(f/r-d/h)>.001||0==f&&0===d)&&s.push(e,n),e=u,n=c,r=f,h=d}s.length>=6&&s.length<t.length&&Ql.xh(t,s)}aC(){return{cols:this._C(),rows:this.GC(),points:this.yC.map(t=>t.map(t=>t.aC()))}}lC(t){const s=this._C(),i=this.GC();if(t.cols!==s||t.rows!==i)throw new Error("mesh data wrong size");const e=t.points;for(let t=0;t<i;++t){const i=e[t];for(let e=0;e<s;++e)this.NC(e,t).lC(i[e])}}}}{let iu=function(t,s){let i,e,n,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{QC:i,tT:e,format:n,type:r}};GetFormatSpecifiers=iu;const eu=self._s,nu=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),ru=new Set(["nearest","bilinear","trilinear"]),hu=new Set(["default","low","high"]),ou=new Set(["clamp-to-edge","repeat","mirror-repeat"]),au={sT:"clamp-to-edge",iT:"clamp-to-edge",eT:"trilinear",nT:0,rT:"rgba8",hT:!0,oT:"default",aT:!0,lT:!1,width:-1,height:-1},lu={aT:!0,flipY:!1},uu=new Set;eu.Nw.uT=class{constructor(t){this.Xb=t,this.cT=null,this.Ay=0,this.Ry=0,this.fT=!0,this.dT="clamp-to-edge",this.pT="clamp-to-edge",this.mT="trilinear",this.gT=0,this.yT="rgba8",this.wT=!1,this.ST="default",this.Hp=0}vT(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer))throw new Error("invalid texture source");if(s=Object.assign({},au,s),this.cT)throw new Error("already created texture");if(this.dT=s.sT,this.pT=s.iT,this.mT=s.eT,this.gT=s.nT,this.yT=s.rT,this.wT=!!s.hT&&this.Xb.Bb(),this.ST=s.oT,!ou.has(this.dT)||!ou.has(this.pT))throw new Error("invalid wrap mode");if(!ru.has(this.mT))throw new Error("invalid sampling");if(!nu.has(this.yT))throw new Error("invalid pixel format");if(!hu.has(this.ST))throw new Error("invalid mipmap quality");if(this.fT=!0,t instanceof ArrayBuffer||null===t||s.lT){if(this.Ay=s.width,this.Ry=s.height,t instanceof ArrayBuffer&&t.byteLength!==this.Ay*this.Ry*4)throw new Error("ArrayBuffer wrong size")}else this.Ay=t.width,this.Ry=t.height;if(this.Ay<=0||this.Ry<=0)throw new Error("invalid texture data size");if(s.lT){const s=eu.co(this.Ay,this.Ry);s.getContext("2d").drawImage(t,0,0,this.Ay,this.Ry),t=s}const i=eu.vr(this.Ay)&&eu.vr(this.Ry),e=this.Xb.bT();if(this.Ay>e||this.Ry>e)throw new Error("texture data exceeds maximum texture size");const n=this.Xb.MT(),r=this.Xb.CT();this.cT=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.cT),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.aT),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const h=iu(this.yT,n);if(this.Xb.TT()||i||!this.xT())if(r>=2){let s;s=this.wT?Math.floor(Math.log2(Math.max(this.Ay,this.Ry))+1):1,n.texStorage2D(n.TEXTURE_2D,s,h.QC,this.Ay,this.Ry),t instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.Ay,this.Ry,h.format,h.type,new Uint8Array(t)):null!==t&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t)}else t instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.tT,this.Ay,this.Ry,0,h.format,h.type,new Uint8Array(t)):null===t?n.texImage2D(n.TEXTURE_2D,0,h.tT,this.Ay,this.Ry,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.tT,h.format,h.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this.Ay,this.Ry)),t instanceof ImageData){const s=eu.co(this.Ay,this.Ry);s.getContext("2d").putImageData(t,0,0),t=s}const s=eu.co(eu.br(this.Ay),eu.br(this.Ry)),i=s.getContext("2d");i.imageSmoothingEnabled="nearest"!==this.mT,i.drawImage(t,0,0,this.Ay,this.Ry,0,0,s.width,s.height),n.texImage2D(n.TEXTURE_2D,0,h.tT,h.format,h.type,s)}null!==t&&this.IT(n),n.bindTexture(n.TEXTURE_2D,null),this.Xb._T(),this.Hp=1,uu.add(this)}GT(t,s,i){if(i=Object.assign({},au,i),this.cT)throw new Error("already created texture");if(this.dT=i.sT,this.pT=i.iT,this.mT=i.eT,this.yT=i.rT,this.wT=!!i.hT&&this.Xb.Bb(),this.ST=i.oT,!ou.has(this.dT)||!ou.has(this.pT))throw new Error("invalid wrap mode");if(!ru.has(this.mT))throw new Error("invalid sampling");if(!nu.has(this.yT))throw new Error("invalid pixel format");if(!hu.has(this.ST))throw new Error("invalid mipmap quality");this.fT=!1,this.Ay=Math.floor(t),this.Ry=Math.floor(s);const e=eu.vr(this.Ay)&&eu.vr(this.Ry),n=this.Xb.bT();if(this.Ay<=0||this.Ry<=0)throw new Error("invalid texture size");if(this.Ay>n||this.Ry>n)throw new Error("texture exceeds maximum texture size");if(!this.Xb.TT()&&this.xT()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.Xb.MT(),h=this.Xb.CT();this.cT=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.cT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.aT),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const o=iu(this.yT,r),a=h>=2?o.QC:o.tT;r.texImage2D(r.TEXTURE_2D,0,a,this.Ay,this.Ry,0,o.format,o.type,null),this.IT(r),r.bindTexture(r.TEXTURE_2D,null),this.Xb._T(),this.Hp=1,uu.add(this)}PT(t){if("default"===this.ST)return this.fT?t.NICEST:t.FASTEST;if("low"===this.ST)return t.FASTEST;if("high"===this.ST)return t.NICEST;throw new Error("invalid mipmap quality")}xT(){return"clamp-to-edge"!==this.dT||"clamp-to-edge"!==this.pT}AT(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}IT(t){const s=eu.vr(this.Ay)&&eu.vr(this.Ry);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.AT(t,this.dT)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.AT(t,this.pT)),"nearest"===this.mT)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.wT=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.Xb.TT())&&this.wT){t.hint(t.GENERATE_MIPMAP_HINT,this.PT(t)),t.generateMipmap(t.TEXTURE_2D);const s="trilinear"===this.mT&&!this.Xb.Wb();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.wT=!1;const i=this.Xb.RT();i&&this.gT>0&&"nearest"!==this.mT&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.gT,this.Xb.ET()))}OT(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.cT||this.Hp<=0)throw new Error("texture not created");if(this.fT)throw new Error("cannot update static texture");s=Object.assign({},lu,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,n=this.Xb.CT(),r=this.Xb.MT();r.bindTexture(r.TEXTURE_2D,this.cT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.aT),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY);const h=iu(this.yT,r),o=n>=2?h.QC:h.tT;try{if(this.Ay===i&&this.Ry===e){const s=eu.vr(this.Ay)&&eu.vr(this.Ry);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(s||this.Xb.TT())&&this.wT&&(r.hint(r.GENERATE_MIPMAP_HINT,this.PT(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Ay=i,this.Ry=e;const s=eu.vr(this.Ay)&&eu.vr(this.Ry);if(!this.Xb.TT()&&this.xT()&&!s)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(s||this.Xb.TT())&&this.wT&&(r.hint(r.GENERATE_MIPMAP_HINT,this.PT(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.Xb._T()}DT(){if(this.Hp>0)throw new Error("texture still has references");if(!this.cT)throw new Error("already deleted texture");uu.delete(this),this.Xb.MT().deleteTexture(this.cT),this.cT=null}FT(){return!!this.cT}kT(){return this.cT}gM(){return this.Xb}LT(){this.Hp++}NT(){if(this.Hp<=0)throw new Error("no more references");this.Hp--}BT(){return this.Hp}Vg(){return this.Ay}Qg(){return this.Ry}$T(){return this.fT}WT(){let t=this.Ay*this.Ry;switch(this.yT){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.wT&&(t+=Math.floor(t/3)),t}static $M(){uu.clear()}static jT(){return uu.values()}}}{const cu=self._s,fu=self.assert,du=self.ls,pu=du.ws,mu=du.ds,gu=new Set(["nearest","bilinear","trilinear"]),yu={eT:"trilinear",alpha:!0,depth:!1,VT:!0,UT:!0,HT:0},wu=new Set;cu.Nw.zT=class{constructor(t){this.Xb=t,this.JT=null,this.qT=null,this.cT=null,this.YT=null,this.Ay=0,this.Ry=0,this.XT=!0,this.mT="trilinear",this.KT=!0,this.ZT=!1,this.QT=!0,this.tx=0,this.sx=mu.create(),this.ix=0,this.nx=0,this.hx=0}ox(t,s,i){i=Object.assign({},yu,i);const e=this.Xb.CT();if(this.cT||this.YT)throw new Error("already created render target");if(this.mT=i.eT,this.KT=!!i.alpha,this.ZT=!!i.depth,this.QT=!!i.VT,this.XT=!!i.UT,this.tx=i.HT,!gu.has(this.mT))throw new Error("invalid sampling");if(this.tx>0&&(e<2||this.QT))throw new Error("invalid use of multisampling");if(e<2&&(this.QT=!0),this.Ay=t,this.Ry=s,this.Ay<=0||this.Ry<=0)throw new Error("invalid render target size");this.lx();const n=this.Xb.MT();if(this.JT=n.createFramebuffer(),this.ZT&&(this.qT=n.createFramebuffer()),this.QT){this.cT=this.Xb.ux(this.Ay,this.Ry,{eT:this.mT,rT:this.KT?"rgba8":"rgb8",hT:!1});const t=this.cT.kT();n.bindFramebuffer(n.FRAMEBUFFER,this.JT),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.ZT&&(n.bindFramebuffer(n.FRAMEBUFFER,this.qT),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0))}else{this.YT=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.YT);const t=this.KT?n.RGBA8:n.RGB8;if(this.tx>0){const s=n.getInternalformatParameter(n.RENDERBUFFER,t,n.SAMPLES);if(s&&s[0]){const t=s[0];this.tx>t&&(this.tx=t)}else this.tx=0}0===this.tx?n.renderbufferStorage(n.RENDERBUFFER,t,this.Ay,this.Ry):n.renderbufferStorageMultisample(n.RENDERBUFFER,this.tx,t,this.Ay,this.Ry),n.bindFramebuffer(n.FRAMEBUFFER,this.JT),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.YT),this.ZT&&(n.bindFramebuffer(n.FRAMEBUFFER,this.qT),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.YT)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this.Xb.mx();this.ZT&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.JT),this.Xb.gx()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),wu.add(this)}yx(t,s){if(this.Ay===t&&this.Ry===s)return;this.Ay=t,this.Ry=s,this.lx();const i=this.Xb.MT();i.bindFramebuffer(i.FRAMEBUFFER,this.JT),this.cT?this.cT.OT(new ImageData(this.Ay,this.Ry)):(i.bindRenderbuffer(i.RENDERBUFFER,this.YT),i.renderbufferStorage(i.RENDERBUFFER,this.KT?i.RGBA8:i.RGB8,this.Ay,this.Ry),i.bindRenderbuffer(i.RENDERBUFFER,null));const e=this.Xb.mx();this.ZT&&e&&(this.Xb.gx()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}DT(){if(!this.cT&&!this.YT)throw new Error("already deleted render target");wu.delete(this);const t=this.Xb.MT();this.cT?(t.bindFramebuffer(t.FRAMEBUFFER,this.JT),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.ZT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.qT),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.Xb.wx(this.cT),this.cT=null):this.YT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.JT),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.ZT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.qT),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.YT),this.YT=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.Xb.CT()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.JT),this.ZT&&t.deleteFramebuffer(this.qT);const s=this.Xb.Sx();s.vx=null,s.bx=null,this.JT=null}lx(){this.Xb.tv(this.sx,this.Ay/this.Ry),this.ix=this.Xb.XS(),this.nx=this.Xb.zS(),this.hx=this.Xb.qS()}Mx(){return this.JT}Cx(){return this.qT}gM(){return this.Xb}Tx(){return this.cT}xx(){return this.Xb.XS()===this.ix&&this.Xb.zS()===this.nx&&this.Xb.qS()===this.hx||this.lx(),this.sx}Ix(){return"nearest"!==this.mT}_x(){return this.KT}Gx(){return this.QT}Px(){return this.ZT}Vg(){return this.Ay}Qg(){return this.Ry}Ax(){return this.XT}Rx(){return this.tx}Ex(){const t={eT:this.mT,alpha:this.KT,VT:this.QT};return this.XT||(t.width=this.Ay,t.height=this.Ry),t}Ox(t){return"nearest"!==(t=Object.assign({},yu,t)).eT===this.Ix()&&!!t.alpha===this._x()&&!!t.depth===this.Px()&&!(this.Xb.CT()>=2&&!!t.VT!==this.Gx())&&("number"==typeof t.width||"number"==typeof t.height?!this.Ax()&&this.Vg()===Math.floor(t.width)&&this.Qg()===Math.floor(t.height):this.Ax())}Dx(){return this.cT?this.cT.kT():null}WT(){return this.cT?this.cT.WT():this.Ay*this.Ry*(this.KT?4:3)}static async Fx(t,s){const i=await t.kx(s,!0);return await cu.po(i)}static $M(){wu.clear()}static Lx(){return wu.values()}static Nx(t,s){for(const i of wu)i.Ax()&&i.yx(t,s)}}}{const Su=self._s,vu=self.ls,bu=vu.ws,Mu=vu.ds,Cu=new Set(["aPos","aTex","aColor","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);Su.Nw.Bx=class extends Su.Nw.Yb{static async $x(t,s){const i=t.MT(),e=s.src,n=s.Wx,r=s.name,h=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(h,e),i.compileShader(h);const o=i.createShader(i.VERTEX_SHADER);i.shaderSource(o,n),i.compileShader(o);const a=i.createProgram();i.attachShader(a,h),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aColor"),i.bindAttribLocation(a,3,"aPoints"),i.linkProgram(a);const l=t.jx();if(l?await t.Vx(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await Su.ph(5),!i.getShaderParameter(h,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(h);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+t)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(o);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+t)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const t=i.getProgramInfoLog(a);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+t)}const u=Su.Cm(i.getProgramInfoLog(a)||"").trim();return u&&!Su.vm(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(h),i.deleteShader(o),a}static async Ux(t,s){const i=await Su.Nw.Bx.$x(t,s);return new Su.Nw.Bx(t,i,s)}constructor(t,s,i){super(t,i);const e=t.MT(),n=t.Sx();t.Fb(),e.useProgram(s),this.Hx=e,this.AM=s,this.zx="<default-device-transform>"===i.name;const r=e.getAttribLocation(s,"aPos"),h=e.getAttribLocation(s,"aTex"),o=e.getAttribLocation(s,"aColor");this.Jx=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.qx),e.vertexAttribPointer(r,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==h&&(e.bindBuffer(e.ARRAY_BUFFER,t.Yx),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(h)),-1!==o&&(e.bindBuffer(e.ARRAY_BUFFER,t.Xx),e.vertexAttribPointer(o,4,t.Kx()?e.HALF_FLOAT:e.FLOAT,!1,0,0),e.enableVertexAttribArray(o)),-1!==this.Jx&&(e.bindBuffer(e.ARRAY_BUFFER,t.Zx),e.vertexAttribPointer(this.Jx,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.Jx)),e.bindBuffer(e.ARRAY_BUFFER,null),this.Qx=new Su.Nw.tI(this,"matP","mat4"),this.sI=new Su.Nw.tI(this,"matMV","mat4"),this.iI=new Su.Nw.tI(this,"color","vec4"),this.eI=new Su.Nw.tI(this,"samplerFront","sampler"),this.nI=new Su.Nw.tI(this,"pointTexStart","vec2"),this.rI=new Su.Nw.tI(this,"pointTexEnd","vec2"),this.hI=new Su.Nw.tI(this,"zElevation","float"),this.oI=new Su.Nw.tI(this,"tileSize","vec2"),this.aI=new Su.Nw.tI(this,"tileSpacing","vec2"),this.lI=new Su.Nw.tI(this,"color2_","vec4"),this.uI=new Su.Nw.tI(this,"outlineThickness","float"),this.cI=new Su.Nw.tI(this,"samplerBack","sampler"),this.fI=new Su.Nw.tI(this,"samplerDepth","sampler"),this.dI=new Su.Nw.tI(this,"destStart","vec2"),this.pI=new Su.Nw.tI(this,"destEnd","vec2"),this.mI=new Su.Nw.tI(this,"srcStart","vec2"),this.gI=new Su.Nw.tI(this,"srcEnd","vec2"),this.yI=new Su.Nw.tI(this,"srcOriginStart","vec2"),this.wI=new Su.Nw.tI(this,"srcOriginEnd","vec2"),this.SI=new Su.Nw.tI(this,"pixelSize","vec2"),this.vI=new Su.Nw.tI(this,"seconds","float"),this.bI=new Su.Nw.tI(this,"devicePixelRatio","float"),this.MI=new Su.Nw.tI(this,"layerScale","float"),this.CI=new Su.Nw.tI(this,"layerAngle","float"),this.TI=new Su.Nw.tI(this,"layoutStart","vec2"),this.xI=new Su.Nw.tI(this,"layoutEnd","vec2"),this.II=new Su.Nw.tI(this,"zNear","float"),this._I=new Su.Nw.tI(this,"zFar","float"),this.GI=!!(this.SI.AI()||this.vI.AI()||this.cI.AI()||this.dI.AI()||this.pI.AI()||this.mI.AI()||this.gI.AI()||this.yI.AI()||this.wI.AI()||this.bI.AI()||this.MI.AI()||this.CI.AI()||this.TI.AI()||this.xI.AI());const a=i.parameters||[];this.RI=[],this.pM=this.SI.AI()||this.mI.AI()||this.gI.AI()||this.yI.AI()||this.wI.AI(),this.EI=!1,this.OI=!1,this.iI.DI(1,1,1,1),this.lI.DI(1,1,1,1),this.eI.FI(0),this.cI.FI(1),this.fI.FI(2),this.nI.kI(0,0),this.rI.kI(1,1),this.hI.LI(0),this.oI.kI(0,0),this.aI.kI(0,0),this.dI.kI(0,0),this.pI.kI(1,1),this.mI.kI(0,0),this.gI.kI(0,0),this.yI.kI(0,0),this.wI.kI(0,0),this.SI.kI(0,0),this.bI.LI(1),this.II.LI(t.zS()),this._I.LI(t.qS()),this.MI.LI(1),this.CI.LI(0),this.vI.LI(0),this.TI.kI(0,0),this.xI.kI(0,0),this.uI.LI(1);for(const t of a){const s=t[0],i=t[2],e=new Su.Nw.tI(this,s,i);"color"===i?e.NI(0,0,0):e.LI(0),this.RI.push(e)}this.zx?this.BI(n.$I):(this.WI(n.$I,!0),this.jI(n.VI,!0));const l=n.UI;e.useProgram(l?l.AM:null)}zn(){this.Hx.deleteProgram(this.AM),this.AM=null,this.Xb.ov(this),this.Hx=null,super.zn()}HI(){return this.Hx}zI(){return this.AM}JI(){return this.RI.length}qI(t){return t<0||t>=this.RI.length?null:this.RI[t].YI()}XI(t){for(let s=0,i=t.length;s<i;++s)if(!this.RI[s].KI(t[s]))return!1;return!0}ZI(t){for(let s=0,i=t.length;s<i;++s)this.RI[s].QI(t[s])}t_(t,s,i,e,n,r,h,o,a,l){return!(this.cI.AI()||this.SI.AI()&&!this.SI.s_(n,r)||this.dI.AI()&&!this.dI.s_(t.Qa(),t.tl())||this.pI.AI()&&!this.pI.s_(t.sl(),t.il())||this.bI.AI()&&!this.bI.i_(h)||this.MI.AI()&&!this.MI.i_(o)||this.CI.AI()&&!this.CI.i_(a)||this.mI.AI()&&!this.mI.s_(s.Qa(),s.tl())||this.gI.AI()&&!this.gI.s_(s.sl(),s.il())||this.yI.AI()&&!this.yI.s_(i.Qa(),i.tl())||this.wI.AI()&&!this.wI.s_(i.sl(),i.il())||this.TI.AI()&&!this.TI.s_(e.Qa(),e.tl())||this.xI.AI()&&!this.xI.s_(e.tl(),e.il())||this.vI.AI()&&!this.vI.i_(l))}e_(t,s,i,e,n,r,h,o,a,l){this.cI.AI()||(this.SI.AI()&&this.SI.n_(n,r),this.dI.AI()&&this.dI.n_(t.Qa(),t.tl()),this.pI.AI()&&this.pI.n_(t.sl(),t.il()),this.bI.AI()&&this.bI.r_(h),this.MI.AI()&&this.MI.r_(o),this.CI.AI()&&this.CI.r_(a),this.mI.AI()&&this.mI.n_(s.Qa(),s.tl()),this.gI.AI()&&this.gI.n_(s.sl(),s.il()),this.yI.AI()&&this.yI.n_(i.Qa(),i.tl()),this.wI.AI()&&this.wI.n_(i.sl(),i.il()),this.TI.AI()&&this.TI.n_(e.Qa(),e.tl()),this.xI.AI()&&this.xI.n_(e.tl(),e.il()),this.vI.AI()&&this.vI.r_(l))}WI(t,s){this.EI&&!s||this.zx||(this.Qx.AI()&&this.Qx.h_(t),this.EI=!0)}o_(){this.EI=!1}jI(t,s){this.OI&&!s||this.zx||(this.sI.AI()&&this.sI.h_(t),this.OI=!0)}a_(){this.OI=!1}BI(t){if(!this.zx)throw new Error("not device transform shader");this.Qx.h_(t);const s=this.Xb,i=s.Vg()/2,e=s.Qg()/2,n=s.rv(i,e,s.WS(s.Qg()),i,e,0,s.Qg());this.sI.h_(n)}l_(t){this.iI.AI()&&this.iI.u_(t[0],t[1],t[2],t[3])}static c_(){return Cu}static f_(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static d_(t){const s=t?"highp":"mediump";return["attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"attribute lowp vec4 aColor;","varying lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static p_(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"in lowp vec4 aColor;","out lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static m_(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","}"].join("\n")}static g_(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static y_(t){return["#version 300 es",Su.Nw.Bx.f_(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static w_(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","}"].join("\n")}static S_(){return["#extension GL_EXT_frag_depth : enable","varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static v_(t){return["#version 300 es",Su.Nw.Bx.f_(t),"in highp vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static b_(t,s,i,e){let n="";return t>=2?n="#version 300 es\n"+Su.Nw.Bx.f_(e):(s&&(n="#extension GL_EXT_frag_depth : enable\n"),i&&(n+="#extension GL_EXT_shader_texture_lod : enable\n",n+="#extension GL_OES_standard_derivatives : enable\n")),n+`\nprecision highp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\n${t>=2?"in":"varying"} lowp vec4 vColor;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!i?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= vColor;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static M_(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static C_(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static T_(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static x_(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static I_(t){return["#version 300 es",Su.Nw.Bx.f_(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static __(){return["varying lowp vec4 vColor;","void main(void) {","\tgl_FragColor = vColor;","}"].join("\n")}static G_(){return["precision lowp float;","varying mediump vec2 vTex;","varying vec4 vColor;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(vColor.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(vColor.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static P_(){return["precision lowp float;","varying highp vec2 vTex;","varying vec4 vColor;","void main(void) {","\thighp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = vColor * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static A_(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = vColor * f;","}"].join("\n")}static R_(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = vColor * f;","}"].join("\n")}static E_(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp float innerF = step(distSq, 0.25);","\thighp vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}static O_(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 innerEdge = halfNorm - pixelSize * norm;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = vColor * f;","}"].join("\n")}static D_(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 pxNorm = pixelSize * norm;","\thighp vec2 innerEdge1 = halfNorm - pxNorm;","\thighp vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\thighp float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\thighp vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\thighp vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\thighp vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\thighp vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\thighp float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}}}{const Tu=self._s,xu=self.ls,Iu=xu.ds,_u=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Tu.Nw.tI=class{constructor(t,s,i){if(!_u.has(i))throw new Error("invalid uniform type");this.gC=t,this.Hx=this.gC.HI(),this.Yn=s,this.Jc=i,this.F_="color"===this.Jc,this.k_=this.Hx.getUniformLocation(this.gC.zI(),s),this.L_=!!this.k_;const e=_u.get(i);this.N_=new Float32Array(e),this.B_=new Float32Array(e)}zn(){this.gC=null,this.Hx=null,this.k_=null}AI(){return this.L_}YI(){return this.Jc}W_(){return this.F_}LI(t){this.AI()&&(this.N_[0]=t,this.B_.set(this.N_),this.Hx.uniform1f(this.k_,t))}FI(t){this.AI()&&(this.N_[0]=t,this.B_.set(this.N_),this.Hx.uniform1i(this.k_,t))}kI(t,s){this.AI()&&(this.N_[0]=t,this.N_[1]=s,this.B_.set(this.N_),this.Hx.uniform2f(this.k_,t,s))}NI(t,s,i){this.AI()&&(this.N_[0]=t,this.N_[1]=s,this.N_[2]=i,this.B_.set(this.N_),this.Hx.uniform3f(this.k_,t,s,i))}DI(t,s,i,e){this.AI()&&(this.N_[0]=t,this.N_[1]=s,this.N_[2]=i,this.N_[3]=e,this.B_.set(this.N_),this.Hx.uniform4f(this.k_,t,s,i,e))}j_(t){t=Math.fround(t);const s=this.N_;s[0]!==t&&(s[0]=t,this.Hx.uniform1f(this.k_,t))}V_(t){const s=this.N_;s[0]!==t&&(s[0]=t,this.Hx.uniform1i(this.k_,t))}U_(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.N_;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.Hx.uniform2f(this.k_,t,s))}H_(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.N_;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.Hx.uniform3f(this.k_,t,s,i))}u_(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const n=this.N_;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(n[0]=t,n[1]=s,n[2]=i,n[3]=e,this.Hx.uniform4f(this.k_,t,s,i,e))}h_(t){const s=this.N_;Iu.D(s,t)||(Tu.wh(s,t,0),this.Hx.uniformMatrix4fv(this.k_,!1,t))}KI(t){const s=this.B_;return this.W_()?s[0]===Math.fround(t.No())&&s[1]===Math.fround(t.Bo())&&s[2]===Math.fround(t.$o()):s[0]===Math.fround(t)}QI(t){const s=this.B_;this.W_()?(s[0]=t.No(),s[1]=t.Bo(),s[2]=t.$o()):s[0]=t}i_(t){return this.B_[0]===Math.fround(t)}s_(t,s){const i=this.B_;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}r_(t){this.B_[0]=t}n_(t,s){const i=this.B_;i[0]=t,i[1]=s}}}{const Gu=self._s,Pu=self.ls,Au=Pu.Ss,Ru=Pu.ds,Eu=0,Ou=1,Du=2,Fu=3,ku=4,Lu=5,Nu=6,Bu=7,$u=8,Wu=9,ju=10,Vu=11,Uu=12,Hu=13,zu=14,Ju=15,qu=16,Yu=17,Xu=18,Ku=19,Zu=20,Qu=21,tc=22,sc=23,ic=24,ec=25,nc=26,rc=27,hc=28,oc=29,ac=30;Gu.Nw.z_=class{constructor(t){this.J_=t,this.VI=Ru.create(),this.$I=Ru.create(),this.vx=null,this.bx=null,this.q_=!1,this.UI=null,this.Y_=new Gu.Rect,this.clearColor=Gu.Hn(Gu.To,0,0,0,0)}},Gu.Nw.X_=class{constructor(t){const s=new ArrayBuffer(96);this.Jc=0,this.K_=t,this.Hx=t.J_.MT(),this.Z_=0,this.Q_=0,this.tG=null,this.sG=new Float32Array(s,0,16),this.iG=new Float32Array(s,64,4),this.eG=new Float32Array(s,80,4),this.nG=[]}rG(t,s){this.Jc=1,this.Z_=t,this.Q_=s}hG(){const t=this.Hx;t.drawElements(t.TRIANGLES,this.Q_,t.UNSIGNED_SHORT,this.Z_)}oG(t){this.Jc=2,this.tG=t}aG(){const t=this.Hx,s=this.tG;t.bindTexture(t.TEXTURE_2D,s?s.kT():null)}lG(t){this.Jc=20,t.Vo(this.iG,0)}uG(){const t=this.iG,s=this.K_.UI;s.lI.AI()&&s.lI.u_(t[0],t[1],t[2],t[3])}cG(t,s){this.Jc=3,this.Z_=t,this.Q_=s}fG(){this.Hx.blendFunc(this.Z_,this.Q_)}dG(t,s,i,e){this.Jc=4;const n=this.iG;n[0]=t,n[1]=s,n[2]=i,n[3]=e}pG(){const t=this.iG;this.Hx.viewport(t[0],t[1],t[2],t[3])}mG(t){this.Jc=5,Ru.S(this.sG,t)}gG(){const t=this.K_,s=t.J_.aS,i=t.UI,e=this.sG;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.WI(e,!0):n.o_()}Ru.S(t.$I,e)}yG(t){this.Jc=6,Ru.S(this.sG,t)}wG(){const t=this.K_,s=t.J_.aS,i=t.UI,e=this.sG;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.jI(e,!0):n.a_()}Ru.S(t.VI,e)}SG(t){this.Jc=7,this.tG=t}vG(){const t=this.Hx,s=this.tG,i=this.K_;s?(i.vx=s.Mx(),i.bx=s.Cx(),i.q_&&i.bx?t.bindFramebuffer(t.FRAMEBUFFER,i.bx):t.bindFramebuffer(t.FRAMEBUFFER,i.vx)):(i.vx=null,i.bx=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}bG(t){this.Jc=8,t.Vo(this.sG,0)}MG(t,s,i,e){this.Jc=8;const n=this.sG;n[0]=t,n[1]=s,n[2]=i,n[3]=e}CG(){const t=this.Hx,s=this.sG,i=this.K_.clearColor,e=s[0],n=s[1],r=s[2],h=s[3];i.qo(e,n,r,h)||(t.clearColor(e,n,r,h),i.Po(e,n,r,h)),t.clear(t.COLOR_BUFFER_BIT)}TG(t){this.Jc=14,t.Vo(this.sG,0)}xG(){const t=this.sG;this.K_.Y_.set(t[0],t[1],t[2],t[3])}IG(t,s,i){this.Jc=9,this.Z_=t,this.Q_=1,this.sG[0]=s,i.Vo(this.iG,0)}_G(){const t=this.Hx,s=this.K_,i=s.J_.cS;t.useProgram(i.AM),i.WI(s.$I,!1),i.jI(s.VI,!1);const e=s.Y_;i.nI.AI()&&i.nI.U_(e.Qa(),e.tl()),i.rI.AI()&&i.rI.U_(e.sl(),e.il());const n=this.sG[0];if(i.hI.AI()&&i.hI.j_(n),i.iI.AI()){const t=this.iG;i.iI.u_(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.Z_/4,this.Q_),t.useProgram(s.UI.AM)}GG(t){this.Jc=10,this.tG=t}PG(){const t=this.Hx,s=this.K_,i=this.tG;s.UI=i,t.useProgram(i.AM),i.WI(s.$I,!1),i.jI(s.VI,!1)}AG(){this.Jc=11}EG(){const t=this.K_.UI,s=this.Hx,i=this.sG,e=this.iG,n=this.eG;if(t.cI.AI()){const t=this.K_.J_,i=this.tG;t.OG!==i&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,i?i.kT():null),t.OG=i,s.activeTexture(s.TEXTURE0))}t.SI.AI()&&t.SI.U_(i[0],i[1]),t.dI.AI()&&t.dI.U_(i[2],i[3]),t.pI.AI()&&t.pI.U_(i[4],i[5]),t.bI.AI()&&t.bI.j_(this.Q_),t.MI.AI()&&t.MI.j_(i[6]),t.CI.AI()&&t.CI.j_(i[7]),t.mI.AI()&&t.mI.U_(i[12],i[13]),t.gI.AI()&&t.gI.U_(i[14],i[15]),t.yI.AI()&&t.yI.U_(n[0],n[1]),t.wI.AI()&&t.wI.U_(n[2],n[3]),t.TI.AI()&&t.TI.U_(e[0],e[1]),t.xI.AI()&&t.xI.U_(e[2],e[3]),t.vI.AI()&&t.vI.j_(this.Z_)}DG(){this.Jc=12}FG(){const t=this.K_.UI.RI,s=this.nG;for(let i=0,e=t.length;i<e;++i){const e=t[i],n=s[i];e.W_()?e.H_(n.No(),n.Bo(),n.$o()):e.j_(n)}}kG(t){this.Jc=13,this.tG=t}LG(){const t=this.Hx,s=this.tG,i=this.K_.vx;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}NG(t,s,i){this.Jc=16;const e=this.sG,n=this.K_.J_;e[0]=t.Vg(),e[1]=t.Qg(),e[2]=s?s.Vg():n.Vg(),e[3]=s?s.Qg():n.Qg(),e[4]=t.Ix()?1:0,e[5]="stretch"===i;const r=this.nG;Gu.bh(r),r.push(t.Mx()),r.push(s?s.Mx():null)}BG(){const t=this.sG,s=this.nG,i=this.Hx,e=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,n,0,0,r,h,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const t=Math.min(e,r),s=Math.min(n,h),o=Math.max(n-h,0),a=Math.max(h-n,0);i.blitFramebuffer(0,o,t,s+o,0,a,t,s+a,i.COLOR_BUFFER_BIT,i.NEAREST)}}$G(t){this.Jc=17,this.tG=t}WG(){this.tG.jG(),this.tG=null}VG(t){this.Jc=18,this.tG=t}UG(){this.tG.HG(),this.tG=null}zG(t,s,i){this.Jc=19;const e=this.sG;e[0]=t,e[1]=s,e[2]=i}JG(){const t=this.K_.UI,s=this.sG;t.SI.AI()&&t.SI.U_(s[0],s[1]),t.uI.AI()&&t.uI.j_(s[2])}qG(t,s,i,e,n,r,h){this.Jc=15;const o=this.sG;t.Vo(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=n/i,o[8]=r/s,o[9]=h/i}YG(){const t=this.K_.UI,s=this.sG;t.mI.AI()&&t.mI.U_(s[0],s[1]),t.SI.AI()&&t.SI.U_(s[4],s[5]),t.oI.AI()&&t.oI.U_(s[6],s[7]),t.aI.AI()&&t.aI.U_(s[8],s[9])}XG(t,s,i,e,n,r,h){this.Jc=28;const o=this.sG;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=n,o[5]=r,o[6]=h}KG(){const t=this.K_.UI,s=this.sG;t.SI.AI()&&t.SI.U_(s[0],s[1]),t.oI.AI()&&t.oI.U_(s[2],s[3]),t.uI.AI()&&t.uI.j_(s[4]),t.aI.AI()&&t.aI.U_(s[5],s[6])}ZG(t){this.Jc=21,this.Z_=t?1:0}QG(){const t=this.Hx,s=0!==this.Z_;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}tP(t){this.Jc=22,this.Z_=t?1:0}sP(){const t=this.Hx;0===this.Z_?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}iP(t){this.Jc=23,this.Z_=t?1:0}eP(){const t=this.Hx,s=this.K_,i=s.J_,e=0!==this.Z_;s.q_=e,t.activeTexture(t.TEXTURE2),e?(s.bx&&t.bindFramebuffer(t.FRAMEBUFFER,s.bx),t.bindTexture(t.TEXTURE_2D,i.mx())):(t.bindTexture(t.TEXTURE_2D,null),s.bx&&t.bindFramebuffer(t.FRAMEBUFFER,s.vx)),t.activeTexture(t.TEXTURE0)}nP(){this.Jc=24}rP(){const t=this.Hx;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}hP(){this.Jc=25}oP(){const t=this.Hx;t.enable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}aP(){this.Jc=26}lP(){const t=this.Hx;t.disable(t.STENCIL_TEST)}uP(t,s,i,e,n){this.Jc=27,this.Z_=t?1:0;const r=this.sG;r[0]=s,r[1]=i,r[2]=e,r[3]=n}cP(){const t=this.Hx,s=this.sG;1===this.Z_?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}fP(t){this.Jc=29,this.Z_=t}dP(){const t=this.Hx,s=this.Z_;0===s?t.disable(t.CULL_FACE):(t.enable(t.CULL_FACE),1===s?t.cullFace(t.BACK):t.cullFace(t.FRONT))}pP(t){this.Jc=30,this.Z_=t}mP(){const t=this.Hx;t.frontFace(0===this.Z_?t.CW:t.CCW)}gP(){switch(this.Jc){case 1:return void this.hG();case 2:return void this.aG();case 3:return void this.fG();case 4:return void this.pG();case 5:return void this.gG();case 6:return void this.wG();case 7:return void this.vG();case 8:return void this.CG();case 9:return void this._G();case 10:return void this.PG();case 11:return void this.EG();case 12:return void this.FG();case 13:return void this.LG();case 14:return void this.xG();case 15:return void this.YG();case 16:return void this.BG();case 17:return void this.WG();case 18:return void this.UG();case 19:return void this.JG();case 20:return void this.uG();case 21:return void this.QG();case 22:return void this.sP();case 23:return void this.eP();case 24:return void this.rP();case 25:return void this.oP();case 26:return void this.lP();case 27:return void this.cP();case 28:return void this.KG();case 29:return void this.dP();case 30:return void this.mP()}}}}{let lc=function(t,s,i,e,n,r){s?t.strokeRect(i,e,n,r):t.fillRect(i,e,n,r)},uc=function(t){return t*(4/3)},cc=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};fillOrStrokeRect=lc,ptToPx=uc,getOffsetParam=cc;const fc=self._s,dc=4096,pc=4,mc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),gc={timeout:60},yc=new fc.To(0,0,0,1),wc=new Set(["left","center","right"]),Sc=new Set(["top","center","bottom"]),vc=new Set(["word","cjk","character"]),bc=new Set(["ltr","rtl"]),Mc=new Set;fc.yP&&fc.yP.addEventListener("fontload",t=>{const s=t.font.Ac();for(const t of Mc)(t.wP()||fc.Ze(t.SP(),s))&&t.vP()});let Cc=!1,Tc=!1;fc.Nw.qb=class{constructor(t,s){s=Object.assign({},gc,s),this.Xb=t,this.bP="Arial",this.MP=16,this.CP=1,this.TP=0,this.xP=!1,this.IP=!1,this._P="black",this.GP=!1,this.Ng=null,this.PP=!0,this.AP=null,this.RP=new Set,this.EP="left",this.OP="top",this.$c="",this.DP=null,this.FP=fc.Hn(fc.kg),this.kP="word",this.LP="ltr",this.NP=!1,this.BP=!1,this.$P=!1,this.WP=-1,this.jP=0,this.VP=0,this.UP=0,this.Ay=0,this.Ry=0,this.HP=1,this.zP=null,this.JP=null,this.qP=null,this.YP=null,this.XP=-1,this.KP=-1,this.ZP="",this.QP="",this.tA="",this.sA=1,this.iA=1,this.eA=t=>this.nA(t),this.cT=null,this.rA=new fc.Rect,this.hA=1,this.oA=new fc.Ff(()=>{this.aA(),this.lA(8,8)},s.timeout),this.uA=null,this.cA=!1,Mc.add(this)}zn(){this.AP=null,this.RP.clear(),this.Ng=null,this.DP=null,this.zP=null,this.JP=null,this.qP=null,this.YP=null,this.eA=null,this.oA.zn(),this.uA=null,this.aA(),this.FP.Au(),this.FP=null,this.Xb=null,this.cA=!0,Mc.delete(this)}fA(){this.$P=!0}dA(){this.fA(),this.BP=!0}vP(){this.dA(),this.NP=!0}pA(t){if(t=!!t,this.GP===t)return;this.GP=t;const s=this.GP?"alphabetic":"top";this.JP&&(this.JP.textBaseline=s),this.qP&&(this.qP.textBaseline=s),this.vP()}wP(){return this.GP}Wg(t){this.Ng!==t&&(this.Ng=t,this.FP.Wg(t),this.Ng&&this.Ng.xw()&&this.Ng.Iw().then(()=>this.fA()),this.vP())}mA(t){t=!!t,this.PP!==t&&(this.PP=t,this.fA())}gA(t){t||(t="serif"),this.bP!==t&&(this.bP=t,this.vP())}SP(){return this.bP}yA(t){t<.1&&(t=.1),this.MP!==t&&(this.MP=t,this.vP())}wA(){return this.MP}SA(t){this.CP!==t&&(this.CP=t,this.vP())}vA(t){this.TP!==t&&(this.TP=t,this.dA())}bA(){return this.TP}MA(t){t=!!t,this.xP!==t&&(this.xP=t,this.vP())}CA(){return this.xP}TA(t){t=!!t,this.IP!==t&&(this.IP=t,this.vP())}xA(){return this.IP}IA(t){t=Math.floor(t),this.WP!==t&&(this.WP=t,this.fA())}_A(){return this.WP}GA(t,s){let i=[];(this.xP||s.zy("b"))&&i.push("bold"),(this.IP||s.zy("i"))&&i.push("italic");const e=s.Hy("size"),n=(e?parseFloat(e.Pg):this.MP)*this.CP;t?i.push(n+"pt"):i.push(n*this.PA()+"pt");let r=this.bP;const h=s.Hy("font");return h&&h.Pg&&(r=h.Pg,this.AP&&!this.RP.has(r)&&(this.AP(r),this.RP.add(r))),r&&(mc.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}BM(t){t instanceof fc.To&&(t=t.sa()),this._P!==t&&(this._P=t,this.fA())}AA(t,s,i){yc.Ao(t,s,i),this.BM(yc)}RA(t){if(!wc.has(t))throw new Error("invalid horizontal alignment");this.EP!==t&&(this.EP=t,this.dA())}EA(){return this.EP}OA(t){if(!Sc.has(t))throw new Error("invalid vertical alignment");this.OP!==t&&(this.OP=t,this.dA())}DA(){return this.OP}FA(t){if(!vc.has(t))throw new Error("invalid word wrap mode");this.kP!==t&&(this.kP=t,this.vP())}kA(){return this.kP}LA(t){if(!bc.has(t))throw new Error("invalid text direction");this.LP!==t&&(this.LP=t,this.JP&&(this.JP.direction=this.LP),this.qP&&(this.qP.direction=this.LP),this.vP())}NA(){return this.LP}Vc(t){this.$c!==t&&(this.$c=t,this.vP())}BA(){return this.$c}PA(){return this.hA*this.HP*self.devicePixelRatio}$A(t,s,i){if(void 0===i&&(i=1),t<=0||t<=0)return;if(this.VP===t&&this.UP===s&&this.HP===i)return;const e=this.VP;this.VP=t,this.UP=s,this.HP=i;const n=self.devicePixelRatio;this.Ay=this.VP*this.HP*n,this.Ry=this.UP*this.HP*n;const r=Math.max(this.Ay,this.Ry),h=Math.min(this.Xb.bT(),4096);let o=1;r>h&&(o=h/r,this.Ay=Math.min(this.Ay*o,h),this.Ry=Math.min(this.Ry*o,h)),this.hA=o,this.VP!==e?this.vP():this.dA()}Vg(){return this.Ay}Qg(){return this.Ry}WA(){return this.HP}jA(){return this.VA(),this.FP.Gy()}UA(){return this.VA(),this.FP.Py()+this.FP.$g()*(this.TP+4)-this.TP}HA(){this.VA();let t=0;for(const s of this.FP.Bg())for(const i of s.hy())t+=i.oy();return t}Tx(){return this.oA.$f(),this.zA(),this.cT}JA(t,s){this.VA();const i=this.PA(),e=this.FP.Bg();for(const n of e){const e=n.sy()*i;if(s>=n.jy()-n.Qg()*i+e&&s<n.jy()+e)for(const s of n.hy())if(t>=s.$y()&&t<s.$y()+s.Vg()*i)return s}return null}*qA(t){this.VA();const s=this.FP.Bg();for(const i of s)for(const s of i.hy()){const i=s.Hy("tag");i&&fc.Ze(i.Pg,t)&&(yield s)}}YA(t,s){for(const i of this.qA(t)){if(0===s)return i;--s}return null}XA(t){let s=0;for(const i of this.qA(t))++s;return s}zA(){(!this.cT||this.$P||this.BP||this.NP)&&(this.cA||this.Ay<=0||this.Ry<=0||(this.$P=!1,this.KA()))}KA(){this.cA||(this.VA(),this.lA(Math.max(fc.br(Math.ceil(this.Ay)),128),Math.max(fc.br(Math.ceil(this.Ry)),64)),this.ZA(),this.QA(),this.oA.$f())}lA(t,s){this.zP||(this.zP=fc.co(16,16));let i=!1;this.XP===t&&this.KP===s||(this.XP=t,this.KP=s,this.zP.width=t,this.zP.height=s,i=!0),this.JP||(this.JP=this.zP.getContext("2d"),i=!0),i?(this.JP.textBaseline=this.GP?"alphabetic":"top",this.JP.direction=this.LP,this.JP.font=this.ZP,this.JP.fillStyle=this.tA,this.JP.strokeStyle=this.tA,this.JP.globalAlpha=this.sA,this.JP.lineWidth=this.iA):this.JP.clearRect(0,0,t,s)}tR(){this.qP||(this.qP=fc.co(16,16).getContext("2d"),this.YP=fc.co(16,16).getContext("2d"),this.qP.textBaseline=this.GP?"alphabetic":"top",this.YP.textBaseline="top",this.qP.direction=this.LP,this.YP.direction=this.LP)}sR(t){this.QP!==t&&(this.QP=t,this.qP.font=t,this.YP.font=t)}iR(){if(!Cc){Cc=!0,this.tR();const t=this.qP.measureText("test");Tc="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return Tc}VA(){this.eR(),this.nR()}eR(){this.NP&&(this.tR(),!this.GP||this.DP&&this.DP.toString()===this.$c||(this.DP=new fc.pn(this.$c,{pg:!0})),this.FP.kg(this.GP?this.DP._g():this.$c,this.eA,this.VP,this.kP,0),this.NP=!1)}nR(){this.BP&&(this.rR(),this.BP=!1)}nA(t){const s=t.Yg()?t.wy().join(""):" ";this.sR(this.GA(!0,t));const i=t.Hy("size"),e=(i?parseFloat(i.Pg):this.MP)*this.CP,n=this.qP.measureText(s);let r=0;if(this.GP&&this.iR()){const t=this.YP.measureText(s);r=n.fontBoundingBoxAscent-t.fontBoundingBoxAscent}return{width:n.width,height:uc(e),fontBoundingBoxAscent:n.fontBoundingBoxAscent||0,fontBoundingBoxDescent:n.fontBoundingBoxDescent||0,qg:r}}hR(t){this.ZP!==t&&(this.ZP=t,this.JP.font=t)}oR(t){this.tA!==t&&(this.tA=t,this.JP.fillStyle=t,this.JP.strokeStyle=t)}aR(t){this.sA!==t&&(this.sA=t,this.JP.globalAlpha=t)}lR(t){this.iA!==t&&(this.iA=t,this.JP.lineWidth=t)}rR(){const t=this.PA(),s=(4+this.TP)*t;let i=0;const e=this.FP.Bg();if(0===e.length)return;for(const t of e){t.By(NaN),t.Wy(NaN);for(const s of t.hy())s.By(NaN),s.Wy(NaN)}const n=this.GP&&this.iR();let r=e[0].Qg()*t;if("center"===this.OP){const h=e.reduce((i,e)=>i+e.Qg()*t+s,0)-s;i=Math.max(this.Ry/2-h/2,0),n&&(r=e[0].iy()*t)}else if("bottom"===this.OP){const r=e.reduce((i,e)=>i+e.Qg()*t+s,0)-this.TP*t,h=n?e.at(-1).sy()*t:0;i=this.Ry-r-h-2}for(let n=0,h=e.length;n<h;++n){const h=e[n],o=h.Qg()*t,a=i;if(this.GP){if(i+=0===n?r:o,n>0&&i>this.Ry-4*t)break}else if(n>0&&i>=this.Ry-o)break;a>=0&&this.uR(h,i,t),this.GP||(i+=o),i+=s}}uR(t,s,i){let e=0;"center"===this.EP?e=Math.floor((this.Ay-t.Vg()*i)/2):"right"===this.EP&&(e=this.Ay-t.Vg()*i),t.By(e),t.Wy(s);for(const n of"ltr"===this.LP?t.hy():t.Ly())this.cR(n,e,s,i),e+=n.Vg()*i}cR(t,s,i,e){const n=t.Hy("offsetx");s+=n?cc(n.Pg,t.Qg())*e:0;const r=t.Hy("offsety");if(i+=r?cc(r.Pg,t.Qg())*e:0,t.Kg()){const s=t.Hy("iconoffsety");i+=s?cc(s.Pg,t.Qg())*e:.2*t.Qg()*e}t.By(s),t.Wy(i)}ZA(){this.JP.imageSmoothingEnabled=this.PP,this.JP.imageSmoothingQuality="high",this.jP=0;const t=this.PA(),s=this.FP.Bg();for(const i of s)this.fR(i,t)}fR(t,s){const i=t.$y(),e=t.jy();if(Number.isFinite(i)&&Number.isFinite(e))for(const i of"ltr"===this.LP?t.hy():t.Ly())this.dR(i,s,t.Qg())}dR(t,s,i){const e=this.JP,n=t.$y(),r=t.jy();if(!Number.isFinite(n)||!Number.isFinite(r))return;const h=i/16;let o=t.Vg()*s;const a=t.Qg()*s,l=t.Qg()/16,u=(4+this.TP)*s;let c=t.Yg()?t.wy():null;if(-1!==this.WP){if(this.jP>=this.WP)return;t.Yg()&&this.jP+c.length>this.WP&&(c=c.slice(0,this.WP-this.jP),o=this.nA(t).width*s),this.jP+=t.oy()}const f=t.Hy("background"),d=t.zy("u"),p=t.zy("s");if(t.Yg()&&fc.bm(c)&&!f&&!d&&!p||t.zy("hide"))return;const m=t.Hy("color"),g=t.Hy("opacity");this.aR(g?parseFloat(g.Pg)/100:1),f&&(this.oR(f.Pg),e.fillRect(n,r-a,o,a+u));const y=t.Hy("linethickness"),w=y?parseFloat(y.Pg):1,S=t.zy("stroke");if(S&&this.lR(.5*l*w*this.PA()),t.Yg()){const s=c.join("");if(this.hR(this.GA(!1,t)),!S){this.lR(.5*l*w*this.PA());const i=t.Hy("outlineback");i&&(this.oR(i.Pg),this.pR(!0,s,n,r,o))}if(this.oR(m?m.Pg:this._P),this.pR(S,s,n,r,o),!S){this.lR(.5*l*w*this.PA());const i=t.Hy("outline");i&&(this.oR(i.Pg),this.pR(!0,s,n,r,o))}}else if(t.Kg()&&t.Vg()>0){const s=t.tw(this.Ng);s&&e.drawImage(s,n,r-a,o,a)}if(this.oR(m?m.Pg:this._P),d&&lc(e,S,n,r+s*h,o,s*h*w),p){const t=s*l,i=r-a/4+t/2;e.fillRect(n,i-t*w/2,o,t*w)}}pR(t,s,i,e,n){"rtl"===this.LP&&(i+=n),t?"Gecko"===fc.Zs.ni?this.JP.strokeText(s,i,e,n):this.JP.strokeText(s,i,e):"Gecko"===fc.Zs.ni?this.JP.fillText(s,i,e,n):this.JP.fillText(s,i,e)}QA(){this.Xb.mR()||(this.cT||(this.cT=this.Xb.ux(this.zP.width,this.zP.height,{hT:!0,oT:"high"})),this.Xb.gR(this.zP,this.cT),this.rA.set(0,0,this.Ay/this.cT.Vg(),this.Ry/this.cT.Qg()),this.uA&&this.uA())}yR(){return this.rA}aA(){this.cT&&(this.Xb.mR()||this.Xb.wx(this.cT),this.cT=null)}static $M(){for(const t of Mc)t.aA()}static wR(){return Mc.values()}}}{const xc=self._s;class Ic{constructor(t){this.Hx=t.MT(),this.SR=t.CT(),this.vR=t.bR(),this.MR=null,this.Bf=!1,this.CR=!1,this.TR=0,1===this.SR?this.MR=this.vR.createQueryEXT():this.MR=this.Hx.createQuery()}zn(){this.xR(),this.Hx=null,this.vR=null,this.CR=!1}xR(){this.MR&&(1===this.SR?this.vR.deleteQueryEXT(this.MR):this.Hx.deleteQuery(this.MR),this.MR=null)}jG(){if(this.Bf)throw new Error("query already active");1===this.SR?this.vR.beginQueryEXT(this.vR.TIME_ELAPSED_EXT,this.MR):this.Hx.beginQuery(this.vR.TIME_ELAPSED_EXT,this.MR),this.Bf=!0}HG(){if(!this.Bf)throw new Error("query not active");1===this.SR?this.vR.endQueryEXT(this.vR.TIME_ELAPSED_EXT):this.Hx.endQuery(this.vR.TIME_ELAPSED_EXT),this.Bf=!1}IR(){if(!this.MR||this.CR||this.Bf)return;let t=!1;t=1===this.SR?this.vR.getQueryObjectEXT(this.MR,this.vR.QUERY_RESULT_AVAILABLE_EXT):this.Hx.getQueryParameter(this.MR,this.Hx.QUERY_RESULT_AVAILABLE);const s=this.Hx.getParameter(this.vR.GPU_DISJOINT_EXT);t&&!s&&(1===this.SR?this.TR=this.vR.getQueryObjectEXT(this.MR,this.vR.QUERY_RESULT_EXT):this.TR=this.Hx.getQueryParameter(this.MR,this.Hx.QUERY_RESULT),this.TR/=1e9,this.CR=!0),(t||s)&&this.xR()}_R(){return this.CR}GR(){if(!this.CR)throw new Error("no result available");return this.TR}}xc.Nw.PR=class{constructor(t){this.Xb=t,this.DS=t.kb(),this.Bf=!1,this.AR=null,this.RR=!1,this.ER=null,this.OR=[]}zn(){for(const t of this.OR)t instanceof Ic&&t.zn();xc.bh(this.OR),this.AR=null,this.ER=null,this.Xb=null}jG(){if(this.Bf)throw new Error("query already active");const t=this.Xb.DR();t.length>0?(this.RR=!0,this.AR=t.at(-1),this.AR.FR(),this.AR.OR.push(this)):(this.RR=!1,this.AR=null),this.Bf=!0,t.push(this),this.kR()}HG(){if(!this.Bf)throw new Error("query not active");if(this.Xb.DR().pop()!==this)throw new Error("can only end most nested query");this.Bf=!1,this.FR(),this.AR&&(this.AR.kR(),this.AR=null)}kR(){this.ER=xc.Hn(Ic,this.Xb),this.OR.push(this.ER),this.ER.jG()}FR(){this.ER.HG(),this.ER=null}IR(){for(const t of this.OR)t.IR()}LR(){return this.RR}_R(){return this.OR.every(t=>t._R())}GR(){return this.OR.reduce((t,s)=>t+s.GR(),0)}kb(){return this.DS}}}{const _c=self._s;_c.Nw.NR=class{constructor(t,s=1e3){this.Xb=t,this.BR=s,this.$R=[],this.Xb.WR(this)}zn(){this.Au(),this.Xb.jR(this),this.Xb=null}Au(){for(const t of this.$R)t.zn();_c.bh(this.$R)}VR(){const t=new _c.Nw.PR(this.Xb);return this.$R.push(t),this.$R.length>this.BR&&this.$R.shift().zn(),t}UR(t){for(const s of this.$R){if(s.kb()>=t)return;if(s.LR())return;s.IR()}}HR(t,s){if(s<=t)return NaN;let i=0;for(const e of this.$R){if(e.kb()>=s)break;if(!(e.kb()<t)){if(!e._R())return NaN;i+=e.GR()}}return i}zR(t){for(let s=0,i=this.$R.length;s<i;++s){const i=this.$R[s];if(!(i.kb()<t))return void(s>0&&this.$R.splice(0,s));i.zn()}}}}{let Gc=function(){qc=-1;for(const t of Jc)t.JR()&&(t.resolve(),Jc.delete(t));Jc.size>0&&(qc=self.requestAnimationFrame(Gc))};CheckPendingPolls=Gc;const Pc=self._s,Ac=self.assert,Rc=self.ls,Ec=Rc.ws,Oc=Rc.Ss,Dc=Rc.ds,Fc={powerPreference:"default",qR:!0,alpha:!1,depth:!1,YR:!1,XR:2,failIfMajorPerformanceCaveat:!1},kc=new Set(["default","low-power","high-performance"]),Lc=65535,Nc=393210,Bc=8e3,$c=7996,Wc=new Pc.Pl(0,0,1,0,1,1,0,1),jc=Dc.create(),Vc=Dc.create(),Uc=new Pc.Pl,Hc=new Pc.Rect;let zc=null;Pc.ks&&(self.KR=function(){zc?zc.loseContext():console.warn("WEBGL_lose_context not supported")},self.ZR=function(){zc?zc.restoreContext():console.warn("WEBGL_lose_context not supported")});const Jc=new Set;let qc=-1;Pc.Nw.QR=class extends Pc.Nw.tS{constructor(t,s){if(super(s),s=Object.assign({},Fc,s),!kc.has(s.powerPreference))throw new Error("invalid power preference");const i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat};let e=null,n=0;if(s.XR>=2&&(e=t.getContext("webgl2",i),n=2),e||(e=t.getContext("webgl",i),n=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.Hx=e,this.tE=e.getContextAttributes(),this.sE=e.getParameter(e.VERSION),this.SR=n,this.iE=Oc.create(),this.eE=!1,this.nE=Dc.create(),this.rE=!!s.depth,this.hE=!(!s.depth||!s.YR),this.oE=this.rE,this.aE=!1,this.lE=null,this.uE=!0,this.cE=0,this.fE=0,this.qx=null,this.Yx=null,this.Xx=null,this.dE=null,this.Zx=null,this.pE=this.SR>=2&&void 0!==globalThis.Float16Array,this.mE=new Float32Array(196605),this.gE=new Uint16Array(393210),this.yE=new Float32Array(131070),this.wE=this.pE?new globalThis.Float16Array(262140):new Float32Array(262140),this.SE=new Float32Array(32e3),this.vE=0,this.bE=0,this.ME=0,this.CE=null,this.TE=null,this.xE=[],this.IE=0,this._E=0,this.GE=null,this.PE=0,this.K_=Pc.Hn(Pc.Nw.z_,this),this.AE=Pc.Hn(Pc.To,1,1,1,1),this.RE=null,this.OG=null,this.EE=0,this.OE=0,this.DE=new Pc.Rect,this.FE=Pc.Hn(Pc.Rect,0,0,-1,-1),this.kE=0,this.LE=0,this.NE=0,this.BE=-1,this.$E=0,this.WE=0,this.jE="(unavailable)",this.VE="(unavailable)",this.UE=[],this.HE=!1,this.zE=null,this.JE=null,this.qE=null,this.YE=null,this.XE=null,this.KE=null,this.ZE=null,this.QE=0,this.tO=!!s.qR,this.vR=null,this.sO=new Set,this.iO=[]}jb(){return!0}async BS(){super.BS();const t=this.Hx;this.AE.Po(1,1,1,1),this.RE=null,this.OG=null,this.vE=0,this.bE=0,this.ME=0,Pc.bh(this.xE),this.IE=0,this._E=0,this.CE=null,this.GE=null,this.DE.set(0,0,1,1),this.PE=0;const s=this.K_;s.UI=null,s.vx=null,s.bx=null,s.clearColor.Po(0,0,0,0),s.Y_.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.EE=t.ONE,this.OE=t.ONE_MINUS_SRC_ALPHA,this.eO(t),t.cullFace(t.BACK),t.disable(t.CULL_FACE),this.LE=0,t.frontFace(t.CW),this.NE=0,t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.rE?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.oE=this.rE,this.aE=!1,this.Zx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Zx),t.bufferData(t.ARRAY_BUFFER,this.SE.byteLength,t.DYNAMIC_DRAW),this.qx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.qx),t.bufferData(t.ARRAY_BUFFER,this.mE.byteLength,t.DYNAMIC_DRAW),this.Yx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Yx),t.bufferData(t.ARRAY_BUFFER,this.yE.byteLength,t.DYNAMIC_DRAW),this.Xx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Xx),t.bufferData(t.ARRAY_BUFFER,this.wE.byteLength,t.DYNAMIC_DRAW),this.dE=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.dE),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.gE.byteLength,t.DYNAMIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.BE=t.getParameter(t.MAX_TEXTURE_SIZE);const i=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.$E=i[0],this.WE=i[1],this.WE>2048&&(this.WE=2048),this.UE=t.getSupportedExtensions();const e=t.getExtension("WEBGL_debug_renderer_info");if(e&&(this.jE=t.getParameter(e.UNMASKED_VENDOR_WEBGL),this.VE=t.getParameter(e.UNMASKED_RENDERER_WEBGL)),this.zE=t.getExtension("KHR_parallel_shader_compile"),this.SR>=2&&("Chromium"!==Pc.Zs.ni||Pc.Zs.ei>=135)&&(this.qE=t.getExtension("EXT_conservative_depth")),Pc.ks&&(zc=t.getExtension("WEBGL_lose_context")),this.tO&&(1===this.CT()?this.vR=t.getExtension("EXT_disjoint_timer_query"):this.vR=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.JE=t.getExtension("EXT_texture_filter_anisotropic"),this.JE?this.QE=t.getParameter(this.JE.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.QE=0,this.CT()<2&&this.rE&&this.hE&&(this.YE=t.getExtension("WEBGL_depth_texture"),!this.YE))throw new Error("no depth texture support");this.CT()<2&&(this.XE=t.getExtension("EXT_frag_depth"),this.KE=t.getExtension("OES_standard_derivatives"),this.ZE=t.getExtension("EXT_shader_texture_lod"));const n=Pc.Nw.Bx,r=n.d_(!1);let h=n.m_(),o=r,a=n.T_(),l=n.M_(),u=n.w_(),c=n.d_(!0),f=!1;this.rE&&(this.CT()<2?this.XE&&(h=n.g_(),a=n.x_(),u=n.S_(),f=!0):(o=n.p_(),h=n.y_(this.nO()),a=n.I_(this.nO()),l=n.C_(),u=n.v_(this.nO()),c=n.p_(!0)));const d=n.b_(this.CT(),f,this.KE&&this.ZE,this.nO()),p=this.CT()>=2?n.p_():r,m=[[h,o,"<default>"],[h,o,"<default-device-transform>"],[a,l,"<point>"],[n.__(),r,"<fill>"],[n.G_(),r,"<lineargradient>"],[n.P_(),r,"<penumbra>"],[n.R_(),r,"<hardellipse>"],[n.E_(),r,"<hardellipseoutline>"],[n.O_(),r,"<smoothellipse>"],[n.D_(),r,"<smoothellipseoutline>"],[n.A_(),r,"<smoothline>"],[u,c,"<tilemap>"],[d,p,"<tilerandomization>"]],g=await Promise.all(m.map(t=>this.rO({src:t[0],Wx:t[1],name:t[2]})));this.uS=g[0],this.TE=g[1],this.cS=g[2],this.pS=g[3],this.mS=g[4],this.gS=g[5],this.yS=g[6],this.wS=g[7],this.SS=g[8],this.vS=g[9],this.bS=g[10],this.fS=g[11],this.dS=g[12],this.uv()}async rO(t){const s=await Pc.Nw.Bx.Ux(this,t);return this.hv(s),s}hO(){this.CE=null}$A(t,s,i){if(this.Ay===t&&this.Ry===s&&!i)return;this.Fb();const e=this.Hx,n=this.K_;this.Ay=t,this.Ry=s,this.oO(0,0,t,s),this.tv(this.nE,t/s),this.aO(this.nE),this.TE&&(e.useProgram(this.TE.zI()),this.TE.BI(this.eS),this.CE=this.TE,this.K_.UI=this.TE),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.RE=null,this.OG=null,this.rE&&this.uE&&this.lO(this.Ay,this.Ry),this.GE&&this.GE.yx(this.Ay,this.Ry),e.bindFramebuffer(e.FRAMEBUFFER,null),this.GE=null,n.vx=null,n.bx=null}lO(t,s){const i=this.Hx;this.lE&&this.cE===t&&this.fE===s||(this.hE?(this.lE&&i.deleteTexture(this.lE),this.lE=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.lE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),this.CT()>=2?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.YE&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.YE.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.lE&&i.deleteRenderbuffer(this.lE),this.lE=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.lE),i.renderbufferStorage(i.RENDERBUFFER,this.SR>=2?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.cE=t,this.fE=s)}uO(t,s){this.rE&&(this.uE=!1,this.lO(t,s))}cO(){this.rE&&(this.uE=!0,this.lO(this.Ay,this.Ry))}oO(t,s,i,e){const n=this.iE;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(this.fO().dG(t,s,i,e),Oc.set(n,t,s,i,e),this._E=0)}YS(t){super.YS(t),this.tv(this.nE,this.Ay/this.Ry)}HS(t){super.HS(t),this.tv(this.nE,this.Ay/this.Ry)}JS(t){super.JS(t),this.tv(this.nE,this.Ay/this.Ry)}aO(t){Dc.D(this.eS,t)||(this.fO().mG(t),Dc.S(this.eS,t),this._E=0,this.eE=!0)}dO(){let t,s,i;const e=this.GE;null===e?(t=this.nE,s=this.Vg(),i=this.Qg()):(t=e.xx(),s=e.Vg(),i=e.Qg()),this.aO(t),this.oO(0,0,s,i)}pO(t){Dc.D(this.nS,t)||(this.fO().yG(t),Dc.S(this.nS,t),this._E=0,this.eE=!0)}mO(){this.eE=!1}gO(){return this.eE}Sx(){return this.K_}fO(){const t=this.xE;return this.IE===t.length&&t.push(new Pc.Nw.X_(this.K_)),t[this.IE++]}Fb(){0!==this.IE&&(this.mR()||(this.yO(),this.wO(),this.IE=0,this.vE=0,this.bE=0,this.ME=0,this._E=0))}yO(){const t=this.Hx;this.vE>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.qx),t.bufferSubData(t.ARRAY_BUFFER,0,this.mE.subarray(0,3*this.vE)),t.bindBuffer(t.ARRAY_BUFFER,this.Yx),t.bufferSubData(t.ARRAY_BUFFER,0,this.yE.subarray(0,2*this.vE)),t.bindBuffer(t.ARRAY_BUFFER,this.Xx),t.bufferSubData(t.ARRAY_BUFFER,0,this.wE.subarray(0,4*this.vE))),this.bE>0&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.dE),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,this.gE.subarray(0,this.bE))),this.ME>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.Zx),t.bufferSubData(t.ARRAY_BUFFER,0,this.SE.subarray(0,this.ME)))}wO(){const t=this.xE;for(let s=0,i=this.IE;s<i;++s)t[s].gP()}SO(){return this.AE.Wo()}vO(t,s,i,e){const n=this.AE;n.qo(t,s,i,e)||(n.Po(t,s,i,e),this.CS=null,2===this._E&&(this._E=0))}bO(t){const s=this.AE;s.Wo()!==t&&(s.ko(t),this.CS=null,2===this._E&&(this._E=0))}BM(t){const s=this.AE;s.equals(t)||(s.set(t),this.CS=null,2===this._E&&(this._E=0))}MO(){this.vO(1,1,1,1)}CO(){return this.AE}TO(t){t!==this.RE&&(this.fO().oG(t),this.RE=t,this._E=0)}_T(){this.RE=null}NM(t){const s=this.Lv(t);this.xO(s[0],s[1])}IO(t){const s=this.$v(t);this.xO(s.Fv,s.kv)}xO(t,s){t===this.EE&&s===this.OE||(this.fO().cG(t,s),this.EE=t,this.OE=s,this._E=0,this.CS=null)}_O(){return this.EE===this.Hx.ONE&&this.OE===this.Hx.ONE_MINUS_SRC_ALPHA}GO(){this.xO(this.Hx.ONE,this.Hx.ONE_MINUS_SRC_ALPHA)}PO(){this.xO(this.Hx.SRC_ALPHA,this.Hx.ONE_MINUS_SRC_ALPHA)}Ab(t){this.LE!==t&&(this.fO().fP(t),this.LE=t,this._E=0,this.CS=null)}AO(){return this.LE}Rb(t){this.NE!==t&&(this.fO().pP(t),this.NE=t,this._E=0,this.CS=null)}RO(){return this.NE}EO(){this.xO(this.Hx.ONE,this.Hx.ZERO)}Rect(t){this.OO(t.Qa(),t.tl(),t.sl(),t.il())}OO(t,s,i,e){this.Ob(t,s,i,s,i,e,t,e)}DO(t,s){(this.vE+t>65535||this.bE+s>393210)&&this.Fb(),1===this._E?this.xE[this.IE-1].Q_+=s:(this.fO().rG(2*this.bE,s),this._E=1)}FO(){const t=this.vE;let s=this.bE;this.bE+=6;const i=this.gE;i[s++]=t,i[s++]=t+1,i[s++]=t+2,i[s++]=t,i[s++]=t+2,i[s]=t+3}Pl(t){this.kO(t,Wc)}Ob(t,s,i,e,n,r,h,o){this.DO(4,6),this.FO();const a=this.mE,l=this.vE;this.vE+=4;let u=3*l;const c=this.IS+this._S;a[u++]=t,a[u++]=s,a[u++]=c,a[u++]=i,a[u++]=e,a[u++]=c,a[u++]=n,a[u++]=r,a[u++]=c,a[u++]=h,a[u++]=o,a[u]=c,Wc.Vo(this.yE,2*l),this.AE.Uo(this.wE,4*l)}sb(t,s){this.DO(4,6),this.FO();const i=this.vE;this.vE+=4,t.Yl(this.mE,3*i,this.IS+this._S),s.rl(this.yE,2*i),this.AE.Uo(this.wE,4*i)}kO(t,s){this.DO(4,6),this.FO();const i=this.vE;this.vE+=4,t.Yl(this.mE,3*i,this.IS+this._S),s.Vo(this.yE,2*i),this.AE.Uo(this.wE,4*i)}LO(t,s,i){this.DO(4,6),this.FO();const e=this.vE;this.vE+=4,t.Yl(this.mE,3*e,this.IS+this._S),s.Vo(this.yE,2*e),this.wE.set(i,4*e)}NO(t,s,i,e,n,r,h,o,a,l,u,c,f){this.DO(4,6),this.FO();const d=this.mE,p=this.vE;this.vE+=4;let m=3*p;const g=this.IS+this._S;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.rl(this.yE,2*p),this.AE.Uo(this.wE,4*p)}Xv(t,s,i,e,n,r,h,o,a,l,u,c,f){this.DO(4,6),this.FO();const d=this.mE,p=this.vE;this.vE+=4;let m=3*p;const g=this.IS+this._S;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.Vo(this.yE,2*p),this.AE.Uo(this.wE,4*p)}BO(t,s,i,e,n,r,h,o,a,l,u,c,f,d){this.DO(4,6),this.FO();const p=this.mE,m=this.vE;this.vE+=4;let g=3*m;const y=this.IS+this._S;p[g++]=t,p[g++]=s,p[g++]=y+i,p[g++]=e,p[g++]=n,p[g++]=y+r,p[g++]=h,p[g++]=o,p[g++]=y+a,p[g++]=l,p[g++]=u,p[g]=y+c,f.Vo(this.yE,2*m),this.wE.set(d,4*m)}zC(t,s,i,e){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(i.length%3!=0)throw new Error("index buffer length not multiple of 3");if(i.length>393210)throw new Error(`too many indices (${i.length}, limit 393210)`);this.DO(t.length,i.length);const n=this.vE;this.mE.set(t,3*n),this.yE.set(s,2*n);const r=this.gE;if(0===n)r.set(i,this.bE);else{let t=this.bE;for(let s=0,e=i.length;s<e;++s)r[t++]=i[s]+n}const h=this.wE;if(void 0!==e)h.set(e,4*n);else{const s=this.AE,i=s.No(),e=s.Bo(),r=s.$o(),o=s.Wo();let a=4*n;for(let s=0,n=t.length;s<n;++s)h[a++]=i,h[a++]=e,h[a++]=r,h[a++]=o}this.vE+=t.length/3,this.bE+=i.length}$O(t,s){this.Uv(0),Dc.S(jc,this.eS),Dc.S(Vc,this.nS),this.dO();const[i,e]=this.WO(this.GE),n=this.rv(0,0,this.WS(e),0,0,0,e);if(this.pO(n),"crop"===t&&this.GE&&s){const t=this.Ay/2,i=this.Ry/2,e=s.Vg(),n=s.Qg(),r=this.GE.Vg(),h=this.GE.Qg(),o=Math.min(r,e),a=Math.min(h,n),l=Math.max(n-h,0),u=Math.max(h-n,0);Hc.set(-t,i-u,-t+o,i-a-u),Uc.Xl(Hc),Hc.set(0,l,o,a+l),Hc.St(e,n),this.sb(Uc,Hc)}else{const t=i/2,s=e/2;this.OO(-t,s,t,-s)}this.aO(jc),this.pO(Vc)}jO(t){this.DE.equals(t)||(this.DE.S(t),this.fO().TG(t),this._E=0)}VO(){}UO(t,s,i,e){this.ME>=7996&&this.Fb();let n=this.ME;const r=this.IS+this._S;2===this._E&&this.PE===r?this.xE[this.IE-1].Q_++:(this.fO().IG(n,r,this.AE),this._E=2,this.PE=r);const h=this.SE;h[n++]=t,h[n++]=s,h[n++]=i,h[n++]=e,this.ME=n}cv(t){this.CE!==t&&(this.fO().GG(t),this.CE=t,this._E=0,this.CS=null)}HO(){return this.CE}zO(){this.cv(this.TE)}JO(t){this.fO().lG(t),this._E=0}qO(t,s,i=1){this.fO().zG(t,s,i),this._E=0}YO(t,s,i,e,n,r,h){if(this.CE!==this.fS)throw new Error("must set tilemap fill mode first");this.fO().qG(t,s,i,e,n,r,h),this._E=0}XO(t,s,i,e,n,r,h){if(this.CE!==this.dS)throw new Error("must set tile randomization mode first");this.fO().XG(t,s,i,e,n,r,h),this._E=0}KO(t,s,i,e,n,r,h,o,a,l,u){const c=this.CE;if(u%=10800,!c.GI||c.t_(s,i,e,n,r,h,o,a,l,u))return;const f=this.fO();f.AG(),c.e_(s,i,e,n,r,h,o,a,l,u);const d=f.sG;d[0]=r,d[1]=h,s.Vo(d,2),d[6]=a,d[7]=l,i.Vo(d,12);const p=f.iG;n.Vo(p,0);const m=p[1];p[1]=p[3],p[3]=m,e.Vo(f.eG,0),f.Z_=u,f.Q_=o,c.cI.AI()?f.tG=t?t.Tx():null:f.tG=null,this._E=0}ZO(t){const s=this.CE;if(0===t.length||s.XI(t))return;const i=this.fO();i.DG(),s.ZI(t),Pc.xh(i.nG,t),this._E=0}QO(t,s,i,e){this.fO().MG(t,s,i,e),this._E=0}Au(t){this.fO().bG(t),this._E=0}tD(){}Db(){super.Db(),this.Hx.flush()}sD(){this.rE&&this.GE&&this.GE.Px()&&(this.fO().ZG(this.oE),this._E=0)}iD(t){t=!!t,this.oE!==t&&this.rE&&(this.oE=t,this.fO().tP(t),this._E=0)}eD(){return this.oE}mx(){return this.lE}gx(){return this.hE}nD(t){if(t=!!t,this.hE&&this.aE!==t){if(t&&this.eD())throw new Error("depth still enabled");this.aE=t,this.fO().iP(t),this._E=0}}rD(t,s,i,e,n=0){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),this.FE.Za(t,s,i,e)||(this.FE.Ha(t,s,i,e),s=(n||this.WO(this.hD())[1])-s-e,this.fO().uP(!0,t,s,i,e),this._E=0)}oD(){-1!==this.FE.sl()&&(this.FE.set(0,0,-1,-1),this.fO().uP(!1,0,0,0,0),this._E=0)}aD(){for(const t of this.sO)t.UR(this.DS)}mR(){return!this.Hx||this.Hx.isContextLost()||this.HE}$M(){super.$S(),Pc.Nw.uT.$M(),Pc.Nw.zT.$M(),Pc.Nw.qb.$M();for(const t of this.sO)t.Au();this.UE=[],this.vR=null,this.zE=null,this.qE=null,this.JE=null,this.YE=null,this.XE=null,this.KE=null,this.ZE=null,this.QE=0,this.jE="(unavailable)",this.VE="(unavailable)",this.CE=null,this.TE=null,this.lE=null;for(const t of this.MS.values())t.$M()}async WM(){this.HE=!0,await this.BS(),this.HE=!1;for(const t of this.MS.values())t.WM(this);this.$A(this.Ay,this.Ry,!0)}lD(t,s){if(this.mR())throw new Error("context lost");this.Fb();const i=Pc.Hn(Pc.Nw.uT,this);return i.vT(t,s),i}async uD(t,s){if(this.mR())throw new Error("context lost");if(s=Object.assign({},s),Pc.Ri.ImageBitmapOptions){let i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const e=s.sT&&"clamp-to-edge"!==s.sT||s.iT&&"clamp-to-edge"!==s.iT,n=Pc.vr(i.width)&&Pc.vr(i.height);return this.TT()||n||!e?s.aT=!1:Pc.Ri.Fi?(i=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:Pc.br(i.width),resizeHeight:Pc.br(i.height)}),s.aT=!1):i=await createImageBitmap(t,{premultiplyAlpha:"none"}),await Pc.pf(()=>this.lD(i,s))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const s=await Pc.uo(t);t=s}return await Pc.pf(()=>this.lD(t,s))}ux(t,s,i){this.Fb();const e=Pc.Hn(Pc.Nw.uT,this);return e.GT(t,s,i),e}gR(t,s,i){this.Fb(),s.OT(t,i)}wx(t){t&&(t.NT(),t.BT()>0||(this.Fb(),t===this.RE&&(this.Hx.bindTexture(this.Hx.TEXTURE_2D,null),this.RE=null),t===this.OG&&(this.Hx.activeTexture(this.Hx.TEXTURE1),this.Hx.bindTexture(this.Hx.TEXTURE_2D,null),this.Hx.activeTexture(this.Hx.TEXTURE0),this.OG=null),t.DT()))}cD(t){let s=this.Ay,i=this.Ry,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height&&(i=Math.floor(t.height),e=!1)),s<=0||i<=0)throw new Error("invalid size");this.Fb();const n=Pc.Hn(Pc.Nw.zT,this);return n.ox(s,i,Object.assign({UT:e},t)),this.GE=null,this.K_.vx=null,this.K_.bx=null,n}fD(t,s=!0){t!==this.GE&&(t&&t.Ax()&&t.yx(this.Ay,this.Ry),this.fO().SG(t),this.GE=t,this._E=0,s&&this.dO())}hD(){return this.GE}WO(t){return t?[t.Vg(),t.Qg()]:[this.Ay,this.Ry]}dD(t,s="stretch"){this.SR<2||this.GE&&this.GE.Rx()>0?(this.EO(),this.MO(),this.pD(t,s)):(this.fO().NG(t,this.GE,s),this._E=0)}pD(t,s="stretch"){const i=t.Tx();if(!i)throw new Error("not a texture-backed render target");this.TO(i),this.$O(s,i)}mD(t){this.SR<2||(this.fO().kG(t.Mx()),this._E=0)}gD(t){this.fD(null),this.Fb();const s=t.Tx();s===this.RE&&(this.Hx.bindTexture(this.Hx.TEXTURE_2D,null),this.RE=null),s===this.OG&&(this.Hx.activeTexture(this.Hx.TEXTURE1),this.Hx.bindTexture(this.Hx.TEXTURE_2D,null),this.Hx.activeTexture(this.Hx.TEXTURE0),this.OG=null),t.DT()}async kx(t,s,i){this.Fb();const e=this.GE;let n,r,h;t?(n=t.Vg(),r=t.Qg(),h=t.Mx()):(n=this.Vg(),r=this.Qg(),h=null);let o=0,a=0,l=n,u=r;if(i){o=Pc.Kn(Math.floor(i.Qa()),0,n-1),a=Pc.Kn(Math.floor(i.tl()),0,r-1);let t=i.width();t=0===t?n-o:Pc.Kn(Math.floor(t),0,n-o);let s=i.height();s=0===s?r-a:Pc.Kn(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}const c=this.Hx;c.bindFramebuffer(c.FRAMEBUFFER,h);const f=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.GE=null,this.K_.vx=null,this.K_.bx=null,this.fD(e)};let d;if(!s&&this.CT()>=2){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const t=c.createBuffer(),s=l*u*4,i=c.PIXEL_PACK_BUFFER;c.bindBuffer(i,t),c.bufferData(i,s,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(i,null),f();const e=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.Vx(()=>c.getSyncParameter(e,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(e),d=new ImageData(l,u),c.bindBuffer(i,t),c.getBufferSubData(i,0,new Uint8Array(d.data.buffer),0,s),c.bindBuffer(i,null),c.deleteBuffer(t)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}yD(){this.iD(!0),this.fO().nP(),this._E=0,this.kE=1}wD(){this.iD(!1),this.fO().hP(),this._E=0,this.kE=2}SD(){return 2===this.kE}vD(){this.iD(!0),this.fO().aP(),this._E=0,this.kE=0}bD(t){this.MD()&&(this.fO().$G(t),this._E=0)}CD(t){this.MD()&&(this.fO().VG(t),this._E=0)}Vx(t){const s=new Promise(s=>Jc.add({resolve:s,JR:t}));return-1===qc&&(qc=self.requestAnimationFrame(Gc)),s}Vb(){return this.Ay*this.Ry*(this.tE.alpha?4:3)}Ub(){let t=0;for(const s of Pc.Nw.zT.Lx())s.Tx()||(t+=s.WT());return t}Hb(){let t=0;for(const s of Pc.Nw.uT.jT())t+=s.WT();return t}TD(){return this.sE}CT(){return this.SR}Kx(){return this.pE}xD(){return"webgl"+this.CT()}TT(){return this.CT()>=2}bT(){return this.BE}ID(){return this.$E}_D(){return this.WE}GD(){return this.jE}PD(){return this.VE}AD(){if(this.CT()>=2)return"webgl2";{const t=[];return this.XE&&t.push("EXT_frag_depth"),this.KE&&t.push("OES_standard_derivatives"),this.ZE&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}RD(){return this.UE}MD(){return!!this.vR}bR(){return this.vR}jx(){return this.zE}nO(){return!!this.qE}RT(){return this.JE}ET(){return this.QE}WR(t){this.sO.add(t)}jR(t){this.sO.delete(t)}DR(){return this.iO}MT(){return this.Hx}eO(t){this.Dv([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}ED(){return this.Jb()}}}{const Yc=self._s,Xc={OD:null,DD:null,FD:null,getTime:null,kD:null};Yc.Nw.LD=class{constructor(t){t=Object.assign({},Xc,t),this.ND=t.OD,this.BD=t.DD,this.$D=t.FD,this.WD=t.getTime,this.jD=t.kD,this.VD=null,this.UD=new Set}HD(t){this.UD.add(t)}zD(t){this.UD.delete(t)}$M(){this.VD=null;for(const t of this.UD)t.$M()}JD(t){return this.ND?this.ND(t):[t.Vg(),t.Qg()]}hD(t){return this.BD(t)}qD(t,s){this.$D(t,s)}YD(){return this.WD()}Dp(t){this.jD(t)}XD(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.VD||this.VD.Vg()===s&&this.VD.Qg()===i||(t.wx(this.VD),this.VD=null),null===this.VD&&(this.VD=t.lD(null,{width:s,height:i,eT:"nearest",hT:!1})),this.VD}}}{const Kc=self._s,Zc=self.assert,Qc=self.ls,tf=Qc.ds,sf=Kc.Hn(Kc.Rect),ef=Kc.Hn(Kc.Rect),nf=Kc.Hn(Kc.Rect),rf=Kc.Hn(Kc.Rect),hf=tf.create(),of=tf.create(),af={KD:null,ZD:null,QD:null,tF:!1},lf={sF:null,iF:!1,eF:!1,nF:!1,rF:!1,hF:!1,oF:!1};Kc.Nw.aF=class{constructor(t,s){s=Object.assign({},af,s),this.Vp=t,this.lF=s.KD,this.uF=s.ZD,this.cF=s.QD,this.fF=null,this.dF=[],this.pF=[],this.mF=[],this.gF=!1,this.EM=0,this.yF=!1,this.wF=!1,this.SF=!1,this.vF=!1,this.bF=!1,this.MF=!1,this.eE=!1,this.CF=!1,this.TF=!1,this.xF=!1,this.IF=!1,this._F=!1,this.GF=0,this.PF=[null,null,null],this.AF=!!s.tF,this.RF=0,this.EF=0,this.OF=0,this.DF=0,this.FF=null,this.kF=null,this.LF=Kc.Hn(Kc.Rect),this.NF=Kc.Hn(Kc.Rect),this.BF=Kc.Hn(Kc.Rect),this.$F=Kc.Hn(Kc.Rect),this.WF=Kc.Hn(Kc.Rect),this.jF=1,this.VF=1,this.UF=0,this.HF=0,this.zF=null,this.JF=null,this.qF=0,this.YF=0,this.XF=0,this.KF=0,this.ZF=!1,this.sx=tf.create(),this.QF=tf.create(),this.Vp.HD(this)}zn(){this.Vp.zD(this),Kc.bh(this.mF),Kc.bh(this.dF),Kc.bh(this.pF),this.FF=null,this.kF=null,this.lF=null,this.uF=null,this.cF=null}$M(){this.gF=!0,Kc.bh(this.mF),Kc.bh(this.dF),Kc.bh(this.pF)}tk(){return this.gF}sk(t,s){if(s=Object.assign({},lf,s),Kc.bh(this.mF),this.RF=0,this.EF=0,this.yF=!1,this.wF=!1,this.SF=!1,this.vF=!1,this.bF=!1,this.MF=!1,this.GF=0,this._F=!!s.rF,this.IF=!!s.oF,this.gF=!1,Kc.xh(this.dF,t),0===t.length)return;if(s.sF){if(s.sF.length!==t.length)throw new Error("incorrect indexMap length");Kc.xh(this.pF,s.sF)}else{Kc.bh(this.pF);for(let s=0,i=t.length;s<i;++s)this.pF.push(s)}for(const s of t)this.RF+=s.wM(),this.EF+=s.SM(),s.TM()&&(this.yF=!0),s.IM()&&(this.wF=!0),s.xM()&&(this.SF=!0),s.vM()&&(this.vF=!0),s.PM()&&(this.bF=!0);this.MF=this.ik(t[0].gM());const i=this.ek(t[0],s),e=this.nk(t.at(-1),s);if(1===t.length&&!i&&!e)return void(this.xF=!0);this.xF=!1;let n=0;i&&(this.GF=1,this.mF.push(Kc.Hn(Kc.Nw.aF.hk.rk,this,-1,1)),n=1);for(let s=0,r=t.length;s<r;++s)if(0!==s||i){let t=1===n?2:1;s!==r-1||e||(t=0),this.GF=Math.max(this.GF,t),this.mF.push(Kc.Hn(Kc.Nw.aF.hk.ak,this,n,t,s)),n=t}else this.GF=1,this.mF.push(Kc.Hn(Kc.Nw.aF.hk.lk,this,-1,1,s)),n=1;e&&this.mF.push(Kc.Hn(Kc.Nw.aF.hk.uk,this,n,0))}ek(t,s){return!!(s.iF||t.bM()||s.nF&&!t.CM()||t.IM()&&!this.IF||0!==this.RF||0!==this.EF)||(t.gM().jb()?t.xM()&&(s.hF||s.rF)||t._M()&&s.rF:t.xM()&&!this.MF&&s.hF)}nk(t,s){return!!s.eF||(t.gM().jb()?t.xM()||t.vM():(t.xM()||t.vM())&&this.ck())}ik(t){return t.sv()&&this.SF&&!this.vF}fk(t,s,i){t.sv()&&null===s&&(s=t.dk()),this.zF=s,this.FF=i.pk||null,this.kF=i.mk||null,this.EM=i.gk||0,this.jF=i.devicePixelRatio||1,this.VF=i.yk||1,this.UF=i.wk||0,this.HF="number"==typeof i.time?i.time:this.Vp.YD(),this.eE=!1,t.mO(),this.yF&&this.Sk();let e=!1;if(this.vk()&&(this.bk(t,i),e=!0,this.JF=this.Vp.XD(t,this.OF,this.DF),sf.S(this.NF),sf.bl(),t.sv()&&t.Mk(this.zF),t.Ck(this.zF.Tx(),this.JF,sf.Qa(),sf.tl(),sf.width(),sf.height())),this.xF)this.Tk(t,i);else if(e||this.bk(t,i),0!==this.BF.width()||0!==this.BF.height()){t.GO(),t.Pb(),t.MO(),t.jv(0),t.Uv(0),this.fF=i.xk||null,this.qF=i.Ik||0,this.YF=i._k||0,this.XF=i.Gk||0,this.KF=i.Pk||0,this.ZF=!!i.Ak,this.Rk(t),this.PF[0]=s,this.PF[1]=this.GF>=1?this.Ek():null,this.PF[2]=2===this.GF?this.Ek():null;for(const s of this.mF){const i=this.Ok(s.Dk()),e=this.Ok(s.Fk());t.sv()?s.kk(t,i,e):s.Lk(t,i,e)}t.TO(null),this.PF[1]&&this.Nk(this.PF[1]),this.PF[2]&&this.Nk(this.PF[2]),this.PF.fill(null),this.Bk(t),this.zF=null,this.JF=null,this.FF=null,this.kF=null,this.fF=null}}bk(t,s){const[i,e]=this.Vp.JD(t);this.$k(t,i,e),this.Wk(s)}$k(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.OF===s&&this.DF===i||this.jk(t,s,i,0,0,this.sx,this.QF),this.OF=s,this.DF=i}jk(t,s,i,e,n,r,h){const o=s/2+e,a=i/2+n;t.tv(r,s/i);const l=t.rv(o,a,t.WS(i),o,a,0,i);tf.S(h,l)}Wk(t){this.LF.S(t.Vk),t.Uk?this.NF.S(t.Uk):this.NF.set(0,0,this.OF,this.DF),this.BF.S(this.NF),this.BF.St(this.OF,this.DF);const s=this.VF*this.jF;this.NF.fl(this.RF*s,this.EF*s),this.WF.S(this.NF),this.WF.St(this.OF,this.DF),this.NF.Ml(0,0,this.OF,this.DF),this.$F.S(this.NF),this.$F.St(this.OF,this.DF)}Rk(t){if(this.CF=t.eD(),this.TF=t.SD(),this.IF)t.iD(!1),this.wF&&t.nD(!0);else{if(sf.S(this.NF),t.jb()){const t=this.VF*this.jF;sf.fl(Math.max(this.RF,1)*t,Math.max(this.EF,1)*t),sf.bl(),sf.Kn(0,0,this.OF,this.DF)}else sf.bl();t.rD(sf.Qa(),sf.tl(),sf.width(),sf.height(),this.DF)}}Hk(t){t.MO(),this.IF||(this.TF&&t.vD(),t.iD(!1),this.wF&&t.nD(!0)),t.sv()&&t.zk(!0)}Bk(t){t.nD(!1),this.TF&&t.wD(),t.iD(this.CF),this.IF||t.oD(),t.sv()&&t.zk(!1),this.eE=t.gO()}Jk(){this.WF.Kn(0,0,1,1)}Ok(t){return t<0?null:this.PF[t]}Ek(){return this.Vp.hD(this)}qk(){return this.zF}Nk(t){this.Vp.qD(t,this)}Yk(t){return this.dF[t]}Xk(t){this.fF?this.fF(this,t,()=>this.lF(t,this)):this.lF(t,this),this.xF||this.Hk(t)}Kk(t){if(this.IF)return!0;if(0!==this.qF||0!==this.YF||0!==this.XF||0!==this.KF)return!1;const[s,i]=t.WO(t.hD());return s===this.OF&&i===this.DF}Zk(t,s){let i=this.sx,e=this.QF;if(s&&!this.Kk(t)){let s,n;i=hf,e=of,0!==this.XF&&0!==this.KF?[s,n]=[this.XF,this.KF]:[s,n]=t.WO(t.hD()),this.jk(t,s,n,this.qF,this.YF,i,e),this.IF||t.oD()}t.aO(i),t.pO(e)}Sk(){this.Vp.Dp(this)}Qk(t,s){return this.cF(this.pF[t],s)}tL(t,s){let i=this.WF,e=this.$F,n=this.BF;t.jb()&&(ef.S(i),ef.ml(1),i=ef,nf.S(e),nf.ml(1),e=nf,rf.S(n),rf.ml(1),n=rf),this.sL(t,s,e,n,i,1/this.OF,1/this.DF)}iL(t,s){let i=this.$F,e=this.BF,n=1/this.OF,r=1/this.DF;if(this.uF){let{eL:t,nL:s,rL:h}=this.uF(this.FF);t||(sf.set(0,0,0,0),t=sf),s||(s=this.OF),h||(h=this.DF),i=t,e=t,n=1/s,r=1/h}else t.jb()&&(nf.S(i),nf.ml(1),i=nf,rf.S(e),rf.ml(1),e=rf);let h=this.WF;t.jb()&&(h=ef,h.S(this.WF),h.ml(1)),this.sL(t,s,i,e,h,n,r),t.sv()&&this.bF&&t.hL(this._F)}oL(t){return this.SF?t.sv()?this.vk()?this.JF:this.zF.Tx():this.zF:null}sL(t,s,i,e,n,r,h){t.KO(this.oL(t),n,i,e,this.LF,r,h,this.jF,this.VF,this.UF,this.HF),t.ZO(this.Qk(s,t))}Tk(t,s){const i=this.dF[0],e=t.eD(),n=i.IM();n&&(t.iD(!1),t.nD(!0),this.WF.set(0,0,1,1),this.BF.set(0,0,1,1)),t.cv(i),t.NM(this.EM),t.fD(this.zF),t.Pb();let r=0,h=1;if(this.BF.set(0,0,1,1),i._M()&&this.uF){const{eL:t,nL:s,rL:i}=this.uF(this.FF);t&&this.BF.S(t),r=Number.isFinite(s)?1/s:0,h=Number.isFinite(i)?1/i:0}else{const[s,i]=this.Vp.JD(t);r=1/s,h=1/i}s.Vk?this.LF.S(s.Vk):this.LF.set(0,0,0,0),t.KO(this.oL(t),this.WF,this.BF,this.BF,this.LF,r,h,this.jF,this.VF,this.UF,this.HF),t.ZO(this.Qk(0,t)),t.sv()&&this.bF&&t.hL(this._F),t.jv(0),this.Xk(t),n&&(t.nD(!1),t.iD(e))}vk(){return this.MF}ck(){return!this.MF}aL(){return this.SF}lL(){return!!this.xF&&!this.vk()}uL(){return this.IF}cL(){return this.FF}fL(){return this.kF}dL(){return this.EM}pL(){return this.ZF}gO(){return this.eE}mL(){return this.NF}gL(){return this.$F}yL(){return this.AF}async wL(t,s,i){}}}{const uf=self._s;uf.Nw.aF.hk=class{constructor(t,s,i,e=-1){this.SL=t,this.vL=s,this.bL=i,this.Rw=e}ML(){return this.SL}Dk(){return this.vL}Fk(){return this.bL}CL(){return this.Rw}zI(){return this.ML().Yk(this.CL())}Lk(t,s,i){}kk(t,s,i){}}}{const cf=self._s;cf.Nw.aF.hk.rk=class extends cf.Nw.aF.hk{constructor(t,s,i,e){super(t,s,i,e)}Lk(t,s,i){const e=this.ML();t.GO(),t.Pb(),t.uv(),t.fD(i,e.pL()),t.QO(0,0,0,0),e.Xk(t),e.Jk()}kk(t,s,i){const e=this.ML();t.GO(),t.Pb(),t.uv(),t.fD(i,!1),t.QO(0,0,0,0),e.Xk(t),e.Jk()}}}{const ff=self._s,df=ff.Hn(ff.Rect),pf=ff.Hn(ff.Pl);ff.Nw.aF.hk.uk=class extends ff.Nw.aF.hk{constructor(t,s,i,e){super(t,s,i,e)}Lk(t,s,i){const e=this.ML();t.uv(),t.fD(i),e.Zk(t,!0),t.NM(e.dL()),t.TO(s.Tx()),pf.Xl(e.mL()),df.S(e.gL()),df.ml(1),t.sb(pf,df),e.yL()&&t.mD(s)}kk(t,s,i){const e=this.ML();t.uv(),t.fD(i,!1),e.Kk(t)?pf.Xl(e.gL()):(t.zk(!1),e.Zk(t,!0),pf.Xl(e.mL())),t.TL(null),t.NM(e.dL()),t.TO(s.Tx()),e.uL()?t.$O():t.sb(pf,e.gL())}}}{const mf=self._s;mf.Nw.aF.hk.lk=class extends mf.Nw.aF.hk{constructor(t,s,i,e){super(t,s,i,e)}Lk(t,s,i){const e=this.ML();t.fD(i,e.pL()),t.QO(0,0,0,0),t.EO(),t.cv(this.zI()),e.iL(t,this.CL()),e.Xk(t),e.Jk()}kk(t,s,i){const e=this.ML();t.fD(i,!1),t.QO(0,0,0,0),t.EO(),t.cv(this.zI()),e.iL(t,this.CL()),e.Xk(t),e.Jk()}}}{const gf=self._s,yf=gf.Hn(gf.Rect),wf=gf.Hn(gf.Pl);gf.Nw.aF.hk.ak=class extends gf.Nw.aF.hk{constructor(t,s,i,e){super(t,s,i,e)}Lk(t,s,i){const e=this.ML();t.fD(i);const n=0===this.Fk();n?t.NM(e.dL()):(t.QO(0,0,0,0),t.EO()),t.cv(this.zI()),e.tL(t,this.CL()),t.TO(s.Tx()),e.Zk(t,n),wf.Xl(e.mL()),yf.S(e.gL()),yf.ml(1),t.sb(wf,yf),e.yL()&&t.mD(s)}kk(t,s,i){const e=this.ML();t.fD(i,!1),0===this.Fk()?(t.NM(e.dL()),t.TL(null),e.Kk(t)?wf.Xl(e.gL()):(t.zk(!1),e.Zk(t,!0),wf.Xl(e.mL()))):(t.QO(0,0,0,0),t.EO(),wf.Xl(e.gL())),t.cv(this.zI()),e.tL(t,this.CL()),t.TO(s.Tx()),e.uL()?t.$O():t.sb(wf,e.gL())}}}{let Sf=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]};SortZOrderList=Sf;const vf=self._s,bf=self.Ns;let Mf=null;const Cf=new Set,Tf=[],xf=[];let If=!1,_f=!1,Gf=!1;const Pf=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.xL=class{constructor(t){Mf=t,Object.defineProperties(this,{IL:{value:Mf.GL()._L(),writable:!1},PL:{value:Mf.RL().AL(),writable:!1},EL:{value:{},writable:!1},OL:{value:{},writable:!1},DL:{value:Mf.FL(),writable:!1},kL:{value:Mf.LL(),writable:!1},NL:{value:Mf.BL(),writable:!1},$L:{value:Mf.WL(),writable:!1},jL:{value:new Date(Mf.VL()),writable:!1},storage:{value:new self.UL(Mf),writable:!1},HL:{value:Mf.zL(),writable:!1},JL:{value:Mf.qL(),writable:!1},YL:{value:Mf.XL(),writable:!1},eT:{value:Mf.KL(),writable:!1},ZL:{value:Mf.QL(),writable:!1},tN:{value:new self.sN(t),writable:!1},iN:{value:new self.eN(t),writable:!1}}),Mf.nN().addEventListener("keydown",t=>{Cf.has(t.key)?t.stopPropagation():Cf.add(t.key)}),Mf.nN().addEventListener("keyup",t=>Cf.delete(t.key)),Mf.Sf().addEventListener("window-blur",()=>Cf.clear()),Mf.zL()&&(self.alert=t=>(If||(If=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}rN(t){Object.defineProperties(this.EL,t)}hN(t){Object.defineProperties(this.OL,t)}addEventListener(t,s){Mf.nN().addEventListener(t,s)}removeEventListener(t,s){Mf.nN().removeEventListener(t,s)}oN(t,...s){bf.ue(t);const i=Mf.aN(),e=i.lN(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e._u())return e.uN();if(s.length<e.cN())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.cN()} expected)`);const n=e.fN();let r=n.dN();const h=i.pN();if(h){r=r.slice(0);const t=new Set(r);for(const s of h.dN())t.has(s)||(r.push(s),t.add(s));for(const s of i.mN())t.has(s)||(r.push(s),t.add(s))}return n.gN(r,e.yN(),e.wN(),e.uN(),...s)}SN(t){const s=Mf.bN().vN();if(!s)throw new Error("not in a function which returns a value");switch(s.MN()){case 1:"number"==typeof t&&s.CN(t);break;case 2:"string"==typeof t&&s.CN(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.CN(t)}}signal(t){bf.ue(t),Mf.aN().TN(t)}xN(t){return bf.ue(t),Mf.aN().IN(t)}_N(){return[Mf.qL(),Mf.XL()]}get GN(){return Mf.PN()}get AN(){return Mf.RN()}get EN(){return Mf.ON()}get DN(){return Mf.FN()}get kN(){return Mf.LN()}get NN(){return Mf.BN()}get $N(){return Mf.WN()}set $N(t){bf.he(t),Mf.jN(t)}get VN(){return _f||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),_f=!0),Mf.UN()}get framesPerSecond(){return Mf.UN()}get HN(){return Mf.zN()}get JN(){return Mf.qN()}get YN(){return Mf.XN()}get KN(){return Mf.ZN()}set KN(t){if(!Pf.has(t))throw new Error("invalid framerate mode");Mf.QN(t)}get tB(){return Mf.sB()}set tB(t){bf.he(t),Mf.iB(t)}get eB(){return Mf.nB()}set eB(t){Mf.rB(t)}get hB(){return Mf.GL().oB()}get aB(){return Mf.GL().lB()}random(){return Mf.uB()}get layout(){const t=Mf.cB();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.fB()}dB(t){const s=Mf.pB();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.mB(t),!i)throw new Error("invalid layout");return i.fB()}gB(){return Mf.pB().yB().map(t=>t.fB())}wB(t){const s=Mf.pB();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.mB(t),!i)throw new Error("invalid layout");s.SB()||s.vB(i)}get keyboard(){const t=Mf.bB().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get MB(){const t=Mf.bB().MB;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get CB(){const t=Mf.bB().CB;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get TB(){const t=Mf.bB().TB;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}get J_(){return Mf.IB().xB()}_B(t,s){bf.ue(t),bf.ue(s),Mf.GB(t,s)}PB(t){bf.he(t);const s=Mf.AB(t);return s?s.RB():null}EB(t,s){bf.Ee(s);const i=Mf.OB();for(const s of t){const t=Mf.DB(s),i=t.kB();Tf.push([i.LB().CL(),i.NB()]),xf.push(t)}if(0===Tf.length)return;Tf.sort(Sf),xf.sort((t,i)=>s(t.RB(),i.RB()));let e=!1;for(let t=0,s=Tf.length;t<s;++t){const s=xf[t],n=i.BB(Tf[t][0]),r=Tf[t][1],h=n.$B();h[r]!==s&&(h[r]=s,s.kB().WB(n,!0),n.jB(s),e=!0)}e&&Mf.VB(),vf.bh(Tf),vf.bh(xf)}async UB(t,s){Gf||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),Gf=!0);const i=new MessageChannel,e=i.port1,n=i.port2;return await Mf.HB("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),e}alert(t){return Mf.HB("runtime","alert",{message:t+(Mf.zL()?" [via Web Worker]":"")})}zB(t){return bf.he(t),Mf.JB(t)}qB(t){Mf.YB(t)}async XB(t,s,i){bf.ce(t),bf.ie(s),bf.$e(i,DOMRect),i||(i=new DOMRect(0,0,0,0));const e=Mf.IB();if(!e)return;Mf.VB();const n=await e.KB(t||"image/png",s,i.x,i.y,i.width,i.height);return await Mf.ZB(vf.i$.s$.t$.QB,null),n}}}{const Af=self._s,Rf=self.Ns;let Ef=null;self.e$=class{constructor(t){Ef=t,Object.defineProperties(this,{n$:{value:!0,writable:!1}})}r$(t){const s=self.o$.h$(t);if(!s)throw new Error("invalid IImageInfo");s.a$(Ef.l$())}u$(t){return Ef.io(t)}c$(t){return Ef.eo(t)}f$(t){return Ef.no(t)}d$(t){return Ef.ro(t)}p$(t){return Ef.m$(t)}g$(t){return"flat"===Ef.y$()&&Af.Zh(t)&&(t=t.toLowerCase()),Ef.w$(t)}get S$(){return Ef.v$()}async b$(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}M$(...t){return Ef.C$(...t)}T$(t){return Ef.x$(t)}I$(t){return Ef._$(t)}}}{const Of=self._s,Df=self.Ns;let Ff=null;self.G$=class{constructor(t){Ff=t,Object.defineProperties(this,{runtime:{value:Ff.l$(),writable:!1}})}P$(t,s){const i=Ff.l$(),e=i.DB(t),n=i.DB(s);return Ff.A$(e,n)}R$(t,s){const i=Ff.l$(),e=i.DB(t);for(const t of s){const s=i.DB(t);if(Ff.A$(e,s))return t}return null}E$(t){const s=Ff.l$().DB(t),i=Ff.O$(s);return i?i.RB():null}D$(t,s){if(Df.he(t),Df.he(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");Ff.F$(t,s)}k$(){return Ff.L$()}N$(t,s){const i=Ff.l$();let e;e=Array.isArray(t)?t.map(t=>i.B$(t)):[i.B$(t)];const n=Of.Rect.Ka(s),r=[];return Ff.$$(null,e,n,r),r.map(t=>t.RB())}}}{const kf=self._s,Lf=self.Ns;let Nf=null;const Bf=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),$f=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),Wf=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.sN=class{constructor(t){Nf=t,Object.defineProperties(this,{W$:{value:kf.Zs.oi,writable:!1},os:{value:Bf.get(kf.Zs.Qs)||"unknown",writable:!1},j$:{value:kf.Zs.ti,writable:!1},browser:{value:$f.get(kf.Zs.si)||"unknown",writable:!1},V$:{value:kf.Zs.ii,writable:!1},U$:{value:Wf.get(kf.Zs.ni)||"unknown",writable:!1}})}get H$(){let t=Nf.z$();return Nf.J$()?t="nwjs":Nf.q$()?t="windows-webview2":"cordova"===t?t="Android"===kf.Zs.Qs?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get J_(){return Nf.IB().Y$()}get X$(){return Nf.IB().K$()}get Z$(){return Nf.IB().Q$()}get tW(){return Nf.IB().sW()}get iW(){return Nf.IB().eW()}get nW(){return Nf.IB().rW()}get hW(){return Nf.IB().oW()}get aW(){return Nf.IB().lW()}get devicePixelRatio(){return Nf.uW()}}}{const jf=self._s,Vf=self.Ns;self.UL=class{constructor(t){this.cW=t.fW()}getItem(t){return Vf.ue(t),this.cW.getItem(t)}setItem(t,s){return Vf.ue(t),this.cW.setItem(t,s)}removeItem(t){return Vf.ue(t),this.cW.removeItem(t)}clear(){return this.cW.clear()}keys(){return this.cW.keys()}}}{const Uf=self._s,Hf=self.Ns,zf=Uf.Gs();self.dW=class{#t;constructor(){const t=Uf.mW.pW(zf);this.#t=t,Object.defineProperties(this,{runtime:{value:t.l$().gW(),writable:!1},id:{value:t.yW(),writable:!1},wW:{value:t.SW(),writable:!1},vW:{value:t.bW(),writable:!1},MW:{value:t.TW(),writable:!1},xW:{value:t.IW(),writable:!1},_W:{value:t.GW(),writable:!1},PW:{value:t.AW(),writable:!1},RW:{value:t.EW(),writable:!1},OW:{value:t.DW(),writable:!1}}),t.l$().FW(this,t)}static kW(t){if(!t)return null;const s=Uf.mW.LW(t);return s?s.NW():null}BW(){return this.#t.WW().$W()}jW(){return this.#t.VW().RB()}}}{const Jf=globalThis._s,qf=globalThis.Ns,Yf=Jf.Gs();globalThis.UW=class{#t;constructor(){const t=Jf.mW.pW(Yf);this.#t=t,Object.defineProperties(this,{name:{value:t.Ac(),writable:!1},runtime:{value:t.l$().gW(),writable:!1},HW:{value:t.zW().NW(),writable:!1}}),t.l$().FW(this,t)}addEventListener(t,s){qf.ue(t),qf.Ee(s),this.#t.nN().addEventListener(t,s)}removeEventListener(t,s){qf.ue(t),qf.Ee(s),this.#t.nN().removeEventListener(t,s)}JW(){return[...this.qW()]}YW(){return Jf.$h(this.qW())}XW(){return[...this.KW()]}ZW(){return Jf.$h(this.KW())}QW(t){const s=this.#t,i=s.l$().tj(t),e=s.sj(i);return e?e.RB():null}*qW(){for(const t of this.#t.ij())yield t.RB()}*KW(){for(const t of this.#t.nj().ej())yield t.RB()}}}{const Xf=globalThis._s,Kf=globalThis.Ns,Zf=Xf.Gs();globalThis.rj=class extends globalThis.UW{#t;constructor(){super();const t=Xf.mW.pW(Zf);this.#t=t}hj(t){Kf.Ee(t);const s=this.#t;if(s.oj()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.aj(t)}Ii(t,s,i,e,n){if(Kf.se(s),Kf.se(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#t,h=r.l$(),o=h.cB().LB(t);if(!o)throw new Error("invalid layer");const a=h.lj(r,o,s,i,e,n);e&&o.uj(a);const l=h.aN();return l.cj(!0),a.fj(),l.cj(!1),l.dj()||h.pB().pj()||h.mj(),a.RB()}gj(){return this.#t.yj().map(t=>t.$W())}*wj(){for(const t of this.#t.yj())yield t.$W()}Sj(t){return Kf.Be(t,globalThis.vj),t.bj(this)}}}{const Qf=globalThis._s,td=globalThis.Ns,sd=globalThis.rj,id=Qf.Gs();globalThis.vj=class extends globalThis.UW{#t;constructor(){super();const t=Qf.mW.pW(id);this.#t=t}Mj(){return this.#t.Cj().map(t=>t.$W())}*Tj(){for(const t of this.#t.Cj())yield t.$W()}bj(t){td.Be(t,sd);const s=this.#t,i=s.l$().B$(t);return s.xj(i)}}}{const ed=self._s,nd=self.Ns,rd=["above","below","top-sublayer","bottom-sublayer"];self.Ij=class{#t;constructor(t){this.#t=t;const s=[],i=t._j(),e=i.Gj().length;for(let t=0;t<e;++t)s.push(new self.Pj(i,t));Object.defineProperties(this,{runtime:{value:t.l$().gW(),writable:!1},name:{value:t.Ac(),writable:!1},index:{value:t.CL(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){nd.ue(t),nd.Ee(s),this.#t.nN().addEventListener(t,s)}removeEventListener(t,s){nd.ue(t),nd.Ee(s),this.#t.nN().removeEventListener(t,s)}get width(){return this.#t.Vg()}set width(t){nd.he(t),this.#t.Xg(t)}get height(){return this.#t.Qg()}set height(t){nd.he(t),this.#t.Ug(t)}Aj(t,s){nd.he(t),nd.he(s);const i=this.#t;i.Xg(t),i.Ug(s)}getSize(){const t=this.#t;return[t.Vg(),t.Qg()]}set scale(t){nd.he(t),this.#t.Rj(t)}get scale(){return this.#t.Ej()}set angle(t){nd.he(t),this.#t.Oj(t)}get angle(){return this.#t.Dj()}set scrollX(t){nd.se(t),this.#t.Fj(t)}get scrollX(){return this.#t.kj()}set scrollY(t){nd.se(t),this.#t.Lj(t)}get scrollY(){return this.#t.Nj()}scrollTo(t,s){nd.se(t),nd.se(s);const i=this.#t;i.Fj(t),i.Lj(s)}Bj(){const t=this.#t;return[t.kj(),t.Nj()]}get $j(){return this.#t.Wj()}jj(t){const s=this.#t;let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return i=s.LB(t),i?i.Vj():null}Uj(){return this.#t.Hj().map(t=>t.Vj())}*zj(){for(const t of this.#t.zj())yield t.Vj()}Jj(t,s,i){const e=this.#t,n=self.qj;nd.ue(t),nd.$e(s,n);const r=s?e.l$().Yj(s):null,h=rd.indexOf(i);if(h<0)throw new Error("invalid location");e.Xj(t,r,h)}Kj(t,s,i){const e=this.#t,n=e.l$(),r=self.qj;nd.Be(t,r);const h=n.Yj(t);if(!h)throw new Error("invalid layer");nd.$e(s,r);const o=s?n.Yj(s):null,a=rd.indexOf(i);if(a<0)throw new Error("invalid location");e.Zj(h,o,a)}Qj(t){const s=this.#t,i=self.qj;nd.Be(t,i);const e=s.l$().Yj(t);if(!e)throw new Error("invalid layer");const n=e.l$();s.tV(e),n.aN().dj()||n.mj()}sV(){const t=this.#t,s=t.l$();t.iV(),s.aN().dj()||s.mj()}eV(t,s){nd.he(t),nd.he(s),this.#t.nV(t,s)}rV(){return this.#t.hV()}set V(t){nd.ue(t);const s=this.#t;if("perspective"===t)s.oV();else{if("orthographic"!==t)throw new Error("invalid projection");s.aV()}}get V(){return this.#t.lV()?"orthographic":"perspective"}}}{const hd=self._s,od=self.Ns,ad=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ld=new Map([...ad.entries()].map(t=>[t[1],t[0]])),ud=new Set(["2d","3d"]),cd=hd.Hn(hd.To);self.qj=class{#t;constructor(t){this.#t=t;const s=[],i=t._j(),e=i.Gj().length;for(let t=0;t<e;++t)s.push(new self.Pj(i,t));Object.defineProperties(this,{runtime:{value:t.l$().gW(),writable:!1},name:{value:t.Ac(),writable:!1},layout:{value:t.mB().fB(),writable:!1},effects:{value:s,writable:!1}}),t.l$().FW(this,t)}addEventListener(t,s){this.#t.nN().addEventListener(t,s)}removeEventListener(t,s){this.#t.nN().removeEventListener(t,s)}get uV(){const t=this.#t.cV();return t?t.Vj():null}*fV(){for(const t of this.#t.fV())yield t.Vj()}*dV(){for(const t of this.#t.pV())yield t.Vj()}*mV(){for(const t of this.#t.pV())for(const s of t.gV())yield s.Vj()}get index(){return this.#t.CL()}get isVisible(){return this.#t.yV()}set isVisible(t){this.#t.wV(t)}get SV(){return this.#t.vV()}get bV(){return this.#t.MV()}set bV(t){this.#t.CV(t)}get TV(){return this.#t.xV()}set TV(t){this.#t.IV(!!t)}get _V(){return this.#t.GV()}get opacity(){return this.#t.SO()}set opacity(t){t=hd.Kn(+t,0,1),isNaN(t)||this.#t.bO(t)}set scale(t){od.he(t),this.#t.PV(t)}get scale(){return this.#t.AV()}set RV(t){od.he(t),this.#t.EV(t)}get RV(){return this.#t.OV()}set angle(t){od.he(t),this.#t.Oj(t)}get angle(){return this.#t.DV()}set FV(t){od.he(t),this.#t.kV(t)}get FV(){return this.#t.LV()}set NV(t){od.he(t),this.#t.BV(t)}get NV(){return this.#t.$V()}set WV(t){od.he(t),this.#t.sC(t)}get WV(){return this.#t.tC()}set renderingMode(t){if(!ud.has(t))throw TypeError("invalid rendering mode");this.#t.jV("3d"===t)}get renderingMode(){return this.#t.VV()?"3d":"2d"}set UV(t){this.#t.HV(t)}get UV(){return this.#t.zV()}set JV(t){this.#t.qV(t)}get JV(){return this.#t.YV()}set gk(t){od.ue(t);const s=ad.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");this.#t.NM(s)}get gk(){return ld.get(this.#t.XV())}set backgroundColor(t){if(od.xe(t),t.length<3)throw new Error("expected 3 elements");cd.Ao(t[0],t[1],t[2]);const s=this.#t,i=s.KV();i.zo(cd)||(i.Lo(cd),s.l$().VB())}get backgroundColor(){const t=this.#t.KV();return[t.No(),t.Bo(),t.$o()]}set scrollX(t){od.se(t);const s=this.#t;s.ZV(!0),s.Fj(t)}get scrollX(){return this.#t.kj()}set scrollY(t){od.se(t);const s=this.#t;s.ZV(!0),s.Lj(t)}get scrollY(){return this.#t.Nj()}scrollTo(t,s){od.se(t),od.se(s);const i=this.#t;i.ZV(!0),i.Fj(t),i.Lj(s)}Bj(){const t=this.#t;return[t.kj(),t.Nj()]}QV(){this.#t.ZV(!1)}getViewport(){return this.#t.tU().el()}sU(t,s,i=0){od.se(t),od.se(s),od.se(i);const e=this.#t,n=e.l$();return e.iU(t-n.Q$(),s-n.sW(),i)}eU(t,s,i=0){od.se(t),od.se(s),od.se(i);const e=this.#t,n=e.l$(),[r,h]=e.nU(t,s,i);return[r+n.Q$(),h+n.sW()]}rU(t,s,i=0){return od.se(t),od.se(s),od.se(i),this.#t.hU(t,s,i)}oU(t,s,i=0){return od.se(t),od.se(s),od.se(i),this.#t.aU(t,s,i)}get lU(){return this.#t.uU()}}}{let fd=function(t){let s=md.get(t);return s||(s=dd.Hn(dd.Event.Sf),md.set(t,s),s)};GetDispatcher=fd;const dd=self._s,pd=self.Ns,md=new WeakMap,gd=dd.Gs();self.cU=class{#t;constructor(){const t=dd.mW.pW(gd);this.#t=t;const s={runtime:{value:t.l$().gW(),writable:!1},objectType:{value:t.fU().$W(),writable:!1},HW:{value:t.zW().NW(),writable:!1}};t.dU(s),t.pU(s),Object.defineProperties(this,s),t.l$().FW(this,t)}static mU(){return dd.mW.gU()}yU(){const t=md.get(this);t&&(t.zn(),md.delete(this))}addEventListener(t,s,i){pd.ue(t),pd.Ee(s),fd(this).addEventListener(t,s,i)}removeEventListener(t,s,i){pd.ue(t),pd.Ee(s),fd(this).removeEventListener(t,s,i)}dispatchEvent(t){fd(this).dispatchEvent(t)}destroy(){const t=this.#t,s=t.l$();s.wU(t),s.aN().dj()||s.pB().pj()||s.aN().SU()||s.mj()}vU(){const t=this.#t.bU();return t?t.map(t=>t.RB()):[]}*MU(){const t=this.#t;if(t.CU())for(const s of t.TU())yield s.RB()}get uid(){return this.#t.xU()}get IU(){return this.#t._U()}get GU(){return this.#t.PU()}set $N(t){pd.he(t),this.#t.jN(t)}get $N(){return this.#t.AU()}RU(){this.#t.EU()}get AN(){const t=this.#t;return t.l$().RN(t)}OU(...t){pd.xe(t);const s=new Set(t),i=this.#t.DU();return s.isSubsetOf(i)}FU(t){pd.Be(t,Set),this.#t.kU(t)}LU(){return new Set(this.#t.DU())}signal(t){pd.ue(t);const s=this.#t;s.l$().aN().NU(s,t)}xN(t){pd.ue(t);const s=this.#t;return s.l$().aN().BU(s,t)}}}{const yd=self._s,wd=self.Ns,Sd=yd.Gs();self.$U=class extends self.cU{#t;#s=!1;#i=null;#e=!1;#n=null;#r;#h;constructor(t){super(),this.#t=yd.mW.pW(Sd),this.#s=!1,this.#i=null,this.#e=!1,this.#n=null,this.#r=t?.WU,this.#h=t?.jU}yU(){this.VU(!1),this.UU(!1),super.yU()}HU(){return yd.mW.zU()}JU(t){const s=this.#t;s.l$().qU(t,s)}YU(t){const s=this.#t;return s.l$().ZB(t,s)}XU(t,s){if(wd.ue(t),wd.Ee(s),!this.#r)throw new Error("no DOM component id set");this.#t.l$().KU(this.#r,t,s)}ZU(t){wd.xe(t);for(const[s,i]of t)this.XU(s,i)}QU(t,s){if(wd.ue(t),!this.#r)throw new Error("no DOM component id set");this.#t.l$().jc(this.#r,t,s)}tH(t,s){if(wd.ue(t),!this.#r)throw new Error("no DOM component id set");return this.#t.l$().HB(this.#r,t,s)}sH(t,s){if(!this.#t.l$().zL())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#r,handler:t,data:s,responseId:null});this.QU(t,s)}VU(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=this.#t.l$();if(t){if(!this.#i)if(this.#t.l$().iH()){const t=globalThis.eH,s=this.HW;this.#i=()=>{const i=performance.now();this.nH(),t.rH(s,performance.now()-i)}}else this.#i=()=>this.nH();s.Sf().addEventListener("tick",this.#i)}else s.Sf().removeEventListener("tick",this.#i)}hH(){return this.#s}nH(){}UU(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=this.#t.l$();if(t){if(!this.#n)if(this.#t.l$().iH()){const t=globalThis.eH,s=this.HW;this.#n=()=>{const i=performance.now();this.oH(),t.rH(s,performance.now()-i)}}else this.#n=()=>this.oH();s.Sf().addEventListener("tick2",this.#n)}else s.Sf().removeEventListener("tick2",this.#n)}aH(){return this.#e}oH(){}lH(){return[]}uH(){return null}cH(t){}fH(){if(!this.#h)throw new Error("no wrapper component id set");return this.#t.l$().dH(this.#h)}pH(t,s){if(wd.ue(t),wd.Ee(s),!this.#h)throw new Error("no wrapper component id set");this.#t.l$().mH(this.#h,t,s)}gH(t){wd.xe(t);for(const[s,i]of t)this.pH(s,i)}yH(t,s){if(!this.#h)throw new Error("no wrapper component id set");this.runtime.iN.wH(this.#h,t,s)}SH(t,s){if(!this.#h)throw new Error("no wrapper component id set");return this.runtime.iN.vH(this.#h,t,s)}}}{let vd=function(t){return class s extends t{#t;#s;constructor(t){super(t);const s=bd.mW.pW(Gd),i=s.kB();this.#t=s,this.#s=i,_d.set(this,s);const e=[],n=i.bH();if(n){const t=i.fU()._j().Gj().length;for(let s=0;s<t;++s)e.push(new self.Pj(n,s))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#s.mB().fB()}get MH(){return this.#s.LB().Vj()}get x(){return this.#s.YM()}set x(t){t=+t;const s=this.#s;isNaN(t)||s.YM()===t||(s.XM(t),s.CH())}get y(){return this.#s.ZM()}set y(t){t=+t;const s=this.#s;isNaN(t)||s.ZM()===t||(s.QM(t),s.CH())}setPosition(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.YM()===t&&i.ZM()===s||(i.TH(t,s),i.CH())}xH(){const t=this.#s;return[t.YM(),t.ZM()]}offsetPosition(t,s){if(t=+t,s=+s,isNaN(t)||isNaN(s)||0===t&&0===s)return;const i=this.#s;i.IH(t,s),i.CH()}set _H(t){t=+t;const s=this.#s;isNaN(t)||s.GH()===t||(s.PH(t),s.CH())}get _H(){return this.#s.GH()}set AH(t){t=+t;const s=this.#s;isNaN(t)||s.RH()===t||(s.EH(t),s.CH())}get AH(){return this.#s.RH()}OH(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.GH()===t&&i.RH()===s||(i.PH(t),i.EH(s),i.CH())}DH(){const t=this.#s;return[t.GH(),t.RH()]}get WV(){return this.#s.tC()}set WV(t){t=+t;const s=this.#t,i=this.#s;isNaN(t)||i.tC()===t||(i.sC(t),s.l$().VB())}get FH(){return this.#s.kH()}get width(){return this.#s.Vg()}set width(t){t=+t;const s=this.#s;isNaN(t)||s.Vg()===t||(s.Xg(t),s.CH())}get height(){return this.#s.Qg()}set height(t){t=+t;const s=this.#s;isNaN(t)||s.Qg()===t||(s.Ug(t),s.CH())}Aj(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.Vg()===t&&i.Qg()===s||(i.$A(t,s),i.CH())}getSize(){const t=this.#s;return[t.Vg(),t.Qg()]}get angle(){return this.#s.Dj()}set angle(t){t=bd.Zn(+t);const s=this.#s;isNaN(t)||s.Dj()===t||(s.Oj(t),s.CH())}get LH(){return bd.tr(this.angle)}set LH(t){this.angle=bd.Qn(t)}Ql(t){return t?(this.#s.NH(xd,Id,!1),xd.el()):this.#s.BH().el()}$H(t){return t?(this.#s.NH(xd,Id,!1),Id.Jl()):this.#s.WH().Jl()}jH(){return this.#s.VH()}get isVisible(){return this.#s.vV()}set isVisible(t){t=!!t;const s=this.#t,i=this.#s;i.vV()!==t&&(i.wV(t),s.l$().VB())}get opacity(){return this.#s.SO()}set opacity(t){t=bd.Kn(+t,0,1);const s=this.#t,i=this.#s;isNaN(t)||i.SO()===t||(i.bO(t),s.l$().VB())}set UH(t){if(Md.xe(t),t.length<3)throw new Error("expected 3 elements");Rd.Ao(t[0],t[1],t[2]);const s=this.#t,i=this.#s;i.HH().zo(Rd)||(i.zH(Rd),s.l$().VB())}get UH(){const t=this.#s.HH();return[t.No(),t.Bo(),t.$o()]}set gk(t){Md.ue(t);const s=Pd.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#t;this.#s.NM(s),i.l$().VB()}get gk(){return Ad.get(this.#s.XV())}JH(){this.#s.qH()}YH(){this.#s.XH()}KH(t){Md.Be(t,Td);const s=this.#t,i=s.l$().Yj(t);if(!i)throw new Error("invalid layer");s.kB().ZH(i)}QH(t,i){Md.Be(t,s),this.#s.tz(_d.get(t),i)}get zIndex(){return this.#s.NB()}get sz(){return this.#s.iz()}set sz(t){this.#s.ez(!!t)}xl(t,s){return Md.se(t),Md.se(s),this.#s.nz(+t,+s)}P$(t){Md.Be(t,s);const i=this.#t,e=_d.get(t);return i.l$().RL().A$(i,e)}E$(){const t=this.#t,s=t.l$().RL().O$(t);return s?s.RB():null}getParent(){const t=this.#t.rz();return t?t.RB():null}hz(){const t=this.#t.oz();return t?t.RB():null}*az(){for(const t of this.#t.az())yield t.RB()}lz(){return this.#t.uz()}cz(t){const s=this.#t.fz(t);return s?s.RB():null}*children(){for(const t of this.#t.children())yield t.RB()}*dz(){for(const t of this.#t.dz())yield t.RB()}pz(t,i){Md.Be(t,s),Md.we(i),i||(i={});const e=this.#t,n=_d.get(t);e.mz(n,i)}removeChild(t){Md.Be(t,s);const i=this.#t,e=_d.get(t);i.gz(e)}yz(){const t=this.#t;t.wz()&&t.rz().gz(t)}Sz(){const t=this.#s;return{vz:t.bz(),Mz:t.Cz(),Tz:t.xz(),Iz:t._z(),Gz:t.Pz(),Az:t.Rz(),Ez:t.Oz(),Dz:t.Fz(),kz:t.Lz()}}Nz(t,s){Md.he(t),Md.he(s),this.#s.Bz(t,s)}$z(){const t=this.#s;t.Wz(),t.CH()}jz(t,s,i){Md.he(t),Md.he(s),Md.ye(i);const e=this.#s;e.Vz(t,s,i)&&e.CH()}Uz(t,s){let i=NaN,e=NaN,n=NaN,r=NaN,h=NaN;const o=this.#s;if(o.zz()){const a=o.Jz().NC(t,s);null!==a&&(i=a.YM(),e=a.ZM(),n=a.tC(),r=a.iC(),h=a.nC())}return{x:i,y:e,WV:n,qz:r,Yz:h}}Xz(){const t=this.#s;if(!t.zz())return[0,0];const s=t.Jz();return[s._C(),s.GC()]}}};MakeIWorldInstanceClass=vd;const bd=self._s,Md=self.Ns,Cd=self.cU,Td=self.qj,xd=bd.Hn(bd.Rect),Id=bd.Hn(bd.Pl),_d=new WeakMap,Gd=bd.Gs(),Pd=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Ad=new Map([...Pd.entries()].map(t=>[t[1],t[0]])),Rd=bd.Hn(bd.To);self.Kz=vd(self.cU),self.Zz=vd(self.$U)}{const Ed=self._s,Od=self.Ns;self.Qz=class extends self.Kz{#t;constructor(){super(),this.#t=self.cU.mU()}tJ(){return this.#t.iJ().sJ()}focus(){this.#t.iJ().eJ()}blur(){this.#t.iJ().nJ()}rJ(t,s){Od.ue(t),this.#t.iJ().hJ(t,s)}}}{let Dd=function(t){let s=Ld.get(t);return s||(s=Fd.Hn(Fd.Event.Sf),Ld.set(t,s),s)};GetDispatcher=Dd;const Fd=self._s,kd=self.Ns,Ld=new WeakMap,Nd=Fd.Gs();self.oJ=class{#t;constructor(){const t=Fd.mW.pW(Nd);this.#t=t;const s={runtime:{value:t.l$().gW(),writable:!1},behavior:{value:t.lJ().aJ(),writable:!1},uJ:{value:t.fJ().cJ(),writable:!1}};Object.defineProperties(this,s),t.l$().FW(this,t)}static mU(){return Fd.mW.gU()}get dJ(){return this.#t.pJ().RB()}yU(){const t=Ld.get(this);t&&(t.zn(),Ld.delete(this))}addEventListener(t,s,i){kd.ue(t),kd.Ee(s),Dd(this).addEventListener(t,s,i)}removeEventListener(t,s,i){kd.ue(t),kd.Ee(s),Dd(this).removeEventListener(t,s,i)}dispatchEvent(t){Dd(this).dispatchEvent(t)}}}{const Bd=self._s,$d=self.Ns,Wd=Bd.Gs();self.mJ=class{constructor(){const t=Bd.mW.pW(Wd),s={runtime:{value:t.l$().gW(),writable:!1},behavior:{value:t.lJ().aJ(),writable:!1},name:{value:t.Ac(),writable:!1}};Object.defineProperties(this,s)}}}{const jd=self._s,Vd=self.Ns,Ud=jd.Gs();self.gJ=class{#s;constructor(){const t=jd.mW.pW(Ud);this.#s=t;const s={runtime:{value:t.l$().gW(),writable:!1},id:{value:t.yW(),writable:!1}};Object.defineProperties(this,s),t.l$().FW(this,t)}JW(){return this.#s.ej().map(t=>t.RB())}static kW(t){if(!t)return null;const s=jd.mW.yJ(t);return s?s.aJ():null}}}{const Hd=self._s,zd=self.Ns,Jd=Hd.Hn(Hd.To);self.Pj=class{#t;constructor(t,s){this.#t=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){return this.#t.Gj()[this.index].Ac()}get isActive(){return this.#t.wJ(this.index)}set isActive(t){t=!!t;const s=this.#t;s.wJ(this.index)!==t&&(s.SJ(this.index,t),s.vJ(),s.l$().VB())}setParameter(t,s){zd.he(t),t=Math.floor(+t);const i=this.#t,e=i.bJ(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Hd.To){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Jd.Ao(s[0],s[1],s[2]),s=Jd}else if("number"!=typeof s)throw new TypeError("expected number");i.MJ(this.index,t,s)&&i.wJ(this.index)&&i.l$().VB()}getParameter(t){zd.he(t),t=Math.floor(+t);const s=this.#t.bJ(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof Hd.To?[s.No(),s.Bo(),s.$o()]:s}}}{const qd=self._s,Yd=self.Ns;self.CJ=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t.Ac(),writable:!1}})}get speed(){return this.#t.TJ()}get xJ(){return this.#t.IJ()}get _J(){return this.#t.GJ()}get PJ(){return this.#t.AJ()}get RJ(){return this.#t.EJ()}get frameCount(){return this.#t.OJ()}DJ(){return this.#t.FJ().map(t=>t.kJ())}*frames(){for(const t of this.#t.FJ())yield t.kJ()}}}{const Xd=self._s,Kd=self.Ns;self.o$=class{#s;constructor(t){this.#s=t}static h$(t){return t.#s}get width(){return this.#s.Vg()}get height(){return this.#s.Qg()}getSize(){const t=this.#s;return[t.Vg(),t.Qg()]}LJ(t){return t.NJ(this)}BJ(){return this.#s.yR().el()}}}{const Zd=self._s,Qd=self.Ns;self.$J=class extends self.o${#s;constructor(t){super(t.WJ()),this.#s=t,Object.defineProperties(this,{duration:{value:t.jJ(),writable:!1},_H:{value:t.GH(),writable:!1},AH:{value:t.RH(),writable:!1}})}DH(){const t=this.#s;return[t.GH(),t.RH()]}VJ(){return this.#s.UJ()}HJ(t){return this.zJ(t)[0]}JJ(t){return this.zJ(t)[1]}zJ(t){const s=this.#s;let i=null;if("number"==typeof t)i=s.qJ(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.YJ(t)}return i?[i.YM(),i.ZM()]:this.DH()}XJ(){const t=this.#s.KJ();return t?t.mu():0}ZJ(t){return this.QJ(t)[0]}tq(t){return this.QJ(t)[1]}QJ(t){Qd.he(t),t=Math.floor(t);const s=this.#s.KJ();if(!s||t<0||t>=s.mu())return[0,0];const i=s.pu();return[i[2*t],i[2*t+1]]}get tag(){return this.#s.sq()}}}{let tp=function(t){const s=ep.get(t);if(s.iq())throw new Error("timeline/tween was released and is no longer valid");return s};GetTimelineState=tp;const sp=self._s,ip=self.Ns,ep=new WeakMap;self.eq=class{constructor(t){ep.set(this,t),t.l$().FW(this,t)}pause(){tp(this).nq()}resume(){tp(this).rq()}stop(){tp(this).$f()}OU(t){return tp(this).hq(t)}set time(t){ip.he(t),tp(this).oq(t)}get time(){return tp(this).YD()}set totalTime(t){ip.he(t),tp(this).aq(t)}get totalTime(){return tp(this).lq()}set xJ(t){tp(this).uq(!!t)}get xJ(){return tp(this).cq()}set RJ(t){tp(this).fq(!!t)}get RJ(){return tp(this).pq()}set playbackRate(t){ip.he(t),tp(this).mq(t)}get playbackRate(){return tp(this).gq()}get progress(){const t=tp(this);return t.YD()/t.lq()}get tags(){return tp(this).yq()}get finished(){return tp(this).wq()}get Sq(){return tp(this).IsPlaying()}get vq(){return tp(this).bq()}get Mq(){return ep.get(this).iq()}}}{let np=function(t){const s=op.get(t);if(s.iq())throw new Error("timeline was released and is no longer valid");return s};GetTimelineState=np;const rp=self._s,hp=self.Ns,op=new WeakMap;let ap=null;self.Cq=class extends self.eq{constructor(t){super(t),op.set(this,t);const s={name:{value:t.Ac(),writable:!1}};Object.defineProperties(this,s)}}}{let lp=function(t){const s=fp.get(t);if(s.iq())throw new Error("tween was released and is no longer valid");return s};GetTweenState=lp;const up=self._s,cp=self.Ns,fp=new WeakMap,dp=new WeakMap;let pp=null;self.Tq=class extends self.eq{constructor(t,s,i){super(t),pp||(pp=i.xq),fp.set(this,t),s&&dp.set(this,s)}stop(){const t=lp(this);dp.get(this).Iq(t)}_q(t){cp.ue(t);const s=self.Vu.ac(pp(t));lp(this).Gq(s)}get dJ(){const t=lp(this).Pq();return t?t.RB():null}get Aq(){return lp(this).Rq()}set Aq(t){lp(this).Eq(!!t)}get value(){const t=lp(this);if("value"!==t.Oq())throw new Error("not a value tween");return t.Fq("value").Dq()}}}{const mp=self._s,gp=self.Ns;self.kq=class extends self.dW{constructor(){super()}}}{const yp=self._s,wp=self.Ns,Sp=yp.Gs();self.Lq=class extends self.kq{#t;#i;#s=0;#r=new Map;constructor(t){if(super(),this.#t=yp.mW.pW(Sp),!t?.WU)throw new Error("no DOM component ID specified");this.#i=t.WU,this.Nq("elem-focused",t=>t.Bq()),this.Nq("elem-blurred",t=>{t&&t.$q()})}Wq(t){const s=this.#s++;return this.#r.set(s,t),s}jq(t){this.#r.delete(t)}Nq(t,s){this.#t.l$().KU(this.#i,t,t=>{const i=this.#r.get(t.elementId);s(i,t)})}Vq(t){wp.xe(t);for(const[s,i]of t)this.Vq(s,i)}}}{const vp=self._s,bp=self.Ns,Mp=new WeakMap,Cp=vp.Gs();self.Uq=class extends self.rj{#t;constructor(){super(),this.#t=vp.mW.pW(Cp)}Hq(){}zq(){return this.#t.WJ().Jq()}qq(t){}Yq(t){}Xq(){}Kq(t){}}}{const Tp=self._s,xp=self.Ns,Ip=new WeakMap,_p=Tp.Gs();self.Zq=class extends self.Zz{#t;#n=null;#s=null;constructor(t){super(t),this.#t=Tp.mW.pW(_p)}yU(){if(super.yU(),this.#n){const t=this.#t.l$().Sf();t.removeEventListener("renderercontextlost",this.#n),t.removeEventListener("renderercontextrestored",this.#s),this.#n=null,this.#s=null}}Qq(){if(this.#n)return;this.#n=()=>this.tY(),this.#s=()=>this.sY();const t=this.#t.l$().Sf();t.addEventListener("renderercontextlost",this.#n),t.addEventListener("renderercontextrestored",this.#s)}tY(){}sY(){}iY(t){}eY(){return!0}eM(){return!1}}}{const Gp=self._s,Pp=self.Ns,Ap=Gp.Hn(Gp.Rect),Rp=new WeakMap,Ep=Gp.Gs();self.nY=class extends self.Zq{#t=-1;#s=!0;#r=!1;#e=!1;#i=-.2;#h=Gp.Hn(Gp.Rect,0,0,-1,-1);#o=0;#a=0;#l=-1;#u=-1;#c=!1;constructor(t){if(!t?.WU)throw new Error("no DOM component ID specified");super(t);const s=Gp.mW.pW(Ep);Rp.set(this,s),this.#t=this.HW.Wq(this);const i=s.l$().IB();this.#o=i.rY(),this.#a=i.hY(),this.VU(!0)}yU(){super.yU(),this.HW.jq(this.#t),this.oY("destroy"),this.#t=-1,Rp.delete(this)}aY(){if(Rp.get(this).l$().zL())throw new Error("not valid in worker mode");return this.lY("get-element")}oY(t,s){s||(s={}),s.elementId=this.#t,this.QU(t,s)}lY(t,s){return s||(s={}),s.elementId=this.#t,this.sH(t,s)}uY(t,s){return s||(s={}),s.elementId=this.#t,this.tH(t,s)}cY(t){t||(t={});const s=Rp.get(this).kB();t.elementId=this.#t,t.isVisible=s.vV(),t.htmlIndex=s.LB().fY(),t.htmlZIndex=s.dY(),Object.assign(t,this.pY()),this.#s=!!t.isVisible,this.sH("create",t),this.mY(!0)}gY(t){t=!!t,this.#s!==t&&(this.#s=t,this.oY("set-visible",{isVisible:t}))}nH(){this.mY(!1)}yY(){const t=Rp.get(this).l$().IB().wY();return"Android"===Gp.Zs.Qs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}mY(t){const s=Rp.get(this);if(s.SY())return;const i=s.kB(),e=i.LB(),n=i.BH();let[r,h]=e.nU(n.Qa(),n.tl()),[o,a]=e.nU(n.sl(),n.il());const l=s.l$().IB(),u=l.eW(),c=l.rW();if(!i.vV()||!e.vV())return void this.gY(!1);if(!this.yY()&&(o<=0||a<=0||r>=u||h>=c))return void this.gY(!1);Ap.set(r,h,o,a);const f=l.rY(),d=l.hY(),p=e.fY(),m=i.dY();if(!t&&Ap.equals(this.#h)&&this.#o===f&&this.#a===d&&this.#l===p&&this.#u===m)return void this.gY(!0);this.#h.S(Ap),this.#o=f,this.#a=d,this.#l=p,this.#u=m,this.gY(!0);let g=null;this.#e&&(g=e.vY()+this.#i),this.oY("update-position",{left:Math.round(this.#h.Qa()),top:Math.round(this.#h.tl()),width:Math.round(this.#h.width()),height:Math.round(this.#h.height()),htmlIndex:p,htmlZIndex:m,fontSize:g})}bY(){this.lY("focus",{focus:!0})}MY(){this.lY("focus",{focus:!1})}Bq(){this.#r=!0}$q(){this.#r=!1}CY(){return this.#r}TY(t,s){this.xY("set-css-style",{prop:Gp.bo(t),val:s})}IY(t,s){this.xY("set-attribute",{name:t,val:s})}_Y(t){this.xY("remove-attribute",{name:t})}GY(){this.#c||(this.#c=!0,Promise.resolve().then(()=>{this.#c=!1,this.oY("update-state",this.pY())}))}pY(){}PY(){return this.#t}}}{const Op=self._s,Dp=self.Ns;self.AY=class extends self.gJ{constructor(){super()}}}{const Fp=self._s,kp=self.Ns;self.RY=class extends globalThis.mJ{constructor(){super()}Hq(){}}}{const Lp=self._s,Np=self.Ns,Bp=new WeakMap,$p=Lp.Gs();self.EY=class extends self.oJ{#e=!1;#s=!1;#t=!1;constructor(){super(),Bp.set(this,Lp.mW.pW($p))}yU(){super.yU(),this.VU(!1),this.UU(!1),this.OY(!1),Bp.delete(this)}HU(){return Lp.mW.zU()}DY(){}JU(t){const s=Bp.get(this);s.l$().qU(t,s.pJ(),s.fJ())}YU(t){const s=Bp.get(this);return s.l$().ZB(t,s.pJ(),s.fJ())}VU(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=Bp.get(this).l$();t?s.FY(this):s.kY(this)}hH(){return this.#e}nH(){}UU(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=Bp.get(this).l$();t?s.LY(this):s.NY(this)}aH(){return this.#s}oH(){}OY(t){if(t=!!t,this.#t===t)return;this.#t=t;const s=Bp.get(this).l$();t?s.BY(this):s.$Y(this)}WY(){return this.#t}jY(){}lH(){return[]}uH(){return null}cH(t){}}}{const Wp=self._s,jp=self.Ns;let Vp=null;self.eN=class{constructor(t){Vp=t}qB(t){Vp.YB(t)}wH(t,s,i){jp.ue(t),jp.ue(s),jp.Ie(i),Vp.VY(t,s,i)}vH(t,s,i){return jp.ue(t),jp.ue(s),jp.Ie(i),Vp.UY(t,s,i)}HY(t){return jp.ce(t),new self.zY(Vp,t)}set JY(t){Vp.qY(!!t)}get JY(){return Vp.YY()}XY(t){Vp.KY(!!t)}ZY(t){jp.se(t);const s=Vp.QY(t);return s?s.$W():null}}}{const Up=self._s,Hp=self.Ns;self.zY=class{#t;#s;#h;#i;#r;#n;constructor(t,s){this.#t=t;const i=t.aN(),e=t.pN();this.#s=e,this.#h=e.tX();const n=t.bN();this.#i=n.sX(),this.#r=n.iX(e);const r=i.eX().iX();this.#n=r,s&&r.nX(s),t.rX(!1)}hX(){const t=this.#t.aN(),s=this.#h,i=this.#n;t.oX(s),this.#s.aX(this.#i,this.#r),t.lX(s),i.uX(i.CL()+1)}get cX(){return this.#n.fX()}release(){const t=this.#t,s=t.bN(),i=t.aN().eX();t.rX(!0),i.dX(),s.dX()}}}{let zp=function(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas};IsStaticTextureDataType=zp;const Jp=self._s,qp=self.Ns;let Yp=null,Xp=null;const Kp=["none","back","front"],Zp=["cw","ccw"];self.pX=class{constructor(t,s){Xp=t,Yp=s}mX(){Yp.GO()}gX(t){Yp.IO(t)}yX(){Yp.gv()}wX(){Yp.uv()}SX(){Yp.Cv()}setColor(t){Yp.vO(t[0],t[1],t[2],t[3])}vX(t,s,i,e){Yp.vO(t,s,i,e)}bX(){Yp.MO()}MX(t){Yp.bO(t)}CX(t){Yp.Uv(t)}TX(){return Yp.Hv()}xX(t){const s=Kp.indexOf(t);if(-1===s)throw new Error("invalid cull mode");Yp.Ab(s)}IX(){return Kp[Yp.AO()]}_X(t){const s=Zp.indexOf(t);if(-1===s)throw new Error("invalid front face winding");Yp.Rb(s)}GX(){return Yp.RO()}rect(t){Yp.OO(t.left,t.top,t.right,t.bottom)}PX(t,s,i,e){Yp.OO(t,s,i,e)}AX(t){Yp.Pl(Jp.Pl.ql(t))}RX(t,s,i,e,n,r,h,o){Yp.Ob(t,s,i,e,n,r,h,o)}EX(t,s){Yp.sb(Jp.Pl.ql(t),Jp.Rect.nl(s))}OX(t,s){Yp.kO(Jp.Pl.ql(t),Jp.Pl.ql(s))}DX(t,s,i){Yp.LO(Jp.Pl.ql(t),Jp.Pl.ql(s),i)}FX(t,s,i,e,n,r,h,o,a,l,u,c,f){Yp.NO(t,s,i,e,n,r,h,o,a,l,u,c,Jp.Rect.nl(f))}kX(t,s,i,e,n,r,h,o,a,l,u,c,f){Yp.Xv(t,s,i,e,n,r,h,o,a,l,u,c,Jp.Pl.ql(f))}LX(t,s,i,e,n,r,h,o,a,l,u,c,f,d){Yp.BO(t,s,i,e,n,r,h,o,a,l,u,c,Jp.Pl.ql(f),d)}NX(t,s,i,e){Yp.zC(t,s,i,e)}BX(t){Yp.Eb(t)}line(t,s,i,e){Yp.ny(t,s,i,e)}$X(t,s,i,e,n,r){Yp.Kv(t,s,i,e,n,r)}WX(t,s,i,e){Yp.ib(t,s,i,e)}jX(t){Yp.hb(Jp.Rect.nl(t))}VX(t){Yp.ob(Jp.Pl.ql(t))}UX(t){Yp.pb(t)}HX(){Yp.mb()}zX(t){Yp.Sb(t)}JX(){Yp.Tb()}qX(t){qp.$e(t,self.YX);const s=t?Xp.Yj(t):null;Yp.TO(s)}XX(t,s){const i=self.o$.h$(t);if(!i)throw new Error("invalid IImageInfo");return i.KX(Yp,{sT:s?.sT??"clamp-to-edge",iT:s?.iT??"clamp-to-edge",eT:s?.eT??"trilinear",hT:s?.hT??!0})}ZX(t){const s=self.o$.h$(t);if(!s)throw new Error("invalid IImageInfo");s.aA()}NJ(t){const s=self.o$.h$(t);if(!s)throw new Error("invalid IImageInfo");const i=s.Tx();return self.YX.QX(Xp,i)}tK(t,s){if(!zp(t))throw new TypeError("invalid texture data");const i=Yp.lD(t,{sT:s?.sT??"clamp-to-edge",iT:s?.iT??"clamp-to-edge",eT:s?.eT??"trilinear",hT:s?.hT??!0});return self.YX.QX(Xp,i)}sK(t,s,i){qp.he(t),qp.he(s);const e=Yp.ux(t,s,{sT:i?.sT??"clamp-to-edge",iT:i?.iT??"clamp-to-edge",eT:i?.eT??"trilinear",hT:i?.hT??!0});return self.YX.QX(Xp,e)}iK(t,s,i){qp.Be(s,self.YX);const e=Xp.Yj(s);Yp.gR(t,e,{aT:i?.aT??!0})}deleteTexture(t){qp.Be(t,self.YX);const s=Xp.Yj(t);Yp.wx(s)}eK(){const t=Yp.Jb();return new self.nK(Xp,t)}rK(){Xp.IB().hK(Yp)}oK(t){qp.Be(t,globalThis.qj),Xp.Yj(t).aK(Yp)}}}{const Qp=self._s,tm=self.Ns,sm=new WeakMap,im=new WeakMap;self.YX=class{constructor(t,s){sm.set(this,{runtime:t,texture:s}),im.set(s,this),t.FW(this,s),Object.defineProperties(this,{width:{value:s.Vg(),writable:!1},height:{value:s.Qg(),writable:!1}})}static QX(t,s){if(!s)return null;return im.get(s)||new self.YX(t,s)}}}{let em=function(t){return hm.get(t).lK};getActual=em;const nm=self._s,rm=self.Ns,hm=new WeakMap;self.nK=class{constructor(t,s){hm.set(this,{runtime:t,lK:s}),t.FW(this,s)}release(){em(this).zn()}set uK(t){rm.ue(t),em(this).gA(t)}get uK(){return em(this).SP()}set cK(t){rm.he(t),em(this).yA(t)}get cK(){return em(this).wA()}set lineHeight(t){rm.he(t),em(this).vA(t)}get lineHeight(){return em(this).bA()}set fK(t){em(this).MA(t)}get fK(){return em(this).CA()}set dK(t){em(this).TA(t)}get dK(){return em(this).xA()}setColor(t){rm.xe(t),this.pK(t[0],t[1],t[2])}pK(t,s,i){em(this).AA(t,s,i)}mK(t){rm.ue(t),em(this).BM(t)}set gK(t){em(this).RA(t)}get gK(){return em(this).EA()}set verticalAlign(t){em(this).OA(t)}get verticalAlign(){return em(this).DA()}set yK(t){em(this).FA(t)}get yK(){return em(this).kA()}set wK(t){em(this).LA(t)}get wK(){return em(this).NA()}set text(t){rm.ue(t),em(this).Vc(t)}get text(){return em(this).BA()}Aj(t,s,i){rm.he(t),rm.he(s),rm.he(i),em(this).$A(t,s,i)}LJ(){const{runtime:t,lK:s}=hm.get(this),i=s.Tx();return self.YX.QX(t,i)}BJ(){return em(this).yR().el()}SK(t){rm.Ee(t),em(this).uA=t}vK(){em(this).aA()}get bK(){return em(this).jA()}get MK(){return em(this).UA()}}}{let om=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return cm.get(i)||""},am=function(t){return new Promise((s,i)=>{const e=document.createElement("script");e.onload=s,e.onerror=i,e.async=!1,e.type="module",e.src=t,document.head.appendChild(e)})};GetTypeFromFileExtension=om,AddScript=am;const lm=self._s,um=new Set(["local","remote"]),cm=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);lm.CK=class extends lm.Vn{constructor(t,s){super();const i=s.exportType;this.Bc=t,this.TK="folders",this.xK=new Map,this.IK="cordova"===i,this._K=!!s.isiOSCordova,this.GK=!!s.isFileProtocol,this.PK=s.swClientId,this.AK=s.supportedAudioFormats||{},this.RK=new Map,this.EK=!1,this.DK=s.scriptFolder,this.FK="",this.kK="",this.LK="",this.NK=s.fileMap||new Map,this.BK=new Map;const e="html5"===i||"scirra-arcade"===i||"instant-games"===i;this.$K=e?"remote":"local",this.WK=new Map,this.jK=[],this.VK=[],this.UK=!1,this.HK=0,this.zK=0,this.JK=0,this.qK=!1,this.YK=lm.Hn(lm.tp,()=>this.XK(),50),this.KK=lm.Hn(lm.Hd,Math.max(lm.hardwareConcurrency,8)),this.ZK=lm.Hn(lm.Hd,20),this.QK=new self.e$(this)}zn(){for(const t of this.WK.values())t.zn();this.WK.clear(),lm.bh(this.VK),this.Bc=null}l$(){return this.Bc}tZ(t){this.TK=t}y$(){return this.TK}sZ(){return this.DK}iZ(t){this.FK=t}v$(){return this.FK}eZ(t){this.kK=t}nZ(){return this.kK}rZ(t){this.LK=t}hZ(){return this.LK}oZ(){return this.GK}no(t,s){return s=s||this.$K,lm.Zh(t)?("flat"===this.TK&&(t=t.toLowerCase()),this.IK&&this.GK?this.aZ(t):"playable-ad-single-file"===this.Bc.z$()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===s?this.KK.$u(()=>lm.no(t)):this.ZK.$u(()=>lm.no(t))):lm.no(t)}ro(t){return lm.Zh(t)?("flat"===this.TK&&(t=t.toLowerCase()),this.IK&&this.GK?this.lZ(t):"playable-ad-single-file"===this.Bc.z$()?lm.oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.$K?this.KK.$u(()=>lm.ro(t)):this.ZK.$u(()=>lm.ro(t))):lm.ro(t)}io(t){return lm.Zh(t)?("flat"===this.TK&&(t=t.toLowerCase()),this.IK&&this.GK?this.uZ(t):"playable-ad-single-file"===this.Bc.z$()?lm.ao(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.$K?this.KK.$u(()=>lm.io(t)):this.ZK.$u(()=>lm.io(t))):lm.io(t)}async eo(t){const s=await this.io(t);return JSON.parse(s)}cZ(t,s){return"flat"===this.TK&&(t=t.toLowerCase()),this.Bc.HB("runtime","cordova-fetch-local-file",{filename:t,as:s})}uZ(t){return this.cZ(t,"text")}async aZ(t){const s=await this.cZ(t,"buffer"),i=om(t);return new Blob([s],{type:i})}async fZ(t){"flat"===this.TK&&(t=t.toLowerCase());let s=this.xK.get(t);if(s)return s;const i=await this.aZ(t);return s=URL.createObjectURL(i),this.xK.set(t,s),s}lZ(t){return this.cZ(t,"buffer")}w$(t){"flat"===this.TK&&(t=t.toLowerCase());let s=this.FK+t;return"Gecko"===lm.Zs.ni&&"preview"===this.Bc.z$()&&(s=this.dZ(s)),s}m$(t){return lm.Kh(t)?Promise.resolve(t):this.IK&&this.GK?this.fZ(t):"playable-ad-single-file"===this.Bc.z$()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.TK&&(t=t.toLowerCase()),Promise.resolve(t))}pZ(t){if(lm.Kh(t)||"preview"!==this.Bc.z$()||!this.PK||!t)return t;try{const s=new URL(t,location.href);return s.searchParams.set("__c3_client_id",this.PK),s.toString()}catch(s){return console.warn("Invalid iframe URL: "+t),t}}mZ(t){return this.m$(t)}gZ(t,s){return(s?"true":"false")+"|"+t}yZ(t){const s=!!t.wZ;if(t.SZ&&!um.has(t.SZ))throw new Error("invalid load policy");const i=this.gZ(t.url,s);let e=this.WK.get(i);return e||(e=lm.Hn(lm.vZ,this,{url:t.url,size:t.size||0,SZ:t.SZ||this.$K,wZ:s}),this.WK.set(i,e),this.UK||(this.HK+=e.Du(),this.VK.push(e.bZ().then(()=>this.MZ(e.Du())))),e)}CZ(t){const s=this.gZ(t.TZ(),t.xZ());this.WK.delete(s)}async IZ(){try{await Promise.all(this.VK),this.JK=1}catch(t){console.error("Error loading: ",t),this.qK=!0,this.XK()}}_Z(){this.UK=!0}GZ(){return this.qK}MZ(t){this.zK+=t,this.YK.mp()}XK(){const t=lm.Hn(lm.Event,"loadingprogress");this.JK=lm.Kn(this.zK/this.HK,0,1),t.progress=this.JK,this.Bc.Sf().dispatchEvent(t),this.Bc.PZ(lm.Hn(lm.Event,"loadingprogress"))}oB(){return this.JK}lB(){return this.Bc.RZ().AZ()}EZ(t){lm.xh(this.jK,t),this.jK.length&&this.VK.push(this.OZ())}async OZ(){const t=[],s=[];for(const[i,e,n]of this.jK)this.HK+=n,t.push(this.DZ(i,e,s).then(()=>this.MZ(n)));await Promise.all(t),this.Bc.zL()&&s.length>0&&await this.Bc.HB("runtime","load-webfonts",{webfonts:s})}async DZ(t,s,i){try{let e=await this.m$(s);"Gecko"===lm.Zs.ni&&(t=`'${t}'`),("Gecko"===lm.Zs.ni&&"preview"===this.Bc.z$()||"playable-ad-single-file"===this.Bc.z$())&&(e=this.dZ(e));const n=new FontFace(t,`url('${e}')`);this.Bc.zL()?self.fonts.add(n):document.fonts.add(n),await n.load(),this.Bc.zL()&&i.push({name:t,url:e})}catch(s){console.warn(`[C3 runtime] Failed to load web font '${t}': `,s)}}FZ(t){return!!this.AK[t]}kZ(t,s){this.EK=!!s;for(const[s,i,e]of t)this.RK.set(s,{fileName:s,LZ:i.map(t=>({type:t[0],NZ:t[1],fullName:s+t[1],fileSize:t[2]})),BZ:e})}$Z(t){"flat"===this.TK&&(t=t.toLowerCase());const s=this.RK.get(t);if(!s)return null;let i=null;for(const t of s.LZ)if(i||"audio/webm; codecs=opus"!==t.type||(i=t),this.FZ(t.type))return t;return i}WZ(t){const s=this.$Z(t);return s?{url:this.w$(s.fullName),type:s.type}:null}jZ(){if(this.EK){const t=[];for(const s of this.RK.values()){if(s.BZ)continue;const i=this.$Z(s.fileName);i&&t.push({VZ:s.fileName,url:this.w$(i.fullName),type:i.type,fileSize:i.fileSize})}return t}return[]}UZ(t){return"preview"===this.Bc.z$()&&(t=new URL(t,location.href).toString()),this.NK.get(t)||null}dZ(t){let s=this.BK.get(t);if(s)return s;const i=this.UZ(t);return i?(s=URL.createObjectURL(i),this.BK.set(t,s),s):t}_L(){return this.QK}async C$(...t){const s=await Promise.all(t.map(t=>this.m$(t)));if(this.Bc.zL())if(1===t.length){const s=t[0];await import((lm.Zh(s)?"./":"")+s)}else{const s=t.map(t=>`import "${lm.Zh(t)?"./":""}${t}";`).join("\n"),i=URL.createObjectURL(new Blob([s],{type:"application/javascript"}));await import(i)}else await Promise.all(s.map(t=>am(t)))}async x$(t){if(WebAssembly.compileStreaming){const s=await this.m$(t);return await WebAssembly.compileStreaming(fetch(s))}{const s=await lm.ro(t);return await WebAssembly.compile(s)}}async _$(t){const s=await this.m$(t);return await this.Bc.HB("runtime","add-stylesheet",{url:s})}}}{const fm=self._s;fm.HZ=class extends fm.Vn{constructor(t,s){super(),this.zZ=t,this.Bc=t.l$(),this.JZ=s.url||"",this.qZ=s.size,this.YZ=s.SZ,this.XZ=s.blob||null,this.KZ=!!this.XZ,this.bw=null}zn(){this.bw=null,this.zZ=null,this.Bc=null,this.XZ=null}TZ(){return this.JZ}Du(){return this.qZ}bZ(){return"local"===this.YZ||this.XZ?(this.KZ=!0,Promise.resolve()):(this.bw||(this.bw=this.zZ.no(this.JZ,this.YZ).then(t=>(this.KZ=!0,this.bw=null,this.XZ=t,t)).catch(t=>{console.error("Error loading resource: ",t),this.bw=null})),this.bw)}ZZ(){return this.KZ}QZ(){return this.XZ?Promise.resolve(this.XZ):this.bw?this.bw:this.zZ.no(this.JZ,this.YZ)}}}{const dm=self._s,pm=new dm.Hd,mm=new Set;dm.vZ=class extends dm.HZ{constructor(t,s){super(t,s),this.tQ=null,this.sQ=null,this.Hp=0,this.iQ=-1,this.eQ=-1,this.nQ=!!s.wZ,mm.add(this)}zn(){if(0!==this.Hp)throw new Error("released image asset which still has texture references");this.zZ.CZ(this),this.tQ=null,mm.delete(this),super.zn()}static rQ(){for(const t of mm)t.tQ=null,t.sQ=null,t.Hp=0}KX(t,s){return s=s||{},this.Hp++,this.sQ?Promise.resolve(this.sQ):(this.tQ||(s.nT=this.Bc.IB().hQ(),this.tQ=this.oQ(t,s)),this.tQ)}async oQ(t,s){try{const i=await this.QZ();return 0===this.Hp?(this.tQ=null,null):await pm.$u(async()=>{const e=await t.uD(i,s);return this.tQ=null,0===this.Hp?(t.wx(e),null):(this.sQ=e,this.iQ=e.Vg(),this.eQ=e.Qg(),this.sQ)})}catch(t){throw console.error("Failed to load texture: ",t),t}}aA(){if(this.Hp<=0)throw new Error("texture released too many times");this.Hp--,0===this.Hp&&this.sQ&&(this.sQ.gM().wx(this.sQ),this.sQ=null)}aQ(){return this.Hp}Tx(){return this.sQ}Vg(){return this.iQ}Qg(){return this.eQ}xZ(){return this.nQ}async lQ(){const t=await this.QZ();return dm.Ri.ImageBitmap?await createImageBitmap(t):await dm.uo(t)}}}{let gm=function(t,s){return t.kB().uQ()-s.kB().uQ()};SortByInstLastCachedZIndex=gm;const ym=self._s,wm=self.assert;ym.cQ=class extends ym.Vn{constructor(t,s,i){super(),this.fQ=t,this.Aa=s,this.Ra=i,this.dQ=[],this.pQ=!0,this.mQ=new Set,this.gQ=!1}zn(){ym.bh(this.dQ),this.mQ.clear(),this.fQ=null}$f(){ym.bh(this.dQ),this.pQ=!0,this.mQ.clear(),this.gQ=!1}yQ(){this.pQ=!1}Ru(){return!this.dQ.length||!(this.dQ.length>this.mQ.size)&&(this.wQ(),!0)}SQ(t){if(this.mQ.has(t))return this.mQ.delete(t),void(0===this.mQ.size&&(this.gQ=!1));this.dQ.push(t),this.pQ=1===this.dQ.length}Zf(t){this.mQ.add(t),this.gQ=!0,this.mQ.size>=50&&this.wQ()}wQ(){this.gQ&&(this.dQ.length!==this.mQ.size?(ym.Ah(this.dQ,this.mQ),this.mQ.clear(),this.gQ=!1):this.$f())}vQ(){this.pQ||(this.dQ.sort(gm),this.pQ=!0)}bQ(t){this.wQ(),this.vQ(),this.dQ.length&&t.push(this.dQ)}}}{const Sm=self._s;Sm.MQ=class extends Sm.Vn{constructor(t,s){super(),this.CQ=t,this.TQ=s,this.xQ=Sm.Hn(Sm.Gu)}zn(){this.xQ.zn(),this.xQ=null}IQ(t,s,i){let e=this.xQ.zs(t,s);return e||(i?(e=Sm.Hn(Sm.cQ,this,t,s),this.xQ.Set(t,s,e),e):null)}_Q(t){return Math.floor(t/this.CQ)}GQ(t){return Math.floor(t/this.TQ)}PQ(t,s,i){if(s)for(let e=s.Qa(),n=s.sl();e<=n;++e)for(let n=s.tl(),r=s.il();n<=r;++n){if(i&&i.xl(e,n))continue;const s=this.IQ(e,n,!1);s&&(s.Zf(t),s.Ru()&&this.xQ.Eu(e,n))}if(i)for(let e=i.Qa(),n=i.sl();e<=n;++e)for(let n=i.tl(),r=i.il();n<=r;++n)s&&s.xl(e,n)||this.IQ(e,n,!0).SQ(t)}AQ(t,s){let i=this._Q(t.Qa());const e=this.GQ(t.tl()),n=this._Q(t.sl()),r=this.GQ(t.il());for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.IQ(i,t,!1);e&&e.bQ(s)}}RQ(t){let s=t.Qa();const i=t.tl(),e=t.sl(),n=t.il();for(;s<=e;++s)for(let t=i;t<=n;++t){const i=this.IQ(s,t,!1);i&&i.yQ()}}}}{let vm=function(t,s){return t.kB().uQ()-s.kB().uQ()},bm=function(t,s){return t.kB().tC()-s.kB().tC()};SortByInstLastCachedZIndex=vm,SortByInstZElevation=bm;const Mm=self._s,Cm=self.assert,Tm=new Mm.Rect,xm=new Mm.Pl,Im=[],_m=new Mm.Rect,Gm=new Mm.Rect,Pm=self.ls,Am=Pm.ws,Rm=Pm.Ss,Em=Pm.ds,Om=Em.create(),Dm=Am.create(),Fm=Rm.create(),km=Am.create(),Lm=Am.create(),Nm=Am.create(),Bm=Mm.Hn(Mm.Pa),$m=Mm.Hn(Mm.Rect),Wm=[],jm=[],Vm=[],Um={name:"",EQ:-1,OQ:!1,isVisible:!0,bV:!0,TV:!1,backgroundColor:[1,1,1,1],UV:!0,DQ:[1,1],opacity:1,JV:!1,FQ:!1,kQ:!1,LQ:!1,RV:1,gk:0,WV:0,NQ:[],BQ:[],$Q:[]},Hm=new Map,zm=t=>{if(!t.dJ.fU().WQ())return;const s=t.dJ.xU();Hm.has(s)&&(Hm.delete(s),Hm.size||t.dJ.l$().Sf().removeEventListener("instancedestroy",zm))};Mm.jQ=class extends Mm.Vn{constructor(t,s,i){super(),i=Object.assign({},Um,i),this.VQ=t,this.Bc=t.l$(),this.UQ=s,this.Yn=i.name,this.Rw=-1,this.HQ=!!i.TV,this.zQ=-1,this.JQ=i.EQ,this.qQ=!!i.OQ,this.YQ=!!i.isVisible,this.XQ=!!i.bV,this.KQ=Mm.Hn(Mm.To),this.KQ.Sa(i.backgroundColor),this.ZQ=!!i.UV,this.QQ=i.DQ[0],this.t0=i.DQ[1],this.OM=Mm.Hn(Mm.To,1,1,1,i.opacity),this.s0=Mm.Hn(Mm.To),this.i0=!!i.JV,this.e0=!!i.FQ,this.n0=!!i.kQ,this.r0=!!i.LQ,this.h0=i.RV,this.EM=i.gk,this.o0=null,this.a0=1,this.DM=i.WV,this.l0=0,this.u0=0,this.c0=0,this.f0=!1,this.iE=Mm.Hn(Mm.Rect),this.d0=Mm.Hn(Mm.Rect),this.p0=Mm.Hn(Mm.Rect),this.m0=!0,this.sx=Em.create(),this.g0=!0,this.QF=Em.create(),this.y0=!0,this.w0=Mm.Hn(Mm.Nw.jw),this.S0=!0,this.v0=[],this.b0=i.NQ,this.M0=[],this.C0=[],this.T0=new Map,this.dQ=[],this.x0=!1,this.I0=!1,this._0=!1;const e=this.Bc.IB();this.G0=Mm.Hn(Mm.P0,this,i.BQ),this.SL=Mm.Hn(Mm.Nw.aF,e.A0(),{KD:(t,s)=>{const i=s.cL(),n=i.hD();t.BM(i.R0()),t.pD(n),t.mD(n),e.E0(n)},QD:t=>this._j().O0(t)}),this.D0=!0,this.F0=!0,this.k0=null,this.L0=[],this.N0=!1,this.B0=Mm.Hn(Mm.Rect,0,0,-1,-1),this.$0=Mm.Hn(Mm.Rect,0,0,-1,-1),this.W0=new self.qj(this),this.j0=Mm.Hn(Mm.Event.Sf),this.V0(),this.U0()&&(this.k0=Mm.Hn(Mm.MQ,this.Bc.qL(),this.Bc.XL())),this.H0=i.$Q.map(t=>Mm.jQ.z0(this.VQ,this,t))}J0(){for(const t of this.b0){const s=this.Bc.q0(t[1]);this.VQ.Y0(s),s.X0()||(s.K0(t),s.Z0(this.Rw)),this.M0.push(t),this.T0.set(t[2],t)}Mm.xh(this.v0,this.M0),this.b0=null}static z0(t,s,i){return Mm.Hn(Mm.jQ,t,s,{name:i[0],EQ:i[2],isVisible:i[3],bV:i[13],TV:i[19],backgroundColor:i[4].map(t=>t/255),UV:i[5],DQ:[i[6],i[7]],opacity:i[8],JV:i[9],FQ:i[17],kQ:i[18],LQ:i[10],RV:i[11],gk:i[12],WV:i[16],NQ:i[14],BQ:i[15],$Q:i[20]})}zn(){for(const t of this.H0)t.zn();Mm.bh(this.H0);for(const t of this.dQ)this.Bc.wU(t);Mm.bh(this.dQ),this.G0.zn(),this.G0=null,this.SL.zn(),this.SL=null,this.W0=null,this.UQ=null,this.VQ=null,this.Bc=null}Jn(){return!this.VQ}Q0(t){return this.T0.get(t)}t1(t){const s=this.VQ.s1(),i=this.M0;let e=0;for(let n=0,r=i.length;n<r;++n){const r=i[n],h=this.Bc.q0(r[1]);let o=!0;if(!h.i1()||s)if(h.WQ()&&Hm.has(r[2]))o=!1;else{const s=this.Bc.e1(r,this,!0);t.push(s),h.WQ()&&(Hm.size||this.Bc.Sf().addEventListener("instancedestroy",zm),Hm.set(s.xU(),s),o=!1,this.C0.push(s.xU()))}o&&(i[e]=i[n],++e)}Mm.Sh(i,e),this.Bc.mj(),this.jB()}n1(t,s){if(!t.zW().bW())throw new Error("instance is not of world type");const i=t.kB();if(i.LB()!==this)throw new Error("instance added to wrong layer");this.dQ.push(t),0!==i.tC()&&(this._0=!0),s&&this.U0()&&t.kB().CH(),this.jB(t)}h1(t){this.dQ.includes(t)||(this.dQ.push(t),0!==t.kB().tC()&&(this._0=!0),this.jB(t))}o1(t,s){const i=t.kB();if(i.LB()!==this)throw new Error("instance added to wrong layer");this.dQ.unshift(t),0!==i.tC()&&(this._0=!0),this.jB(t),s&&this.U0()&&t.kB().CH()}a1(t,s){const i=this.dQ.indexOf(t);i<0||(s&&this.U0()&&t.kB().l1(),this.dQ.splice(i,1),this.jB(t),this.u1())}c1(){this._0=!0}u1(){0===this.dQ.length&&(this._0=!1)}f1(t){if(t){const t=new Set;for(const s of this.dQ){const i=s.kB().uQ();i>=0&&t.add(i)}let s=-1;for(const i of this.dQ){const e=i.kB();if(!(e.uQ()>=0)){for(++s;t.has(s);)++s;e.d1(s)}}}this.dQ.sort(vm)}m1(){}g1(){for(const t of this.dQ)t.fU().WQ()||this.Bc.wU(t);this.Bc.mj(),Mm.bh(this.dQ),this._0=!1,this.jB()}w1(t,s,i,e,n,r){const h=this.Bc.aN(),o=this.Bc.S1(),a=t.v1(),l=[];for(const u of this.M0){const c=u[0],f=c[0],d=c[1];if(!s.xl(f,d))continue;const p=o[u[1]];if(p!==t){if(!a)continue;if(!t.xj(p))continue}let m=n;if(!m){const t=this.Bc.OB();this.mB()===t?m=this:(m=t.b1(this.Ac()),m||(m=t.BB(this.CL())))}const g=this.Bc.e1(u,m,!1,void 0,void 0,!1,r,void 0,r);r&&m.uj(g);const y=g.kB();y.IH(i,e),y.CH(),h.cj(!0),g.fj(),h.cj(!1),l.push(g)}return l}oj(){return this.dQ.length}mB(){return this.VQ}Ac(){return this.Yn}M1(t){this.Rw=t}CL(){return this.Rw}C1(t){this.zQ=t}fY(){return this.zQ}xV(){return this.HQ}IV(t){t=!!t,this.HQ!==t&&(this.HQ=t,this.VQ.T1(),this.Bc.VB())}I1(){let t=-1;const s=this.cV();return t=s?s.pV().indexOf(this):this.mB()._1().indexOf(this),t}G1(){return this.JQ}l$(){return this.Bc}P1(){return this.qQ}A1(){for(const t of this.fV())if(t.P1())return!0;return!1}uW(){return this.Bc.uW()}_j(){return this.G0}ML(){return this.R1(),this.SL}R1(){const t=this.E1();if(!this.D0&&t===this.F0&&!this.SL.tk())return;const s=this._j().O1();this.SL.sk(s.map(t=>t.zI()),{sF:s.map(t=>t.CL()),iF:!t,oF:!0}),this.D0=!1,this.F0=t}vJ(){this._j().vJ(),this.D0=!0}U0(){return this.r0&&!this.n0}D1(){return this.k0}F1(){this.N0=!1}vV(){for(const t of this.L1())if(!t.yV())return!1;return!0}yV(){return this.YQ}wV(t){t=!!t,this.YQ!==t&&(this.YQ=t,this.Bc.VB())}CV(t){this.XQ=!!t}MV(){return this.XQ}GV(){for(const t of this.L1())if(!t.MV())return!1;return!0}ZV(t){if(t=!!t,this.f0!==t){if(this.f0=t,t){const t=this.mB();this.u0=t.kj(),this.c0=t.Nj()}this.N1(),this.Bc.VB()}}B1(){return this.f0}Fj(t){const s=this.mB(),i=s.W1(),e=s.j1();t>e&&(t=e),t<i&&(t=i),this.u0!==t&&(this.u0=t,this.B1()&&(this.N1(),this.Bc.VB()))}Lj(t){const s=this.mB(),i=s.V1(),e=s.U1();t>e&&(t=e),t<i&&(t=i),this.c0!==t&&(this.c0=t,this.B1()&&(this.N1(),this.Bc.VB()))}kj(){return this.B1()?this.u0:this.mB().kj()}Nj(){return this.B1()?this.c0:this.mB().Nj()}tU(){return this.H1(),this.iE}z1(){return this.H1(),this.d0}J1(){return this.H1(),this.p0}q1(){return this.mB().hV()}WS(t){return this.Bc.WS(t)}Y1(t,s){const i=this.z1();if(0===t)s.S(i);else{let e=i.ol(),n=i.al();const r=this.X1(t),h=i.width()/r,o=i.height()/r,[a,l]=this.q1();if(.5!==a||.5!==l){const s=this.K1(),i=this.Bc,r=this.WS()/s;let h=(a-.5)*i.Z1()/r,o=(l-.5)*i.Q1()/r;const u=this.Dj();0!==u&&(Bm.set(h,o),Bm.rotate(u),h=Bm.Da(),o=Bm.ka());const c=Mm.mr(s,0,t);e+=Mm._t(h,0,c),n+=Mm._t(o,0,c)}s.set(e-h/2,n-o/2,e+h/2,n+o/2)}}SO(){return this.OM.Wo()}bO(t){t=Mm.Kn(t,0,1),this.OM.Wo()!==t&&(this.OM.ko(t),this.V0(),this.Bc.VB())}V0(){this.s0.S(this.OM),this.s0.Zo()}R0(){return this.s0}E1(){return this.OM.qo(1,1,1,1)}OV(){return this.h0}EV(t){this.h0!==t&&(this.h0=t,this.N1(),this.Bc.VB())}LV(){return this.QQ}$V(){return this.t0}t2(t,s){this.QQ===t&&this.t0===s||(this.QQ=t,this.t0=s,this.N1(),this.Bc.VB())}kV(t){this.t2(t,this.$V())}BV(t){this.t2(this.LV(),t)}sC(t){this.DM!==t&&(this.DM=t,this.Bc.VB())}tC(){return this.DM}Oj(t){t=Mm.Zn(t),this.l0!==t&&(this.l0=t,this.N1(),this.Bc.VB())}Dj(){return Mm.Zn(this.VQ.Dj()+this.l0)}DV(){return this.l0}s2(){return this.dQ.length>0}$B(){return this.dQ}i2(){return this.e2()&&this.n0?(Mm.xh(Vm,this.$B()),Vm.sort((t,s)=>this.n2(t,s)),Vm):this.$B()}h2(t){Mm.On(t,this.i2());for(const s of this.H0)s.vV()&&s.SO()>0&&s.h2(t)}n2(t,s){const i=this.mB().o2(),e=i[0],n=i[1],r=i[2],h=t.kB(),o=s.kB(),a=h.YM()-e,l=h.ZM()-n,u=h.tC()-r,c=o.YM()-e,f=o.ZM()-n,d=o.tC()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}KV(){return this.KQ}zV(){return this.ZQ}HV(t){t=!!t,this.ZQ!==t&&(this.ZQ=t,this.Bc.VB())}YV(){return this.i0}qV(t){t=!!t,this.i0!==t&&(this.i0=t,this.Bc.VB())}jV(t){t=!!t,this.e0!==t&&(this.e0=t,this.N1(),this.Bc.VB())}VV(){return this.e0}a2(){return!this.l$().l2()||!this.e0}e2(){return!this.a2()}u2(){return this.e2()&&this.mB().c2()}f2(){if(!this.u2())return!1;for(const t of this.H0)if(!t.f2())return!1;return!0}NM(t){this.EM!==t&&(this.EM=t,this.Bc.VB())}XV(){return this.EM}d2(){return!this.UQ}cV(){return this.UQ}m2(t){this.UQ=t}pV(){return this.H0}g2(){return this.H0.length>0}w2(t,s=!0){s?this.H0.push(t):this.H0.unshift(t)}S2(t,s,i){let e=this.H0.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.H0.splice(e,0,t)}v2(t){const s=this.H0.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.H0.splice(s,1)}b2(){for(const t of this.H0)if(t.M2())return!0;return!1}*gV(){for(const t of this.H0)yield*t.gV();yield this}*fV(){let t=this.cV();for(;t;)yield t,t=t.cV()}*L1(){yield this,yield*this.fV()}C2(t){for(const s of this.fV())if(s===t)return!0;return!1}T2(t){return this===t||this.QQ===t.QQ&&this.t0===t.t0&&this.a0===t.a0&&this.h0===t.h0&&this.l0===t.l0&&this.kj()===t.kj()&&this.Nj()===t.Nj()}I2(){return{parallaxX:this.LV(),parallaxY:this.$V(),scale:this.AV(),scaleRate:this.OV(),angle:this.DV(),hasOwnScroll:this.B1(),scrollX:this.kj(),scrollY:this.Nj()}}_2(t){this.t2(t.parallaxX,t.parallaxY),this.PV(t.scale),this.EV(t.scaleRate),this.Oj(t.angle),this.ZV(t.hasOwnScroll),this.Fj(t.scrollX),this.Lj(t.scrollY),this.H1()}G2(t){0!==t.size&&Mm.Ah(this.dQ,t)>0&&(this.u1(),this.jB())}jB(t){this.x0=!1,this.N0=!1,t&&!t.fU().zW().TW()||(this.I0=!1)}P2(){if(!this.x0){if(this.dQ.sort(bm),this.U0())for(let t=0,s=this.dQ.length;t<s;++t){const s=this.dQ[t].kB();s.d1(t),this.k0.RQ(s.A2())}else for(let t=0,s=this.dQ.length;t<s;++t)this.dQ[t].kB().d1(t);this.x0=!0}}R2(){if(this.I0)return;const t=this.VQ.E2(this.fY()).map(t=>[...t.gV()]).flat();let s=0;for(const i of t){for(const t of i.$B())t.fU().zW().TW()&&t.kB().O2(s++);i.D2()}}D2(){this.I0=!0}F2(){return{isVisible:this.vV(),opacity:this.SO(),isInteractive:this.MV()}}L2(t,s,i){const e=t.kB(),n=s.kB();if(e.LB()!==this||n.LB()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const r=e.NB();let h=n.NB();return r!==h+(i?1:-1)&&(Mm.Ih(this.dQ,r),r<h&&h--,i&&h++,h===this.dQ.length?this.dQ.push(t):this.dQ.splice(h,0,t),this.jB(t),!0)}N2(t,s){const i=[];let e=0,n=0,r=t.length,h=s.length;for(;e<r&&n<h;){const r=t[e],h=s[n];r.kB().uQ()<h.kB().uQ()?(i.push(r),++e):(i.push(h),++n)}for(;e<r;++e)i.push(t[e]);for(;n<h;++n)i.push(s[n]);return i}B2(t){const s=[],i=t.length;for(let e=0;e<i-1;e+=2){const i=t[e],n=t[e+1];s.push(this.N2(i,n))}return i%2==1&&s.push(t[i-1]),s}W2(t){for(;t.length>1;)t=this.B2(t);return t[0]}j2(){return this.P2(),Mm.bh(Im),this.k0.AQ(this.tU(),Im),Im.length?1===Im.length?Im[0]:this.W2(Im):[]}M2(){return this.vV()&&this.SO()>0&&this.V2()}V2(){if(this.s2()||!this.zV()||this.j0.Tf("beforedraw")||this.j0.Tf("afterdraw"))return!0;for(const t of this.H0)if(t.V2())return!0;return!1}U2(){return this.YV()||!this.E1()||0!==this.XV()||this.G0.H2()}z2(){if(this.U2())return!0;for(const t of this.H0)if(t.z2())return!0;return!1}hD(){return this.o0}X1(t){if(this.VQ.lV())return 1;{const s=this.J2();return s/(s-t)}}q2(t){const s=this.Bc.uU();if(this.VQ.lV())return s;{const i=this.J2();return this.WS()/Math.abs(i-t)*s}}N1(){this.y0=!0,this.S0=!0,this.m0=!0}Y2(t){return this.y0&&(this.X2(t,this.QF,0,0,null),this.y0=!1),this.QF}K1(t){return this.WS(t)/this.K2()}J2(){return this.u2()?this.mB().o2()[2]:this.K1()}Z2(){if(this.u2()){const t=this.mB().o2();return[t[0],t[1],t[2]]}return this.Q2()}Q2(t=0,s=0,i=0){const e=this.Bc,n=this.mB(),r=e.t3(),h=e.s3();let o=(this.kj()-r)*this.QQ+r,a=(this.Nj()-h)*this.t0+h;e.QL()&&(o=Math.round(o),a=Math.round(a));let l=o+t,u=a+s;const c=n.lV()?this.WS(i):this.K1(i),[f,d]=this.q1();if(.5!==f||.5!==d){const t=this.WS(i)/c;let s=(f-.5)*e.Z1()/t,n=(d-.5)*e.Q1()/t;const r=this.Dj();0!==r&&(Bm.set(s,n),Bm.rotate(r),s=Bm.Da(),n=Bm.ka()),l+=s,u+=n}return[l,u,c]}X2(t,s,i,e,n){const r=this.Bc,h=this.mB();if(this.u2()){Am.S(km,h.o2()),Am.S(Lm,h.i3()),Am.S(Nm,h.e3());const t=r.t3(),s=r.s3(),i=Lm[0]-km[0],e=Lm[1]-km[1],n=Lm[2]-km[2];km[0]=(km[0]-t)*this.QQ+t,km[1]=(km[1]-s)*this.t0+s,km[2]*=Math.max(this.QQ,this.t0),Lm[0]=km[0]+i,Lm[1]=km[1]+e,Lm[2]=km[2]+n}else{const[t,s,r]=this.Q2(i,e,n);Am.set(km,t,s,r),Am.set(Lm,t,s,r-100);const h=this.Dj();0===h?Am.set(Nm,0,1,0):Am.set(Nm,Math.sin(h),Math.cos(h),0)}t.nv(s,km,Lm,Nm,n||r.Q1())}n3(){this.g0=!0,this.S0=!0,this.m0=!0}r3(t){return this.g0&&(this.h3(t),this.g0=!1),this.sx}h3(t){const s=this.Bc.IB(),[i,e]=this.q1();if(this.VQ.lV())t.ev(this.sx,s.o3(),s.a3());else if(.5===i&&.5===e)Em.S(this.sx,s.l3());else{const n=s.o3(),r=s.a3();t.tv(this.sx,n/r,i,e)}}aK(t,s=!0,i=0,e=0,n=0){s&&t.aO(this.r3(t));let r=null;0===i&&0===e&&0===n?r=this.Y2(t):(this.X2(t,Om,i,e,n),r=Om),t.pO(r)}u3(t){this.aK(t),t.jv(this.tC())}c3(t){let s=null;if(t.jb()&&this.Bc.f3()){const i=this.Bc.IB().d3(this);i&&(s=i.VR(),t.bD(s))}return s}m3(t){if(t.sv()&&this.Bc.f3()){const s=2*(this.CL()+1);t.g3(s,s+1)}}y3(t,s){if(this.j0.Tf(s)){t.uv(),t.TO(null),t.GO(),t.Pb(),t.vO(1,1,1,1),t.jv(this.tC()),t.Uv(0);const i=new Mm.Event(s);i.J_=this.Bc.IB().xB(),this.PZ(i)}}HC(t,s,i){const e=this.Bc.IB(),n=this.U2();let r=null;const h=this.c3(t);if(this.m3(t),n){const s={eT:this.Bc.KL(),VT:!0,w3:!!t.sv()&&this.Bc.S3()};"low"===e.v3()&&(s.width=e.o3(),s.height=e.a3()),r=this.Bc.b3(s),this.o0=r,t.fD(r),this.zV()&&t.QO(0,0,0,0)}else this.o0=s,t.fD(s);if(this.zV()||t.Au(this.KQ),this.VQ.M3(t,this.o0,this.H0,n&&this.zV()),this.m3(t),this.aK(t),t.jv(this.tC()),t.iD(this.e2()),this.y3(t,"beforedraw"),this.K2()>Number.EPSILON){this.P2();const s=this.U0()&&0===this.tC()&&!this._0;this.u2()?this.C3(t):s?this.T3(t):this.x3(t,this.i2())}this.y3(t,"afterdraw"),t.jv(0),t.Uv(0),n&&(t.iD(!1),this.I3(t,r,s,i)),h&&t.CD(h),this.o0=null}x3(t,s){const i=this.tU(),e=this.o0,n=this.mB().lV(),r=this.mB()._3();let h=null;for(let o=0,a=s.length;o<a;++o){const a=s[o];if(a===h)continue;h=a;const l=a.kB();l.vV()&&l.G3(i,r,n)&&this.P3(a,l,t,e)}}C3(t){const s=this.o0,i=this.A3(),e=Wm,n=jm,r=this.i2();for(let h=0,o=r.length;h<o;){const a=r[h],l=a.kB();if(!l.vV()||!l.R3(i)){++h;continue}(!a.E3()||l.O3()>0)&&n.push(a);const u=a.kB().kH();e.push(a);let c=h+1;for(;c<o;++c){const t=r[c],s=t.kB();if(s.vV()&&s.R3(i)){if(s.kH()!==u)break;t.E3()?(s.O3()>0&&n.push(t),e.push(t)):n.push(t)}}if(1!==e.length||e[0].D3()){this.F3(t,e);for(let i=0,e=n.length;i<e;++i){const e=n[i],r=e.kB();r.L3(!0),this.P3(e,r,t,s),r.L3(!1)}}else{this.P3(a,l,t,s);for(let i=0,e=n.length;i<e;++i){const e=n[i];if(e===a)continue;const r=e.kB();r.LB().P3(e,r,t,s)}}h=c,Mm.bh(e),Mm.bh(n)}}F3(t,s){const i=this.o0;t.yD();for(let i=0,e=s.length;i<e;++i){const e=s[i],n=e.kB();n.N3(!0),this.B3(e,n,t)}t.wD();for(let e=0,n=s.length;e<n;++e){const n=s[e],r=n.kB();this.P3(n,r,t,i),r.N3(!1)}t.vD()}T3(t){const s=this.k0,i=this.$0,e=this.B0,n=this.tU();let r;i.set(s._Q(n.Qa()),s.GQ(n.tl()),s._Q(n.sl()),s.GQ(n.il())),this.N0&&i.equals(e)?r=this.L0:(r=this.j2(),this.N0=!0,e.S(i)),this.x3(t,r),r!==this.L0&&Mm.xh(this.L0,r)}P3(t,s,i,e){s.H2()?this.W3(t,s,i,e):this.B3(t,s,i)}B3(t,s,i){const e=s.j3();i.xv()!==e&&e.LM(),t.HC(i)}W3(t,s,i,e){this.V3(t,s,i,e,null)&&this.aK(i)}V3(t,s,i,e,n){const r=s.bH().ML();return r.fk(i,e,{pk:t,gk:s.XV(),devicePixelRatio:this.Bc.U3(),time:t.H3(),yk:this.Bc.z3()*this.K2(),wk:this.Dj(),Vk:s.BH(),Uk:r.lL()?null:this.J3(s),xk:n&&n.xk,Ik:n&&n.Ik,_k:n&&n._k,Gk:n&&n.Gk,Pk:n&&n.Pk,Ak:n&&n.Ak}),i.jv(this.tC()),r.gO()}I3(t,s,i,e){const n=this.G0.O1(),r=this.Bc;0===n.length?(t.fD(i),t.uv(),e&&0===this.EM&&this.E1()?t.dD(s):(t.NM(this.EM),t.BM(this.s0),t.pD(s)),t.mD(s),r.E0(s)):this.ML().fk(t,i,{pk:this,gk:this.XV(),devicePixelRatio:r.U3(),yk:r.z3()*this.K2(),wk:this.Dj(),Vk:this.tU(),Uk:null,tF:!0})}AV(){return this.a0}PV(t){this.a0!==t&&(this.a0=t,this.VQ.q3(),this.N1(),this.Bc.VB())}uU(){return this.K2()*this.Bc.uU()}vY(){return this.K2()*this.Bc.vY()}K2(){return(this.a0*this.VQ.Ej()-1)*this.h0+1}H1(){if(!this.m0)return;this.m0=!1;const t=this.Bc.t3(),s=this.Bc.s3(),i=(this.kj()-t)*this.QQ+t,e=(this.Nj()-s)*this.t0+s,n=this.K2(),r=this.Bc.Z1()/n,h=this.Bc.Q1()/n;let o=i-r/2,a=e-h/2;this.Bc.QL()&&(o=Math.round(o),a=Math.round(a));const l=this.d0;l.set(o,a,o+r,a+h);const u=this.Dj();0!==u&&(Tm.S(l),Tm.offset(-l.ol(),-l.al()),xm.Kl(Tm,u),xm.Ql(Tm),Tm.offset(l.ol(),l.al()),l.S(Tm));const c=this.DM;this.Y1(c,this.iE),this.u2()?this.Y3(c,this.p0):this.p0.S(this.iE)}Y3(t,s){const i=this.Bc.IB(),e=i.eW(),n=i.rW(),[r,h]=this.iU(0,0,t),[o,a]=this.iU(e,0,t),[l,u]=this.iU(e,n,t),[c,f]=this.iU(0,n,t);let d=Math.min(r,o,l,c),p=Math.min(h,a,u,f),m=Math.max(r,o,l,c),g=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}iU(t,s,i=0){return this.X3(t,s,i,this.vY())}hU(t,s,i=0){return this.X3(t,s,i,this.uU()*this.uW())}X3(t,s,i,e){const n=this.Bc,r=n.gM(),h=this.K2(),o=n.Z1()/h,a=n.Q1()/h,l=Fm;Rm.set(l,0,0,o,a),t/=e,s=l[3]-s/e;const u=this.r3(r),c=this.Y2(r),f=Dm;return Mm.Nw.Ww(t,s,i,c,u,l,f)?[f[0],f[1]]:[NaN,NaN]}K3(t,s){const i=this.a0,e=this.h0,n=this.QQ,r=this.t0,h=this.l0,o=this.u2();o&&this.mB().Z3(!1),this.a0=1,this.h0=1,this.QQ=1,this.t0=1,this.l0=0,this.N1();const a=this.iU(t,s);return this.a0=i,this.h0=e,this.QQ=n,this.t0=r,this.l0=h,this.N1(),o&&this.mB().Z3(!0),a}nU(t,s,i=0){return this.Q3(t,s,i,this.vY())}aU(t,s,i=0){return this.Q3(t,s,i,this.uU()*this.uW())}Q3(t,s,i,e){const n=this.Bc,r=n.gM(),h=this.K2(),o=n.Z1()/h,a=n.Q1()/h,l=Fm;Rm.set(l,0,0,o,a);const u=this.r3(r),c=this.Y2(r),f=Dm;return Mm.Nw.Bw(t,s,i,c,u,l,f)?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}t4(t,s){return t*=this.uU()*this.uW(),0!==s&&(t*=this.X1(s)),t}J3(t){const s=t.BH(),i=t.kH(),e=t.O3(),n=i+e,r=s.Qa(),h=s.tl(),o=s.sl(),a=s.il();if(this.u2()){if(this.s4(r,h,i)||this.s4(o,h,i)||this.s4(o,a,i)||this.s4(r,a,i))return null;if(e>0&&(this.s4(r,h,n)||this.s4(o,h,n)||this.s4(o,a,n)||this.s4(r,a,n)))return null}else if(n>=this.K1())return null;let[l,u]=this.aU(r,h,i),[c,f]=this.aU(o,a,i);if(0!==this.Dj()||e>0||this.u2()){const[t,s]=this.aU(o,h,i),[d,p]=this.aU(r,a,i);if(e>0){const[i,e]=this.aU(r,h,n),[m,g]=this.aU(o,h,n),[y,w]=this.aU(o,a,n),[S,v]=this.aU(r,a,n);let b=Math.min(l,c,t,d,i,m,y,S);c=Math.max(l,c,t,d,i,m,y,S),l=b,b=Math.min(u,f,s,p,e,g,w,v),f=Math.max(u,f,s,p,e,g,w,v),u=b}else{let i=Math.min(l,c,t,d);c=Math.max(l,c,t,d),l=i,i=Math.min(u,f,s,p),f=Math.max(u,f,s,p),u=i}}return Tm.set(l,u,c,f),Tm}A3(){return this.S0&&(this.i4(),this.S0=!1),this.w0}i4(){const t=this.Bc.gM(),s=this.r3(t),i=this.Y2(t);this.w0.Yw(i,s)}s4(t,s,i){return this.A3().Kw(t,s,i)}e4(){return{d:this.P1(),s:this.AV(),a:this.DV(),v:this.yV(),i:this.MV(),html:this.xV(),bc:this.KQ.toJSON(),t:this.zV(),sx:this.u0,sy:this.c0,hosp:this.f0,px:this.LV(),py:this.$V(),c:this.OM.toJSON(),sr:this.OV(),fx:this.G0.aC(),cg:this.C0}}n4(t){this.qQ=!!t.d,this.a0=t.s,this.l0=t.a,this.YQ=!!t.v,this.XQ=!t.hasOwnProperty("i")||t.i,this.HQ=!!t.html,this.KQ.Sa(t.bc),this.ZQ=!!t.t,t.hasOwnProperty("sx")&&(this.u0=t.sx),t.hasOwnProperty("sy")&&(this.c0=t.sy),t.hasOwnProperty("hosp")&&(this.f0=!!t.hosp),this.QQ=t.px,this.t0=t.py,this.OM.Sa(t.c),this.V0(),this.h0=t.sr,Mm.xh(this.C0,t.cg),Mm.xh(this.M0,this.v0);const s=new Set(this.C0);let i=0;for(let t=0,e=this.M0.length;t<e;++t)s.has(this.M0[t][2])||(this.M0[i]=this.M0[t],++i);Mm.Sh(this.M0,i),this.G0.lC(t.fx),this.D0=!0}r4(){this.f1(!1),this.jB(),this.N1(),this.n3()}Vj(){return this.W0}nN(){return this.j0}PZ(t){t.MH=this.Vj(),this.j0.dispatchEvent(t)}uj(t,s=!1,i=!1){if(this.dQ.includes(t))return s&&this.dQ.sort((t,s)=>(t.kB().h4()??0)-(s.kB().h4()??0)),void(i&&this.dQ.forEach((t,s)=>t.kB().d1(s)));if(t.o4()){const s=[...t.dz()];s.push(t),s.sort((t,s)=>(t.kB().h4()??0)-(s.kB().h4()??0));for(const t of s)if(t.CU())for(const i of t.TU()){if(s.includes(i))continue;const t=[...i.dz()];t.push(i),t.sort((t,s)=>(t.kB().h4()??0)-(s.kB().h4()??0)),t&&t.length&&s.splice(s.length,0,...t)}for(const t of s)t.zW().bW()&&this.n1(t,!0);i&&this.dQ.forEach((t,s)=>t.kB().d1(s))}else{if(t.zW().bW()&&this.n1(t,!0),!t.CU())return void(i&&this.dQ.forEach((t,s)=>t.kB().d1(s)));for(const s of t.TU()){const t=[...s.dz()];if(t.push(s),t.sort((t,s)=>(t.kB().h4()??0)-(s.kB().h4()??0)),t&&t.length)for(const s of t)s.zW().bW()&&this.n1(s,!0)}i&&this.dQ.forEach((t,s)=>t.kB().d1(s))}}}}{let Jm=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},qm=function(t,s){ag!==t&&(t.u3(s),ag=t)};vec3EqualsXYZ=Jm,MaybePrepareLayerDraw=qm;const Ym=self._s,Xm=self.eH,Km=self.assert,Zm=Ym.Hn(Ym.Rect),Qm=Ym.Hn(Ym.Rect),tg=Ym.Hn(Ym.Rect),sg=Ym.Hn(Ym.To),ig=self.ls,eg=ig.ws,ng=[],rg=[],hg=[],og=[];let ag=null;Ym.a4=class extends Ym.Vn{constructor(t,s,i){super(),this.l4=t,this.Bc=t.l$(),this.Yn=i[0],this.u4=i[1],this.c4=i[2],this.Ay=i[1],this.Ry=i[2],this.f4=!!i[3],this.d4=!!i[4],this.m4=i[5],this.g4=i[6],this.y4=i[7],this.w4=null,this.JQ=i[8],this.Rw=s,this.u0=0,this.c0=0,this.a0=1,this.l0=0,this.S4=new Set,this.v4=new Set,this.b4=new Set,this.M4=[],this.C4=[],this.T4=new Map,this.x4=new Map,this.I4=[],this._4=!1,this.G4=eg.create(),this.P4=eg.create(),this.A4=eg.create(),this.R4=[],this.E4=[],this.O4=new Map,this.D4=new Map,this.F4=-1;const e=this.Bc.IB();this.G0=Ym.Hn(Ym.P0,this,i[11]),this.SL=Ym.Hn(Ym.Nw.aF,e.A0(),{KD:(t,s)=>{const i=s.cL().hD();t.MO(),t.pD(i),t.mD(i),e.E0(i)},QD:t=>this._j().O0(t)}),this.D0=!0,this.L4=!1,this.o0=null,this.N4={},this.B4=new Map,this.W4=!0,this.j4=new self.Ij(this),this.j0=Ym.Hn(Ym.Event.Sf);for(const t of i[9])this.R4.push(Ym.jQ.z0(this,null,t));this.V4();for(const t of this.zj())t.J0();for(const t of i[10]){const s=this.Bc.q0(t[1]);if(!s)throw new Error("missing nonworld object class");s.X0()||s.K0(t),this.I4.push(t),this.Y0(s)}}zn(){for(const t of this.E4)t.zn();Ym.bh(this.E4),this.b4.clear(),this.w4=null,this.l4=null,this.Bc=null}l$(){return this.Bc}Ac(){return this.Yn}G1(){return this.JQ}CL(){return this.Rw}_j(){return this.G0}ML(){return this.R1(),this.SL}R1(){const t="low"===this.Bc.IB().v3();if(!this.D0&&this.L4===t&&!this.SL.tk())return;const s=this._j().O1();this.SL.sk(s.map(t=>t.zI()),{sF:s.map(t=>t.CL()),eF:t,oF:!0}),this.D0=!1,this.L4=t}vJ(){this._j().vJ(),this.D0=!0}U4(){let t=this.E4[0].K2();for(let s=1,i=this.E4.length;s<i;++s){const i=this.E4[s];0===i.LV()&&0===i.$V()||(t=Math.min(t,i.K2()))}return t}H4(){return.5*this.Bc.Z1()/this.U4()}z4(){return.5*this.Bc.Q1()/this.U4()}W1(){return this.Wj()?-1/0:this.H4()}j1(){return this.Wj()?1/0:this.Vg()-this.H4()}V1(){return this.Wj()?-1/0:this.z4()}U1(){return this.Wj()?1/0:this.Qg()-this.z4()}Fj(t){const s=this.W1(),i=this.j1();t>i&&(t=i),t<s&&(t=s),this.u0!==t&&(this.u0=t,this.J4(),this.Bc.VB())}kj(){return this.u0}Lj(t){const s=this.V1(),i=this.U1();t>i&&(t=i),t<s&&(t=s),this.c0!==t&&(this.c0=t,this.J4(),this.Bc.VB())}Nj(){return this.c0}Wj(){return this.f4}q3(){this.Fj(this.kj()),this.Lj(this.Nj());for(const t of this.E4)t.B1()&&(t.Fj(t.kj()),t.Lj(t.Nj()))}nV(t,s){this.m4===t&&this.g4===s||(this.m4=t,this.g4=s,this.q4()&&(this.Y4(),this.J4(),this.Bc.VB()))}X4(){return this.lV()?.5:this.m4}K4(){return this.lV()?.5:this.g4}hV(){return[this.X4(),this.K4()]}_3(){const t=this.X4(),s=this.K4();return t<0||t>1||s<0||s>1}oV(){this.d4&&(this.d4=!1,this.Y4(),this.J4(),this.Bc.VB())}aV(){this.d4||(this.d4=!0,this.Y4(),this.J4(),this.Bc.VB())}lV(){return this.d4}q4(){return!this.lV()}Z3(t){t=!!t,this._4!==t&&(this._4=t,this.J4(),this.Bc.VB())}c2(){return this._4}Z4(t,s,i,e,n,r,h,o,a){Jm(this.G4,t,s,i)&&Jm(this.P4,e,n,r)&&Jm(this.A4,h,o,a)||(eg.set(this.G4,t,s,i),eg.set(this.P4,e,n,r),eg.set(this.A4,h,o,a),this.Q4())}Q4(){this.J4(),this.Bc.VB()}o2(){return this.G4}i3(){return this.P4}e3(){return this.A4}Ej(){return this.a0}Rj(t){this.a0!==t&&(this.a0=t,this.J4(),this.q3(),this.Bc.VB())}Oj(t){t=Ym.Zn(t),this.l0!==t&&(this.l0=t,this.J4(),this.Bc.VB())}Dj(){return this.l0}Vg(){return this.Ay}Xg(t){!isFinite(t)||t<1||(this.Ay=t)}Qg(){return this.Ry}Ug(t){!isFinite(t)||t<1||(this.Ry=t)}t5(){return this.w4}_1(){return this.R4}*zj(){for(const t of this.R4)yield*t.gV()}Hj(){return this.E4}s5(){return this.E4.length}LB(t){return"number"==typeof t?this.BB(t):this.b1(t.toString())}BB(t){return t=Ym.Kn(Math.floor(t),0,this.E4.length-1),this.E4[t]}b1(t){return this.O4.get(t.toLowerCase())||null}i5(t){return!!this.b1(t)}e5(t){return this.D4.get(t)||null}Y4(){for(const t of this.E4)t.n3()}J4(){for(const t of this.E4)t.N1()}Xj(t,s,i){if(this.i5(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=i>=2?s:s.cV(),n=Ym.Hn(Ym.jQ,this,e,{name:t,EQ:Math.floor(1e15*Math.random()),OQ:!0});this.n5(n,s,i),this.l$().VB(),this.T1()}Zj(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.r5(t),this.n5(t,s,i),this.l$().VB(),this.T1())}tV(t){if(this.r5(t)){const s=this.Bc.aN();s.cj(!0),t.zn(),s.cj(!1),this.l$().VB(),this.T1()}}iV(){const t=new Set;for(const s of this.zj())s.P1()&&!s.A1()&&t.add(s);if(0===t.size)return;const s=this.Bc.aN();s.cj(!0);for(const s of t)this.r5(s),s.zn();s.cj(!1),this.l$().VB(),this.T1()}n5(t,s,i){if(i>=2)if(s){if(s===t||s.C2(t))throw new Error(`cannot move layer '${t.Ac()}' to sub-layer of itself`);s.w2(t,2===i),t.m2(s)}else 2===i?this.R4.push(t):this.R4.unshift(t),t.m2(null);else{const e=s.cV();if(e){if(s.C2(t))throw new Error(`cannot move layer '${t.Ac()}' to sub-layer of itself`);e.S2(t,s,0===i),t.m2(e)}else{let e=this.R4.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");0===i&&++e,this.R4.splice(e,0,t),t.m2(null)}}}r5(t){const s=t.cV();if(s)return s.v2(t),!0;if(this.R4.length>1){const s=this.R4.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.R4.splice(s,1),!0}return!1}V4(){this.E4=[...this.zj()],this.O4.clear(),this.D4.clear();for(let t=0,s=this.E4.length;t<s;++t){const s=this.E4[t];s.M1(t),this.O4.set(s.Ac().toLowerCase(),s),this.D4.set(s.G1(),s)}}h5(){let t=0;for(const s of this.R4){for(const i of s.gV())i.C1(t);s.xV()&&t++}}o5(){return this.R4.at(-1).fY()+1}async T1(){this.V4(),this.h5(),this.F4=this.o5()}a5(){return this.F4}l5(){this.F4=-1}E2(t){const s=[];for(const i of this.R4){const e=i.fY();if(e===t)s.push(i);else if(e>t)break}return s}I2(){return{scrollX:this.kj(),scrollY:this.Nj(),scale:this.Ej(),angle:this.Dj(),vpX:this.X4(),vpY:this.K4()}}_2(t){this.Fj(t.scrollX),this.Lj(t.scrollY),this.Rj(t.scale),this.Oj(t.angle),this.nV(t.vpX,t.vpY)}u5(){let t=this.R4.filter(t=>t.M2())[0];for(;t;){if(!t.zV())return sg.Lo(t.KV()),sg.ko(1),sg;if(t.U2())return sg.Po(0,0,0,0),sg;t=t.pV().filter(t=>t.M2())[0]}return sg.Po(0,0,0,0),sg}s1(){return this.W4}c5(){return[...this.S4]}Y0(t){if(t.CU())for(const s of t.d5().f5())this.S4.add(s);else this.S4.add(t)}p5(){return[...this.v4]}m5(t,s){if(t===this||!s)return Promise.resolve();t&&(Ym.mo(this.v4,t.v4),t.v4.clear());const i=[];for(const t of this.S4)this.v4.has(t)||(i.push(t.g5(s)),this.v4.add(t));return Promise.all(i)}async y5(t){if(t.v1())throw new Error("cannot load textures for family");const s=this.Bc.gM();if(!s||s.mR()||this.v4.has(t))return;this.v4.add(t);const i=t.g5(s);this.w5(i),await i,t.S5(),this.Bc.VB()}w5(t){this.b4.add(t),t.then(()=>this.b4.delete(t)).catch(()=>this.b4.delete(t))}v5(){return Promise.all([...this.b4])}b5(t){if(t.v1()||t.oj()>0)throw new Error("cannot unload textures");const s=this.Bc.gM();s&&this.v4.has(t)&&(this.v4.delete(t),t.M5(s))}C5(t,s){if(t!==this&&s)for(const s of this.v4)s.WQ()||t.S4.has(s)||(s.M5(),this.v4.delete(s))}T5(){this.v4.clear()}async x5(t){const s=this.Bc,i=this.l4,e=s.aN();this.y4&&(this.w4=e.I5(this.y4),this.w4._5()),i.G5(this),this.Ay=this.u4,this.Ry=this.c4,this.u0=s.qL()/2,this.c0=s.XL()/2,this.q3(),this.Y4(),this.J4(),this.h5(),await this.Bc.IB().P5(this.o5(),!0),this.A5(t),this.Bc.R5(!0),this.E5(),this.W4||this.O5(),this.D5(this.M4),this.D5(this.C4),this.F5(),i.k5(),s.mj(),this.Bc.R5(!1);const n=this.Bc.L5();if(await Promise.all(n),Ym.bh(n),!s.N5()){for(const t of this.M4)t.B5();for(const t of this.C4)t.W5(this.T4,this.x4);for(const[t,s]of Object.entries(this.N4)){const i=this.Bc.QY(parseInt(t,10));i&&!i.v1()&&i.i1()&&Ym.bh(s)}for(const t of this.M4)t.j5();for(const t of this.C4)t.j5();for(const t of this.M4)t.wz()||t.V5();for(const t of this.C4)t.wz()||t.V5()}Ym.bh(this.M4),Ym.bh(this.C4),this.T4.clear(),this.x4.clear(),await Promise.all([...this.S4].map(t=>t.U5(this.Bc.gM()))),t&&(s.Sf().dispatchEvent(new Ym.Event("beforefirstlayoutstart")),await s.H5(new Ym.Event("beforeprojectstart"))),await this.z5(new Ym.Event("beforeanylayoutstart")),s.Sf().dispatchEvent(new Ym.Event("beforelayoutstart")),await this.H5(new Ym.Event("beforelayoutstart")),s.N5()||await s.ZB(Ym.i$.s$.t$.J5,null,null),s.Sf().dispatchEvent(new Ym.Event("afterlayoutstart")),await this.H5(new Ym.Event("afterlayoutstart")),await this.z5(new Ym.Event("afteranylayoutstart")),t&&(s.Sf().dispatchEvent(new Ym.Event("afterfirstlayoutstart")),await s.H5(new Ym.Event("afterprojectstart"))),e.q5(i),await this.v5(),this.W4=!1}A5(t){for(const t of this.Bc.S1())if(!t.v1()&&t.bW())for(const s of t.ej()){const t=s.kB(),i=t.LB(),e=Ym.Kn(i.CL(),0,this.E4.length-1),n=this.E4[e];t.WB(n,!0),n.h1(s)}if(!t)for(const t of this.E4)t.f1(!1)}E5(){for(const t of this.E4)t.t1(this.M4),t.m1()}O5(){let t=!1;for(const[s,i]of Object.entries(this.N4)){const e=this.Bc.QY(parseInt(s,10));if(e&&!e.v1()&&e.i1())for(const s of i){let i=null;if(e.bW()&&(i=s.hasOwnProperty("instJson")?this.e5(s.instJson.w.l):this.e5(s.w.l),!i))continue;const n=this.Bc.e1(e,i,!1,0,0,!0);s.hasOwnProperty("instJson")?n.lC(s.instJson):n.lC(s),t=!0,this.C4.push(n),s.hasOwnProperty("instJson")&&(this.T4.set(n,s),this.x4.set(s.index,n))}}for(const t of this.E4)t.f1(!0),t.jB();t&&(this.Bc.mj(),this.Bc.Y5())}D5(t){for(const s of t){if(!s.CU())continue;const i=s.kB(),e=s._U();for(const n of s.fU().d5().Tj()){if(n===s.fU())continue;const r=n.ej();if(r.length>e)s.X5(r[e]);else{let e;e=i?this.Bc.e1(n,i.LB(),!0,i.YM(),i.ZM(),!0):this.Bc.e1(n,null,!0,0,0,!0),this.Bc.mj(),n.K5(),s.X5(e),t.push(e)}}}}F5(){for(const t of this.I4)this.Bc.q0(t[1]).CU()||this.Bc.e1(t,null,!0)}Z5(){const t=[],s=this.I4;let i=0;for(let e=0,n=s.length;e<n;++e){const n=s[e],r=this.Bc.q0(n[1]);r.WQ()?r.CU()&&r.d5().Q5()||t.push(this.Bc.e1(n,null,!0)):(s[i]=n,++i)}Ym.Sh(s,i),this.Bc.mj(),this.D5(t)}w1(t,s,i,e,n,r,h){if(i)return i.w1(t,s,n,r,e,h);{const i=[];for(const o of this.E4)i.push(o.w1(t,s,n,r,e,h));return i.flat()}}async t8(){const t=this.l4;this.Bc.N5()||(await this.z5(new Ym.Event("beforeanylayoutend")),await this.H5(new Ym.Event("beforelayoutend")),await this.Bc.ZB(Ym.i$.s$.t$.s8,null,null),await this.H5(new Ym.Event("afterlayoutend")),await this.z5(new Ym.Event("afteranylayoutend"))),t.i8(!0),this.Bc.aN().e8(),this.W4||this.n8();for(const t of this.E4)t.g1();for(const t of this.Bc.S1())if(!(t.WQ()||t.bW()||t.zW().SW()||t.v1())){for(const s of t.ej())this.Bc.wU(s);this.Bc.mj()}t.i8(!1),t.cB()===this&&t.G5(null)}r8(t,s){const i=t.fU().G1().toString();this.N4.hasOwnProperty(i)||(this.N4[i]=[]);const e=this.N4[i],n={index:s,instJson:t.aC(),sceneGraphJson:{children:[]}};e.push(n),this.B4.set(t,n)}h8(t){const s=this.B4.get(t);for(const i of t.o8()){const t=this.B4.get(i);t&&s.sceneGraphJson.children.push({index:t.index,flags:Ym.l8.a8(i.kB())})}}n8(){this.B4.clear();let t=0;for(const s of this.E4){s.P2();for(const i of s.$B()){const s=i.fU();!s.WQ()&&s.i1()&&(this.r8(i,t),t++)}}for(const t of this.E4)for(const s of t.$B()){const t=s.fU();!t.WQ()&&t.i1()&&this.h8(s)}this.B4.clear()}u8(){this.N4={},this.W4=!0}hD(){return this.o0}U2(){const t=this.Bc,s=t.gM().jb();return"low"===t.IB().v3()||s&&t.S3()||this.G0.H2()||s&&t.l2()}c8(t){const s=this.Bc.IB();if(this.U2()){t.fD(null),t.QO(0,0,0,0);const i={eT:this.Bc.KL(),VT:t.sv()||this.Bc.S3()||this.G0.H2(),w3:!!t.sv()&&this.Bc.S3()};"low"===s.v3()&&(i.width=s.o3(),i.height=s.a3()),this.o0=this.Bc.b3(i)}else this.o0=null}f8(t){this.Bc.d8(t)&&(t.iD(!1),t.fD(null),t.uv(),t.dD(this.o0))}p8(t){this.U2()&&(t.iD(!1),this.m8(t,this.o0))}g8(t){t.fD(this.o0),t.Au(this.u5()),this.Bc.l2()&&t.sD();const s=this.E2(0);this.M3(t,this.o0,s,!0),t.sv()&&t.g3(0,1),this.p8(t),this.o0=null}y8(t,s){let i=null;this.Bc.d8(t)&&(i=this.o0),t.fD(i),t.QO(0,0,0,0),this.Bc.l2()&&t.sD();const e=this.E2(s);this.M3(t,i,e,!0),this.f8(t),t.Fb(),this.Bc.IB().w8(s)}M3(t,s,i,e){const n=i.filter(t=>t.M2());for(let i=0,r=n.length;i<r;){const h=n[i];if(h.f2()&&!h.z2()){ng.push(h);for(let t=i+1;t<r;++t){const s=n[t];if(!s.f2()||s.z2())break;ng.push(n[t])}if(ng.length>=2||1===ng.length&&ng[0].b2()){this.S8(t,s,ng),i+=ng.length,Ym.bh(ng);continue}Ym.bh(ng)}h.HC(t,s,e&&0===i),++i}}m8(t,s){const i=this.G0.O1(),e=this.Bc;0===i.length?(t.fD(null),t.uv(),t.dD(s),t.mD(s),e.E0(s)):(tg.set(0,0,e.Z1(),e.Q1()),this.ML().fk(t,null,{pk:this,gk:3,devicePixelRatio:this.Bc.U3(),yk:this.Bc.z3()*this.Ej(),wk:this.Dj(),Vk:tg,Uk:null,tF:!0}))}S8(t,s,i){const e=i[0],n=e.c3(t);e.m3(t),i[0].zV()||(sg.Lo(i[0].KV()),sg.ko(1),t.Au(sg)),t.iD(!0);const r=rg,h=hg,o=og;for(const s of i)s.P2(),s.h2(r),s.y3(t,"beforedraw");for(let i=0,e=r.length;i<e;){const n=r[i],a=n.kB(),l=a.LB();if(!a.vV()||!a.R3(l.A3())){++i;continue}(!n.E3()||a.O3()>0)&&o.push(n);const u=n.kB().kH();h.push(n);let c=i+1;for(;c<e;++c){const t=r[c],s=t.kB();if(s.vV()&&s.R3(s.LB().A3())){if(s.kH()!==u)break;t.E3()?(s.O3()>0&&o.push(t),h.push(t)):o.push(t)}}if(1!==h.length||h[0].D3()){this.v8(t,s,h);for(let i=0,e=o.length;i<e;++i){const e=o[i],n=e.kB(),r=n.LB();n.L3(!0),qm(r,t),r.P3(e,n,t,s),n.L3(!1)}}else{qm(l,t),l.P3(n,a,t,s);for(let i=0,e=o.length;i<e;++i){const e=o[i];if(e===n)continue;const r=e.kB(),h=r.LB();qm(h,t),h.P3(e,r,t,s)}}i=c,Ym.bh(h),Ym.bh(o)}for(const s of i)s.y3(t,"afterdraw");n&&t.CD(n),Ym.bh(r),ag=null}v8(t,s,i){t.yD();for(let s=0,e=i.length;s<e;++s){const e=i[s],n=e.kB(),r=n.LB();n.N3(!0),qm(r,t),r.B3(e,n,t)}t.wD();for(let e=0,n=i.length;e<n;++e){const n=i[e],r=n.kB(),h=r.LB();qm(h,t),h.P3(n,r,t,s),r.N3(!1)}t.vD()}e4(){const t={sx:this.kj(),sy:this.Nj(),s:this.Ej(),a:this.Dj(),w:this.Vg(),h:this.Qg(),ortho:this.lV(),vpX:this.X4(),vpY:this.K4(),fv:this.W4,persist:this.N4,fx:this.G0.aC(),layers:{},dynamicLayers:[]};for(const s of this.E4)if(s.P1()){const i=s.cV();t.dynamicLayers.push({sid:s.G1(),name:s.Ac(),parentSid:i?i.G1():null,siblingIndex:s.I1(),data:s.e4()})}else t.layers[s.G1().toString()]=s.e4();return t}n4(t){this.u0=t.sx,this.c0=t.sy,this.a0=t.s,this.l0=t.a,this.Ay=t.w,this.Ry=t.h,this.d4=!!t.ortho,t.hasOwnProperty("vpX")&&(this.m4=t.vpX),t.hasOwnProperty("vpY")&&(this.g4=t.vpY),this.W4=!!t.fv,this.N4=t.persist,this.G0.lC(t.fx),this.D0=!0;for(const[s,i]of Object.entries(t.layers)){const t=parseInt(s,10),e=this.e5(t);e&&e.n4(i)}if(t.hasOwnProperty("dynamicLayers")){this.iV(),this.Bc.mj();const s=new Map,i=t.dynamicLayers;for(let t=i.length-1;t>=0;--t){const e=i[t],n=e.sid,r=e.name,h=e.parentSid,o=e.siblingIndex,a=e.data;if(this.V4(),this.i5(r)||this.e5(n))continue;let l,u;if(null===h)l=null,u=this.R4;else{if(l=this.e5(h),!l)continue;u=l.pV()}const c=Ym.Hn(Ym.jQ,this,l,{name:r,EQ:n,OQ:!0});u.push(c);let f=s.get(u);f||(f=[],s.set(u,f)),f.push({MH:c,b8:o}),c.n4(a)}for(const[t,i]of s){i.sort((t,s)=>t.b8-s.b8);for(const s of i){const i=s.MH,e=s.b8;let n=t.indexOf(i);t.splice(n,1),t.splice(e,0,i)}}}this.T1(),this.Y4(),this.J4()}fB(){return this.j4}nN(){return this.j0}PZ(t){t.layout=this.fB();const s=this.Bc,i=s.iH()&&!s.aN().dj();i&&Xm.M8(),this.j0.dispatchEvent(t),i&&Xm.C8()}H5(t){return t.layout=this.fB(),this.j0._f(t)}z5(t){return t.layout=this.fB(),this.Bc.H5(t)}T8(){this.x8(this.R4)}x8(t,s=0){const i=t.slice(0);i.reverse();for(const t of i)console.log(`${"\t".repeat(s)}- ${t.Ac()}`),this.x8(t.pV(),s+1)}}}{const lg=self._s;lg.I8=class extends lg.Vn{#s;#i=[];#f=new Map;#a=new Map;#e=null;#t=[];#r=null;#h=0;#d=null;constructor(t){super(),this.#s=t}zn(){this.#s=null,this.#e=null,this.#r=null,this.#d=null,lg.bh(this.#i),this.#f.clear(),this.#a.clear(),lg.bh(this.#t)}Ux(t){const s=lg.Hn(lg.a4,this,this.#i.length,t);this.#i.push(s),this.#f.set(s.Ac().toLowerCase(),s),this.#a.set(s.G1(),s)}l$(){return this.#s}_8(t){this.#r=t}G8(){if(this.#r)return this.#r;if(this.#i.length)return this.#i[0];throw new Error("no first layout")}P8(t){return this.#f.get(t.toLowerCase())||null}A8(t){return this.#a.get(t)||null}E8(t){return t=lg.Kn(Math.floor(t),0,this.#i.length-1),this.#i[t]}mB(t){return"number"==typeof t?this.E8(t):this.P8(t.toString())}yB(){return this.#i}G5(t){this.#e=t}cB(){return this.#e}O8(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}D8(t){const s=this.#t.indexOf(t);if(-1===s)throw new Error("layout not running");this.#t.splice(s,1)}*F8(){this.#e&&(yield this.#e),this.#t.length&&(yield*this.#t)}k8(t){return this.#e===t||this.#t.includes(t)}i8(t){if(t)this.#h++;else{if(this.#h<=0)throw new Error("already unset");this.#h--}}pj(){return this.#h>0}vB(t){this.#d=t}k5(){this.#d=null}SB(){return!!this.#d}L8(){return this.#d}N8(){const t=this.cB();t&&t.Y4()}B8(){const t=this.cB();t&&t.J4()}}}{const ug=self._s,cg=new RegExp("<(.+?)>","g");ug.W8=class extends ug.Vn{constructor(t){super(),this.Bc=t,this.j8=ug.Hn(ug.V8),this.U8=null,this.H8=[],this.z8=new Map,this.J8=new Map,this.q8=new Map,this.Y8=[],this.X8=[],this.K8=[],this.Z8=!1,this.Q8=!1,this.t6=!1,this.s6=()=>this.i6(),this.e6=()=>this.n6(),this.r6=()=>this.h6(),this.o6=()=>this.a6(),this.l6=t=>this.u6(t.dJ),this.c6=t=>this.f6(),this.d6=t=>this.p6(),this.m6=t=>this.g6(),this.y6=[],this.w6=0}zn(){this.S6(),this.s6=null,this.e6=null,this.r6=null,this.o6=null,this.l6=null,this.d6=null;for(const t of this.H8)t.nq(),t.zn();ug.bh(this.H8),this.H8=null,this.j8.zn(),this.j8=null,ug.bh(this.Y8),this.Y8=null,ug.bh(this.X8),this.X8=null,ug.bh(this.K8),this.K8=null,this.z8.clear(),this.z8=null,this.J8.clear(),this.J8=null,this.q8.clear(),this.q8=null,ug.bh(this.y6),this.y6=null,this.Bc=null}v6(){const t=this.Bc.Sf();t.addEventListener("pretick",this.s6),t.addEventListener("tick2",this.e6),t.addEventListener("beforelayoutchange",this.r6),t.addEventListener("layoutchange",this.o6),t.addEventListener("instancedestroy",this.l6),t.addEventListener("beforeload",this.c6),t.addEventListener("afterload",this.d6),t.addEventListener("afterlayoutstart",this.m6)}S6(){const t=this.Bc.Sf();t.removeEventListener("pretick",this.s6),t.removeEventListener("tick2",this.e6),t.removeEventListener("beforelayoutchange",this.r6),t.removeEventListener("layoutchange",this.o6),t.removeEventListener("instancedestroy",this.l6),t.removeEventListener("beforeload",this.c6),t.removeEventListener("afterload",this.d6),t.removeEventListener("afterlayoutstart",this.m6)}Ux(t){this.j8.$u(t);const s=ug.M6.b6(t,this);this.$u(s),this.C6(s),this.q8.set(s.Ac(),0)}T6(t){const s=this.x6(),i=t.PU(),e=s.zs(i),n=ug.M6.T6(`${i}:${this.q8.get(i)}`,e,this);return this.I6(i),this.$u(n),n}I6(t){this.q8.set(t,this.q8.get(t)+1)}_6(){for(const t of this.H8){if(t.G6())continue;const s=t.PU();this.I6(s)}}P6(){for(const t of this.q8.keys())this.q8.set(t,0)}$u(t){this.H8.push(t),this.z8.set(t.Ac().toLowerCase(),t)}Zf(t){t.A6(),t.G6()||(ug._h(this.H8,t),ug._h(this.Y8,t),ug._h(this.X8,t),ug._h(this.K8,t),this.z8.delete(t.Ac().toLowerCase()),this.R6(t),t.iq()||t.zn())}qU(t){this.Bc.qU(t,this.U8,null)}l$(){return this.Bc}x6(){return this.j8}E6(t){this.U8=t}O6(){return this.U8}*D6(){for(const t of this.H8)yield t}*F6(){for(const t of this.X8)yield t}k6(t,s){this.J8.has(t)||this.J8.set(t,new Set),this.J8.get(t).add(s)}C6(t){for(const s of t.L6())this.k6(s,t)}R6(t){for(const[s,i]of this.J8.entries())i.has(t)&&(i.delete(t),0===i.size&&this.J8.delete(s))}N6(t){if(this.J8.has(t))return this.J8.get(t)}B6(t,s){if(s)for(const i of this.H8)if(s.every(t=>i.W6(t.dJ,t.trackId))&&i.Ac().includes(t.Ac()))return i}j6(t){return this.z8.get(t.toLowerCase())||null}V6(t){for(const s of this.Y8)if(s.Ac()===t)return s;for(const s of this.X8)if(s.Ac()===t)return s;return null}*U6(t){if(cg.test(t)){let s;cg.lastIndex=0;const i=new Set;do{if(s=cg.exec(t),s){const t=s[1].split(",");for(const s of t)i.add(s)}}while(s);for(const t of i.values()){const s=this.j6(t);s&&(yield s)}i.clear()}else{const s=this.j6(t);s&&(yield s)}}*H6(t){for(const s of this.H8)s.hq(t)&&(yield s)}z6(t){this.Y8.includes(t)||this.Y8.push(t),this.J6()}q6(t){ug._h(this.X8,t),this.Y6()}X6(t){this.X8.includes(t)?(t.K6(!0),t.Z6(!1),t.Q6(!1)):(t.K6(!1),t.Z6(!0),t.Q6(!1),this.Y8.includes(t)||this.Y8.push(t)),this.J6()}t7(t){t.K6(!1),t.Z6(!1),t.s7(),ug._h(this.Y8,t),this.Y6()}i7(t){t.K6(!1),t.Z6(!1),this.X8.includes(t)&&(t.Q6(!0),this.K8.push(t),ug._h(this.X8,t)),this.Y8.includes(t)&&t.Q6(!0)}e7(t){t.K6(!1),t.Z6(!1),t.Q6(!1),t.mq(1),ug._h(this.X8,t)}n7(t){this.i7(t),t.s7()}i6(){const t=this.l$();if(t.N5())return;if(!this.Z8)return;if(this.Q8)return;let s=0;for(t.iH()&&(s=performance.now()),this.t6=!0;this.Y8.length;){const t=this.Y8.pop();t.r7()?(t.h7(),this.K8.push(t)):(t.o7(),this.X8.push(t)),0!==t.a7()&&(this.w6=1)}const i=this.Bc.l7(),e=this.Bc.u7(),n=this.Bc.WN();for(let t=this.X8.length-1;t>=0;t--){const s=this.X8[t];s&&s.c7(i,n,e)}this.t6=!1,t.iH()&&globalThis.eH.f7(performance.now()-s),0!==this.w6&&t.VB()}n6(){const t=this.l$();if(t.N5())return;if(!this.Z8)return;if(this.Q8)return;let s,i=0;t.iH()&&(i=performance.now());for(let t=0,i=this.K8.length;t<i;t++){const i=this.K8[t];s||(s=new Set),i.A6(),this.d7(i),s.add(i)}if(s){ug.Ah(this.K8,s),this.w6=0;for(let t=0,s=this.X8.length;t<s;t++)if(0!==this.X8[t].a7()){this.w6=1;break}}this.Y6(),t.iH()&&globalThis.eH.f7(performance.now()-i)}d7(t){t.iq()||t.p7()&&t.m7()&&t.g7()&&t.y7()}J6(){this.Z8||(this.Z8=!0)}Y6(){this.K8.length||this.X8.length||this.Y8.length||this.t6||(this.Z8=!1)}h6(){for(this.Q8=!0;this.Y8.length;)this.t7(this.Y8.pop());const t=new Set;for(const s of this.X8)s.h6()&&(s.A6(),t.add(s));ug.Ah(this.X8,t),t.clear();for(const s of this.K8)s.h6()&&(s.A6(),t.add(s));ug.Ah(this.K8,t),this.Y6();for(const t of this.H8)t.w7()}a6(){this.Q8=!1}u6(t){const s=t.fU(),i=this.N6(s);if(i)if(this.Bc.N5())this.y6.push(t);else for(const t of i)t.G6()||(t.iq()?this.Zf(t):t.p7()||(this.d7(t),this.Zf(t)))}f6(){for(const t of this.Y8.map(t=>t))this.d7(t),this.Zf(t);for(const t of this.X8.map(t=>t))this.d7(t),this.Zf(t)}p6(){for(const t of this.y6)this.u6(t);ug.bh(this.y6);for(const t of this.H8)t.p6()}g6(){const t=this.Bc.pB().cB();if(t)for(const s of this.H8){const i=s.S7();i&&t.Ac()===i&&this.X6(s)}}e4(){return{timelinesJson:this.v7(),scheduledTimelinesJson:this.b7(),playingTimelinesJson:this.M7(),markedForRemovalTimelinesJson:this.C7(),hasRuntimeListeners:this.Z8,changingLayout:this.Q8,isTickingTimelines:this.t6}}n4(t){t&&(this.P6(),this.T7(t.timelinesJson),this.x7(t.scheduledTimelinesJson),this.I7(t.playingTimelinesJson),this._7(t.markedForRemovalTimelinesJson),this.Z8=!t.hasRuntimeListeners,this.Q8=!!t.changingLayout,this.t6=!!t.isTickingTimelines,this._6(),this.J6(),this.Y6())}v7(){return this.H8.map(t=>t.e4())}T7(t){for(const s of t){let t=this.j6(s.name);if(t)t.n4(s);else{const i=this.G7(s);if(!i)continue;const e=this.j6(i);t=this.T6(e),t.n4(s)}t.P7()||this.Zf(t)}}G7(t){const s=t.name.split(":");return s&&2===s.length?s[0]:null}b7(){return this.A7(this.Y8)}x7(t){this.R7(t,this.Y8)}M7(){return this.A7(this.X8)}I7(t){this.R7(t,this.X8)}C7(){return this.A7(this.K8)}_7(t){this.R7(t,this.K8)}E7(t,s){if(!s)return!1;for(const i of s)if(i===t.Ac())return!0;return!1}A7(t){return t.map(t=>t.Ac())}R7(t,s){const i=new Set;for(const e of s)this.E7(e,t)||i.add(e);if(ug.Ah(s,i),t){const i=t=>s=>s.Ac()===t;for(const e of t){const t=this.j6(e);t&&(s.find(i(e))||s.push(t))}}}}}{const fg=self._s,dg=100,pg=.01,mg=25,gg=20,yg=5,wg=[0,0],Sg=[0,0],vg=[0,0],bg=[0,0,0,0,0],Mg=new Array(4),Cg=[{x:0,y:0,t:0,bt:0},{x:0,y:0,t:0,bt:0},{x:0,y:0,t:0,bt:0}],Tg={x:0,y:0,t:0,bt:0};fg.O7=class{constructor(t,s){this.D7=!1,this.F7=t,this.k7=[];let i=null;if(i=s?this.F7.L7(s):fg.$h(this.F7.N7()),!i)return;const e=i.Fq("offsetX"),n=i.Fq("offsetY");if(!e||!n)return;this.B7=e,this.W7=n;const r=e.j7(),h=n.j7();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const s=r[t],i=(s.V7(),s.U7()),e=h[t],n=(e.V7(),e.U7());i&&"cubic-bezier"===i.H7()&&n&&"cubic-bezier"===n.H7()?this.k7.push(fg.Hn(fg.z7,i,n,s,e,this.k7.length)):(i&&"line"===i.H7()&&n&&n.H7(),this.k7.push(fg.Hn(fg.J7,s,e,this.k7.length)))}this.D7=!0}zn(){for(const t of this.k7)t.zn();fg.bh(this.k7),this.k7=null,this.F7=null,this.B7=null,this.W7=null}q7(){return this.D7}Y7(){return this.k7}X7(t){const s="relative"===this.B7.K7()?t.YM():0,i="relative"===this.W7.K7()?t.ZM():0;for(const t of this.k7)t.X7(s,i)}Bw(t,s,i){let e=NaN,n=this.k7.length;for(let i=0;i<n;i++){const n=this.k7[i];if("cubic-bezier"===n.YI()){const i=n.Bw(t,s);(isNaN(e)||i[3]<e)&&(e=i[3],vg[0]=i[2],vg[1]=n.CL())}}return vg}Z7(t,s,i){const e=i.Q7;fg.te(e[0])||(e[0]=0),fg.te(e[1])||(e[1]=1);let n=NaN,r=this.k7.length;for(let i=0;i<r;i++){const r=this.k7[i];if("cubic-bezier"===r.YI()){const i=r.t9(t,s,e);(isNaN(n)||i[3]<n)&&(n=i[3],vg[0]=i[2],vg[1]=r.CL())}}return vg}s9(t,s){return this.k7[s].s9(t)}i9(t,s){return this.k7[s].i9(t)}},fg.z7=class{constructor(t,s,i,e,n){this.Rw=n;const r=t.e9("cubic-bezier"),h=i.e9("cubic-bezier"),o=s.e9("cubic-bezier"),a=e.e9("cubic-bezier");this.n9=t.r9(),this.h9=s.r9(),this.o9=t.r9()+r.a9(),this.l9=s.r9()+o.a9(),this.u9=i.r9()+h.c9(),this.f9=e.r9()+a.c9(),this.d9=i.r9(),this.p9=e.r9(),this.m9=0,this.g9=0,this.y9=0,this.w9=0,this.S9=0,this.v9=0,this.b9=0,this.M9=0,this.C9=0,this.T9=0,this.x9=0,this.I9=0,this._9=0,this.G9=0,this.P9=0,this.A9=0,this.R9=0,this.E9=0,this.O9=0,this.D9=0,this.F9=NaN,this.D7=!1,this.k9=100,this.L9=new Array(this.k9+1),this.L9[0]=0,this.N9=0,this.B9=[],this.W9=[];for(let t=0;t<100;t++)this.W9.push({x:0,y:0,t:0,bt:0});this.j9()}zn(){fg.bh(this.L9),this.L9=null,fg.bh(this.B9),this.B9=null,fg.bh(this.W9),this.W9=null}YI(){return"cubic-bezier"}CL(){return this.Rw}V9(){return Math.floor(this.N9/25)}U9(){return 1/this.V9()}X7(t,s){this.H9=t,this.z9=s,this.L9=new Array(this.k9+1),this.L9[0]=0,this.j9(),this.m9=this.n9+this.H9,this.g9=this.h9+this.z9,this.y9=this.o9+this.H9,this.w9=this.l9+this.z9,this.S9=this.u9+this.H9,this.v9=this.f9+this.z9,this.b9=this.d9+this.H9,this.M9=this.p9+this.z9,this.C9=3*(this.y9-this.m9),this.T9=3*(this.w9-this.g9),this.x9=3*(this.S9-this.y9),this.I9=3*(this.v9-this.w9),this._9=3*(this.b9-this.S9),this.G9=3*(this.M9-this.v9),this.P9=3*(this.y9-this.m9),this.A9=3*(this.m9+this.S9-2*this.y9),this.R9=this.b9-this.m9+3*(this.y9-this.S9),this.E9=3*(this.w9-this.g9),this.O9=3*(this.g9+this.v9-2*this.w9),this.D9=this.M9-this.g9+3*(this.w9-this.v9)}Map(t){if(!this.D7)return NaN;const s=this.J9(t);return Sg[0]=this.q9(s),Sg[1]=this.Y9(s),Sg}Bw(t,s){const i=this.X9(100),e=this.K9(t,s,i),n=this.Z9(t,s,i,e);return bg[0]=n.x,bg[1]=n.y,bg[2]=n.t,bg[3]=n.bt,bg}t9(t,s,i){const e=this.X9(100),n=this.Q9(t,s,e,i),r=this.Z9(t,s,e,n);return bg[0]=r.x,bg[1]=r.y,bg[2]=r.t,bg[3]=r.bt,bg}s9(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.C9+e*this.x9+n*this._9,h=i*this.T9+e*this.I9+n*this.G9,o=fg.sr(r,h);return wg[0]=r/o,wg[1]=h/o,wg}i9(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.C9+e*this.x9+n*this._9,h=i*this.T9+e*this.I9+n*this.G9;return Math.atan2(h,r)}J9(t){if(!this.D7)return;let s=t*this.L9[this.k9],i=0,e=this.k9,n=0;for(;i<e;)n=i+((e-i)/2|0),this.L9[n]<s?i=n+1:e=n;this.L9[n]>s&&n--;const r=this.L9[n];return r===s?n/this.k9:(n+(s-r)/(this.L9[n+1]-r))/this.k9}q9(t){return this.D7?self.Vu.hc("cubicbezier")(t,this.n9+this.H9,this.o9+this.H9,this.u9+this.H9,this.d9+this.H9):NaN}Y9(t){return this.D7?self.Vu.hc("cubicbezier")(t,this.h9+this.z9,this.l9+this.z9,this.f9+this.z9,this.p9+this.z9):NaN}X9(t){if(t=t||100,this.B9.length>=t)return this.B9;this.B9=new Array(t),t++;for(let s=0;s<t-1;s++){const i=s/(t-1),e=i**2,n=i**3,r=this.P9*i,h=this.A9*e,o=this.R9*n,a=this.E9*i,l=this.O9*e,u=this.D9*n,c=this.m9+r+h+o,f=this.g9+a+l+u;this.W9[s].x=c,this.W9[s].y=f,this.W9[s].t=i,this.W9[s].bt=0,this.B9[s]=this.W9[s]}return this.B9}K9(t,s,i,e=null,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.F9))for(let e=0;e<100;e++){const h=i[e],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<n&&(n=h.bt,r=e)}else{for(let e=this.F9;e<this.F9+5&&!(e>=i.length);e++){const h=i[e],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<n&&(n=h.bt,r=e)}for(let e=this.F9;e>this.F9-5&&!(e<0);e--){const h=i[e],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<n&&(n=h.bt,r=e)}}return this.F9=r,r}Q9(t,s,i,e,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.F9))for(let h=0;h<100;h++){const o=i[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.bt<n&&(n=o.bt,r=h)}else{for(let h=this.F9;h<this.F9+5&&!(h>=i.length);h++){const o=i[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.bt<n&&(n=o.bt,r=h)}for(let h=this.F9;h>this.F9-5&&!(h<0);h--){const o=i[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.bt<n&&(n=o.bt,r=h)}}return this.F9=r,r}Z9(t,s,i,e){let n=i[e],r=1,h=Number.MAX_SAFE_INTEGER;t:do{const r=i.length;let o=0===e?0:e-1,a=e===r-1?r-1:e+1,l=i[o].t,u=(i[a].t-l)/4;if(u<.001)break;Mg[0]=i[o];for(let i=1;i<=2;i++){const r=l+i*u,o=r**2,a=r**3,c=this.P9*r,f=this.A9*o,d=this.R9*a,p=this.E9*r,m=this.O9*o,g=this.D9*a,y=this.m9+c+f+d,w=this.g9+p+m+g,S=y-t,v=w-s,b=S*S+v*v;if(b<h){h=b,e=i,Tg.x=y,Tg.y=w,Tg.t=r,Tg.bt=b,n=Tg;break t}const M=Cg[i-1];M.x=y,M.y=w,M.t=r,M.bt=b,Mg[i]=M}Mg[3]=i[a],i=Mg}while(r++<20);return n}j9(){this.D7=!0;let t=this.q9(0),s=this.Y9(0),i=0;for(let e=1;e<=this.k9;e++){const n=this.q9(.01*e),r=this.Y9(.01*e),h=t-n,o=s-r;i+=fg.sr(h,o),this.L9[e]=i,t=n,s=r}this.N9=i}},fg.J7=class{constructor(t,s,i){this.Rw=i,this.ttt=t.r9(),this.stt=s.r9(),this.H9=0,this.z9=0}zn(){}YI(){return"line"}CL(){return this.Rw}X7(t,s){this.H9=t,this.z9=s}YM(){return this.ttt+this.H9}ZM(){return this.stt+this.z9}}}{const xg=self._s,Ig=0,_g=1;xg.M6=class extends xg.Vn{constructor(t,s,i){super(),this.Bc=i.l$(),this.itt=i,this.ett=s,this.Yn=t,this.ntt=[],this.htt=0,this.ott=null,this.att=0,this.ltt(),this.utt=null,this.ctt=null,this.ftt=0,this.dtt=0,this.ptt=1,this.mtt=0,this.gtt=-1,this.ytt=1,this.wtt=!1,this.Stt=!1,this.vtt=!1,this.btt=!0,this.Mtt=!1,this.Ctt=!1,this.Ttt=-1,this.xtt=!1,this.Itt=!1,this._tt=!1,this.Gtt=!1,this.Ptt=NaN,this.Att=[""],this.Rtt="",this.Ett=!1,this.w6=0,this.Ott=0,this.Dtt=null,this.Ftt=null}static b6(t,s){const i=s.x6(),e=i.ktt(),n=i.zs(t[e]),r=xg.Hn(xg.M6,t[e],n,s);return r.Ltt(!0),r}static T6(t,s,i){return xg.Hn(xg.M6,t,s,i)}zn(){if(this.iq())return;const t=this.Bc.Sf();this.itt.t7(this),this.itt.n7(this);for(const t of this.ntt)t.zn();xg.bh(this.ntt),this.ntt=null,this.Bc=null,this.itt=null,this.ett=null,this.Mtt=!0,this.utt=null,this.ctt=null,this.Ntt(t)}Ntt(t){const s=xg.Hn(xg.Event,"timelinestatereleased");s.Btt=this,t.dispatchEvent(s)}YI(){return 0}ltt(){for(const t of this.ett.Wtt().$tt())this.htt=this.ntt.push(xg.jtt.Ux(this,t))}Vtt(){return this.itt}l$(){return this.Bc}N7(){return this.ntt}Utt(t,s,i,e){if(!this.Ott)return;let n;for(let r=0;r<this.ntt.length;r++){let h=this.ntt[r];if(t!==h.Pq())continue;const o=h.Fq(i);o&&s.constructor===o.Htt().constructor&&o.K7()===e.K7()&&(n||(n=[]),n.push(o))}return n}P7(){return!!this.ntt.length}L7(t){for(const s of this.ntt)if(xg.Ze(s.Oq(),t))return s;return null}ztt(t){for(const s of this.ntt)if(!s.Jtt()&&xg.Ze(s.Ac(),t))return s;return null}nX(t){this.Yn=t}Ac(){return this.Yn}qtt(){return this.ett}PU(){return this.ett.Ac()}lq(){return this.ett.lq()}aq(t){this.ett.aq(t)}Ytt(){return this.ett.Ytt()}Xtt(t){this.ett.Xtt(t)}Ktt(){return this.ett.Ktt()}Ztt(t){this.ett.Ztt(t)}K7(){return this.ett.K7()}Qtt(t){this.ett.K7(t)}Gq(t){for(const s of this.N7())s.Gq(t)}cq(){return this.ett.cq()}uq(t){return this.ett.uq(t)}pq(){return this.ett.pq()}fq(t){return this.ett.fq(t)}GJ(){return this.ett.GJ()}tst(t){return this.ett.tst(t)}mq(t){return this.ptt=t}gq(){return this.ptt}S7(){return this.ett.S7()}sst(){return this.ett.sst()}ist(){return this.ett.ist()}est(){return this.mtt}nst(){return!this.IsPlaying()||this.ptt>0}wq(){return this.utt||(this.utt=new Promise(t=>{this.ctt=t})),this.utt}s7(){this.utt&&(this.ctt(),this.utt=null,this.ctt=null)}rst(t){this.Att=xg.M6.hst(t),this.Ett=!0}yq(){return this.Att}ost(){return this.Ett&&(this.Rtt=this.Att.join(" ")),this.Ett=!1,this.Rtt}hq(t){if(!this.Att)return!1;if(!this.Att.length)return!1;const s=xg.M6.hst(t);return!!s&&!!s.length&&s.every(xg.M6.ast,this)}lst(){xg.i$.ust&&this.constructor===xg.M6&&(xg.i$.ust.t$.cst(this),this.itt.qU(xg.i$.ust.t$.fst),this.itt.qU(xg.i$.ust.t$.dst),this.itt.qU(xg.i$.ust.t$.pst),this.itt.qU(xg.i$.ust.t$.mst),xg.i$.ust.t$.gst())}yst(){this.Ttt=this.Bc.LN()}y7(){this._tt||(this._tt=!0,xg.i$.ust&&this.constructor===xg.M6&&(xg.i$.ust.t$.cst(this),this.itt.qU(xg.i$.ust.t$.wst),this.itt.qU(xg.i$.ust.t$.Sst),this.itt.qU(xg.i$.ust.t$.vst),this.itt.qU(xg.i$.ust.t$.bst),xg.i$.ust.t$.gst()))}K6(t){this.wtt=t}Mst(){return this.Ttt===this.Bc.LN()}IsPlaying(t=!1){return!!this.Mst()||!(!this.Cst()||t)||this.wtt}Tst(){return this.IsPlaying(!0)}bq(){return this.xst()}xst(){return!(this.iq()||this.Cst()||this.Tst()||this.m7())}Z6(t){this.Stt=t}Cst(){return this.Stt}Ist(t){this.btt=t;const s=this.cq(),i=this.pq();if(s||i){if(s&&!i);else if(!s&&i){const t=this.YD();1===this.mtt&&(t<=0||t>=this.lq())&&(this.btt=!0)}}else{const t=this.YD();(t<=0||t>=this.lq())&&(this.btt=!0)}}m7(){return this.btt}iq(){return this.Mtt}Q6(t){this.Ctt=t}r7(){return this.Ctt}_st(t){this.xtt=t}Gst(){return this.xtt}Ltt(t){this.Itt=!!t}G6(){return this.Itt}g7(){return this.vtt}YD(){return this.ftt}oq(t){const s=this.YD();this.Pst(t),this.Ist(!1),this.m7()||this._st(!0),(this.Tst()||this.Cst()||!this.vtt)&&(this.Tst()||this.Cst()||this.vtt?this.Tst()?this.nq():this.Cst()&&(this.itt.t7(this),this.Ast()):this.Ast()),this.Rst(),this.Est(this.YD(),!1,!0,!0,s),this.Ost(),this.w6&&this.l$().VB(),this.Dst()}Pst(t){xg.te(t)||(t=this.lq()),t<0?this.ftt=0:t>=this.lq()?this.ftt=this.lq():this.ftt=t}Fst(t){xg.te(t)||(t=this.lq()),t<0?this.ftt=0:t>=this.lq()?this.ftt=this.lq():this.ftt=t;for(const t of this.ntt)t.kst()}Dst(){xg.i$.ust&&this.constructor===xg.M6&&(xg.i$.ust.t$.cst(this),this.itt.qU(xg.i$.ust.t$.Lst),this.itt.qU(xg.i$.ust.t$.Nst),this.itt.qU(xg.i$.ust.t$.Bst),xg.i$.ust.t$.gst())}$st(){if(this.cq())return!0;if(this.pq()&&1===this.mtt){if(this.nst()){if(this.YD()>=this.lq())return!1}else if(this.YD()<=0)return!1}else if(!this.cq()&&!this.pq())if(this.nst()){if(this.YD()>=this.lq())return!1}else if(this.YD()<=0)return!1;return!0}rq(){this.iq()||this.$st()&&this.Play(!0)}Play(t=!1){return!this.iq()&&!this.Cst()&&(this.Tst()&&this.Mst()?this.Wst():!this.Tst()&&!!(this.m7()||t||this.Gst())&&this.jst())}Wst(){return this._st(!1),this.itt.q6(this),this.itt.X6(this),this.wq(),!0}jst(){return this._st(!1),this.itt.X6(this),this.wq(),!0}nq(t=!1){this.iq()||(this.Ist(t),this.itt.i7(this),this.m7()&&this.s7())}$f(t=!0,s=!1){if(this.iq())return;if(!this.Tst()&&this.Cst())return this.itt.t7(this);if(this.m7())return;this.nq(!0),this.nst()?this.Pst(0):this.Pst(this.lq());const i=this.YD();this.Rst(),s?this.Vst(i):this.Est(i,!1,!1,!0),t&&this.Dst(),this.Ost(),this.w6&&t&&this.l$().VB()}Ust(){this.$f(!1,!0)}Vst(t){this.Est(t,!1,!1,!0,NaN,!1,!0)}h6(){return!!this.iq()||!(!this.l$().N5()&&this.Hst())&&(this.itt.e7(this),this.l$().N5()||this.Ust(),!0)}Ast(){this.o7(!0)}h7(){this.o7(!1,!0),this.K6(!1),this.Z6(!1)}o7(t=!1,s=!1){if(!this.r7()||s)if(t){this._tt=!1,this.vtt=!0,this.Gtt=!0,this.Rst();for(const t of this.ntt)t.o7();this.Ost()}else if(this.K6(!0),this.Z6(!1),this.lst(),this.m7()){this.Ttt=-1,0!==this.mtt&&(this.ptt=Math.abs(this.ptt)),this.mtt=0,this.gtt=-1,this.ytt=1,this.btt=!1,this._tt=!1,this.vtt=!0,this.Gtt=!0,this.nst()?this.Pst(0):this.Pst(this.lq()),this.Rst();for(const t of this.ntt)t.o7();this.Ost()}else{-1!==this.gtt&&(this.mtt=this.gtt),this.Gtt=!0,this._tt=!1,this.Rst();for(const t of this.ntt)t.zst();this.Ost()}}a7(){return this.w6}Rst(){this.Ott=0;for(const t of this.ntt)t.LR()&&(this.Ott=1)}Ost(){this.w6=0;for(const t of this.ntt)t.Jst(),0===this.w6&&1===t.a7()&&(this.w6=1),this.ott||1!==t.qst()||(this.ott||(this.ott=[]),this.att=this.ott.push(t))}c7(t,s,i){if(this.ist()){if(0===t&&0===this.Ptt)return;this.Ptt=t,t=i}else{if(0===i&&0===this.Ptt)return;this.Ptt=i,t=i,s=1}const e=this.ftt+this.dtt,n=e+t*s*this.ptt,r=this.ett.Yst;n<0?(this.ftt=0,this.dtt=-n):n>=r?(this.ftt=r,this.dtt=this.ftt-n):(this.ftt=n,this.dtt=0);let h=!1,o=!1;const a=this.cq(),l=this.pq();let u;a||l?a&&!l?this.ptt>0?this.ftt>=r&&(this.Fst(0),o=!0):this.ftt<=0&&(this.Fst(r),o=!0):!a&&l?this.ptt>0?this.ftt>=r&&(this.Pst(r),this.mq(-1*this.gq()),o=!0,1===this.mtt?this.ytt<this.GJ()?(this.ytt++,this.mtt=0):h=!0:0===this.mtt&&(this.mtt=1)):this.ftt<=0&&(this.Pst(0),this.mq(-1*this.gq()),o=!0,1===this.mtt?this.ytt<this.GJ()?(this.ytt++,this.mtt=0):h=!0:0===this.mtt&&(this.mtt=1)):a&&l&&(this.ptt>0?this.ftt>=r&&(this.Pst(r),this.mq(-1*this.gq()),o=!0,this.mtt++,xg.wrap(this.mtt,0,2)):this.ftt<=0&&(this.Pst(0),this.mq(-1*this.gq()),o=!0,this.mtt++,xg.wrap(this.mtt,0,2))):this.ptt>0?this.ftt>=r&&(this.ytt<this.GJ()?(this.ytt++,this.Fst(0),o=!0):(this.Pst(r),h=!0)):this.ftt<=0&&(this.ytt<this.GJ()?(this.ytt++,this.Fst(r),o=!0):(this.Pst(0),h=!0));const c=this.htt;if(h){for(u=0;u<c;u++)this.ntt[u].Xst();return this.nq(!0),void this.yst()}const f=this.att;for(u=0;u<f;u++)this.ott[u].Kst();if(1===this.Ott)for(u=0;u<c;u++){const t=this.ntt[u],s=t.Zst();this.ftt-s<0&&e-s>0?(this.ftt=s<0?0:s>=r?r:s,t.vc(s,!0,!1,o,this.Gtt,!1)):t.vc(this.ftt,!0,!1,o,this.Gtt,!1)}else for(u=0;u<c;u++)this.ntt[u].vc(this.ftt,!0,!1,o,this.Gtt,!1);if(!this.IsPlaying()&&this.Dtt){const t=this.Dtt.YD()+this.Dtt.tit().Qst().Zst(),s=this.ftt-t;this.ftt-=s,0!==this.dtt&&(this.dtt-=s),this.Dtt=null}for(u=0;u<f;u++)this.ott[u].sit();this.Gtt&&(this.Gtt=!1)}iit(t){this.Dtt=t}eit(){return this.Dtt}Est(t,s=!1,i=!1,e=!1,n=NaN,r=!1,h=!1){for(const t of this.ntt)t.Kst();for(const r of this.ntt){let o=t;if("number"==typeof n&&!isNaN(n)){const t=this.YD()-r.Zst(),s=n-r.Zst();t<0&&s>0&&(o=r.Zst(),this.Pst(o))}r.vc(o,s,i,e,this.Gtt,h)}for(const t of this.ntt)t.sit();this.Gtt&&r&&(this.Gtt=!1)}nit(){const t=this.ett.Wtt().rit(),s=xg.jtt.Ux(this,t);return this.htt=this.ntt.push(s),s}A6(){if(!this.iq())for(const t of this.ntt)t.hit()}w7(){for(const t of this.ntt)t.w7()}oit(){for(const t of this.ntt)t.ait()}lit(t,s,i){if(s){if("number"==typeof i&&i>=0){const t=this.ntt[i];if(!t)return;return t.uit(s),void this.itt.k6(s.fU(),this)}for(const i of this.ntt)if(i.Jtt()){if(t){if(i.Oq()!==t)continue;i.uit(s),this.itt.k6(s.fU(),this);break}if(!i.cit()){i.uit(s),this.itt.k6(s.fU(),this);break}}}}W6(t,s){for(const i of this.ntt)if(i.Jtt())if(s){if(s===i.Oq()&&t===i.Pq())return!0}else if(t===i.Pq())return!0;return!1}p7(){return this.ntt.some(t=>!t.Jtt()||t.fit())}Hst(){return this.ntt.some(t=>{if(t.Jtt()){if(!t.fit())return!1;const s=t.fU();return!!s&&s.WQ()}return!1})}Fq(t){for(const s of this.N7())for(const i of s.dit())if(i.pit()===t)return i}mit(t){for(const s of this.ntt)if(t===s.Pq())return s;return null}git(t){let s=t?t.split(" "):[];const i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const t of this.N7())for(const i of t.yit())if(s.every(t=>i.wit(t)))return i}L6(){const t=[];for(const s of this.N7())t.push(s.fU());return t.filter(t=>t)}p6(){for(const t of this.N7())t.p6()}e4(){return{tracksJson:this.Sit(),name:this.Yn,playheadTime:this.YD(),playbackRate:this.ptt,pingPongState:this.mtt,resumePingPongState:this.gtt,currentRepeatCount:this.ytt,isPlaying:this.wtt,isScheduled:this.Stt,initialStateSet:this.vtt,finishedTriggers:this._tt,complete:this.btt,released:this.Mtt,markedForRemoval:this.Ctt,completedTick:this.Ttt,implicitPause:this.xtt,isTemplate:this.Itt,tags:this.Att.join(" "),stringTags:this.Rtt,tagsChanged:this.Ett,firstTick:this.Gtt}}n4(t){t&&(this.vit(t.tracksJson),this.Yn=t.name,this.ftt=t.playheadTime,this.ptt=t.playbackRate,this.mtt=t.pingPongState,this.gtt=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this.ytt=t.currentRepeatCount,this.wtt=!!t.isPlaying,this.Stt=!!t.isScheduled,this.vtt=!!t.initialStateSet,this._tt=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.btt=!!t.complete,this.Mtt=!!t.released,this.Ctt=!!t.markedForRemoval,this.Ttt=t.completedTick,this.xtt=!!t.implicitPause,this.Itt=!!t.isTemplate,this.Att=t.tags.split(" "),this.Rtt=t.stringTags,this.Ett=!!t.tagsChanged,this.Gtt=!!t.firstTick)}Sit(){return this.ntt.map(t=>t.e4())}vit(t){this.oit(),t.forEach((t,s)=>{this.ntt[s].n4(t)}),this.ntt.filter(t=>t.fit())}static ast(t){const s=this.yq();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static hst(t){if(xg.Te(t))return t.slice(0);if(xg.le(t))return t.split(" ");throw new Error("invalid tags")}bit(){return this.Ftt||(this.Ftt=xg.Hn(self.Cq,this)),this.Ftt}}}{const Gg=self._s,Pg=0,Ag=1,Rg=2;Gg.jtt=class extends Gg.Vn{constructor(t,s){super(),this.F7=t,this.Mit=s,this.Cit=s.Wtt(),this.Tit=NaN,this.xit=NaN,this.Iit=null,this._it=null,this.Git=!1,this.RR=s.Zst()>0,this.Pit=!1,this.Ait=!1,this.Rit=NaN,this.Eit=null,this.Oit=this.Mit.tit().Dit(),this.Fit=[],this.kit(),this.Lit=0,this.w6=0,this.Nit=0}static Ux(t,s){return Gg.Hn(Gg.jtt,t,s)}zn(){this.Oit=null;for(const t of this.Fit)t.zn();Gg.bh(this.Fit),this.Fit=null,this.F7=null,this.Iit=null,this._it=null,this.Mit=null,this.Eit=null}kit(){for(const t of this.Mit.$it().Bit())this.Fit.push(Gg.Wit.Ux(this,t))}hit(){for(const t of this.Fit)t.hit()}w7(){for(const t of this.Fit)t.w7();this.Iit=null,this._it=null}jit(){return this.F7}l$(){return this.F7.l$()}yit(){return this.Oit||(this.Oit=this.Mit.tit().Dit()),this.Oit}dit(){return this.Fit}Fq(t){for(let s=0;s<this.Fit.length;s++){const i=this.Fit[s];if(i.pit()===t)return i}}Vit(){this.Iit||this.Pq()}Uit(){return!!this.Iit&&!this.Iit.SY()}fit(){if(!this.Jtt())return!1;const t=this.Hit(),s=this.l$().AB(t);return!!s&&!s.SY()}fU(){if(!this.Jtt())return;const t=this.zit();return-1!==t?this.l$().q0(t):void 0}Jit(){return this.F7.N7().indexOf(this)}ait(){this.Iit=null,this.Tit=NaN,this._it=null,this.xit=NaN,this.Git=!0}cit(){return!!this.Iit}Pq(){if(this.Git)return;if(this.Iit&&this.Uit())return this.Iit;const t=this.Hit();return this.Iit=this.l$().AB(t),this.Iit}uit(t){if(this.Git=!1,this.Iit!==t){this.w7(),this.Iit=t,this.xit=t.fU().CL(),this.Tit=t.xU(),this._it=t.kB();for(const s of this.qit()){const i=s.Yit,e=s.Xit;switch(i.Kit()){case"instance-variable":{e.Zit();const i=t.fU(),n=i.Qit(s.name),r=i.tet(n),h=i.iet(n);r===s.name&&h===s.type&&e.eet(n);break}case"behavior":{const i=s.uJ,n=this.fU(),r=t.fU(),h=e.fJ(r);if(i&&h){const t=i.Ac();n.net(t),r.net(t),e.Zit(),e.ret(h.G1())}break}}}}}*qit(){for(const t of this.Fit){const s=t.Htt(),i=this.fU(),e={Yit:t,Xit:s};switch(t.Kit()){case"world-instance":e.het=t.pit();break;case"instance-variable":{const t=s.Zit();e.name=i.tet(t),e.type=i.iet(t);break}case"effect":{const t=i._j(),n=s.oet(t);e.aet=n;break}case"behavior":{const t=s.fJ(i);e.uJ=t;break}case"plugin":e.HW=i.zW()}yield e}}kB(){if(this._it&&this.Uit())return this._it;const t=this.Pq();return t&&(this._it=t.kB()),this._it}Qst(){return this.Mit}Hit(){return isNaN(this.Tit)?this.Mit.Hit():this.Tit}let(t){this.Mit.let(t)}Ktt(){return this.Mit.Ktt()}Ztt(t){this.Mit.Ztt(t)}K7(){return this.Mit.K7()}Oq(){return this.Mit.Oq()}Zst(){return this.Mit.Zst()}uet(){return this.Mit.uet()}cet(t){this.Mit.cet(t)}Qtt(t){this.Mit.Qtt(t)}Gq(t){for(const s of this.yit())s.Gq(t);for(const s of this.dit())s.Gq(t)}fet(){return this.Mit.fet()}det(t){this.Mit.det(t)}zit(){return isNaN(this.xit)?this.Mit.zit():this.xit}pet(t){this.Mit.pet(t)}met(t){this.Mit.met(t)}yet(){const t=this.Pq();return t&&t.iJ().wet()?t.iJ().yet():this.Mit.yet()}vet(t){this.Mit.vet(t)}bet(){const t=this.Pq();return t&&t.iJ().wet()?t.iJ().bet():this.Mit.bet()}YI(){return this.Mit.YI()}Ac(){return this.Mit.Ac()}Jtt(){return 0===this.YI()}Met(){return 1===this.YI()}Cet(){return 2===this.YI()}Tet(){return this.Lit}a7(){return this.w6}qst(){return this.Nit}LR(){return this.RR}kst(){for(const t of this.Fit)t.kst()}o7(){if(this.Vit(),!this.Uit()&&this.Jtt())return;const t=this.jit().nst(),s=t?0:this.uet();for(const t of this.Fit)t.o7(s),0===this.Lit&&1===t.Tet()&&(this.Lit=1),0===this.w6&&1===t.a7()&&(this.w6=1);this.Nit=0,this.Fit.some(t=>t.qst())&&(this.Nit=1),this.Eit=t?this.xet(s):this.Iet(s),this.Pit=!1,this.Ait=!1,this.vc(s),this._et(this.Eit)}zst(){if(this.Vit(),!this.Uit()&&this.Jtt())return;const t=this.F7.nst(),s=this.F7.YD()-this.Zst();this.Eit=t?this.xet(s):this.Iet(s);for(const t of this.Fit)t.zst(s)}Xst(){if(!this.jit().m7()&&(this.Vit(),(this.Uit()||!this.Jtt())&&!this.RR)){const t=this.F7.YD();t>=this.Zst()+this.uet()?this.vc(this.uet(),!0,!1,!0,!1,!1,!0):t<=0&&this.vc(0,!0,!1,!0,!1,!1,!0)}}Jst(){for(let t=0,s=this.Fit.length;t<s;t++){const s=this.Fit[t];s.Jst(),0===this.Lit&&1===s.Tet()&&(this.Lit=1),0===this.w6&&1===s.a7()&&(this.w6=1)}}Kst(){const t=this.Fit.length;for(let s=0;s<t;s++)this.Fit[s].Kst()}vc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){this.Iit||this.Pq();const o=this.Iit&&!this.Iit.SY(),a=0===this.Mit.Jc;if((o||!a)&&!(r&&a&&this.fU().WQ()||(t-=this.Zst())<0)){this.Get(t,s),this.Pet(t,s,n),!this.jit().IsPlaying()&&this.jit().eit()&&(t=this.jit().eit().YD());for(let s=0,n=this.Fit.length;s<n;s++)this.Fit[s].vc(t,i,e,h);this.Aet(t,s),0!==this.Lit&&(this._it||(this._it=this.Iit.kB()),this._it&&this._it.CH())}}sit(){const t=this.Fit.length;for(let s=0;s<t;s++)this.Fit[s].sit()}Get(t,s){if(s&&this.RR&&!this.Pit){if(this.jit().nst()){if(t<0)return}else if(t>this.uet())return;for(const t of this.Fit)t.o7();this.Pit=!0}}Aet(t,s){if(s&&this.RR&&!this.Ait)if(this.jit().nst()){if(t>=this.uet()){for(const t of this.Fit)t.vc(this.uet(),!1,!0);this.Ait=!0}}else if(t<=0){for(const t of this.Fit)t.vc(0,!1,!0);this.Ait=!0}}Pet(t,s,i){if(i)return;if(!s)return;if(!Gg.i$.ust)return;const e=this.jit();if(e.nst()){const s=this.Eit.V7(),i=this.Eit.YD(),n=s?s.YD():e.lq();(t<=i||t>=n)&&(this.Eit=this.Cit.Ret(t,this.Mit),s&&this.Eet(this.Eit))}else{if(!this.Cit.Oet(t,this.Mit))return;this.Eit||(this.Eit=this.Cit.Oet(t,this.Mit));const s=this.Eit.Det(),i=this.Eit.YD(),e=s?s.YD():0;(t>=i||t<=e)&&(this.Eit=this.Cit.Oet(t,this.Mit),this.Eit&&this.Eet(this.Eit))}}xet(t){return this.Cit.Fet(t,this.Mit)||this.Cit.Ret(t,this.Mit)}Iet(t){return this.Cit.Fet(t,this.Mit)||this.Cit.Oet(t,this.Mit)}Eet(t,s=!1){if(!Gg.i$.ust)return;const i=this.jit(),e=i.Vtt();Gg.i$.ust.t$.cst(i),Gg.i$.ust.t$.ket(t),e.qU(Gg.i$.ust.t$.Let),e.qU(Gg.i$.ust.t$.Eet),i.IsPlaying()||s||i.iit(t),Gg.i$.ust.t$.gst(i),Gg.i$.ust.t$.Net(t)}_et(t){this.Eet(t,!0)}Bet(){return this.Mit.tit().$et()}Wet(){const t=this.Mit.$it().jet(),s=Gg.Wit.Ux(this,t);return this.Fit.push(s),s}Vet(t){this.Mit.tit().Uet(t)}Het(t){for(const s of this.Fit)s.Het(t)}zet(){for(const t of this.Fit)t.zet()}Jet(){if(this.Vit(),this.Uit()||!this.Jtt())for(const t of this.Fit)t.Jet()}qet(){if(this.Vit(),!this.Uit()&&this.Jtt())return;let t=!1;for(const s of this.Fit){const i=s.qet();!t&&i&&(t=!0)}if(t){const t=this.Bet();t.oq(this.jit().YD()),t.Gq("noease"),t.det(!0),t.rst("")}}p6(){isNaN(this.Rit)||this.Yet(this.Rit),this.Rit=NaN}e4(){const t=this.Pq(),s=t?t.xU():this.Hit();return{propertyTracksJson:this.Xet(),lastKeyframeDataItemJson:this.Ket(),initialStateOfNestedSet:this.Pit,endStateOfNestedSet:this.Ait,instanceUid:s,cleared:this.Git}}n4(t){if(t){this.Zet(t.propertyTracksJson),this.Qet(t.lastKeyframeDataItemJson),this.Rit=t.instanceUid,this.Pit=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Pit=t.initialStateOfNestedSet),this.Ait=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Ait=t.endStateOfNestedSet),this.Git=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.Fit)0===this.Lit&&1===t.Tet()&&(this.Lit=1),0===this.w6&&1===t.a7()&&(this.w6=1);this.Nit=0,this.Fit.some(t=>t.qst())&&(this.Nit=1)}}Ket(){return this.Mit.tit().tnt(this.Eit)}Xet(){return this.Fit.map(t=>t.e4())}Zet(t){t.forEach((t,s)=>{this.Fit[s].n4(t)})}Yet(t){if(!Gg.te(t))return;const s=this.l$().AB(t);s&&this.jit().lit(this.Mit.Oq(),s,this.Jit())}Qet(t){const s=this.Mit.tit();this.Eit=s.snt(t)}}}{const Eg=self._s;Eg.Wit=class extends Eg.Vn{constructor(t,s){super(),this.int=t,this.ent=s,this.nnt=s.$it(),this.Lit=0,this.w6=0,this.Nit=0,this.rnt=this.Htt(),this.hnt=this.ent.ant().ont(),this.lnt=null,this.unt=null}static Ux(t,s){return Eg.Hn(Eg.Wit,t,s)}zn(){this.int=null,this.rnt&&(this.rnt.zn(),this.rnt=null),this.hnt=null,this.ent=null,this.nnt=null}Tet(){return this.Lit}a7(){return this.w6}qst(){return this.Nit}cnt(){return!!this.unt}fnt(t){this.unt=t}dnt(){return this.unt}pnt(){return this.int}mnt(){return this.ent}$it(){return this.nnt}jit(){return this.int.jit()}l$(){return this.int.l$()}Pq(){return this.int.Pq()}Htt(){if(this.rnt)return this.rnt;let t;switch(this.ent.Kit()){case"behavior":t=new Eg.Wit.gnt(this);break;case"effect":t=new Eg.Wit.ynt(this),this.w6=1;break;case"instance-variable":t=new Eg.Wit.wnt(this);break;case"plugin":t=new Eg.Wit.Snt(this),this.w6=1;break;case"world-instance":t=new Eg.Wit.vnt(this),this.w6=1,this.Lit=1;break;case"value":t=new Eg.Wit.bnt(this);break;case"audio":t=new Eg.Wit.Mnt(this)}return this.rnt=t,this.rnt}Kit(){return this.ent.Kit()}Cnt(t){this.ent.Cnt(t)}Tnt(){return this.ent.xnt()}Int(t){this.ent._nt(t)}Dq(){return this.Htt().Gnt()}pit(){return this.ent.Pnt()}Ant(t){this.ent.Rnt(t)}Ent(){return this.ent.YI()}Ont(t){this.ent.Dnt(t)}Fnt(){return this.$it().knt(this.ent).YI()}Lnt(){return this.ent.Lnt()}Nnt(t){this.ent.Nnt(t)}Bnt(){return this.ent.Bnt()}$nt(t){this.ent.$nt(t)}fet(){return this.ent.fet()}det(t){this.ent.det(t)}Ktt(){return this.ent.Ktt()}Ztt(t){this.ent.Ztt(t)}K7(){return this.ent.K7()}Qtt(t){this.ent.Qtt(t)}Gq(t){for(const s of this.Wnt())s.Gq(t)}jnt(){return this.ent.jnt()}Wnt(){return this.hnt||(this.hnt=this.ent.ant().ont()),this.hnt}j7(){return this.ent.ant().j7()}Vnt(t){return this.nnt.Vnt(t,this.ent)}Unt(t){return this.nnt.Unt(t,this.ent)}Hnt(t){let s,i=this.nnt.Vnt(t,this.ent);return i?s=this.nnt.znt(t,this.ent):(i=this.nnt.Unt(t,this.ent),s=this.nnt.Jnt(t,this.ent)),{start:i,end:s}}*qnt(){for(const t of this.Wnt())yield t.r9()}*Ynt(){for(const t of this.Wnt())yield t.YD()}hit(){this.Htt().hit()}w7(){this.Htt().w7()}Xnt(){return this.Htt().Xnt()}kst(){this.Htt().kst()}o7(t){this.Htt().o7(),this.lnt=this.Knt(t),this.Jst()}zst(t){this.Htt().zst(),this.lnt=this.Knt(t)}Jst(){const t=this.pnt();if(this.Nit=0,t.Jtt()){const s=this.jit(),i=t.Pq(),e=this.Htt(),n=this.pit();if(e.Znt()){const t=s.Utt(i,e,n,this);t&&t.length&&(this.Nit=1)}else this.Nit=0}}Knt(t){const s=this.jit();return this.nnt.Vnt(t,this.ent)||(s.nst()?this.nnt.Unt(t,this.ent):this.nnt.Jnt(t,this.ent))}Kst(){this.rnt.Kst()}vc(t,s=!1,i=!1,e=!1){let n,r,h=!1;if(s)n=this.nnt.Unt(t,this.ent);else{if(this.lnt){const s=this.jit(),i=this.lnt.V7(),e=this.lnt.YD(),n=i?i.YD():s.lq();(t<=e||t>=n)&&(this.lnt=this.nnt.Unt(t,this.ent),h=!0)}else this.lnt=this.nnt.Unt(t,this.ent),h=!0;n=this.lnt}n&&(r=n.V7()),this.rnt.vc(t,n,r,s,i,e,h)}Qnt(t){if(this.lnt){const s=this.jit(),i=this.lnt.V7(),e=this.lnt.YD(),n=i?i.YD():s.lq();(t<=e||t>=n)&&(this.lnt=this.nnt.Unt(t,this.ent))}else this.lnt=this.nnt.Unt(t,this.ent);const s=this.lnt,i=s.V7();return this.rnt.Qnt(t,s,i)}trt(t,s,i){return this.rnt.Qnt(t,s,i)}sit(){this.rnt.sit()}static srt(t,s){const i=s.mnt();return s.nnt.Unt(t,i)}static irt(t,s){const i=s.mnt();return s.nnt.Jnt(t,i)}ert(){const t=this.ent.ant().nrt();return this.lnt=null,t}Het(t){this.lnt=null,this.ent.ant().rrt(t)}zet(){this.Htt().zet()}Jet(){if(this.Htt().Jet()){const t=this.nnt.knt(this.ent),s=this.Htt().Xnt();t.hrt(s)}}qet(){const t=this.Htt().qet();return t&&this.ort(),this.Htt().art(),t}ort(){const t=this.jit().YD(),s=this.Htt(),i=Eg.Wit.srt(t,this),e=this.ert();e.Dnt(i.YI()),e.oq(t),e.Gq(i.lrt()),e.det(!0),e.urt(s.crt()),e.hrt(s.Xnt())}e4(){return{sourceAdapterJson:this.Htt().e4()}}n4(t){t&&this.Htt().n4(t.sourceAdapterJson)}}}{const Og=self._s,Dg=Og.Wit;Dg.vnt=class{constructor(t){this.frt=t,this.drt=null,this.prt()}zn(){this.drt&&(this.drt.zn(),this.drt=null),this.frt=null}Znt(){return this.drt.Znt()}Fq(){return this.frt}hit(){this.drt&&this.drt.hit()}w7(){this.drt&&this.drt.w7()}prt(){return this.drt||(this.drt=this.mrt()),this.drt}Zit(){}CL(){return this.Zit()}grt(){}kst(){this.prt().kst()}o7(){this.prt().o7()}zst(){this.prt().zst()}Kst(){this.drt.yrt()}vc(t,s,i,e,n,r,h){let o;switch(this.frt.Fnt()){case"numeric":o=Dg.wrt.vc(t,s,i,this.frt);break;case"angle":o=Dg.Srt.vc(t,s,i,this.frt);break;case"boolean":o=Dg.vrt.vc(t,s,i,this.frt);break;case"color":o=Dg.brt.vc(t,s,i,this.frt);break;case"text":o=Dg.Mrt.vc(t,s,i,this.frt)}this.drt.Crt(t,o,s,i,e,n,r,h)}Qnt(t,s,i){switch(this.frt.Fnt()){case"numeric":return Dg.wrt.vc(t,s,i,this.frt);case"angle":return Dg.Srt.vc(t,s,i,this.frt);case"boolean":return Dg.vrt.vc(t,s,i,this.frt);case"color":return Dg.brt.vc(t,s,i,this.frt);case"text":return Dg.Mrt.vc(t,s,i,this.frt)}}sit(){this.drt.Trt()}zet(){this.prt().xrt()}art(){this.prt().art()}Xnt(){return this.prt().Xnt()}Jet(){return this.prt().Jet()}qet(){return this.prt().qet()}crt(){const t=this.frt,s=t.pnt().jit().YD(),i=Dg.srt(s,t),e=i.V7();switch(t.Fnt()){case"numeric":return Dg.wrt.vc(s,i,e,t);case"angle":return Dg.Srt.vc(s,i,e,t);case"boolean":return Dg.vrt.vc(s,i,e,t);case"color":return Dg.brt.vc(s,i,e,t);case"text":return Dg.Mrt.vc(s,i,e,t)}}mrt(){const t=this.frt;switch(t.jnt()?t.Fnt():""){case"combo":case"boolean":case"text":case"string":return new Dg._rt.Irt(this);case"numeric":case"number":case"angle":return"combo"===this.frt.Ent()?new Dg._rt.Irt(this):new Dg._rt.Grt(this);case"color":case"offsetColor":return new Dg._rt.Prt(this);default:return new Dg._rt.Grt(this)}}e4(){return{propertyAdapterJson:this.prt().e4()}}n4(t){t&&this.prt().n4(t.propertyAdapterJson)}}}{const Fg=self._s,kg=0;class Lg extends Fg.Wit.vnt{constructor(t){super(t),this.Art=NaN}Zit(){return this.frt.mnt().xnt()[0]}CL(){return this.Art?this.Art:super.CL()}grt(){return this.frt.pnt().Pq()}eet(t){this.frt.mnt().xnt()[0]!==t&&(this.Art=t)}vc(t,s,i,e,n,r,h){this.prt().Rrt(s.Gnt())&&super.vc(t,s,i,e,n,r,h)}Qnt(t,s,i){if(this.prt().Rrt(s.Gnt()))return super.Qnt(t,s,i)}e4(){return Object.assign(super.e4(),{index:this.Art})}n4(t){t&&(super.n4(t),this.Art=t.index)}}Fg.Wit.wnt=Lg}{const Ng=self._s,Bg=0,$g=1,Wg=2;class jg extends Ng.Wit.vnt{constructor(t){super(t),this.JQ=NaN}Zit(){return this.frt.mnt().xnt()[1]}grt(){const t=this.frt.mnt(),s=this.frt.pnt(),i=this.JQ?this.JQ:t.xnt()[0],e=s.Pq(),n=e.Ert(i);return e.Ort()[n].iJ()}fJ(t){const s=this.frt.mnt().xnt()[2];return t.Drt(s)}ret(t){this.frt.mnt().xnt()[0]!==t&&(this.JQ=t)}vc(t,s,i,e,n,r,h){const o=this.frt.pnt().Pq();this.fJ(o.fU())&&super.vc(t,s,i,e,n,r,h)}Qnt(t,s,i){const e=this.frt.pnt().Pq();if(this.fJ(e.fU()))return super.Qnt(t,s,i)}e4(){return Object.assign(super.e4(),{sid:this.JQ})}n4(t){t&&(super.n4(t),this.JQ=t.sid)}}Ng.Wit.gnt=jg}{const Vg=self._s,Ug=0,Hg=1;class zg extends Vg.Wit.vnt{constructor(t){super(t)}Zit(){return this.frt.mnt().xnt()[1]}grt(){const t=this.frt.pnt().kB().bH(),s=t._j(),i=this.oet(s).CL();return t.wJ(i)?t.Frt(i):null}oet(t){const s=this.frt.mnt().xnt()[0];return t.krt(s)}vc(t,s,i,e,n,r,h){this.Lrt()&&super.vc(t,s,i,e,n,r,h)}Qnt(t,s,i){if(this.Lrt())return super.Qnt(t,s,i)}Lrt(){const t=this.frt.pnt().kB().bH(),s=t._j(),i=this.oet(s);if(!i)return;const e=i.CL();return t.wJ(e)}}Vg.Wit.ynt=zg}{const Jg=self._s,qg=0;class Yg extends Jg.Wit.vnt{constructor(t){super(t)}Zit(){return this.frt.mnt().xnt()[0]}grt(){return this.frt.pnt().Pq().iJ()}vc(t,s,i,e,n,r,h){const o=this.frt.pnt();o.fU().zW()===o.Pq().fU().zW()&&super.vc(t,s,i,e,n,r,h)}Qnt(t,s,i){const e=this.frt.pnt();if(e.fU().zW()===e.Pq().fU().zW())return super.Qnt(t,s,i)}Nrt(){const t=this.frt.pnt(),s=t.fU().zW();if(Jg.i$.Brt&&s instanceof Jg.i$.Brt&&("initial-frame"===this.frt.pit()||"initial-animation"===this.frt.pit()))switch(this.frt.K7()){case"relative":return{$rt:(s,i,e,n,r)=>{if(i!==n){const e=n/i,r=t.Fq("offsetWidth"),h=t.Fq("offsetScaleX");if(r||h){const o=r?.Htt()?.prt(),a=h?.Htt()?.prt();if(s.wz()&&s.xz())a&&a.Wrt(n),s.Xg(this.jrt(n,i,s,t,o,a));else{const i=n*((s.Urt()?.Vrt()??this.Hrt(s,t))/this.Hrt(s,t));a&&a.Wrt(n);const r=o?.zrt()??0,h=a?.zrt()??0;s.Xg(i+(r+h*e))}}else s.Xg(s.Vg()*e)}if(e!==r){const i=r/e,n=t.Fq("offsetHeight"),h=t.Fq("offsetScaleY");if(n||h){const o=n?.Htt()?.prt(),a=h?.Htt()?.prt();if(s.wz()&&s._z())a&&a.Wrt(r),s.Ug(this.Jrt(r,e,s,t,o,a));else{const e=r*((s.Urt()?.qrt()??this.Yrt(s,t))/this.Yrt(s,t));a&&a.Wrt(r);const n=o?.zrt()??0,h=a?.zrt()??0;s.Ug(e+(n+h*i))}}else s.Ug(s.Qg()*i)}}};case"absolute":return null}}Xrt(t,s,i,e=0){const n=s.jit().mit(t.Pq());if(!n)return e;const r=n.Fq(i);if(!r)return e;const h=r.mnt().ant();if(!h)return e;const o=h.Krt();return o?o.Gnt():e}Hrt(t,s){const i=s.jit().mit(t.Pq());if(i)return i.yet();const e=t.Pq().iJ();return e.wet()?e.yet():t.Urt().Vrt()}Yrt(t,s){const i=s.jit().mit(t.Pq());if(i)return i.bet();const e=t.Pq().iJ();return e.wet()?e.bet():t.Urt().qrt()}jrt(t,s,i,e,n,r){const h=i.Urt().Vrt(),o=h/i.rz().Urt().Vrt();let a=1;const l=r?.Zrt()??0;if(0!==l){const t=h/this.Hrt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.Qrt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.rz().Vg()*o*a*f}Jrt(t,s,i,e,n,r){const h=i.Urt().qrt(),o=h/i.rz().Urt().qrt();let a=1;const l=r?.tht()??0;if(0!==l){const t=h/this.Yrt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.sht()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.rz().Qg()*o*a*f}}Jg.Wit.Snt=Yg}{const Xg=self._s;class Kg extends Xg.Wit.vnt{constructor(t){super(t),this.iht=0,this.eht=!1}Znt(){return!1}o7(){const t=this.frt.$it();let s=this.frt.mnt();s=t.knt(s),this.iht=s.r9()}zst(){}Gnt(){return this.eht||this.frt.vc(0),this.iht}vc(t,s,i,e,n,r,h){this.iht=Xg.Wit.wrt.vc(t,s,i,this.frt),this.eht=!0}zet(){}art(){}Xnt(){return this.iht}Jet(){return!1}qet(){return!1}e4(){return{value:this.iht,init:this.eht}}n4(t){t&&(this.iht=t.value,this.eht=!t.hasOwnProperty("init")||t.init)}}Xg.Wit.bnt=Kg}{const Zg=self._s,Qg=0,ty=0,sy=1,iy=1,ey=2,ny=3;class ry extends Zg.Wit.vnt{constructor(t){super(t),this.nht=!1,this.rht=null,this.hht=null,this.oht=null,this.F7=this.frt.jit(),this.int=this.frt.pnt(),this.aht=this.frt.Tnt(),this.lht=this.aht[0],this.uht=this.aht[1],this.aht[3]?this.cht=this.aht[3]:this.cht=Math.random().toString(36).slice(2),this.fht=NaN,this.dht=NaN,this.pht=NaN,this.mht=null,this.ght()}zn(){super.zn(),this.rht=null,this.hht=null,this.oht=null,this.F7=null,this.int=null,this.aht=null,this.lht=null,this.mht=null}ght(){if(!self._s.i$.Audio)return;const t=this.frt.l$().yht(self._s.i$.Audio);t&&(this.rht=t.VW().iJ()),this.hht=self._s.i$.Audio.wht,this.oht=self._s.i$.Audio.Sht}vht(){if(this.mht)return;const t=this.frt.pnt().Fq("audioSource");t&&(this.mht=t.Htt())}bht(){const t=this.frt.pnt().Fq("volume");return t?t.Htt().dht:this.dht}hit(){super.hit(),this.nht=!1,this.rht&&(this.oht&&(this.fht=this.oht.Mht.call(this.rht,this.cht),this.dht=this.oht.Cht.call(this.rht,this.cht)),this.hht&&this.hht.nq.call(this.rht,this.cht))}Tht(){return this.cht}xht(){return this.pht}Iht(t){this.pht=t}o7(){super.o7(),this.fht=NaN,this.nht=!1}zst(){super.zst();const t=this.frt.jit().YD();switch(this.fht=t-this.uht,this.frt.pit()){case"audioSource":break;case"volume":this.dht=this.frt.Qnt(t)}this.nht=!1}vc(t,s,i,e,n,r,h){if(this.rht)switch(this.frt.pit()){case"audioSource":{if(!this.F7.nst())return;if(e)return void(this.hht&&this.hht.nq.call(this.rht,this.cht));if(t<this.uht)return void(this.nht=!1);const s=this.oht._ht.call(this.rht,this.cht),i=this.F7.gq();if(i!==s&&this.hht.mq.call(this.rht,this.cht,i),this.nht)return;if(!this.frt.jit().IsPlaying())return;if(this.nht=!0,isNaN(this.fht)){const s=self.performance.now(),i=t-this.uht;if("suspended"===this.rht.Ght())return void(this.nht=!1);const e=i+(self.performance.now()-s)/1e3;if(this.hht){let t=this.xht();isNaN(t)?(this.Iht(0),t=0):this.Iht(t),this.hht.Pht.call(this.rht,this.lht,t,this.cht,e)}}else{const t=this.fht;this.fht=NaN;const s=this.bht();if(this.dht=NaN,"suspended"===this.rht.Ght())return void(this.nht=!1);this.hht&&(this.Iht(s),this.hht.Pht.call(this.rht,this.lht,s,this.cht,t))}break}case"volume":this.vht(),super.vc(t,s,i,e,n,r,h)}}Qnt(t,s,i){if(this.rht)switch(this.frt.pit()){case"audioSource":return;case"volume":return this.vht(),super.Qnt(t,s,i)}}Aht(t,s){return this.mht?this.mht.xht():0}Rht(t,s,i,e){this.mht&&this.mht.Iht(this.Aht()+s),this.hht&&this.mht&&this.hht.Iht.call(this.rht,this.mht.Tht(),this.mht.xht())}Eht(t,s,i){this.mht&&this.mht.Iht(s),this.hht&&this.mht&&this.hht.Iht.call(this.rht,this.mht.Tht(),this.mht.xht())}Oht(){return!0}e4(){return{audioPlaybackStarted:this.nht,audioTag:this.cht,pauseTime:this.fht,pauseVolume:this.dht,volume:this.pht}}n4(t){t&&(this.nht=t.audioPlaybackStarted,this.cht=t.audioTag,this.fht=t.pauseTime,this.dht=t.pauseVolume,this.pht=t.volume,this.ght())}}Zg.Wit.Mnt=ry}{const hy=self._s;hy.Wit._rt=class{constructor(t){this.rnt=t,this.frt=t.Fq(),this._it=this.frt.pnt().kB(),this.Dht=this.frt.pit(),this.Fht=!1,this.kht=null,this.Lht=null}zn(){this.rnt=null,this.frt=null,this._it=null,this.kht=null,this.Lht=null}Znt(){return!1}hit(){}w7(){this._it=null,this.kht=null,this.Lht=null}Htt(){return this.rnt}Fq(){return this.frt}kB(){return this._it||(this._it=this.frt.pnt().kB()),this._it}Nht(t){this.Fht=!!t}Bht(){return this.Fht}kst(){}o7(){}zst(){}xrt(){this.kht=this.Xnt()}art(){this.kht=null}Xnt(){}Jet(){}qet(){}Rrt(t){return typeof this.$ht()==typeof t}yrt(){}Crt(t,s,i,e,n,r,h,o){}Trt(){}Wht(){return this.Vht(()=>{const t=this.frt.mnt();return this.frt.$it().knt(t)},()=>{const t=this.frt.mnt();return this.frt.$it().Krt(t)}).jht()}Uht(){const t=this.frt.jit().YD()-this.frt.pnt().Zst();return this.Vht(()=>{const s=this.frt.mnt();return this.frt.$it().Unt(t,s)},()=>{const s=this.frt.mnt(),i=this.frt.$it();return i.Jnt(t,s)||i.Krt(s)}).jht()}Vht(t,s){return this.frt.jit().nst()?t():s()}Hht(t,s){return"relative"===this.frt.K7()?t():s()}zht(t,s){return this.Bht()?(this.Nht(!1),t()):s()}Jht(t){}qht(){return this.rnt.CL()}Yht(){return this.Lht||(this.Lht=this.rnt.grt()),this.Lht}Xht(t,s,i,e,n,r){switch(this.frt.Kit()){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return n();case"audio":return r()}}e4(){return{firstAbsoluteUpdate:this.Fht,saveState:this.kht}}n4(t){t&&(this.Fht=t.firstAbsoluteUpdate,this.kht=t.saveState)}Kht(t,s=!1){const i=[];for(const e of t){const t=e.pnt().Zst();for(const n of e.Wnt())s&&0===n.YD()?i.push({time:t+n.YD(),value:n.jht()}):s||i.push({time:t+n.YD(),value:n.jht()})}return i.sort((t,s)=>t.time-s.time)}Zht(t,s,i){return this.Qht(s,i)}Qht(t,s){for(let i=s.length-1;i>=0;i--)if(s[i].time<=t)return s[i];return null}}}{const oy=self._s,ay=new Map,ly=[0,0,0];class uy extends oy.Wit._rt{constructor(t){super(t)}kst(){}o7(){}zst(){}Xnt(){const t=this.frt.Kit(),s=this.Yht(),i=this.qht();switch(t){case"behavior":case"plugin":return this.tot(s.sot(i));case"effect":return this.tot(s[i]);case"world-instance":return this.tot(this.$ht())}}Jet(){const t=this.Wht();return!this.iot(t,this.$ht())}qet(){return!oy.ee(this.kht)&&!this.iot(this.kht,this.$ht())}iot(t,s){return t=this.eot(t),s=this.eot(s),t.zo(s)}Wht(){const t=super.Wht();return this.eot(t)}Uht(){const t=super.Uht();return this.eot(t)}Jht(t){}tot(t){return oy.Le(t,oy.To)?t.toArray().slice(0,3):t.slice(0,3)}eot(t){return oy.Le(t,oy.To)?t:new oy.To(t[0],t[1],t[2],1)}Rrt(t){return!0}Znt(){return!0}yrt(){const t=this.frt.jit(),s=this.frt.Pq(),i=this.frt.Htt(),e=t.Utt(s,i,this.Dht,this.frt);if(e&&e.length>1){ay.has(s)||ay.set(s,new Map);const t=ay.get(s),i=this.frt.Kit();t.has(i)||t.set(i,new Map);const e=t.get(i);e.has(this.Dht)||e.set(this.Dht,{not:!1,color:new oy.To(0,0,0,1)})}}rot(t,s,i){const e=ay.get(t).get(s).get(i);return e.not=!0,e.color}Crt(t,s,i,e,n,r,h,o){const a=this.frt.jit(),l=this.frt.pnt(),u=this.frt.Pq(),c=this.frt.Htt(),f=this.frt.Kit(),d=this.Dht,p=a.Utt(u,c,d,this.frt);if(p&&p.length>1){const t=this.Kht(p,!0),i=this.Zht(a,a.YD(),t);if(i){const t=l.Zst(),e=i.time-t;if(0===e)this.rot(u,f,this.Dht).Ro(s[0],s[1],s[2]);else{if(e<0)return;const t=s[0],i=s[1],n=s[2],r=this.frt.vc(e,!1,!0),h=oy.To.Ca(t,r[0]),o=oy.To.Ca(i,r[1]),a=oy.To.Ca(n,r[2]);this.rot(u,f,this.Dht).Ro(h,o,a)}}}else this.hot(s[0],s[1],s[2])}Trt(){const t=this.frt.Pq();if(!ay.has(t))return;const s=ay.get(t),i=this.frt.Kit();if(!s.has(i))return;const e=s.get(i);if(!e.has(this.Dht))return;const n=e.get(this.Dht),r=n.not,h=n.color;r&&this.hot(h.No(),h.Bo(),h.$o()),0===e.size&&s.delete(i),0===s.size&&ay.delete(t)}$ht(){const t=this.frt.Kit(),s=this.Yht(),i=this.qht();switch(t){case"behavior":case"plugin":return this.eot(s.sot(i));case"effect":return s[i].clone();case"world-instance":return this.kB().HH().clone()}}hot(t,s,i){const e=this.frt.Kit(),n=this.Yht(),r=this.qht();switch(e){case"behavior":case"plugin":ly[0]=t,ly[1]=s,ly[2]=i,n.oot(r,ly);break;case"effect":n[r].Ao(t,s,i);break;case"world-instance":this.kB().aot(t,s,i)}}e4(){}n4(t){}}oy.Wit._rt.Prt=uy}{const cy=self._s,fy=cy.Wit;class dy extends cy.Wit._rt{constructor(t){super(t)}kst(){}o7(){}zst(){}Xnt(){return this.$ht()}Jet(){return this.Wht()!==this.Xnt()}qet(){return!cy.ee(this.kht)&&this.kht!==this.Xnt()}Znt(){return!1}Crt(t,s,i,e,n,r,h,o){const a=this.frt,l=a.pnt(),u=a.Kit(),c=a.jit(),f=l.Pq(),d=a.Htt(),p=this.Dht,m=c.Utt(f,d,p,a);if(m&&m.length>1){const i=this.Kht(m),e=t+l.Zst(),n=this.Zht(c,e,i);n&&(s=n.value)}switch(a.Fnt()){case"numeric":if(!fy.wrt.lot(this.qht(),this.Yht(),s,u))return;break;case"angle":if(!fy.Srt.lot(this.qht(),this.Yht(),s,u))return;break;case"boolean":if(!fy.vrt.lot(this.qht(),this.Yht(),s,u))return;break;case"color":if(!fy.brt.lot(this.qht(),this.Yht(),s,u))return;break;case"text":if(!fy.Mrt.lot(this.qht(),this.Yht(),s,u))return}this.hot(s)}$ht(){const t=this.frt.Kit(),s=this.Yht(),i=this.qht();switch(t){case"behavior":case"plugin":return s.sot(i);case"effect":return s[i];case"instance-variable":return s.uot(i)}}hot(t){const s=this.frt.Kit(),i=this.Yht(),e=this.qht();switch(s){case"behavior":case"plugin":i.oot(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.cot(e,t)}}}cy.Wit._rt.Irt=dy}{const py=self._s,my=py.Wit._rt,gy=new Map,yy=(t,s,i,e,n,r=!1,h=null,o=null)=>{gy.set(t,{fot:s,dot:i,pot:e,round:n,mot:r,init:h,reset:o})},wy=(t,s)=>{const i=s.jit().mit(t.Pq());if(i)return i.yet();const e=t.Pq().iJ();return e.wet()?e.yet():t.Urt().Vrt()},Sy=(t,s,i,e=0)=>{const n=s.jit().mit(t.Pq());if(!n)return e;const r=n.Fq(i);if(!r)return e;const h=r.mnt().ant();if(!h)return e;const o=h.Krt();return o?o.Gnt():e},vy=t=>{const s=[];let i=t.rz();for(;i;)s.push(i),i=i.rz();return s.reverse(),s};yy("offsetX",(t,s,i,e)=>{"relative"===e.frt.K7()?t.got(s,i.jit().sst()):t.got(s)},(t,s)=>t.XM(s),t=>t.YM(),!0),yy("offsetY",(t,s,i,e)=>{"relative"===e.frt.K7()?t.yot(s,i.jit().sst()):t.yot(s)},(t,s)=>t.QM(s),t=>t.ZM(),!0),yy("offsetWidth",(t,s,i,e,n=!1,r=!0)=>{if(0===s)return;const h="relative"===e.frt.K7(),o=1===e.wot.YI();if((h||o)&&t.wz()&&t.xz()){if(isNaN(e.Sot)){const s=vy(t);let i;i=o?s[s.length-1].Vg():s[s.length-1].Urt().Vrt(),e.Sot=0===i?Number.EPSILON:i}if(n)return;e.vot+=s;const i=s/e.Sot;t.Iy(i,r),e.bot+=i}else t.Iy(s),e.bot+=s},(t,s)=>t.Xg(s),t=>t.Vg(),!0,!1,null,t=>{t.bot=0,t.vot=0}),yy("offsetHeight",(t,s,i,e,n=!1,r=!0)=>{if(0===s)return;const h="relative"===e.frt.K7(),o=1===e.wot.YI();if((h||o)&&t.wz()&&t._z()){if(isNaN(e.Sot)){const s=vy(t);let i;i=o?s[s.length-1].Qg():s[s.length-1].Urt().qrt(),e.Sot=0===i?Number.EPSILON:i}if(n)return;e.Mot+=s;const i=s/e.Sot;t.Cot(i,r),e.bot+=i}else t.Cot(s),e.bot+=s},(t,s)=>t.Ug(s),t=>t.Qg(),!0,!1,null,t=>{t.bot=0,t.Mot=0}),yy("offsetAngle",(t,s,i,e,n)=>{t.Tot(s)},(t,s)=>t.Oj(s),t=>t.Dj(),!1,!0),yy("offsetOpacity",(t,s,i,e,n)=>{s/=e.xot?e.xot:1;const r=t.SO()+s;if(0===e.Iot)r>1?e.Iot+=r-1:r<0&&(e.Iot+=r),t._ot(s);else{const i=t.SO()+s;s>0&&e.Iot>0?i>1&&(e.Iot+=i-1):s>0&&e.Iot<0?(e.Iot+=s,e.Iot>0&&(t._ot(e.Iot),e.Iot=0)):s<0&&e.Iot>0?(e.Iot+=s,e.Iot<0&&(t._ot(e.Iot),e.Iot=0)):s<0&&e.Iot<0&&i<0&&(e.Iot+=i)}},(t,s)=>{t.bO(s)},t=>t.SO(),!1,!0,(t,s,i)=>{switch(t.Iot=0,t.frt.K7()){case"relative":{t.frt.$it();const s=t.frt.mnt().ant().ont();let i=t.kB().SO(),e=i;for(const n of s){const s=n.YD();e=i+t.frt.Qnt(s),e=py.Kn(e,0,1)}t.Got=i-e,t.Got=Math.round(100*(t.Got+Number.EPSILON))/100,e=i;for(let i=s.length-1;i>=0;i--){const n=s[i].YD();e-=t.frt.Qnt(n),e=py.Kn(e,0,1)}t.Pot=e,t.Pot=Math.round(100*(t.Pot+Number.EPSILON))/100;break}}const e="relative"===t.frt.K7(),n=1===t.wot.YI();if((e||n)&&s.wz()&&s.Oz()){const e=vy(s);let n=e[0].Urt().Aot();n+=Sy(e[0],i,"offsetOpacity");for(let t=1;t<e.length;t++)n+=Sy(e[t],i,"offsetOpacity");t.xot=0===n?1:n}},t=>{switch(t.frt.K7()){case"relative":{t.Iot=0;const s=t.kB();let i=s.SO();i=Math.round(100*(i+Number.EPSILON))/100,t.frt.jit().nst()?(s.bO(i+t.Got),t.N_=0):(s.bO(i-t.Pot),t.N_=t.Htt().crt());break}}}),yy("offsetOriginX",(t,s)=>t.Rot(s),(t,s)=>t.PH(s),t=>t.GH(),!1),yy("offsetOriginY",(t,s)=>t.Eot(s),(t,s)=>t.EH(s),t=>t.RH(),!1),yy("offsetZElevation",(t,s)=>t.Oot(s),(t,s)=>t.sC(s),t=>t.tC(),!0),yy("offsetScaleX",(t,s,i,e)=>{if(0===s)return;const n=t.Vg()<0?-1:1;if(e.Dot+=s,"relative"===e.frt.K7()&&t.wz()&&t.xz()){const r=Sy(t,i,"offsetWidth"),h=isNaN(e.Fot)?i.yet():e.Fot,o=(h+r/(t.Urt().Vrt()/h))*n*s;isNaN(e.Sot)&&gy.get("offsetWidth").fot(t,1,i,e,!0);const a=o/e.Sot;t.Iy(a,!0),e.bot+=a}else{const r=(isNaN(e.Fot)?i.yet():e.Fot)*n*s;t.Iy(r),e.bot+=r}},(t,s,i)=>{t.Xg(i.yet()*s)},(t,s)=>{const i=t.Vg()<0?-1:1;if(t.xz()){const e=t.rz(),n=s.jit().mit(e.Pq());let r=NaN;if(n)r=e.Vg()/n.yet();else{const t=e.Pq().iJ();r=t.wet()?e.Vg()/t.yet():1}return t.Vg()*i/(s.yet()*r)}return t.Vg()*i/s.yet()},!1,!1,null,t=>{t.bot=0,t.Fot=NaN,t.Dot=0}),yy("offsetScaleY",(t,s,i,e)=>{if(0===s)return;const n=t.Qg()<0?-1:1;if(e.kot+=s,"relative"===e.frt.K7()&&t.wz()&&t._z()){const r=Sy(t,i,"offsetHeight"),h=isNaN(e.Fot)?i.bet():e.Fot,o=(h+r/(t.Urt().qrt()/h))*n*s;isNaN(e.Sot)&&gy.get("offsetHeight").fot(t,1,i,e,!0);const a=o/e.Sot;t.Cot(a,!0),e.bot+=a}else{const r=(isNaN(e.Fot)?i.bet():e.Fot)*n*s;t.Cot(r),e.bot+=r}},(t,s,i)=>{t.Ug(i.bet()*s)},(t,s)=>{const i=t.Qg()<0?-1:1;if(t._z()){const e=t.rz(),n=s.jit().mit(e.Pq());let r=NaN;if(n)r=e.Qg()/n.bet();else{const t=e.Pq().iJ();r=t.wet()?e.Qg()/t.bet():1}return t.Qg()*i/(s.bet()*r)}return t.Qg()*i/s.bet()},!1,!1,null,t=>{t.bot=0,t.Fot=NaN,t.kot=0});class by extends py.Wit._rt{constructor(t){super(t),this.N_=0,this.Iot=0,this.Got=0,this.Pot=0,this.xot=NaN,this.Sot=NaN,this.bot=0,this.Fot=NaN,this.vot=0,this.Dot=0,this.Mot=0,this.kot=0,this.Lot=void 0,this.Not=void 0,this.Bot=null,this.$ot=null,this.Wot=null,this.jot=null,this.Vot=null,this.Uot=null,this.Hot=null,this.zot=null,this.Jot=!1,this.qot=!1,py.Le(this.frt.jit(),py.Yot)?this.wot=new py.Wit._rt.Xot(this):this.wot=new py.Wit._rt.Kot(this);const s=this.frt.pit();switch(this.frt.Kit()){case"world-instance":{const t=gy.get(s);this.Bot=t.pot,this.$ot=t.fot,this.Wot=t.dot,this.Jot=t.round,this.qot=t.mot,this.Vot=t.init,this.jot=t.reset;break}case"audio":this.Uot=t.Aht,this.Hot=t.Rht,this.zot=t.Eht,this.Jot=!!t.Oht(),this.qot=!1}}zn(){this.wot=null,this.Bot=null,this.$ot=null,this.Wot=null,this.jot=null,this.Vot=null,this.Uot=null,this.Hot=null,this.zot=null,super.zn()}Znt(){return this.wot.Znt()}Zot(){return this.N_}Qot(t){this.N_=t}kst(){this.jot&&this.jot(this)}o7(){const t=this.wot.o7();if("number"==typeof t&&(this.N_=t),this.Vot){const t=this.kB(),s=this.frt.pnt();this.Vot(this,t,s)}}zst(){const t=this.wot.zst();"number"==typeof t&&(this.N_=t)}Xnt(){return this.$ht()}Jet(){return this.Wht()!==this.Xnt()}qet(){return!py.ee(this.kht)&&this.kht!==this.Xnt()}yrt(){this.wot.yrt()}Crt(t,s,i,e,n,r,h,o){return this.wot.Crt(t,s,i,e,n,r,h,o)}Trt(){this.wot.Trt()}$ht(){const t=this.Yht(),s=this.qht(),i=this.kB(),e=this.frt.pnt();switch(this.frt.Kit()){case"behavior":case"plugin":return t.sot(s);case"effect":return t[s];case"instance-variable":return t.uot(s);case"world-instance":return this.Bot(i,e);case"audio":return this.Uot.call(this.Htt(),i,e)}}hot(t,s,i,e=!0){const n=this.Yht(),r=this.qht(),h=this.kB(),o=this.frt.pnt();switch(this.frt.Kit()){case"behavior":n.tat(r,t);break;case"effect":n[r]+=t;break;case"instance-variable":n.sat(r,t);break;case"plugin":n.tat(r,t,this.Htt().Nrt());break;case"world-instance":this.$ot(h,t,o,this,!1,e);break;case"audio":this.Hot.call(this.Htt(),h,t,o,this)}}iat(t,s,i){let e=this.frt.Ktt();if(e="default"===e?"continuous":e,"discrete"===e&&!s)return;if("discrete"===e&&i){const t=this.frt.jit().YD();if(!this.frt.Vnt(t))return}const n=this.Yht(),r=this.qht(),h=this.kB(),o=this.frt.pnt();switch(this.frt.Kit()){case"behavior":n.oot(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.cot(r,t);break;case"plugin":n.oot(r,t,this.Htt().Nrt());break;case"world-instance":this.Wot(h,t,o);break;case"audio":this.zot.call(this.Htt(),h,t,o)}}eat(t,s,i,e,n,r,h,o){this.wot.eat(t,s,i,e,n,r,h,o)}nat(t,s,i,e,n){"angle"===this.frt.Ent()&&(t=py.tr(t));const r=(t.toString().split(".")[1]||"").length,h=this.$ht();let o;switch(o=0===r?this.Jot?Math.round(h):this.qot?"angle"===this.frt.Ent()?py.Qn(Math.round(py.tr(h))):Number(py.toFixed(h,2)):h:this.Jot?Number(py.toFixed(h,r)):(this.qot,h),this.hot(o-h,s,i,!1),this.frt.pit()){case"offsetWidth":case"offsetScaleX":{const t=this.kB(),s=t.Vg(),i=Number(py.toFixed(s,2));t.Iy(i-s);break}case"offsetHeight":case"offsetScaleY":{const t=this.kB(),s=t.Qg(),i=Number(py.toFixed(s,2));t.Cot(i-s);break}}}e4(){return Object.assign(super.e4(),{v:this.N_,a:this.Iot,fod:this.Got,bod:this.Pot,of:this.xot,sf:this.Sot,armorf:this.Lot,armandf:this.Not,ca:this.bot,os:this.Fot,awo:this.vot,aho:this.Mot,asxo:this.Dot,asyo:this.kot})}n4(t){t&&(super.n4(t),this.N_=t.v,this.Iot=t.a,this.Got=py.te(t.fod)?t.fod:0,this.Pot=py.te(t.bod)?t.bod:0,this.xot=py.te(t.of)?t.of:NaN,this.Sot=py.te(t.sf)?t.sf:NaN,this.Lot=py.te(t.armorf)?t.armorf:void 0,this.Not=py.te(t.armandf)?t.armandf:void 0,this.bot=py.te(t.ca)?t.ca:0,this.Fot=py.te(t.os)?t.os:NaN,this.vot=py.te(t.awo)?t.awo:0,this.Mot=py.te(t.aho)?t.aho:0,this.Dot=py.te(t.asxo)?t.asxo:0,this.kot=py.te(t.asyo)?t.asyo:0)}Wrt(t){this.Fot=t}zrt(){return this.bot}Qrt(){return this.vot}sht(){return this.Mot}Zrt(){return this.Dot}tht(){return this.kot}}py.Wit._rt.Grt=by}{const My=self._s;class Cy{constructor(t){this.rat=!1,this.iht=0,this.hat=!1,this.oat=!1,this.Fit=t;for(let t=0,s=this.Fit.length;t<s;t++)this.Fit[t].fnt(this)}dit(){return this.Fit}aat(){this.rat=!0}lat(){return this.rat}urt(t){this.iht=t}Gnt(){return this.iht}uat(t){this.hat=t}cat(){return this.hat}Xst(t){this.oat=t}fat(){return this.oat}$f(){this.rat=!1,this.iht=0,this.hat=!1,this.oat=!1}}class Ty{constructor(t){this.dat=t}zn(){this.dat=null}YI(){return 0}o7(){const t=this.dat;return this.dat.Fq(),t.Hht(()=>t.Vht(()=>0,()=>t.Htt().crt()),()=>{})}zst(){}Znt(){switch(this.dat,this.dat.Fq().K7()){case"relative":return!1;case"absolute":return!0}}yrt(){this.dat;const t=this.dat.Fq(),s=t.pit();switch(t.K7()){case"relative":break;case"absolute":if(t.cnt())t.dnt().$f();else{const i=t.jit(),e=t.Pq(),n=t.Htt(),r=i.Utt(e,n,s,t);r&&r.length>1&&new Cy(r)}}}Crt(t,s,i,e,n,r,h,o){const a=this.dat,l=this.dat.Fq();switch(l.K7()){case"relative":{const h=a.Zot();a.hot(s-h,i,e),r&&this.eat(t,i,e,n,h,s),a.Qot(s);break}case"absolute":{const t=l.jit(),i=l.pnt();if(l.Pq(),l.Htt(),l.cnt()){const e=l.dnt(),n=e.dit(),r=a.Kht(n,!0),u=a.Zht(t,t.YD(),r);if(u){const t=i.Zst(),n=u.time-t;if(0===n)e.Xst(h),e.uat(o),e.aat(),e.urt(e.Gnt()+s);else{if(n<0)return;const t=l.Qnt(n);e.Xst(h),e.uat(o),e.aat(),e.urt(e.Gnt()+(s-t))}}}else a.iat(s,o,h);break}}}Trt(){const t=this.dat,s=this.dat.Fq();switch(s.K7()){case"relative":break;case"absolute":if(s.cnt()){const i=s.dnt();i.lat()&&t.iat(i.Gnt(),i.cat(),i.fat())}}}eat(t,s,i,e,n,r){const h=this.dat;e||(s&&t===s.YD()?h.nat(s.r9(),s,i):i&&t===i.YD()?h.nat(i.r9(),s,i):r-n===0&&h.nat(s.r9(),s,i))}}My.Wit._rt.Kot=Ty}{const xy=self._s;class Iy{constructor(t){this.dat=t}zn(){this.dat=null}YI(){return 1}o7(){const t=this.dat;return t.Nht(!0),this.Jht(t.Wht())}zst(){const t=this.dat;if(t.Wht()!==t.Uht())return t.Nht(!0),this.Jht(t.Uht())}Znt(){return!1}yrt(){}Crt(t,s,i,e,n,r,h,o){const a=this.dat,l=a.Zot();switch(a.Fq().K7()){case"relative":a.hot(s-l,i,e),r&&this.eat(t,i,e,n,l,s,!1,h);break;case"absolute":a.Bht()?(a.Nht(!1),a.hot(l,i,e)):0===t&&0===a.Fq().jit().lq()?a.iat(s,!0,!1):(a.hot(s-l,i,e),r&&this.eat(t,i,e,n,l,s,this.pat(),h))}a.Qot(s)}Trt(){}Jht(t){return t-this.dat.Xnt()}pat(){const t=this.dat,s=t.kB().Pq(),i=t.Fq().l$().Vtt();let e=0;for(const t of i.F6())0===t.YI()?t.W6(s)&&e++:1===t.YI()&&t.Pq()===s&&e++;return e<=1}eat(t,s,i,e,n,r,h,o){const a=this.dat;e?s&&t===s.YD()?a.nat(s.r9(),s,i,h,o):i&&t===i.YD()?a.nat(i.r9(),s,i,h,o):i||a.nat(s.r9(),s,i,h,o):s&&t===s.YD()?a.nat(s.r9(),s,i,h,o):i&&t===i.YD()?a.nat(i.r9(),s,i,h,o):r-n===0&&a.nat(s.r9(),s,i,h,o)}}xy.Wit._rt.Xot=Iy}{const _y=self._s,Gy=self.Vu;_y.Wit.wrt=class{constructor(){}static lot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.sot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.uot(t)}return n!==i}static vc(t,s,i,e){if(!i){let t=e.mnt();return t=e.$it().Krt(t),t.r9()}let n=e.Ktt();if("default"===n&&(n="continuous"),"combo"===e.Ent()&&(n="discrete"),"discrete"===n)return s.r9();if("continuous"===n||"step"===n){const r=e.jit().Ytt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.r9(),o=i.r9(),a=s.e9("cubic-bezier"),l=i.e9("cubic-bezier"),u=a&&a.mat()&&l&&l.gat();if(!u&&h===o)return h;const c=s.YD(),f=i.YD();"step"===n&&0!==r&&(t=_y.Kn(t,c,f));const d=_y.normalize(t,c,f),p=s.lrt();let m;if(u){const t=f-c;m=Gy.hc(p)(t*d,0,1,t),m=Gy.hc("cubicbezier")(m,h,h+a.a9(),o+l.c9(),o)}else m=Gy.hc(p)((f-c)*d,h,o-h,f-c);return"integer"===e.Ent()?Math.floor(m):m}}}}{const Py=self._s;Py.Wit.Srt=class{constructor(){}static lot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.sot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.uot(t)}return n!==i}static vc(t,s,i,e){if(!i){let t=e.mnt();return t=e.$it().Krt(t),t.r9()}let n=e.Ktt();if("default"===n&&(n="continuous"),"combo"===e.Ent()&&(n="discrete"),"discrete"===n)return s.r9();if("continuous"===n||"step"===n){const r=e.jit().Ytt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.YD(),o=i.YD(),a=s.r9(),l=i.r9();"step"===n&&0!==r&&(t=Py.Kn(t,h,o));const u=s.e9("angle");if(!u){if(a===l)return a;const i=Py.normalize(t,h,o),e=self.Vu.hc(s.lrt());return Py.ur(a,l,e(i,0,1,1))}{const i=u.yat();if(a===l&&0===i)return a;const e=Py.normalize(t,h,o),n=self.Vu.hc(s.lrt())(e,0,1,1);switch(u.wat()){case"closest":return Py.ur(a,l,n,i);case"clockwise":return Py.cr(a,l,n,i);case"anti-clockwise":return Py.dr(a,l,n,i)}}}}}}{const Ay=self._s;Ay.Wit.vrt=class{constructor(){}static lot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.sot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.uot(t)}return!!n!=!!i}static vc(t,s,i,e){if(!i){let t=e.mnt();return t=e.$it().Krt(t),t.r9()?1:0}return s.r9()?1:0}}}{const Ry=self._s,Ey=[0,0,0],Oy=[0,0,0],Dy=[0,0,0];Ry.Wit.brt=class{constructor(){}static lot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.sot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.uot(t)}return Array.isArray(i)?(Ey[0]=i[0],Ey[1]=i[1],Ey[2]=i[2]):(Dy.oa(i),Ey[0]=Math.floor(255*Dy.No()),Ey[1]=Math.floor(255*Dy.Bo()),Ey[2]=Math.floor(255*Dy.$o())),Array.isArray(n)?(Oy[0]=n[0],Oy[1]=n[1],Oy[2]=n[2]):(Dy.oa(n),Oy[0]=Math.floor(255*Dy.No()),Oy[1]=Math.floor(255*Dy.Bo()),Oy[2]=Math.floor(255*Dy.$o())),Ey[0]!==Oy[0]||Ey[1]!==Oy[1]||Ey[2]!==Oy[2]}static vc(t,s,i,e){if(!i){let t=e.mnt();t=e.$it().Krt(t);const s=t.r9();return Ey[0]=s[0],Ey[1]=s[1],Ey[2]=s[2],Ey}let n=e.Ktt();if("default"===n&&(n="continuous"),"discrete"===n){const t=s.r9();return Ey[0]=t[0],Ey[1]=t[1],Ey[2]=t[2],Ey}if("continuous"===n||"step"===n){const r=e.jit().Ytt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.YD(),o=i.YD(),a=s.r9(),l=i.r9();"step"===n&&0!==r&&(t=Ry.Kn(t,h,o));const u=Ry.normalize(t,h,o),c=s.lrt(),f=a[0],d=a[1],p=a[2],m=l[0],g=l[1],y=l[2],w=self.Vu.hc(c),S=o-h,v=S*u;return Ey[0]=f===m?f:w(v,f,m-f,S),Ey[1]=d===g?d:w(v,d,g-d,S),Ey[2]=p===y?p:w(v,p,y-p,S),Ey}}}}{const Fy=self._s;Fy.Wit.Mrt=class{constructor(){}static lot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.sot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.uot(t)}return n!==i}static vc(t,s,i,e){if(!i){let t=e.mnt();return t=e.$it().Krt(t),t.r9()}return s.r9()}}}{const ky=self._s;ky.V8=class{constructor(){this.Sat=new Map}zn(){for(const t of this.Sat.values())t.zn();this.Sat.clear(),this.Sat=null}$u(t){const s=new ky.vat(t),i=s.Ac();this.Sat.set(i,s)}zs(t){return this.Sat.get(t)}ktt(){return 0}static bat(t,s,i,e){if(s)for(const n of s)ky.V8.Mat("create",n,t,i,e)}static Cat(t,s,i,e){if(s)for(const n of s)ky.V8.Mat("create-including-disabled",n,t,i,e)}static Tat(t,s,i,e){t.length?s.forEach((s,i)=>{t[i].n4(s)}):s.forEach(s=>{ky.V8.Mat("load",s,t,i,e)})}static Mat(t,s,i,e,n){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,n);break;case"create":case"create-including-disabled":r=new e(s,n)}else if("object"==typeof e){const i=s[e.xat],h=e.map.get(i);switch(t){case"load":r=new h(null,n);break;case"create":case"create-including-disabled":r=new h(s,n)}}switch(t){case"load":r.n4(s),i.push(r);break;case"create":if("function"==typeof r.fet&&!r.fet())return r.zn();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const Ly=self._s,Ny=0,By=1,$y=2,Wy=3,jy=4,Vy=5,Uy=6,Hy=7,zy=8,Jy=9,qy=10,Yy=11;Ly.vat=class{constructor(t){this.Yn="",this.Yst=NaN,this.Iat=0,this._at="default",this.Gat="default",this.Pat=!1,this.Aat=!1,this.Rat=1,this.Cit=null,this.Eat="",this.Oat=!1,this.Dat=!0,t&&(this.Yn=t[0],this.Yst=t[1],this.Iat=t[2],this._at=t[3],this.Gat=t[4],this.Pat=!!t[6],this.Aat=!!t[7],this.Rat=t[8],this.Eat=t[9],this.Oat=!!t[10],this.Dat=!!t[11],this.Cit=new Ly.Fat(t[5],this))}zn(){this.Cit.zn(),this.Cit=null}Wtt(){return this.Cit||(this.Cit=new Ly.Fat(null,this)),this.Cit}Ac(){return this.Yn}nX(t){this.Yn=t}lq(){return this.Yst}aq(t){this.Yst=t}Ytt(){return this.Iat}Xtt(t){this.Iat=t}Ktt(){return this._at}Ztt(t){this._at=t}K7(){return this.Gat}Qtt(t){this.Gat=t}cq(){return this.Pat}uq(t){this.Pat=t}pq(){return this.Aat}fq(t){this.Aat=t}GJ(){return this.Rat}tst(t){this.Rat=t}S7(){return this.Eat}sst(){return this.Oat}ist(){return this.Dat}e4(){return{trackDataJson:this.Cit.e4(),name:this.Yn,totalTime:this.Yst,step:this.Iat,interpolationMode:this._at,resultMode:this.Gat,loop:this.Pat,pingPong:this.Aat,repeatCount:this.Rat,startOnLayout:this.Eat,transformWithSceneGraph:!!this.Oat,useSystemTimescale:this.Dat}}n4(t){t&&(this.Wtt().n4(t.trackDataJson),this.Yn=t.name,this.Yst=t.totalTime,this.Iat=t.step,this._at=t.interpolationMode,this.Gat=t.resultMode,this.Pat=t.loop,this.Aat=t.pingPong,this.Rat=t.repeatCount,this.Eat=t.startOnLayout,this.Oat=!!t.transformWithSceneGraph,this.Dat=!!t.useSystemTimescale)}}}{const Xy=self._s,Ky=0,Zy=1,Qy=2,tw=1,sw=2,iw=3,ew=4,rw=5,hw=6,ow=7,aw=0,lw=1,uw=8,cw=0,fw=1,dw=9,pw=10;class mw{constructor(t,s){this.Cit=s,this.kat=null,this.Lat=null,this.Tit=NaN,this.xit=NaN,this._at="default",this.Gat="default",this.du=!1,this.Nat=null,this.nnt=null,this.Wc="",this.Bat=null,this.$at=0,this.Wat=this.Cit.qtt().lq(),this.Jc=0,this.Yn="",t&&(t[0]&&(this.kat=t[0],this.Tit=t[0][2],this.xit=t[0][1]),this._at=t[1],this.Gat=t[2],this.du=!!t[3],t[6]&&(this.Wc=t[6]),t[7]&&(this.Bat=t[7],this.$at=t[7][0],this.Wat=t[7][1]),t[8]&&(this.Lat=t[8]),t[8]&&(this.Lat=t[8]),t[9]&&(this.Jc=t[9]),t[10]&&(this.Yn=t[10]),this.Nat=new Xy.jat(t[4],this),this.nnt=new Xy.Vat(t[5],this))}zn(){this.kat=null,this.Cit=null,this.Nat&&(this.Nat.zn(),this.Nat=null),this.nnt&&(this.nnt.zn(),this.nnt=null),this.Bat=null}Wtt(){return this.Cit}tit(){return this.Nat||(this.Nat=new Xy.jat(null,this)),this.Nat}$it(){return this.nnt||(this.nnt=new Xy.Vat(null,this)),this.nnt}Uat(){return this.kat}zit(){return this.xit}pet(t){this.xit=t}Hit(){return this.Tit}let(t){this.Tit=t}Ktt(){return this._at}Ztt(t){this._at=t}K7(){return this.Gat}Qtt(t){this.Gat=t}fet(){return this.du}det(t){this.du=!!t}Oq(){return this.Wc}Zst(){return this.$at}uet(){return this.Wat}cet(t){this.Wat=t}yet(){return this.Lat[0]}met(t){this.Lat||(this.Lat=[]),this.Lat[0]=t}bet(){return this.Lat||(this.Lat=[]),this.Lat[1]}vet(t){this.Lat||(this.Lat=[]),this.Lat[1]=t}YI(){return this.Jc}Ac(){return this.Yn}e4(){return{keyframeDataJson:this.Nat.e4(),propertyTrackDataJson:this.nnt.e4(),instanceData:this.kat,additionalInstanceData:this.Lat,instanceUid:this.Tit,objectClassIndex:this.xit,interpolationMode:this._at,resultMode:this.Gat,enabled:this.du,id:this.Wc,nestedData:this.Bat,type:this.Jc,name:this.Yn}}n4(t){t&&(this.kat=t.instanceData,this.Tit=t.instanceUid,this.xit=t.objectClassIndex,this._at=t.interpolationMode,this.Gat=t.resultMode,this.du=t.enabled,this.Wc=t.id,this.Jc=t.type?t.type:0,this.Yn=t.name?t.name:"",this.Wat=this.Cit.qtt().lq(),t.nestedData&&(this.Bat=t.nestedData,this.$at=this.Bat[0],this.Wat=this.Bat[1]),t.additionalInstanceData&&(this.Lat=t.additionalInstanceData),this.tit().n4(t.keyframeDataJson),this.$it().n4(t.propertyTrackDataJson))}}Xy.Fat=class{constructor(t,s){this.ett=s,this.Hat=[],Xy.V8.bat(this.Hat,t,mw,this)}zn(){this.ett=null;for(const t of this.Hat)t.zn();Xy.bh(this.Hat),this.Hat=null}qtt(){return this.ett}rit(){const t=new mw(null,this);return this.Hat.push(t),t}zat(t){return t.tit().Dit()[0]}Jat(t){return t.tit().Dit().at(-1)}Fet(t,s){const i=s.tit().Dit(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.YD()===t)return e}}qat(t,s){const i=s.tit().Dit(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.YD()>t)return e}}Oet(t,s){const i=s.tit().Dit(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.YD()>=t)return e}}Ret(t,s){const i=s.tit().Dit();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.YD()<=t)return e}}*$tt(){for(const t of this.Hat)yield t}e4(){return{trackDataItemsJson:this.Hat.map(t=>t.e4())}}n4(t){t&&Xy.V8.Tat(this.Hat,t.trackDataItemsJson,mw,this)}}}{const gw=self._s,yw=0,ww=0,Sw=1,vw=2,bw=3,Mw=4,Cw=5,Tw=6,xw=7,Iw=8,_w=9;class Gw{constructor(t,s){this.nnt=s,this.Yat="",this.Xat=null,this.Dht=null,this.Jc=null,this.Kat=NaN,this.Zat=NaN,this._at="default",this.Gat="default",this.du=!1,this.Qat=null,this.tlt=!0,t&&(this.Yat=t[0][0],this.Xat=t[0].slice(1),this.Dht=t[1],this.Jc=t[2],this.Kat=t[3],this.Zat=t[4],this._at=t[5],this.Gat=t[6],this.du=!!t[7],this.Qat=new gw.slt(t[8],this),this.tlt=t[9])}zn(){this.Qat.zn(),this.Qat=null,this.nnt=null,this.Xat=null}$it(){return this.nnt}ant(){return this.Qat||(this.Qat=new gw.slt(null,this)),this.Qat}Kit(){return this.Yat}Cnt(t){this.Yat=t}xnt(){return this.Xat}_nt(t){this.Xat=t}Pnt(){return this.Dht}Rnt(t){this.Dht=t}YI(){return this.Jc}Dnt(t){this.Jc=t}Lnt(){return this.Kat}Nnt(t){this.Kat=t}Bnt(){return this.Zat}$nt(t){this.Zat=t}Ktt(){return this._at}Ztt(t){this._at=t}K7(){return this.Gat}Qtt(t){this.Gat=t}fet(){return this.du}det(t){this.du=!!t}jnt(){return!!this.tlt}e4(){return{propertyKeyframeDataJson:this.Qat.e4(),sourceAdapterId:this.Yat,sourceAdapterArguments:this.Xat,property:this.Dht,type:this.Jc,min:this.Kat,max:this.Zat,interpolationMode:this._at,resultMode:this.Gat,enabled:this.du,canHavePropertyKeyframes:this.tlt}}n4(t){t&&(this.Yat=t.sourceAdapterId,this.Xat=t.sourceAdapterArguments,this.Dht=t.property,this.Jc=t.type,this.Kat=t.min,this.Zat=t.max,this._at=t.interpolationMode,this.Gat=t.resultMode,this.du=t.enabled,this.tlt=t.canHavePropertyKeyframes,this.ant().n4(t.propertyKeyframeDataJson))}}gw.Vat=class{constructor(t,s){this.Mit=s,this.ilt=[],gw.V8.bat(this.ilt,t,Gw,this)}zn(){this.Mit=null;for(const t of this.ilt)t.zn();gw.bh(this.ilt),this.ilt=null}Qst(){return this.Mit}jet(){const t=new Gw(null,this);return this.ilt.push(t),t}knt(t){return t.ant().ont()[0]}Krt(t){return t.ant().ont().at(-1)}Vnt(t,s){const i=s.ant().ont(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.YD()===t)return e}}znt(t,s){const i=s.ant().ont(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.YD()>t)return e}}Jnt(t,s){const i=s.ant().ont(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.YD()>=t)return e}}Unt(t,s){const i=s.ant().ont();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.YD()<=t)return e}}*Bit(){for(const t of this.ilt)yield t}e4(){return{propertyTrackDataItemsJson:this.ilt.map(t=>t.e4())}}n4(t){t&&gw.V8.Tat(this.ilt,t.propertyTrackDataItemsJson,Gw,this)}}}{const Pw=self._s,Aw=0,Rw=1,Ew=2,Ow=3;class Dw{constructor(t,s){if(this.Nat=s,this.HF=-1,this.elt="noease",this.nlt=!1,this.Att=null,this.rlt=null,!t)return;this.HF=t[0],this.elt=t[1],this.nlt=!!t[2];const i=t[3];this.Att=i?i.split(" "):[],this.rlt=new Set(this.Att.map(t=>t.toLowerCase())),this.hlt=null,this.olt=null}zn(){this.Nat=null,Pw.bh(this.Att),this.Att=null,this.rlt.clear(),this.rlt=null,this.hlt=null}tit(){return this.Nat}V7(){return this.hlt}llt(t){this.hlt=t}Det(){return this.olt}ult(t){this.olt=t}YD(){return this.HF}oq(t){this.HF=t,this.Nat.clt()}lrt(){return this.elt}Gq(t){this.elt=t}fet(){return this.nlt}det(t){this.nlt=!!t}yq(){return this.Att}rst(t){this.Att=t?t.split(" "):[],this.rlt=new Set(this.Att.map(t=>t.toLowerCase()))}flt(){return this.rlt}wit(t){return this.rlt.has(t.toLowerCase())}e4(){return{time:this.HF,ease:this.elt,enable:this.nlt,tags:this.Att}}n4(t){t&&(this.HF=t.time,this.elt=t.ease,this.nlt=t.enable,this.Att=t.tags,this.rlt=new Set(this.Att.map(t=>t.toLowerCase())))}}Pw.jat=class{constructor(t,s){this.Mit=s,this.Oit=[],Pw.V8.bat(this.Oit,t,Dw,this),this.clt()}zn(){this.Mit=null;for(const t of this.Oit)t.zn();Pw.bh(this.Oit),this.Oit=null}clt(){this.Oit.sort((t,s)=>t.YD()-s.YD());for(let t=0;t<this.Oit.length;t++){const s=this.Oit[t];s.llt(this.Oit[t+1]),s.ult(this.Oit[t-1])}}Qst(){return this.Mit}dlt(){return this.Oit.length}Dit(){return this.Oit}$et(){const t=new Dw(null,this);return this.Oit.push(t),this.clt(),t}Uet(t){for(const s of this.Oit){if(!t(s))continue;const i=this.Oit.indexOf(s);-1!==i&&(s.zn(),this.Oit.splice(i,1))}this.plt(),this.clt()}plt(){this.Oit.sort((t,s)=>t.YD()-s.YD())}tnt(t){return this.Oit.indexOf(t)}snt(t){return this.Oit[t]}*mlt(){for(const t of this.Oit)yield t}*glt(){for(let t=this.Oit.length-1;t>=0;t--)yield this.Oit[t]}e4(){return{keyframeDataItemsJson:this.Oit.map(t=>t.e4())}}n4(t){t&&(Pw.V8.Tat(this.Oit,t.keyframeDataItemsJson,Dw,this),this.clt())}}}{const Fw=self._s,kw=0,Lw=0,Nw=1,Bw=2,$w=1,Ww=2,jw=3,Vw=4,Uw=5;class Hw{constructor(t,s){this.Qat=s,this.iht=null,this.ylt=null,this.Jc="",this.HF=NaN,this.elt="noease",this.nlt=!1,this.wlt=null,this.Slt=void 0,this.vlt="line",t&&(this.iht=t[0][0],this.ylt=t[0][1],this.Jc=t[0][2],this.HF=t[1],this.elt=t[2],this.nlt=!!t[3],this.vlt=t[5],this.wlt=null,t[4]&&(this.wlt=new Fw.blt(t[4],this)),this.hlt=null,this.Mlt=null)}zn(){this.Qat=null,this.wlt&&(this.wlt.zn(),this.wlt=null),this.hlt=null,this.Mlt=null}Clt(){return this.wlt}llt(t){this.hlt=t}V7(){return this.hlt}Tlt(t){this.Mlt=t}U7(){return this.Mlt}Gnt(){return this.iht}urt(t){"color"===this.Jc&&Fw.te(t)?(this.iht[0]=Fw.Ar(t),this.iht[1]=Fw.Rr(t),this.iht[2]=Fw.Er(t)):this.iht=t}jht(){return this.ylt}hrt(t){"color"===this.Jc&&Fw.te(t)?(this.ylt[0]=Fw.Ar(t),this.ylt[1]=Fw.Rr(t),this.ylt[2]=Fw.Er(t)):this.ylt=t}r9(){const t=this.Qat.mnt().K7();return"relative"===t?this.Gnt():"absolute"===t?this.jht():void 0}YI(){return this.Jc}Dnt(t){this.Jc=t}YD(){return this.HF}oq(t){this.HF=t,this.Qat.xlt()}lrt(){return this.elt}Gq(t){this.elt=t}fet(){return this.nlt}det(t){this.nlt=!!t}H7(){return this.vlt}e9(t){if(!this.wlt)return;if(this.Slt||null===this.Slt)return this.Slt;const s=this.wlt.Ilt();if(!s)return this.Slt=null,this.Slt;const i=s.length;for(let e=0;e<i;e++){const i=s[e];if(i.Oq()===t)return this.Slt=i,this.Slt}return this.Slt=null,this.Slt}e4(){const t=this.wlt;return{addonDataJson:t?t.e4():t,value:this.iht,aValue:this.ylt,type:this.Jc,time:this.HF,ease:this.elt,enable:this.nlt}}n4(t){t&&(t.addonDataJson&&this.wlt._lt(t.addonDataJson),this.iht=t.value,this.ylt=t.aValue,this.Jc=t.type,this.HF=t.time,this.elt=t.ease,this.nlt=t.enable)}}Fw.slt=class{constructor(t,s){this.ent=s,this.hnt=[],this.Glt=[],Fw.V8.bat(this.hnt,t,Hw,this),Fw.V8.Cat(this.Glt,t,Hw,this),this.xlt()}zn(){this.ent=null;for(const t of this.hnt)t.zn();Fw.bh(this.hnt),this.hnt=null;for(const t of this.Glt)t.zn();Fw.bh(this.Glt),this.Glt=null}xlt(){let t=this.hnt;t.sort((t,s)=>t.YD()-s.YD());for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.llt(t[s+1]),s-1>=0&&i.Tlt(t[s-1])}t=this.Glt,t.sort((t,s)=>t.YD()-s.YD());for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.llt(t[s+1]),s-1>=0&&i.Tlt(t[s-1])}}nrt(){const t=new Hw(null,this);return this.hnt.push(t),this.xlt(),t}rrt(t){for(const s of this.hnt){if(!t(s))continue;const i=this.hnt.indexOf(s);-1!==i&&(s.zn(),this.hnt.splice(i,1))}this.Plt(),this.xlt()}Plt(){this.hnt.sort((t,s)=>t.YD()-s.YD())}mnt(){return this.ent}Alt(){return this.hnt.length}Krt(){return this.hnt[this.hnt.length-1]}ont(){return this.hnt}j7(){return this.Glt}*Rlt(){for(const t of this.hnt)yield t}*Elt(){for(let t=this.hnt.length-1;t>=0;t--)yield this.hnt[t]}e4(){const t=this.hnt,s=this.Glt;return{propertyKeyframeDataItemsJson:t.map(t=>t.e4()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.e4())}}n4(t){t&&(Fw.V8.Tat(this.hnt,t.propertyKeyframeDataItemsJson,Hw,this),Fw.V8.Tat(this.Glt,t.propertyKeyframeDataItemsIncludingDisabledJson,Hw,this),this.xlt())}}}{const zw=self._s,Jw=0,qw=1;class Yw{constructor(t,s){this.wlt=s,this.Wc=t[0],this.Olt=t[1]}zn(){this.wlt=null,this.Olt=null}Clt(){return this.wlt}Oq(){return this.Wc}e4(){return{id:this.Wc,data:this.Olt}}n4(t){t&&(this.Wc=t.id,this.Olt=t.data)}}const Xw=0,Kw=1,Zw=2,Qw=3;class tS extends Yw{constructor(t,s){super(t,s),this.Dlt=this.Olt[0],this.Flt=!!this.Olt[1],this.klt=this.Olt[2],this.Llt=!!this.Olt[3]}zn(){super.zn()}a9(){return this.Dlt}mat(){return this.Flt}c9(){return this.klt}gat(){return this.Llt}e4(){return Object.assign(super.e4(),{startAnchor:this.Dlt,startEnable:!!this.Flt,endAnchor:this.klt,endEnable:!!this.Llt})}n4(t){t&&(super.n4(t),this.Dlt=t.startAnchor,this.Flt=!!t.startEnable,this.klt=t.endAnchor,this.Llt=!!t.endEnable)}}const sS=0,iS=1;class eS extends Yw{constructor(t,s){super(t,s),this.Nlt=this.Olt[0],this.Blt=this.Olt[1]}zn(){super.zn()}wat(){return this.Nlt}yat(){return this.Blt}e4(){return Object.assign(super.e4(),{direction:this.Nlt,revolutions:this.Blt})}n4(t){t&&(super.n4(t),this.Nlt=t.direction,this.Blt=t.revolutions)}}zw.blt=class{constructor(t,s){this.$lt=s,this.Wlt=[],zw.V8.bat(this.Wlt,t,{xat:0,map:new Map([["cubic-bezier",tS],["angle",eS]])},this)}zn(){this.$lt=null;for(const t of this.Wlt)t.zn();zw.bh(this.Wlt),this.Wlt=null}jlt(){return this.$lt}Ilt(){return this.Wlt}*Vlt(){for(const t of this.Wlt)yield t}e4(){return{addonDataItemsJson:this.Wlt.map(t=>t.e4())}}n4(t){t&&zw.V8.Tat(this.Wlt,t.addonDataItemsJson,{xat:"id",map:new Map([["cubic-bezier",tS],["angle",eS]])},this)}}}{const nS=self._s,rS="start-value",hS="current-state",oS=0,aS=1;let lS=0;nS.Yot=class extends nS.M6{constructor(t,s){super("tween-"+lS++,t,s),this.Wc="",this.Ult=!1,this.Hlt="start-value",this.Iit=null,this.zlt=null,this.Jlt=null,this.qlt=null,this.int=null,this.Ylt=null}Ntt(t){const s=nS.Hn(nS.Event,"tweenstatereleased");s.Xlt=this,t.dispatchEvent(s)}YI(){return 1}ltt(){for(const t of this.ett.Wtt().$tt())this.ntt.push(nS.Klt.Ux(this,t));this.int=this.ntt[0]}nit(){const t=this.ett.Wtt().rit(),s=nS.Klt.Ux(this,t);return this.ntt.push(s),this.Zlt(),s}Zlt(){this.int=this.ntt[0]}Fq(t){return this.int.dit()[0]}Ont(t){this.Qlt=t}Pq(){const t=this.N7();if(!t||!t.length)return;const s=t[0];if(this.int=s,!s)return;const i=s.Pq();return s.Uit()?i:void 0}tut(t){this.qlt=t}sut(t){this.Jlt||(this.Jlt=[]),this.Jlt.push(t)}iut(t){this.zlt||(this.zlt=[]),this.zlt.push(t)}eut(t){if(!this.Jlt)return;const s=this.Jlt.indexOf(t);-1!==s&&this.Jlt.splice(s,1)}nut(t){if(!this.zlt)return;const s=this.zlt.indexOf(t);-1!==s&&this.zlt.splice(s,1)}rut(t,s){for(const i of this.ntt)for(const e of i.Fit){if(e.pit()!==s)continue;const i=e.$it(),n=e.mnt(),r=i.knt(n);r.urt(t),r.hrt(t)}}hut(t){for(const s of this.ntt)for(const i of s.Fit)if(i.pit()===t)return i}out(t){let s=!1;for(const i of t){const t=this.hut(i);t&&(this.rut(t.Xnt(),i),s=!0)}if(s){if(this.nst()){const t=this.lq()-this.YD();this.aq(t);for(const s of this.ntt)s.cet(t);this.Pst(0)}else{const t=this.YD();this.aq(t);for(const s of this.ntt)s.cet(t);this.Pst(t)}this.Ast()}}aut(t,s){const i=this.hut(s);if(!i)return;const e=i.$it(),n=i.mnt(),r=e.Krt(n);r.oq(this.lq()),r.urt(t),r.hrt(t)}lut(t){this.Wc=t}Oq(){return this.Wc}uut(t){this.Hlt=t}cut(){return this.Hlt}Eq(t){this.Ult=t}Rq(){return this.Ult}lst(){if(this.Jlt)for(const t of this.Jlt)t(this);if(!this.m7())for(const t of this.ntt)t.qet()}yst(){this.Ttt=this.Bc.LN()}y7(){if(!this._tt&&(this._tt=!0,this.zlt))for(const t of this.zlt)t(this)}oq(t){this.fut(),super.oq(t)}Fst(t){nS.te(t)||(t=this.lq()),t<0?this.ftt=0:t>=this.lq()?this.ftt=this.lq():this.ftt=t,this.int.kst()}o7(t){if(!this.g7()&&"current-state"===this.cut())for(const t of this.ntt)t.Jet();super.o7(t)}nq(t=!1){if(super.nq(t),!this.m7())for(const t of this.ntt)t.zet()}$f(t=!0,s=!1){this.fut(),super.$f(t,s)}fut(){for(const t of this.ntt){const s=t=>{const s=t.YD(),i=this.lq();return 0!==s&&s!==i};t.Vet(s),t.Het(s)}}h6(){if(this.iq())return!0;const t=this.Pq();return!(t&&t.fU().WQ()||(this.itt.e7(this),this.Ust(),0))}c7(t,s,i){if(this.Iit||(this.Iit=this.Pq()),!this.Iit||this.Iit.SY())return this.nq(!0),void this.yst();const e=this.Iit.WN();if(-1!==e&&(t=i*e),0===t&&0===this.Ptt)return;this.Ptt=t;const n=this.ftt+this.dtt+t*this.ptt,r=this.ett.Yst;n<0?(this.ftt=0,this.dtt=-n):n>=r?(this.ftt=r,this.dtt=this.ftt-n):(this.ftt=n,this.dtt=0);let h=!1,o=!1;const a=this.cq(),l=this.pq();if(a||l?a&&!l?this.ptt>0?this.ftt>=r&&(this.Fst(0),this.dut(nS.yut.gut.t$.mut),this.dut(nS.yut.gut.t$.wut),o=!0):this.ftt<=0&&(this.Fst(r),this.dut(nS.yut.gut.t$.mut),this.dut(nS.yut.gut.t$.wut),o=!0):!a&&l?this.ptt>0?this.ftt>=r&&(this.Pst(r),this.mq(-1*this.gq()),o=!0,1===this.mtt?this.ytt<this.GJ()?(this.ytt++,this.dut(nS.yut.gut.t$.mut),this.dut(nS.yut.gut.t$.wut),this.dut(nS.yut.gut.t$.Sut),this.dut(nS.yut.gut.t$.vut),this.IsPlaying()?this.mtt=0:this.gtt=0):(this.dut(nS.yut.gut.t$.Sut),this.dut(nS.yut.gut.t$.vut),h=!0):0===this.mtt&&(this.dut(nS.yut.gut.t$.Sut),this.dut(nS.yut.gut.t$.vut),this.IsPlaying()?this.mtt=1:this.gtt=1)):this.ftt<=0&&(this.Pst(0),this.mq(-1*this.gq()),o=!0,1===this.mtt?this.ytt<this.GJ()?(this.ytt++,this.dut(nS.yut.gut.t$.mut),this.dut(nS.yut.gut.t$.wut),this.dut(nS.yut.gut.t$.Sut),this.dut(nS.yut.gut.t$.vut),this.IsPlaying()?this.mtt=0:this.gtt=0):(h=!0,this.dut(nS.yut.gut.t$.Sut),this.dut(nS.yut.gut.t$.vut)):0===this.mtt&&(this.dut(nS.yut.gut.t$.Sut),this.dut(nS.yut.gut.t$.vut),this.IsPlaying()?this.mtt=1:this.gtt=1)):a&&l&&(this.ptt>0?this.ftt>=r&&(this.Pst(r),this.mq(-1*this.gq()),o=!0,0===this.mtt&&(this.dut(nS.yut.gut.t$.Sut),this.dut(nS.yut.gut.t$.vut)),1===this.mtt&&(this.dut(nS.yut.gut.t$.mut),this.dut(nS.yut.gut.t$.wut),this.dut(nS.yut.gut.t$.Sut),this.dut(nS.yut.gut.t$.vut)),this.IsPlaying()?(this.mtt++,this.mtt=nS.wrap(this.mtt,0,2)):(this.gtt=this.mtt+1,this.gtt=nS.wrap(this.gtt,0,2))):this.ftt<=0&&(this.Pst(0),this.mq(-1*this.gq()),o=!0,0===this.mtt&&(this.dut(nS.yut.gut.t$.Sut),this.dut(nS.yut.gut.t$.vut)),1===this.mtt&&(this.dut(nS.yut.gut.t$.mut),this.dut(nS.yut.gut.t$.wut),this.dut(nS.yut.gut.t$.Sut),this.dut(nS.yut.gut.t$.vut)),this.IsPlaying()?(this.mtt++,this.mtt=nS.wrap(this.mtt,0,2)):(this.gtt=this.mtt+1,this.gtt=nS.wrap(this.gtt,0,2)))):this.ptt>0?this.ftt>=r&&(this.ytt<this.GJ()?(this.ytt++,this.Fst(0),this.dut(nS.yut.gut.t$.mut),this.dut(nS.yut.gut.t$.wut),o=!0):(this.Pst(r),h=!0)):this.ftt<=0&&(this.ytt<this.GJ()?(this.ytt++,this.Fst(r),this.dut(nS.yut.gut.t$.mut),this.dut(nS.yut.gut.t$.wut),o=!0):(this.Pst(0),h=!0)),!this.iq()&&this.IsPlaying()){if(h)return this.int.Xst(),this.nq(!0),void this.yst();this.int.vc(this.ftt,!0,!1,o,this.Gtt,!1),this.Gtt&&(this.Gtt=!1)}}dut(t){const s=this.Pq();this.qlt.but(this),this.Bc.qU(t,s,this.qlt.fJ()),this.qlt.Mut()}e4(){const t=super.e4(),s=this.qtt();return Object.assign(t,{tweenDataItemJson:s.e4(),id:this.Wc,destroyInstanceOnComplete:this.Ult,initialValueMode:this.Hlt})}n4(t){t&&(this.qtt().n4(t.tweenDataItemJson),super.n4(t),this.Wc=t.id,this.Ult=t.destroyInstanceOnComplete,this.Hlt=t.initialValueMode,this.Zlt())}static IsPlaying(t){return t.IsPlaying()}static bq(t){return t.bq()}static Cut(t){return!!t.pq()&&0===t.est()}static Tut(t){return!!t.pq()&&1===t.est()}static xut(t){const s=t.runtime.Vtt(),i=new nS.vat;if(t.json){i.n4(t.json.tweenDataItemJson);const e=new nS.Yot(i,s);return e.n4(t.json),e}{const e=new nS.Yot(i,s);nS.Te(t.Iut)||(t.Iut=[t.Iut]),e.lut(t.id),e.rst(t.tags),e.uut(t._ut),e.Eq(t.Gut),e.uq(t.loop),e.fq(t.Put),e.aq(t.time),e.Xtt(0),e.Ztt("default"),e.Qtt(t.Iut[0].Aut),e.tst(t._J);const n=e.nit();n.let(t.dJ.xU()),n.Ztt("default"),n.Qtt(t.Iut[0].Aut),n.det(!0),n.pet(t.dJ.fU().CL());const r=t.dJ.iJ(),h=r.wet()?r.yet():t.dJ.kB().Vg(),o=r.wet()?r.bet():t.dJ.kB().Qg();n.met(h),n.vet(o);const a=n.Bet();a.oq(0),a.Gq("noease"),a.det(!0),a.rst("");const l=n.Bet();l.oq(t.time),l.Gq("noease"),l.det(!0),l.rst("");for(const s of t.Iut){const i=n.Wet();i.Cnt(s.Rut),i.Int(s.Eut),i.Ant(s.het),i.Ont(s.type),i.Nnt(NaN),i.$nt(NaN),i.Ztt("default"),i.Qtt(s.Aut),i.det(!0);const e=i.ert();e.Dnt(s.valueType),e.oq(0),e.Gq(s.Out),e.det(!0),e.urt(s.Dut),e.hrt(s.Dut);const r=i.ert();r.Dnt(s.valueType),r.oq(t.time),r.Gq(s.Out),r.det(!0),r.urt(s.Fut),r.hrt(s.Fut),i.Htt()}return e}}static let(t,s){if(!isNaN(s))for(const i of t.N7())i.let(s)}static tut(t,s){t.tut(s)}kut(t,s){return this.Ylt||(this.Ylt=nS.Hn(self.Tq,this,t,s)),this.Ylt}}}{const uS=self._s;uS.Klt=class extends uS.jtt{constructor(t,s){super(t,s),this.Lut=null,this.Nut=null}static Ux(t,s){return uS.Hn(uS.Klt,t,s)}But(){1===this.Fit.length?this.Lut=this.Fit[0]:(this.Lut=this.Fit[0],this.Nut=this.Fit[1])}kit(){for(const t of this.Mit.$it().Bit())this.Fit.push(uS.$ut.Ux(this,t));this.But()}Wet(){const t=this.Mit.$it().jet(),s=uS.$ut.Ux(this,t);return this.Fit.push(s),this.But(),s}o7(){if(this.Vit(),!this.Uit()&&this.Jtt())return;const t=this.jit().nst()?0:this.uet();for(const s of this.Fit)s.o7(t),0===this.Lit&&1===s.Tet()&&(this.Lit=1),0===this.w6&&1===s.a7()&&(this.w6=1);this.Nit=0,this.Fit.some(t=>t.qst())&&(this.Nit=1),this.Eit=this.xet(t),this.Pit=!1,this.Ait=!1,this.vc(t)}Kst(){}vc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){if(this.Iit||this.Pq(),this.Iit)return!this.Iit.SY()&&(!r||!this.fU().WQ())&&(this.Nut?(this.Lut.vc(t,i,e,h),this.Nut.vc(t,i,e,h)):this.Lut.vc(t,i,e,h),void(0!==this.Lut.Tet()&&(this._it||(this._it=this.Iit.kB()),this._it&&this._it.CH())))}sit(){}n4(t){super.n4(t),this.But()}}}{const cS=self._s;cS.$ut=class extends cS.Wit{constructor(t,s){super(t,s),this.Wut=!1}static Ux(t,s){return cS.Hn(cS.$ut,t,s)}vc(t,s=!1,i=!1,e=!1){let n,r;if(this.Wut)n=this.hnt[0],r=this.hnt[1];else if(s)n=this.nnt.Unt(t,this.ent),r=n.V7();else{if(this.lnt){const s=this.jit(),i=this.lnt.V7(),e=this.lnt.YD(),n=i?i.YD():s.lq();(t<=e||t>=n)&&(this.lnt=this.nnt.Unt(t,this.ent))}else this.lnt=this.nnt.Unt(t,this.ent);n=this.lnt,r=n.V7()}this.rnt.vc(t,n,r,s,i,e)}ert(){const t=this.ent.ant().nrt();return this.lnt=null,this.Wut=this.Wnt().length<=2,t}Het(t){this.lnt=null,this.ent.ant().rrt(t),this.Wut=this.Wnt().length<=2}e4(){return{sourceAdapterJson:this.Htt().e4(),basic:this.Wut}}n4(t){t&&(this.Htt().n4(t.sourceAdapterJson),this.Wut=t.basic)}}}{const fS=self._s,dS=self.Vu,pS=0,mS=1,gS=2;fS.bc=class extends fS.Vn{constructor(t,s=!0){super(),this.Yn=t[0],this.jut=t[2],this.Vut=[];for(const s of t[1]){const t=fS.Uut.Ux(this,s);this.Vut.push(t)}for(let t=0;t<this.Vut.length;t++){const s=this.Vut[t],i=this.Vut[t+1],e=this.Vut[t-1];s.llt(i),s.Tlt(e)}this.Hut=new Map,this.zut=new Map,this.Jut(),s&&dS.Cc(this.Yn,(t,s,i,e)=>this.vc(t,s,i,e),null,{transition:this})}static Ux(t){return fS.Hn(fS.bc,t)}zn(){for(const t of this.Vut)t.zn();fS.bh(this.Vut),this.Vut=null,this.Hut.clear(),this.Hut=null,this.zut.clear(),this.zut=null}Mc(t){this.jut=!!t}qut(t){const s=this.zut.get(t);if(s)return s;for(const s of this.Vut)if(s.Yut()===t)return this.zut.set(t,s),s}Xut(t){for(let s=this.Vut.length-1;s>=0;s--){const i=this.Vut[s],e=i.Yut();if(e<=t){let s=i;if(e<t)return s;if(e===t){for(;s;){const t=s.U7();if(!t)break;if(t.Yut()!==s.Yut())break;s=t}return s}}}}vc(t,s,i,e){let n=t/e;if(this.jut){const n=this.qut(0),r=this.qut(1),h=s+(s+i)*n.Kut(),o=(s+i)*r.Kut()-h;return 0===e?h+o:dS.xc(t,h,o,e)}0===e&&(n=1);let r=this.Xut(n),h=r.V7();if(!h){const t=r.U7(),s=r;r=t,h=s}const o=h.Yut()-r.Yut(),a=fS.Xn(n,r.Yut(),h.Yut(),0,o);if(r.Zut()||0===o){const t=s+(s+i)*r.Kut(),e=(s+i)*h.Kut()-t;return 0===o?1===a?t+e:t:dS.xc(a,t,e,o)}const l=r.Yut(),u=r.Kut(),c=r.Yut()+r.Qut(),f=r.Kut()+r.tct(),d=h.Yut()+h.sct(),p=h.Kut()+h.ict(),m=h.Yut(),g=h.Kut();let y=dS.hc("spline")(a,l,u,c,f,d,p,m,g,this.Hut.get(r));return y+=r.Kut(),(1-y)*s+y*(s+i)}Jut(){this.Hut.clear();for(let t=0;t<this.Vut.length-1;t++){const s=this.Vut[t];if(!s.mat())continue;const i=s,e=this.Vut[t+1];if(!e.gat())continue;const n=i.Yut(),r=i.Yut()+i.Qut(),h=e.Yut()+e.sct(),o=e.Yut();this.Hut.set(i,dS.Ic(n,r,h,o))}}}}{const yS=self._s,wS=0,SS=1,vS=2,bS=3,MS=4,CS=5,TS=6,xS=7,IS=8;yS.Uut=class extends yS.Vn{constructor(t,s){super(),this.ect=t,this.nct=s[0],this.rct=s[1],this.hct=s[2],this.oct=s[3],this.act=s[4],this.lct=s[5],this.Flt=s[6],this.Llt=s[7],this.uct=s[8],this.hlt=null,this.Mlt=null}zn(){this.ect=null}static Ux(t,s){return yS.Hn(yS.Uut,t,s)}llt(t){this.hlt=t}V7(){return this.hlt}Tlt(t){this.Mlt=t}U7(){return this.Mlt}Yut(){return this.nct}Kut(){return this.rct}Qut(){return this.hct}tct(){return this.oct}sct(){return this.act}ict(){return this.lct}mat(){return this.Flt}gat(){return this.Llt}Zut(){return"linear"===this.uct}cct(){return"cubic"===this.uct}}}{const _S=self._s;_S.fct=class extends _S.Vn{constructor(t){super(),this.Bc=t,this.dct=[]}zn(){for(const t of this.dct)t.zn();_S.bh(this.dct),this.dct=null}Ux(t){this.dct.push(_S.bc.Ux(t))}}}{const GS=self._s;GS.pct=class extends GS.Vn{constructor(t){super(),this.Bc=t,this.mct=null,this.gct=null,this.l6=t=>this.u6(t.dJ)}zn(){if(this.S6(),this.mct){for(const t of this.mct.values())t.clear();this.mct.clear()}this.mct=null,this.Bc=null}Ux(t){if(this.mct||(this.mct=new Map),!t)return;const s=t[0][16][0],i=t[1];this.mct.has(i)||this.mct.set(i,new Map),this.mct.get(i).set(s,t)}v6(){const t=this.Bc.Sf();t&&t.addEventListener("instancedestroy",this.l6)}S6(){const t=this.Bc.Sf();t&&t.removeEventListener("instancedestroy",this.l6)}yct(){return!!this.mct&&0!==this.mct.size}wct(t,s){let i=0;if(i=t instanceof GS.Sct?t.CL():t,!this.mct.has(i))return;const e=this.mct.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}vct(t,s){this.gct||(this.gct=new WeakMap),this.gct.has(t)||this.gct.set(t,s)}bct(t){if(!this.gct)return"";return this.gct.get(t)||""}u6(t){this.gct&&this.gct.has(t)&&this.gct.delete(t)}}}{const PS=self._s;PS.Mct=class{constructor(t){this.Bc=t,this.Cct=new PS.Tct}zn(){this.Cct.zn(),this.Cct=null,this.Bc=null}l$(){return this.Bc}Ux(t){this.Cct.$u(t)}xct(t){return this.Cct.zs(t)}Ict(){return this.Cct.Ict()}}}{const AS=self._s;AS._ct=class{constructor(t,s,i,e,n,r,h){this.Bc=n.l$(),this.Gct=n,this.Pct=t,this.Act=i,this.Rct=e,this.Ew=s,this.U8=r,this.Ect=h??r.Pq().xU(),this.Oct(),this.Dct=this.kct?.Fct()??-1,this.Lct=[],this.Nct=null,this.Bct=NaN,this.$ct=null,this.Wct=null,this.jct=null,this.Vct="",this.Uct=null,this.Hct="",this.zct="",this.Jct=0,this.qct=!1,this.Mtt=!1}zn(){this.Mtt||(AS.bh(this.Lct),this.Lct=null,this.Bc=null,this.Gct=null,this.Rct=null,this.U8=null,this.Nct=null,this.Bct=NaN,this.$ct&&this.$ct.clear(),this.$ct=null,this.Wct=null,this.jct=null,this.Vct="",this.Uct=null,this.Hct="",this.zct="",this.Mtt=!0)}Jn(){return this.Mtt}Yct(){return this.Gct}l$(){return this.Bc}Ac(){return this.Pct}Xct(){return this.Rct}sq(){return this.Ew}O6(){return this.U8||(this.U8=this.Bc.AB(this.Ect).iJ()),this.U8}Kct(){return this.Zct(this.Dct)}Qct(){const t=this.Kct();return t?t.sq():""}tft(){const t=this.Kct();return t?t.yq():[]}sft(t){const s=this.tft();if(!s)return!1;if(!s.length)return!1;const i=AS._ct.hst(t);return!(!i||!i.length)&&i.every(AS._ct.ast,s)}ift(t,s){const i=this.tft();if(!i)return!1;if(!i.length)return!1;const e=AS._ct.hst(t);return!(!e||!e.length)&&e.every(t=>AS._ct.eft.call(i,t,s))}static ast(t){const s=this;return""===t?1===s.length&&""===s[0]:s.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static hst(t){return t.trim().split(" ")}static eft(t,s){const i=this;return""===t?1===i.length&&""===i[0]:i.some(i=>AS.compare(i.trim(),s,t.trim()))}nft(t){const s=this.Kct();if(s){if(AS.te(t)){const i=s.rft(),e=i?i[t]:void 0;if(AS.te(e))return this.Zct(e)}if("string"==typeof t)for(const i of s.rft()){const s=this.Zct(i);if(s.hq(t))return this.Zct(s.Fct())}}}hft(t){const s=this.nft(t);return s?s.sq():""}oft(t){const s=this.nft(t);return s?s.yq():""}aft(t){const s=this.Kct();if(!s)return-1;const i=s.rft();if(!i)return-1;const e=this.nft(t);return e?i.indexOf(e.Fct()):-1}lft(){const t=this.Kct();if(!t)return 0;const s=t.rft();return s?s.length:0}Zct(t){return this.Rct.Zct(t)}$f(){this.cft().uft(!0)}uft(t){if(this.fft()){for(const[t,s]of this.fft().entries())s.uft(!1);this.fft().clear()}if(this.$ct=null,this.Nct=null,this.dft=null,this.Wct=null,this.Vct="",this.Uct=null,this.Hct="",this.zct="",this.Lct=[],t){this.Gct.pft(this);const t=this.kct.Fct();t!==this.Dct&&this.mft(t)}else this.Dct=this.kct.Fct()}gft(){const t=this.Rct.Zct(this.Dct);return t?t.wft().yft():0}Sft(t){return!(t<0)&&t===this.vft()}vft(){const t=this.Rct.Zct(this.Dct);if(!t)return-1;let s=t.wft().bft();return s?t.wft().Mft().indexOf(s):-1}Cft(t){const s=this.Tft(t);return s?s.Ac():""}xft(t){let s;return AS.te(t)&&(s=this.Tft(t)),"string"==typeof t&&(s=this.Ift(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Gnt():""}_ft(t,s){if(t.fet())return t.Fct();{const i=t.wft().bft();if(!i)return s.Fct();const e=i.Gft();if(!AS.te(e))return s.Fct();const n=this.Zct(e);return n?this._ft(n,s):s.Fct()}}Pft(t,s){if(t.fet()){if("reference"===t.YI()){const s=t.Aft(),i=t.Rft(),e=this.Gct.xct(s);if(!e)return[-1,null];const n=e.Eft(i);return n?this.Pft(n,e):this.Pft(e.Oft(),e)}return[t.Fct(),s]}{const i=t.wft().bft();if(!i)return[-1,null];const e=i.Gft();if(!AS.te(e))return[-1,null];const n=s.Zct(e);return n?this.Pft(n,s):[-1,null]}}Dft(t,s){let i=this.Zct(t);if(i){if(!i.fet()){const s=this.Zct(this.Dct);t=this._ft(i,s)}if(AS.te(t)&&t!==this.Dct)if(i=this.Zct(t),"reference"===i.YI()){const e=i.Aft(),n=i.Rft(),r=this.Gct.xct(e);let h=r.Eft(n);if(h){const i=this.Pft(h,r);if(-1===i[0])return;s(this.Dct,t,i[1],i[0])}else s(this.Dct,t)}else s(this.Dct,t)}}Fft(t){let s;if(AS.te(t)&&(s=this.Tft(t)),"string"==typeof t&&(s=this.Ift(t)),!s)return;let i=s.Gft();AS.te(i)&&this.Dft(i,(t,s,i,e)=>{this.Lct.push(t),this.mft(s,i,e)})}kft(){const t=this.Lft();if(!t)return;const s=t.Gft();AS.te(s)&&this.Dft(s,(t,s,i,e)=>{this.Lct.push(t),this.mft(s,i,e)})}Nft(t){const s=this.Rct.Eft(t);if(!s)return;const i=s.Fct();AS.te(i)&&this.Dft(i,(t,s,i,e)=>{this.Lct.push(t),this.mft(s,i,e)})}Bft(){const t=this.Lct.pop();AS.te(t)?this.mft(t):this.$ft()&&(this.Gct.pft(this.$ft(),!0,!1,!1),this.$ft().mft(this.Wft()),this.cft().jft(this.$ft()))}Vft(t){if(!this.Kct())return;const s=this.nft(t);if(s){if(!s.fet())return;const t=s.Fct();if(!AS.te(t))return;this.Lct.push(this.Dct),this.mft(s.Fct())}}Uft(t){if(AS.te(t))return!!this.Rct.Zct(this.Dct).wft().Mft()[t];if("string"==typeof t){const s=this.Rct.Zct(this.Dct).wft().Mft();for(let i=0;i<s.length;i++)if(s[i].Ac()===t)return!0;return!1}return!1}Hft(){this.qct=!0}zft(){return this.Jct>0}Jft(){this.Jct++}qft(){this.Jct--,0===this.Jct&&this.qct&&this.Gct.Yft(this)}mft(t,s,i){const e=this.Dct,n=this.O6().Pq();this.Jft(),this.Gct.Xft(this),this.Bc.qU(AS.i$.Zft.t$.Kft,n),this.Bc.qU(AS.i$.Zft.t$.Qft,n),this.Bc.qU(AS.i$.Zft.t$.tdt,n),this.Bc.qU(AS.i$.Zft.t$.sdt,n),this.Dct=t;let r=this.Zct(this.Dct);if("dictionary"===r.YI()&&(this.Bc.qU(AS.i$.Zft.t$.idt,n),this.Bc.qU(AS.i$.Zft.t$.edt,n),this.Bc.qU(AS.i$.Zft.t$.ndt,n),this.Bc.qU(AS.i$.Zft.t$.rdt,n)),this.Gct.hdt(),this.qft(),!this.Jn()&&(r=this.Zct(this.Dct),"reference"===r.YI())){const t=s?s.Ac():r.Aft();if(this.odt(r)){this.Lct.pop();const t=this.adt(r);this.Gct.pft(t,!0,!0,!1),t.ldt(this,e),this.cft().jft(t)}else{const s="number"==typeof i?i:r.Rft();if(t){this.Lct.pop();let i=r.udt();if(i){let t=this.Gct.cdt(i);for(;t;)i=AS._m(i),t=this.Gct.cdt(i)}else{i=`${t}-ref`;let s=this.Gct.cdt(i);for(;s;)i=AS._m(i),s=this.Gct.cdt(i)}const n=this.Gct.fdt(t,s,i,this.U8,!0);n.ldt(this,e),this.ddt(r,n);const h=this.cft();n.pdt(h),h.jft(n)}}}}Lft(){const t=this.Rct.Zct(this.Dct);return t?t.wft().bft():null}Tft(t){const s=this.Rct.Zct(this.Dct);if(!s)return null;const i=s.wft().Mft();if(!i)return null;return i[t]||null}Ift(t){const s=this.Rct.Zct(this.Dct);if(!s)return null;return s.wft().mdt(t)||null}Oct(t){if("number"==typeof t){let s=this.Zct(t);s||(s=this.Rct.Oft()),this.kct=s}else if("number"==typeof this.Act){let t=this.Zct(this.Act);t||(t=this.Rct.Oft()),this.kct=t}else{let t=this.Rct.Eft(this.Act);t||(t=this.Rct.Oft()),this.kct=t}}e4(){return this.qct?null:{flowchartName:this.Pct,flowchartTag:this.Ew,startNodeTag:this.Act,currentNodeId:this.Dct,previousNodeIds:this.Lct,pluginUID:this.U8.Pq().xU(),reference:{previousFlowchartTag:this.$ft()?this.$ft().sq():"",previousStartNodeId:AS.te(this.Wft())?this.Wft():NaN,referencesJson:this.gdt(),currentReferenceFlowchartTag:this.ydt()?this.ydt().sq():"",rootFlowchartTag:this.cft()?this.cft().sq():""}}}gdt(){if(!this.wdt())return null;const t=[];for(const[s,i]of this.fft().entries())t.push({flowchartElementId:s.Fct(),flowchartStateTag:i.sq()});return t.length?t:null}n4(t){if(t){if(this.Pct=t.flowchartName,this.Ew=t.flowchartTag,this.Act=t.startNodeTag,this.Dct=t.currentNodeId,this.Lct=t.previousNodeIds,this.Ect=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Vct=s.previousFlowchartTag,this.Bct=s.previousStartNodeId,this.Uct=s.referencesJson,this.Hct=s.currentReferenceFlowchartTag,this.zct=s.rootFlowchartTag}this.Oct()}}$ft(){return"string"==typeof this.Vct&&this.Vct&&(this.Nct=this.Gct.cdt(this.Vct),this.Vct=""),this.Nct}Wft(){return this.Bct}ldt(t,s){this.Nct=t,this.Bct=s}ydt(){return"string"==typeof this.Hct&&this.Hct&&(this.Wct=this.Gct.cdt(this.Hct),this.Hct=""),this.Wct}jft(t){this.Wct=t,this.Wct===this&&(this.Wct=null)}cft(){return"string"==typeof this.zct&&this.zct&&(this.jct=this.Gct.cdt(this.zct),this.zct=""),this.jct?this.jct:this}pdt(t){this.jct=t}wdt(){return this.Sdt(),!!this.$ct}odt(t){return this.Sdt(),this.$ct&&this.$ct.has(t)}Sdt(){if(this.Uct){this.$ct&&this.$ct.clear(),this.$ct||(this.$ct=new Map);for(const t of this.Uct){const s=this.Gct.cdt(t.flowchartStateTag),i=s.Zct(t.flowchartElementId);this.$ct.set(i,s)}this.Uct=null}}fft(){return this.Sdt(),this.$ct}adt(t){return this.Sdt(),this.$ct.get(t)}ddt(t,s){this.$ct||(this.$ct=new Map),this.$ct.set(t,s)}}}{const RS=self._s;RS.vdt=class{constructor(t){this.Bc=t,this.bdt=new Map,this.Mdt=null,this.Cdt=[],this.Tdt=()=>this.p6(),this.xdt=null}zn(){RS.bh(this.Cdt),this.Cdt=null,this.bdt.clear(),this.bdt=null,this.Mdt=null,this.Bc=null,this.xdt=null}l$(){return this.Bc}xct(t){return this.Bc.Yct().xct(t)}fdt(t,s,i,e,n,r){const h=this.Bc.Yct().xct(t);if(!h)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.bdt.has(i)){const t=this.bdt.get(i);t&&this.Yft(t)}const o=new RS._ct(t,i,s,h,this,e,r);return this.bdt.set(i,o),n&&this.pft(o,!0),o}Yft(t){if(t.Hft(),t.zft())return;const s=t.sq();this.bdt.delete(s),t.zn(),this.Mdt===t&&(this.Mdt=null)}Idt(t){t.$f()}cdt(t){return this.bdt.get(t)}Xft(t){this.Cdt.push(t)}hdt(){this.Cdt.pop()}pft(t,s=!1,i=!1,e=!0){if(e){const s=t.ydt();t=s||t}t!==this.Mdt&&(this._dt(),this.Gdt(t,s,i))}Pdt(t){return"string"==typeof t?this.cdt(t):this.Cdt.length?this.Cdt[this.Cdt.length-1]:this.Mdt}_dt(){if(!this.Mdt)return;if(this.Mdt.Jn())return;const t=this.Mdt.O6().Pq();this.Mdt.Jft(),this.Xft(this.Mdt),this.Bc.qU(RS.i$.Zft.t$.Adt,t),this.hdt(),this.Mdt.qft()}Gdt(t,s=!1,i=!1){if(this.Mdt=t,!this.Mdt)return;if(this.Mdt.Jn())return;const e=this.Mdt.O6().Pq();this.Mdt.Jft(),this.Xft(this.Mdt),this.Bc.qU(RS.i$.Zft.t$.Rdt,e),!0!==i&&"number"!=typeof i||this.Mdt.Oct(i),s&&(this.Bc.qU(RS.i$.Zft.t$.idt,e),this.Bc.qU(RS.i$.Zft.t$.edt,e),this.Bc.qU(RS.i$.Zft.t$.ndt,e),this.Bc.qU(RS.i$.Zft.t$.rdt,e)),this.hdt(),this.Mdt.qft()}e4(){return{flowchartJsonObjects:[...this.bdt.values()].map(t=>t.e4()),currentFlowchartTag:this.Mdt?this.Mdt.sq():null}}n4(t){if(!t)return;this.xdt=t;const s=new Map;for(const t of this.xdt.flowchartJsonObjects){const i=t.flowchartTag;if(this.bdt.has(i)){const e=this.bdt.get(i);e.n4(t),s.set(i,e)}else{const i=this.fdt(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);i.n4(t),s.set(t.flowchartTag,i)}}for(const[t,i]of this.bdt.entries())s.has(t)||i.zn();this.bdt.clear(),this.bdt=s,this.Bc.N5()?this.Bc.Sf().addEventListener("afterload",this.Tdt):this.p6()}p6(){this.Bc.Sf().removeEventListener("afterload",this.Tdt);const t=this.bdt.get(this.xdt.currentFlowchartTag);t&&this.pft(t,!0),this.xdt=null}}}{const ES=self._s;ES.Tct=class{constructor(){this.Edt=new Map}zn(){for(const t of this.Edt.values())t.zn();this.Edt.clear(),this.Edt=null}$u(t){const s=new ES.Odt(t),i=s.Ac();this.Edt.set(i,s)}zs(t){return this.Edt.get(t)}Ict(){return!!this.Edt.size}static Ddt(t,s,i,e){if(s)for(const n of s){const s=new i(n,e);t.push(s)}}}}{const OS=self._s,DS=0,FS=1;OS.Odt=class{constructor(t){this.Yn=t[0],this.Fdt=new OS.kdt(t[1],this)}zn(){this.Fdt.zn(),this.Fdt=null}Ldt(){return this.Fdt}Zct(t){return this.Fdt.Zct(t)}Eft(t){return this.Fdt.Eft(t)}Oft(){return this.Fdt.Oft()}Ac(){return this.Yn}}}{const kS=self._s,LS=0,NS=1,BS=2,$S=3,WS=4,jS=5,VS=6,US=7,HS=8,zS=8,JS=9,qS=10,YS=11;class XS{constructor(t,s){this.Fdt=s,this.Jc=t[7],this.Ndt=t[0],this.Ew=t[1],this.Ew?this.Att=this.Ew.trim().split(" ").map(t=>t.trim()):this.Att=[],this.Bdt=t[2],this.$dt=null,this.Wdt=null,this.nlt=!1,"dictionary"===this.Jc&&(this.$dt=t[3],this.Wdt=t[4],this.nlt=t[8]),this.jdt=t[6],this.Vdt=null,this.Udt=null,this.Hdt=null,"reference"===this.Jc&&(this.Vdt=t[8],this.Udt=t[9],this.Hdt=t[10],this.nlt=t[11]),this.zdt=new kS.Jdt(t[5],this)}zn(){this.Fdt=null}Ldt(){return this.Fdt}wft(){return this.zdt}Fct(){return this.Ndt}sq(){return this.Ew}yq(){return this.Att}hq(t){if(!this.Att)return!1;if(!this.Att.length)return!1;const s=kS._ct.hst(t);return!(!s||!s.length)&&s.every(kS._ct.ast,this.Att)}qdt(){return this.jdt}Ydt(t){this.jdt=!!t}Xdt(){if("dictionary"===this.Jc)return!0;if("reference"===this.Jc)return!1;throw new Error(`unexpected flowchart node type: ${this.Jc}`)}rft(){return this.Bdt}Kdt(){return this.$dt}Zdt(){return this.Wdt}YI(){return this.Jc}fet(){return this.nlt}Aft(){return this.Vdt}Rft(){return this.Udt}udt(){return this.Hdt}}kS.kdt=class{constructor(t,s){this.Rct=s,this.Qdt=[],this.tpt=new Map,this.spt=new Map,this.ipt=null,kS.Tct.Ddt(this.Qdt,t,XS,this);for(const t of this.Qdt){const s=t.Fct(),i=t.sq(),e=t.yq(),n=t.qdt();if(this.tpt.set(s,t),i)for(const s of e)this.spt.has(s)||this.spt.set(s,new Set),this.spt.get(s).add(t);n&&(this.ipt=t);const r=t.wft();for(const t of r.ept()){const s=t.Fct();this.tpt.set(s,t)}}this.ipt||this.npt()}zn(){this.Rct=null;for(const t of this.Qdt)t.zn();kS.bh(this.Qdt),this.Qdt=null}Xct(){return this.Rct}Zct(t){return this.tpt.get(t)}Eft(t){if(!t||!t.length)return null;const s=[];for(const i of t.trim().split(" ")){let t=this.spt.get(i.trim())??new Set;if(0===t.size)return null;s.push(t)}return[...s.reduce((t,s)=>s.size<t.size?s:t)].filter(t=>s.every(s=>s.has(t)))[0]}Oft(){return this.ipt}*rpt(){for(const t of this.Qdt)yield t}npt(){let t=0;for(const s of this.rpt())s.qdt()&&t++;if(0===t){for(const t of this.rpt())if(t.Xdt()&&!t.qdt())return void t.Ydt(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const s of this.rpt())s.Xdt()&&(s.qdt()&&t?t=!1:s.qdt()&&!t&&s.Ydt(!1))}}for(const t of this.rpt())if(t.Xdt()&&t.qdt())return void(this.ipt=t)}}}{const KS=self._s,ZS=0,QS=1,tv=2,sv=3,iv=4,ev=5;class nv{constructor(t,s){this.zdt=s,this.Ndt=t[0],this.Yn=t[1],this.iht=t[2],this.hpt=t[3],this.nlt=t[4],this.opt=t[5]}zn(){this.zdt=null}wft(){return this.zdt}Fct(){return this.Ndt}Ac(){return this.Yn}Gnt(){return this.iht}Gft(){return this.hpt}fet(){return this.nlt}apt(){return this.opt}}KS.Jdt=class{constructor(t,s){this.lpt=s,this.upt=[],this.cpt=new Map,KS.Tct.Ddt(this.upt,t,nv,this),this.fpt=this.upt.filter(t=>t.fet());for(const t of this.fpt)this.cpt.set(t.Ac(),t)}zn(){this.lpt=null;for(const t of this.upt)t.zn();KS.bh(this.upt),this.upt=null,KS.bh(this.fpt),this.fpt=null}dpt(){return this.lpt}yft(){return this.fpt.length}Mft(){return this.fpt}mdt(t){return this.cpt.get(t)}bft(){for(const t of this.fpt)if(t.apt())return t}*ept(){for(const t of this.fpt)yield t}}}{const rv=self._s;rv.ppt=class extends rv.Vn{constructor(t){super(),this.mpt=t,this.gpt=[],this.gpt.push(rv.Hn(rv.ypt,this)),this.Rw=0,this.wpt=this.gpt[0]}zn(){for(const t of this.gpt)t.zn();rv.bh(this.gpt),this.wpt=null,this.mpt=null}fU(){return this.mpt}nj(){return this.wpt}Spt(){return this.gpt[this.Rw-1]}Au(){this.nj().Au()}vpt(){const t=this.gpt,s=++this.Rw;if(s===t.length){const s=rv.Hn(rv.ypt,this);t.push(s),this.wpt=s}else{const i=t[s];i.$f(),this.wpt=i}}bpt(){const t=this.gpt,s=++this.Rw;s===t.length&&t.push(rv.Hn(rv.ypt,this));const i=t[s];i.hd(t[s-1]),this.wpt=i}dX(){this.wpt=this.gpt[--this.Rw]}Mpt(t){const s=this.gpt;for(let i=0,e=s.length;i<e;++i)s[i].Mpt(t)}}}{const hv=self._s;hv.ypt=class extends hv.Vn{constructor(t){super(),this.gpt=t,this.mpt=this.gpt.fU(),this.Cpt=this.mpt.l$().bN(),this.Tpt=!0,this.dQ=[],this.xpt=[]}zn(){this.Ipt(),this.gpt=null,this.mpt=null,this.Cpt=null}Ipt(){hv.bh(this.dQ),hv.bh(this.xpt)}fU(){return this.mpt}_pt(){return this.Tpt}Gpt(){return this.Tpt?!!this.mpt.oj():!!this.dQ.length}ej(){return this.Tpt?this.mpt.ej():this.dQ}Ppt(){return!!this.xpt.length}Apt(){return this.xpt}Rpt(){const t=this.ej();return t.length?t:this.xpt}$f(){this.Tpt=!0,hv.bh(this.xpt)}Au(){this.Tpt=!0}hd(t){t._pt()?this.$f():(this.Tpt=!1,hv.xh(this.dQ,t.dQ),hv.bh(this.xpt))}Ept(t){this.dQ.push(t)}Opt(t){this.xpt.push(t)}Dpt(t){this.Tpt=!!t}Fpt(){return this.dQ}kpt(){return this.xpt}Lpt(t){this.Tpt=!1,hv.bh(this.dQ),this.dQ.push(t)}Npt(t){this.Tpt=!1,hv.xh(this.dQ,t)}Bpt(t){this.Tpt=!1,hv.bh(this.dQ);for(const s of t)this.dQ.push(s)}$pt(t,s){for(const i of s)t.has(i)||this.xpt.push(i)}Wpt(t){for(const s of t)this.dQ.push(s);hv.Ah(this.xpt,t)}jpt(){hv.bh(this.xpt)}Vpt(t){if(t)if(this.Cpt.sX().pN().Upt()){this._pt()&&(hv.bh(this.dQ),hv.xh(this.xpt,t.fU().ej()),this.Tpt=!1);const s=this.xpt.indexOf(t);-1!==s&&(this.dQ.push(this.xpt[s]),this.xpt.splice(s,1))}else this.Lpt(t)}Mpt(t){hv.Ah(this.dQ,t),hv.Ah(this.xpt,t)}}}{const ov=self._s;ov.Hpt=class extends ov.Vn{constructor(t){super(),this.zpt=t,this.Bc=this.zpt.l$(),this.gpt=[],this.gpt.push(ov.Hn(ov.Jpt,this,null)),this.Rw=0,this.qpt=[]}zn(){for(const t of this.gpt)t.zn();ov.bh(this.gpt),ov.bh(this.qpt),this.zpt=null,this.Bc=null}aN(){return this.zpt}l$(){return this.Bc}sX(){return this.gpt[this.Rw]}Ypt(){return this.gpt}Xpt(){return this.Rw}iX(t){const s=this.gpt,i=++this.Rw;if(i===s.length){const i=ov.Hn(ov.Jpt,this,t);return s.push(i),i}{const e=s[i];return e.$f(t),e}}dX(){--this.Rw}Kpt(t){this.qpt.push(t)}Zpt(){this.qpt.pop()}vN(){const t=this.qpt;return 0===t.length?null:t.at(-1)}}}{const av=self._s;av.Jpt=class extends av.Vn{constructor(t,s){super(),this.gpt=t,this.Bc=this.gpt.l$(),this.Qpt=s,this.tmt=0,this.smt=0,this.imt=!1,this.emt=!1,this.nmt=null,this.rmt=0,this.hmt=0,this.omt=null}zn(){this.$f(null),this.gpt=null,this.Bc=null}$f(t){this.Qpt=t,this.tmt=0,this.smt=0,this.imt=!1,this.emt=!1,this.omt=null}amt(t,s){this.Qpt=t,this.tmt=0,this.smt=s}lmt(){this.tmt=0,this.smt=0}pN(){return this.Qpt}umt(t){this.Qpt=t}cmt(){return this.tmt}fmt(t){this.tmt=t}dmt(){return this.smt}pmt(t){this.smt=t}mmt(t){this.imt=!!t}gmt(){return this.imt}ymt(t){this.emt=!!t}wmt(){return this.emt}Smt(t){this.nmt=t}vmt(){return this.nmt}bmt(t,s){this.rmt=t,this.hmt=s}MN(){return this.rmt}CN(t){this.hmt=t}Mmt(){return this.hmt}Cmt(){const t=this.Qpt;return!!t.Tmt()||this.tmt<t.xmt()-1&&!!t.tX().length}Imt(t){this.omt=t}_mt(){return this.omt}}}{const lv=self._s;lv.Gmt=class extends lv.Vn{constructor(t){super(),this.zpt=t,this.Bc=this.zpt.l$(),this.gpt=[],this.Rw=-1,this.wpt=null,this.Pmt=[]}zn(){lv.bh(this.gpt),this.zpt=null,this.Bc=null}Amt(t){this.Pmt=t;const s=this.Pmt.slice(0);this.gpt.push(s),this.Rw=0,this.wpt=s}aN(){return this.zpt}l$(){return this.Bc}Rmt(){return this.wpt}iX(){const t=++this.Rw,s=this.gpt;t===s.length?s.push(this.Pmt.slice(0)):lv.xh(s[t],this.Pmt),this.wpt=s[t]}dX(){this.wpt=this.gpt[--this.Rw]}}}{const uv=self._s;uv.Emt=class extends uv.Vn{constructor(t){super(),this.zpt=t,this.Bc=this.zpt.l$(),this.gpt=[],this.Rw=-1}zn(){uv.bh(this.gpt),this.zpt=null,this.Bc=null}aN(){return this.zpt}l$(){return this.Bc}Omt(){return this.Rw>=0}Rmt(){return this.gpt[this.Rw]}iX(){if(++this.Rw,this.Rw===this.gpt.length){const t=uv.Hn(uv.Dmt,this);return this.gpt.push(t),t}{const t=this.gpt[this.Rw];return t.$f(),t}}dX(){--this.Rw}Fmt(t){const s=this.gpt;for(let i=this.Rw;i>=0;--i){const e=s[i];if(e.Ac()===t)return e}return null}kmt(){return this.gpt.slice(0,this.Rw+1)}}}{const cv=self._s;cv.Dmt=class extends cv.Vn{constructor(t){super(),this.Lmt=t,this.Yn="",this.Rw=0,this.Nmt=!1,this.Bmt=NaN}$f(){this.Yn="",this.Rw=0,this.Nmt=!1,this.Bmt=NaN}nX(t){this.Yn=t}Ac(){return this.Yn}uX(t){this.Rw=t}CL(){return this.Rw}nq(){this.Nmt=!0}fX(){return this.Nmt}$mt(t){this.Bmt=t}Wmt(){return this.Bmt}}}{const fv=self._s;fv.jmt=class extends fv.Vn{constructor(){super(),this.gpt=[],this.Rw=-1}zn(){fv.bh(this.gpt)}Rmt(){return this.gpt[this.Rw]}iX(){if(++this.Rw,this.Rw===this.gpt.length){const t=[];return this.gpt.push(t),t}return this.gpt[this.Rw]}dX(){--this.Rw}}}{let dv=function(t,s){return t.CL()-s.CL()},pv=function(t,s){for(let i=0,e=t.length;i<e;++i)if(t[i]!==s[i])return!1;return!0};SortSolArray=dv,IsSolArrayIdentical=pv;const mv=self._s,gv=self.assert;mv.Vmt=class extends mv.Vn{constructor(t){super(),this.Bc=t,this.Umt=[],this.Hmt=new Map,this.zmt=[],this.Jmt=new Map,this.qmt=new Map,this.Ymt=new Map,this.Xmt=new Map,this.Kmt=new Map,this.Zmt=new Map,this.Qmt=0,this.tgt=[],this.sgt=[],this.igt=[],this.egt=new Map,this.ngt=new Map,this.Cpt=mv.Hn(mv.Hpt,this),this.rgt=mv.Hn(mv.Gmt,this),this.Lmt=mv.Hn(mv.Emt,this),this.hgt=[],this.ogt=[],this.agt=[],this.lgt=0,this.ugt=0,this.cgt=0,this.fgt=[],this.dgt=[],this.pgt=[],this.mgt=new Map,this.ggt=new Map,self.c3_callFunction=(t,s)=>this.ygt(t,s)}zn(){this.e8(),this.Cpt.zn(),this.Cpt=null,this.rgt.zn(),this.rgt=null,mv.bh(this.ogt),mv.bh(this.agt),this.Bc=null,mv.bh(this.Umt),this.Hmt.clear()}Ux(t){const s=mv.Hn(mv.wgt,this,t);this.Umt.push(s),this.Hmt.set(s.Ac().toLowerCase(),s)}Sgt(t){this.hgt.push(t)}vgt(){for(const t of this.ngt.values())t.bgt();for(const t of this.egt.values())t.vgt();for(const t of this.ngt.values())t.vgt();for(const t of this.Umt)t.vgt();for(const t of this.Umt)t._5();for(const t of this.hgt)t.vgt(!1);mv.bh(this.hgt),this.rgt.Amt(this.igt)}l$(){return this.Bc}I5(t){return this.Hmt.get(t.toLowerCase())||null}Mgt(t){this.zmt.push(t),this.Jmt.set(t.Cgt(),t)}Tgt(t){this.qmt.set(t.G1(),t)}xgt(t){this.Ymt.set(t.G1(),t)}Igt(t){this.Xmt.set(t.G1(),t)}_gt(t){switch(t.Ggt()){case 0:this.egt.set(t.Pgt().toLowerCase(),t);break;case 1:this.ngt.set(t.Pgt().toLowerCase(),t)}}Agt(t){this.Zmt.set(t.G1(),t),t.WQ()?this.tgt.push(t):this.sgt.push(t)}Rgt(t){t.length>=2&&t.sort(dv);let s=this.Kmt.get(t.length);s||(s=[],this.Kmt.set(t.length,s));for(let i=0,e=s.length;i<e;++i){const e=s[i];if(pv(t,e))return e}return s.push(t),t}Egt(t){return this.igt.push(t.Ogt()),this.Qmt++}bN(){return this.Cpt}Dgt(){return this.bN().sX()}pN(){return this.Dgt().pN()}Fgt(){const t=this.Dgt();return t.pN().kgt(t.cmt())}Lgt(){const t=this.Dgt();return t.pN().Ngt(t.dmt())}Bgt(){return this.rgt}eX(){return this.Lmt}$gt(t){const s=[];for(t=t.Wgt();t;)mv.On(s,t.jgt()),t=t.Wgt();return s}Vgt(t){const s={};for(const i of this.$gt(t))s[i.Ugt()]=i.Hgt();return Object.create(Object.prototype,s)}zgt(t){return this.Zmt.get(t)||null}Jgt(t){return this.qmt.get(t)||null}qgt(t){return this.Ymt.get(t)||null}Ygt(t){return this.Xmt.get(t)||null}lN(t){return this.egt.get(t.toLowerCase())||null}Xgt(t,s){let i=this.ngt.get((t.Ac()+"."+s).toLowerCase());if(i)return i;if(!t.v1())for(const e of t.yj())if(i=this.ngt.get((e.Ac()+"."+s).toLowerCase()),i)return i;return null}Kgt(){return this.tgt}Zgt(){return this.sgt}Qgt(t){for(const t of this.tgt)t.tyt();if(t)for(const t of this.sgt)t.$T()&&t.tyt()}syt(t){return this.Jmt.get(t.toLowerCase())||null}iyt(t){const s=this.qmt.get(t);return s&&s.eyt()?s:null}nyt(){return this.zmt}ryt(){for(const t of this.zmt)t.hyt()}oyt(){for(const t of this.Umt)t.ayt()}lyt(t){this.oyt(),this.lgt++;for(const s of t.F8()){const t=s.t5();t&&(this.Bc.uyt(s),t.gP(),this.Bc.cyt())}this.lgt--}async fyt(t){this.oyt(),this.lgt++;for(const s of this.dyt(t))await this.Bc.pyt(s);this.lgt--}*dyt(t){for(const s of t.F8()){const t=s.t5();t&&(this.Bc.uyt(s),yield*t.myt(),this.Bc.cyt())}}gyt(t,s,i,e){let n=!1;if(!t.cB())return this.yyt(s,i,e);this.ugt++;for(const r of t.F8()){const t=r.t5();if(!t)continue;this.Bc.uyt(r);for(const r of t.wyt()){const t=r.gyt(s,i,e);n=n||t}const h=t.gyt(s,i,e);n=n||h,this.Bc.cyt()}return this.ugt--,n}*Syt(t,s,i,e){let n=!1;if(!t.cB())return this.yyt(s,i,e);this.ugt++;for(const r of t.F8()){const t=r.t5();if(!t)continue;this.Bc.uyt(r);for(const r of t.wyt()){const t=yield*r.Syt(s,i,e);n=n||t}const h=yield*t.Syt(s,i,e);n=n||h,this.Bc.cyt()}return this.ugt--,n}yyt(t,s,i){return this.ogt.push([t,s,i]),!1}vyt(t,s,i){let e=null;const n=new Promise(t=>e=t);return this.agt.push([t,s,i,e]),n}*byt(){if(this.Bc.Myt())throw new Error("should not be in breakpoint");const t=this.Bc.pB();for(;this.agt.length;){const[s,i,e,n]=this.agt.shift();n(yield*this.Syt(t,s,i,e))}}async Cyt(){for(const t of this.byt())await this.Bc.pyt(t)}Tyt(t,s,i,e){let n=!1;const r=t.cB(),h=r.t5();if(!h)return;this.ugt++,this.Bc.uyt(r);const o=h.wyt();for(let t=0,r=o.length;t<r;++t){const r=o[t].Tyt(s,i,e);n=n||r}const a=h.Tyt(s,i,e);return n=n||a,this.Bc.cyt(),this.ugt--,n}*xyt(t,s,i,e){let n=!1;const r=t.cB(),h=r.t5();if(!h)return;this.ugt++,this.Bc.uyt(r);const o=h.wyt();for(let t=0,r=o.length;t<r;++t){const r=yield*o[t].xyt(s,i,e);n=n||r}const a=yield*h.xyt(s,i,e);return n=n||a,this.Bc.cyt(),this.ugt--,n}Iyt(){return this.ugt}_yt(){return this.Iyt()>0}Gyt(){return++this.ugt}Pyt(){--this.ugt}Ayt(){return this.lgt>0}dj(){return this.Ayt()||this._yt()}q5(t){for(const[s,i,e]of this.ogt)this.gyt(t,s,i,e);mv.bh(this.ogt)}cj(t){t?this.cgt++:this.cgt--}SU(){return this.cgt>0}Ryt(t){for(let s=0,i=t.length;s<i;++s)t[s].Eyt().Au()}Oyt(t){for(let s=0,i=t.length;s<i;++s)t[s].Eyt().vpt()}oX(t){for(let s=0,i=t.length;s<i;++s)t[s].Eyt().bpt()}lX(t){for(let s=0,i=t.length;s<i;++s)t[s].Eyt().dX()}mN(t){const s=new Set,i=this.Cpt.Ypt(),e=this.Cpt.Xpt();for(let n=0;n<=e;++n){const e=i[n]._mt();if(e)for(const i of e)t&&t.has(i)||s.add(i)}return s}Dyt(t){const s=new Set([...t]),i=this.mN(s);if(i.size>0){for(const t of i)t.Eyt().vpt();return[...i]}return null}Fyt(){const t=mv.Hn(mv.kyt,this);return this.fgt.push(t),t}Lyt(){return this.fgt}Nyt(){if(!this.fgt.length)return;const t=this.Dgt();let s=!1;this.lgt++;for(let i=0,e=this.fgt.length;i<e;++i){const e=this.fgt[i];e.Byt()&&e.$yt(t),e.Wyt()&&(s=!0)}s&&(this.jyt(),t.$f(null)),this.lgt--}async Vyt(){if(!this.fgt.length)return;const t=this.Dgt();let s=!1;this.lgt++;for(let i=0,e=this.fgt.length;i<e;++i){const e=this.fgt[i];e.Byt()&&await e.Uyt(t),e.Wyt()&&(s=!0)}s&&(this.jyt(),t.$f(null)),this.lgt--}jyt(){const t=mv.Ph(this.fgt,t=>t.Wyt());for(const s of t)s.zn()}e8(){for(const t of this.fgt)t.zn();mv.bh(this.fgt)}Hyt(t){for(const s of this.fgt)s.Mpt(t);for(const s of t){const t=this.ggt.get(s);if(this.ggt.delete(s),t)for(const{resolve:s}of t.zyt.values())s(!0)}}Jyt(t){this.dgt.push({promise:t,qyt:this.Iyt()})}Yyt(){mv.bh(this.dgt)}Xyt(){const t=this.Iyt(),s=Promise.all(this.dgt.filter(s=>s.qyt===t).map(t=>t.promise));return this.dgt=this.dgt.filter(s=>s.qyt<t),s}TN(t){const s=t.toLowerCase();this.pgt.push(s),this.Bc.qU(mv.i$.s$.t$.Kyt,null),this.pgt.pop();for(const t of this.Bc.aN().Lyt())t.Zyt()&&t.Qyt()===s&&t.twt();const i=this.mgt.get(s);i&&(i.resolve(),this.mgt.delete(s))}IN(t){const s=t.toLowerCase(),i=this.mgt.get(s);if(i)return i.promise;{let t=null;const i=new Promise(s=>t=s);return this.mgt.set(s,{promise:i,resolve:t}),i}}swt(){if(0===this.pgt.length)throw new Error("not in a signal");return this.pgt.at(-1)}iwt(t){let s=this.ggt.get(t);return s||(s={ewt:[],zyt:new Map},this.ggt.set(t,s)),s}NU(t,s){const i=this.iwt(t),e=s.toLowerCase();i.ewt.push(e),this.Bc.qU(t.zW().rwt().t$.nwt,t),i.ewt.pop();for(const s of this.Bc.aN().Lyt())s.hwt()&&s.Qyt()===e&&s.owt(t);const n=i.zyt.get(e);n&&(n.resolve(!1),i.zyt.delete(e)),0===i.ewt.length&&0===i.zyt.size&&this.ggt.delete(t)}BU(t,s){const i=this.iwt(t),e=s.toLowerCase(),n=i.zyt.get(e);if(n)return n.promise;{let t=null;const s=new Promise(s=>t=s);return i.zyt.set(e,{promise:s,resolve:t}),s}}awt(t){const s=this.iwt(t);if(!s||0===s.ewt.length)throw new Error("not in a signal");return s.ewt.at(-1)}e4(){return{groups:this.lwt(),cnds:this.uwt(),acts:this.cwt(),vars:this.fwt(),waits:this.dwt()}}n4(t){this.pwt(t.groups),this.mwt(t.cnds),this.gwt(t.acts),this.ywt(t.vars),this.wwt(t.waits)}lwt(){const t={};for(const s of this.nyt())t[s.G1().toString()]=s.Swt();return t}pwt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.iyt(t);e&&e.vwt(i)}}uwt(){const t={};for(const[s,i]of this.Ymt){const e=i.e4();e&&(t[s.toString()]=e)}return t}mwt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.Ymt)i.n4(s.get(t)||null)}cwt(){const t={};for(const[s,i]of this.Xmt){const e=i.e4();e&&(t[s.toString()]=e)}return t}gwt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.Xmt)i.n4(s.get(t)||null)}fwt(){const t={};for(const[s,i]of this.Zmt)i.bwt()||!i.WQ()&&!i.$T()||(t[s.toString()]=i.Gnt());return t}ywt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.zgt(t);e&&e.urt(i)}}dwt(){return this.fgt.filter(t=>!t.Mwt()).map(t=>t.e4())}wwt(t){this.e8();for(const s of t){const t=mv.kyt.Cwt(this,s);t&&this.fgt.push(t)}}Twt(){return[...this.Bc.pB().F8()].map(t=>t.t5()).filter(t=>t).map(t=>t.xwt())}Iwt(t){for(;t;){const s=t.Wgt();if(s instanceof mv._wt)return s;t=s}return null}ygt(t,s){Array.isArray(s)||(s=[]);const i=this.lN(t.toLowerCase());if(!i)return null;if(!i._u())return i.uN();const e=i.Gwt();if(s.length<e.length){s=s.slice(0);do{s.push(e[s.length].Ogt())}while(s.length<e.length)}const n=i.fN();return n.gN(n.dN(),!1,i.wN(),i.uN(),...s)}}}{const yv=self._s;yv.wgt=class extends yv.Vn{constructor(t,s){super(),this.zpt=t,this.Bc=t.l$(),this.Yn=s[0],this.Pwt=[],this.Awt=new Map,this.Rwt=new Map,this.Ewt=new Map,this.Owt=!1,this.Dwt=[],this.Fwt=[],this.kwt=new Set;for(const t of s[1])this.Lwt(t,null,this.Pwt);this.Nwt=this.Bc.iH()?{type:"sheet",name:this.Yn,Bwt:0,children:[]}:null}zn(){this.zpt=null,this.Bc=null}Lwt(t,s,i){switch(t[0]){case 0:case 3:this.$wt(t,s,i);break;case 1:this.Wwt(t,s,i);break;case 2:this.jwt(t,s,i);break;case 4:this.Vwt(t,s);break;case 5:this.Uwt(t,s,i);break;case 6:this.Hwt(t,s);break;default:throw new Error("invalid event type")}}$wt(t,s,i){const e=yv.zwt.Ux(this,s,t);if(e.Upt()){i.push(e);const t=e.Jwt();for(let s=0,i=t.length;s<i;++s)t[s].qwt()&&this.Ywt(e,s)}else e.qwt()?this.Ywt(e,0):i.push(e)}Vwt(t,s){const i=yv._wt.Xwt(this,s,t);this.zpt._gt(i)}Hwt(t,s){const i=yv._wt.Kwt(this,s,t);this.zpt._gt(i)}Wwt(t,s,i){const e=yv.Zwt.Ux(this,s,t);i.push(e)}jwt(t,s,i){const e=yv.Qwt.Ux(this,s,t);i.push(e)}Uwt(t,s,i){const e=yv.tSt.Ux(this,s,t);i.push(e)}Ywt(t,s){t.Upt()||this.zpt.Sgt(t);const i=t.kgt(s),e=i.sSt(),n=i.fU();if(i.iSt()){let r=this.Rwt.get(n);r||(r=new Map,this.Rwt.set(n,r));const h=i.eSt().toLowerCase();let o=r.get(e);o||(o=new Map,r.set(e,o));let a=o.get(h);a||(a=[],o.set(h,a)),a.push([t,s])}else{let r=this.Awt.get(n);r||(r={nSt:new Map,rSt:new Map},this.Awt.set(n,r));const h=i.fJ();let o;h?(o=r.rSt.get(h),o||(o=new Map,r.rSt.set(h,o))):o=r.nSt;let a=o.get(e);a||(a=[],o.set(e,a)),a.push([t,s])}}vgt(){const t=this.Pwt;for(let s=0,i=t.length;s<i;++s){const e=s<i-1&&t[s+1]instanceof yv.zwt&&t[s+1].hSt();t[s].vgt(e)}}oSt(t){this.Dwt.push(t)}_5(){yv.bh(this.Fwt),this.aSt(this),this.kwt.clear()}aSt(t){const s=t.Fwt,i=t.kwt;for(const e of this.Dwt){const n=e.lSt();e.uSt()&&t!==n&&!i.has(n)&&(i.add(n),n.aSt(t),s.push(n))}}wyt(){return this.Fwt}aN(){return this.zpt}l$(){return this.Bc}Ac(){return this.Yn}cSt(t,s){this.Ewt.set(s,t)}fSt(t){return this.Ewt.get(t)||null}ayt(){this.Owt=!1}gP(){if(this.Owt)return;const t=this.Bc,s=t.dSt(),i=s?performance.now():0;this.Owt=!0;const e=this.aN(),n=e.Dgt();for(const s of this.Pwt)s.gP(n),e.Ryt(s.tX()),e.Yyt(),t.mj();n.$f(null),s&&(this.Nwt.Bwt+=performance.now()-i)}*myt(){if(this.Owt)return;this.Owt=!0;const t=this.Bc,s=this.aN(),i=s.Dgt();for(const e of this.Pwt)yield*e.myt(i),s.Ryt(e.tX()),s.Yyt(),t.mj();i.$f(null)}gyt(t,s,i){if(!s)return this.pSt(t,s,null,null);{const e=s.fU();let n=!1,r=this.pSt(t,s,e,i);n=n||r;for(const h of e.yj())r=this.pSt(t,s,h,i),n=n||r}}pSt(t,s,i,e){const n=this.Awt.get(i);if(!n)return!1;const r=e?n.rSt.get(e):n.nSt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){const e=this.mSt(s,t,i);o=o||e}return o}*Syt(t,s,i){if(!s)return yield*this.gSt(t,s,null,null);{const e=s.fU();let n=!1,r=yield*this.gSt(t,s,e,i);n=n||r;for(const h of e.yj())r=yield*this.gSt(t,s,h,i),n=n||r}}*gSt(t,s,i,e){const n=this.Awt.get(i);if(!n)return!1;const r=e?n.rSt.get(e):n.nSt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){let e;e=t.ySt()?this.mSt(s,t,i):yield*this.wSt(s,t,i),o=o||e}return o}Tyt(t,s,i){const e=s.fU(),n=this.Rwt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=this.mSt(null,s[0],s[1]);o=o||i}return o}*xyt(t,s,i){const e=s.fU(),n=this.Rwt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=s[0],e=s[1];let n;n=i.ySt()?this.mSt(null,i,e):yield*this.wSt(null,i,e),o=o||n}return o}mSt(t,s,i){const e=this.Bc,n=this.zpt,r=n.pN(),h=n.bN(),o=n.Iyt();let a=!1;r&&n.Oyt(r.dN()),n.Oyt(s.dN());const l=o>1;l&&n.Bgt().iX();const u=h.iX(s);t&&(s.Jwt()[i].fU().nj().Lpt(t),t.CU()&&t.SSt());let c=!0;if(s.rz()){const t=s.vSt();for(let s=0,i=t.length;s<i;++s)if(!t[s].bSt(u)){c=!1;break}}return c&&(s.Upt()?s.MSt(u,i):s.gP(u),a=u.gmt()),h.dX(),l&&n.Bgt().dX(),n.lX(s.dN()),r&&n.lX(r.dN()),r||1!==o||(n.Yyt(),n.SU()||e.mj()),a}*wSt(t,s,i){const e=this.Bc,n=this.zpt,r=n.pN(),h=n.bN(),o=n.Iyt();let a=!1;r&&n.Oyt(r.dN()),n.Oyt(s.dN());const l=o>1;l&&n.Bgt().iX();const u=h.iX(s);t&&(s.Jwt()[i].fU().nj().Lpt(t),t.CU()&&t.SSt());let c=!0;if(s.rz()){const t=s.vSt();for(let s=0,i=t.length;s<i;++s)if(!(yield*t[s].CSt(u))){c=!1;break}}return c&&(s.Upt()?yield*s.TSt(u,i):yield*s.myt(u),a=u.gmt()),h.dX(),l&&n.Bgt().dX(),n.lX(s.dN()),r&&n.lX(r.dN()),r||1!==o||(n.Yyt(),n.SU()||e.mj()),a}xwt(){return this.Nwt}}}{let wv=function(t,s){return!0};NoActions=wv;const Sv=self._s,vv=[];function*bv(t,s){return!0}Sv.zwt=class extends Sv.Vn{constructor(t,s,i){super(),this.w4=t,this.Bc=t.l$(),this.xSt=s,this.ISt=null,this.Cpt=this.Bc.aN().bN(),this._St=[],this.GSt=[],this.PSt=!1,this.ASt=!1,this.RSt=!1,this.ESt=!1,this.OSt=!!i[2],this.DSt=!1,this.FSt=null,this.kSt=[],this.hht=[],this.LSt=[],this.NSt=wv,this.BSt=bv,this.$St=!1,this.WSt=!1,this.jSt="",this.VSt=!1,this.USt=null,this.Nwt=null,this.JQ=i[4],this.HSt=i[5],this.w4.cSt(this,this.HSt),this.zSt=this.Bc.iH()?{JSt:i[3][0],qSt:i[3][1],YSt:!1,XSt:!1,KSt:!1,ZSt:!1}:null,this.aN().Tgt(this),3===i[0]&&this.QSt(i[1]);let e=0;for(const t of i[6]){const s=Sv.tvt.Ux(this,t,e++);this.kSt.push(s),this.svt(s.fU())}e=0;for(const t of i[7]){const s=Sv.ivt.Ux(this,t,e++);this.hht.push(s)}if(9===i.length){const t=i[8];for(const s of t)this.w4.Lwt(s,this,this.LSt)}this.kSt.length&&(this.DSt=null===this.kSt[0].fU()&&this.kSt[0].sSt()===Sv.i$.s$.t$.evt),0===this.kSt.length&&(this.kSt=vv),0===this.hht.length&&(this.hht=vv),0===this.LSt.length&&(this.LSt=vv)}static Ux(t,s,i){return Sv.Hn(Sv.zwt,t,s,i)}QSt(t){this.$St=!0,this.WSt=!!t[0],this.VSt=this.WSt,this.jSt=t[1].toLowerCase(),this.USt=[],this.aN().Mgt(this),this.Bc.iH()&&(this.Nwt={type:"group",name:t[1],Bwt:0,children:[]})}nvt(t){this.USt.push(t)}rvt(t,s){for(const i of t.d5().Tj())s.includes(i)||s.push(i)}hvt(t,s){if(t)if(s.includes(t)||s.push(t),t.v1())for(const i of t.Cj())i.CU()&&this.rvt(i,s);else t.CU()&&this.rvt(t,s)}svt(t){this.hvt(t,this._St)}ovt(t){this.hvt(t,this.GSt)}avt(){this._St=this.Bc.S1()}vgt(t){this.ESt=!!t,this.lvt(),this.uvt();for(const t of this.kSt)t.vgt();if(this.hht.length>0){let t=!1;for(const s of this.hht)s.vgt(),s.cvt()&&(t=!0);t?(this.NSt=this.fvt,this.BSt=this.dvt):(this.NSt=this.pvt,this.BSt=this.mvt)}const s=this.LSt;for(let t=0,i=s.length;t<i;++t){const e=t<i-1&&s[t+1]instanceof Sv.zwt&&s[t+1].hSt();s[t].vgt(e)}this.zSt&&this.gvt(),this.Nwt&&this.yvt().xwt().children.push(this.Nwt)}xwt(){return this.Nwt}yvt(){let t=this.rz();for(;t;){if(t.eyt())return t;t=t.rz()}return this.w4}gvt(){const t=this.zSt;t.YSt=this.kSt.every(t=>t.ySt()),t.XSt=this.hht.every(t=>t.ySt()),t.KSt=this.LSt.every(t=>t.ySt()),t.ZSt=t.YSt&&t.XSt&&t.KSt}wvt(){let t=this;do{t.gvt(),t=t.rz()}while(t)}lvt(){if(!this.eyt())return;let t=this.rz();for(this.RSt=!0;t;){if(!t.eyt()){this.RSt=!1;break}t=t.rz()}}Svt(){const t=this.Bc.S1();if(this._St===t)this.GSt=t;else{this.GSt=Sv.Oh(this._St);let t=this.rz();for(;t;){for(const s of t._St)this.ovt(s);t=t.rz()}const s=this.aN();this._St=s.Rgt(this._St),this.GSt=s.Rgt(this.GSt)}}uvt(){if(!this.vvt())return;this.FSt=[];let t=this.rz();for(;t;)this.FSt.push(t),t=t.rz();this.FSt.reverse()}bvt(){this.ASt=!0,this.xSt&&this.xSt.bvt()}Tmt(){return this.ASt}tX(){return this._St}dN(){return this.PSt||(this.PSt=!0,this.Svt()),this.GSt}Mvt(t){return this._St.includes(t)}vSt(){return this.FSt}t5(){return this.w4}aN(){return this.w4.aN()}l$(){return this.Bc}rz(){return this.xSt}Cvt(t){this.ISt=t}Wgt(){return this.ISt||this.xSt}Tvt(){return this.HSt}xvt(){return this.zSt&&this.zSt.qSt}Ivt(){return this.xvt()&&this.zSt.JSt}_vt(t){this.zSt.JSt=!!t,this.wvt()}eyt(){return this.$St}Gvt(){return this.RSt}hSt(){return this.DSt}Pvt(){return this.ESt}Cgt(){return this.jSt}Swt(){return this.VSt}hyt(){this.vwt(this.WSt)}vwt(t){if(t=!!t,!this.$St)throw new Error("not a group");if(this.VSt!==t){this.VSt=t;for(const t of this.USt)t.Avt();if(this.USt.length){const t=this.Bc.OB().t5();t&&t._5()}}}G1(){return this.JQ}Upt(){return this.OSt}qwt(){return this.kSt.length&&this.kSt[0].qwt()}Rvt(){return this.ISt&&this.ISt instanceof Sv._wt}vvt(){return this.Rvt()||this.kSt.some(t=>t.qwt())}Jwt(){return this.kSt}xmt(){return this.kSt.length}kgt(t){if((t=Math.floor(t))<0||t>=this.kSt.length)throw new RangeError("invalid condition index");return this.kSt[t]}Evt(t){return this.kgt(t)}Ovt(t){let s=t.CL();if(0===s)return!0;--s;const i=t.Dvt()?t.Fvt():t.fU();for(;s>=0;--s){const t=this.kSt[s];if(i===t.fU()||t.Dvt()&&t.Fvt()===i)return!1}return!0}kvt(){return this.hht}Lvt(){return this.hht.length}Ngt(t){if((t=Math.floor(t))<0||t>=this.hht.length)throw new RangeError("invalid action index");return this.hht[t]}Nvt(t){t=Math.floor(t);const s=this.hht.find(s=>s.Bvt()===t);if(!s)throw new RangeError("invalid action debug index");return s}$vt(t){return(t=Math.floor(t))>=0&&t<this.hht.length}Wvt(){return this.LSt}jgt(){return this.LSt.filter(t=>t instanceof Sv.Zwt)}bSt(t){t.umt(this);const s=this.kSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.fmt(e),n.IJ())throw new Error("trigger cannot be used as sub-event to a loop");if(n.gP())i=!0;else if(!this.OSt)return!1}return!this.OSt||i}MSt(t,s){t.umt(this),t.fmt(s),this.kSt[s].gP()&&(this.NSt(t,0)&&this.jvt(t),t.mmt(!0))}*CSt(t){t.umt(this);const s=this.kSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.fmt(e),n.IJ())throw new Error("trigger cannot be used as sub-event to a loop");let r;if(r=n.ySt()?n.gP():yield*n.myt(),r)i=!0;else if(!this.OSt)return!1}return!this.OSt||i}*TSt(t,s){t.umt(this),t.fmt(s);const i=this.kSt[s];let e;if(e=i.ySt()?i.gP():yield*i.myt(),e){let s;s=this.Vvt()?this.NSt(t,0):yield*this.BSt(t,0),s&&(this.Uvt()?this.jvt():yield*this.Hvt()),t.mmt(!0)}}gP(t){t.umt(this),this.DSt||t.ymt(!1),this.OSt?this.zvt(t):this.Jvt(t)}*myt(t){(this.Ivt()||this.Bc.qvt())&&(yield this),t.umt(this),this.DSt||t.ymt(!1),this.OSt?yield*this.Yvt(t):yield*this.Xvt(t)}zvt(t){const s=this.kSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.qwt())continue;t.fmt(e);const r=n.gP();i=i||r}t.mmt(i),i&&(this.NSt(t,0)&&this.jvt(t),this.ESt&&t.ymt(!0))}*Yvt(t){const s=this.kSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.qwt())continue;let r;t.fmt(e),r=n.ySt()?n.gP():yield*n.myt(),i=i||r}if(t.mmt(i),i){let s;s=this.Vvt()?this.NSt(t,0):yield*this.BSt(t,0),s&&(this.Uvt()?this.jvt():yield*this.Hvt()),this.ESt&&t.ymt(!0)}}Jvt(t){const s=this.kSt;for(let i=0,e=s.length;i<e;++i){const e=s[i];if(t.fmt(i),!e.gP())return void t.mmt(!1)}t.mmt(!0),this.NSt(t,0)&&this.jvt(t),t.gmt()&&this.ESt&&t.ymt(!0)}*Xvt(t){const s=this.kSt;for(let i=0,e=s.length;i<e;++i){const e=s[i];let n;if(t.fmt(i),n=e.ySt()?e.gP():yield*e.myt(),!n)return void t.mmt(!1)}let i;t.mmt(!0),i=this.Vvt()?this.NSt(t,0):yield*this.BSt(t,0),i&&(this.Uvt()?this.jvt():yield*this.Hvt()),t.gmt()&&this.ESt&&t.ymt(!0)}pvt(t,s){const i=this.hht;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.pmt(e),s.gP()}return!0}*mvt(t,s){const i=this.hht;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.pmt(e),s.ySt()?s.gP():yield*s.myt()}return!0}fvt(t,s){const i=this.aN(),e=this.hht;for(let n=s,r=e.length;n<r;++n){const s=e[n];t.pmt(n);const r=s.gP();if(s.Kvt()&&!0===r)return!1;s.Zvt()&&r instanceof Promise&&i.Jyt(r)}return!0}*dvt(t,s){const i=this.aN(),e=this.hht;for(let n=s,r=e.length;n<r;++n){const s=e[n];let r;if(t.pmt(n),r=s.ySt()?s.gP():yield*s.myt(),s.Kvt()&&!0===r)return!1;s.Zvt()&&r instanceof Promise&&i.Jyt(r)}return!0}Qvt(t){this.NSt(t,t.dmt())&&this.jvt()}*tbt(t){(yield*this.BSt(t,t.dmt()))&&(yield*this.Hvt())}jvt(){if(!this.LSt.length)return;const t=this.eyt()&&this.Bc.dSt(),s=t?performance.now():0,i=this.Cpt,e=i.iX(this);this.ASt?this.sbt(e):this.ibt(e),i.dX(),t&&(this.Nwt.Bwt+=performance.now()-s)}sbt(t){const s=this.$St,i=this.RSt,e=this.aN(),n=this.LSt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.tX(),l=!i||!s&&r<o;l&&e.oX(a),h.gP(t),l?e.lX(a):e.Ryt(a)}}ibt(t){const s=this.LSt;for(let i=0,e=s.length;i<e;++i)s[i].gP(t)}*Hvt(){if(!this.LSt.length)return;const t=this.Cpt,s=t.iX(this);this.ASt?yield*this.ebt(s):yield*this.nbt(s),t.dX()}*ebt(t){const s=this.$St,i=this.RSt,e=this.aN(),n=this.LSt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.tX(),l=!i||!s&&r<o;l&&e.oX(a),yield*h.myt(t),l?e.lX(a):e.Ryt(a)}}*nbt(t){const s=this.LSt;for(let i=0,e=s.length;i<e;++i)yield*s[i].myt(t)}aX(t,s){s.lmt();const i=this.kSt;if(!this.Upt())for(let e=t.cmt()+1,n=i.length;e<n;++e){const t=i[e];if(s.fmt(e),!t.gP())return!1}return this.NSt(s,0)&&this.jvt(s),!0}*rbt(t,s){s.lmt();const i=this.kSt;if(!this.Upt())for(let e=t.cmt()+1,n=i.length;e<n;++e){const t=i[e];let n;if(s.fmt(e),n=t.ySt()?t.gP():yield*t.myt(),!n)return!1}let e;return e=this.Vvt()?this.NSt(s,0):yield*this.BSt(s,0),e&&(this.Uvt()?this.jvt():yield*this.Hvt()),!0}ySt(){return!this.Ivt()&&!this.Bc.qvt()&&this.zSt.ZSt}Vvt(){return!this.Bc.qvt()&&this.zSt.XSt}Uvt(){return!this.Bc.qvt()&&this.zSt.KSt}hbt(t){if(this.rz()){const s=this.vSt();for(let i=0,e=s.length;i<e;++i)if(!s[i].bSt(t))return!1}return!0}*obt(t){if(this.rz()){const s=this.vSt();for(let i=0,e=s.length;i<e;++i)if(!(yield*s[i].CSt(t)))return!1}return!0}abt(t,s,i){if(s.length>0)if(i){const i=s.map(t=>t.zs(0));t.Bgt().iX(),this.ISt.lbt(i)}else this.ISt.ubt(s);else i&&t.Bgt().iX()}cbt(t,s,i,e){let n,r;const h=t.length>0;let o=null;const a=this.Bc,l=this.Cpt,u=a.aN(),c=this.ISt,f=c.Zvt(),d=u.Gyt()>1;if(this.abt(u,s,d),h&&(i?u.oX(t):u.Oyt(t)),null!==e){if(e.fbt){const t=i?e.fbt.nj():e.fbt.Eyt().Spt(),s=e.dbt.nj();s.Npt(t.ej()),s.jpt(),i||e.dbt.pbt()}else if(e.mbt){const t=e.mbt.nj();t.Npt(e.gbt),t.jpt()}e.ybt&&(o=u.Dyt(t))}const p=l.iX(this);return i&&p.Imt(t),this.hbt(p)&&(p.umt(this),f&&([r,n]=c.wbt()),this.Jvt(p),f&&c.Sbt(r)),l.dX(),d&&u.Bgt().dX(),null!==o&&u.lX(o),h&&u.lX(t),u.Pyt(),n}*vbt(t,s,i,e){let n,r;(this.Ivt()||this.Bc.qvt())&&(yield this);const h=t.length>0;let o=null;const a=this.Bc,l=this.Cpt,u=a.aN(),c=this.ISt,f=c.Zvt(),d=u.Gyt()>1;if(this.abt(u,s,d),h&&(i?u.oX(t):u.Oyt(t)),null!==e){if(e.fbt){const t=i?e.fbt.nj():e.fbt.Eyt().Spt(),s=e.dbt.nj();s.Npt(t.ej()),s.jpt(),i||e.dbt.pbt()}else if(e.mbt){const t=e.mbt.nj();t.Npt(e.gbt),t.jpt()}e.ybt&&(o=u.Dyt(t))}const p=l.iX(this);return i&&p.Imt(t),(yield*this.obt(p))&&(p.umt(this),f&&([r,n]=c.wbt()),yield*this.Xvt(p),f&&c.Sbt(r)),l.dX(),d&&u.Bgt().dX(),null!==o&&u.lX(o),h&&u.lX(t),u.Pyt(),n}bbt(t,s){const i=this.dN(),e=i.length>0,n=this.Bc,r=this.Cpt,h=n.aN(),o=h.Gyt()>1;o&&h.Bgt().iX(),this.ISt.lbt(t),e&&(s?h.oX(i):h.Oyt(i));const a=r.iX(this);this.hbt(a)&&(a.umt(this),this.Jvt(a)),r.dX(),o&&h.Bgt().dX(),e&&h.lX(i),h.Pyt()}*Mbt(t,s){(this.Ivt()||this.Bc.qvt())&&(yield this);const i=this.dN(),e=i.length>0,n=this.Bc,r=this.Cpt,h=n.aN(),o=h.Gyt()>1;o&&h.Bgt().iX(),this.ISt.lbt(t),e&&(s?h.oX(i):h.Oyt(i));const a=r.iX(this);(yield*this.obt(a))&&(a.umt(this),yield*this.Xvt(a)),r.dX(),o&&h.Bgt().dX(),e&&h.lX(i),h.Pyt()}gN(t,s,i,e,...n){let r,h;const o=t.length>0,a=this.Bc,l=this.Cpt,u=a.aN(),c=this.ISt,f=c.Zvt(),d=u.Gyt()>1;d&&u.Bgt().iX(),n.length>0&&this.ISt.lbt(n),o&&(s?u.oX(t):u.Oyt(t));const p=l.iX(this);return p.bmt(i,e),l.Kpt(p),a.rX(!1),this.hbt(p)&&(p.umt(this),f&&([h,r]=c.wbt()),this.Jvt(p),f&&c.Sbt(h)),a.rX(!0),l.dX(),l.Zpt(),d&&u.Bgt().dX(),o&&u.lX(t),u.Pyt(),r||p.Mmt()}}}{const Mv=self._s,Cv=[];let Tv=!1;Mv.tSt=class extends Mv.Vn{constructor(t,s,i){super();const e=t.l$(),n=t.aN();this.w4=t,this.zpt=n,this.Bc=t.l$(),this.xSt=s;const r=e.Cbt(i[1]);this.Tbt=r,this.HSt=i[2],this.w4.cSt(this,this.HSt),this.zSt=e.iH()?{JSt:i[3][0],qSt:i[3][1]}:null}static Ux(t,s,i){return Mv.Hn(Mv.tSt,t,s,i)}vgt(){const t=this.Tbt,s=this.Bc.aN().Vgt(this);this.Tbt=t.bind(null,this.Bc.gW(),s)}rz(){return this.xSt}Wgt(){return this.xSt}t5(){return this.w4}Tvt(){return this.HSt}xvt(){return this.zSt&&this.zSt.qSt}Ivt(){return this.xvt()&&this.zSt.JSt}_vt(t){this.zSt.JSt=!!t}hSt(){return!1}tX(){return Cv}dN(){return this.xSt?this.xSt.dN():Cv}gP(t){t.umt(this),this.zpt.Jyt(this.xbt())}async xbt(){try{await this.Tbt()}catch(t){console.error(`Unhandled exception running script %c${this.t5().Ac()}, event ${this.Tvt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.eH&&self.eH.Ibt(this),Tv||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Tv=!0)}}*myt(t){t.umt(this),(this.Ivt()||this.Bc.qvt())&&(yield this),this.gP(t)}ySt(){return!this.Ivt()&&!this.Bc.qvt()}static _bt(){return Tv}static Gbt(){Tv=!0}}}{const xv=self._s,Iv=self.assert;xv._wt=class extends xv.Vn{constructor(t,s,i){super(),this.w4=t,this.Bc=t.l$(),this.xSt=s,this.Pbt=0,this.Abt="",this.Rbt=0,this.Ebt=[],this.Obt=!0,this.Dbt="",this.mpt=null,this.Fbt=!1,this.kbt=[],this.Lbt=!1,this.Nbt=!1,this.Bbt=0,this.$bt=-1,this.Wbt=new Map,this.jbt=xv.zwt.Ux(t,s,i),this.jbt.Cvt(this)}Vbt(t){this.Pbt=0,this.Abt=t[0],this.Rbt=t[1],this.Ebt=t[2].map(t=>xv.Zwt.Ux(this.w4,this,t)),this.Obt=t[3],this.Nbt=t[4],this.Lbt=t[5]}Ubt(t){this.Pbt=1,this.Dbt=t[1],this.mpt=this.Bc.q0(t[2]),this.jbt.svt(this.mpt),this.Abt=this.mpt.Ac()+"."+this.Dbt,this.Rbt=t[3],this.Ebt=t[4].map(t=>xv.Zwt.Ux(this.w4,this,t)),this.Obt=t[5],this.Nbt=t[6],this.Lbt=t[7],this.mpt.Hbt(this)}static Xwt(t,s,i){const e=xv.Hn(xv._wt,t,s,i),n=i[1];return e.Vbt(n),e}static Kwt(t,s,i){const e=xv.Hn(xv._wt,t,s,i),n=i[1];return e.Ubt(n),e}bgt(){if(this.mpt&&this.mpt.v1())for(const t of this.mpt.Cj())if(t.zbt(this.Dbt)){this.Fbt=!0;break}}vgt(){for(const t of this.Ebt)t.vgt();this.jbt.vgt(!1)}Ggt(){return this.Pbt}jgt(){return this.Ebt}Gwt(){return this.Ebt}cN(){return this.Ebt.length}Jbt(t){this.kbt.push(t)}qbt(){return this.kbt}ubt(t){const s=this.Ebt;for(let i=0,e=s.length;i<e;++i)s[i].urt(t[i].zs(0))}lbt(t){const s=this.Ebt;for(let i=0,e=s.length;i<e;++i)s[i].urt(t[i])}Ybt(){return this.Ebt.map(t=>t.Gnt())}rz(){return this.xSt}Wgt(){return this.xSt}Pgt(){return this.Abt}Xbt(){return this.Dbt}Kbt(){return this.Fbt}wN(){return this.Rbt}fU(){return this.mpt}_u(){return this.Obt}uN(){switch(this.Rbt){case 0:return null;case 2:return"";default:return 0}}fN(){return this.jbt}yN(){return this.Lbt}Zvt(){return this.Nbt}wbt(){const t=this.Bbt++;let s;this.$bt=t;const i=new Promise(t=>s=t);return this.Wbt.set(t,{resolve:s,Zbt:0}),[t,i]}Sbt(t){const s=this.Wbt.get(t);0===s.Zbt&&(s.resolve(),this.Wbt.delete(t)),this.$bt=-1}Qbt(){return this.Wbt.get(this.$bt).Zbt++,this.$bt}tMt(t){this.$bt=t,this.Wbt.get(t).Zbt--}sMt(t,s){const i=new Map,e=[];for(const t of this.mpt.nj().ej()){const s=t.fU();if(s.zbt(this.Dbt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&this.jbt.cbt(t,s,this.Lbt,{mbt:this.mpt,gbt:e}),i.size>0)for(const[e,n]of i){const i=e.iMt(this.Dbt).fN(),r=[...new Set([...t,...i.tX()])];i.cbt(r,s,this.Lbt,{mbt:e,gbt:n})}}*eMt(t,s){const i=new Map,e=[];for(const t of this.mpt.nj().ej()){const s=t.fU();if(s.zbt(this.Dbt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&(yield*this.jbt.vbt(t,s,this.Lbt,{mbt:this.mpt,gbt:e})),i.size>0)for(const[e,n]of i){const i=e.iMt(this.Dbt).fN(),r=[...new Set([...t,...i.tX()])];yield*i.vbt(r,s,this.Lbt,{mbt:e,gbt:n})}}}}{const _v=self._s,Gv=[];_v.Zwt=class extends _v.Vn{constructor(t,s,i){super();const e=t.aN();this.w4=t,this.zpt=e,this.Bc=t.l$(),this.xSt=s,this.rgt=e.Bgt(),this.Yn=i[1],this.Jc=i[2],this.nMt=i[3],this.fT=!!i[4],this.rMt=!!i[5],this.hMt=s instanceof _v._wt,this.JQ=i[6],this.oMt=this.Bc.Ugt(i[8]),this.aMt=t=>this.urt(t),this.lMt=()=>this.Gnt(),this.uMt=!this.xSt||this.fT||this.rMt,this.iht=this.nMt,this.cMt=-1,this.fMt()&&(this.iht=this.iht?1:0),!this.dMt()||this.$T()||this.bwt()||(this.cMt=e.Egt(this)),e.Agt(this)}static Ux(t,s,i){return _v.Hn(_v.Zwt,t,s,i)}vgt(){if(this.dMt()&&!this.$T()&&!this.bwt()&&!this.pMt()){const t=this.zpt.Iwt(this);t&&t.Jbt(this)}}Ac(){return this.Yn}Ugt(){return this.oMt}rz(){return this.xSt}Wgt(){return this.rz()}WQ(){return!this.rz()}dMt(){return!this.WQ()}pMt(){return this.hMt}$T(){return this.fT}bwt(){return this.rMt}Qi(){return 0===this.Jc}le(){return 1===this.Jc}fMt(){return 2===this.Jc}hSt(){return!1}G1(){return this.JQ}Ogt(){return this.nMt}tX(){return Gv}gP(t){!this.dMt()||this.$T()||this.bwt()||this.urt(this.Ogt())}ySt(){return!0}*myt(t){this.gP(t)}urt(t){this.Qi()?"number"!=typeof t&&(t=parseFloat(t)):this.le()?"string"!=typeof t&&(t=t.toString()):this.fMt()&&(t=t?1:0),this.uMt?this.iht=t:this.rgt.Rmt()[this.cMt]=t}Gnt(){return this.uMt?this.iht:this.rgt.Rmt()[this.cMt]}mMt(){let t=this.Gnt();return this.fMt()&&(t=!!t),t}tyt(){this.iht=this.nMt}Hgt(){return{configurable:!1,enumerable:!0,get:this.lMt,set:this.aMt}}}}{const Pv=self._s,Av=self.assert,Rv=[];Pv.Qwt=class extends Pv.Vn{constructor(t,s,i){super();const e=t.aN();this.w4=t,this.zpt=e,this.Bc=t.l$(),this.xSt=s,this.gMt=null,this.yMt=i[1],this.Bf=!0}static Ux(t,s,i){return Pv.Hn(Pv.Qwt,t,s,i)}vgt(){this.gMt=this.zpt.I5(this.yMt),this.w4.oSt(this);let t=this.rz();for(;t;)t instanceof Pv.zwt&&t.eyt()&&t.nvt(this),t=t.rz();this.Avt(),this.Bc.iH()&&this.w4.xwt().children.push(this.gMt.xwt())}rz(){return this.xSt}tX(){return Rv}lSt(){return this.gMt}gP(t){const s=!!this.rz(),i=this.Bc.S1();s&&this.zpt.Oyt(i),this.gMt.gP(),s&&this.zpt.lX(i)}*myt(t){const s=!!this.rz(),i=this.Bc.S1();s&&this.zpt.Oyt(i),yield*this.gMt.myt(),s&&this.zpt.lX(i)}ySt(){return!1}uSt(){return this.Bf}Avt(){let t=this.rz();for(;t;){if(t instanceof Pv.zwt&&t.eyt()&&!t.Swt())return void(this.Bf=!1);t=t.rz()}this.Bf=!0}}}{let Ev=function(t,s){return t>=s?t%s:t<0?(t<=-s&&(t%=s),t<0&&(t+=s),t):t};WrapIndex=Ev;const Ov=self._s,Dv=self.assert;Ov.wMt=class extends Ov.Vn{constructor(t){super(),this.gC=t,this.Bc=t.l$()}vgt(){}static SMt(t,s){const i=s[0],e=[Bv,Lv,Nv,$v,Fv,kv];return Ov.Hn(e[i],t,s)}};class Fv extends Ov.wMt{constructor(t,s){super(t),this.vMt=this.Bc.RZ(),this.Tbt=this.Bc.Cbt(s[1]),this.Tbt!==Ov.i$.s$.Sht.random&&this.Tbt!==Ov.i$.s$.Sht.bMt||this.gC.MMt()}CMt(){return this.vMt.TMt(this.Tbt,this.vMt)}}class kv extends Ov.wMt{constructor(t,s){super(t),this.xMt=null,this.Abt=s[1],this.gC.MMt()}vgt(){const t=this.Bc.aN();this.xMt=t.lN(this.Abt),this.Abt=null;const s=this.gC.fN(),i=this.xMt.fN();this.IMt=[...new Set([...s.dN(),...i.dN()])],this.IMt=t.Rgt(this.IMt)}CMt(){const t=this.xMt;if(t._u()){const s=t.fN();return Ov.zwt.prototype.gN.bind(s,this.IMt,t.yN(),t.wN(),t.uN())}{const s=t.uN();return()=>s}}}class Lv extends Ov.wMt{constructor(t,s){super(t),this.mpt=this.Bc.q0(s[1]),this.Tbt=this.Bc.Cbt(s[2]),this._Mt=!!s[3],this.Cpt=this.Bc.aN().bN(),this.gC.GMt(this.mpt)}CMt(){return this.mpt.zW().TMt(this.Tbt,this.mpt.VW().iJ())}PMt(...t){const s=this.mpt,i=s.nj().Rpt(),e=i.length;if(0===e)return this._Mt?"":0;const n=Ev(this.gC.AMt(),e);return this.Cpt.sX().Smt(s),this.Tbt.apply(i[n].iJ(),t)}RMt(t,...s){const i=this.mpt,e=i.ej(),n=e.length;if(0===n||"number"!=typeof t)return this._Mt?"":0;const r=Ev(t,n);return this.Cpt.sX().Smt(i),this.Tbt.apply(e[r].iJ(),s)}}class Nv extends Ov.wMt{constructor(t,s){super(t),this.mpt=this.Bc.q0(s[1]),this.EMt=s[3],this._Mt=!!s[2],this.gC.GMt(this.mpt)}OMt(){const t=this.mpt.nj().Rpt(),s=t.length;return 0===s?this._Mt?"":0:t[Ev(this.gC.AMt(),s)].DMt(this.EMt)}FMt(){const t=this.mpt,s=t.nj().Rpt(),i=s.length;if(0===i)return this._Mt?"":0;const e=s[Ev(this.gC.AMt(),i)],n=e.fU().kMt(t.LMt());return e.DMt(this.EMt+n)}NMt(t){const s=this.mpt,i=s.ej(),e=i.length;if(0===e||"number"!=typeof t)return this._Mt?"":0;const n=i[Ev(t,e)];let r=0;return s.v1()&&(r=n.fU().kMt(s.LMt())),n.DMt(this.EMt+r)}}class Bv extends Ov.wMt{constructor(t,s){super(t),this.mpt=this.Bc.q0(s[1]),this.BMt=this.mpt.Drt(s[2]),this.$Mt=this.mpt.net(s[2]),this.Tbt=this.Bc.Cbt(s[3]),this._Mt=!!s[4],this.Cpt=this.Bc.aN().bN(),this.gC.GMt(this.mpt)}WMt(...t){const s=this.mpt,i=s.nj().Rpt(),e=i.length;if(0===e)return this._Mt?"":0;const n=Ev(this.gC.AMt(),e);this.Cpt.sX().Smt(s);const r=i[n];let h=0;return s.v1()&&(h=r.fU().jMt(s.LMt())),this.Tbt.apply(r.Ort()[this.$Mt+h].iJ(),t)}VMt(t,...s){const i=this.mpt,e=i.ej(),n=e.length;if(0===n||"number"!=typeof t)return this._Mt?"":0;const r=Ev(t,n);this.Cpt.sX().Smt(i);const h=e[r];let o=0;return i.v1()&&(o=h.fU().jMt(i.LMt())),this.Tbt.apply(h.Ort()[this.$Mt+o].iJ(),s)}}class $v extends Ov.wMt{constructor(t,s){super(t),this.UMt=null,this.HMt=s[1]}vgt(){this.UMt=this.Bc.aN().zgt(this.HMt)}zMt(){return this.UMt}}}{let Wv=function(t){const s=self.JMt[t];if(!s)throw new Error("invalid expression number");return s};GetExpressionFunc=Wv;const jv=self._s,Vv=self.assert;jv.qMt=class extends jv.Vn{constructor(t,s,i){super(),this.gC=t,this.Rw=i,this.Jc=s,this.zs=null,this.YMt=!1,this.rMt=!1}static Ux(t,s,i){const e=s[0],n=[Uv,Hv,Zv,Jv,Yv,zv,Xv,Uv,Jv,Jv,Qv,tb,Zv,ib,Hv,Kv,qv,sb,eb,nb,rb,hb];return jv.Hn(n[e],t,e,i,s)}vgt(){}MMt(){this.YMt=!0}GMt(t){this.YMt||t&&(t.zW().SW()||(this.YMt=!0))}XMt(){return this.YMt}CL(){return this.Rw}l$(){return this.gC.l$()}fN(){return this.gC.fN()}bwt(){return this.rMt}KMt(){return 4===this.Jc}};class Uv extends jv.qMt{constructor(t,s,i,e){super(t,s,i),this.ZMt=0;const n=e[1];this.QMt=n[0],this.tCt=[],this.sCt=null;for(let t=1,s=n.length;t<s;++t)this.tCt.push(jv.wMt.SMt(this,n[t]));this.tCt.length?this.zs=this.iCt:(this.zs=Wv(this.QMt),this.rMt=!0)}eCt(t){if(t<0||t>=this.tCt.length)throw new RangeError("invalid numbered node");return this.tCt[t]}vgt(){for(const t of this.tCt)t.vgt();const t=Wv(this.QMt);this.tCt.length?this.sCt=t(this):this.sCt=t}AMt(){return this.ZMt}iCt(t){return this.ZMt=t,this.sCt()}}class Hv extends Uv{constructor(t,s,i,e){super(t,s,i,e),this.zs=this.nCt,14===s&&(this.fN().avt(),this.gC instanceof jv.ivt&&this.fN().bvt())}nCt(t){this.ZMt=t;const s=this.sCt();return"string"==typeof s?s:""}rCt(){return Wv(this.QMt)()}}class zv extends Uv{constructor(t,s,i,e){super(t,s,i,e),t.hCt()>=2?this.zs=this.Vj:this.zs=this.LB,this.rMt=!1}LB(t){this.ZMt=t;const s=this.sCt();return this.l$().OB().LB(s)}Vj(t){const s=this.LB(t);return s?s.Vj():null}}class Jv extends jv.qMt{constructor(t,s,i,e){super(t,s,i),this.oCt=e[1],this.zs=this.aCt,this.rMt=!0}aCt(){return this.oCt}}class qv extends jv.qMt{constructor(t,s,i,e){super(t,s,i),this.lCt=e[1],this.zs=this.uCt,this.rMt=!0}uCt(){return this.lCt}}class Yv extends jv.qMt{constructor(t,s,i,e){super(t,s,i),this.mpt=this.l$().q0(e[1]),t.hCt()>=2?this.zs=this.$W:this.zs=this.fU;const n=this.fN();n.svt(this.mpt),this.gC instanceof jv.ivt?n.bvt():n.rz()&&n.rz().bvt(),this.rMt=!0}fU(){return this.mpt}$W(){return this.mpt?this.mpt.$W():null}}class Xv extends jv.qMt{constructor(t,s,i,e){super(t,s,i),this.VQ=this.l$().pB().P8(e[1]),t.hCt()>=2?this.zs=this.fB:this.zs=this.mB,this.rMt=!0}mB(){return this.VQ}fB(){return this.VQ?this.VQ.fB():null}}class Kv extends jv.qMt{constructor(t,s,i,e){super(t,s,i),this.F7=this.l$().Vtt().j6(e[1]),t.hCt()>=2?this.zs=this.bit:this.zs=this.jit,this.rMt=!0}jit(){return this.F7}bit(){return this.F7?this.F7.bit():null}}class Zv extends jv.qMt{constructor(t,s,i,e){super(t,s,i),this.cCt=e[1],this.zs=this.fCt,this.rMt=!0}fCt(){return this.cCt}}class Qv extends jv.qMt{constructor(t,s,i,e){super(t,s,i),this.dCt=e[1];const n=this.gC.fU();this.gC instanceof jv.tvt&&this.gC.$T()?(this.zs=this.pCt,this.rMt=!0):n&&n.v1()?(this.zs=this.mCt,this.MMt()):(this.zs=this.pCt,this.rMt=!0)}pCt(){return this.dCt}mCt(t){t=t||0;const s=this.gC.fU(),i=s.nj(),e=i.ej();let n=null;if(e.length)n=e[t%e.length].fU();else if(i.Ppt()){const s=i.Apt();n=s[t%s.length].fU()}else{if(!(s.oj()>0))return 0;{const i=s.ej();n=i[t%i.length].fU()}}return this.dCt+n.kMt(s.LMt())}}class tb extends jv.qMt{constructor(t,s,i,e){super(t,s,i),this.HMt=e[1],this.UMt=null,t.hCt()>=2?this.zs=this.gCt:this.zs=this.yCt,this.rMt=!0}vgt(){this.UMt=this.l$().aN().zgt(this.HMt)}yCt(){return this.UMt}gCt(){return null}}class sb extends jv.qMt{constructor(t,s,i,e){super(t,s,i),this.wCt=e[1],this.xMt=null,t.hCt()>=2?this.zs=this.SCt:this.zs=this.vCt,this.rMt=!0}vgt(){this.xMt=this.l$().aN().lN(this.wCt),this.wCt=null}vCt(){return this.xMt}SCt(){return null}}class ib extends jv.qMt{constructor(t,s,i,e){super(t,s,i),this.bCt=[],this.MCt=[],this.rMt=!0;for(let t=1,s=e.length;t<s;++t){const s=jv.qMt.Ux(this.gC,e[t],0);this.bCt.push(s),this.MCt.push(0),s.bwt()||(this.rMt=!1)}this.zs=this.CCt}vgt(){for(const t of this.bCt)t.vgt()}CCt(){const t=this.bCt,s=this.MCt;for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(0);return s}}class eb extends jv.qMt{constructor(t,s,i,e){super(t,s,i),this.TCt=e[1],this.zs=this.lrt,this.rMt=!0}lrt(){return this.TCt}}class nb extends jv.qMt{constructor(t,s,i,e){super(t,s,i),this.xCt=e[1],this.zs=this.ICt,this.rMt=!0}ICt(){return this.xCt}}class rb extends Uv{constructor(t,s,i,e){super(t,s,i,e),this.zs=this.PU,this.rMt=!1}PU(){return this.sCt()}}class hb extends jv.qMt{constructor(t,s,i,e){super(t,s,i),this.Rct=this.l$().Yct().xct(e[1]),this.zs=this._Ct,this.rMt=!0}_Ct(){return this.Rct.Ac()}}}{let ob=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(0)};EvalParams=ob;const ab=self._s,lb=self.assert,ub=[],cb=function(){};ab.tvt=class extends ab.Vn{constructor(t,s,i){if(super(),this.jbt=t,this.Bc=t.l$(),this.Rw=i,this.Tbt=this.Bc.Cbt(s[1]),this.GCt=s[3]>0,this.PCt=2===s[3],this.ACt=!!s[4],this.RCt=!!s[5],this.fT=!!s[6],this.JQ=s[7],this.ECt=this.jbt.Upt(),this.mpt=null,this.BMt=null,this.$Mt=-1,this.vMt=null,this.gP=cb,this.myt=cb,this.Ws=[],this.OCt=[],this.DCt=!1,this.FCt=null,this.kCt=null,this.zSt=this.Bc.iH()?{JSt:s[8][0],LCt:s[8][1]}:null,-1===s[0]?this.vMt=this.Bc.RZ():(this.mpt=this.Bc.q0(s[0]),s[2]&&(this.BMt=this.mpt.Drt(s[2]),this.$Mt=this.mpt.net(s[2])),this.jbt.rz()&&this.jbt.rz().bvt()),10===s.length){let t=s[9];for(let s of t)this.Ws.push(ab.qMt.Ux(this,s,this.Ws.length)),this.OCt.push(0)}0===this.Ws.length&&(this.Ws=ub,this.OCt=ub),this.jbt.aN().xgt(this)}static Ux(t,s,i){return ab.Hn(ab.tvt,t,s,i)}vgt(){for(const t of this.Ws)t.vgt(),t.XMt()&&(this.DCt=!0);this.PCt?(this.gP=this.NCt,this.myt=this.BCt):this.vMt?(this.$Ct(),this.myt=this.WCt):this.mpt.zW().SW()?(this.jCt(),this.myt=this.VCt):this.fT?(this.gP=this.UCt,this.myt=this.HCt):(this.gP=this.zCt,this.myt=this.JCt)}$Ct(){const t=this.vMt,s=this.vMt;this.qCt(t,s,this.YCt)}jCt(){const t=this.mpt.zW(),s=this.mpt.VW().iJ();this.qCt(t,s,this.XCt)}qCt(t,s,i){const e=this.Tbt,n=this.RCt,r=this.Ws;if(0===r.length){const i=t.TMt(e,s);this.gP=n?function(){return ab.xor(i(),n)}:i}else if(1===r.length){const i=r[0];if(!n&&i.bwt())this.gP=t.KCt(e,s,i.zs(0));else{const r=t.TMt(e,s);this.gP=function(){return ab.xor(r(i.zs(0)),n)}}}else if(2===r.length){const i=r[0],h=r[1];if(!n&&i.bwt()&&h.bwt())this.gP=t.ZCt(e,s,i.zs(0),h.zs(0));else{const r=t.TMt(e,s);this.gP=function(){return ab.xor(r(i.zs(0),h.zs(0)),n)}}}else if(3===r.length){const i=r[0],h=r[1],o=r[2];if(!n&&i.bwt()&&h.bwt()&&o.bwt())this.gP=t.QCt(e,s,i.zs(0),h.zs(0),o.zs(0));else{const r=t.TMt(e,s);this.gP=function(){return ab.xor(r(i.zs(0),h.zs(0),o.zs(0)),n)}}}else this.gP=i}G1(){return this.JQ}sSt(){return this.Tbt}fU(){return this.mpt}fJ(){return this.BMt}tTt(){return this.BMt?this.BMt.lJ():this.mpt?this.mpt.zW():null}hCt(){const t=this.tTt();return t?t.sTt():1}fN(){return this.jbt}l$(){return this.Bc}CL(){return this.Rw}Bvt(){return this.CL()}qwt(){return this.GCt}iSt(){return this.PCt}iTt(){return this.RCt}IJ(){return this.ACt}$T(){return this.fT}eTt(){return this.zSt.JSt}nTt(){return!!this.vMt}Dvt(){return this.nTt()||this.mpt.zW().SW()}Fvt(){for(const t of this.Ws)if(t.KMt())return t.fU();return null}rTt(t){this.zSt.JSt=!!t,this.jbt.wvt()}hTt(){return this.zSt.LCt}ySt(){return!this.eTt()&&!this.Bc.qvt()&&!this.hTt()}oTt(){return this.FCt||(this.FCt=new Map),this.FCt}aTt(){return this.kCt||(this.kCt=new Map),this.kCt}YCt(){const t=this.OCt;return ob(this.Ws,t),ab.xor(this.Tbt.apply(this.vMt,t),this.RCt)}*WCt(){if((this.eTt()||this.Bc.qvt())&&(yield this),this.hTt()){const t=this.OCt;ob(this.Ws,t);let s=this.Tbt.apply(this.vMt,t);return ab.Mo(s)&&(s=yield*s),ab.xor(s,this.RCt)}return this.gP()}XCt(){const t=this.OCt;ob(this.Ws,t);const s=this.mpt.VW().iJ();return ab.xor(this.Tbt.apply(s,t),this.RCt)}*VCt(){if((this.eTt()||this.Bc.qvt())&&(yield this),this.hTt()){const t=this.OCt;ob(this.Ws,t);const s=this.mpt.VW().iJ();let i=this.Tbt.apply(s,t);return ab.Mo(i)&&(i=yield*i),ab.xor(i,this.RCt)}return this.gP()}NCt(){return!0}*BCt(){return(this.eTt()||this.Bc.qvt())&&(yield this),!0}lTt(){return this.BMt?this.BMt.lJ().sTt()>=2?this.BMt.cJ():this.BMt:this.mpt.zW().sTt()>=2?this.mpt.$W():this.mpt}UCt(){const t=this.OCt;ob(this.Ws,t);const s=this.Tbt.apply(this.lTt(),t);return this.mpt.pbt(),s}*HCt(){if((this.eTt()||this.Bc.qvt())&&(yield this),this.hTt()){const t=this.OCt;ob(this.Ws,t);let s=this.Tbt.apply(this.lTt(),t);return ab.Mo(s)&&(s=yield*s),this.mpt.pbt(),s}return this.gP()}zCt(){const t=this.Ws,s=this.OCt,i=this.mpt.nj();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()||(s[i]=e.zs(0))}return i._pt()?this.uTt(i):this.cTt(i)}*JCt(){return(this.eTt()||this.Bc.qvt())&&(yield this),this.zCt()}fTt(t){const s=this.Ws,i=this.OCt;for(let e=0,n=s.length;e<n;++e){const n=s[e];n.XMt()&&(i[e]=n.zs(t))}}uTt(t){const s=this.mpt,i=s.v1(),e=s.LMt(),n=this.$Mt,r=n>=0,h=s.ej(),o=this.DCt,a=this.OCt,l=this.Tbt,u=this.RCt,c=this.ECt&&!this.GCt;t.Ipt();for(let s=0,f=h.length;s<f;++s){const f=h[s];let d;if(o&&this.fTt(s),r){const t=i?f.fU().jMt(e):0;d=l.apply(f.Ort()[n+t].iJ(),a)}else d=l.apply(f.iJ(),a);ab.xor(d,u)?t.Ept(f):c&&t.Opt(f)}return s.dTt(!0),t.Dpt(!1),s.pbt(),t.Gpt()}cTt(t){const s=this.mpt,i=s.v1(),e=s.LMt(),n=s.CU(),r=this.$Mt,h=r>=0,o=this.DCt,a=this.OCt,l=this.Tbt,u=this.RCt,c=this.ECt&&!this.GCt,f=t.Fpt(),d=t.kpt(),p=c&&!this.jbt.Ovt(this),m=p?d:f;let g=0,y=!1;for(let t=0,s=m.length;t<s;++t){const s=m[t];let w;if(o&&this.fTt(t),h){const t=i?s.fU().jMt(e):0;w=l.apply(s.Ort()[r+t].iJ(),a)}else w=l.apply(s.iJ(),a);ab.xor(w,u)?(y=!0,p?(f.push(s),n&&s.pTt()):(m[g]=s,n&&s.mTt(g),++g)):p?(m[g]=s,n&&s.gTt(g),++g):c&&(d.push(s),n&&s.yTt())}ab.Sh(m,g),n&&s.wTt(p,g);const w=y;return p&&!y&&(y=this.STt(f)),s.dTt(w||c),c?y:t.Gpt()}STt(t){const s=this.mpt,i=s.v1(),e=s.LMt(),n=this.DCt,r=this.$Mt,h=r>=0,o=this.OCt,a=this.Tbt,l=this.RCt;for(let s=0,u=t.length;s<u;++s){const u=t[s];let c;if(n&&this.fTt(s),h){const t=i?u.fU().jMt(e):0;c=a.apply(u.Ort()[r+t].iJ(),o)}else c=a.apply(u.iJ(),o);if(ab.xor(c,l))return!0}return!1}vTt(t,s){return this.Ws[t].zs(s)}eSt(){const t=this.Ws;if(!t.length)throw new Error("no parameters");return t[0].rCt()}e4(){if(!this.FCt||!this.FCt.size)return null;const t={};for(const[s,i]of this.FCt.entries()){let e=i;"collmemory"===s&&(e=[...i.entries()].map(t=>[t[0].xU(),t[1].xU(),t[2]])),t[s]=e}return{ex:t}}n4(t){if(this.FCt&&(this.FCt.clear(),this.FCt=null),!t)return;const s=this.Bc,i=t.ex;if(i){const t=this.oTt();t.clear();for(const[e,n]of Object.entries(i)){let i=n;"collmemory"===e&&(i=ab.Hn(ab.Gu,n.map(t=>[s.AB(t[0]),s.AB(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),t.set(e,i)}}}}}{let fb=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(0)};EvalParams=fb;const db=self._s,pb=self.assert,mb=[],gb=function(){},yb=function*(){},wb=1,Sb=2,vb=4,bb=8,Mb=16;db.ivt=class extends db.Vn{constructor(t,s,i){super(),this.jbt=t;const e=t.l$();this.Bc=e,this.Rw=i,this.JQ=s.length>=4?s[3]:-1,this.bTt=s.length>=5?255&s[4]:0,this.MTt=s.length>=5?s[4]>>8:0,this.Tbt=null,this.mpt=null,this.BMt=null,this.$Mt=-1,this.vMt=null,this.CTt="",this.TTt=null,this.xTt=null,this.gP=gb,this.myt=gb,this.Ws=[],this.OCt=[],this.DCt=!1,this.FCt=null,this.kCt=null;const n=-3===s[0],r=n?s[2]:s[5];if(this.zSt=e.iH()||n?{JSt:r[0],LCt:r[1],index:r[2]}:null,-1===s[0])this.vMt=e.RZ(),this.Tbt=e.Cbt(s[1]);else if(-2===s[0])this.CTt=s[1];else if(n){const t=e.Cbt(s[1]);this.Tbt=t,this.gP=this.ITt,this.myt=this._Tt,this.MTt|=8}else this.mpt=e.q0(s[0]),4&this.MTt?(this.CTt=s[1],this.TTt=e.q0(s[2])):(s[2]&&(this.BMt=this.mpt.Drt(s[2]),this.$Mt=this.mpt.net(s[2])),this.Tbt=e.Cbt(s[1]));if(7===s.length){const t=s[6];for(const s of t)this.Ws.push(db.qMt.Ux(this,s,this.Ws.length)),this.OCt.push(0)}0===this.Ws.length&&(this.Ws=mb,this.OCt=mb),this.GTt()&&(this.jbt.avt(),this.jbt.bvt()),this.jbt.aN().Igt(this)}static Ux(t,s,i){return db.Hn(db.ivt,t,s,i)}vgt(){for(const t of this.Ws)t.vgt(),t.XMt()&&(this.DCt=!0);if(this.vMt)this.$Ct(),this.myt=this.WCt;else if(this.CTt)4&this.MTt?this.PTt():this.ATt(),this.CTt="",this.TTt=null;else if(this.gP===this.ITt){const t=this.Tbt,s=this.Bc.aN().Vgt(this.jbt);this.Tbt=t.bind(null,this.Bc.gW(),s)}else this.BMt?this.Zvt()?(this.gP=this.RTt,this.myt=this.ETt):(this.gP=this.OTt,this.myt=this.DTt):this.mpt.zW().SW()?(this.jCt(),this.myt=this.VCt):this.$T()?(this.gP=this.FTt,this.myt=this.kTt):this.Zvt()?(this.gP=this.LTt,this.myt=this.NTt):this.BTt()?(this.gP=this.$Tt,this.myt=this.WTt):this.Ws.length?this.Ws.every(t=>t.XMt())?(this.gP=this.jTt,this.myt=this.VTt):this.DCt?(this.gP=this.UTt,this.myt=this.HTt):this.Ws.every(t=>t.bwt())?(fb(this.Ws,this.OCt),this.gP=this.zTt,this.myt=this.JTt):(this.gP=this.qTt,this.myt=this.YTt):(this.gP=this.zTt,this.myt=this.JTt)}$Ct(){const t=this.vMt,s=this.vMt;this.qCt(t,s,this.YCt)}jCt(){const t=this.mpt.zW(),s=this.mpt.VW().iJ();this.qCt(t,s,this.XCt)}ATt(){const t=this.jbt.aN(),s=t.lN(this.CTt);if(s._u()){const i=!!(2&this.MTt);this.xTt=s.fN();let e=[...new Set([...this.jbt.dN(),...this.xTt.dN()])];e=t.Rgt(e);const n=!s.yN()&&this.XTt()?{ybt:!0}:null;if(this.gP=db.zwt.prototype.cbt.bind(this.xTt,e,this.Ws,i,n),this.Bc.iH()){const t=this;this.myt=function*(){return(t.eTt()||t.Bc.qvt())&&(yield t),yield*t.xTt.vbt(e,t.Ws,i,n)}}else this.myt=yb}else this.gP=gb,this.myt=yb}PTt(){const t=this.jbt.aN(),s=t.Xgt(this.TTt,this.CTt);if(s._u()){const i=!!(2&this.MTt);this.xTt=s.fN();let e=[...new Set([...this.jbt.dN(),...this.xTt.dN(),this.mpt,s.fU()])];e=t.Rgt(e);const n=!this.mpt.v1()&&!s.fU().v1(),r=!this.mpt.v1()&&s.fU().v1(),h=this.mpt.v1();let o=null;if(!s.yN()&&this.XTt()&&(o=o||{},o.ybt=!0),!r&&i||(o=o||{},o.fbt=this.mpt,o.dbt=s.fU()),n||r||h&&!s.Kbt()?this.gP=db.zwt.prototype.cbt.bind(this.xTt,e,this.Ws,i,o):h&&(this.gP=db._wt.prototype.sMt.bind(s,e,this.Ws)),this.Bc.iH()){const t=this;n||r||h&&!s.Kbt()?this.myt=function*(){return(t.eTt()||t.Bc.qvt())&&(yield t),yield*t.xTt.vbt(e,t.Ws,i,o)}:h&&(this.myt=function*(){return(t.eTt()||t.Bc.qvt())&&(yield t),yield*s.eMt(e,t.Ws)})}else this.myt=yb}else this.gP=gb,this.myt=yb}qCt(t,s,i){const e=this.Tbt,n=this.Ws;if(0===n.length)this.gP=t.TMt(e,s);else if(1===n.length){const i=n[0];if(i.bwt())this.gP=t.KCt(e,s,i.zs(0));else{const n=t.TMt(e,s);this.gP=function(){return n(i.zs(0))}}}else if(2===n.length){const i=n[0],r=n[1];if(i.bwt()&&r.bwt())this.gP=t.ZCt(e,s,i.zs(0),r.zs(0));else{const n=t.TMt(e,s);this.gP=function(){return n(i.zs(0),r.zs(0))}}}else if(3===n.length){const i=n[0],r=n[1],h=n[2];if(i.bwt()&&r.bwt()&&h.bwt())this.gP=t.QCt(e,s,i.zs(0),r.zs(0),h.zs(0));else{const n=t.TMt(e,s);this.gP=function(){return n(i.zs(0),r.zs(0),h.zs(0))}}}else this.gP=i}G1(){return this.JQ}Zvt(){return!!(8&this.MTt)}Kvt(){return!!(16&this.MTt)}BTt(){return 1===this.bTt}$T(){return 2===this.bTt}GTt(){return!!(1&this.MTt)}cvt(){return this.Zvt()||this.Kvt()}fU(){return this.mpt}tTt(){return this.BMt?this.BMt.lJ():this.mpt?this.mpt.zW():null}hCt(){const t=this.tTt();return t?t.sTt():1}fN(){return this.jbt}XTt(){let t=this.jbt;do{if(t instanceof db._wt&&t.yN())return!0;t=t.Wgt()}while(t);return!1}l$(){return this.Bc}CL(){return this.Rw}Bvt(){return this.zSt.index}eTt(){return this.zSt.JSt}rTt(t){this.zSt.JSt=!!t,this.jbt.wvt()}hTt(){return this.zSt.LCt}ySt(){return!this.eTt()&&!this.Bc.qvt()&&!this.hTt()}oTt(){return this.FCt||(this.FCt=new Map),this.FCt}aTt(){return this.kCt||(this.kCt=new Map),this.kCt}YCt(){const t=this.OCt;return fb(this.Ws,t),this.Tbt.apply(this.vMt,t)}*WCt(){if((this.eTt()||this.Bc.qvt())&&(yield this),this.hTt()){const t=this.OCt;return fb(this.Ws,t),yield*this.Tbt.apply(this.vMt,t)}return this.gP()}XCt(){const t=this.OCt;return fb(this.Ws,t),this.Tbt.apply(this.mpt.VW().iJ(),t)}*VCt(){if((this.eTt()||this.Bc.qvt())&&(yield this),this.hTt()){const t=this.OCt;return fb(this.Ws,t),yield*this.Tbt.apply(this.mpt.VW().iJ(),t)}return this.gP()}zTt(){const t=this.OCt,s=this.mpt.nj().ej();for(let i=0,e=s.length;i<e;++i)this.Tbt.apply(s[i].iJ(),t)}*JTt(){if((this.eTt()||this.Bc.qvt())&&(yield this),this.hTt()){const t=this.OCt,s=this.mpt.nj().ej();for(let i=0,e=s.length;i<e;++i)yield*this.Tbt.apply(s[i].iJ(),t)}else this.zTt()}qTt(){const t=this.OCt;fb(this.Ws,t);const s=this.mpt.nj().ej();for(let i=0,e=s.length;i<e;++i)this.Tbt.apply(s[i].iJ(),t)}*YTt(){if((this.eTt()||this.Bc.qvt())&&(yield this),this.hTt()){const t=this.OCt;fb(this.Ws,t);const s=this.mpt.nj().ej();for(let i=0,e=s.length;i<e;++i)yield*this.Tbt.apply(s[i].iJ(),t)}else this.qTt()}jTt(){const t=this.Ws,s=this.OCt,i=this.Tbt,e=this.mpt.nj().ej();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(n);i.apply(r.iJ(),s)}}*VTt(){if((this.eTt()||this.Bc.qvt())&&(yield this),this.hTt()){const t=this.Ws,s=this.OCt,i=this.Tbt,e=this.mpt.nj().ej();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(n);yield*i.apply(r.iJ(),s)}}else this.jTt()}UTt(){const t=this.Ws,s=this.OCt,i=this.Tbt,e=this.mpt.nj().ej();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()||(s[i]=e.zs(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()&&(s[i]=e.zs(n))}i.apply(r.iJ(),s)}}*HTt(){if((this.eTt()||this.Bc.qvt())&&(yield this),this.hTt()){const t=this.Ws,s=this.OCt,i=this.Tbt,e=this.mpt.nj().ej();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()||(s[i]=e.zs(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()&&(s[i]=e.zs(n))}yield*i.apply(r.iJ(),s)}}else this.UTt()}$Tt(){const t=this.Ws,s=this.OCt,i=this.Tbt,e=this.mpt,n=e.KTt(),r=e.nj().ej();n.ZTt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].zs(e);i.apply(n.iJ(),s)}n.QTt(i)}*WTt(){if((this.eTt()||this.Bc.qvt())&&(yield this),this.hTt()){const t=this.Ws,s=this.OCt,i=this.Tbt,e=this.mpt,n=e.KTt(),r=e.nj().ej();n.ZTt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].zs(e);yield*i.apply(n.iJ(),s)}n.QTt(i)}else this.$Tt()}txt(){return this.BMt?this.BMt.lJ().sTt()>=2?this.BMt.cJ():this.BMt:this.mpt.zW().sTt()>=2?this.mpt.$W():this.mpt}FTt(){const t=this.OCt;return fb(this.Ws,t),this.Tbt.apply(this.txt(),t)}*kTt(){if((this.eTt()||this.Bc.qvt())&&(yield this),this.hTt()){const t=this.OCt;fb(this.Ws,t);let s=this.Tbt.apply(this.txt(),t);return db.Mo(s)&&(s=yield*s),s}return this.FTt()}OTt(){const t=this.mpt,s=t.v1(),i=t.LMt(),e=this.Ws,n=this.DCt,r=this.OCt,h=this.Tbt,o=this.$Mt,a=t.nj().ej();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.XMt()||(r[t]=s.zs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.XMt()&&(r[s]=i.zs(t))}const u=s?l.fU().jMt(i):0;h.apply(l.Ort()[o+u].iJ(),r)}}*DTt(){if((this.eTt()||this.Bc.qvt())&&(yield this),this.hTt()){const t=this.mpt,s=t.v1(),i=t.LMt(),e=this.Ws,n=this.DCt,r=this.OCt,h=this.Tbt,o=this.$Mt,a=t.nj().ej();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.XMt()||(r[t]=s.zs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.XMt()&&(r[s]=i.zs(t))}const u=s?l.fU().jMt(i):0;yield*h.apply(l.Ort()[o+u].iJ(),r)}}else this.OTt()}LTt(){const t=this.Ws,s=this.OCt,i=this.Tbt,e=this.mpt.nj().ej(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(r);n.push(i.apply(h.iJ(),s))}return Promise.all(n)}*NTt(){if((this.eTt()||this.Bc.qvt())&&(yield this),this.hTt()){const t=this.Ws,s=this.OCt,i=this.Tbt,e=this.mpt.nj().ej(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(r);n.push(yield*i.apply(h.iJ(),s))}return Promise.all(n)}return this.LTt()}RTt(){const t=this.mpt,s=t.v1(),i=t.LMt(),e=this.Ws,n=this.OCt,r=this.Tbt,h=this.$Mt,o=t.nj().ej(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].zs(t);const u=s?l.fU().jMt(i):0;a.push(r.apply(l.Ort()[h+u].iJ(),n))}return Promise.all(a)}*ETt(){if((this.eTt()||this.Bc.qvt())&&(yield this),this.hTt()){const t=this.mpt,s=t.v1(),i=t.LMt(),e=this.Ws,n=this.OCt,r=this.Tbt,h=this.$Mt,o=t.nj().ej(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].zs(t);const u=s?l.fU().jMt(i):0;a.push(yield*r.apply(l.Ort()[h+u].iJ(),n))}return Promise.all(a)}return this.RTt()}async ITt(){try{await this.Tbt()}catch(t){console.error(`Unhandled exception running script %c${this.jbt.t5().Ac()}, event ${this.jbt.Tvt()}, action ${this.Bvt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.eH&&self.eH.Ibt(this),db.tSt._bt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),db.tSt.Gbt())}}*_Tt(){return(this.eTt()||this.Bc.qvt())&&(yield this),this.ITt()}e4(){return this.FCt&&this.FCt.size?{ex:db.So(this.FCt)}:null}n4(t){if(this.FCt&&(this.FCt.clear(),this.FCt=null),!t)return;const s=t.ex;s&&(this.FCt=db.vo(s))}}}{let Cb=function(t){return t instanceof Ub?Vb.Yj(t):t.Pq()},Tb=function(t){return Cb(t).kB()},xb=function(t){return Vb.Yj(t)},Ib=function(t){return xb(t).kB()},_b=function(t){return t instanceof Hb?Vb.Yj(t):t},Gb=function(t){return t instanceof zb?Vb.Yj(t):t},Pb=function(t,s,i,e){s.xU()<i.xU()?t.Set(s,i,e):t.Set(i,s,e)},Ab=function(t,s,i){s.xU()<i.xU()?t.Eu(s,i):t.Eu(i,s)},Rb=function(t,s){t.Ou(s)},Eb=function(t,s,i){return s.xU()<i.xU()?t.zs(s,i):t.zs(i,s)},Ob=function(t,s,i,e){if(!s)return!1;const n=0!==i||0!==e,r=t.kB(),h=Vb.RL(),o=Vb.Fgt(),a=o.fN().Upt(),l=o.fU(),u=o.iTt(),c=s.nj(),f=l!==s;let d;Kb=s,Xb=f&&!u,Zb=!1;let p=0,m=0,g=!1;c._pt()?(Jb.S(r.BH()),Jb.offset(i,e),h.sxt(r.LB(),s,Jb,Yb),d=Yb):a?Vb.ixt()&&!c.kpt().length&&c.Fpt().length?d=c.Fpt():(d=c.kpt(),Zb=!0):d=c.Fpt(),n&&(p=r.YM(),m=r.ZM(),r.IH(i,e),r.CH());for(const s of d)if(h.A$(t,s)){if(g=!0,u)break;f&&Qb.add(s)}return n&&(r.TH(p,m),r.CH()),Nb.bh(Yb),g},Db=function(t){const s=Vb.pN().Upt(),i=Kb.nj(),e=i.Fpt(),n=i.kpt();i._pt()?(i.Bpt(Qb),s&&(Nb.bh(n),i.$pt(Qb,Kb.ej()))):s?Zb?i.Wpt(Qb):(i.$pt(Qb,e),i.Bpt(Qb)):i.Bpt(Qb),Kb.pbt()},Fb=function(t,s){Xb&&(s&&Db(t),Qb.clear(),Kb=null,Xb=!1)},kb=function(t,s){const i=Vb.AB(s);if(!i)return!1;const e=t.nj();if(!e._pt()&&!e.Fpt().includes(i))return!1;if(t.v1()){if(i.fU().nxt(t))return e.Vpt(i),t.pbt(),!0}else if(i.fU()===t)return e.Vpt(i),t.pbt(),!0;return!1},Lb=function(t,s){const i=t.nj();if(i._pt()){i.Dpt(!1),i.Ipt();const e=t.ej();for(let t=0,n=e.length;t<n;++t){const n=e[t];n.xU()===s?i.Opt(n):i.Ept(n)}return t.pbt(),!!i.Fpt().length}{const e=i.Fpt();let n=0;for(let t=0,r=e.length;t<r;++t){const r=e[t];e[n]=r,r.xU()===s?i.Opt(r):++n}return Nb.Sh(e,n),t.pbt(),!!e.length}};GetInst=Cb,GetWorldInfo=Tb,GetInst_SDKv2=xb,GetWorldInfo_SDKv2=Ib,GetObjectClass=_b,GetLayer=Gb,CollMemory_Add=Pb,CollMemory_Remove=Ab,CollMemory_RemoveInstance=Rb,CollMemory_Get=Eb,DoOverlapCondition=Ob,FinishCollisionConditionPicking=Db,FinishCollisionCondition=Fb,PickByUID_Normal=kb,PickByUID_Inverted=Lb;const Nb=self._s,Bb=new Nb.To,$b={},Wb={},jb={};let Vb=null;Nb.rxt=function(t){Vb=t};const Ub=self.cU,Hb=self.UW,zb=self.qj;Wb.hxt=function(t,s){return Nb.compare(this.kB().YM(),t,s)},jb.hxt=function(t,s){return Nb.compare(this.x,t,s)},Wb.oxt=function(t,s){return Nb.compare(this.kB().ZM(),t,s)},jb.oxt=function(t,s){return Nb.compare(this.y,t,s)},Wb.axt=function(){return this.kB().VH()},jb.axt=function(){return this.jH()},$b.lxt=function(){const t=Tb(this),s=t.mB(),i=t.BH();return i.sl()<0||i.il()<0||i.Qa()>s.Vg()||i.tl()>s.Qg()},$b.uxt=function(t,s,i){const e=_b(this).nj(),n=e.ej();if(!n.length)return!1;let r=n[0],h=r.kB(),o=r,a=Nb.nr(h.YM(),h.ZM(),s,i);for(let e=1,l=n.length;e<l;++e){r=n[e],h=r.kB();const l=Nb.nr(h.YM(),h.ZM(),s,i);(0===t&&l<a||1===t&&l>a)&&(a=l,o=r)}return e.Vpt(o),!0},Wb.XM=function(t){const s=this.kB();s.YM()!==t&&(s.XM(t),s.CH())},jb.XM=function(t){this.x=+t},Wb.QM=function(t){const s=this.kB();s.ZM()!==t&&(s.QM(t),s.CH())},jb.QM=function(t){this.y=+t},Wb.cxt=function(t,s){const i=this.kB();i.fxt(t,s)||(i.TH(t,s),i.CH())},jb.cxt=function(t,s){this.setPosition(t,s)},$b.dxt=function(t,s){if(!(t=_b(t)))return;const i=Cb(this),e=t.sj(i);if(!e)return;const[n,r]=e.pxt(s),h=i.kB();h.YM()===n&&h.ZM()===r||(h.TH(n,r),h.CH())},$b.mxt=function(t){if(0===t)return;const s=Tb(this);s.IH(s.gxt()*t,s.yxt()*t),s.CH()},Wb.wxt=function(t,s){if(0===s)return;const i=this.kB();t=Nb.Qn(t),i.IH(Math.cos(t)*s,Math.sin(t)*s),i.CH()},jb.wxt=function(t,s){0!==s&&(t=Nb.Qn(t),this.offsetPosition(Math.cos(t)*s,Math.sin(t)*s))},Wb.YM=function(){return this.kB().YM()},jb.YM=function(){return this.x},Wb.ZM=function(){return this.kB().ZM()},jb.ZM=function(){return this.y},$b.RN=function(){return Vb.RN(Cb(this))},Wb.Sxt=function(t,s){return Nb.compare(this.kB().Vg(),t,s)},jb.Sxt=function(t,s){return Nb.compare(this.width,t,s)},Wb.vxt=function(t,s){return Nb.compare(this.kB().Qg(),t,s)},jb.vxt=function(t,s){return Nb.compare(this.height,t,s)},Wb.Xg=function(t){const s=this.kB();s.Vg()!==t&&(s.Xg(t),s.CH())},jb.Xg=function(t){this.width=t},Wb.Ug=function(t){const s=this.kB();s.Qg()!==t&&(s.Ug(t),s.CH())},jb.Ug=function(t){this.height=t},Wb.$A=function(t,s){const i=Tb(this);i.Vg()===t&&i.Qg()===s||(i.$A(t,s),i.CH())},jb.$A=function(t,s){this.Aj(t,s)},Wb.Vg=function(){return this.kB().Vg()},jb.Vg=function(){return this.width},Wb.Qg=function(){return this.kB().Qg()},jb.Qg=function(){return this.height},$b.bxt=function(){return Tb(this).BH().Qa()},$b.Mxt=function(){return Tb(this).BH().tl()},$b.Cxt=function(){return Tb(this).BH().sl()},$b.Txt=function(){return Tb(this).BH().il()},$b.xxt=function(){const t=Tb(this).BH();return(t.Qa()+t.sl())/2},$b.Ixt=function(){const t=Tb(this).BH();return(t.tl()+t.il())/2},$b._xt=function(t,s){return Nb.hr(Tb(this).Dj(),Nb.Qn(s))<=Nb.Qn(t)},$b.Gxt=function(t){return Nb.lr(Tb(this).Dj(),Nb.Qn(t))},$b.Pxt=function(t,s){const i=Nb.Qn(t),e=Nb.Qn(s),n=Tb(this).Dj();return Nb.lr(e,i)?Nb.lr(n,i)&&!Nb.lr(n,e):!(!Nb.lr(n,i)&&Nb.lr(n,e))},Wb.Oj=function(t){const s=this.kB(),i=Nb.Zn(Nb.Qn(t));isNaN(i)||s.Dj()===i||(s.Oj(i),s.CH())},jb.Oj=function(t){this.LH=t},$b.Axt=function(t){if(isNaN(t)||0===t)return;const s=Tb(this);s.Oj(s.Dj()+Nb.Qn(t)),s.CH()},$b.Rxt=function(t){if(isNaN(t)||0===t)return;const s=Tb(this);s.Oj(s.Dj()-Nb.Qn(t)),s.CH()},$b.Ext=function(t,s){const i=Tb(this),e=i.Dj(),n=Nb.ar(e,Nb.Qn(s),Nb.Qn(t));isNaN(n)||e===n||(i.Oj(n),i.CH())},$b.Oxt=function(t,s,i){const e=Tb(this),n=e.Dj(),r=s-e.YM(),h=i-e.ZM(),o=Math.atan2(h,r),a=Nb.ar(n,o,Nb.Qn(t));isNaN(a)||n===a||(e.Oj(a),e.CH())},$b.Dxt=function(t,s){const i=Tb(this),e=i.Dj(),n=t-i.YM(),r=s-i.ZM(),h=Math.atan2(r,n);isNaN(h)||e===h||(i.Oj(h),i.CH())},Wb.Dj=function(){return Nb.tr(this.kB().Dj())},jb.Dj=function(){return this.LH},$b.Fxt=function(t,s){return Nb.compare(Nb.Tr(100*Tb(this).SO(),6),t,s)},Wb.vV=function(){return this.kB().vV()},jb.vV=function(){return this.isVisible},$b.wV=function(t){const s=Tb(this);t=2===t?!s.vV():0!==t,s.vV()!==t&&(s.wV(t),Vb.VB())},$b.bO=function(t){const s=Nb.Kn(t/100,0,1),i=Tb(this);if(i.Oz()){if(i.Urt().kxt()===s)return}else if(i.SO()===s)return;i.bO(s),Vb.VB()},$b.Lxt=function(t){Bb.ta(t);const s=Tb(this);s.HH().zo(Bb)||(s.zH(Bb),Vb.VB())},$b.CO=function(){const t=Tb(this).HH();return Nb.Gr(t.No(),t.Bo(),t.$o(),t.Wo())},$b.SO=function(){return Nb.Tr(100*Tb(this).SO(),6)},$b.Nxt=function(t){return!!(t=Gb(t))&&Tb(this).LB()===t},$b.Bxt=function(t){const s=_b(this).nj(),i=s.ej();if(!i.length)return!1;let e=i[0];for(let s=1,n=i.length;s<n;++s){const n=i[s],r=n.kB(),h=e.kB(),o=r.LB().CL(),a=h.LB().CL();0===t?(o>a||o===a&&r.NB()>h.NB())&&(e=n):(o<a||o===a&&r.NB()<h.NB())&&(e=n)}return s.Vpt(e),!0},Wb.$xt=function(t,s,i){const e=this.kB(),n=0===t?e.tC():e.kH();return Nb.compare(n,s,i)},jb.$xt=function(t,s,i){const e=0===t?this.WV:this.FH;return Nb.compare(e,s,i)},Wb.Wxt=function(){this.kB().qH()},jb.Wxt=function(){this.JH()},Wb.jxt=function(){this.kB().XH()},jb.jxt=function(){this.YH()},$b.Vxt=function(t){(t=Gb(t))&&Tb(this).ZH(t)},$b.Uxt=function(t,s){const i=0===t;if(!(s=_b(s)))return;const e=Cb(this),n=s.Hxt(e);n&&e.kB().tz(n,i)},Wb.sC=function(t){const s=this.kB();s.tC()!==t&&(s.sC(t),Vb.VB())},jb.sC=function(t){this.WV=t},$b.zxt=function(){return Tb(this).LB().CL()},$b.Jxt=function(){return Tb(this).LB().Ac()},Wb.qxt=function(){return this.kB().NB()},jb.qxt=function(){return this.zIndex},Wb.Yxt=function(){return this.kB().tC()},jb.Yxt=function(){return this.WV},Wb.Xxt=function(){return this.kB().kH()},jb.Xxt=function(){return this.FH},$b.Kxt=function(t){const s=Cb(this),i=s.fU()._j().krt(t);if(!i)return;const e=i.CL();return s.kB().bH().wJ(e)},$b.Zxt=function(t,s){const i=Cb(this),e=i.fU()._j().krt(s);if(!e)return;const n=e.CL(),r=1===t,h=i.kB().bH();h.wJ(n)!==r&&(h.SJ(n,r),h.vJ(),Vb.VB())},$b.Qxt=function(t,s,i){const e=Cb(this),n=e.fU()._j().krt(t);if(!n)return;s=Math.floor(s);const r=n.zI().qI(s);if(!r)return;"color"===r?(Bb.ta(i),i=Bb):"percent"===r&&(i/=100);const h=n.CL(),o=e.kB().bH();o.MJ(h,s,i)&&o.wJ(h)&&Vb.VB()};const Jb=Nb.Hn(Nb.Rect),qb=[],Yb=[];let Xb=!1,Kb=null,Zb=!1;const Qb=new Set;function*tM(t){if(!t)return!1;const s=this.l$(),i=s.RL(),e=s.aN(),n=e.bN(),r=e.Fgt(),h=r.fU(),o=r.oTt(),a=r.aTt(),l=n.sX(),u=s.LN(),c=u-1,f=l.pN(),d=n.iX(f);let p=o.get("collmemory");p||(p=Nb.Hn(Nb.Gu),o.set("collmemory",p)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),s.Sf().addEventListener("instancedestroy",t=>Rb(p,t.dJ)));const m=h.nj(),g=t.nj(),y=m.ej();let w=null;for(let s=0;s<y.length;++s){const n=y[s];g._pt()?(i.sxt(n.kB().LB(),t,n.kB().BH(),qb),w=qb,i.tIt(n,t,w)):w=g.ej();for(let s=0;s<w.length;++s){const r=w[s];if(i.A$(n,r)||i.sIt(n,r)){const s=Eb(p,n,r);let i=!1,o=-2;"number"==typeof s&&(i=!0,o=s);const a=!i||o<c;if(Pb(p,n,r,u),a){const s=f.tX();e.oX(s);const i=h.nj(),o=t.nj();if(i.Dpt(!1),o.Dpt(!1),h===t){const t=i.Fpt();Nb.bh(t),t.push(n),t.push(r),h.pbt()}else{const s=i.Fpt(),e=o.Fpt();Nb.bh(s),Nb.bh(e),s.push(n),e.push(r),h.pbt(),t.pbt()}yield*f.rbt(l,d),e.lX(s)}}else Ab(p,n,r)}Nb.bh(qb)}return n.dX(),!1}$b.iIt=function(t){const s=_b(this);t=_b(t);const i=s.l$();if(i.eIt())return tM.call(s,t);if(!t)return!1;const e=i.RL(),n=i.aN(),r=n.bN(),h=n.Fgt(),o=h.fU(),a=h.oTt(),l=h.aTt(),u=r.sX(),c=i.LN(),f=c-1,d=u.pN(),p=r.iX(d);let m=a.get("collmemory");m||(m=Nb.Hn(Nb.Gu),a.set("collmemory",m)),l.get("collisionCreatedDestroyCallback")||(l.set("collisionCreatedDestroyCallback",!0),i.Sf().addEventListener("instancedestroy",t=>Rb(m,t.dJ)));const g=o.nj(),y=t.nj(),w=g.ej();let S=null;for(let s=0;s<w.length;++s){const i=w[s];y._pt()?(e.sxt(i.kB().LB(),t,i.kB().BH(),qb),S=qb,e.tIt(i,t,S)):S=y.ej();for(let s=0;s<S.length;++s){const r=S[s];if(e.A$(i,r)||e.sIt(i,r)){const s=Eb(m,i,r);let e=!1,h=-2;"number"==typeof s&&(e=!0,h=s);const a=!e||h<f;if(Pb(m,i,r,c),a){const s=d.tX();n.oX(s);const e=o.nj(),h=t.nj();if(e.Dpt(!1),h.Dpt(!1),o===t){const t=e.Fpt();Nb.bh(t),t.push(i),t.push(r),o.pbt()}else{const s=e.Fpt(),n=h.Fpt();Nb.bh(s),Nb.bh(n),s.push(i),n.push(r),o.pbt(),t.pbt()}d.aX(u,p),n.lX(s)}}else Ab(m,i,r)}Nb.bh(qb)}return r.dX(),!1},$b.nIt=function(t){return t=_b(t),Ob(Cb(this),t,0,0)},$b.rIt=function(t,s,i){return t=_b(t),Ob(Cb(this),t,s,i)},$b.hIt=function(){return!0},$b.wz=function(){return Tb(this).wz()},$b.o4=function(){return Tb(this).o4()},$b.oIt=function(t,s){const i=_b(this);t=_b(t);const e=i.l$(),n=this.nj().ej();if(0===n.length)return!1;const r=t.nj();let h=r.ej();if(r._pt()){const s=[...e.aIt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r._pt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];if(1===s)for(const s of e.az())s.lIt(t)&&(null===o||o.has(s))&&a.add(s);else{let i;if(0===s){if(i=e.rz(),null===i)continue}else i=e.oz();i.lIt(t)&&(null===o||o.has(i))&&a.add(i)}}return 0!==a.size&&(r.Bpt(a),t.pbt(),!0)},$b.uIt=function(t,s){const i=_b(this);t=_b(t);const e=i.l$(),n=i.nj().ej();if(0===n.length)return!1;const r=t.nj();let h=r.ej();if(r._pt()){const s=[...e.aIt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r._pt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];2!==s||e.o4()||!e.lIt(t)||null!==o&&!o.has(e)||a.add(e);for(const i of 0===s?e.children():e.dz())2===s&&i.o4()||i.lIt(t)&&(null===o||o.has(i))&&a.add(i)}return 0!==a.size&&(r.Bpt(a),t.pbt(),!0)},$b.cIt=function(t,s,i){const e=_b(this);t=_b(t);const n=e.l$(),r=e.nj().ej();if(0===r.length)return!1;const h=t.nj();let o=h.ej();if(h._pt()){const s=[...n.aIt(t)];s.length>0&&(o=o.concat(s))}if(0===o.length)return!1;const a=h._pt()?null:new Set(o),l=[];for(let e=0,n=r.length;e<n;++e){const n=r[e];if(0===s){const s=n.fz(i);null!==s&&s.lIt(t)&&(null===a||a.has(s))&&l.push(s)}else if(1===s)for(const s of n.children())if(s.lIt(t)){if(0===i){(null===a||a.has(s))&&l.push(s);break}--i}}return 0!==l.length&&(h.Npt(l),t.pbt(),!0)},$b.fIt=function(t,s,i){const e=Cb(this);switch(t){case 0:default:return Nb.compare(e.uz(),s,i);case 1:return Nb.compare(e.dIt(),s,i)}},$b.mz=function(t,s,i,e,n,r,h,o,a,l){t=_b(t);const u=Cb(this),c=Vb.Lgt().fU();for(const f of t.pIt(u,c)){if(!f.zW().EW())return;u.mz(f,{vz:s,Mz:i,Tz:e,Iz:n,Gz:r,Ez:h,Az:o,Dz:a,kz:l})}},$b.gz=function(t){t=_b(t);const s=Cb(this),i=Vb.Lgt().fU();for(const e of t.pIt(s,i))s.gz(e)},$b.mIt=function(){const t=Cb(this);t.wz()&&t.rz().gz(t)},$b.gIt=function(){const t=Cb(this).rz();return t?t.xU():-1},$b.yIt=function(){return Cb(this).uz()},$b.wIt=function(){return Cb(this).dIt()},$b.SIt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=Tb(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.Wz(),i.CH()):i.Bz(t,s)},$b.Vz=function(t,s,i,e,n,r,h,o){const a=Tb(this);a.Vz(t,s,{mode:0===i?"absolute":"relative",x:e,y:n,WV:r,qz:h,Yz:o})&&a.CH()},$b.vIt=function(){const t=Tb(this);return t.zz()?t.Jz()._C():0},$b.bIt=function(){const t=Tb(this);return t.zz()?t.Jz().GC():0},$b.MIt=function(t){const s=Tb(this);t=2===t?!s.vV():0!==t,s.vV()!==t&&s.wV(t)},$b.hJ=function(t,s){this instanceof self.cU?this.TY(t,s):this.hJ(t,s)},$b.CIt=function(t,s){this instanceof self.cU?this.IY(t,""+s):this.CIt(t,""+s)},$b.TIt=function(t){this instanceof self.cU?this._Y(t):this.TIt(t)},$b.xIt=function(){this instanceof self.cU?this.bY():this.eJ()},$b.IIt=function(){this instanceof self.cU?this.MY():this.nJ()},$b._It=function(){return this instanceof self.cU?this.CY():this._It()},$b.GIt=function(t){this instanceof self.cU?this.PIt(0!==t):this.AIt(0!==t)},$b.RIt=function(){return this instanceof self.cU?this.Obt():this.EIt()},Wb.OIt=function(t,s,i){return Nb.compare(this.Pq().uot(t),s,i)},jb.OIt=function(t,s,i){return Nb.compare(xb(this).uot(t),s,i)},Wb.DIt=function(t){return!!this.Pq().uot(t)},jb.DIt=function(t){return!!xb(this).uot(t)},$b.FIt=function(t,s){const i=_b(this),e=i.nj(),n=e.ej();if(!n.length)return!1;const r=i.v1();let h=null,o=0;for(let e=0,a=n.length;e<a;++e){const a=n[e],l=r?a.fU().kMt(i.LMt()):0,u=a.uot(l+s);(null===h||0===t&&u<o||1===t&&u>o)&&(o=u,h=a)}return e.Vpt(h),!0},$b.kIt=function(t){const s=_b(this);return s.l$().Fgt().iTt()?Lb(s,t):kb(s,t)},$b.hq=function(t){const s=new Set(Nb.kh(t)),i=Cb(this).DU();return s.isSubsetOf(i)},$b.LIt=function(){return Cb(this).NIt()},$b.BIt=function(){return Cb(this).DU().size},$b.$It=function(t){return Cb(this).WIt(t)},$b.jIt=function(t,s){const i=Nb.kh(s);if(0===i.length)return;const e=Cb(this),n=new Set(e.DU());if(0===t)for(const t of i)n.add(t);else if(1===t)for(const t of i)n.delete(t);e.kU(n)},$b.VIt=function(){Vb.wU(Cb(this))},$b.UIt=function(){return!0},$b.HIt=function(){return!0},Wb.zIt=function(t,s){this.Pq().cot(t,s)},jb.zIt=function(t,s){xb(this).cot(t,s)},Wb.JIt=function(t,s){const i=this.Pq(),e=i.uot(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.cot(t,e+s)},jb.JIt=function(t,s){const i=xb(this),e=i.uot(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.cot(t,e+s)},Wb.qIt=function(t,s){const i=this.Pq(),e=i.uot(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.cot(t,e-s))},jb.qIt=function(t,s){const i=xb(this),e=i.uot(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.cot(t,e-s))},Wb.YIt=function(t,s){this.Pq().cot(t,s?1:0)},jb.YIt=function(t,s){xb(this).cot(t,s?1:0)},Wb.XIt=function(t){const s=this.Pq();s.cot(t,0===s.uot(t)?1:0)},jb.XIt=function(t){const s=xb(this);s.cot(t,0===s.uot(t)?1:0)},$b.KIt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=Cb(this),e="state";Vb.ZIt(),i.f6(e),i.lC(s,e),Vb.QIt(e,{t_t:!0})},$b.s_t=function(){return JSON.stringify(Cb(this).aC("state"))},$b.i_t=function(){return Cb(this).fU().Ac()},$b.e_t=function(){const t=Vb.Dgt().vmt();let s=t.oj();for(const i of Vb.aIt(t))++s;return s},$b.n_t=function(){return Vb.Dgt().vmt().nj().ej().length},Wb._U=function(){return this.Pq()._U()},jb._U=function(){return xb(this)._U()},Wb.xU=function(){return this.Pq().xU()},jb.xU=function(){return xb(this).xU()},$b.nwt=function(t){const s=Cb(this);return t.toLowerCase()===Vb.aN().awt(s)},$b.NU=function(t){const s=Cb(this);Vb.aN().NU(s,t)},$b.r_t=function(t){const s=_b(this);return Vb.aN().Fyt().h_t(s.nj().ej(),t),!0},$b.o_t=function(){return Cb(this).PU()},Nb.a_t=function(t,s,i){const e=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.t$,w=s.wht,S=s.Sht,v=Object.assign({},$b,i>=2?jb:Wb);n&&(y.hxt=v.hxt,y.oxt=v.oxt,y.axt=v.axt,y.lxt=v.lxt,y.uxt=v.uxt,w.XM=v.XM,w.QM=v.QM,w.cxt=v.cxt,w.dxt=v.dxt,w.mxt=v.mxt,w.wxt=v.wxt,S.l_t=v.YM,S.u_t=v.ZM,S.AN=v.RN),r&&(y.Sxt=v.Sxt,y.vxt=v.vxt,w.Xg=v.Xg,w.Ug=v.Ug,w.$A=v.$A,S.c_t=v.Vg,S.f_t=v.Qg,S.d_t=v.bxt,S.p_t=v.Mxt,S.m_t=v.Cxt,S.g_t=v.Txt,S.y_t=v.xxt,S.w_t=v.Ixt),h&&(y.S_t=v._xt,y.v_t=v.Gxt,y.Pxt=v.Pxt,w.Oj=v.Oj,w.Axt=v.Axt,w.Rxt=v.Rxt,w.Ext=v.Ext,w.Oxt=v.Oxt,w.Dxt=v.Dxt,S.b_t=v.Dj),o&&(y.vV=v.vV,y.Fxt=v.Fxt,w.wV=v.wV,w.bO=v.bO,w.Lxt=v.Lxt,S.Opacity=v.SO,S.ColorValue=v.CO),a&&(y.Nxt=v.Nxt,y.Bxt=v.Bxt,y.$xt=v.$xt,w.Wxt=v.Wxt,w.jxt=v.jxt,w.Vxt=v.Vxt,w.Uxt=v.Uxt,w.sC=v.sC,S.zxt=v.zxt,S.Jxt=v.Jxt,S.qxt=v.qxt,S.Yxt=v.Yxt,S.Xxt=v.Xxt),l&&(y.Kxt=v.Kxt,w.Zxt=v.Zxt,w.Qxt=v.Qxt),d&&(y.hIt=v.hIt,y.wz=v.wz,y.o4=v.o4,y.oIt=v.oIt,y.uIt=v.uIt,y.cIt=v.cIt,y.fIt=v.fIt,w.mz=v.mz,w.gz=v.gz,w.mIt=v.mIt,S.gIt=v.gIt,S.yIt=v.yIt,S.wIt=v.wIt),p&&(w.SIt=v.SIt,w.Vz=v.Vz,S.vIt=v.vIt,S.bIt=v.bIt),u&&(y.vV=v.vV,w.wV=v.MIt,w.M_t=v.hJ,w.C_t=v.CIt,w.T_t=v.TIt),c&&(y.x_t=v._It,w.I_t=v.xIt,w.__t=v.IIt),f&&(y._u=v.RIt,w.G_t=v.GIt),m&&(y.iIt=v.iIt,y.nIt=v.nIt,y.rIt=v.rIt,s.P_t=Fb),e||(y.OIt=v.OIt,y.DIt=v.DIt,y.FIt=v.FIt,y.kIt=v.kIt,y.hq=v.hq,w.zIt=v.zIt,w.JIt=v.JIt,w.qIt=v.qIt,w.YIt=v.YIt,w.XIt=v.XIt,w.jIt=v.jIt,y.UIt=v.UIt,y.HIt=v.HIt,w.VIt=v.VIt,w.KIt||(w.KIt=v.KIt),S.s_t||(S.s_t=v.s_t),S.e_t=v.e_t,S.n_t=v.n_t,S.A_t=v._U,S.R_t=v.xU,S.i_t=v.i_t,S.LIt=v.LIt,S.BIt=v.BIt,S.$It=v.$It,y.nwt=v.nwt,w.NU=v.NU,w.r_t=v.r_t),g&&(S.o_t=v.o_t)}}{const sM=self._s;sM.kyt=class extends sM.Vn{constructor(t){super(),this.zpt=t,this.Jc="",this.HF=-1,this.E_t="",this.O_t=!1,this.D_t=null,this.smt=0,this._St=[],this.omt=null,this.F_t=new Map,this.k_t=null,this.L_t=null,this.N_t=-1,this.Ebt=null,this.B_t=null,this.$_t=!1}zn(){this.Jc="",this.HF=-1,this.E_t="",this.D_t=null,this.L_t=null,this.Ebt=null,this.B_t=null,this.N_t=-1,sM.bh(this._St),this.omt&&(this.omt.clear(),this.omt=null);for(const t of this.F_t.values())t.zn();this.F_t.clear(),this.k_t=null}qM(){const t=this.zpt,s=t.l$().S1(),i=t.Dgt();this.D_t=i.pN(),this.smt=i.dmt()+1;const e=t.Iwt(this.D_t);e&&(this.L_t=e,this.Ebt=e.Ybt(),this.B_t=e.qbt().map(t=>t.Gnt()),e.Zvt()&&(this.N_t=e.Qbt()));for(const t of s){const s=t.nj();s._pt()&&!this.D_t.Mvt(t)||(this._St.push(t),this.F_t.set(t,sM.Hn(sM.W_t,s)))}const n=t.mN();this.omt=n.size>0?n:null}j_t(t){this.Jc="timer",this.qM(),this.HF=this.zpt.l$().FN()+t}V_t(t){this.Jc="walltimer",this.qM(),this.HF=this.zpt.l$().BN()+t}U_t(t){this.Jc="signal",this.qM(),this.E_t=t.toLowerCase()}h_t(t,s){this.Jc="instance-signals",this.qM(),this.E_t=s.toLowerCase(),this.k_t=new Set(t)}H_t(t){this.Jc="promise",this.qM(),t.then(()=>this.twt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.twt()})}z_t(){return"timer"===this.Jc}J_t(){return"walltimer"===this.Jc}Zyt(){return"signal"===this.Jc}hwt(){return"instance-signals"===this.Jc}Mwt(){return"promise"===this.Jc}Qyt(){return this.E_t}q_t(){return this.O_t}twt(){this.O_t=!0}owt(t){this.k_t.delete(t),0===this.k_t.size&&this.twt()}Byt(){return this.z_t()?this.HF<=this.zpt.l$().FN():this.J_t()?this.HF<=this.zpt.l$().BN():this.q_t()}Y_t(t){t.amt(this.D_t,this.smt);for(const[t,s]of this.F_t.entries()){const i=t.nj();s.amt(i)}this.omt&&t.Imt([...this.omt]);const s=this.L_t;s&&(s.lbt(this.Ebt),s.qbt().map((t,s)=>t.urt(this.B_t[s])),s.Zvt()&&s.tMt(this.N_t))}$yt(t){this.Y_t(t),this.D_t.Qvt(t),this.L_t&&this.L_t.Zvt()&&this.L_t.Sbt(this.N_t),this.zpt.Ryt(this._St),this.$_t=!0}async Uyt(t){this.Y_t(t);for(const s of this.D_t.tbt(t))await this.zpt.l$().pyt(s);this.L_t&&this.L_t.Zvt()&&this.L_t.Sbt(this.N_t),this.zpt.Ryt(this._St),this.$_t=!0}Wyt(){return this.$_t}Mpt(t){for(const s of this.F_t.values())s.Mpt(t);if("instance-signals"===this.Jc){for(const s of t)this.k_t.delete(s);0===this.k_t.size&&this.twt()}}e4(){const t={},s={wt:this.Jc,t:this.HF,st:this.E_t,s:this.O_t,ev:this.D_t.G1(),sm:this._St.map(t=>t.G1()),dsm:this.omt?[...this.omt].map(t=>t.G1()):null,sols:t};this.D_t.$vt(this.smt)&&(s.act=this.D_t.Ngt(this.smt).G1());for(const[s,i]of this.F_t)t[s.G1().toString()]=i.e4();return"instance-signals"===this.Jc&&(s.pi=[...this.k_t].map(t=>t.xU())),s}static Cwt(t,s){const i=t.l$(),e=t.Jgt(s.ev);if(!e)return null;let n=0;if(s.hasOwnProperty("act")){const i=t.Ygt(s.act);if(!i)return null;n=i.CL()}const r=sM.Hn(sM.kyt,t);r.HF=s.t,s.hasOwnProperty("wt")?r.Jc=s.wt:r.Jc=-1===r.HF?"signal":"timer",r.E_t=s.st,r.O_t=s.s,r.D_t=e,r.smt=n;for(const t of s.sm){const s=i.QY(t);s&&r._St.push(s)}if(Array.isArray(s.dsm))for(const t of s.dsm){const s=i.QY(t);s&&(r.omt||(r.omt=new Set),r.omt.add(s))}for(const[e,n]of Object.entries(s.sols)){const s=parseInt(e,10),h=i.QY(s);if(!h)continue;const o=sM.Hn(sM.W_t,null);o.n4(t,n),r.F_t.set(h,o)}if("instance-signals"===r.Jc){r.k_t=new Set;for(const t of s.pi){const s=i.AB(t);s&&r.k_t.add(s)}}return r}}}{const iM=self._s;iM.W_t=class extends iM.Vn{constructor(t){super(),this.mpt=null,this.X_t=!0,this.dQ=[],t&&(this.mpt=t.fU(),this.X_t=t._pt(),iM.xh(this.dQ,t.Fpt()))}zn(){this.mpt=null,iM.bh(this.dQ)}amt(t){t.Dpt(this.X_t),iM.xh(t.Fpt(),this.dQ)}Mpt(t){iM.Ah(this.dQ,t)}e4(){return{sa:this.X_t,insts:this.dQ.map(t=>t.xU())}}n4(t,s){const i=t.l$();this.X_t=!!s.sa,iM.bh(this.dQ);for(const t of s.insts){const s=i.AB(t);s&&this.dQ.push(s)}}}}{let eM=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};GetNextParamMap=eM;const nM=self._s;nM.K_t=class extends nM.Vn{constructor(t){super(),this.Bc=t.runtime,this.Wc=t.id,this.Yn=t.name??"",this.Z_t=!!t.wW,this.Q_t=!!t.tGt,this.sGt=!!t.xW,this.iGt=!!t.eGt,this.nGt=!!t._W,this.rGt=!!t.hGt,this.oGt=!!t.OW,this.aGt=!!t.MW,this.lGt=!!t.PW,this.uGt=t.cGt,this.fGt=null,this.dGt=new Map,this.pGt=new Map,this.mGt=new Map,this.gGt=new Map,this.yGt=t.wGt,this.SGt=null}zn(){this.Bc=null}l$(){return this.Bc}yW(){return this.Wc}Ac(){return this.Yn}vGt(){}rwt(){return this.sTt()>=2?this.SGt.constructor:this.constructor}sTt(){return this.uGt}bGt(t=!1){let s=this.yGt;return t&&"function"!=typeof s&&this.sTt()>=2&&(s=globalThis.kq),s}SW(){return this.Z_t}bW(){return this.Q_t}TW(){return this.aGt}AW(){return this.lGt}IW(){return this.sGt}bM(){return this.iGt}GW(){return this.nGt}EW(){return this.rGt}DW(){return this.oGt}TMt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.dGt.get(t);return i||(i=t.bind(s),this.dGt.set(t,i),i)}KCt(t,s,i){if(!s)throw new Error("missing 'this' binding");const e=eM(this.pGt,t);let n=e.get(i);return n||(n=t.bind(s,i),e.set(i,n),n)}ZCt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");const n=eM(this.mGt,t),r=eM(n,i);let h=r.get(e);return h||(h=t.bind(s,i,e),r.set(e,h),h)}QCt(t,s,i,e,n){if(!s)throw new Error("missing 'this' binding");const r=eM(this.gGt,t),h=eM(r,i),o=eM(h,e);let a=o.get(n);return a||(a=t.bind(s,i,e,n),o.set(n,a),a)}MGt(t){if(!this.SW())throw new Error("must be single-global plugin");this.fGt=t}WW(){if(!this.SW())throw new Error("must be single-global plugin");return this.fGt}VW(){if(!this.SW())throw new Error("must be single-global plugin");return this.fGt.VW()}CGt(){const t=this.sTt();nM.mW.TGt(this,t);const s=this.bGt(!0);if(s){if(this.SGt=new s,!(this.SGt instanceof self.dW))throw new TypeError("plugin class must derive from IPlugin")}else this.SGt=new self.dW;nM.mW.xGt(t)}NW(){return this.SGt}}}{const rM=self._s;rM.IGt=class extends rM.K_t{constructor(t,s){super(t),this._Gt=s,this.GGt=0,this.PGt=new Map,this.AGt("elem-focused",t=>t.RGt()),this.AGt("elem-blurred",t=>{t&&t.EGt()})}zn(){super.zn()}OGt(t){const s=this.GGt++;return this.PGt.set(s,t),s}DGt(t){this.PGt.delete(t)}AGt(t,s){this.Bc.KU(this._Gt,t,t=>{const i=this.PGt.get(t.elementId);s(i,t)})}}}{const hM=self._s;hM.FGt=class extends hM.Vn{constructor(t){super(),this.mpt=t,this.Bc=t.l$(),this.kGt=t.zW()}zn(){this.mpt=null,this.Bc=null,this.kGt=null}fU(){return this.mpt}l$(){return this.Bc}zW(){return this.kGt}WJ(){return this.mpt.WJ()}vGt(){}dTt(t){}ZTt(t){}QTt(t){}g5(t){}M5(){}S5(){}U5(t){}LGt(){}bGt(){return null}NGt(t,s,i){const e=hM.Hn(hM.Event,t,s);e.BGt=this,i&&Object.assign(e,i),this.fU().PZ(e)}}}{const oM=self._s;oM.$Gt=class extends oM.Vn{constructor(t,s){super(),this.di=t,this._Gt=s,this.WGt=null,this.Bc=t.l$(),this.mpt=this.di.fU(),this.jGt=this.mpt.KTt(),this.s6=null,this.e6=null,this.hH=!1,this.aH=!1,this.Kf=null,this.cA=!1}zn(){this.cA=!0,this.VGt(),this.UGt(),this.s6=null,this.e6=null,this.Kf&&(this.Kf.zn(),this.Kf=null),this.di=null,this.Bc=null,this.mpt=null,this.jGt=null}Jn(){return this.cA}Pq(){return this.di}l$(){return this.Bc}fU(){return this.mpt}zW(){return this.jGt.zW()}KTt(){return this.jGt}HGt(){return this.di.RB()}qU(t){return this.Bc.qU(t,this.di,null)}zGt(t){return this.Bc.zGt(t,this.di,null)}ZB(t){return this.Bc.ZB(t,this.di,null)}JGt(t,s){return this.Bc.JGt(t,this.di,s)}qGt(t,s){return this.Bc.qGt(t,this.di,s)}YGt(t){return this.Bc.YGt(t)}XGt(t,s){this.Bc.KU(this._Gt,t,s)}KGt(t){for(const[s,i]of t)this.XGt(s,i)}ZGt(t,s){this.Bc.jc(this._Gt,t,s)}QGt(t,s){return this.Bc.HB(this._Gt,t,s)}tPt(t,s){if(!this.Bc.zL())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this._Gt,handler:t,data:s,responseId:null});this.ZGt(t,s)}sPt(t){if(!t)throw new Error("cannot set empty component id");this.WGt=t}iPt(){if(!this.WGt)throw new Error("wrapper extension component id not set");return this.Bc.dH(this.WGt)}mH(t,s){if(!this.WGt)throw new Error("wrapper extension component id not set");this.Bc.mH(this.WGt,t,s)}ePt(t){for(const[s,i]of t)this.mH(s,i)}VY(t,s){if(!this.WGt)throw new Error("wrapper extension component id not set");this.Bc.VY(this.WGt,t,s)}UY(t,s){if(!this.WGt)throw new Error("wrapper extension component id not set");return this.Bc.UY(this.WGt,t,s)}c7(){}nPt(){}rPt(){if(!this.hH){if(!this.s6)if(this.Bc.iH()){const t=globalThis.eH,s=this.zW();this.s6=()=>{const i=performance.now();this.c7(),t.rH(s,performance.now()-i)}}else this.s6=()=>this.c7();this.Bc.Sf().addEventListener("tick",this.s6),this.hH=!0}}VGt(){this.hH&&(this.Bc.Sf().removeEventListener("tick",this.s6),this.hH=!1)}hPt(){return this.hH}oPt(){if(!this.aH){if(!this.e6)if(this.Bc.iH()){const t=globalThis.eH,s=this.zW();this.e6=()=>{const i=performance.now();this.nPt(),t.rH(s,performance.now()-i)}}else this.e6=()=>this.nPt();this.Bc.Sf().addEventListener("tick2",this.e6),this.aH=!0}}UGt(){this.aH&&(this.Bc.Sf().removeEventListener("tick2",this.e6),this.aH=!1)}aPt(){return this.aH}lPt(){return[]}aC(){return null}lC(t){}sot(t){}oot(t,s){}tat(t,s,i){if(0===s)return;const e=this.sot(t);if("number"!=typeof e)throw new Error("expected number");this.oot(t,e+s,i)}uPt(t,s,i,e){}cPt(t,...s){t.call(this,...s)}fPt(t,...s){return t.call(this,...s)}bGt(){return null}NGt(t,s,i){if(!this.di.dPt())return;const e=this.HGt(),n=oM.Hn(oM.Event,t,s);n.dJ=e,i&&Object.assign(n,i),e.dispatchEvent(n)}bM(){return!1}}}{const aM=self._s;aM.pPt=class extends aM.$Gt{constructor(t,s){super(t,s),this._it=t.kB(),this.mPt=null,this.gPt=null}zn(){if(this.mPt){const t=this.Bc.Sf();t.removeEventListener("renderercontextlost",this.mPt),t.removeEventListener("renderercontextrestored",this.gPt),this.mPt=null,this.gPt=null}this._it=null,super.zn()}yPt(){this.wPt()}SPt(){}vPt(){}wPt(){if(this.mPt)return;this.mPt=()=>this.rQ(),this.gPt=()=>this.bPt();const t=this.Bc.Sf();t.addEventListener("renderercontextlost",this.mPt),t.addEventListener("renderercontextrestored",this.gPt)}rQ(){this.SPt()}bPt(){this.vPt()}kB(){return this._it}wet(){return!1}yet(){if(!this.wet())throw new Error("original size not known");const t=this.MPt();if(t)return t.Vg()}bet(){if(!this.wet())throw new Error("original size not known");const t=this.MPt();if(t)return t.Qg()}MPt(){return null}CPt(){const t=this.MPt();if(t){const s=t.Tx();if(s)return[s.Vg(),s.Qg()]}return[100,100]}TPt(){const t=this.MPt();return t?t.yR():null}xPt(){const t=this.MPt();return t?t.IPt():null}_Pt(){const t=this.MPt();return!!t&&t.GPt()}pxt(t){const s=this.di.kB();return[s.YM(),s.ZM(),s.kH()]}LGt(t,s,i){}PPt(t,s){}E3(){return!0}}}{const lM=self._s,uM=lM.Hn(lM.Rect);lM.APt=class extends lM.pPt{constructor(t,s){super(t,s),this.RPt=this.zW().OGt(this),this.EPt=!0,this.OPt=!1,this.DPt=!1,this.FPt=-.2,this.kPt=lM.Hn(lM.Rect,0,0,-1,-1);const i=this.Bc.IB();this.LPt=i.rY(),this.NPt=i.hY(),this.BPt=-1,this.$Pt=-1,this.WPt=!1,this.rPt()}zn(){this.zW().DGt(this.RPt),this.jPt("destroy"),this.RPt=-1,super.zn()}sJ(){if(this.Bc.zL())throw new Error("not valid in worker mode");return this.VPt("get-element")}jPt(t,s){s||(s={}),s.elementId=this.RPt,this.ZGt(t,s)}VPt(t,s){return s||(s={}),s.elementId=this.RPt,this.tPt(t,s)}UPt(t,s){return s||(s={}),s.elementId=this.RPt,this.QGt(t,s)}HPt(t){t||(t={});const s=this.kB();t.elementId=this.RPt,t.isVisible=s.vV(),t.htmlIndex=s.LB().fY(),t.htmlZIndex=s.dY(),Object.assign(t,this.zPt()),this.EPt=!!t.isVisible,this.tPt("create",t),this.JPt(!0)}MIt(t){t=!!t,this.EPt!==t&&(this.EPt=t,this.jPt("set-visible",{isVisible:t}))}c7(){this.JPt(!1)}qPt(){const t=this.Bc.IB().wY();return"Android"===lM.Zs.Qs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}JPt(t){if(this.Pq().SY())return;const s=this.kB(),i=s.LB(),e=s.BH();let[n,r]=i.nU(e.Qa(),e.tl()),[h,o]=i.nU(e.sl(),e.il());const a=this.Bc.IB(),l=a.eW(),u=a.rW();if(!s.vV()||!i.vV())return void this.MIt(!1);if(!this.qPt()&&(h<=0||o<=0||n>=l||r>=u))return void this.MIt(!1);uM.set(n,r,h,o);const c=a.rY(),f=a.hY(),d=i.fY(),p=s.dY();if(!t&&uM.equals(this.kPt)&&this.LPt===c&&this.NPt===f&&this.BPt===d&&this.$Pt===p)return void this.MIt(!0);this.kPt.S(uM),this.LPt=c,this.NPt=f,this.BPt=d,this.$Pt=p,this.MIt(!0);let m=null;this.DPt&&(m=i.vY()+this.FPt),this.VPt("update-position",{left:Math.round(this.kPt.Qa()),top:Math.round(this.kPt.tl()),width:Math.round(this.kPt.width()),height:Math.round(this.kPt.height()),htmlIndex:d,htmlZIndex:p,fontSize:m})}eJ(){this.VPt("focus",{focus:!0})}nJ(){this.VPt("focus",{focus:!1})}RGt(){this.OPt=!0}EGt(){this.OPt=!1}_It(){return this.OPt}hJ(t,s){this.jPt("set-css-style",{prop:lM.bo(t),val:s})}CIt(t,s){this.jPt("set-attribute",{name:t,val:s})}TIt(t){this.jPt("remove-attribute",{name:t})}YPt(){this.WPt||(this.WPt=!0,Promise.resolve().then(()=>{this.WPt=!1,this.jPt("update-state",this.zPt())}))}zPt(){}XPt(){return this.RPt}}}{const cM=self._s,fM=self.gJ;cM.KPt=class extends cM.Vn{constructor(t){super(),this.Bc=t.runtime,this.Wc=t.id,this.Yn=t.name??"",this.ZPt=cM.Hn(cM.ku),this.QPt=cM.Hn(cM.ku),this.uGt=t.cGt,this.yGt=t.wGt,this.tAt=null}zn(){this.QPt.zn(),this.ZPt.zn(),this.Bc=null}l$(){return this.Bc}yW(){return this.Wc}Ac(){return this.Yn}vGt(){}sTt(){return this.uGt}bGt(t=!1){let s=this.yGt;return t&&"function"!=typeof s&&this.sTt()>=2&&(s=globalThis.AY),s}sAt(t){this.ZPt.$u(t)}L6(){return this.ZPt.Wu()}n1(t){this.QPt.$u(t)}a1(t){this.QPt.Eu(t)}ej(){return this.QPt.Wu()}CGt(){const t=this.sTt();cM.mW.TGt(this,t);const s=this.bGt(!0);if(s){if(this.tAt=new s,!(this.tAt instanceof fM))throw new TypeError("behavior class must derive from IBehavior")}else this.tAt=new fM;cM.mW.xGt(t)}aJ(){return this.tAt}}}{const dM=self._s;dM.iAt=class extends dM.Vn{constructor(t){super(),this.Bc=t.l$(),this.BMt=t,this.mpt=t.fU(),this.eAt=t.lJ(),this.eAt.sAt(this.mpt)}zn(){this.Bc=null,this.BMt=null,this.mpt=null,this.eAt=null}vGt(){}fJ(){return this.BMt}fU(){return this.mpt}l$(){return this.Bc}lJ(){return this.eAt}}}{const pM=self._s;pM.nAt=class extends pM.Vn{constructor(t,s){super(),this.qlt=t,this._Gt=s,this.di=t.pJ(),this.Bc=t.l$(),this.BMt=t.fJ(),this.jGt=this.BMt.KTt(),this.hH=!1,this.aH=!1,this.WY=!1,this.Kf=null}zn(){this.VGt(),this.UGt(),this.rAt(),this.Kf&&(this.Kf.zn(),this.Kf=null),this.qlt=null,this.di=null,this.Bc=null,this.BMt=null,this.jGt=null}lJ(){return this.BMt.lJ()}hAt(){return this.qlt}pJ(){return this.di}fU(){return this.di.fU()}kB(){return this.di.kB()}l$(){return this.Bc}fJ(){return this.BMt}KTt(){return this.jGt}HGt(){return this.qlt.HGt()}qU(t){return this.Bc.qU(t,this.di,this.BMt)}zGt(t){return this.Bc.zGt(t,this.di,this.BMt)}ZB(t){return this.Bc.ZB(t,this.di,this.BMt)}oAt(){}c7(){}nPt(){}aAt(){}rPt(){this.hH||(this.Bc.FY(this),this.hH=!0)}VGt(){this.hH&&(this.Bc.kY(this),this.hH=!1)}hPt(){return this.hH}oPt(){this.aH||(this.Bc.LY(this),this.aH=!0)}UGt(){this.aH&&(this.Bc.NY(this),this.aH=!1)}aPt(){return this.aH}lAt(){this.WY||(this.Bc.BY(this),this.WY=!0)}rAt(){this.WY&&(this.Bc.$Y(this),this.WY=!1)}uAt(){return this.WY}lPt(){return[]}XGt(t,s){this.Bc.KU(this._Gt,t,s)}cAt(t,s){}aC(){return null}lC(t){}sot(t){}oot(t,s){}tat(t,s){if(0===s)return;const i=this.sot(t);if("number"!=typeof i)throw new Error("expected number");this.oot(t,i+s)}uPt(t,s,i,e){}cPt(t,...s){t.call(this,...s)}fPt(t,...s){return t.call(this,...s)}bGt(){return null}NGt(t,s,i){if(!this.qlt.dPt())return;const e=this.HGt(),n=pM.Hn(pM.Event,t,s);n.fAt=e,n.dJ=e.dJ,i&&Object.assign(n,i),e.dispatchEvent(n)}}}{let mM=function(t){if(t!==yM)throw new Error("invalid internal API token")};ValidateInternalAPIToken=mM;const gM=self._s;gM.i$={},gM.yut={};const yM=gM.Gs();let wM=[],SM=[],vM=[],bM=null,MM=null,CM=null,TM=null;const xM=new Map,IM=new Map;gM.mW=class extends gM.Vn{constructor(t,s){super(),this.Bc=t,this.dAt=[],this.vMt=null,this.pAt=[],this.mAt=new Map,this.gAt=null,this.yAt=null,this.wAt=new Set(s)}SAt(t){const s=t[19],i=this.Bc.Cbt(t[0]);if(!i)throw new Error("missing plugin");gM.a_t(t,i,s);const e=s>=2?gM.K_t:i,n=gM.Hn(e,{runtime:this.Bc,wW:t[1],tGt:t[2],xW:t[5],_W:t[8],eGt:t[9],hGt:t[13],OW:t[14],MW:t[17],PW:t[18],cGt:s,id:t[20],name:t[21],wGt:s>=2?i:null});n.vGt(),this.dAt.push(n),xM.set(i,n)}vAt(){this.vMt=gM.Hn(gM.i$.s$,{runtime:this.Bc,wW:!0}),this.vMt.vGt()}bAt(t){const s=t[1],i=t[2],e=t[3],n=this.Bc.Cbt(t[0]);if(!n)throw new Error("missing behavior");this.mAt.set(n,()=>{const t=s>=2?gM.KPt:n,r=gM.Hn(t,{runtime:this.Bc,id:i,name:e,cGt:s,wGt:s>=2?n:null});r.vGt(),this.pAt.push(r),IM.set(n,r),!this.gAt&&gM.yut.MAt&&r instanceof gM.yut.MAt?this.gAt=r:!this.yAt&&gM.yut.CAt&&r instanceof gM.yut.CAt&&(this.yAt=r),r.CGt()})}TAt(t){const s=this.mAt.get(t);s&&(s(),this.mAt.delete(t))}static TGt(t,s=1){if(gM.mW.TGt!==bM)throw new Error("invalid method");1===s&&wM.push(t),SM.push(t)}static xGt(t=1){if(gM.mW.xGt!==MM)throw new Error("invalid method");1===t&&wM.pop(),SM.pop()}static gU(){if(gM.mW.gU!==CM)throw new Error("invalid method");if(0===wM.length)throw new Error("no init object set");return wM.at(-1)}static pW(t){if(gM.mW.pW!==TM)throw new Error("invalid method");if(mM(t),0===SM.length)throw new Error("no init object set");return SM.at(-1)}static xAt(t){vM.push(t)}static IAt(){vM.pop()}static zU(){if(0===vM.length)throw new Error("no init properties set");return vM.at(-1)}_At(){for(const t of this.dAt)t.CGt()}static LW(t){return xM.get(t)||null}static yJ(t){return IM.get(t)||null}RZ(){return this.vMt}GAt(){return this.gAt}PAt(){return this.yAt}dH(t){return this.wAt.has(t)}},bM=gM.mW.TGt,MM=gM.mW.xGt,CM=gM.mW.gU,TM=gM.mW.pW}{const _M=self._s,GM=new Set;_M.AAt=class extends _M.Vn{constructor(){super(),this.RAt=0,this.JZ="",this.qZ=0,this.EAt=0,this.OAt=0,this.Ay=0,this.Ry=0,this.DAt=!1,this.FAt=!1,this.kAt=null,this.LAt="",this.rA=_M.Hn(_M.Rect),this.NAt=_M.Hn(_M.Pl),this.BAt="",this.$At=new self.o$(this),GM.add(this)}zn(){this.aA(),this.kAt&&0===this.kAt.aQ()&&this.kAt.zn(),this.kAt=null,GM.delete(this),this.WAt()}static rQ(){for(const t of GM)t.LAt="",t.rA.set(0,0,0,0),t.NAt.Xl(t.rA)}jAt(t){this.JZ=t[0],this.qZ=t[1],this.EAt=t[2],this.OAt=t[3],this.Ay=t[4],this.Ry=t[5],this.DAt=t[6],this.FAt=!0}VAt(t,s,i){if(i=!!i,this.kAt)throw new Error("already loaded asset");this.JZ=s;const e={wZ:i};return _M.Kh(s)&&(e.SZ="remote"),this.a$(t,e),this.kAt.bZ()}UAt(t,s){if(this.kAt)throw new Error("already loaded asset");this.JZ="",this.qZ=s.size,this.kAt=_M.Hn(_M.vZ,t.GL(),{blob:s,size:this.qZ,SZ:"local"})}HAt(t){if(t===this)throw new Error("cannot replace with self");this.RAt++,this.aA(),this.JZ=t.JZ,this.qZ=t.qZ,this.EAt=t.EAt,this.OAt=t.OAt,this.Ay=t.Ay,this.Ry=t.Ry,this.DAt=t.DAt,this.FAt=t.FAt,this.kAt=t.kAt,this.LAt=t.LAt,this.rA=t.rA,this.NAt=t.NAt,this.WAt()}TZ(){return this.JZ}Du(){return this.qZ}zAt(){return this.EAt}JAt(){return this.OAt}GPt(){return this.DAt}Vg(){return this.Ay}Qg(){return this.Ry}qAt(){return this.kAt.Vg()}YAt(){return this.kAt.Qg()}a$(t,s){if(this.kAt)throw new Error("already got asset");s=Object.assign({},s,{url:this.TZ(),size:this.Du()}),this.kAt=t.yZ(s)}ZZ(){return this.kAt&&this.kAt.ZZ()}async KX(t,s){if(!this.kAt)throw new Error("no asset");if(this.LAt)throw new Error("already loaded texture");const i=this.RAt;this.LAt="loading";const e=await this.kAt.KX(t,s);if(this.RAt!==i)return null;if(!e)return this.LAt="",null;this.LAt="loaded",this.FAt||(this.Ay=e.Vg(),this.Ry=e.Qg(),this.FAt=!0);const n=this.DAt?this.Ry:this.Ay,r=this.DAt?this.Ay:this.Ry;return this.rA.set(this.EAt,this.OAt,this.EAt+n,this.OAt+r),this.rA.St(e.Vg(),e.Qg()),this.NAt.Xl(this.rA),this.DAt&&this.NAt.iu(),e}aA(){this.LAt&&(this.kAt&&this.kAt.aA(),this.LAt="",this.rA.set(0,0,0,0),this.NAt.Xl(this.rA))}Tx(){return this.kAt&&"loaded"===this.LAt?this.kAt.Tx():null}yR(){return this.rA}IPt(){return this.NAt}Jq(){return this.$At}XAt(){return this.kAt}async KAt(t){t||(t=await this.kAt.lQ());const s=_M.co(this.Ay,this.Ry),i=s.getContext("2d");return this.DAt?(i.rotate(Math.PI/-2),i.translate(-this.Ry,0),i.drawImage(t,this.EAt,this.OAt,this.Ry,this.Ay,0,0,this.Ry,this.Ay)):i.drawImage(t,this.EAt,this.OAt,this.Ay,this.Ry,0,0,this.Ay,this.Ry),s}async ZAt(t){if(this.BAt)return this.BAt;const s=await this.KAt(t),i=await _M.fo(s);return this.BAt=URL.createObjectURL(i),this.BAt}WAt(){this.BAt&&(URL.revokeObjectURL(this.BAt),this.BAt="")}}}{const PM=self._s;PM.QAt=class extends PM.Vn{constructor(t){super(),this.Yn=t[0],this.tRt=t[1],this.ACt=!!t[2],this.Rat=t[3],this.sRt=t[4],this.iRt=!!t[5],this.JQ=t[6],this.eRt=t[7].map(t=>PM.Hn(PM.nRt,t)),this.rRt=new self.CJ(this)}static hRt(t,s){const i=PM.Hn(PM.QAt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.eRt.push(PM.nRt.hRt(t)),i}zn(){for(const t of this.eRt)t.zn();PM.bh(this.eRt)}oRt(t){for(const s of this.eRt)s.WJ().a$(t)}aRt(t,s){return Promise.all(this.eRt.map(i=>i.WJ().KX(t,s)))}lRt(){for(const t of this.eRt)t.WJ().aA()}Ac(){return this.Yn}G1(){return this.JQ}OJ(){return this.eRt.length}FJ(){return this.eRt}uRt(t){if((t=Math.floor(t))<0||t>=this.eRt.length)throw new RangeError("invalid frame");return this.eRt[t]}cRt(t,s){(s=Math.floor(s))<0?this.eRt.unshift(t):s>=this.eRt.length?this.eRt.push(t):this.eRt.splice(s,0,t)}fRt(t){if((t=Math.floor(t))<0||t>=this.eRt.length)throw new RangeError("invalid frame");this.eRt[t].zn(),this.eRt.splice(t,1)}dRt(t){for(let s=0,i=this.eRt.length;s<i;++s)if(PM.Ze(this.eRt[s].sq(),t))return s;return-1}pRt(t){if("string"==typeof t){const s=this.dRt(t);if(-1===s)throw new Error(`cannot find animation frame with tag ${t}`);return s}return t}TJ(){return this.tRt}IJ(){return this.ACt}GJ(){return this.Rat}AJ(){return this.sRt}EJ(){return this.iRt}mRt(){return this.rRt}}}{const AM=self._s,RM=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(t.length);for(let i=0,e=t.length;i<e;++i)s[i]=t.charCodeAt(i);return new Blob([s],{type:"image/png"})})();AM.nRt=class extends AM.Vn{constructor(t){super(),this.gRt=AM.Hn(AM.AAt),this.gRt.jAt(t),this.yRt=t[7],this.wRt=AM.Hn(AM.Pa,t[8],t[9]),this.SRt=t[10].map(t=>AM.Hn(AM.vRt,this,t)),this.bRt=new Map;for(const t of this.SRt)this.bRt.set(t.Ac().toLowerCase(),t);this.MRt=null;const s=t[11];s.length>=6&&(this.MRt=AM.Hn(AM.lu,s)),this.Ew=t[12]?t[12]:"",this.CRt=new self.$J(this)}static hRt(t){const s=AM.Hn(AM.nRt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.gRt.UAt(t,RM),s}zn(){this.MRt&&(this.MRt.zn(),this.MRt=null),this.gRt.zn(),this.gRt=null}WJ(){return this.gRt}jJ(){return this.yRt}GH(){return this.wRt.Da()}RH(){return this.wRt.ka()}KJ(){return this.MRt}YJ(t){return this.bRt.get(t.toLowerCase())||null}qJ(t){return(t=Math.floor(t))<0||t>=this.SRt.length?null:this.SRt[t]}UJ(){return this.SRt.length}sq(){return this.Ew}kJ(){return this.CRt}}}{const EM=self._s;EM.vRt=class extends EM.Vn{constructor(t,s){super(),this.TRt=t,this.Yn=s[0],this.xRt=EM.Hn(EM.Pa,s[1],s[2])}zn(){}Ac(){return this.Yn}YM(){return this.xRt.Da()}ZM(){return this.xRt.ka()}IRt(){return this.xRt}}}{const OM=globalThis._s,DM=globalThis.eH,FM=globalThis.UW,kM=globalThis.rj,LM=globalThis.vj,NM=globalThis.assert;OM.Sct=class extends OM.Vn{constructor(t,s,i){super();const e=t.Cbt(i[1]);this.Bc=t,this.kGt=OM.mW.LW(e),this.jGt=null,this._Rt=e.Instance,this.Rw=s,this.JQ=i[11],this.Yn=i[0],this.oMt=this.Bc.Ugt(i[14]),this.GRt=!!i[9],this.PRt=!!i[2],this.ARt=!!i[10],this.RRt=i[3].map(s=>({EQ:s[0],type:s[1],name:s[2],ERt:t.Ugt(s[3])})),this.ORt=i[4],this.DRt=i[5],this.Q_t=this.kGt.bW(),this.FRt=OM.Hn(OM.Event.Sf),this.G0=null;const[n,r]=t.RL().L$();if(this.kRt=OM.Hn(OM.LRt,n,r),this.NRt=!0,this.BRt=null,this.$Rt=null,this.WRt=-1,this.jRt=null,this.VRt=null,this.URt=null,this.HRt=null,this.zRt=null,this.JRt=!1,this.qRt=null,this.YRt=i[8].map(t=>OM.XRt.Ux(this,t)),this.KRt=[],this.ZRt=new Map,this.QRt=new Map,this.tEt=new Set,this.sEt=new Map,this.iEt=OM.Hn(OM.ppt,this),this.eEt=null,this.nEt=0,this.rEt=!1,this.qRt=null,this.gRt=null,this.hEt=null,this.oEt=null,this.aEt=null,this.lEt=0,this.FCt=new Map,this.kCt=new Map,this.dQ=[],this.uEt=new Map,this.cEt=!0,this.kGt.GW()&&(this.G0=OM.Hn(OM.P0,this,i[12])),i[6]&&(this.gRt=OM.Hn(OM.AAt),this.gRt.jAt(i[6])),i[7]){this.hEt=i[7].map(t=>OM.Hn(OM.QAt,t)),this.oEt=new Map,this.aEt=new Map;for(const t of this.hEt)this.oEt.set(t.Ac().toLowerCase(),t),this.aEt.set(t.G1(),t)}this.PRt?(this.BRt=[],this.$Rt=new Set,this.WRt=this.Bc.fEt()):(this.jRt=[],this.VRt=new Set,this.URt=[],this.HRt=[],this.zRt=[]);const h=this.kGt.sTt();if(h<2&&(this.jGt=OM.Hn(e.dEt,this,i[15]),!(this.jGt instanceof OM.FGt)))throw new Error("v1 sdk type must derive from SDKTypeBase");let o;if(this.pEt=null,this.mEt=null,this.j0=OM.Hn(OM.Event.Sf),OM.mW.TGt(this,h),h>=2?(o=e.dEt,o||(o=globalThis.Uq)):o=this.jGt.bGt(),o&&!this.PRt){if(this.pEt=new o(h<2?this:null),h<2&&!(this.pEt instanceof kM))throw new TypeError("script interface class must derive from IObjectType");if(h>=2&&!(this.pEt instanceof globalThis.Uq))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else{const t=this.PRt?LM:kM;this.pEt=new t}if(OM.mW.xGt(h),i[13]){const t=i[13];if(t){const s=t[0],i=t[1],e=t[2];this.jGt.LGt(s,i,e)}}this.Bc.gEt()&&!this.PRt&&!this.ARt&&this.Q_t||this.vGt(),this.kGt.SW()&&(this.kGt.MGt(this),this.yEt(i)),this.wEt=null}static Ux(t,s,i){return OM.Hn(OM.Sct,t,s,i)}zn(){if(this.FRt.zn(),this.FRt=null,this.gRt&&(this.gRt.zn(),this.gRt=null),this.hEt){for(const t of this.hEt)t.zn();OM.bh(this.hEt),this.oEt.clear(),this.aEt.clear()}this.wEt=null,this.iEt.zn(),this.iEt=null,this.FCt.clear(),this.kCt.clear(),this.qRt=null,this.Bc=null}SEt(t){for(let s=1,i=t.length;s<i;++s){const i=this.Bc.q0(t[s]);this.BRt.push(i),this.$Rt.add(i),i.jRt.push(this),i.VRt.add(this)}}vEt(t){this.JRt=!0,this.qRt=t}CU(){return this.JRt}d5(){return this.qRt}bEt(){let t=0;if(!this.PRt)for(const s of this.jRt)for(const i of s.MEt()){const s=i.Ac().toLowerCase();this.ZRt.set(s,i),this.QRt.set(s,t),this.KRt.push(i),++t}for(const s of this.MEt()){const i=s.Ac().toLowerCase();this.ZRt.set(i,s),this.QRt.set(i,t),this.KRt.push(s),++t}for(const t of this.KRt)this.tEt.add(t.lJ().constructor);if(!this.PRt&&this.jRt.length){const t=this.Bc.CEt();OM.Ch(this.URt,t,0),OM.Ch(this.HRt,t,0),OM.Ch(this.zRt,t,0);const s=[];let i=0,e=0,n=0;for(const t of this.jRt){const r=t.LMt();this.URt[r]=i,i+=t.TEt(),this.HRt[r]=e,e+=t.xEt(),this.zRt[r]=n,n+=t.IEt();const h=t._j();if(h&&this.G0)for(const t of h.Gj())s.push(t._Et(this.G0))}this.G0&&this.G0.GEt(s)}}yEt(t){const s=OM.te(t[17])?t[17]:this.Bc.PEt(),i=OM.Hn(OM.Instance,{runtime:this.Bc,objectType:this,uid:s});i.AEt(t[16],[]),this.Bc.REt(s,i),this.dQ.push(i)}KTt(){return this.jGt}EEt(){return this.ARt}Sf(){return this.FRt}vGt(){this.PRt||(this.jGt?this.jGt.vGt():this.pEt.Hq())}OEt(){return this.lEt>0}async g5(t){this.PRt||(this.lEt++,1===this.lEt&&(this.jGt?await this.jGt.g5(t):await this.pEt.qq(this.Bc.IB().xB())))}M5(){if(!this.PRt){if(this.lEt--,this.lEt<0)throw new Error("released textures too many times");0===this.lEt&&(this.jGt?this.jGt.M5():this.pEt.Yq(this.Bc.IB().xB()))}}S5(){if(this.PRt)throw new Error("not applicable to family");this.jGt?this.jGt.S5():this.pEt.Xq()}async U5(t){this.PRt||(this.jGt?await this.jGt.U5(t):await this.pEt.Kq(this.Bc.IB().xB()))}l$(){return this.Bc}zW(){return this.kGt}DEt(){return this._Rt}Ac(){return this.Yn}Ugt(){return this.oMt}CL(){return this.Rw}G1(){return this.JQ}v1(){return this.PRt}WQ(){return this.GRt}bW(){return this.Q_t}LMt(){return this.WRt}MEt(){return this.YRt}xEt(){return this.ORt}FEt(t){return t&&this.tEt.has(t)}TEt(){return this.RRt.length}kEt(){return this.RRt.map(t=>t.EQ)}LEt(t){return this.RRt.findIndex(s=>s.EQ===t)}Qit(t){return this.RRt.findIndex(s=>s.name===t)}NEt(){return this.RRt.map(t=>t.name)}BEt(){return this.RRt.map(t=>t.ERt)}iet(t){if((t=Math.floor(t))<0||t>=this.RRt.length)throw new RangeError("invalid instance variable index");return this.RRt[t].type}tet(t){if((t=Math.floor(t))<0||t>=this.RRt.length)throw new RangeError("invalid instance variable index");return this.RRt[t].name}IEt(){return this.DRt}$Et(){return this.KRt}Drt(t){return this.ZRt.get(t.toLowerCase())||null}net(t){const s=this.QRt.get(t.toLowerCase());return void 0===s?-1:s}_j(){return this.G0}GW(){return this.kGt.GW()}WEt(){return this.G0&&this.G0.jEt()}Eyt(){return this.iEt}nj(){return this.iEt.nj()}WJ(){return this.gRt}K0(t){this.eEt=t}X0(){return this.eEt}Z0(t){this.nEt=t}VEt(){return this.nEt}UEt(){return this.hEt}HEt(){return this.hEt.length}yj(){return this.jRt}nxt(t){return this.VRt.has(t)}Cj(){return this.BRt}xj(t){return this.$Rt.has(t)}jMt(t){return this.HRt[t]}kMt(t){return this.URt[t]}Hbt(t){this.sEt.set(t.Xbt().toLowerCase(),t)}zbt(t){return!!this.iMt(t)}iMt(t){const s=this.sEt.get(t.toLowerCase());return s&&s._u()?s:null}zEt(){return this.hEt}JEt(t){if(!this.hEt)throw new Error("no animations");return this.oEt.get(t.toLowerCase())||null}qEt(t){if(!this.hEt)throw new Error("no animations");return this.aEt.get(t)||null}YEt(t){if(this.JEt(t))throw new Error(`animation name '${t}' already exists`);const s=OM.QAt.hRt(this.l$(),t);return this.hEt.push(s),this.oEt.set(s.Ac().toLowerCase(),s),this.aEt.set(s.G1(),s),s}XEt(t){const s=this.JEt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.hEt.length)throw new Error("cannot remove last animation");const i=this.hEt.indexOf(s);this.hEt.splice(i,1),this.oEt.delete(s.Ac().toLowerCase()),this.aEt.delete(s.G1()),s.zn()}KEt(){if(!this.hEt)throw new Error("no animations");return this.hEt[0]}ZEt(){return this.KEt().uRt(0)}QEt(){if(this.hEt){const t=this.ZEt().WJ();return[t.Vg(),t.Qg()]}return this.gRt?[this.gRt.Vg(),this.gRt.Qg()]:[100,100]}VW(){if(!this.kGt.SW())throw new Error("not a single-global plugin");return this.dQ[0]}ej(){return this.dQ}*qW(){yield*this.dQ}*ij(){yield*this.dQ,yield*this.Bc.aIt(this)}oj(){return this.dQ.length}n1(t){this.dQ.push(t)}tOt(){this.cEt=!0}K5(){if(!this.cEt||this.PRt)return;const t=this.dQ;let s=0;for(let i=t.length;s<i;++s)t[s].sOt(s);const i=this.Bc.iOt();for(const t of i)t.fU()===this&&t.sOt(s++);this.cEt=!1}eOt(t){const s=this.dQ;if(t<s.length)return s[t];t-=s.length;const i=this.Bc.iOt();for(const s of i)if(s.fU()===this){if(0===t)return s;--t}return null}Hxt(t){if(t&&t.CU()&&t.fU()!==this)for(const s of t.TU())if(s.fU()===this)return s;const s=this.nj().ej();return s.length?s[0]:null}sj(t){const s=this.nj().ej();return s.length>0?s[t._U()%s.length]:null}*pIt(t,s){const i=this.nj().ej(),e=i.length,n=s.nj(),r=s.nj().ej(),h=r.length;let o=t._U();!s.v1()&&n._pt()||(o=r.indexOf(t));const a=Math.ceil(e/h),l=e%h;let u=0,c=0;0===l||o<l?(u=o*a,c=a):(u=l*a+(o-l)*(a-1),c=a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}dTt(t){this.jGt?.dTt(t)}pbt(){if(!this.JRt||this.PRt)return;this.K5();const t=this.nj(),s=t.Fpt(),i=t._pt(),e=this.Bc.Dgt(),n=e&&e.pN()&&e.pN().Upt();for(const e of this.qRt.Tj()){if(e===this)continue;e.K5();const r=e.nj();if(r.Dpt(i),!i){const i=r.Fpt();OM.bh(i);for(const t of s)i.push(e.eOt(t._U()));if(n){const s=t.kpt(),i=r.kpt();OM.bh(i);for(const t of s)i.push(e.eOt(t._U()))}}}}wTt(t,s){for(const i of this.d5().Tj()){const e=i.nj();t?OM.Sh(e.kpt(),s):OM.Sh(e.Fpt(),s)}}nOt(){return this.kRt}rOt(t){this.NRt=!!t}hOt(){if(this.NRt&&this.Q_t){for(const t of this.dQ)t.kB().oOt();for(const t of this.Bc.iOt())t.fU()===this&&t.kB().oOt();this.NRt=!1}}aOt(t,s,i){if(s){const i=this.uEt.get(s);i&&(i.delete(t),0===i.size&&this.uEt.delete(s))}if(i){let s=this.uEt.get(i);s||(s=new Set,this.uEt.set(i,s)),s.add(t)}}*lOt(){if(this.v1()){const t=new Set;for(const s of this.BRt)for(const i of s.lOt())t.add(i);yield*t.values()}else for(const t of this.uEt.keys())t.Jn()||(yield t)}oTt(){return this.FCt||(this.FCt=new Map),this.FCt}aTt(){return this.kCt||(this.kCt=new Map),this.kCt}uOt(){return this.FEt(OM.yut.MAt)}cOt(){return this.FEt(OM.yut.CAt)}fOt(){return this.FEt(OM.yut.dOt)}i1(){return this.FEt(OM.yut.pOt)}e4(){const t={instances:this.dQ.map(t=>t.aC())};return this.FCt&&this.FCt.size&&(t.ex=OM.So(this.FCt)),t}n4(t,s){this.FCt&&(this.FCt.clear(),this.FCt=null);const i=t.ex;i&&(this.FCt=OM.vo(i));const e=this.dQ,n=t.instances;for(let t=0,s=Math.min(e.length,n.length);t<s;++t)e[t].lC(n[t]);for(let t=n.length,s=e.length;t<s;++t)this.Bc.wU(e[t]);for(let t=e.length,i=n.length;t<i;++t){const i=n[t];let e=null;if(this.bW()&&(e=this.Bc.cB().e5(i.w.l),!e))continue;const r=this.Bc.e1(this.eEt||this,e,!1,0,0,!0);r.lC(i),s&&s.add(r)}this.wEt=n,this.tOt()}mOt(){return this.wEt}gOt(){this.wEt=null}yOt(){for(let t=0,s=this.dQ;t<s;++t)this.dQ[t].yOt()}$W(){return this.pEt}nN(){return this.j0}wOt(){return this.mEt}aj(t){this.mEt=t}PZ(t){const s=this.Bc,i=s.iH()&&!s.aN().dj();i&&DM.M8(),this.j0.dispatchEvent(t),i&&DM.C8()}}}{const BM=self._s;BM.SOt=class extends BM.Vn{constructor(t,s){super(),this.Bc=t,this.vOt=s;for(const t of this.vOt)t.vEt(this)}zn(){this.Bc=null}l$(){return this.Bc}f5(){return this.vOt}Tj(){return this.vOt}Q5(){return this.vOt.some(t=>t.bW())}}}{const $M=self._s,WM=self.eH,jM=self.cU,VM=$M.mW,UM=[];let HM=0;const zM=new WeakMap,JM=new WeakMap,qM=1,YM=2,XM=4,KM=8,ZM=16,QM=32,tC=64;$M.Instance=class extends $M.Vn{constructor(t){if($M.mW!==VM)throw new Error("invalid addon manager");super(),this.Bc=t.runtime,this.bOt=t.objectType,this._it=null,this.MOt=null,this.COt=null,this.TOt=0,this.xOt=t.uid,this.IOt=HM++,this.MTt=0,this._Ot=null;const s=$M.kh(t.tags);s.length>0&&(this._Ot=new Set(s)),this.GOt=UM,this.POt=UM;const i=this.bOt.$Et();i.length>0&&(this.POt=i.map((t,s)=>$M.Hn($M.AOt,{runtime:this.Bc,uJ:t,dJ:this,index:s}))),this.ROt=this.bOt.CU()?[]:null,this.EOt=-1,this.FRt=null;const e=this.zW();if(e.bM()&&(this.MTt|=4),e.bW())if(this._it=$M.Hn($M.OOt,this,t.MH),t.DOt)this._it.FOt(t.DOt);else{this._it.kOt();const[t,s]=this.bOt.QEt();this._it.$A(t,s),this.fU().WEt()&&this._it.bH().LOt()}t.NOt?this.BOt(t.NOt):this.$Ot()}zn(){if(this.COt&&(this.COt.yU(),this.COt=null),this.POt.length>0){for(const t of this.POt)t.zn();$M.bh(this.POt)}this.MOt&&(this.MOt.zn(),this.MOt=null);const t=zM.get(this);t&&(t.clear(),zM.delete(this));const s=JM.get(this);s&&(s.clear(),JM.delete(this)),this.ROt&&$M.bh(this.ROt),this.FRt&&(this.FRt.zn(),this.FRt=null),this._Ot&&this._Ot.clear(),this._Ot=null,this.Bc=null,this.bOt=null,this.GOt.length>0&&$M.bh(this.GOt),this._it&&(this._it.zn(),this._it=null)}BOt(t){t.length>0&&(this.GOt=[],$M.xh(this.GOt,t))}$Ot(){const t=this.bOt.TEt();if(0===t)return;this.GOt=[];const s=[0,0,""];for(let i=0;i<t;++i)this.GOt.push(s[this.bOt.iet(i)])}AEt(t,s){if(this.MOt)throw new Error("already got sdk instance");for(let t=0,i=this.POt.length;t<i;++t)this.POt[t].AEt(s?s[t]:null);if(this.zW().sTt()<2){if(this.MOt=$M.Hn(this.bOt.DEt(),this,t),!(this.MOt instanceof $M.$Gt))throw new Error("sdk type must derive from SDKInstanceBase");!this.zW().bW()&&this.bOt.wOt()&&this.RB()}else{const s=this.zW().bGt();this.WOt(s.Instance,t)}}iJ(){return this.MOt??this.COt}kB(){return this._it}l$(){return this.Bc}WN(){return this.EOt}AU(){const t=this.EOt;return-1===t?this.l$().WN():t}jN(t){((t=+t)<0||!isFinite(t))&&(t=0),this.EOt=t,this.fU().WEt()&&this.Bc.jOt(this,!0)}EU(){this.EOt=-1,this.fU().WEt()&&this.Bc.jOt(this,!1)}H3(){return this.Bc.VOt(this)}Sf(){return this.FRt||(this.FRt=$M.Hn($M.Event.Sf)),this.FRt}HC(t){this.MOt?this.MOt.HC(t):this.COt.iY(this.Bc.IB().xB())}vGt(t){this.MOt.vGt(t)}UOt(){this.MTt|=2}HOt(){return!!(2&this.MTt)}zOt(){this.MTt|=1}SY(){return!!(1&this.MTt)}bM(){return!!(4&this.MTt)||(this.MOt?this.MOt.bM():this.COt.eM())}JOt(){this.MTt|=32}D3(){return!!(32&this.MTt)}qOt(){return!!(8&this.MTt)}YOt(t){t?this.MTt|=8:this.MTt&=-9}XOt(){return!!(16&this.MTt)}KOt(t){t?this.MTt|=16:this.MTt&=-17}ZOt(){return!!(64&this.MTt)}QOt(t){t?this.MTt|=64:this.MTt&=-65}tDt(t,s){t<<=16,s?this.MTt|=t:this.MTt&=~t}sDt(t){return!!(this.MTt&t<<16)}MPt(){return this.MOt?this.MOt.MPt():null}CPt(){return this.MOt?this.MOt.CPt():null}TPt(){return this.MOt?this.MOt.TPt():null}xPt(){return this.MOt?this.MOt.xPt():null}_Pt(){return!!this.MOt&&this.MOt._Pt()}pxt(t){return this.MOt?this.MOt.pxt(t):[this.COt.x,this.COt.y,this.COt.FH]}fU(){return this.bOt}E3(){return this.MOt?this.MOt.E3():this.COt.eY()}lIt(t){return t.v1()?t.xj(this.fU()):this.fU()===t}iDt(t,s,i){const e=(s,i)=>{const e=i||s.fU(),n=t.get(e);n?n.add(s):t.set(e,new Set([s]))};if(e(this,s),this.CU())for(const t of this.TU())e(t);if(i)for(const t of this.dz())e(t)}eDt(){if(!this.zW().EW())throw new Error("object does not support scene graph")}wz(){return null!==this.rz()}rz(){const t=this.kB();if(!t)return null;const s=t.rz();return s?s.Pq():null}oz(){const t=this.kB();if(!t)return null;const s=t.oz();return s?s.Pq():null}*az(){const t=this.kB();if(t)for(const s of t.az())yield s.Pq()}nDt(t){if(!t)return!1;for(const s of this.children())if(s===t)return!0;return!1}o4(){const t=this.kB();return!!t&&t.o4()}rDt(t){const s=this.kB();if(!s)return[];const i=t.Ac();return s.o8().map(t=>t.Pq()).filter(t=>t.fU().Ac()===i)}o8(){const t=this.kB();return t?t.o8().map(t=>t.Pq()):[]}*children(){const t=this.kB();if(t)for(const s of t.children())yield s.Pq()}*dz(){const t=this.kB();if(t)for(const s of t.dz())yield s.Pq()}uz(){const t=this.kB();return t?t.uz():0}hDt(){return[...this.az()].length}dIt(){const t=this.kB();return t?t.dIt():0}fz(t){const s=this.kB();if(!s)return null;const i=s.fz(t);return i?i.Pq():null}oDt(){const t=this.kB();if(!t)return NaN;const s=t.rz();return s?s.aDt(t):NaN}lDt(t){for(const s of this.kB().o8())if(s.Pq().xU()===t)return!0;return!1}mz(t,s){this.eDt(),t.eDt(),this.kB().mz(t.kB(),s||{})}gz(t){const s=this.kB();s&&s.gz(t.kB())}Lz(){const t=this.kB();return!!t&&t.Lz()}B5(){const t=this.kB();if(!t)return;const s=t.uDt();if(s)for(const t of s){const s=this.Bc.AB(t[2]);if(s){const i=t[3];this.mz(s,{vz:!!(1&i),Mz:!!(i>>1&1),Tz:!!(i>>2&1),Iz:!!(i>>3&1),Gz:!!(i>>4&1),kz:!!(i>>5&1),Az:!!(i>>6&1),Ez:!!(i>>7&1),Dz:!!(i>>8&1)})}}}W5(t,s){const i=t.get(this);if(i)for(const t of i.sceneGraphJson.children){const i=s.get(t.index);if(!i)continue;const e=t.flags;this.mz(i,{vz:!!(1&e),Mz:!!(e>>1&1),Tz:!!(e>>2&1),Iz:!!(e>>3&1),Gz:!!(e>>4&1),kz:!!(e>>5&1),Az:!!(e>>6&1),Ez:!!(e>>7&1),Dz:!!(e>>8&1)})}}PU(){const t=this.Bc.cDt();return t?t.bct(this):""}CU(){return null!==this.ROt}fDt(){$M.bh(this.ROt)}X5(t){this.ROt.push(t)}bU(){return this.ROt}dDt(t){return!!this.pDt(t)}pDt(t){const s=this.TU();if(null===s||0===s.length)return!1;for(const i of s)if(i.fU()===t)return i;return null}TU(){return this.ROt}SSt(){for(const t of this.TU())t.fU().nj().Lpt(t)}pTt(){for(const t of this.TU())t.fU().nj().Ept(t)}mTt(t){for(const s of this.TU())s.fU().nj().Fpt()[t]=s}yTt(){for(const t of this.TU())t.fU().nj().Opt(t)}gTt(t){for(const s of this.TU())s.fU().nj().kpt()[t]=s}zW(){return this.bOt.zW()}sOt(t){this.TOt=t}_U(){return this.bOt.K5(),this.TOt}xU(){return this.xOt}mDt(t){this.xOt=t}gDt(){return this.IOt}yDt(t){t?this.kU(new Set(t)):this._Ot=null}kU(t){if(0===t.size)this._Ot=null;else{this._Ot?this._Ot.clear():this._Ot=new Set;for(const s of t)this._Ot.add(s)}}DU(){return this._Ot??new Set}NIt(){return Array.from(this.DU()).join(" ")}WIt(t){t=Math.floor(t);for(const s of this.DU()){if(0===t)return s;--t}return""}Ort(){return this.POt}wDt(t){if(!t)return null;for(const s of this.POt)if(s.lJ()instanceof t)return s;return null}SDt(t){if(!t)return null;const s=this.wDt(t);return s?s.iJ():null}Ert(t){const s=this.POt;for(let i=0,e=s.length;i<e;++i)if(s[i].fJ().G1()===t)return i;return-1}vDt(){return this.GOt}NEt(){return this.bOt.NEt()}bDt(){return this.GOt.length}uot(t){t|=0;const s=this.GOt;if(t<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}DMt(t){return this.GOt[t]}MDt(t){const s=this.GOt[t];return 0===this.bOt.iet(t)?!!s:s}cot(t,s){t|=0;const i=this.GOt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");switch(this.bOt.iet(t)){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}sat(t,s){if(0===s)return;t|=0;const i=this.GOt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}oTt(){let t=zM.get(this);return t||(t=new Map,zM.set(this,t),t)}aTt(){let t=JM.get(this);return t||(t=new Map,JM.set(this,t),t)}CDt(t){const s=this.fU();if(s.nN().Tf(t))return!0;for(const i of s.yj())if(i.nN().Tf(t))return!0;return!!this.Bc.nN().Tf(t)}fj(t=void 0){const s=t??new Set;if(s.has(this))return;s.add(this);const i=this.kB();if(i&&i.o4())for(const t of this.dz())if(s.add(t),t.CU())for(const i of t.TU())s.add(i);if(this.CU())for(const t of this.TU())t.fj(s);if(!t){for(const t of s.values())t.j5();this.V5()}}TDt(){this.bOt.wOt()&&this.RB();for(const t of this.POt)t.oAt()}xDt(){this.TDt()}j5(){if(this.TDt(),this.CDt("instancecreate")){const t=this.fU(),s=new $M.Event("instancecreate");s.dJ=this.RB(),t.PZ(s);for(const i of t.yj())i.PZ(s);this.Bc.PZ(s)}this.Bc.qU(this.zW().rwt().t$.UIt,this,null)}V5(){if(this.zW().EW()){if(this.PZ(new $M.Event("hierarchyready")),this.CDt("hierarchyready")){const t=this.fU(),s=new $M.Event("hierarchyready");s.dJ=this.RB(),t.PZ(s);for(const i of t.yj())i.PZ(s);this.Bc.PZ(s)}this.Bc.qU(this.zW().rwt().t$.hIt,this,null)}}IDt(){this.Bc.qU(this.zW().rwt().t$.HIt,this,null)}_Dt(t){if(this.COt){const s=new $M.Event("destroy");s.GDt=t,this.PZ(s)}if(!this.CDt("instancedestroy"))return;const s=this.fU(),i=new $M.Event("instancedestroy");i.dJ=this.RB(),i.GDt=t,s.PZ(i);for(const t of s.yj())t.PZ(i);this.Bc.PZ(i)}PDt(){return this.MOt?this.MOt.lPt():this.COt.lH()}aC(t="full",s=null){const i={};"full"===t?i.uid=this.xU():i.c3=!0;const e=this.DU();if(e.size>0&&(i.tags=Array.from(e)),"visual-state"!==t){const s=zM.get(this);if(s&&s.size&&(i.ex=$M.So(s)),-1!==this.WN()&&(i.mts=this.WN()),this.bOt.TEt()>0){const t={},s=this.bOt.kEt();for(let i=0,e=this.GOt.length;i<e;++i)t[s[i].toString()]=this.GOt[i];i.ivs=t}if(this.POt.length){const s={};for(const i of this.POt){const e=i.aC(t);e&&(s[i.fJ().G1().toString()]=e)}i.behs=s}}this._it&&(i.w=this._it.e4(t,s));const n=this.MOt?this.MOt.aC():this.COt.uH();return n&&(i.data=n),i}f6(t="full",s=null){this._it&&this._it.f6(t)}p6(t,s="full",i=null){this._it&&this._it.p6(t,s,i)}ADt(t,s="full",i=null){this._it&&this._it.ADt(t,s,i)}yOt(){this.zW().bW()&&this._it.yOt()}lC(t,s="full",i=null){if("full"===s)this.xOt=t.uid;else if(!t.c3)return;if(this.yDt(t.tags),"visual-state"!==s){let s=zM.get(this);s&&(s.clear(),zM.delete(this));const i=t.ex;i&&(s=$M.vo(i),zM.set(this,s)),this.EOt=t.hasOwnProperty("mts")?t.mts:-1;const e=t.ivs;if(e)for(const[t,s]of Object.entries(e)){const i=parseInt(t,10),e=this.bOt.LEt(i);if(e<0||e>=this.GOt.length)continue;let n=s;null===n&&(n=NaN),this.GOt[e]=n}}if(this.zW().bW()){const e=t.w;if(e){const t=e.l;if(this._it.LB().G1()!==t){const i=this._it.LB(),e=i.mB().e5(t);e?(this._it.WB(e),i.a1(this,!0),e.n1(this,!0),e.jB(this),this._it.CH()):"full"===s&&this.Bc.wU(this)}this._it.n4(e,s,i)}}if("visual-state"!==s){const i=t.behs;if(i)for(const[t,e]of Object.entries(i)){const i=parseInt(t,10),n=this.Ert(i);n<0||n>=this.POt.length||this.POt[n].lC(e,s)}}const e=t.data;e&&(this.MOt?this.MOt.lC(e,s):this.COt.cH(e))}RDt(t){if(this._it.LB().G1()===t)return;const s=this._it.LB(),i=s.mB().e5(t);i&&(this._it.WB(i),s.a1(this,!0),i.n1(this,!0),i.jB(this),this._it.CH())}RB(){return this.COt||this.WOt()}dPt(){return!!this.COt}WOt(t,s){const i=this._it?t?self.Zq:self.Kz:t?self.$U:self.cU,e=t||this.MOt.bGt(),n=this.bOt.wOt(),r=n||e||i,h=this.zW().sTt();if($M.mW.TGt(this,h),$M.mW.xAt(s),this.COt=new r,$M.mW.IAt(),$M.mW.xGt(h),e&&!(this.COt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(n){const t=e||i;if(!(this.COt instanceof t))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.COt}dU(t){if(0===this.GOt.length)return;const s={},i=this.bOt.BEt();for(let t=0,e=i.length;t<e;++t)s[i[t]]={configurable:!1,enumerable:!0,get:$M.Instance.prototype.MDt.bind(this,t),set:$M.Instance.prototype.cot.bind(this,t)};const e=Object.create(Object.prototype,s);t.EDt={value:e,writable:!1}}pU(t){const s=this.POt;if(0===s.length)return;const i={};for(const t of s)i[t.fJ().Ugt()]={value:t.HGt(),writable:!1};const e=Object.create(Object.prototype,i);t.rSt={value:e,writable:!1}}PZ(t){if(!this.dPt())return;const s=this.RB();t.dJ=s;const i=this.Bc,e=i.iH()&&!i.aN().dj();e&&WM.M8(),s.dispatchEvent(t),e&&WM.C8()}}}{const sC=self._s,iC=new Map;sC.l8=class extends sC.Vn{constructor(t){super(),this.gC=t,this.xSt=null,this.ODt=[],this.DDt=t.Vg(),this.FDt=t.Qg(),this.kDt=1,this.LDt=1,this.NDt=0,this.BDt=1,this.$Dt=t.SO(),this.WDt=null,this.jDt=null,this.VDt=NaN,this.UDt=!1,this.u4=NaN,this.c4=NaN,this.HDt=s=>{if(s.dJ!==this.xSt.Pq())return;t.l$().Sf().removeEventListener("instancecreate",this.HDt);const i=this.xSt.Pq().iJ();this.UDt=!!i.wet(),this.u4=this.UDt?i.yet():NaN,this.c4=this.UDt?i.bet():NaN}}zn(){this.xSt=null,this.WDt=null,this.jDt=null,this.VDt=NaN,this.UDt=!1,this.u4=NaN,this.c4=NaN,sC.bh(this.ODt)}zDt(t){if(this.BDt=this.gC.SO(),this.$Dt=this.BDt,this.xSt=t,this.NDt=t?t.Dj():0,this.xSt){const t=this.gC.l$();if(this.xSt.Pq().zW().sTt()<2){const s=this.xSt.Pq().iJ();s?(this.UDt=!!s.wet(),this.u4=this.UDt?s.yet():NaN,this.c4=this.UDt?s.bet():NaN):this.xSt.Pq().SY()||t.Sf().addEventListener("instancecreate",this.HDt)}else this.UDt=!1,this.u4=NaN,this.c4=NaN}else this.UDt=!1,this.u4=NaN,this.c4=NaN}rz(){return this.xSt}o4(){return this.ODt.length>0}o8(){return this.ODt}JDt(){this.o4()&&1!==this.ODt.length&&(this.jDt?this.ODt.sort((t,s)=>{const i=this.jDt.get(t.Pq()),e=this.jDt.get(s.Pq());return sC.te(i)&&sC.te(e)?i-e:0}):this.ODt.sort((t,s)=>{const i=t.Urt().qDt(),e=s.Urt().qDt();return sC.te(i)&&sC.te(e)?i-e:0}))}qDt(){return this.VDt}YDt(){return this.kDt}XDt(t){this.kDt=t}KDt(){return this.LDt}ZDt(t){this.LDt=t}Aot(){return this.$Dt}kxt(){return this.BDt}QDt(t){this.BDt=t}Vrt(){return 0===this.DDt?Number.EPSILON:this.DDt}qrt(){return 0===this.FDt?Number.EPSILON:this.FDt}tFt(){if(this.gC.xz()){const t=this.xSt;let s=t.Vg(),i=t.Urt().Vrt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.UDt?1+s/this.u4:s/i}return 1}sFt(){if(this.gC._z()){const t=this.xSt;let s=t.Qg(),i=t.Urt().qrt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.UDt?1+s/this.c4:s/i}return 1}iFt(){return 0}eFt(){return{sw:this.DDt,sh:this.FDt,sx:this.kDt,sy:this.LDt,psa:this.NDt,oo:this.BDt,so:this.$Dt,pi:this.gC.Pq().oDt()}}e4(t,s=null){const i=this.eFt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.nFt(t),c:this.rFt(t)})}hFt(t){let s="";return t.bz()&&(s+="x"),t.Cz()&&(s+="y"),t.xz()&&(s+="w"),t._z()&&(s+="h"),t.Pz()&&(s+="a"),t.Rz()&&(s+="z"),t.Lz()&&(s+="d"),t.Oz()&&(s+="o"),t.Fz()&&(s+="v"),s}nFt(t){return this.xSt?!this.xSt.Pq()||this.xSt.Pq().SY()?null:this.oFt(this.xSt,this.gC,t):null}rFt(t){return this.ODt.map(s=>this.oFt(s,s,t)).filter(t=>t)}oFt(t,s,i){const e=t.Pq();if(e&&e.SY())return null;const n={};return n.uid=e.xU(),n.f=this.hFt(s),n.offsets=s.aFt(),n.data=sC.l8.lFt(e),n.oci=e.fU().CL(),"state"===i?(n.inst=e.aC("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=e.fU().ej().indexOf(e),n.inst=null),n}n4(t){this.DDt=t.sw,this.FDt=t.sh,this.kDt=t.sx,this.LDt=t.sy,this.NDt=t.psa,this.BDt=t.oo,this.$Dt=t.so,this.VDt=sC.te(t.pi)?t.pi:NaN}uFt(t,s,i,e){if(!t&&!s)if(e?.t_t){if(this.WDt)for(const t of this.WDt)t.SY()||t.wz()||t.l$().wU(t)}else if(this.WDt)for(const t of this.WDt)if(i.c&&i.c.length){if(!i.c.some(s=>s.uid===t.xU()))continue;t.SY()||t.wz()||t.l$().wU(t)}this.WDt=t,this.jDt=s}cFt(t){const s=this.gC.l$();return iC.has(t)?iC.get(t):s.AB(t)}p6(t,s){const i=this.gC,e=i.l$(),n=s?.fFt??new Set;if(t.p&&!this.xSt){const r=t.p.uid,h=this.cFt(r);if(h){const r=h.kB();h.nDt(i.Pq())?this.xSt=r:(h.lDt(i.Pq().xU())?(e.wU(i.Pq()),e.dFt(i.Pq().xU()),iC.delete(i.Pq().xU())):h.mz(i.Pq(),this.pFt(t.p.f)),n.has(i)||(i.mFt(t.p.offsets),this.gFt(h,t.p,s),this.yFt(h,h.xU(),i.l$(),s)),n.add(i),h.kB().Urt().JDt())}else if(sC.te(t.p.oci)){const n=e.lj(e.q0(t.p.oci),i.LB(),0,0,!0);if(n){const r=this.wFt(t.p,e);r&&n.lC(r);const h=n.kB(),o=!!s?.t_t;h.LB().uj(n,!1,o),n.mz(i.Pq(),this.pFt(t.p.f)),iC.set(n.xU(),n),this.yFt(n,n.xU(),e,s),n.kB().Urt().JDt()}}}const r=[];for(const s of t.c){const t=s.uid,i=this.cFt(t);i&&r.push(i)}let h=0;for(const o of t.c){const a=o.uid,l=this.cFt(a);if(l){if(this.WDt){if(this.WDt.includes(l)){const e=l;if(e.fU()!==l.fU()){h++;continue}if(e.SY()){h++;continue}const o=t.c[h];if(!s?.t_t&&this.SFt(e,r,i)){if(i.Pq().fz(h)){const r=e.fU().CL(),a=o.oci,l=i.Pq().fz(h).fU().CL();if(r!==a||a!==l){this.vFt(t.c,i,n,s);break}this.bFt(h,o,i,n,s)}else this.bFt(h,o,i,n,s);h++;continue}if(e.wz()&&e.rz()!==i.Pq()){const t=this.MFt(o,s);this.CFt(t,o,n,s),h++;continue}this.CFt(e.kB(),o,n,s,!0),h++;continue}if(this.WDt[h]){const e=this.WDt[h];if(e.fU()!==l.fU()){h++;continue}if(e.SY()){h++;continue}const o=t.c[h];if(!s?.t_t&&this.SFt(e,r,i)){if(i.Pq().fz(h)){const r=e.fU().CL(),a=o.oci,l=i.Pq().fz(h).fU().CL();if(r!==a||a!==l){this.vFt(t.c,i,n,s);break}this.bFt(h,o,i,n,s)}else this.bFt(h,o,i,n,s);h++;continue}if(e.wz()&&e.rz()!==i.Pq()){const t=this.MFt(o,s);this.CFt(t,o,n,s),h++;continue}this.CFt(e.kB(),o,n,s,!0),h++;continue}}const e=l.fU();if(this.TFt(r,e)===i.Pq().rDt(e).length){for(const t of i.Pq().o8()){if(t.fU()!==e)continue;const i=t.kB();if(i&&!n.has(i)){n.add(i),i.mFt(o.offsets),this.gFt(t,o,s);break}}h++;continue}if(l.wz()&&l.rz()!==i.Pq()){const t=this.MFt(o,s);this.CFt(t,o,n,s),h++;continue}this.CFt(l.kB(),o,n,s)}else if(this.WDt&&this.WDt[h]){const a=this.WDt[h],l=e.q0(this.xFt(o));if(a.fU()!==l){h++;continue}if(a.SY()){h++;continue}const u=t.c[h];if(!s?.t_t&&this.SFt(a,r,i)){if(i.Pq().fz(h)){const e=a.fU().CL(),r=u.oci,o=i.Pq().fz(h).fU().CL();if(e!==r||r!==o){this.vFt(t.c,i,n,s);break}this.bFt(h,u,i,n,s)}else this.bFt(h,u,i,n,s);h++;continue}if(a.wz()&&a.rz()!==i.Pq()){const t=this.MFt(u,s);this.CFt(t,u,n,s),h++;continue}this.CFt(a.kB(),u,n,s)}else{const t=this.MFt(o,s);this.CFt(t,o,n,s)}h++}}vFt(t,s,i,e){const n=s.l$();for(const t of s.Pq().children())t&&!t.SY()&&(n.wU(t),n.dFt(t.xU()),iC.delete(t.xU()));this.WDt&&(this.WDt=[]),this.jDt&&(this.jDt=new WeakMap),Object.assign({},e,{assignZIndex:!1});for(const s of t){const t=this.MFt(s,e);this.CFt(t,s,i,e),this.WDt.push(t.Pq()),this.jDt.set(t.Pq(),this.WDt.length-1)}s.Urt().JDt()}SFt(t,s,i){const e=t.fU();return this.TFt(s,e)===i.Pq().rDt(e).length}bFt(t,s,i,e,n){const r=i.Pq().fz(t);if(!r)return;const h=r.kB();h&&(e.has(h)||(h.mFt(s.offsets),this.gFt(r,s,n)),e.add(h))}pFt(t){const s={};return s.vz=t.includes("x"),s.Mz=t.includes("y"),s.Tz=t.includes("w"),s.Iz=t.includes("h"),s.Gz=t.includes("a"),s.Az=t.includes("z"),s.kz=t.includes("d"),s.Ez=t.includes("o"),s.Dz=t.includes("v"),s}xFt(t){return sC.te(t.oci)?t.oci:t[1]}MFt(t,s){if(!sC.te(t.oci))return;const i=this.gC,e=i.l$();let n;const r=!s.hasOwnProperty("createHierarchy")||s.createHierarchy;if(n=t.data?e.e1(t.data,i.LB(),!1,0,0,!1,r):e.lj(e.q0(t.oci),i.LB(),0,0,r),!n)return;const h=this.wFt(t,e);h&&n.lC(h);const o=n.kB(),a=!!s?.t_t;return o.LB().uj(n,!0,a),o}yFt(t,s,i,e){if(this.cFt(s)&&!e?.t_t){const e=this.cFt(s);e!==t&&i.wU(e)}i.dFt(s),i.REt(s,t)}CFt(t,s,i,e,n=!0){const r=this.gC,h=r.mz(t,this.pFt(s.f));h&&n?(i.has(t)||(t.mFt(s.offsets),this.gFt(t.Pq(),s,e)),i.add(t)):h&&(iC.set(t.Pq().xU(),t.Pq()),this.yFt(t.Pq(),s.uid,r.l$(),e)),this.JDt()}gFt(t,s,i){let e=this.wFt(s,this.gC.l$());if(!e)return;const n=!i.hasOwnProperty("clearChildren")||i.clearChildren,r=!i.hasOwnProperty("assignZIndex")||i.assignZIndex,h=t.l$();if(iC.set(t.xU(),t),e=JSON.parse(JSON.stringify(e)),n&&t.xU()!==e.uid){for(const s of t.children())s&&!s.SY()&&(h.wU(s),h.dFt(s.xU()),iC.delete(s.xU()));if(e.w?.sgi&&e.w.sgi.c?.length)for(const s of e.w.sgi.c){const e=Object.assign({},i,{clearChildren:!1,createHierarchy:!1}),n=this.MFt(s,e);iC.set(n.Pq().xU(),n.Pq()),t.mz(n.Pq(),this.pFt(s.f)),n.mFt(s.offsets),this.gFt(n.Pq(),s,e)}}const o=e.w?.zi,a=e.w?.l;e.w=null,t.lC(e),i?.t_t||(sC.te(o)&&r&&t.kB().d1(o),sC.te(a)&&t.RDt(a)),this.yFt(t,e.uid,h,i)}TFt(t,s){return t.filter(t=>t.fU().Ac()===s.Ac()).length}wFt(t,s){if(sC.te(t.instIndex)){const i=s.q0(t.oci).mOt();return i?i[t.instIndex]:null}return sC.le(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static lFt(t){let s=t.kB().LB().Q0(t.xU());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const s of[...t.o8()]){const t=s.kB();i.push([t.mB().G1(),t.LB().CL(),s.xU(),sC.l8.a8(t),s.fU().CU()?1:0,t.NB(),sC.l8.lFt(s)])}return sC.Te(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=sC.l8.IFt(),s[0][14][1]=i,s[0][14][2]=t.kB().NB()),s}static a8(t){let s=0;return s|=Number(t.Fz())<<8,s|=Number(t.Oz())<<7,s|=Number(t.Rz())<<6,s|=Number(t.Lz())<<5,s|=Number(t.Pz())<<4,s|=Number(t._z())<<3,s|=Number(t.xz())<<2,s|=Number(t.Cz())<<1,s|=0|Number(t.bz()),s}static IFt(t){let s=0;return s|=256,s|=128,s|=64,s|=32,s|=16,s|=8,s|=4,s|=2,s|=1,511}static _Ft(){iC.clear()}}}{const eC=self._s,nC=self.ls,rC=nC.ws,hC=nC.Ss,oC=eC.Hn(eC.Rect),aC=eC.Hn(eC.Pl),lC=eC.Hn(eC.Event,"bboxchange",!1),uC=eC.Hn(eC.To,0,0,0,0),cC=eC.Hn(eC.lu),fC=eC.Hn(eC.To,1,1,1,1),dC=eC.Hn(eC.Rect,0,0,-1,-1),pC=eC.Hn(eC.Rect,0,0,-1,-1),mC=new Set(["absolute","relative"]),gC=[];let yC=!0;const wC=1,SC=2,vC=4,bC=8,MC=16,CC=32,TC=64,xC=128,IC=256,_C=512,GC=1024,PC=2048,AC=4096,RC=8192,EC=16384,OC=32768,DC=1<<22,FC=1<<23,kC=12647936,LC=65536,NC=1<<17,BC=1<<18,$C=1<<19,WC=1<<20,jC=1<<21,VC=1<<24,UC=26,HC=31<<26,zC=new WeakMap,JC=new WeakMap;eC.OOt=class extends eC.Vn{constructor(t,s){super(),this.di=t,this.mpt=t.fU(),this.Bc=t.l$(),this.GFt=s,this.mpt.aOt(this,null,s),this.PFt=-1,this.AFt=-1,this.MTt=196635,this.mpt.zW().IW()&&(this.MTt|=128),this.Aa=NaN,this.Ra=NaN,this.DM=NaN,this.RFt=NaN,this.EFt=NaN,this.ZT=NaN,this.Go=NaN,this.OFt=NaN,this.DFt=NaN,this.FFt=NaN,this.kFt=NaN,this.LFt=eC.Hn(eC.Rect),this.NFt=eC.Hn(eC.Pl),this.BFt=pC,this.$Ft=dC,this.WFt=null,this.jFt=null,this.VFt=null,this.OM=fC,this.UFt=fC,this.HFt=null,this.zFt=null,this.di.fU().WEt()&&(this.zFt=eC.Hn(eC.JFt,this.di,this)),this.qFt=null,this.WDt=null,this.jDt=null,this.YFt=-1,this.XFt=null}zOt(){this.MTt|=256}zn(){if(this.mpt.aOt(this,this.GFt,null),this.HFt&&(this.Bc.gM().Av(this.HFt),this.HFt=null),this.WFt=null,this.jFt&&(this.jFt.KFt.zn(),this.jFt=null),this.VFt&&(this.VFt.clear(),this.VFt=null),this.Wz(),this.zFt&&this.zFt.zn(),this.wz()&&this.rz().gz(this),this.o4()){const t=[...this.o8()];for(const s of t)this.gz(s)}this.ZFt(),this.QFt(),zC.delete(this),JC.delete(this),this.di=null,this.mpt=null,this.Bc=null,this.GFt=null}FOt(t){if(yC=!1,this.TH(t[0],t[1]),this.sC(t[2]),this.$A(t[3],t[4]),this.ZT=0,this.IW()?this.Oj(t[6]):this.Go=0,uC.Sa(t[7]),this.tkt(uC),this.PH(t[8]),this.EH(t[9]),this.NM(t[10]),this.zFt&&this.zFt.skt(t[12]),t[14]&&zC.set(this,{ikt:t[14][1],ekt:t[14][2]}),t[15]){const s=t[15];this.Bz(s[0],s[1]);const i=this.Jz(),e=s[2];for(let t=0,s=e.length;t<s;++t){const s=e[t];for(let e=0,n=s.length;e<n;++e){const n=s[e],r=i.NC(e,t);r.XM(n[0]),r.QM(n[1]),r.sC(n[2]),r.eC(n[3]),r.rC(n[4])}}}if(t[16]){const s=t[16][0],i=t[16][1],e=!!i,n=!e,r=this.Bc.cDt();e&&r&&r.vct(this.Pq(),i),n&&r&&r.vct(this.Pq(),s)}yC=!0,this.nkt()}kOt(){this.Aa=0,this.Ra=0,this.DM=0,this.RFt=0,this.EFt=0,this.ZT=0,this.Go=0,this.OFt=0,this.DFt=1,this.FFt=0,this.kFt=0,this.nkt()}l$(){return this.Bc}fU(){return this.mpt}Pq(){return this.di}rkt(){return this.Pz()?this.hkt(this.rz().okt()-this.qFt.iFt()):0}XM(t){if(t=+t,this.bz()){const s=this.qFt,i=t-this.YM(),e=-this.rkt();0===e?this.Aa+=i/s.tFt():(this.Aa+=Math.cos(e)*i/s.tFt(),this.Cz()&&(this.Ra+=Math.sin(e)*i/s.sFt()))}else this.Aa=t}got(t,s=!1){t=+t,s?this.Aa+=t:this.bz()?this.XM(this.YM()+t):this.Aa+=t}YM(){if(this.bz()){let t=this.Aa;const s=this.qFt,i=this.rz(),e=this.rkt();return 0===e?t*=s.tFt():(t=t*s.tFt()*Math.cos(e),this.Cz()&&(t-=this.Ra*s.sFt()*Math.sin(e))),i.YM()+t}return this.Aa}QM(t){if(t=+t,this.Cz()){const s=this.qFt,i=t-this.ZM(),e=-this.rkt();0===e?this.Ra+=i/s.sFt():(this.bz()&&(this.Aa-=Math.sin(e)*i/s.tFt()),this.Ra+=Math.cos(e)*i/s.sFt())}else this.Ra=t}yot(t,s=!1){t=+t,s?this.Ra+=t:this.Cz()?this.QM(this.ZM()+t):this.Ra+=t}ZM(){if(this.Cz()){let t=this.Ra;const s=this.qFt,i=this.rz(),e=this.rkt();return 0===e?t*=s.sFt():(t=t*s.sFt()*Math.cos(e),this.bz()&&(t+=this.Aa*s.tFt()*Math.sin(e))),i.ZM()+t}return this.Ra}TH(t,s){if(t=+t,s=+s,this.akt()){const i=this.bz(),e=this.Cz(),n=this.qFt,r=t-this.YM(),h=s-this.ZM(),o=-this.rkt();if(0===o)i?this.Aa+=r/n.tFt():this.Aa=t,e?this.Ra+=h/n.sFt():this.Ra=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.Aa+=e?(l*r-a*h)/n.tFt():l*r/n.tFt():this.Aa=t,e?this.Ra+=i?(a*r+l*h)/n.sFt():l*h/n.sFt():this.Ra=s}}else this.Aa=t,this.Ra=s}lkt(){return[this.YM(),this.ZM()]}IH(t,s){t=+t,s=+s,this.akt()?this.TH(this.YM()+t,this.ZM()+s):(this.Aa+=t,this.Ra+=s)}fxt(t,s){return this.YM()===t&&this.ZM()===s}sC(t){if(t=+t,this.Rz()&&(t-=this.rz().tC()),this.DM===t)return;this.DM=t,this.ukt();const s=this.LB();0!==this.DM&&s.c1(),s.jB(this)}ukt(){if(this.nkt(),this.o4()){const t=this.o8();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.Rz()&&i.ukt()}}}Oot(t){this.sC(this.tC()+t)}tC(){return this.Rz()?this.rz().tC()+this.DM:this.DM}kH(){return this.LB().tC()+this.tC()}wet(){return this.Pq().zW().sTt()<2&&this.Pq().iJ().wet()}Xg(t){if(t=+t,this.xz()){const s=this.Vg();0===s?this.RFt=Number.EPSILON:this.RFt*=t/s}else this.RFt=t;this.ckt()}Iy(t,s){t=+t,s?this.RFt+=t:this.xz()?this.Xg(this.Vg()+t):this.RFt+=t,this.ckt()}Vg(){if(this.xz()){const t=this.rz(),s=t.Vg();return t.Urt().Vrt()===Number.EPSILON?(this.Urt().Vrt()+s)*this.RFt:s*this.RFt}return this.RFt}Ug(t){if(t=+t,this._z()){const s=this.Qg();0===s?this.EFt=Number.EPSILON:this.EFt*=t/s}else this.EFt=t;this.ckt()}Cot(t,s){t=+t,s?this.EFt+=t:this._z()?this.Ug(this.Qg()+t):this.EFt+=t,this.ckt()}Qg(){if(this._z()){const t=this.rz(),s=t.Qg();return t.Urt().qrt()===Number.EPSILON?(this.Urt().qrt()+s)*this.EFt:s*this.EFt}return this.EFt}$A(t,s){if(t=+t,s=+s,this.xz()){const s=this.Vg();0===s?this.RFt=Number.EPSILON:this.RFt*=t/s}else this.RFt=t;if(this._z()){const t=this.Qg();0===t?this.EFt=Number.EPSILON:this.EFt*=s/t}else this.EFt=s;this.ckt()}Du(){return[this.Vg(),this.Qg()]}O3(){return this.ZT}fkt(t){if(t<0)throw new RangeError("invalid depth");this.ZT=t}dkt(){if(this.wz()){const t=this.qFt;return Math.min(t.tFt(),t.sFt())}return 1}IW(){return!!(128&this.MTt)}Oj(t){t=+t,this.IW()&&(this.Pz()&&(t-=this.rz().Dj()),t=eC.Zn(t),this.Go!==t&&(this.Go=t,this.ckt()))}Tot(t){0!==(t=+t)&&this.IW()&&(this.Go=eC.Zn(this.Go+t),this.ckt())}ckt(){if(this.MTt|=262144,this.o4()){const t=this.o8();for(let s=0,i=t.length;s<i;s++)t[s].ckt()}}Dj(){return this.Pz()&&this.IW()?this.hkt(eC.Zn(this.rz().okt()+this.Go)):this.Go}okt(){return this.Pz()&&this.IW()?eC.Zn(this.rz().okt()+this.Go):this.Go}hkt(t){return this.xz()&&this.oz().Vg()<0&&(t=eC.Zn(eC.pr(t,this.oz().Dj()+Math.PI))),this._z()&&this.oz().Qg()<0&&(t=eC.pr(t,this.oz().Dj())),t}pkt(){const t=this.rz();return!!(this.xz()&&t.Vg()<0)||!!(this._z()&&t.Qg()<0)}mkt(){const t=this.rz();return!!(this.xz()&&t.Vg()<0&&this._z()&&t.Qg()<0)}gkt(){const t=this.MTt;if(!(262144&t))return;const s=this.Dj();this.OFt=Math.sin(s),this.DFt=Math.cos(s),this.MTt=-262145&t}yxt(){return this.gkt(),this.OFt}gxt(){return this.gkt(),this.DFt}PH(t){this.FFt=+t}Rot(t){this.FFt+=+t}GH(){return this.FFt}EH(t){this.kFt=+t}Eot(t){this.kFt+=+t}RH(){return this.kFt}tkt(t){this.OM.equals(t)||(this.OM===fC?(this.OM=eC.Hn(eC.To,t),this.UFt=eC.Hn(eC.To,t),this.UFt.Zo()):t.qo(1,1,1,1)?(this.OM=fC,this.UFt=fC):(this.OM.set(t),this.UFt.set(t),this.UFt.Zo()),this.nkt())}bO(t){if(t=eC.Kn(+t,0,1),this.Oz()){if(this.Urt().kxt()===t)return;this.Urt().QDt(t),t=this.SO()}else if(this.OM.a===t)return;this.ykt(t)}wkt(){if(!this.o4())return;const t=this.o8();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.ykt(i.SO())}}ykt(t){uC.Lo(this.OM),uC.a=t,this.tkt(uC),this.wkt()}_ot(t){this.Oz()?this.bO(this.Urt().kxt()+t):this.bO(this.SO()+t)}SO(){return this.Oz()?this.rz().SO()*this.Urt().kxt():this.OM.a}zH(t){this.OM.zo(t)||(uC.Lo(t),uC.a=this.SO(),this.tkt(uC))}aot(t,s,i){uC.Ao(t,s,i),this.zH(uC)}Skt(t,s,i){0===t&&0===s&&0===i||(uC.Lo(this.OM),uC.r+=t,uC.g+=s,uC.b+=i,this.zH(uC))}HH(){return this.OM}R0(){return this.UFt}Lz(){return!!(512&this.MTt)}vkt(t){this.bkt(512,t)}bz(){return!!(1024&this.MTt)}Mkt(t){this.bkt(1024,t)}Cz(){return!!(2048&this.MTt)}akt(){return!!(3072&this.MTt)}Ckt(t){this.bkt(2048,t)}xz(){return!!(4096&this.MTt)}Tkt(t){this.bkt(4096,t)}_z(){return!!(8192&this.MTt)}xkt(t){this.bkt(8192,t)}Pz(){return!!(16384&this.MTt)}Ikt(t){this.bkt(16384,t)}Rz(){return!!(32768&this.MTt)}_kt(t){this.bkt(32768,t)}Oz(){return!!(4194304&this.MTt)}Gkt(t){this.bkt(4194304,t)}Fz(){return!!(8388608&this.MTt)}Pkt(t){this.bkt(8388608,t)}Akt(){this.MTt&=-12647937}mz(t,s){if(t===this)return!1;if(t.wz())return!1;if(this.Rkt(t))return!1;if(this.Ekt(t))return!1;const i=t.YM(),e=t.ZM(),n=t.Vg(),r=t.Qg(),h=t.Dj(),o=t.tC(),a=t.SO();t.Okt(this),t.Mkt(s.vz),t.Ckt(s.Mz),t.Tkt(s.Tz),t.xkt(s.Iz),t.Ikt(s.Gz),t._kt(s.Az),t.Gkt(s.Ez),t.Pkt(s.Dz),t.vkt(s.kz);const l=i-this.YM(),u=e-this.ZM(),c=-this.Dj(),f=Math.cos(c),d=Math.sin(c);if(s.vz&&(s.Gz?t.Aa=l*f-u*d:t.Aa=l,s.Tz)){const s=this.Vg()/this.qFt.Vrt();0!==s&&(t.Aa/=s)}if(s.Mz&&(s.Gz?t.Ra=l*d+u*f:t.Ra=u,s.Iz)){const s=this.Qg()/this.qFt.qrt();0!==s&&(t.Ra/=s)}if(s.Tz){const s=this.Vg();0===s||s===Number.EPSILON?(t.RFt=1,t.qFt.XDt(1)):(t.RFt=n/this.Vg(),t.qFt.XDt(t.RFt))}if(s.Iz){const s=this.Qg();0===s||s===Number.EPSILON?(t.EFt=1,t.qFt.ZDt(1)):(t.EFt=r/this.Qg(),t.qFt.ZDt(t.EFt))}return s.Gz&&(t.Go=h-this.Dj()),s.Az&&(t.DM=o-this.tC()),s.Ez&&t.qFt.QDt(a),s.Dz&&t.wV(this.vV()),this.Dkt(t),this.CH(),this.wkt(),!0}gz(t){if(t.rz()!==this)return;const s=t.YM(),i=t.ZM(),e=t.Vg(),n=t.Qg(),r=t.Dj(),h=t.tC(),o=t.SO();t.Okt(null),t.Akt(),t.TH(s,i),t.$A(e,n),t.Oj(r),t.sC(h),t.bO(o),this.Fkt(t),this.CH()}kkt(){return this.YFt}Lkt(){this.Nkt();const t=[...this.children()];for(const s of t)this.gz(s);const s=this.rz();s&&s.gz(this),this.Akt()}Nkt(){if(this.Bkt(),!this.WDt){const t=[...this.children()];t.length&&(this.WDt=[],this.jDt=new WeakMap);let s=0;for(const i of t){const t=i.Pq();this.WDt.push(t),this.jDt.set(t,s),s++}}const t=this.rz();t&&t.Nkt()}Bkt(){if(-1!==this.YFt)return;const t=[...this.az()];this.YFt=t.length;for(const s of t)s.Bkt();const s=[...this.children()];for(const t of s)t.Bkt()}QFt(){this.WDt&&(this.WDt.length=0),this.WDt=null,this.jDt=null;const t=this.rz();t&&t.QFt(),this.YFt=-1}wz(){return null!==this.rz()}rz(){const t=this.qFt;return null!==t?t.rz():null}oz(){let t=this;for(;t.wz();)t=t.rz();return t}*az(){let t=this.rz();for(;t;)yield t,t=t.rz()}nDt(t){return this.o8().includes(t)}o4(){const t=this.qFt;return null!==t&&t.o4()}o8(){const t=this.qFt;return null!==t?t.o8():gC}children(){return this.o8()}*dz(){for(const t of this.children())yield t,yield*t.dz()}uz(){return this.o8().length}dIt(){return[...this.dz()].length}fz(t){const s=this.o8();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}aDt(t){if(!t)return NaN;const s=this.o8();if(!s)return NaN;for(let i=0;i<s.length;i++)if(t===s[i])return i;return NaN}$kt(t){this.qFt||(this.qFt=eC.Hn(eC.l8,this)),t&&this.qFt.zDt(t)}Urt(){return this.qFt}ZFt(){this.qFt&&(this.qFt.zn(),this.qFt=null)}Okt(t){t?(t.$kt(null),this.$kt(t)):(this.qFt&&this.qFt.zDt(null),this.o4()||this.ZFt())}Ekt(t){if(!this.wz())return!1;const s=this.rz();return s===t||s.Ekt(t)}Rkt(t){if(this.nDt(t))return!0;for(const s of this.o8())if(s.Rkt(t))return!0;return!1}Dkt(t){this.qFt.o8().push(t)}Fkt(t){const s=this.qFt.o8(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.wz()||this.ZFt(),t.o4()||t.ZFt()}uDt(){const t=zC.get(this);return t?t.ikt:null}Wkt(){const t=zC.get(this);return t?t.ekt:NaN}h4(){const t=JC.get(this);return eC.te(t)?t:NaN}jkt(t){JC.set(this,t)}Vkt(){this.bkt(524288,!0),this.nkt()}nkt(){if(!yC)return;const t=this.Bc.gM();let s;this.HFt&&t.Av(this.HFt),s=524288&this.MTt?t.fv()||"<point>":t.lv()||"<default>",this.HFt=t.Iv(s,this.XV(),this.UFt,this.tC(),this.Ukt()?1:0,0)}j3(){return this.HFt}E1(){return this.OM===fC}NM(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.XV()!==t&&(this.MTt=-2080374785&this.MTt|t<<26,this.nkt())}XV(){return(2080374784&this.MTt)>>26}WB(t,s){const i=s&&this.GFt!==t;i&&this.l1(),this.mpt.aOt(this,this.GFt,t),this.GFt=t,i&&this.Hkt(),0!==this.tC()&&this.GFt.c1()}LB(){return this.GFt}mB(){return this.LB().mB()}d1(t){this.PFt=0|t}NB(){return this.GFt.P2(),this.PFt}O2(t){this.AFt=0|t}dY(){return this.GFt.R2(),this.AFt}uQ(){return this.PFt}bkt(t,s){s?this.MTt|=t:this.MTt&=~t}vV(){return!!(1&this.MTt)}wV(t){if(this.bkt(1,t),this.o4())for(const s of this.o8())s.Fz()&&s.wV(t)}iz(){return!!(8&this.MTt)}ez(t){t=!!t,this.iz()!==t&&(this.bkt(8,t),t?this.CH():this.zkt())}Jkt(t,s){if(this.bkt(32,t),this.VFt&&this.VFt.clear(),s.trim()){this.VFt||(this.VFt=new Set);for(const t of s.split(" "))t&&this.VFt.add(t.toLowerCase())}else this.VFt=null}qkt(t){const s=!!(32&this.MTt),i=this.VFt;if(!t||!i)return!s;for(const e of i)if(t.has(e))return s;return!s}CH(){if(this.MTt|=65554,this.mpt.rOt(!0),this.Bc.VB(),this.GFt.U0()&&(this.NH(this.LFt,this.NFt,!0),this.MTt&=-3,this.Hkt()),4&this.MTt&&this.di.Sf().dispatchEvent(lC),null!==this.qFt){const t=this.qFt.o8();for(let s=0,i=t.length;s<i;++s)t[s].CH()}}NH(t,s,i){const e=this.YM(),n=this.ZM(),r=this.Vg(),h=this.Qg(),o=this.Dj();t.Ha(e-this.FFt*r,n-this.kFt*h,r,h),i&&this.zz()&&this.Ykt(t),0===o?s.Xl(t):(t.offset(-e,-n),s.Zl(t,this.yxt(),this.gxt()),s.offset(e,n),s.Ql(t)),t.normalize()}Xkt(){const t=this.MTt;2&t&&(this.NH(this.LFt,this.NFt,!0),this.MTt=-3&t)}BH(){return this.Xkt(),this.LFt}WH(){return this.Xkt(),this.NFt}Kkt(t){const s=this.YM(),i=this.ZM(),e=Math.round(s)-s,n=Math.round(i)-i;return 0===e&&0===n?t:(aC.S(t),aC.offset(e,n),aC)}Zkt(t){this.LFt.S(t),this.NFt.Xl(this.LFt),this.MTt&=-3,this.oOt(),this.Hkt()}Qkt(t){this.bkt(4,t)}tLt(){return!!(4&this.MTt)}G3(t,s,i){return s&&0!==this.O3()?this.R3(this.LB().A3()):0===this.tC()||i?t.Cl(this.BH()):this.sLt()}sLt(){const t=this.LB(),s=this.kH();return!(s>=t.K1())&&(t.Y1(s,oC),oC.Cl(this.BH()))}R3(t){const s=this.BH(),i=s.Qa(),e=s.sl(),n=s.tl(),r=s.il(),h=this.kH(),o=h+this.O3();return t.Xw(i,n,h,e,r,o)}VH(){const t=this.LB();if(t.u2())return this.R3(t.A3());{const s=t.mB();return this.G3(t.tU(),s._3(),s.lV())}}N3(t){this.bkt(1048576,t)}L3(t){this.bkt(2097152,t)}iLt(){return!!(1048576&this.MTt)}eLt(){return!!(2097152&this.MTt)}nLt(t){(t=!!t)!==this.Ukt()&&(this.bkt(16777216,t),this.nkt())}Ukt(){return!!(16777216&this.MTt)}rLt(t){this.WFt=t,this.hLt(),this.zz()&&(this.XFt.oLt=null)}aLt(){return this.WFt}lLt(){return null!==this.WFt||this.zz()}uLt(){return this.cLt(this.Vg(),this.Qg(),this.Dj(),this.yxt(),this.gxt())}fLt(t,s,i){let e=0,n=1;return 0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.cLt(t,s,i,e,n)}cLt(t,s,i,e,n){let r=this.jFt;null===r&&(r={KFt:eC.Hn(eC.lu),width:NaN,height:NaN,angle:NaN},this.jFt=r);const h=r.KFt;if(r.width===t&&r.height===s&&r.angle===i)return h;const o=this.WFt;if(this.zz()){const i=this.GH(),r=this.RH(),a=this.Jz();let l=this.XFt.oLt;l||(o?(cC.S(o),cC.offset(i,r)):cC.yu(),l=a.qC(cC),this.XFt.oLt=l),a.YC(l,h),h.offset(-i,-r),h.bu(t,s,e,n)}else o?(h.S(o),h.bu(t,s,e,n)):h.vu(this.WH(),-this.YM(),-this.ZM());return r.width=t,r.height=s,r.angle=i,h}hLt(){this.dLt(!0);const t=this.jFt;null!==t&&(t.width=NaN)}Bz(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.Pq().zW().DW())throw new Error("object does not support mesh");this.Wz(),this.XFt={pLt:eC.Hn(eC.Nw.dC,t,s),mLt:eC.Hn(eC.Nw.dC,t,s),oLt:null}}zz(){return null!==this.XFt}Jz(){if(!this.zz())throw new Error("no mesh");return this.XFt.pLt}gLt(){if(!this.zz())throw new Error("no mesh");return this.XFt.mLt}yLt(t){this.bkt(65536,t)}wLt(){return!!(65536&this.MTt)}dLt(t){this.bkt(131072,t)}SLt(){return!!(131072&this.MTt)}Ykt(t){const s=this.XFt.pLt,i=Math.min(s.EC(),0),e=Math.min(s.OC(),0),n=Math.max(s.DC(),1),r=Math.max(s.FC(),1),h=t.width(),o=t.height();t.offsetLeft(i*h),t.offsetTop(e*o),t.ll((n-1)*h),t.ul((r-1)*o),this.ZT=s.kC()}Wz(){this.XFt&&(this.XFt.pLt.zn(),this.XFt.mLt.zn(),this.XFt=null,this.hLt())}Vz(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!mC.has(e))throw new Error("invalid mode");const n="relative"===e;let r=i.x,h=i.y;const o=i.WV;let a="number"==typeof i.qz?i.qz:n?0:-1,l="number"==typeof i.Yz?i.Yz:n?0:-1;if(!this.zz())return!1;const u=this.Jz(),c=u.NC(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.tC()!==o&&(c.sC(o),f=!0),n&&(r+=t/(u._C()-1),h+=s/(u.GC()-1)),-1!==a||n?(n&&(a+=t/(u._C()-1)),a=eC.Kn(a,0,1)):a=c.iC(),-1!==l||n?(n&&(l+=s/(u.GC()-1)),l=eC.Kn(l,0,1)):l=c.nC(),c.YM()===r&&c.ZM()===h&&c.iC()===a&&c.nC()===l?f:(c.XM(r),c.QM(h),c.eC(a),c.rC(l),this.hLt(),!0)}HOt(){return this.di.HOt()}nz(t,s){return!!this.BH().xl(t,s)&&!!this.WH().xl(t,s)&&(this.HOt()?this.di.iJ().PPt(t,s):!this.lLt()||this.uLt().xl(t-this.YM(),s-this.ZM()))}vLt(){return!!(16&this.MTt)}oOt(){if(!this.vLt()||!this.iz()||256&this.MTt)return;const t=this.BH(),s=this.mpt.nOt(),i=this.BFt;if(oC.set(s._Q(t.Qa()),s.GQ(t.tl()),s._Q(t.sl()),s.GQ(t.il())),i.equals(oC))return;const e=this.di;i===pC?(s.PQ(e,null,oC),this.BFt=eC.Hn(eC.Rect,oC)):(s.PQ(e,i,oC),i.S(oC)),this.MTt&=-17}bLt(){this.MTt|=16}zkt(){const t=this.BFt;t!==pC&&(this.mpt.nOt().PQ(this.di,t,null),this.BFt=pC)}Hkt(){const t=this.LB();if(!t.U0()||256&this.MTt)return;const s=t.D1(),i=this.BH(),e=this.$Ft;if(oC.set(s._Q(i.Qa()),s.GQ(i.tl()),s._Q(i.sl()),s.GQ(i.il())),e.equals(oC))return;const n=this.di;e===dC?(s.PQ(n,null,oC),this.$Ft=eC.Hn(eC.Rect,oC)):(s.PQ(n,e,oC),e.S(oC)),t.F1()}l1(){const t=this.$Ft;t!==dC&&(this.LB().D1().PQ(this.di,t,null),this.$Ft=dC)}A2(){return this.$Ft}qH(){const t=this.di,s=this.GFt,i=s.$B();i.length&&i.at(-1)===t||(s.a1(t,!1),s.n1(t,!1),this.Bc.VB())}XH(){const t=this.di,s=this.GFt,i=s.$B();i.length&&i[0]===t||(s.a1(t,!1),s.o1(t,!1),this.Bc.VB())}ZH(t){const s=this.di,i=this.GFt;if(i.mB()!==t.mB())throw new Error("layer from different layout");t!==i&&(i.a1(s,!0),this.WB(t),t.n1(s,!0),this.Bc.VB())}tz(t,s){const i=this.di;let e=!1;const n=this.GFt;if(t.xU()===i.xU())return;const r=t.kB();if(!r)throw new Error("expected world instance");const h=r.LB();n.CL()!==h.CL()&&(n.a1(i,!0),this.WB(h),h.n1(i,!0),e=!0);const o=h.L2(i,t,!!s);(e||o)&&this.Bc.VB()}bH(){return this.zFt}MLt(t){this.bkt(64,t)}H2(){return!!(64&this.MTt)}e4(t,s=null){const i={x:this.YM(),y:this.ZM(),w:this.Vg(),h:this.Qg(),l:this.LB().G1(),zi:this.NB()};0!==this.tC()&&(i.ze=this.tC()),0!==this.Dj()&&(i.a=this.okt()),this.E1()||(i.c=this.OM.toJSON()),.5!==this.GH()&&(i.oX=this.GH()),.5!==this.RH()&&(i.oY=this.RH()),0!==this.XV()&&(i.bm=this.XV()),this.vV()||(i.v=this.vV()),this.iz()||(i.ce=this.iz()),this.tLt()&&(i.be=this.tLt()),this.zFt&&(i.fx=this.zFt.e4());const e=!!(32&this.MTt);return e&&(i.sfi=e),this.VFt&&(i.sft=[...this.VFt].join(" ")),this.qFt&&"visual-state"!==t&&(i.sgi=this.qFt.e4(t,s),zC.has(this)&&(i.sgcd=zC.get(this).ikt,i.sgzid=zC.get(this).ekt)),this.zz()&&(i.mesh=this.Jz().aC()),i}aFt(){return{x:this.Aa,y:this.Ra,z:this.DM,w:this.RFt,h:this.EFt,a:this.Go,sgi:this.Urt()?this.Urt().eFt():null}}mFt(t){t&&(this.Aa=t.x,this.Ra=t.y,this.DM=t.z,this.RFt=t.w,this.EFt=t.h,this.Go=t.a,t.sgi&&this.Urt()&&this.Urt().n4(t.sgi),this.ckt(),this.CH())}yOt(){this.QFt(),this.Lkt(),this.$kt(null),this.qFt&&this.qFt.uFt(this.WDt,this.jDt)}f6(t){"visual-state"!==t&&this.Lkt()}p6(t,s="full",i=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==s){if(256&this.MTt)return;this.qFt.p6(t.sgi,i)}}ADt(t,s="full",i=null){if("visual-state"!==s)if(256&this.MTt)this.QFt();else{if(t.hasOwnProperty("sgi"))this.qFt.uFt(null,null,t.sgi,i);else if(i?.t_t&&this.WDt)for(const t of this.WDt)t.SY()||this.Bc.wU(t);this.QFt(),this.CH()}}n4(t,s,i=null){if(yC=!1,this.XM(t.x),this.QM(t.y),this.Xg(t.w),this.Ug(t.h),this.d1(t.zi),this.sC(t.hasOwnProperty("ze")?t.ze:0),this.Oj(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?uC.Sa(t.c):t.hasOwnProperty("o")?(uC.Lo(this.OM),uC.a=t.o):uC.Po(1,1,1,1),this.tkt(uC),this.PH(t.hasOwnProperty("oX")?t.oX:.5),this.EH(t.hasOwnProperty("oY")?t.oY:.5),this.NM(t.hasOwnProperty("bm")?t.bm:0),this.wV(!t.hasOwnProperty("v")||t.v),this.ez(!t.hasOwnProperty("ce")||t.ce),this.Qkt(!!t.hasOwnProperty("be")&&t.be),this.Jkt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.zFt&&t.hasOwnProperty("fx")&&this.zFt.n4(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==s){this.$kt(null);const s=this.qFt,i=t.sgi;s.n4(i),s.uFt(this.WDt,this.jDt),this.CLt(t.sgcd,t.sgzid)}if(t.hasOwnProperty("mesh")){const s=t.mesh;this.Bz(s.cols,s.rows),this.Jz().lC(s)}else this.Wz();this.CH(),yC=!0,this.nkt(),"visual-state"!==s&&this.Bc.TLt(this.Pq(),t)}CLt(t,s){t&&eC.te(s)&&zC.set(this,{ikt:t,ekt:s})}}}{const qC=self._s;qC.XRt=class extends qC.Vn{constructor(t,s){super();const i=t.l$(),e=i.Cbt(s[1]);i.xLt().TAt(e),this.Bc=i,this.mpt=t,this.eAt=qC.mW.yJ(e),this.jGt=null,this.ILt=null,this._Rt=e.Instance,this.JQ=s[2],this.Yn=s[0],this.oMt=this.Bc.Ugt(s[3]);const n=this.eAt.sTt();if(n<2&&(this.jGt=qC.Hn(e.dEt,this),!(this.jGt instanceof qC.iAt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(qC.mW.TGt(this,n),n>=2){const t=e.dEt??globalThis.RY;if(this.ILt=new t,!(this.ILt instanceof globalThis.RY))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.ILt=new globalThis.mJ;qC.mW.xGt(n),this.vGt()}static Ux(t,s){return qC.Hn(qC.XRt,t,s)}zn(){this.Bc=null,this.eAt=null,this.jGt&&(this.jGt.zn(),this.jGt=null),this._Rt=null}KTt(){return this.jGt}vGt(){this.jGt?this.jGt.vGt():this.ILt&&this.ILt.Hq()}l$(){return this.Bc}fU(){return this.mpt}lJ(){return this.eAt}DEt(){return this._Rt}Ac(){return this.Yn}G1(){return this.JQ}cJ(){return this.ILt}Ugt(){return this.oMt}}}{const YC=self._s,XC=self.oJ;YC.AOt=class extends YC.Vn{constructor(t){super(),this.Bc=t.runtime,this.BMt=t.uJ,this.eAt=this.BMt.lJ(),this.di=t.dJ,this.Rw=t.index,this.MOt=null,this.COt=null,this.eAt.n1(this.di)}zn(){this.COt&&(this.COt.yU(),this.COt=null),this.eAt.a1(this.di),this.MOt&&(this.MOt.zn(),this.MOt=null),this.Bc=null,this.BMt=null,this.eAt=null,this.di=null}AEt(t){if(this.MOt)throw new Error("already got sdk instance");if(this.lJ().sTt()<2){if(this.MOt=YC.Hn(this.BMt.DEt(),this,t),!(this.MOt instanceof YC.nAt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.lJ().bGt();this.CGt(s.Instance,t)}}iJ(){return this.MOt??this.COt}pJ(){return this.di}l$(){return this.Bc}fJ(){return this.BMt}lJ(){return this.eAt}qht(){return this.Rw}oAt(){this.MOt?this.MOt.oAt():this.COt.DY()}cAt(t,s){this.MOt&&this.MOt.cAt(t,s)}PDt(){return this.MOt?this.MOt.lPt():this.COt.lH()}aC(t="full"){return this.MOt?this.MOt.aC(t):this.COt.uH(t)}lC(t,s="full"){if(this.MOt)return this.MOt.lC(t,s);this.COt.cH(t,s)}static _Lt(t,s,i){const e=globalThis.EY;let n,r;n=s instanceof e?t.Yj(s):s.hAt(),r=i instanceof e?t.Yj(i):i.hAt();const h=n.pJ(),o=r.pJ(),a=h.fU().CL(),l=o.fU().CL();if(a!==l)return a-l;const u=h.gDt(),c=o.gDt();return u!==c?u-c:n.qht()-r.qht()}CGt(t,s){const i=XC,e=t??this.MOt.bGt(),n=e||i,r=this.lJ().sTt();if(YC.mW.TGt(this,r),YC.mW.xAt(s),this.COt=new n,YC.mW.IAt(),YC.mW.xGt(r),e&&!(this.COt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);return this.COt}HGt(){return this.COt||this.CGt()}dPt(){return!!this.COt}}}{const KC=self._s;KC.P0=class extends KC.Vn{constructor(t,s){super(),this.gC=t,this.GLt=[],this.PLt=[],this.ALt=new Map,this.RLt=[],this.ELt=[],this.OLt=new Set,this.rM=!0;for(const t of s){const s=KC.Hn(KC.DLt,this,t,this.GLt.length);this.GLt.push(s),this.ALt.set(s.Ac().toLowerCase(),s),t.length>=3&&this.RLt.push(this.FLt(s,t[2]))}this.l$().kLt(this)}zn(){this.l$().LLt(this);for(const t of this.ELt)t.zn();KC.bh(this.ELt),KC.bh(this.GLt),KC.bh(this.PLt),this.ALt.clear(),KC.bh(this.RLt),this.gC=null}NLt(t){this.OLt.add(t)}BLt(t){this.OLt.delete(t)}$Lt(t){t.sv()&&(this.ELt=this.GLt.map(t=>{const s=t.zI();return s.WLt()>0?KC.Hn(KC.Nw.jLt,s):null}),this.VLt());for(const s of this.OLt)s.$Lt(t)}GEt(t){if(t.length){this.GLt=t.concat(this.GLt);for(const s of t)this.ALt.set(s.Ac().toLowerCase(),s);for(let t=0,s=this.GLt.length;t<s;++t)this.GLt[t].M1(t)}}FLt(t,s){t.ULt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=KC.Hn(KC.To);e.Sa(s),i[t]=e}}return i}PC(){return this.gC}l$(){return this.gC.l$()}vJ(){KC.bh(this.PLt);let t=!0;for(const s of this.GLt)s.uSt()&&(this.PLt.push(s),s.zI().MM()||(t=!1));this.rM=t}Gj(){return this.GLt}jEt(){return this.GLt.length>0}krt(t){return this.ALt.get(t.toLowerCase())||null}HLt(t){if((t=Math.floor(+t))<0||t>=this.GLt.length)throw new RangeError("invalid effect type index");return this.GLt[t]}wJ(t){return this.HLt(t).uSt()}SJ(t,s){this.HLt(t).ULt(s)}O1(){return this.PLt}H2(){return this.PLt.length>0}MM(){return this.rM}Frt(t){return this.RLt[t]}O0(t){return t<this.ELt.length?this.ELt[t]:this.RLt[t]}bJ(t,s){if(t<0||t>=this.RLt.length)return null;const i=this.RLt[t];return s<0||s>=i.length?null:i[s]}MJ(t,s,i){if(t<0||t>=this.RLt.length)return!1;const e=this.RLt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof KC.To){if(n.zo(i))return!1;n.Lo(i)}else{if(n===i)return!1;e[s]=i}return t<this.ELt.length&&this.ELt[t].zLt(s,i),!0}VLt(){const t=this.RLt,s=this.ELt;for(let i=0,e=Math.min(t.length,s.length);i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.zLt(t,n[t])}}static JLt(t){return t&&t instanceof KC.To?{t:"color",v:t.toJSON()}:t}static qLt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const s=KC.Hn(KC.To);return s.Sa(t.v),s}throw new Error("invalid effect parameter type")}return t}static YLt(t){return t.map(KC.P0.JLt)}static XLt(t){return t.map(KC.P0.qLt)}aC(){return this.GLt.map(t=>({name:t.Ac(),active:t.uSt(),params:KC.P0.YLt(this.RLt[t.CL()])}))}lC(t){for(const s of t){const t=this.krt(s.name);t&&(t.ULt(s.active),this.RLt[t.CL()]=KC.P0.XLt(s.params))}this.vJ(),this.VLt()}}}{const ZC=self._s;ZC.DLt=class extends ZC.Vn{constructor(t,s,i){super(),this.G0=t,this.Wc=s[0],this.Yn=s[1],this.Rw=i,this.AM=null,this.Bf=!0}zn(){this.G0=null,this.AM=null}_Et(t){const s=ZC.Hn(ZC.DLt,t,[this.Wc,this.Yn],-1);return s.AM=this.AM,s.Bf=this.Bf,s}$Lt(t){const s=t.av(this.Wc);if(!s)throw new Error("failed to find shader program '"+this.Wc+"'");this.AM=s}_j(){return this.G0}Ac(){return this.Yn}M1(t){this.Rw=t}CL(){return this.Rw}PC(){return this.G0.PC()}l$(){return this.G0.l$()}ULt(t){this.Bf=!!t}uSt(){return this.Bf}zI(){return this.AM}KLt(){const t=[];for(let s=0,i=this.AM.JI();s<i;++s){const i=this.AM.qI(s);if("float"===i||"percent"===i)t.push(0);else{if("color"!==i)throw new TypeError("unknown effect parameter type");t.push(ZC.Hn(ZC.To,1,1,1,1))}}return t}}}{const QC=self._s;QC.JFt=class extends QC.Vn{constructor(t,s){super(),this.di=t,this.ZLt=s,this.G0=t.fU()._j(),this.QLt=!0,this.F0=!0,this.tNt=!1,this.sNt=!1,this.iNt=!1,this.eNt=!1,this.SL=QC.Hn(QC.Nw.aF,t.l$().IB().A0(),{KD:(t,s)=>{const i=s.cL(),e=i.kB();t.BM(e.R0()),t.Uv(e.kH()),i.HC(t),t.Uv(0)},ZD:t=>{const s=t.TPt(),[i,e]=t.CPt();return{eL:s,nL:i,rL:e}},QD:t=>this.O0(t)}),this.nNt=[],this.PLt=[],this.rM=!0,this.RLt=[],this.ELt=[],this.$Lt(t.l$().gM());for(let t=0,s=this.G0.Gj().length;t<s;++t)this.nNt.push(!0);this.vJ(),this.G0.NLt(this)}zn(){this.G0.BLt(this);for(const t of this.ELt)t&&t.zn();QC.bh(this.ELt),this.SL.zn(),this.SL=null,QC.bh(this.nNt),QC.bh(this.PLt),QC.bh(this.RLt),this.di=null,this.G0=null}$Lt(t){t.sv()&&(this.ELt=this.G0.Gj().map(t=>{const s=t.zI();return s.WLt()>0?QC.Hn(QC.Nw.jLt,s):null}))}skt(t){let s=0;for(const i of t)this.RLt.push(this.FLt(s,i)),++s;this.VLt(),this.vJ()}FLt(t,s){this.nNt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=QC.Hn(QC.To);e.Sa(s),i[t]=e}}return i}LOt(){for(const t of this.G0.Gj())this.RLt.push(t.KLt());this.VLt()}PC(){return this.gC}_j(){return this.G0}ML(){return this.R1(),this.SL}l$(){return this.di.l$()}vJ(){QC.bh(this.PLt);const t=this.ZLt,s=this.G0.Gj(),i=this.PLt,e=this.nNt;let n=!0;for(let t=0,r=s.length;t<r;++t)if(e[t]){const e=s[t];i.push(e),e.zI().MM()||(n=!1)}this.rM=n,t.MLt(!!i.length),this.QLt=!0}R1(){const t=this.di,s=this.ZLt,i=s.E1(),e=t.zW().AW(),n=0!==s.Dj()||0!==s.LB().Dj()||s.Vg()<0||s.Qg()<0,r=t._Pt(),h=t.bM();(this.QLt||i!==this.F0||e!==this.tNt||n!==this.sNt||r!==this.iNt||h!==this.eNt||this.SL.tk())&&(this.SL.sk(this.PLt.map(t=>t.zI()),{sF:this.PLt.map(t=>t.CL()),iF:!i||h,nF:e,rF:r,hF:n}),this.QLt=!1,this.F0=i,this.tNt=e,this.sNt=n,this.iNt=r,this.eNt=h)}O1(){return this.PLt}Frt(t){return this.RLt[t]}O0(t){return t<this.ELt.length?this.ELt[t]:this.RLt[t]}bJ(t,s){if(t<0||t>=this.RLt.length)return null;const i=this.RLt[t];return s<0||s>=i.length?null:i[s]}MJ(t,s,i){if(t<0||t>=this.RLt.length)return!1;const e=this.RLt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof QC.To){if(n.zo(i))return!1;n.Lo(i)}else{if(n===i)return!1;e[s]=i}return t<this.ELt.length&&this.ELt[t].zLt(s,i),!0}VLt(){const t=this.RLt,s=this.ELt;for(let i=0,e=s.length;i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.zLt(t,n[t])}}MM(){return this.rM}rNt(){return this.PLt.some(t=>t.zI().xM())}wJ(t){return this.nNt[t]}SJ(t,s){this.nNt[t]=!!s}Gj(){return this.G0.Gj()}e4(){return this.G0.Gj().map(t=>({name:t.Ac(),active:this.nNt[t.CL()],params:QC.P0.YLt(this.RLt[t.CL()])}))}n4(t){for(const s of t){const t=this.G0.krt(s.name);t&&(this.nNt[t.CL()]=s.active,this.RLt[t.CL()]=QC.P0.XLt(s.params))}this.vJ(),this.VLt()}}}{const tT=self._s,sT=[],iT=[],eT=[],nT=tT.Hn(tT.lu),rT=tT.Hn(tT.lu),hT=tT.Hn(tT.Pl),oT=tT.Hn(tT.Rect),aT=tT.Hn(tT.Rect);let lT=null,uT=null,cT=null;tT.hNt=class extends tT.Vn{constructor(t){super(),this.Bc=t,this.oNt=0,this.aNt=0,this.lNt=[],this.uNt=0,this.cNt=0,this.fNt=0,this.dNt=0,this.pNt=new self.G$(this)}zn(){this.Bc=null}l$(){return this.Bc}AL(){return this.pNt}mNt(){this.cNt=this.uNt,this.uNt=0,this.dNt=this.fNt,this.fNt=0}gNt(){return this.cNt}yNt(){return this.dNt}wNt(t,s){const i=t.kB(),e=s.kB();i&&e&&i.iz()&&e.iz()&&this.lNt.push([t,s])}tIt(t,s,i){for(const[e,n]of this.lNt){let r=null;if(t===e)r=n;else{if(t!==n)continue;r=e}r.lIt(s)&&(i.includes(r)||i.push(r))}}sIt(t,s){if(!this.lNt.length)return!1;for(const[i,e]of this.lNt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}SNt(){tT.bh(this.lNt)}A$(t,s){if(!t||!s||t===s)return!1;const i=t.kB(),e=s.kB();if(!i.iz()||!e.iz())return!1;this.uNt++;const n=i.LB(),r=e.LB();return n.T2(r)?this.vNt(i,e):this.bNt(i,e)}vNt(t,s){if(!t.BH().Cl(s.BH()))return!1;if(this.fNt++,!t.WH().su(s.WH()))return!1;if(t.HOt()&&s.HOt())return!1;if(t.HOt())return this.MNt(t,s);if(s.HOt())return this.MNt(s,t);if(!t.lLt()&&!s.lLt())return!0;const i=t.uLt(),e=s.uLt();return i.Mu(e,s.YM()-t.YM(),s.ZM()-t.ZM())}bNt(t,s){const i=t.HOt(),e=s.HOt();if(i&&!e)return this.CNt(t,s);if(e&&!i)return this.CNt(s,t);if(e||i)return!1;{const i=t.LB(),e=s.LB();nT.S(t.uLt()),rT.S(s.uLt());const n=nT.pu();for(let s=0,e=n.length;s<e;s+=2){const e=s+1,r=n[s],h=n[e],[o,a]=i.nU(r+t.YM(),h+t.ZM());n[s]=o,n[e]=a}const r=rT.pu();for(let t=0,i=r.length;t<i;t+=2){const i=t+1,n=r[t],h=r[i],[o,a]=e.nU(n+s.YM(),h+s.ZM());r[t]=o,r[i]=a}return nT.wu(),rT.wu(),this.fNt++,nT.Mu(rT,0,0)}}CNt(t,s){const i=t.LB(),e=s.LB();lT||(lT=tT.Hn(tT.lu)),uT||(uT=tT.Hn(tT.Rect)),cT||(cT=tT.Hn(tT.Pl));const n=s.YM(),r=s.ZM(),[h,o]=e.nU(n,r),[a,l]=i.iU(h,o),u=a-n,c=l-r;if(uT.S(s.BH()),uT.offset(u,c),!t.BH().Cl(uT))return!1;if(cT.S(s.WH()),cT.offset(u,c),this.fNt++,!t.WH().su(cT))return!1;lT.S(s.uLt());const f=lT.pu();for(let t=0,s=f.length;t<s;t+=2){const s=t+1;f[t]+=u,f[s]+=c}return lT.wu(),this.MNt(t,s,a,l,lT,uT,cT)}MNt(t,s,i,e,n,r,h){const o=void 0!==r?r:s.BH(),a=t.YM(),l=t.ZM(),u=t.Pq().iJ(),c=void 0!==i?i:s.YM(),f=void 0!==e?e:s.ZM(),d=s.lLt(),p=void 0!==h?h:s.WH(),m=iT;u.TNt(o,m);for(let t=0,i=m.length;t<i;++t){const i=m[t],e=i.xNt();if(this.uNt++,o.Tl(e,a,l)&&(hT.Xl(e),hT.offset(a,l),hT.su(p)))if(d){const t=void 0!==n?n:s.uLt();let r=c,h=f;void 0!==n&&(r=s.YM(),h=s.ZM());const o=i.INt();if(o){if(this.fNt++,o.Mu(t,r-(a+e.Qa()),h-(l+e.tl())))return tT.bh(m),!0}else if(nT.vu(hT,0,0),nT.Mu(t,r,h))return tT.bh(m),!0}else{const t=i.INt();if(!t)return tT.bh(m),!0;if(nT.vu(p,0,0),t.Mu(nT,-(a+e.Qa()),-(l+e.tl())))return tT.bh(m),!0}}return tT.bh(m),!1}_Nt(t,s,i){const e=t.nj(),n=this.Bc.pN();if(!n)throw new Error("cannot call outside event");const r=n.Upt(),h=new tT.GNt;if(e._pt()){i||(e.Dpt(!1),tT.bh(e.Fpt())),r&&tT.bh(e.kpt());for(const n of t.ej()){const t=n.kB(),o=t.LB();let a=!1;if(h.MV(o)&&t.VH()&&(a=s.some(([s,i])=>{const[e,n]=h.iU(o,s,i,t.kH());return t.nz(e,n)})),a){if(i)return!1;e.Ept(n)}else r&&e.Opt(n)}}else{let t,o=!1;r&&!n.Ovt(this.Bc.Fgt())?this.Bc.ixt()&&!e.kpt().length&&e.Fpt().length?t=e.Fpt():(t=e.kpt(),o=!0):t=e.Fpt();let a=0;for(let n=0,l=t.length;n<l;++n){const l=t[n],u=l.kB(),c=u.LB();let f=!1;if(h.MV(c)&&u.VH()&&(f=s.some(([t,s])=>{const[i,e]=h.iU(c,t,s,u.kH());return u.nz(i,e)})),f){if(i)return!1;o?e.Ept(l):t[a++]=l}else o?t[a++]=l:r&&e.Opt(l)}i||(t.length=a)}return t.pbt(),h.zn(),!!i||e.Gpt()}PNt(t,s){if(!t)return!0;for(const i of s.lOt())if(!t.T2(i))return!1;return!0}sxt(t,s,i,e){if(s.v1())for(const n of s.Cj())this.PNt(t,n)?(n.hOt(),n.nOt().AQ(i,e)):tT.On(e,n.ej());else this.PNt(t,s)?(s.hOt(),s.nOt().AQ(i,e)):tT.On(e,s.ej())}$$(t,s,i,e){for(const n of s)this.sxt(t,n,i,e)}ANt(t,s,i){const e=this.Bc.GAt();e&&this.$$(t,e.L6(),s,i)}RNt(t,s,i){const e=this.Bc.PAt();e&&this.$$(t,e.L6(),s,i)}qkt(t,s){return t.qOt()&&(!s||s.kB().qkt(t.oTt().get("solidTags")))}O$(t){const s=t.kB();this.ANt(s.LB(),s.BH(),sT);for(const s of sT)if(this.qkt(s,t)&&this.A$(t,s))return tT.bh(sT),s;return tT.bh(sT),null}ENt(t,s){this.ANt(null,t,sT);for(const i of sT)if(this.qkt(i,s)&&this.ONt(t,i))return tT.bh(sT),i;return tT.bh(sT),null}DNt(t,s){let i=null;s&&(i=eT,tT.bh(i));const e=t.kB();this.RNt(e.LB(),e.BH(),sT);for(const e of sT)if(e.XOt()&&this.A$(t,e)){if(!s)return tT.bh(sT),e;i.push(e)}return tT.bh(sT),i}FNt(t,s,i,e,n){e=e||50;const r=t.kB(),h=r.YM(),o=r.ZM();for(let a=0;a<e;++a)if(r.TH(h+s*a,o+i*a),r.CH(),!this.A$(t,n))return!0;return r.TH(h,o),r.CH(),!1}kNt(t,s,i,e,n,r){e=e||50;const h=t.kB(),o=h.YM(),a=h.ZM();let l=null,u=null;for(let c=0;c<e;++c)if(h.TH(o+s*c,a+i*c),h.CH(),!this.A$(t,l))if(l=this.O$(t),l)u=l;else if(n&&(l=r?this.A$(t,r)?r:null:this.DNt(t),l&&(u=l)),!l)return u&&this.LNt(t,s,i,u,16,!0),!0;return h.TH(o,a),h.CH(),!1}NNt(t,s,i,e){e=e||50;const n=t.kB(),r=n.YM(),h=n.ZM();let o=null,a=null;for(let l=0;l<e;++l)for(let e=0;e<2;++e){const u=2*e-1;if(n.TH(r+s*l*u,h+i*l*u),n.CH(),!this.A$(t,o)){if(o=this.O$(t),!o)return a&&this.LNt(t,s*u,i*u,a,16,!0),!0;a=o}}return n.TH(r,h),n.CH(),!1}LNt(t,s,i,e,n,r){let h=2,o=!1,a=!1;const l=t.kB();let u=l.YM(),c=l.ZM();for(;h<=n;){const n=1/h;h*=2,l.IH(s*n*(o?1:-1),i*n*(o?1:-1)),l.CH(),this.A$(t,e)||r&&this.O$(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.YM(),c=l.ZM())}a&&(l.TH(u,c),l.CH())}BNt(t,s=100){let i=0;const e=t.kB(),n=e.YM(),r=e.ZM();let h=0,o=this.O$(t);if(!o)return!0;for(;i<=s;){let s=0,a=0;switch(h){case 0:s=0,a=-1,i++;break;case 1:s=1,a=-1;break;case 2:s=1,a=0;break;case 3:s=1,a=1;break;case 4:s=0,a=1;break;case 5:s=-1,a=1;break;case 6:s=-1,a=0;break;case 7:s=-1,a=-1}if(h=(h+1)%8,e.TH(Math.floor(n+s*i),Math.floor(r+a*i)),e.CH(),!this.A$(t,o)&&(o=this.O$(t),!o))return!0}return e.TH(n,r),e.CH(),!1}$Nt(t,s,i,e){const n=t.kB(),r=n.YM(),h=n.ZM(),o=Math.max(10,tT.er(s,i,r,h)),a=tT.rr(s,i,r,h),l=e||this.O$(t);if(!l)return tT.Zn(a+Math.PI);let u=l,c=0,f=0;const d=tT.Qn(5);let p;for(p=1;p<36;++p){const r=a-p*d;if(n.TH(s+Math.cos(r)*o,i+Math.sin(r)*o),n.CH(),!this.A$(t,u)&&(u=e?null:this.O$(t),!u)){c=r;break}}for(36===p&&(c=tT.Zn(a+Math.PI)),u=l,p=1;p<36;++p){const r=a+p*d;if(n.TH(s+Math.cos(r)*o,i+Math.sin(r)*o),n.CH(),!this.A$(t,u)&&(u=e?null:this.O$(t),!u)){f=r;break}}if(36===p&&(f=tT.Zn(a+Math.PI)),n.TH(r,h),n.CH(),f===c)return f;const m=tT.hr(f,c)/2;let g;g=tT.lr(f,c)?tT.Zn(c+m+Math.PI):tT.Zn(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),v=Math.sin(g),b=y*S+w*v,M=y-2*b*S,C=w-2*b*v;return tT.rr(0,0,M,C)}WNt(t,s,i,e,n){if(!n)return!1;const r=n.kB();return!!r.iz()&&(this.uNt++,oT.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!!r.BH().Cl(oT)&&(n.HOt()?this.jNt(t,s,i,e,n,r):(this.fNt++,!!r.WH().tu(t,s,i,e)&&(!r.lLt()||r.uLt().tu(r.YM(),r.ZM(),t,s,i,e)))))}jNt(t,s,i,e,n,r){const h=r.YM(),o=r.ZM(),a=n.iJ(),l=iT;aT.set(t,s,i,e),aT.normalize(),a.TNt(aT,l);for(let n=0,r=l.length;n<r;++n){const r=l[n],a=r.xNt();if(this.uNt++,oT.Tl(a,h,o)&&(hT.Xl(a),hT.offset(h,o),hT.tu(t,s,i,e))){const n=r.INt();if(!n)return tT.bh(l),!0;if(this.fNt++,n.tu(h+a.Qa(),o+a.tl(),t,s,i,e))return tT.bh(l),!0}}return tT.bh(l),!1}ONt(t,s){if(!s)return!1;const i=s.kB();if(!i.iz())return!1;if(this.uNt++,!i.BH().Cl(t))return!1;if(s.HOt())return this.VNt(t,s,i);if(this.fNt++,hT.Xl(t),!i.WH().su(hT))return!1;if(!i.lLt())return!0;const e=nT;e.Xl(t,i.YM(),i.ZM());const n=i.uLt();return e.Mu(n,0,0)}VNt(t,s,i){const e=i.YM(),n=i.ZM(),r=s.iJ(),h=iT;r.TNt(t,h);for(let s=0,i=h.length;s<i;++s){const i=h[s],r=i.xNt();if(this.uNt++,t.Tl(r,e,n)){const s=i.INt();if(!s)return tT.bh(h),!0;if(this.fNt++,nT.Xl(t,0,0),s.Mu(nT,-(e+r.Qa()),-(n+r.tl())))return tT.bh(h),!0}}return tT.bh(h),!1}UNt(t,s){if(!t)return;const i=t.kB();i.iz()&&(this.uNt++,i.BH().Cl(s.rect)&&(t.HOt()?this.HNt(t,i,s):(this.fNt++,i.lLt()?s.zNt(t,i.YM(),i.ZM(),i.uLt()):s.JNt(t,i.WH()))))}HNt(t,s,i){const e=s.YM(),n=s.ZM(),r=iT;t.iJ().TNt(i.rect,r);for(let h=0,o=r.length;h<o;h++){const o=r[h],a=o.xNt();if(this.uNt++,i.rect.Tl(a,e,n)){const r=o.INt();this.fNt++,r?i.zNt(t,e+a.Qa(),n+a.tl(),r):i.qNt(t,s.YM(),s.ZM(),a)}}tT.bh(r)}F$(t,s){if(t===this.oNt&&s===this.aNt)return;this.oNt=t,this.aNt=s;const i=this.Bc.S1();for(const e of i)if(e.bW()){for(const t of e.ij())t.kB().zkt();e.nOt().YNt(t,s),e.rOt();for(const t of e.ij()){const s=t.kB();s.bLt(),s.oOt()}}}L$(){return[this.oNt,this.aNt]}XNt(t,s){this.oNt=t,this.aNt=s}}}{const fT=self._s;fT.LRt=class extends fT.Vn{constructor(t,s){super(),this.CQ=t,this.TQ=s,this.xQ=fT.Hn(fT.Gu)}zn(){this.xQ.zn(),this.xQ=null}YNt(t,s){if(!this.xQ.Ru())throw new Error("grid not empty");this.CQ=t,this.TQ=s}IQ(t,s,i){let e=this.xQ.zs(t,s);return e||(i?(e=fT.Hn(fT.KNt,this,t,s),this.xQ.Set(t,s,e),e):null)}_Q(t){const s=Math.floor(t/this.CQ);return isFinite(s)?s:0}GQ(t){const s=Math.floor(t/this.TQ);return isFinite(s)?s:0}PQ(t,s,i){if(s)for(let e=s.Qa(),n=s.sl();e<=n;++e)for(let n=s.tl(),r=s.il();n<=r;++n){if(i&&i.xl(e,n))continue;const s=this.IQ(e,n,!1);s&&(s.Zf(t),s.Ru()&&this.xQ.Eu(e,n))}if(i)for(let e=i.Qa(),n=i.sl();e<=n;++e)for(let n=i.tl(),r=i.il();n<=r;++n)s&&s.xl(e,n)||this.IQ(e,n,!0).SQ(t)}AQ(t,s){let i=this._Q(t.Qa());const e=this.GQ(t.tl()),n=this._Q(t.sl()),r=this.GQ(t.il());if(isFinite(n)&&isFinite(r))for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.IQ(i,t,!1);e&&e.bQ(s)}}}}{const dT=self._s;dT.KNt=class extends dT.Vn{constructor(t,s,i){super(),this.fQ=t,this.Aa=s,this.Ra=i,this.dQ=dT.Hn(dT.ku)}zn(){this.dQ.zn(),this.dQ=null,this.fQ=null}Ru(){return this.dQ.Ru()}SQ(t){this.dQ.$u(t)}Zf(t){this.dQ.Eu(t)}bQ(t){dT.On(t,this.dQ.Wu())}}}{const pT=self._s,mT=1e-6,gT=2;pT.ZNt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new pT.Rect,this.QNt=2,this.tBt=null,this.sBt=0,this.iBt=0,this.eBt=0,this.nBt=0,this.rBt=0,this.bt=0,this.hBt=1,this.oBt=0,this.aBt=1,this.lBt=0}uBt(){return this.QNt<1.000001}$f(){this.QNt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.QNt=2,this.tBt=null,this.sBt=0,this.iBt=0,this.eBt=0,this.nBt=0,this.rBt=0,this.bt=0,this.hBt=1,this.oBt=0,this.aBt=1,this.lBt=0,this}cBt(){if(!1===this.uBt())return;const t=this.dx*this.QNt,s=this.dy*this.QNt,i=pT.sr(t,s),e=t/i,n=s/i;this.bt=i-mT,this.nBt=this.x1+e*this.bt,this.rBt=this.y1+n*this.bt,this.sBt=Math.atan2(this.eBt,this.iBt)+Math.PI/2,this.hBt=Math.cos(this.sBt),this.oBt=Math.sin(this.sBt);const r=e*this.hBt+n*this.oBt;if(this.aBt=e-2*this.hBt*r,this.lBt=n-2*this.oBt*r,r>0){const t=Math.PI;this.sBt=pT.Zn(this.sBt+t),this.hBt=-this.hBt,this.oBt=-this.oBt}}fBt(t,s,i,e,n){const r=pT.qr(this.x1,this.y1,this.x2,this.y2,s,i,e,n);r>=0&&r<this.QNt&&(this.QNt=r,this.tBt=t.xU(),this.iBt=s-e,this.eBt=i-n)}qNt(t,s,i,e){const n=s+e.Qa(),r=s+e.sl(),h=i+e.tl(),o=i+e.il();this.fBt(t,n,h,r,h),this.fBt(t,r,h,r,o),this.fBt(t,r,o,n,o),this.fBt(t,n,o,n,h)}JNt(t,s){const i=s.Br(),e=s.$r(),n=s.Wr(),r=s.jr(),h=s.Vr(),o=s.Ur(),a=s.Hr(),l=s.zr();this.fBt(t,i,e,n,r),this.fBt(t,n,r,h,o),this.fBt(t,h,o,a,l),this.fBt(t,a,l,i,e)}zNt(t,s,i,e){const n=e.pu();for(let e=0,r=n.length;e<r;e+=2){const h=(e+2)%r,o=n[e]+s,a=n[e+1]+i,l=n[h]+s,u=n[h+1]+i;this.fBt(t,o,a,l,u)}}}}{const yT=self._s;yT.GNt=class{constructor(){this.dBt=new Map}zn(){for(const t of this.dBt.values())t.pBt.Au();this.dBt.clear()}mBt(t){let s=this.dBt.get(t);return void 0===s&&(s={bV:null,pBt:new yT.Gu},this.dBt.set(t,s)),s}MV(t){const s=this.mBt(t);return null===s.bV&&(s.bV=t.GV()),s.bV}iU(t,s,i,e){if(0!==e)return t.iU(s,i,e);const n=this.mBt(t);let r=n.pBt.zs(s,i);return void 0===r&&(r=t.iU(s,i,e),n.pBt.Set(s,i,r)),r}}}{const wT=self._s,ST=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),vT=new Set(["high","low"]),bT=self.ls,MT=bT.ds,CT=bT.ws,TT=MT.create(),xT=300,IT=200,_T=120,GT=8,PT=wT.Hn(wT.Pl),AT=wT.Hn(wT.Rect),RT=3e3,ET=200,OT=300;wT.gBt=class extends wT.Vn{constructor(t){super(),this.Bc=t,this.yBt=[],this.wBt=!1,this.SBt=null,this.vBt=null,this.bBt=null,this.MBt="high-performance",this.CBt=!1,this.TBt="auto",this.xBt=0,this.IBt=0,this._Bt="",this.GBt=0,this.PBt=0,this.ABt=0,this.RBt=0,this.EBt=0,this.OBt=0,this.rS="normalized",this.DBt=0,this.FBt=1,this.kBt=1e4,this.FS=!0,this.LBt=0,this.OF=0,this.DF=0,this.NBt="letterbox-scale",this.BBt="letterbox-scale",this.$Bt=0,this.WBt=0,this.jBt=MT.create(),this.VBt="high",this.UBt=this.VBt,this.HBt=!1,this.zBt=[],this.JBt=new Set,this.qBt=self.C3_Shaders,this.YBt=wT.Hn(wT.Nw.LD,{OD:()=>[this.o3(),this.a3()],DD:()=>this.XBt(),FD:t=>this.KBt(t),getTime:()=>this.l$().FN(),kD:()=>this.l$().VB()}),this.ZBt=0,this.QBt=0,this.t$t=NaN,this.s$t=null,this.i$t=new Map,this.e$t=NaN,this.n$t=new Map,this.r$t="",this.h$t=1,this.o$t=wT.Hn(wT.Rect),this.a$t="",this.l$t=null,this.u$t=null,this.c$t=0,this.f$t=0,this.d$t=-1,this.p$t=0,this.m$t=t=>this.p$t=t.progress,this.g$t=null,this.y$t={w$t:null,S$t:null,v$t:null},this.b$t=0,this.M$t=0,this.C$t=0,this.T$t="fade-in",this.x$t=null,this.I$t=new Promise(t=>this.x$t=t)}_$t(t){this.MBt=t}G$t(t){this.wBt=!!t}P$t(t){this.rS=t}A$t(){return this.rS}R$t(t){this.DBt=t}E$t(t,s){this.FBt=t,this.kBt=s}O$t(t){this.CBt=!!t}D$t(t){this.TBt=t}async co(t){let s=t.canvas;this.yBt.push({canvas:s,F$t:null}),this.Bc.KU("runtime","window-resize",t=>this.k$t(t)),this.Bc.KU("runtime","fullscreenchange",t=>this.L$t(t)),this.Bc.KU("runtime","fullscreenerror",t=>this.N$t(t)),s.addEventListener("webglcontextlost",t=>this.B$t(t)),s.addEventListener("webglcontextrestored",t=>this.$$t(t)),this.HBt=!!t.isFullscreen,this._Bt=t.cssDisplayMode;const i=navigator.gpu&&this.wBt;let e=!1;if(i)try{await this.W$t(!0)}catch(t){this.j$t("WebGPU",t),this.vBt=null}if(!this.gM())try{await this.V$t(!0)}catch(t){this.j$t("WebGL",t),this.SBt=null}if(this.gM()||(e=!0),!this.gM()&&i)try{await this.W$t(!1)}catch(t){this.j$t("WebGPU",t),this.vBt=null}if(!this.gM())try{await this.V$t(!1)}catch(t){this.j$t("WebGL",t),this.SBt=null}const n=this.gM();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.$b(e),this.vBt&&(this.vBt.U$t=()=>this.H$t(),this.vBt.z$t=()=>this.J$t()),"normalized"===this.rS?n.KS():(n.ZS(),n.YS(this.DBt)),this.$A(t.windowInnerWidth,t.windowInnerHeight,!0),await this.$Lt()}j$t(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async W$t(t){const s={Zw:this.FBt,Qw:this.kBt};let i=!0;"no"===this.TBt?i=!1:"auto"===this.TBt&&(i=wT.Zs.hi);const e={powerPreference:this.MBt,depth:this.Bc.l2(),failIfMajorPerformanceCaveat:t,q$t:this.Bc.S3(),Y$t:this.Bc.X$t(),YR:this.Bc.K$t(),Z$t:i};this.vBt=wT.Hn(wT.Nw.Q$t,s),await this.vBt.Ux(this.yBt[0].canvas,e)}async V$t(t){const s={alpha:!0,powerPreference:this.MBt,qR:"xbox-uwp-webview2"!==this.Bc.z$(),depth:this.Bc.l2(),YR:this.Bc.K$t(),failIfMajorPerformanceCaveat:t,Zw:this.FBt,Qw:this.kBt};this.CBt&&(s.XR=1),this.SBt=wT.Hn(wT.Nw.QR,this.yBt[0].canvas,s),await this.SBt.BS()}async tWt(){if(this.qBt){const t=[];for(const[s,i]of Object.entries(this.qBt)){i.src=i.sWt;const e=wT.Nw.iWt.d_(this.vBt.Kx());t.push(this.vBt.rO(Object.assign({Wx:e,name:s},i)))}await Promise.all(t)}}async eWt(){if(this.qBt){const t=[];for(const[s,i]of Object.entries(this.qBt)){let e;if(i.nWt&&this.SBt.CT()>=2)i.src=i.nWt,e=wT.Nw.Bx.p_();else{if(!i.rWt)throw new Error(`shader '${s}' does not support WebGL 1`);i.src=i.rWt,e=wT.Nw.Bx.d_()}t.push(this.SBt.rO(Object.assign({Wx:e,name:s},i)))}await Promise.all(t),this.SBt.hO(),this.SBt.uv()}this.SBt.MD()&&(this.s$t=wT.Hn(wT.Nw.NR,this.SBt))}async $Lt(){this.vBt?await this.tWt():this.SBt&&await this.eWt();const t=this.gM();t.Nb(this.FS),t.MD()&&(this.t$t=0);for(const s of this.Bc.hWt()){for(const i of s.Gj())i.$Lt(t);s.$Lt(t),s.vJ()}this.bBt=new self.pX(this.Bc,t)}zn(){this.Bc=null,this.SBt=null,this.yBt.length=0}zL(){return this.Bc.zL()}k$t(t){const s=this.Bc;if(s.oWt())return;const i=t.devicePixelRatio;this.zL()&&(self.devicePixelRatio=i),s.aWt(i),this.HBt=!!t.isFullscreen,this._Bt=t.cssDisplayMode,this.$A(t.innerWidth,t.innerHeight),s.VB();const e=new wT.Event("window-resize");e.data=t,s.Sf().Pf(e);const n=new wT.Event("resize");n.lWt=this.eW(),n.uWt=this.rW(),n.cWt=this.oW(),n.fWt=this.lW(),s.PZ(n),this.Bc.OB()?.q3(),s.iH()&&(s.Myt()||self.eH.dWt())&&s.fk()}L$t(t){this.HBt=!!t.isFullscreen,this.$A(t.innerWidth,t.innerHeight,!0),this.Bc.VB()}N$t(t){this.HBt=!!t.isFullscreen,this.$A(t.innerWidth,t.innerHeight,!0),this.Bc.VB()}$A(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.xBt===t&&this.IBt===s&&!i)return;this.xBt=t,this.IBt=s;const e=this.pWt();"letterbox-scale"===e?this.mWt(t,s):"letterbox-integer-scale"===e?this.gWt(t,s):"off"===e?this.yWt(t,s):this.wWt(t,s),this.SWt(e);for(const{canvas:t}of this.yBt)t.width=this.ABt,t.height=this.RBt;this.Bc.jc("canvas","update-size",{marginLeft:this.EBt,marginTop:this.OBt,styleWidth:this.GBt,styleHeight:this.PBt,displayScale:this.vY()});const n=this.gM();n.$A(this.ABt,this.RBt,!0);for(const t of this.zBt)n.gD(t);wT.bh(this.zBt),this.vWt();const r=this.Bc.pB();r.N8(),r.B8()}vWt(){this.gM().tv(this.jBt,this.o3()/this.a3())}l3(){return this.jBt}mWt(t,s){const i=this.Bc.uW(),e=this.Bc.qL(),n=this.Bc.XL(),r=e/n;if(t/s>r){const i=s*r;this.GBt=Math.round(i),this.PBt=s,this.EBt=Math.floor((t-this.GBt)/2),this.OBt=0}else{const i=t/r;this.GBt=t,this.PBt=Math.round(i),this.EBt=0,this.OBt=Math.floor((s-this.PBt)/2)}this.ABt=Math.round(this.GBt*i),this.RBt=Math.round(this.PBt*i),this.Bc.bWt(e,n)}gWt(t,s){const i=this.Bc.uW();1!==i&&(t+=1,s+=1);const e=this.Bc.qL(),n=this.Bc.XL(),r=e/n;let h;h=t/s>r?s*r*i/e:t/r*i/n,h>1?h=Math.floor(h):h<1&&(h=1/Math.ceil(1/h)),this.ABt=Math.round(e*h),this.RBt=Math.round(n*h),this.GBt=this.ABt/i,this.PBt=this.RBt/i,this.EBt=Math.max(Math.floor((t-this.GBt)/2),0),this.OBt=Math.max(Math.floor((s-this.PBt)/2),0),this.Bc.bWt(e,n)}wWt(t,s){const i=this.Bc.uW();this.GBt=t,this.PBt=s,this.ABt=Math.round(this.GBt*i),this.RBt=Math.round(this.PBt*i),this.EBt=0,this.OBt=0;const e=this.vY();this.Bc.bWt(this.GBt/e,this.PBt/e)}yWt(t,s){const i=this.Bc.uW();this.GBt=this.Bc.Z1(),this.PBt=this.Bc.Q1(),this.ABt=Math.round(this.GBt*i),this.RBt=Math.round(this.PBt*i),this.MWt()?(this.EBt=Math.floor((t-this.GBt)/2),this.OBt=Math.floor((s-this.PBt)/2)):(this.EBt=0,this.OBt=0),this.Bc.bWt(this.Bc.Z1(),this.Bc.Q1())}SWt(t){if("high"===this.VBt)this.OF=this.ABt,this.DF=this.RBt,this.UBt="high";else{let s,i;if("off"===this.pWt()?(s=this.Bc.Z1(),i=this.Bc.Q1()):(s=this.Bc.qL(),i=this.Bc.XL()),this.ABt<s||this.RBt<i)this.OF=this.ABt,this.DF=this.RBt,this.UBt="high";else if(this.OF=s,this.DF=i,this.UBt="low","scale-inner"===t){const t=s/i,e=this.xBt/this.IBt;e<t?this.OF=this.DF*e:e>t&&(this.DF=this.OF/e)}else if("scale-outer"===t){const t=s/i,e=this.xBt/this.IBt;e>t?this.OF=this.DF*e:e<t&&(this.DF=this.OF/e)}}}l$(){return this.Bc}CWt(){return this.yBt[0].canvas}A0(){return this.YBt}MWt(){return this.HBt}TWt(){return this._Bt}xWt(t){if(!ST.has(t))throw new Error("invalid fullscreen mode");this.NBt=t;const s=this.Bc.pB();s.N8(),s.B8()}wY(){return this.NBt}IWt(t){if(!ST.has(t))throw new Error("invalid fullscreen mode");this.BBt=t;const s=this.Bc.pB();s.N8(),s.B8()}_Wt(){return this.BBt}pWt(){return this.MWt()?this._Wt():this.wY()}GWt(t){if(!vT.has(t))throw new Error("invalid fullscreen scaling quality");this.VBt=t,this.Bc.pB().N8()}PWt(){return this.VBt}v3(){return this.UBt}static AWt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}rY(){return this.xBt}hY(){return this.IBt}o3(){return this.OF}a3(){return this.DF}Nb(t){this.FS=!!t}RWt(t){this.LBt=t}hQ(){return this.LBt}EWt(){return this.gM().mR()}B$t(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.zBt=[],this.JBt.clear(),this.YBt.$M(),this.SBt.$M(),this.Bc.T5()}H$t(){console.log("[Construct] WebGPU device lost"),this.zBt=[],this.JBt.clear(),this.YBt.$M(),this.Bc.T5()}async $$t(t){await this.SBt.WM(),await this.$Lt(),await this.Bc.OWt(),console.log("[Construct] WebGL context restored")}async J$t(){await this.$Lt(),await this.Bc.OWt(),console.log("[Construct] WebGPU device restored")}DWt(){return this.SBt}FWt(){return this.vBt}gM(){return this.vBt||this.SBt}xB(){return this.bBt}Y$(){let t="";return t=this.Bc.FWt()?"webgpu":"webgl"+this.Bc.DWt().CT(),this.Bc.gM().Wb()&&(t+="-software"),t}K$(){return this.Bc.FWt()?this.Bc.FWt().kWt():this.Bc.DWt().PD()}uU(){return"low"===this.UBt?1/this.Bc.uW():this.vY()}vY(){const t=this.pWt();if("off"===t||"crop"===t)return 1;const s=this.Bc.qL(),i=this.Bc.XL(),e=s/i,n=this.ABt/this.RBt;return"scale-inner"!==t&&n>e||"scale-inner"===t&&n<e?this.PBt/i:this.GBt/s}z3(){return"low"===this.v3()?1:this.vY()}U3(){return"low"===this.v3()?1:this.Bc.uW()}LWt(t,s){this.$Bt=t,this.WBt=s}hK(t,s,i,e=!0){s=s||this.OF,i=i||this.DF;const n=s/2+this.$Bt,r=i/2+this.WBt;if(e){let e=this.l3();s===this.OF&&i===this.DF||(t.tv(TT,s/i),e=TT),t.aO(e)}const h=t.rv(n,r,t.WS(i),n,r,0,i);t.pO(h)}NWt(t,s=!0){const i=this.eW(),e=this.rW(),n=i/2,r=e/2;s&&t.aO(this.l3());const h=t.rv(n,r,t.WS(e),n,r,0,e);t.pO(h)}oW(){return this.ABt}lW(){return this.RBt}eW(){return this.GBt}rW(){return this.PBt}Q$(){return this.EBt}sW(){return this.OBt}o5(){return this.yBt.length}BWt(){return"undefined"!=typeof OffscreenCanvas&&this.CWt()instanceof OffscreenCanvas&&("Chromium"!==wT.Zs.ni||wT.Zs.ei>=124)}async P5(t,s=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.yBt.length===t)return;const i={count:t,layersDomState:this.Bc.pB().cB()._1().filter(t=>t.xV()).map(t=>t.F2()),immediate:s,marginLeft:this.EBt,marginTop:this.OBt,styleWidth:this.GBt,styleHeight:this.PBt};let e;if(e=this.zL()?await this.Bc.HB("canvas","set-html-layer-count",i):self.c3_runtimeInterface._OnSetHTMLLayerCount(i),t<this.yBt.length)this.yBt.length=t;else for(const t of e.addedCanvases){t.width=this.ABt,t.height=this.RBt;const s=this.BWt()?"bitmaprenderer":"2d",i=t.getContext(s);if(!i)throw new Error(`failed to acquire '${s}' canvas context`);this.yBt.push({canvas:t,F$t:i})}this.Bc.VB()}w8(t){if(t>=this.yBt.length)return;const s=this.CWt(),i=this.yBt[t].F$t;this.BWt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}b3(t){t.depth=this.Bc.l2();const s=this.zBt,i=s.findIndex(s=>s.Ox(t));let e;return-1!==i?(e=s[i],s.splice(i,1)):e=this.gM().cD(t),this.JBt.add(e),e}E0(t){if(!this.JBt.has(t))throw new Error("render target not in use");this.JBt.delete(t),this.zBt.push(t)}XBt(){const t={eT:this.Bc.KL()};return"low"===this.v3()&&(t.width=this.o3(),t.height=this.a3()),this.b3(t)}KBt(t){this.E0(t)}*$Wt(){for(const t of this.Bc.pB().F8())for(const s of t.Hj()){const t=this.i$t.get(s);t&&(yield t)}}d3(t){if(!this.gM().MD())return null;let s=this.i$t.get(t);return s||(s={MH:t,name:t.Ac(),WWt:wT.Hn(wT.Nw.NR,this.SBt),jWt:0,VWt:0,UWt:0},this.i$t.set(t,s)),s.WWt}HWt(){const t=this.gM();if(t.MD()&&0===this.QBt){this.QBt=t.kb(),this.e$t=NaN;for(const t of this.$Wt())t.jWt=NaN}}zWt(){this.SBt&&this.SBt.MD()&&this.JWt(),this.vBt&&this.vBt.MD()&&this.qWt()}JWt(){if(isNaN(this.e$t)&&(this.e$t=this.s$t.HR(this.ZBt,this.QBt),!isNaN(this.e$t))){if(this.Bc.iH())for(const t of this.$Wt())if(t.jWt=t.WWt.HR(this.ZBt,this.QBt),isNaN(t.jWt))return;if(this.s$t.zR(this.QBt),this.t$t=Math.min(this.e$t,1),this.Bc.iH()){const t=new Map;for(const s of this.$Wt())s.WWt.zR(this.QBt),s.VWt=Math.min(s.jWt,1),t.set(s.MH,s.VWt);for(const s of this.$Wt()){const i=s.MH,e=(t.get(i)||0)-i.pV().reduce((s,i)=>s+(t.get(i)||0),0);s.UWt=wT.Kn(e,0,1)}const s=this.Bc.cB(),i=this.t$t-s._1().reduce((s,i)=>s+(t.get(i)||0),0);self.eH.YWt(wT.Kn(i,0,1),this.t$t,[...this.$Wt()])}this.ZBt=this.QBt,this.QBt=0}}XWt(){return this.s$t}qWt(){if(0===this.QBt)return;for(let t=this.ZBt;t<this.QBt;++t){const s=this.n$t.get(t);if(s&&!s._R())return}const t=this.Bc.cB(),s=wT.Co(t.s5()+1,0);let i=0;for(let t=this.ZBt;t<this.QBt;++t){const e=this.n$t.get(t);if(!e)continue;const n=e.GR();let r=BigInt(0),h=BigInt(0);const o=BigInt(0);for(let t=0,i=Math.min(s.length,n.length/2);t<i;++t){const i=n[2*t],e=n[2*t+1];i!==o&&(r===o||i<r)&&(r=i),e>h&&(h=e);const a=Number(e-i)/1e9;s[t]+=a}i+=Number(h-r)/1e9}if(this.t$t=wT.Kn(i,0,1),this.Bc.iH()){const i=t.Hj(),e=new Map;for(let t=0,n=Math.min(i.length,s.length-1);t<n;++t){const n=s[t+1];e.set(i[t],n)}const n=[],r=new Map;for(const[t,s]of e){const i=[...t.gV()].reduce((t,s)=>t+(e.get(s)||0),0);r.set(t,i),n.push({name:t.Ac(),UWt:wT.Kn(s,0,1),VWt:wT.Kn(i,0,1)})}const h=this.t$t-t._1().reduce((t,s)=>t+(r.get(s)||0),0);self.eH.YWt(wT.Kn(h,0,1),this.t$t,n)}for(let t=this.ZBt;t<this.QBt;++t)this.n$t.delete(t);this.ZBt=this.QBt,this.QBt=0}KWt(t){this.n$t.set(this.vBt.kb(),t)}XN(){return this.t$t}KB(t,s,i,e,n,r){return this.r$t=t,this.h$t=s,this.o$t.Ha(i,e,n,r),this.l$t||(this.l$t=new Promise(t=>{this.u$t=t})),this.l$t}ZWt(){if(!this.r$t)return;let t=this.CWt();const s=this.o$t,i=wT.Kn(Math.floor(s.Qa()),0,t.width),e=wT.Kn(Math.floor(s.tl()),0,t.height);let n=s.width();n=0===n?t.width-i:wT.Kn(Math.floor(n),0,t.width-i);let r=s.height();if(r=0===r?t.height-e:wT.Kn(Math.floor(r),0,t.height-e),(0!==i||0!==e||n!==t.width||r!==t.height)&&n>0&&r>0){const s=wT.co(n,r);s.getContext("2d").drawImage(t,i,e,n,r,0,0,n,r),t=s}wT.fo(t,this.r$t,this.h$t).then(t=>{this.a$t&&URL.revokeObjectURL(this.a$t),this.a$t=URL.createObjectURL(t),this.l$t=null,this.u$t(t)}),this.r$t="",this.h$t=1}QWt(){return this.a$t}tjt(t){t?this.c$t++:this.c$t--}sjt(){return this.c$t>0}ijt(t){const s=this.gM();if(2===t)this.g$t=wT.Hn(wT.Nw.qb,this.gM()),this.g$t.gA("Arial"),this.g$t.yA(16),this.g$t.RA("center"),this.g$t.OA("center"),this.g$t.$A(300,200);else if(0===t){const t=this.Bc.ejt();t&&t.KX(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.njt("splash-images/splash-logo.svg").then(t=>{"done"===this.T$t?s.wx(t):this.y$t.w$t=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.rjt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.T$t?s.wx(t):this.y$t.S$t=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.rjt("splash-images/splash-website-512.png").then(t=>{"done"===this.T$t?s.wx(t):this.y$t.v$t=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async njt(t){t=new URL(t,this.Bc.hjt()).toString();const s=await wT.no(t),i=await this.Bc.ojt(s,2048,2048);return await this.gM().uD(i,{oT:"high"})}async rjt(t){t=new URL(t,this.Bc.hjt()).toString();const s=await wT.no(t);return await this.gM().uD(s,{oT:"high"})}ajt(){this.Bc.jc("runtime","hide-cordova-splash")}ljt(){this.f$t=Date.now(),this.Bc.Sf().addEventListener("loadingprogress",this.m$t),this.d$t=requestAnimationFrame(()=>this.ujt()),3!==this.Bc.cjt()&&this.ajt()}async fjt(){const t=this.gM();this.p$t=1;const s=this.Bc.cjt();4===s&&await this.I$t,this.x$t=null,this.I$t=null,-1!==this.d$t&&(cancelAnimationFrame(this.d$t),this.d$t=-1),this.Bc.Sf().removeEventListener("loadingprogress",this.m$t),this.m$t=null,this.g$t&&(this.g$t.zn(),this.g$t=null),this.Bc.djt(),t.tD(),this.y$t.w$t&&(t.wx(this.y$t.w$t),this.y$t.w$t=null),this.y$t.S$t&&(t.wx(this.y$t.S$t),this.y$t.S$t=null),this.y$t.v$t&&(t.wx(this.y$t.v$t),this.y$t.v$t=null),t.QO(0,0,0,0),t.Db(),this.T$t="done",this.ZBt=t.kb(),3===s&&this.ajt()}ujt(){if(-1===this.d$t)return;const t=this.gM();t.tD(),this.d$t=-1;const s=this.Bc.GL().GZ(),i=this.Bc.cjt();if(3!==i&&(this.NWt(t),t.QO(0,0,0,0),t.MO(),t.uv(),t.TO(null)),0===i)this.pjt(s);else if(1===i)this.mjt(s,120,0);else if(2===i)this.gjt(s);else if(3===i)wT.gh();else{if(4!==i)throw new Error("invalid loader style");this.yjt(s)}t.Db(),this.d$t=requestAnimationFrame(()=>this.ujt())}gjt(t){t?this.g$t.AA(1,0,0):this.g$t.AA(.6,.6,.6),this.g$t.Vc(Math.round(100*this.p$t)+"%");const s=this.GBt/2,i=this.PBt/2;PT.Nl(s-150,i-100,s+150,i+100);const e=this.gM();e.TO(this.g$t.Tx()),e.sb(PT,this.g$t.yR())}mjt(t,s,i){const e=this.gM();e.gv(),t?e.vO(1,0,0,1):e.vO(.118,.565,1,1);const n=this.GBt/2,r=this.PBt/2,h=s/2;AT.Ha(n-h,r-4+i,Math.floor(s*this.p$t),8),e.Rect(AT),AT.Ha(n-h,r-4+i,s,8),AT.offset(-.5,-.5),AT.fl(.5,.5),e.vO(0,0,0,1),e.hb(AT),AT.fl(1,1),e.vO(1,1,1,1),e.hb(AT)}pjt(t){const s=this.gM(),i=this.Bc.ejt();if(!i)return void this.mjt(t,120,0);const e=i.Tx();if(!e)return void this.mjt(t,120,0);const n=e.Vg(),r=e.Qg(),h=this.GBt/2,o=this.PBt/2,a=n/2,l=r/2;PT.Nl(h-a,o-l,h+a,o+l),s.TO(e),s.Pl(PT),this.mjt(t,n,l+16)}yjt(t){const s=this.gM(),i=this.y$t.w$t,e=this.y$t.S$t,n=this.y$t.v$t,r=Date.now();0===this.b$t&&(this.f$t=r);const h=this.Bc.wjt()||this.Bc.Sjt()&&!this.Bc.vjt(),o=h?0:200,a=h?0:3e3;let l=1;"fade-in"===this.T$t?l=Math.min((r-this.f$t)/300,1):"fade-out"===this.T$t&&(l=Math.max(1-(r-this.C$t)/300,0)),s.gv(),s.vO(.231*l,.251*l,.271*l,l),AT.set(0,0,this.GBt,this.PBt),s.Rect(AT);const u=Math.ceil(this.GBt),c=Math.ceil(this.PBt);let f,d;this.PBt>256?(s.vO(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),AT.Ha(0,.8*c-d/2,f,d),s.Rect(AT),t?s.vO(l,0,0,l):s.vO(.161*l,.953*l,.816*l,l),f=u*this.p$t,AT.Ha(.5*u-f/2,.8*c-d/2,f,d),s.Rect(AT),s.vO(l,l,l,l),s.uv(),e&&(f=1.5*wT.Kn(.22*c,105,.6*u),d=f/8,AT.Ha(.5*u-f/2,.2*c-d/2,f,d),s.TO(e),s.Rect(AT)),i&&(f=Math.min(.395*c,.95*u),d=f,AT.Ha(.5*u-f/2,.485*c-d/2,f,d),s.TO(i),s.Rect(AT)),n&&(f=1.5*wT.Kn(.22*c,105,.6*u),d=f/8,AT.Ha(.5*u-f/2,.868*c-d/2,f,d),s.TO(n),s.Rect(AT))):(s.vO(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),AT.Ha(0,.85*c-d/2,f,d),s.Rect(AT),t?s.vO(l,0,0,l):s.vO(.161*l,.953*l,.816*l,l),f=u*this.p$t,AT.Ha(.5*u-f/2,.85*c-d/2,f,d),s.Rect(AT),s.vO(l,l,l,l),s.uv(),i&&(f=.55*c,d=f,AT.Ha(.5*u-f/2,.45*c-d/2,f,d),s.TO(i),s.Rect(AT))),this.b$t++,"fade-in"===this.T$t&&r-this.f$t>=300&&this.b$t>=2&&(this.T$t="wait",this.M$t=r),"wait"===this.T$t&&r-this.M$t>=a&&this.p$t>=1&&(this.T$t="fade-out",this.C$t=r),("fade-out"===this.T$t&&r-this.C$t>=300+o||h&&this.p$t>=1&&r-this.f$t<500)&&this.x$t()}}}{const DT=self._s,FT=self.eH,kT=self.assert,LT=self.EY,NT={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let BT=!0;DT.bjt=class extends DT.Vn{constructor(t){t=Object.assign({},NT,t),super(),this.Mjt=t.messagePort,this.Cjt=t.runtimeBaseUrl,this.Tjt=t.previewUrl,this.xjt=!!t.headless,this.Ijt=!!t.hasDom,this._jt=!!t.isInWorker,BT=t.ife,this.Gjt=!!t.useAudio,this.Pjt=t.exportType,this.Ajt=t.isNWjs,this._K=!!t.isiOSCordova,this.Rjt=!!t.isiOSWebView,this.Ejt=!!t.isWindowsWebView2,this.Ojt=!!t.isAnyWebView2Wrapper,this.Djt=!!t.isFBInstantAvailable,this.Fjt=!("preview"!==this.Pjt||!t.isDebug),this.kjt=this.Fjt,this.Ljt=this.Fjt,this.Njt=0,this.Bjt=[],this.$jt=[],this.Wjt=!1,this.jjt="",this.Vjt="",this.Ujt="",this.Hjt="",this.zjt=0,this.Jjt=0,this.qjt=0,this.jF=self.devicePixelRatio,this.Yjt=0,this.Xjt=0,this.Kjt=0,this.Zjt=0,this.Qjt=0,this.tVt=!1,this.Sw=!0,this.sVt=!1,this.iVt=!1,this.eVt=!1,this.nVt=null,this.zZ=DT.Hn(DT.CK,this,t),this.l4=DT.Hn(DT.I8,this),this.zpt=DT.Hn(DT.Vmt,this),this.rVt=DT.Hn(DT.mW,this,t.wrapperComponentIds),this.hVt=DT.Hn(DT.hNt,this),this.itt=DT.Hn(DT.W8,this),this.oVt=DT.Hn(DT.fct,this),this.aVt=DT.Hn(DT.pct,this),this.Gct=DT.Hn(DT.Mct,this),this.pw=DT.Hn(DT.sw,{rw:t=>this.lVt(t),ow:t=>this.uVt(t)}),this.cVt=new Map,this.fVt=[],this.dVt=new Map,this.pVt=new Map,this.mVt=0,this.gVt=[],this.yVt=new Set,this.wVt=[],this.SVt=[],this.vVt=new Map,this.bVt=!1,this.MVt=!1,this.CVt=0,this.TVt=0,this.xVt=new Map,this.IVt=new Set,this._Vt=new Set,this.GVt=[],this.PVt=[],this.AVt=null,this.RVt=!1,this.EVt="vsync",this.mT="trilinear",this.OVt=!1,this.DVt=!0,this.FVt=!1,this.kVt=!1,this.LVt=null,this.NVt={BVt:t=>{this.d$t=-1,this.$Vt=-1,this.c7(t)},WVt:t=>{this.$Vt=-1,this.c7(t,!1,"skip-render")},jVt:()=>{this.d$t=-1,this.fk()}},this.d$t=-1,this.$Vt=-1,this.VVt=0,this.UVt=0,this.HVt=!1,this.zVt=!1,this.JVt=!1,this.qVt=!0,this.YVt=!0,this.XVt=!1,this.KVt=0,this.ZVt=new DT.Hd(1),this.QVt=()=>Math.random(),this.tUt=0,this.sUt=0,this.iUt=0,this.eUt=0,this.nUt=0,this.EOt=1,this.rUt=1/30,this.hUt=0,this.oUt=DT.Hn(DT.td),this.aUt=DT.Hn(DT.td),this.lUt=DT.Hn(DT.td),this.uUt=new Map,this.cUt=-1,this.fUt=0,this.dUt=0,this.pUt=-1,this.mUt=0,this.gUt=0,this.yUt=0,this.wUt=!1,this.SUt="",this.vUt=!1,this.bUt="",this.cH=null,this.MUt="",this.CUt=null,this.TUt=null,this.FRt=DT.Hn(DT.Event.Sf),this.xUt=new Map,this.IUt=new Map,this._Ut=0,this.GUt=!1,this.PUt=!1,this.AUt=!1,this.RUt=[],this.EUt={pretick:DT.Hn(DT.Event,"pretick",!1),tick:DT.Hn(DT.Event,"tick",!1),tick2:DT.Hn(DT.Event,"tick2",!1),instancecreate:DT.Hn(DT.Event,"instancecreate",!1),instancedestroy:DT.Hn(DT.Event,"instancedestroy",!1),beforelayoutchange:DT.Hn(DT.Event,"beforelayoutchange",!1),layoutchange:DT.Hn(DT.Event,"layoutchange",!1)},this.EUt.instancecreate.dJ=null,this.EUt.instancedestroy.dJ=null,this.j0=DT.Hn(DT.Event.Sf),this.OUt=null;const s=(t,s)=>DT.AOt._Lt(this,t,s);this.DUt=DT.Hn(DT.ud,s),this.FUt=DT.Hn(DT.ud,s),this.kUt=DT.Hn(DT.ud,s),this.LUt=DT.Hn(DT.NUt,this,t.jobScheduler),t.canvas&&(this.AVt=DT.Hn(DT.gBt,this)),this.Mjt.onmessage=t=>this._OnMessageFromDOM(t.data),this.KU("runtime","visibilitychange",t=>this.BUt(t)),this.KU("runtime","wrapper-extension-message",t=>this.$Ut(t)),this.KU("runtime","get-remote-preview-status-info",()=>this.WUt()),this.KU("runtime","js-invoke-function",t=>this.ygt(t)),this.KU("runtime","go-to-last-error-script",self.goToLastErrorScript),this.KU("runtime","offline-audio-render-completed",t=>this.jUt(t)),this.FRt.addEventListener("window-blur",t=>this.VUt(t)),this.FRt.addEventListener("window-focus",()=>this.UUt()),this.itt.v6(),this.aVt.v6(),this.HUt=null,this.zUt=new WeakMap,this.JUt={keyboard:null,MB:null,CB:null,TB:null},this.qUt=new WeakMap,this.YUt=[]}static Ux(t){return DT.Hn(DT.bjt,t)}zn(){DT.bh(this.fVt),this.dVt.clear(),this.pVt.clear(),this.l4.zn(),this.l4=null,this.zpt.zn(),this.zpt=null,this.rVt.zn(),this.rVt=null,this.zZ.zn(),this.zZ=null,this.hVt.zn(),this.hVt=null,this.itt.zn(),this.itt=null,this.oVt.zn(),this.oVt=null,this.aVt.zn(),this.aVt=null,this.Gct.zn(),this.Gct=null,this.pw.zn(),this.pw=null,this.AVt&&(this.AVt.zn(),this.AVt=null),this.FRt.zn(),this.FRt=null,this.XUt=null}_OnMessageFromDOM(t){const s=t.type;if("event"===s)this.KUt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.ZUt(t)}}KUt(t){if(!this.AUt)return void this.RUt.push(t);const s=t.component,i=t.handler,e=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const t=new DT.Event(i);t.data=e,this.FRt.Pf(t)}if(h){const t=new DT.Event(i,!0);for(const[s,i]of Object.entries(e))t[s]=i;this.PZ(t)}}const a=this.xUt.get(s);if(!a)return void(r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`));const l=a.get(i);if(!l)return void(r||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`));let u=null;try{u=l(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.QUt(o,!1,""+t))}null!==o&&(u&&u.then?u.then(t=>this.QUt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.QUt(o,!1,""+t)}):this.QUt(o,!0,u))}QUt(t,s,i){this.Mjt.postMessage({type:"result",responseId:t,isOk:s,result:i})}ZUt(t){const s=t.responseId,i=t.isOk,e=t.result,n=this.IUt.get(s);i?n.resolve(e):n.reject(e),this.IUt.delete(s)}KU(t,s,i){let e=this.xUt.get(t);if(e||(e=new Map,this.xUt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}jc(t,s,i,e){this.Mjt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}HB(t,s,i,e){const n=this._Ut++,r=new Promise((t,s)=>{this.IUt.set(n,{resolve:t,reject:s})});return this.Mjt.postMessage({type:"event",component:t,handler:s,data:i,responseId:n},e),r}VY(t,s,i,e=-1){this.jc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}UY(t,s,i){const e=this._Ut++,n=new Promise((t,s)=>{this.IUt.set(e,{resolve:t,reject:s})});return this.VY(t,s,i,e),n}$Ut(t){if(-1!==t.asyncId){const s=t.asyncId;this.IUt.get(s).resolve(t.params),this.IUt.delete(s)}else this.KUt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}mH(t,s,i){this.KU("wrapper-extension:"+t,s,i)}dH(t){return this.rVt.dH(t)}tHt(t){if(!this.iH())throw new Error("not in debug mode");this.jc("runtime","post-to-debugger",t)}async FOt(t){DT.rxt(this),this.iH()?await FT.FOt(this):self.eH&&self.eH.sHt(this);const s=await this.zZ.eo("data.json");if(await this.iHt(s),await this.eHt(t),this.wjt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.DWt()){const t=this.DWt();console.info(`[C3 runtime] Hosted in ${this.zL()?"worker":"DOM"}, rendering with WebGL ${t.CT()} [${t.PD()}]`)}else this.FWt()&&console.info(`[C3 runtime] Hosted in ${this.zL()?"worker":"DOM"}, rendering with WebGPU [${this.FWt().kWt()}]`);this.gM().Wb()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.AUt=!0;for(const t of this.RUt)this.KUt(t);DT.bh(this.RUt),this.AVt&&this.AVt.ljt();for(const s of t.runOnStartupFunctions)this.Bjt.push(this.nHt(s));if(await Promise.all([this.zZ.IZ(),...this.Bjt]),DT.bh(this.Bjt),!this.zZ.GZ())return this.AVt&&await this.AVt.fjt(),await this.FRt._f(new DT.Event("beforeruntimestart")),await this.tD(),this.Mjt.postMessage({type:"runtime-ready"}),this;this.AVt&&this.AVt.ajt()}async nHt(t){try{await t(this.HUt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async iHt(t){const s=t.project;this.jjt=s[0],this.Vjt=s[16],this.Ujt=s[31],this.Hjt=s[38],this.zjt=s[36];const i=s[39]||"loading-logo.png";this.OVt=!!s[9],this.Jjt=this.Kjt=s[10],this.qjt=this.Zjt=s[11],this.hVt.XNt(this.Jjt,this.qjt),this.Yjt=this.Jjt/2,this.Xjt=this.qjt/2,this.EVt=s[37],this.RVt=!!s[40],this.mT=s[14],this.sVt=s[15],this.iVt=s[42],this.eVt=s[17],this.tVt=!!s[18],this.Qjt=s[19],this.TVt=s[21],this.FVt=s[22];const e=this.zZ;if(e.tZ(s[45]),e.kZ(s[7],s[25]),e.iZ(s[8]),e.eZ(s[32]),e.rZ(s[28]),e.EZ(s[29]),0===this.Qjt){let t="";t="flat"===e.y$()?e.hZ()+i:i,t&&(this.nVt=e.yZ({url:t}))}this.AVt&&(this.AVt.xWt(DT.gBt.AWt(s[12])),this.AVt.GWt(s[23]?"high":"low"),this.AVt.Nb(0!==s[24]),this.AVt._$t(s[34]),this.AVt.RWt(s[41]),this.AVt.G$t(s[13]),this.AVt.P$t(s[30]),this.AVt.E$t(s[46],s[47]),this.AVt.R$t(s[26]),this.AVt.O$t(s[48]),this.AVt.D$t(s[50]));const n=s[43];n&&await this.rHt(n),this.hHt(),this.rVt.vAt(),this.GVt=self.oHt();const r=s[2];for(const t of r[1])this.rVt.bAt(t);for(const t of r[0])this.rVt.SAt(t);this.GVt=self.oHt(),this.aHt(),this.rVt._At();for(const t of s[3]){const s=DT.Sct.Ux(this,this.fVt.length,t);this.fVt.push(s),this.dVt.set(s.Ac().toLowerCase(),s),this.pVt.set(s.G1(),s)}for(const t of s[4])this.fVt[t[0]].SEt(t);for(const t of s[27]){const s=t.map(t=>this.fVt[t]);this.gVt.push(DT.Hn(DT.SOt,this,s))}this.lHt();for(const t of this.fVt)t.bEt();for(const t of s[5])this.l4.Ux(t);const h=s[1];if(h){const t=this.l4.P8(h);t&&this.l4._8(t)}for(const t of s[35])this.oVt.Ux(t);for(const t of s[33])this.itt.Ux(t);for(const t of s[44])this.aVt.Ux(t);this.aVt.yct()||(this.aVt.zn(),this.aVt=null);for(const t of s[49])this.Gct.Ux(t);this.Gct.Ict()||(this.Gct.zn(),this.Gct=null);for(const t of s[6])this.zpt.Ux(t);this.zpt.vgt(),this.uHt(),DT.bh(this.GVt),this.mj();let o="any";const a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.jc("runtime","set-target-orientation",{targetOrientation:o})}async rHt(t){const s=t.format;"image-sequence"===s?this.LVt=new self.cHt(this,t):"image-sequence-gif"===s?this.LVt=new self.fHt(this,t):"webm"===s?this.LVt=new self.dHt(this,t):"mp4"===s&&(this.LVt=new self.pHt(this,t)),this.EVt="unlimited-frame",this.AVt.xWt("off"),this.jF=1,self.devicePixelRatio=1,await this.HB("runtime","set-exporting-to-video",{message:this.LVt.mHt(0),duration:this.LVt.jJ()})}cjt(){return this.Qjt}oWt(){return null!==this.LVt}gHt(){return this.LVt.jJ()}yHt(){return this.LVt.wHt()}SHt(){return this.LVt.FOt({width:this.AVt.oW(),height:this.AVt.lW()})}vHt(){const t=this.VVt/this.yHt();return this.LVt.bHt(this.AVt.CWt(),t)}MHt(){this.LVt&&this.LVt.Bet()}jUt(t){this.LVt.CHt(t)}THt(){return this.LVt.Db()}Sjt(){return this.Djt}xw(){return this.Sw}YB(t){this.Bjt.push(t)}R5(t){this.Wjt=!!t}xHt(t){this.Wjt&&this.$jt.push(t)}L5(){return this.$jt}fEt(){return this.mVt++}CEt(){return this.mVt}kLt(t){this.yVt.add(t)}LLt(t){this.yVt.delete(t)}hWt(){return this.yVt}async eHt(t){this.AVt&&(await this.AVt.co(t),this.AVt.ijt(this.Qjt))}async tD(){this.HVt=!0,this.tUt=Date.now();let t=null;const s=new Promise(s=>t=s);if(this.tVt){for(const t of this.fVt)t.v1()||t.EEt()||!t.bW()||t.vGt();(async()=>{await this.zZ.IZ(),await s,this.Sw=!1,this.IHt()})()}else this.Sw=!1;this.zZ._Z(),this.iH()&&FT._Ht(BT);for(const t of this.l4.yB())t.Z5();this.oWt()&&await this.SHt();const i=this.l4.G8();await i.m5(null,this.gM()),await i.x5(!0),this.fUt=performance.now(),t(),this.tVt||this.IHt(),(await this.HB("runtime","before-start-ticking")).isSuspended&&!this.oWt()?(this.KVt++,this.XVt=!0):this.c7()}IHt(){this.qU(DT.i$.s$.t$.GHt,null,null),this.jc("runtime","register-sw")}Cbt(t){t=Math.floor(t);const s=this.GVt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}aHt(){for(const t of self.PHt){const s=DT.$h(Object.keys(t));this.PVt.push(s)}}Ugt(t){t=Math.floor(t);const s=this.PVt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}AHt(){return this.Ijt}RHt(){return this.xjt}zL(){return this._jt}hjt(){return this.Cjt}EHt(){return this.Tjt}aN(){return this.zpt}bN(){return this.zpt.bN()}Dgt(){return this.zpt.Dgt()}pN(){return this.zpt.pN()}Fgt(){return this.zpt.Fgt()}ixt(){return 0===this.Dgt().cmt()}Lgt(){return this.zpt.Lgt()}xLt(){return this.rVt}RZ(){return this.rVt.RZ()}q0(t){if((t=Math.floor(t))<0||t>=this.fVt.length)throw new RangeError("invalid index");return this.fVt[t]}OHt(t){return this.dVt.get(t.toLowerCase())||null}QY(t){return this.pVt.get(t)||null}yht(t){const s=DT.mW.LW(t);return s?s.WW():null}S1(){return this.fVt}*DHt(){for(const t of this.fVt)t.v1()||(yield*t.qW())}Sf(){return this.FRt}nN(){return this.j0}PZ(t){t.runtime=this.gW();const s=this.iH()&&!this.zpt.dj();s&&FT.M8(),this.j0.dispatchEvent(t),s&&FT.C8()}H5(t){return t.runtime=this.gW(),this.j0._f(t)}qL(){return this.Jjt}XL(){return this.qjt}FHt(t,s){if(this.Jjt===t&&this.qjt===s)return;this.Jjt=t,this.qjt=s;const i=this.pB();i.N8(),i.B8()}Z1(){return this.Kjt}Q1(){return this.Zjt}bWt(t,s){if(this.Kjt===t&&this.Zjt===s)return;this.Kjt=t,this.Zjt=s;const i=this.pB();i.N8(),i.B8()}aWt(t){this.oWt()||(this.jF=t)}uW(){return this.jF}t3(){return this.Yjt}s3(){return this.Xjt}IB(){return this.AVt}o3(){return this.AVt?this.AVt.o3():this.Kjt}a3(){return this.AVt?this.AVt.a3():this.Zjt}uU(){return this.AVt?this.AVt.uU():1}vY(){return this.AVt?this.AVt.vY():1}z3(){return this.AVt?this.AVt.z3():1}U3(){return this.AVt?this.AVt.U3():1}Q$(){return this.AVt?this.AVt.Q$():0}sW(){return this.AVt?this.AVt.sW():0}kHt(){return this.AVt?this.AVt.eW():0}LHt(){return this.AVt?this.AVt.rW():0}wY(){return this.AVt?this.AVt.wY():"off"}b3(t){return this.AVt?this.AVt.b3(t):null}E0(t){this.AVt&&this.AVt.E0(t)}S3(){return this.sVt}X$t(){return this.iVt}K$t(){return this.eVt}XN(){return this.AVt?this.AVt.XN():NaN}Ix(){return"nearest"!==this.KL()}ZN(){return this.EVt}QN(t){this.EVt!==t&&(this.EVt=t,-1===this.d$t&&-1===this.$Vt||(this.NHt(),this.BHt()))}KL(){return this.mT}gEt(){return this.tVt}ejt(){return this.nVt}djt(){this.nVt&&(this.nVt.aA(),this.nVt.zn(),this.nVt=null)}pB(){return this.l4}cB(){return this.l4.cB()}Vtt(){return this.itt}$Ht(){return this.oVt}cDt(){return this.aVt}Yct(){return this.Gct}GL(){return this.zZ}yZ(t){return this.zZ.yZ(t)}lj(t,s,i,e,n,r){if(r&&this.aVt){if(t instanceof DT.Sct&&t.v1()){const h=t.Cj(),o=Math.floor(this.uB()*h.length);return this.lj(h[o],s,i,e,n,r)}const h=this.aVt.wct(t,r);if(h){const t=this.e1(h,s,!1,i,e,!1,n,void 0,n);return this.aVt.vct(t,r),t}}return this.e1(t,s,!1,i,e,!1,n,void 0,n)}e1(t,s,i,e,n,r,h,o,a){let l=null,u=null;if(t instanceof DT.Sct){if(u=t,u.v1()){const t=u.Cj();u=t[Math.floor(this.uB()*t.length)]}l=u.X0()}else l=t,u=this.q0(l[1]);const c=u.zW().bW();if(this.Sw&&c&&!u.EEt())return null;const f=s;let d;c||(s=null),d=i&&!r&&l&&!this.xVt.has(l[2])?l[2]:this.TVt++;const p=l?l[0]:null,m=DT.Hn(DT.Instance,{runtime:this,objectType:u,MH:s,DOt:p,NOt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.xVt.set(d,m);let g=null;if(c&&(g=m.kB(),void 0!==e&&void 0!==n&&(g.XM(e),g.QM(n)),u.rOt(!0)),s&&(a||s.n1(m,!0),s.mB().y5(u)),this.CVt++,u.CU()&&!i&&!r){const t=new Set;for(const s of u.d5().Tj()){if(s===u)continue;const i=this.WHt(s,g,t);if(i){const t=this.e1(i,f,!1,g?g.YM():e,g?g.ZM():n,!0,!1,void 0,a);m.X5(t)}else{const t=this.e1(s,f,!1,g?g.YM():e,g?g.ZM():n,!0,!1,void 0,a);m.X5(t)}}for(const t of m.TU()){t.X5(m);for(const s of m.TU())t!==s&&t.X5(s)}}if(c&&!i&&h&&this.jHt(m,p,g,s,e,n,a),u.CU()&&!i&&!r&&h)for(const t of m.TU()){const i=t.kB();if(!i)continue;const e=t.zW(),n=t.fU().X0()[0];e.bW()?this.jHt(t,n,i,s,i.YM(),i.ZM(),a):this.jHt(t,n,i,s,void 0,void 0,a)}if(!r&&h){void 0===e&&(e=p[0]),void 0===n&&(n=p[1]);const t=g.oz(),s=e-g.YM()+t.YM(),i=n-g.ZM()+t.ZM();t.TH(s,i)}u.tOt();const y=l?DT.Oh(l[5]):null,w=l?l[4].map(t=>DT.Oh(t)):null,S=c&&p&&p[13];if(S&&m.UOt(),m.AEt(y,w),S){const t=p[13];m.iJ().LGt(t[2],t[0],t[1])}this.SVt.push(m),this.bVt=!0,this.iH()&&FT.VHt(m);const v=this.EUt.instancecreate;return v.dJ=m,this.FRt.dispatchEvent(v),m}wFt(t){const s=t[0],i=t[1],e=t[2],n=t[6];return n||this.l4.A8(s).LB(i).Q0(e)}WHt(t,s,i){const e=s?.uDt()??[];for(const s of e){const e=this.wFt(s),n=!!s[4],r=this.q0(e[1]);if(!i.has(e)&&t===r&&n)return i.add(e),e}}jHt(t,s,i,e,n,r,h){const o=i.Wkt(),a=i.uDt();if(t.kB().jkt(o),!a)return;void 0===n&&(n=s[0]),void 0===r&&(r=s[1]);const l=new Set,u=s[0],c=s[1];for(const s of a){const i=s[0],o=s[1],a=s[2],f=s[3],d=!!s[4],p=s[5],m=s[6];let g;g=m||this.l4.A8(i).LB(o).Q0(a);const y=this.q0(g[1]),w=t.dDt(y),S=l.has(y);if(w&&!S&&d){const s=t.pDt(y);s.kB().FOt(g[0]);const i=n+g[0][0]-u,e=r+g[0][1]-c;s.kB().TH(i,e),s.kB().jkt(p),t.mz(s,{vz:!!(1&f),Mz:!!(f>>1&1),Tz:!!(f>>2&1),Iz:!!(f>>3&1),Gz:!!(f>>4&1),kz:!!(f>>5&1),Az:!!(f>>6&1),Ez:!!(f>>7&1),Dz:!!(f>>8&1)}),l.add(y)}else{const s=n+g[0][0]-u,i=r+g[0][1]-c,o=this.e1(g,e,!1,s,i,!1,!0,t,h);o.kB().jkt(p),t.mz(o,{vz:!!(1&f),Mz:!!(f>>1&1),Tz:!!(f>>2&1),Iz:!!(f>>3&1),Gz:!!(f>>4&1),kz:!!(f>>5&1),Az:!!(f>>6&1),Ez:!!(f>>7&1),Dz:!!(f>>8&1)})}}}wU(t){if(this.IVt.has(t))return;const s=t.fU();let i=this.vVt.get(s);if(i){if(i.has(t))return;i.add(t)}else i=new Set,i.add(t),this.vVt.set(s,i);if(this.iH()&&FT.UHt(t),t.zOt(),this.bVt=!0,t.CU())for(const s of t.TU())this.wU(s);for(const s of t.children())s.Lz()&&this.wU(s);if(!this.l4.pj()&&!this.wUt){const s=this.aN();s.cj(!0),t.IDt(),s.cj(!1)}t._Dt(this.l4.pj())}mj(){this.bVt&&(this.MVt=!0,this.HHt(),this.zHt(),this.MVt=!1,this.bVt=!1,this.VB())}HHt(){for(const t of this.SVt){const s=t.fU();s.n1(t);for(const i of s.yj())i.n1(t),i.tOt()}DT.bh(this.SVt)}zHt(){this.FRt.ff(!0);for(const[t,s]of this.vVt.entries())this.JHt(t,s),s.clear();this.vVt.clear(),this.FRt.ff(!1)}JHt(t,s){for(const t of s){const s=this.EUt.instancedestroy;s.dJ=t,this.FRt.dispatchEvent(s),this.xVt.delete(t.xU()),this.uUt.delete(t);const i=t.kB();i&&(i.zkt(),i.l1(),i.zOt()),this.IVt.add(t),this.CVt--}DT.Ah(t.ej(),s),t.tOt(),this._Vt.add(t);for(const i of t.yj())DT.Ah(i.ej(),s),i.tOt(),this._Vt.add(i);if(t.zW().bW()){const t=new Set([...s].map(t=>t.kB().LB()));for(const i of t)i.G2(s)}}iOt(){return this.SVt}*aIt(t){for(const s of this.iOt())t.v1()?s.fU().nxt(t)&&(yield s):s.fU()===t&&(yield s)}PEt(){return this.TVt++}REt(t,s){this.xVt.set(t,s)}qY(t){t=!!t,this.YVt!==t&&(this.YVt=!!t,this.YVt&&this.XVt&&(this.KY(!1),this.XVt=!1))}YY(){return this.YVt}T5(){this.FRt.dispatchEvent(DT.Hn(DT.Event,"renderercontextlost")),this.KY(!0);for(const t of this.fVt)!t.v1()&&t.OEt()&&t.M5();const t=this.cB();t&&t.T5(),DT.AAt.rQ(),DT.vZ.rQ()}async OWt(){await this.cB().m5(null,this.gM()),this.FRt.dispatchEvent(DT.Hn(DT.Event,"renderercontextrestored")),this.KY(!1),this.VB()}BUt(t){if(!this.YVt)return;const s=t.hidden;this.KY(s),this.XVt=s,s||this.VB()}VUt(t){this.wjt()&&this.FVt&&!DT.Zs.oi&&(t.data.parentHasFocus||(this.KY(!0),this.kVt=!0))}UUt(){this.kVt&&(this.KY(!1),this.kVt=!1)}BHt(){const t=this.NVt;"vsync"===this.EVt?-1===this.d$t&&(this.d$t=self.requestAnimationFrame(t.BVt)):"unlimited-tick"===this.EVt?(-1===this.$Vt&&(this.$Vt=DT.Hh(t.WVt)),-1===this.d$t&&(this.d$t=self.requestAnimationFrame(t.jVt))):-1===this.$Vt&&(this.$Vt=DT.Hh(t.BVt))}NHt(){-1!==this.d$t&&(self.cancelAnimationFrame(this.d$t),this.d$t=-1),-1!==this.$Vt&&(DT.zh(this.$Vt),this.$Vt=-1)}PN(){return this.KVt>0}KY(t){if(this.oWt())return;const s=this.PN();this.KVt+=t?1:-1,this.KVt<0&&(this.KVt=0);const i=this.PN();if(!s&&i)console.log("[Construct] Suspending"),this.NHt(),this.FRt.dispatchEvent(DT.Hn(DT.Event,"suspend")),this.PZ(DT.Hn(DT.Event,"suspend")),this.qU(DT.i$.s$.t$.qHt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const t=performance.now();this.sUt=t,this.fUt=t,this.cUt=0,this.dUt=0,this.pUt=0,this.mUt=0,this.yUt=0,this.gUt=0,this.FRt.dispatchEvent(DT.Hn(DT.Event,"resume")),this.PZ(DT.Hn(DT.Event,"resume")),this.qU(DT.i$.s$.t$.YHt,null,null),this.Myt()||this.c7(t)}}FY(t){this.DUt.$u(t)}BY(t){this.FUt.$u(t)}LY(t){this.kUt.$u(t)}kY(t){this.DUt.Zf(t)}$Y(t){this.FUt.Zf(t)}NY(t){this.kUt.Zf(t)}XHt(t,s){const i=s?performance.now():0;let e;return t instanceof LT?(e=t.nH(),s&&FT.KHt(t.behavior,performance.now()-i)):(e=t.c7(),s&&FT.KHt(t.lJ(),performance.now()-i)),e}ZHt(){const t=this.iH();this.DUt.Vd(!0);for(const s of this.DUt)this.XHt(s,t);this.DUt.Vd(!1)}QHt(t,s){const i=s?performance.now():0;let e;return t instanceof LT?(e=t.jY(),s&&FT.KHt(t.behavior,performance.now()-i)):(e=t.aAt(),s&&FT.KHt(t.lJ(),performance.now()-i)),e}tzt(){const t=this.iH();this.FUt.Vd(!0);for(const s of this.FUt)this.QHt(s,t);this.FUt.Vd(!1)}szt(t,s){const i=s?performance.now():0;let e;return t instanceof LT?(e=t.oH(),s&&FT.KHt(t.behavior,performance.now()-i)):(e=t.nPt(),s&&FT.KHt(t.lJ(),performance.now()-i)),e}izt(){const t=this.iH();this.kUt.Vd(!0);for(const s of this.kUt)this.szt(s,t);this.kUt.Vd(!1)}*ezt(){const t=this.iH();this.DUt.Vd(!0);for(const s of this.DUt){const i=this.XHt(s,t);DT.Mo(i)&&(yield*i)}this.DUt.Vd(!1)}*nzt(){const t=this.iH();this.FUt.Vd(!0);for(const s of this.FUt){const i=this.QHt(s,t);DT.Mo(i)&&(yield*i)}this.FUt.Vd(!1)}*rzt(){const t=this.iH();this.kUt.Vd(!0);for(const s of this.kUt){const i=this.szt(s,t);DT.Mo(i)&&(yield*i)}this.kUt.Vd(!1)}async c7(t,s,i){this.JVt=!0;const e="background-wake"===i,n="background-wake"!==i&&"skip-render"!==i,r=this.pB(),h=this.IB();if(!this.HVt||this.PN()&&!s&&!e)return;const o=performance.now();this.zVt=!0,this.hzt(t||0),this.pUt++,this.ozt();const a=this.azt();this.eIt()&&await a;const l=this.FRt.Gf(this.EUt.pretick);l instanceof Promise&&await l,this.PZ(this.OUt.pretick);const u=this.lzt();this.eIt()&&await u,this.uzt()&&await this.czt(),r.SB()&&await this.fzt();const c=this.dzt();this.eIt()&&await c;const f=r.cB(),d=f.a5();let p=!1;if(-1!==d&&(f.l5(),h.o5()!==d)){const t=this.IB().P5(d);this.zL()&&(p=!0,await t)}this.jc("canvas","update-html-layer-dom-state",{layersDomState:f._1().filter(t=>t.xV()).map(t=>t.F2())}),n&&this.fk(),p&&this.jc("canvas","cleanup-html-layers"),this.oWt()&&(await this.vHt(),this.FN()>=this.gHt())?this.THt():(this.PN()||e||this.BHt(),this.VVt++,this.UVt++,this.zVt=!1,this.gUt+=performance.now()-o)}async azt(){const t=this.zpt,s=this.iH();this.mj(),t.cj(!0),this.uyt(this.cB()),s&&FT.pzt(),this.eIt()?await t.Vyt():t.Nyt(),s&&FT.mzt(),this.cyt(),t.cj(!1),this.mj(),t.cj(!0)}async lzt(){const t=this.zpt,s=this.iH(),i=this.eIt(),e=this.FRt,n=this.EUt,r=this.OUt;s&&FT.pzt(),i?await this.gzt(this.ezt()):this.ZHt(),i?await this.gzt(this.nzt()):this.tzt(),s&&FT.yzt(),s&&FT.pzt(),i?await this.wzt(n.tick):e.dispatchEvent(n.tick),s&&FT.Szt(),t.cj(!1),this.PZ(r.tick)}async dzt(){const t=this.zpt,s=this.FRt,i=this.EUt,e=this.OUt,n=this.iH(),r=this.eIt();n&&FT.pzt(),r?await t.fyt(this.l4):t.lyt(this.l4),n&&FT.mzt(),this.hVt.SNt(),this.ozt(),this.qVt=!1,t.cj(!0),n&&FT.pzt(),r?await this.gzt(this.rzt()):this.izt(),n&&FT.yzt(),n&&FT.pzt(),r?await this.wzt(i.tick2):s.dispatchEvent(i.tick2),n&&FT.Szt(),t.cj(!1),this.PZ(e.tick2),r&&await t.Cyt(),this.mj(),this.ozt()}ozt(){if(0===this.IVt.size)return;const t=this.FRt;t.ff(!0);for(const t of this._Vt)t.Eyt().Mpt(this.IVt);this._Vt.clear(),this.zpt.Hyt(this.IVt);for(const t of this.IVt)t.zn();this.IVt.clear(),t.ff(!1)}async fzt(){const t=this.pB();let s=0;for(;t.SB()&&s++<10;)await this.vzt(t.L8())}hzt(t){let s=0;this.oWt()?(s=1/this.yHt(),this.iUt=s,this.eUt=s):0!==this.sUt&&(s=Math.max(t-this.sUt,0)/1e3,s>.5&&(s=0),this.iUt=s,this.eUt=DT.Kn(s,this.hUt,this.rUt)),this.sUt=t,this.nUt=this.eUt*this.EOt,this.oUt.$u(this.nUt),this.aUt.$u(s*this.EOt),this.lUt.$u(this.eUt);for(const[t,s]of this.uUt)s.$u(this.eUt*t.WN());this.AVt&&this.AVt.zWt(),t-this.fUt>=1e3&&(this.fUt+=1e3,t-this.fUt>=1e3&&(this.fUt=t),this.dUt=this.cUt,this.cUt=0,this.mUt=this.pUt,this.pUt=0,this.yUt=Math.min(this.gUt/1e3,1),this.gUt=0,this.AVt&&this.AVt.HWt(),this.hVt.mNt(),this.iH()&&FT.bzt())}jOt(t,s){if(s){if(!this.uUt.has(t)){const s=DT.Hn(DT.td);s.hd(this.oUt),this.uUt.set(t,s)}}else this.uUt.delete(t)}VOt(t){const s=this.uUt.get(t);return s?s.zs():this.FN()}async vzt(t){const s=this.FRt,i=this.pB().cB();await i.t8(),i.C5(t,this.gM()),i===t&&this.zpt.e8(),this.hVt.SNt(),this.ozt(),s.dispatchEvent(this.EUt.beforelayoutchange),DT.pf.Rf(!0),await t.m5(i,this.gM()),DT.pf.Rf(!1),await t.x5(!1),s.dispatchEvent(this.EUt.layoutchange),this.VB(),this.qVt=!0,this.mj(),this.MHt()}VB(){this.DVt=!0}DWt(){return this.AVt?this.AVt.DWt():null}FWt(){return this.AVt?this.AVt.FWt():null}gM(){return this.AVt?this.AVt.gM():null}fk(){const t=this.AVt;if(!t||t.EWt())return;const s=this.gM(),i=s.MD(),e=i&&s.jb(),n=i&&s.sv();if(e&&s.aD(),!this.DVt&&!this.oWt())return void s.Lb();const r=this.l4.cB();this.cUt++,s.tD();const h=this.iH();h&&FT.pzt(),this.DVt=!1;let o=null;e&&(o=t.XWt().VR(),s.bD(o));let a=null;n&&(a=s.Mzt(2*(1+r.s5())),s.g3(0,1)),this.l2()&&"low"===t.v3()?s.uO(t.o3(),t.a3()):s.cO(),this.Czt(this.gM(),r),o&&s.CD(o),n&&(s.Tzt(),this.AVt.KWt(a)),s.Db(),h&&(FT.xzt(),FT.Izt()),t&&t.ZWt()}d8(t){return"low"===this.IB().v3()||t.jb()&&(this.S3()||this.l2())}Czt(t,s){t.uv(),t.GO(),t.Pb(),t.vO(1,1,1,1),t.fD(null),t.TO(null),t.iD(this.l2()),this.d8(t)&&s.c8(t);const i=s.o5();for(let e=1;e<i;++e)s.y8(t,e),t.sv()&&t._zt();this.d8(t)||s.c8(t),s.g8(t)}qU(t,s,i){if(!this.HVt)return!1;const e=!this.zVt&&!this.zpt._yt();let n=0;e&&(n=performance.now());const r=this.iH();r&&this.rX(!1);const h=this.zpt.gyt(this.l4,t,s,i);if(e){const t=performance.now()-n;this.gUt+=t,r&&FT.Gzt(t)}return r&&this.rX(!0),h}zGt(t,s,i){if(!this.eIt())return this.qU(t,s,i);if(this.Myt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.zVt&&!this.zpt._yt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this.zpt.Syt(this.l4,t,s,i)}async ZB(t,s,i){if(!this.eIt())return this.qU(t,s,i);if(!this.HVt)return!1;if(this.Myt())return this.zpt.vyt(t,s,i);if(!this.cB())return this.zpt.yyt(t,s,i);const e=performance.now(),n=this.zpt.Syt(this.l4,t,s,i);let r=n.next();for(;!r.done;)await this.pyt(r.value),r=n.next();return this.PN()||this.zpt._yt()||(await this.zpt.Cyt(),this.JVt&&!this.zVt&&this.BHt()),this.gUt+=performance.now()-e,r.value}JGt(t,s,i){const e=this.iH();e&&this.rX(!1);const n=this.zpt.Tyt(this.l4,t,s,i);return e&&this.rX(!0),n}qGt(t,s,i){return this.zpt.xyt(this.l4,t,s,i)}YGt(t){return this.ZVt.$u(t)}uyt(t){this.wVt.push(t)}cyt(){if(!this.wVt.length)throw new Error("layout stack empty");this.wVt.pop()}OB(){return this.wVt.length?this.wVt.at(-1):this.cB()}RN(t){return t&&-1!==t.WN()?this.eUt*t.WN():this.nUt}l7(){return this.nUt}u7(){return this.eUt}ON(){return this.iUt}WN(){return this.EOt}jN(t){(isNaN(t)||t<0)&&(t=0),this.EOt=t}iB(t){this.hUt=Math.max(t,0)}sB(){return this.hUt}rB(t){this.rUt=Math.max(t,0)}nB(){return this.rUt}UN(){return this.dUt}zN(){return this.mUt}qN(){return this.yUt}Pzt(){return this.tUt}FN(){return this.oUt.zs()}Azt(){return this.aUt.zs()}BN(){return this.lUt.zs()}LN(){return this.VVt}Rzt(){return this.UVt}Ezt(){return this.CVt}FL(){return this.jjt}LL(){return this.Vjt}WL(){return this.Ujt}BL(){return this.Hjt}VL(){return this.zjt}AB(t){if(this.wUt)throw new Error("cannot call while loading state - wait until afterload event");return this.xVt.get(t)||null}dFt(t){if(this.wUt)throw new Error("cannot call while loading state - wait until afterload event");this.xVt.delete(t)}Y5(){this.xVt.clear();for(const t of this.fVt)if(!t.v1())for(const s of t.ej())this.xVt.set(s.xU(),s)}wjt(){return"preview"===this.Pjt}iH(){return this.Fjt}z$(){return this.Pjt}J$(){return"nwjs"===this.z$()||this.Ajt}vjt(){return"cordova"===this.Pjt}Ozt(){return"Android"===DT.Zs.Qs&&("cordova"===this.Pjt||"playable-ad-single-file"===this.Pjt||"playable-ad-zip"===this.Pjt||"instant-games"===this.Pjt)}Dzt(){return this._K}Fzt(){return this.Rjt}q$(){return this.Ejt}kzt(){return this.Ojt}RL(){return this.hVt}GAt(){return this.rVt.GAt()}PAt(){return this.rVt.PAt()}l2(){return this.RVt}Lzt(){return this.gM().US(this.Q1())}WS(t){return this.gM().WS(t||this.Q1())}Nzt(){return this.qVt}Bzt(t){t=!!t,this.OVt!==t&&(this.OVt=t,this.pB().B8(),this.VB())}QL(){return this.OVt}$zt(t){if(!this.cVt.has(t)){const s=()=>this.Wzt(t);this.cVt.set(t,s),t.Sf().addEventListener("animationframeimagechange",s)}const s=this.pw.aw(t);return s.Tw()||s.Iw().then(()=>this.VB()),s}Wzt(t){this.pw.fw(t)}lVt(t){const s=[];for(const i of t.UEt())for(const t of i.FJ()){const i=t.WJ();s.push({source:t,width:i.Vg(),height:i.Qg(),tag:t.sq()})}return{Mw:s}}async uVt(t){const s=DT.Hn(DT.Hd),i=[],e=new Map;for(const n of t.UEt())for(const t of n.FJ()){const n=t.WJ().XAt();e.has(n)||(e.set(n,null),i.push(s.$u(async()=>{const t=await n.lQ();e.set(n,t)})))}await Promise.all(i);const n=[];for(const i of t.UEt())for(const t of i.FJ())n.push(s.$u(async()=>{const s=t.WJ(),i=e.get(s.XAt()),n=await s.KAt(i);return{Gw:await createImageBitmap(n)}}));const r=await Promise.all(n);for(const t of e.values())t instanceof ImageBitmap&&t.close&&t.close();return{Mw:r}}jzt(t){this.SUt=t,this.vUt=!1}Vzt(){this.SUt="",this.vUt=!0}Uzt(t){this.bUt=t}KIt(t){this.cH=t}Hzt(){return this.MUt}uzt(){return!!(this.SUt||this.vUt||this.bUt||null!==this.cH)}async czt(){if(this.SUt&&(this.mj(),await this.zzt(this.SUt),this.Jzt()),this.bUt&&(await this.qzt(this.bUt),this.Jzt(),this.iH()&&FT.Yzt()),this.vUt){const t=await this.Xzt();this.MUt=t,await this.ZB(DT.i$.s$.t$.Kzt,null),this.MUt="",this.Jzt()}if(null!==this.cH){this.mj();try{await this.Zzt(this.cH),this.MUt=this.cH,await this.ZB(DT.i$.s$.t$.Qzt,null),this.MUt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.ZB(DT.i$.s$.t$.tJt,null)}this.Jzt()}}Jzt(){this.SUt="",this.vUt=!1,this.bUt="",this.cH=null}fW(){return this.CUt||(this.CUt=localforage.Ii({name:"c3-localstorage-"+this.WL(),description:this.FL()})),this.CUt}sJt(){return this.TUt||(this.TUt=localforage.Ii({name:"c3-savegames-"+this.WL(),description:this.FL()})),this.TUt}async zzt(t){const s=await this.Xzt();try{await this.sJt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.MUt=s,await this.ZB(DT.i$.s$.t$.Kzt,null),this.MUt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.ZB(DT.i$.s$.t$.iJt,null)}}async qzt(t){try{const s=await this.sJt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.Zzt(s),this.MUt=s,await this.ZB(DT.i$.s$.t$.Qzt,null),this.MUt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.ZB(DT.i$.s$.t$.tJt,null)}}async Xzt(){const t={c3save:!0,version:1,rt:{time:this.FN(),timeRaw:this.Azt(),walltime:this.BN(),timescale:this.WN(),tickcount:this.LN(),next_uid:this.TVt,running_layout:this.cB().G1(),start_time_offset:Date.now()-this.tUt},types:{},layouts:{},events:this.zpt.e4(),timelines:this.itt.e4(),user_script_data:null};for(const s of this.fVt)s.v1()||s.fOt()||(t.types[s.G1().toString()]=s.e4());for(const s of this.l4.yB())t.layouts[s.G1().toString()]=s.e4();const s=this.eJt("save");return s.saveData=null,await this.H5(s),t.user_script_data=s.saveData,JSON.stringify(t)}N5(){return this.wUt}async Zzt(t){const s=this.pB(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(i.version>1)throw new Error("C3 save data from future version");this.ZIt(),this.FRt.dispatchEvent(DT.Hn(DT.Event,"beforeload"));for(const t of this.DHt())t.fU().fOt()||t.f6();const e=i.rt;this.oUt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.aUt.Set(e.timeRaw),this.lUt.Set(e.walltime),this.EOt=e.timescale,this.VVt=e.tickcount,this.tUt=Date.now()-e.start_time_offset;const n=e.running_layout;this.wUt=!0;let r=!1;if(n!==this.cB().G1()){const t=s.A8(n);if(!t)return;await this.vzt(t),r=!0}for(const[t,e]of Object.entries(i.layouts)){const i=parseInt(t,10),n=s.A8(i);n&&n.n4(e)}const h=new Set;for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.QY(i);!e||e.v1()||e.fOt()||e.n4(s,h)}for(const t of this.l4.yB())for(const s of t.zj())s.r4();if(this.mj(),this.Y5(),this.wUt=!1,r){for(const t of this.DHt())t.B5();for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.QY(i);!e||e.v1()||e.fOt()||e.yOt(s)}}this.TVt=e.next_uid,this.zpt.n4(i.events);for(const t of this.fVt)if(!t.v1()&&t.CU())for(const s of t.ej()){const i=s._U();s.fDt();for(const e of t.d5().Tj()){if(e===t)continue;const n=e.ej();if(i<0||i>=n.length)throw new Error("missing sibling instance");s.X5(n[i])}}this.itt.n4(i.timelines),s.N8(),s.B8();for(const t of h)t.xDt();this.QIt(),this.FRt.dispatchEvent(DT.Hn(DT.Event,"afterload")),this.PZ(this.eJt("afterload"));for(const[t,s]of Object.entries(i.types)){const s=parseInt(t,10),i=this.QY(s);i&&i.gOt()}const o=this.eJt("load");o.saveData=i.user_script_data,await this.H5(o),this.VB()}nJt(t,s){return s.kB().kkt()-t.kB().kkt()}TLt(t,s){t.kB()&&(this.qUt.has(t)||(this.qUt.set(t,s),this.YUt.push(t)))}ZIt(){this.qUt=new WeakMap,DT.bh(this.YUt),DT.l8._Ft()}QIt(t="full",s=null){this.YUt.sort(this.nJt),s||(s={}),s.fFt=new Set;const i=this.YUt.length;for(const i of this.YUt)i.p6(this.qUt.get(i),t,s);for(const i of this.YUt)i.ADt(this.qUt.get(i),t,s);if(this.ZIt(),i){this.mj(),this.Y5();for(const t of this.l4.yB())for(const s of t.zj())s.f1(),s.jB()}}async rJt(t){const s=await Promise.all(t.map(async t=>{if(this.vjt()&&this.zZ.oZ()||"playable-ad-single-file"===this.z$()){const s=await this.zZ.no(t);return URL.createObjectURL(s)}return new URL(t,location.href).toString()}));this.LUt.hJt(s)}oJt(t,s){this.LUt.aJt(t,s)}lJt(t,s){this.LUt.uJt(t,s)}cJt(t,s,i,e){return this.LUt.cJt(t,s,i,null,null,e)}fJt(t,s,i,e){return this.LUt.fJt(t,s,i,e)}dJt(){return this.LUt.pJt()}GB(t,s){this.jc("runtime","invoke-download",{url:t,filename:s})}async ojt(t,s,i,e,n,r){if(e=e||s,n=n||i,this.zL())return(await this.HB("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:n,imageBitmapOpts:r})).imageBitmap;{const h=await self.C3_RasterSvgImageBlob(t,s,i,e,n);return r?await self.createImageBitmap(h,r):h}}async mJt(t){return this.zL()?await this.HB("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}gJt(){this.GUt||(this.GUt=!0,this.jc("runtime","enable-device-orientation"))}yJt(){this.PUt||(this.PUt=!0,this.jc("runtime","enable-device-motion"))}uB(){return this.QVt()}wJt(t){this.QVt=t}WUt(){const t=this.gM();return{fps:this.UN(),tps:this.zN(),cpu:this.qN(),gpu:this.XN(),layout:this.cB()?this.cB().Ac():"",renderer:t.jb()?t.PD():t.kWt()}}Myt(){return!!this.iH()&&FT.Myt()}pyt(t){return this.eIt()?FT.pyt(t):Promise.resolve()}qvt(){return!!this.eIt()&&FT.SJt()}vJt(t){this.kjt=!!t,this.bJt()}MJt(){return this.kjt}eIt(){return this.Ljt}rX(t){t?this.Njt--:this.Njt++,this.bJt()}bJt(){this.Ljt=this.iH()&&this.kjt&&0===this.Njt}dSt(){return this.iH()&&FT.dSt()}f3(){return this.iH()&&this.gM().MD()&&FT.f3()}async gzt(t){if(t)for(const s of t)await this.pyt(s)}wzt(t){return this.gzt(this.FRt.Af(t))}ygt(t){return this.zpt.ygt(t.name,t.params)}JB(t){if(this.zL())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}gW(){return this.HUt}eJt(t){const s=DT.Hn(DT.Event,t,!1);return s.runtime=this.HUt,s}hHt(){this.HUt=new self.xL(this),this.OUt={pretick:this.eJt("pretick"),tick:this.eJt("tick"),tick2:this.eJt("tick2")}}lHt(){const t={};for(const s of this.fVt)t[s.Ugt()]={value:s.$W(),enumerable:!0,writable:!1};this.HUt.rN(t)}uHt(){const t={};for(const s of this.aN().Kgt())t[s.Ugt()]=s.Hgt();this.HUt.hN(t)}bB(){return this.JUt}FW(t,s){this.zUt.set(t,s)}Yj(t){return this.zUt.get(t)}B$(t){if(!(t instanceof self.UW))throw new TypeError("expected IObjectClass");const s=this.Yj(t);if(!(s&&s instanceof DT.Sct))throw new Error("invalid IObjectClass");return s}tj(t){if(!(t instanceof self.cU))throw new TypeError("expected IInstance");const s=this.Yj(t);if(!(s&&s instanceof DT.Instance))throw new Error("invalid IInstance");return s}DB(t){if(!(t instanceof self.Kz))throw new TypeError("expected IWorldInstance");const s=this.Yj(t);if(!(s&&s instanceof DT.Instance))throw new Error("invalid IInstance");return s}},self.C3_CreateRuntime=DT.bjt.Ux,self.C3_InitRuntime=(t,s)=>t.FOt(s)}{const $T=self._s;$T.NUt=class extends $T.Vn{constructor(t,s){super(),this.Bc=t,this.CJt=new Map,this.TJt=0,this.xJt=s.inputPort,s.outputPort.onmessage=t=>this.IJt(t),this._Jt=s.maxNumWorkers,this.GJt=1,this.PJt=!1,this.AJt=!1}pJt(){return this._Jt}hJt(t){this.xJt.postMessage({type:"_import_scripts",scripts:t})}aJt(t,s){this.xJt.postMessage({type:"_send_blob",blob:t,id:s})}uJt(t,s){this.xJt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}cJt(t,s,i,e,n,r){if(i||(i=[]),"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.TJt++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:i},a=new Promise((t,s)=>{this.CJt.set(h,{resolve:t,progress:e,reject:s,RJt:!1,EJt:r})});return n&&n.Xf(()=>this.OJt(h)),this.xJt.postMessage(o,i),this.DJt(),a}fJt(t,s,i,e){if(i||(i=[]),"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const n={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:this.TJt++,params:s,transferables:i};this.xJt.postMessage(n,i)}OJt(t){const s=this.CJt.get(t);s&&(s.RJt=!0,s.resolve=null,s.progress=null,s.reject=null,this.xJt.postMessage({type:"_cancel",jobId:t}))}IJt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.FJt(e,s.result);break;case"progress":this.kJt(e,s.progress);break;case"error":this.LJt(e,s.error);break;case"ready":this.NJt();break;default:throw new Error(`unknown message from worker '${i}'`)}}FJt(t,s){const i=this.CJt.get(t);if(!i)throw new Error("invalid job ID");i.RJt||i.resolve(s),this.CJt.delete(t)}kJt(t,s){const i=this.CJt.get(t);if(!i)throw new Error("invalid job ID");!i.RJt&&i.progress&&i.progress(s)}LJt(t,s){const i=this.CJt.get(t);if(!i)throw new Error("invalid job ID");i.RJt||i.reject(s),this.CJt.delete(t)}NJt(){this.PJt&&(this.PJt=!1,this.GJt++,this.GJt<this._Jt?this.DJt():this.xJt.postMessage({type:"_no_more_workers"}))}BJt(){let t=0;const s=[...this.CJt.values()].sort((t,s)=>(t.EJt||1/0)-(s.EJt||1/0));for(const i of s)t<(i.EJt||1/0)&&t++;return t}async DJt(){if(!(this.GJt>=this._Jt||this.PJt||this.AJt||this.BJt()<=this.GJt))try{this.PJt=!0,(await this.Bc.HB("runtime","create-job-worker")).outputPort.onmessage=t=>this.IJt(t)}catch(t){this.AJt=!0,this.PJt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.GJt} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.skymen_BetterOutline={rWt:"uniform lowp vec3 outlinecolor;\nuniform lowp float width;\nuniform lowp float precisionStep;\nuniform lowp float samples;\nuniform lowp float outlineOpacity;\nvarying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform mediump vec2 layoutStart;\nuniform mediump vec2 layoutEnd;\nuniform lowp sampler2D samplerBack;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nuniform mediump float seconds;\nuniform mediump vec2 pixelSize;\nuniform mediump float layerScale;\nuniform mediump float layerAngle;\n#define PI 3.14159265359\n#define SAMPLES 96\n#define PASSES 64\nvoid main(void)\n{\nif (width <= 0.0 || outlineOpacity <= 0.0) {\ngl_FragColor = texture2D( samplerFront, vTex );\nreturn;\n}\nmediump float outlineAlpha = 0.0;\nmediump vec2 actualWidth;\nmediump float widthCopy = width;\nmediump vec4 color = vec4(outlinecolor.x, outlinecolor.y, outlinecolor.z, 1.0);\nmediump float angle;\nmediump vec2 layoutSize = abs(vec2(layoutEnd.x-layoutStart.x,(layoutEnd.y-layoutStart.y)));\nmediump vec2 texelSize = abs(srcOriginEnd-srcOriginStart)/layoutSize;\nmediump vec4 fragColor;\nmediump vec2 testPoint;\nmediump float sampledAlpha;\nint passes = int(clamp(width / precisionStep, 1.0, float(PASSES)));\nfor (int j=0; j<PASSES; j++) {\nif (j >= passes ) break;\nwidthCopy = mix(0.0, width, float(j)/float(passes));\nactualWidth = widthCopy * texelSize;\nangle = 0.0;\nfor( int i=0; i<SAMPLES; i++ ){\nif (i >= int(samples)) break;\nangle += 1.0/(clamp(samples, 0.0, float(SAMPLES))/2.0) * PI;\ntestPoint = vTex + actualWidth * vec2(cos(angle), sin(angle));\nsampledAlpha = texture2D( samplerFront,  testPoint ).a;\noutlineAlpha = max( outlineAlpha, sampledAlpha );\n}\n}\nfragColor = color * outlineAlpha * outlineOpacity;\nmediump vec4 tex0 = texture2D( samplerFront, vTex );\ngl_FragColor = fragColor * (1. - tex0.a) + tex0;\n}",nWt:"#version 300 es\nin mediump vec2 vTex;\nout lowp vec4 outColor;\n#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nprecision lowp float;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform mediump vec2 layoutStart;\nuniform mediump vec2 layoutEnd;\nuniform lowp sampler2D samplerBack;\nuniform lowp sampler2D samplerDepth;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nuniform highmedp float seconds;\nuniform mediump vec2 pixelSize;\nuniform mediump float layerScale;\nuniform mediump float layerAngle;\nuniform mediump float devicePixelRatio;\nuniform mediump float zNear;\nuniform mediump float zFar;\nuniform lowp vec3 outlinecolor;\nuniform lowp float width;\nuniform lowp float precisionStep;\nuniform lowp float samples;\nuniform lowp float outlineOpacity;\n#define PI 3.14159265359\n#define SAMPLES 96\n#define PASSES 64\nvoid main(void)\n{\nif (width <= 0.0 || outlineOpacity <= 0.0) {\noutColor = texture( samplerFront, vTex );\nreturn;\n}\nmediump float outlineAlpha = 0.0;\nmediump vec2 actualWidth;\nmediump float widthCopy = width;\nmediump vec4 color = vec4(outlinecolor.x, outlinecolor.y, outlinecolor.z, 1.0);\nmediump float angle;\nmediump vec2 layoutSize = abs(vec2(layoutEnd.x-layoutStart.x,(layoutEnd.y-layoutStart.y)));\nmediump vec2 texelSize = abs(srcOriginEnd-srcOriginStart)/layoutSize;\nmediump vec4 fragColor;\nmediump vec2 testPoint;\nmediump float sampledAlpha;\nint passes = int(clamp(width / precisionStep, 1.0, float(PASSES)));\nint sampleCount = int(clamp(samples, 0.0, float(SAMPLES)));\nfor (int j = 0; j <= passes; j++) {\nwidthCopy = mix(0.0, width, float(j)/float(passes));\nactualWidth = widthCopy * texelSize;\nangle = 0.0;\nfor( int i = 0; i < sampleCount; i++ ) {\nangle += 1.0/(float(sampleCount)/2.0) * PI;\ntestPoint = vTex + actualWidth * vec2(cos(angle), sin(angle));\nsampledAlpha = texture( samplerFront,  testPoint ).a;\noutlineAlpha = max( outlineAlpha, sampledAlpha );\n}\n}\nfragColor = color * outlineAlpha * outlineOpacity;\nmediump vec4 tex0 = texture( samplerFront, vTex );\noutColor = fragColor * (1. - tex0.a) + tex0;\n}",sWt:"%%FRAGMENTINPUT_STRUCT%%\n/* input struct contains the following fields:\nfragUV : vec2<f32>\nfragPos : vec4<f32>\nfn c3_getBackUV(fragPos : vec2<f32>, texBack : texture_2d<f32>) -> vec2<f32>\nfn c3_getDepthUV(fragPos : vec2<f32>, texDepth : texture_depth_2d) -> vec2<f32>\n*/\n%%FRAGMENTOUTPUT_STRUCT%%\n%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\noutlinecolor : vec3<f32>,\nwidth : f32,\nprecisionStep : f32,\nsamples : f32,\noutlineOpacity : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3PARAMS_STRUCT%%\n/* c3Params struct contains the following fields:\nsrcStart : vec2<f32>,\nsrcEnd : vec2<f32>,\nsrcOriginStart : vec2<f32>,\nsrcOriginEnd : vec2<f32>,\nlayoutStart : vec2<f32>,\nlayoutEnd : vec2<f32>,\ndestStart : vec2<f32>,\ndestEnd : vec2<f32>,\ndevicePixelRatio : f32,\nlayerScale : f32,\nlayerAngle : f32,\nseconds : f32,\nzNear : f32,\nzFar : f32,\nisSrcTexRotated : u32\nfn c3_srcToNorm(p : vec2<f32>) -> vec2<f32>\nfn c3_normToSrc(p : vec2<f32>) -> vec2<f32>\nfn c3_srcOriginToNorm(p : vec2<f32>) -> vec2<f32>\nfn c3_normToSrcOrigin(p : vec2<f32>) -> vec2<f32>\nfn c3_clampToSrc(p : vec2<f32>) -> vec2<f32>\nfn c3_clampToSrcOrigin(p : vec2<f32>) -> vec2<f32>\nfn c3_getLayoutPos(p : vec2<f32>) -> vec2<f32>\nfn c3_srcToDest(p : vec2<f32>) -> vec2<f32>\nfn c3_clampToDest(p : vec2<f32>) -> vec2<f32>\nfn c3_linearizeDepth(depthSample : f32) -> f32\n*/\n/*\nfn c3_premultiply(c : vec4<f32>) -> vec4<f32>\nfn c3_unpremultiply(c : vec4<f32>) -> vec4<f32>\nfn c3_grayscale(rgb : vec3<f32>) -> f32\nfn c3_getPixelSize(t : texture_2d<f32>) -> vec2<f32>\nfn c3_RGBtoHSL(color : vec3<f32>) -> vec3<f32>\nfn c3_HSLtoRGB(hsl : vec3<f32>) -> vec3<f32>\n*/\nconst PI:f32 = 3.14159265359;\nconst SAMPLES:i32 = 96;\nconst PASSES:i32 = 64;\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar output : FragmentOutput;\nif (shaderParams.width <= 0.0 || shaderParams.outlineOpacity <= 0.0) {\noutput.color = textureSample(textureFront, samplerFront, input.fragUV );\nreturn output;\n}\nvar outlineAlpha: f32 = 0.0;\nvar actualWidth: vec2<f32>;\nvar widthCopy: f32 = shaderParams.width;\nvar color: vec4<f32> = vec4<f32>(shaderParams.outlinecolor.x, shaderParams.outlinecolor.y, shaderParams.outlinecolor.z, 1.0);\nvar angle: f32;\nlet layoutSize: vec2<f32> = abs(vec2<f32>(c3Params.layoutEnd.x - c3Params.layoutStart.x, c3Params.layoutEnd.y - c3Params.layoutStart.y));\nlet texelSize: vec2<f32> = abs(c3Params.srcOriginEnd - c3Params.srcOriginStart) / layoutSize;\nvar fragColor: vec4<f32>;\nvar testPoint: vec2<f32>;\nvar sampledAlpha: f32;\nlet passes: u32 = u32(clamp(shaderParams.width / shaderParams.precisionStep, 1.0, f32(SAMPLES)));\nlet sampleCount: u32 = u32(clamp(shaderParams.samples, 0.0, f32(SAMPLES)));\nfor (var j: u32 = 0u; j <= passes; j = j + 1u) {\nwidthCopy = mix(0.0, shaderParams.width, f32(j) / f32(passes));\nactualWidth = widthCopy * texelSize;\nangle = 0.0;\nfor (var i: u32 = 0u; i < sampleCount; i = i + 1u) {\nangle = angle + 1.0 / (f32(sampleCount) / 2.0) * PI;\ntestPoint = input.fragUV + actualWidth * vec2<f32>(cos(angle), sin(angle));\nsampledAlpha = textureSample(textureFront, samplerFront, testPoint).a; // Assuming 'samplerFrontSampler' is the sampler associated with 'samplerFront'\noutlineAlpha = max(outlineAlpha, sampledAlpha);\n}\n}\nfragColor = color * outlineAlpha * shaderParams.outlineOpacity;\nvar tex0 : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV );\noutput.color = fragColor * (1. - tex0.a) + tex0;\nreturn output;\n}",cM:!1,dM:!1,Zb:50,tM:50,iM:!0,nM:!0,hM:!1,aM:!1,animated:!1,parameters:[["outlinecolor",0,"color"],["width",0,"float"],["precisionStep",0,"float"],["samples",0,"float"],["outlineOpacity",0,"percent"]]};{let WT=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const t=""+i,s=""+e;return t<s?-1:t>s?1:0}};ForEachOrdered_SortInstances=WT;const jT=self._s;let VT=null,UT="",HT="",zT=[],JT="",qT="",YT="";const XT=jT.Hn(jT.jmt);jT.i$.s$=class extends jT.K_t{constructor(t){super(t),this.Lmt=this.Bc.aN().eX(),this.Cpt=this.Bc.aN().bN(),this.$Jt=0,this.WJt=0,this.jJt=new Map}zn(){super.zn()}VB(){this.Bc.VB()}qU(t){this.Bc.qU(t,null,null)}VJt(t,s){return VT&&t===UT&&s===HT||(VT=new RegExp(t,s),UT=t,HT=s),VT.lastIndex=0,VT}UJt(t,s,i){if(t===JT&&s===qT&&i===YT)return zT;const e=this.VJt(s,i);return zT=t.match(e),JT=t,qT=s,YT=i,zT}async HJt(t,s){if(!s.length)return;this.$Jt+=s.length;const i=[];for(const e of s)i.push(t.y5(e));await jT.jh(i,()=>{this.WJt++}),this.WJt++,this.WJt===this.$Jt&&(this.WJt=0,this.$Jt=0,this.Bc.qU(jT.i$.s$.t$.zJt,null,null))}AZ(){return 0===this.$Jt?1:this.WJt/this.$Jt}JJt(t,s){for(const i of s)0===i.oj()&&t.b5(i)}qJt(){return XT}YJt(t){const s=this.Bc.aN(),i=s.bN(),e=i.sX(),n=e.pN(),r=n.tX(),h=e.Cmt(),o=i.iX(n),a=s.eX(),l=a.iX();if(l.$mt(t),h)for(let i=0;i<t&&!l.fX();++i)s.oX(r),l.uX(i),n.aX(e,o),s.lX(r);else for(let s=0;s<t&&!l.fX();++s)l.uX(s),n.aX(e,o);return i.dX(),a.dX(),!1}*XJt(t){const s=this.Bc.aN(),i=s.bN(),e=i.sX(),n=e.pN(),r=n.tX(),h=e.Cmt(),o=i.iX(n),a=s.eX(),l=a.iX();if(l.$mt(t),h)for(let i=0;i<t&&!l.fX();++i)s.oX(r),l.uX(i),yield*n.rbt(e,o),s.lX(r);else for(let s=0;s<t&&!l.fX();++s)l.uX(s),yield*n.rbt(e,o);return i.dX(),a.dX(),!1}KJt(){const t=this.Bc.aN(),s=t.bN(),i=s.sX(),e=i.pN(),n=e.tX(),r=i.Cmt(),h=s.iX(e),o=t.eX(),a=o.iX();if(r)for(let s=0;!a.fX();++s)t.oX(n),a.uX(s),e.aX(i,h)||a.nq(),t.lX(n);else for(let t=0;!a.fX();++t)a.uX(t),e.aX(i,h)||a.nq();return s.dX(),o.dX(),!1}*ZJt(){const t=this.Bc.aN(),s=t.bN(),i=s.sX(),e=i.pN(),n=e.tX(),r=i.Cmt(),h=s.iX(e),o=t.eX(),a=o.iX();if(r)for(let s=0;!a.fX();++s)t.oX(n),a.uX(s),(yield*e.rbt(i,h))||a.nq(),t.lX(n);else for(let t=0;!a.fX();++t)a.uX(t),(yield*e.rbt(i,h))||a.nq();return s.dX(),o.dX(),!1}QJt(t,s,i){const e=this.Bc.aN(),n=e.bN(),r=n.sX(),h=r.pN(),o=h.tX(),a=r.Cmt(),l=n.iX(h),u=e.eX(),c=u.iX();if(c.nX(t),c.$mt(i),i<s)if(a)for(let t=s;t>=i&&!c.fX();--t)e.oX(o),c.uX(t),h.aX(r,l),e.lX(o);else for(let t=s;t>=i&&!c.fX();--t)c.uX(t),h.aX(r,l);else if(a)for(let t=s;t<=i&&!c.fX();++t)e.oX(o),c.uX(t),h.aX(r,l),e.lX(o);else for(let t=s;t<=i&&!c.fX();++t)c.uX(t),h.aX(r,l);return n.dX(),u.dX(),!1}*tqt(t,s,i){const e=this.Bc.aN(),n=e.bN(),r=n.sX(),h=r.pN(),o=h.tX(),a=r.Cmt(),l=n.iX(h),u=e.eX(),c=u.iX();if(c.nX(t),c.$mt(i),i<s)if(a)for(let t=s;t>=i&&!c.fX();--t)e.oX(o),c.uX(t),yield*h.rbt(r,l),e.lX(o);else for(let t=s;t>=i&&!c.fX();--t)c.uX(t),yield*h.rbt(r,l);else if(a)for(let t=s;t<=i&&!c.fX();++t)e.oX(o),c.uX(t),yield*h.rbt(r,l),e.lX(o);else for(let t=s;t<=i&&!c.fX();++t)c.uX(t),yield*h.rbt(r,l);return n.dX(),u.dX(),!1}sqt(t){const s=t.nj(),i=s.ej();if(0===i.length)return!1;const e=this.Bc.aN(),n=e.bN(),r=n.sX(),h=r.pN(),o=h.tX(),a=r.Cmt(),l=n.iX(h),u=e.eX(),c=u.iX(),f=t.CU(),d=XT.iX();if(jT.xh(d,i),c.$mt(d.length),a)for(let s=0,i=d.length;s<i&&!c.fX();++s){e.oX(o);const i=d[s];t.nj().Lpt(i),f&&i.SSt(),c.uX(s),h.aX(r,l),e.lX(o)}else{s.Dpt(!1);const t=s.Fpt();jT.bh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.fX();++s){const i=d[s];t[0]=i,f&&i.SSt(),c.uX(s),h.aX(r,l)}}return n.dX(),u.dX(),jT.bh(d),XT.dX(),!1}*iqt(t){const s=t.nj(),i=s.ej();if(0===i.length)return!1;const e=this.Bc.aN(),n=e.bN(),r=n.sX(),h=r.pN(),o=h.tX(),a=r.Cmt(),l=n.iX(h),u=e.eX(),c=u.iX(),f=t.CU(),d=XT.iX();if(jT.xh(d,i),c.$mt(d.length),a)for(let s=0,i=d.length;s<i&&!c.fX();++s){e.oX(o);const i=d[s];t.nj().Lpt(i),f&&i.SSt(),c.uX(s),yield*h.rbt(r,l),e.lX(o)}else{s.Dpt(!1);const t=s.Fpt();jT.bh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.fX();++s){const i=d[s];t[0]=i,f&&i.SSt(),c.uX(s),yield*h.rbt(r,l)}}return n.dX(),u.dX(),jT.bh(d),XT.dX(),!1}eqt(t,s){const i=t.nj(),e=i.ej();if(0===e.length)return!1;const n=this.Bc.aN(),r=n.bN(),h=n.Fgt(),o=r.sX(),a=o.pN(),l=a.tX(),u=o.Cmt(),c=r.iX(a),f=n.eX(),d=f.iX(),p=t.CU(),m=XT.iX();jT.bh(m),d.$mt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.vTt(1,t)]);if(m.sort(WT),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.fX();++s){n.oX(l);const i=m[s][0];t.nj().Lpt(i),p&&i.SSt(),d.uX(s),a.aX(o,c),n.lX(l)}else{i.Dpt(!1);const t=i.Fpt();jT.bh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.fX();++s){const i=m[s][0];t[0]=i,p&&i.SSt(),d.uX(s),a.aX(o,c)}}return r.dX(),f.dX(),jT.bh(m),XT.dX(),!1}*nqt(t,s){const i=t.nj(),e=i.ej();if(0===e.length)return!1;const n=this.Bc.aN(),r=n.bN(),h=n.Fgt(),o=r.sX(),a=o.pN(),l=a.tX(),u=o.Cmt(),c=r.iX(a),f=n.eX(),d=f.iX(),p=t.CU(),m=XT.iX();jT.bh(m),d.$mt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.vTt(1,t)]);if(m.sort(WT),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.fX();++s){n.oX(l);const i=m[s][0];t.nj().Lpt(i),p&&i.SSt(),d.uX(s),yield*a.rbt(o,c),n.lX(l)}else{i.Dpt(!1);const t=i.Fpt();jT.bh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.fX();++s){const i=m[s][0];t[0]=i,p&&i.SSt(),d.uX(s),yield*a.rbt(o,c)}}return r.dX(),f.dX(),jT.bh(m),XT.dX(),!1}rqt(t,s){let i=this.jJt.get(t);return i||(s?(i={hqt:null,oqt:new Map},this.jJt.set(t,i),i):null)}aqt(t,s,i,e,n){s.fN().bbt(i,s.yN()),e&&t.lX(n)}*lqt(t,s,i,e,n){yield*s.fN().Mbt(i,s.yN()),e&&t.lX(n)}}}{const KT=self._s;KT.i$.s$.dEt=class extends KT.Vn{constructor(t){super(),this.mpt=t,this.Bc=t.l$(),this.kGt=t.zW()}vGt(){}zn(){this.mpt=null,this.Bc=null,this.kGt=null}}}{const ZT=self._s;ZT.i$.s$.Instance=class extends ZT.Vn{constructor(t,s){super(),this.di=t,this.mpt=this.di.fU(),this.jGt=this.mpt.KTt(),this.Bc=this.di.l$()}zn(){this.di=null,this.mpt=null,this.jGt=null,this.Bc=null}}}{const QT=self._s,tx=[];QT.i$.s$.t$={uqt:()=>!0,J5:()=>!0,s8:()=>!0,qHt:()=>!0,YHt:()=>!0,PN(){return this.Bc.PN()},evt(){const t=this.Bc.Dgt();return!t.wmt()&&!t.gmt()},cqt(){const t=this.Bc.Fgt().oTt();let s=t.get("TriggerOnce_lastTick");void 0===s&&(s=-1,t.set("TriggerOnce_lastTick",-1));const i=this.Bc.LN();return t.set("TriggerOnce_lastTick",i),this.Bc.Nzt()||s!==i-1},fqt(t){const s=this.Bc.Fgt().oTt(),i=s.get("Every_lastTime")||0,e=this.Bc.FN();s.has("Every_seconds")||s.set("Every_seconds",t);const n=s.get("Every_seconds");return e>=i+n?(s.set("Every_lastTime",i+n),e>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",e),s.set("Every_seconds",t),!0):(e<i-.1&&s.set("Every_lastTime",e),!1)},Swt(t){const s=this.Bc.aN().syt(t);return s&&s.Swt()},wjt(){return this.Bc.wjt()},oi:()=>QT.Zs.oi,GHt:()=>!0,QB:()=>!0,dqt:()=>!0,Kzt:()=>!0,iJt:()=>!0,Qzt:()=>!0,tJt:()=>!0,pqt(t){return!!this.Bc.AB(t)},mqt(t){switch(t){case 0:return"browser"===QT.Zs.ri;case 1:return"iOS"===QT.Zs.Qs;case 2:return"Android"===QT.Zs.Qs;case 8:return"cordova"===QT.Zs.ri;case 9:return"scirra-arcade"===this.Bc.z$();case 10:return"nwjs"===QT.Zs.ri;case 13:return"windows-uwp"===this.Bc.z$();default:return!1}},gqt(t,s,i){return this.VJt(s,i).test(t)},yqt:(t,s,i)=>QT.compare(t,s,i),wqt:(t,s,i)=>t>=s&&t<=i,Sqt:(t,s,i)=>QT.compare(t.Gnt(),s,i),vqt:t=>!!t.Gnt(),bqt(t,s){const i=this.Bc.FN();if(0===t){const t=this.Bc.Fgt().oTt();return!t.get("CompareTime_executed")&&i>=s&&(t.set("CompareTime_executed",!0),!0)}return QT.compare(i,t,s)},Mqt:t=>isNaN(t),S_t:(t,s,i)=>QT.hr(QT.Qn(t),QT.Qn(i))<=QT.Qn(s),v_t:(t,s)=>QT.lr(QT.Qn(t),QT.Qn(s)),Pxt(t,s,i){let e=QT.Qn(t),n=QT.Qn(s),r=QT.Qn(i);return QT.lr(r,n)?QT.lr(e,n)&&!QT.lr(e,r):!(!QT.lr(e,n)&&QT.lr(e,r))},Cqt:(t,s)=>"number"==typeof t?0===s:1===s,Tqt:t=>!!t,Kyt(t){return t.toLowerCase()===this.Bc.aN().swt()},xqt(t,s,i,e){if(!t)return!1;const n=this.qJt(),r=n.iX(),h=t.nj();QT.xh(r,h.ej()),h._pt()&&QT.bh(h.kpt());const o=this.Bc.Fgt();let a=0;for(let t=0,n=r.length;t<n;++t){const n=r[t];r[a]=n,s=o.vTt(1,t),e=o.vTt(3,t),QT.compare(s,i,e)?++a:h.Opt(n)}QT.Sh(r,a),h.Npt(r);const l=!!r.length;return QT.bh(r),n.dX(),t.pbt(),l},Iqt(t,s){if(!t)return!1;const i=this.qJt(),e=i.iX(),n=t.nj();QT.xh(e,n.ej()),n._pt()&&QT.bh(n.kpt());const r=this.Bc.Fgt();let h=0;for(let t=0,s=e.length;t<s;++t){const s=e[t];e[h]=s,r.vTt(1,t)?++h:n.Opt(s)}QT.Sh(e,h),n.Npt(e);const o=!!e.length;return QT.bh(e),i.dX(),t.pbt(),o},_qt(t,s,i){if(!t)return!1;const e=t.nj(),n=e.ej();if(0===n.length)return!1;const r=this.Bc.Fgt();let h=null,o=0;for(let t=0,e=n.length;t<e;++t){const e=n[t];i=r.vTt(2,t),(null===h||0===s&&i<o||1===s&&i>o)&&(o=i,h=e)}return e.Vpt(h),t.pbt(),!0},Gqt(t,s){if(!t)return!1;const i=t.nj(),e=i.ej();if((s=Math.floor(s))>=e.length)return!1;const n=e[s];return i.Vpt(n),t.pbt(),!0},Pqt(t){if(!t)return!1;const s=t.nj(),i=s.ej(),e=Math.floor(this.Bc.uB()*i.length);if(e>=i.length)return!1;const n=i[e];return s.Vpt(n),t.pbt(),!0},Aqt:t=>!!t&&(!!t.oj()&&(t.nj().Dpt(!0),t.pbt(),!0)),Rqt(t,s,i){if(!t)return!1;const e=t.nj(),n=e.ej(),r=this.Bc.pN().Upt(),h=this.Bc.Fgt().iTt();e._pt()?(QT.xh(tx,n),e.Ipt(),e.Dpt(!1)):r?(QT.xh(tx,e.kpt()),QT.bh(e.kpt())):(QT.xh(tx,e.Fpt()),QT.bh(e.Fpt()));for(let t=0,n=tx.length;t<n;++t){const n=tx[t];QT.xor(n.kB().nz(s,i),h)?e.Ept(n):e.Opt(n)}return t.pbt(),QT.xor(!!e.Fpt().length,h)},Eqt(t){if(!t)return!1;const s=t.v1();let i=null;const e=this.Bc.iOt();for(let n=e.length-1;n>=0;--n){const r=e[n];if(s){if(r.fU().nxt(t)){i=r;break}}else if(r.fU()===t){i=r;break}}if(!i){const s=t.ej();s.length&&(i=s.at(-1))}return!!i&&(t.nj().Vpt(i),t.pbt(),!0)},Oqt(t){return this.Bc.eIt()?this.XJt(t):this.YJt(t)},Dqt(){return this.Bc.eIt()?this.ZJt():this.KJt()},Fqt(t,s,i){return this.Bc.eIt()?this.tqt(t,s,i):this.QJt(t,s,i)},Ud(t){return this.Bc.eIt()?this.iqt(t):this.sqt(t)},kqt(t,s,i){return this.Bc.eIt()?this.nqt(t,i):this.eqt(t,i)},Lqt:t=>!!t&&t.vV(),Nqt:t=>!!t&&t.GV(),Bqt:t=>!!t&&t.xV(),$qt:t=>!!t&&!t.oj(),Wqt:(t,s,i)=>!!t&&QT.compare(100*t.SO(),s,i),jqt(t){const s=this.Bc.cB();return!!s&&s.i5(t)},zJt:()=>!0,Vqt(){return this.$Jt>0},Uqt(t,s){const i=this.Bc.cDt();return!!i&&!!s&&!!i.wct(t,s)}}}{let sx=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]},ix=function(t,s){return t[1]-s[1]};SortZOrderList=sx,SortInstancesByValue=ix;const ex=self._s,nx=[],rx=[],hx=ex.Hn(ex.Rect),ox=ex.Hn(ex.To),ax=[];ex.i$.s$.wht={Hqt(t,s){t.urt(s)},zqt(t,s){t.Qi()&&"number"!=typeof s&&(s=parseFloat(s)),t.urt(t.Gnt()+s)},Jqt(t,s){t.Qi()&&t.urt(t.Gnt()-s)},qqt(t,s){t.urt(!!s)},Yqt(t){t.urt(!t.Gnt())},Xqt(t){t.urt(t.Ogt())},Kqt(t){this.Bc.aN().Qgt(t)},Zqt(t,s,i,e,n,r){if(!t||!s)return;const h=this.Bc.lj(t,s,i,e,n,r);if(!h)return;n&&s.uj(h);const o=this.Bc.aN();o.cj(!0),h.fj(),o.cj(!1);const a=new Map;h.iDt(a,t,n);for(const[t,s]of a)t.nj().Bpt(s)},Qqt(t,s,i,e,n,r){if(!t||!s)return;const h=this.Bc.OHt(t);h&&ex.i$.s$.wht.Zqt.call(this,h,s,i,e,n,r)},w1(t,s,i,e,n,r,h,o,a,l,u){if(!t)return;const c=this.Bc.OB();let f=c;if(r){const t=this.Bc.pB().P8(r);if(!t)return;f=t}let d=null;if(("number"!=typeof h||h>=0)&&(d=f.LB(h),!d))return;let p=null;if(("number"!=typeof o||o>=0)&&(p=c.LB(o),!p))return;hx.set(s,i,e,n);const m=f.w1(t,hx,d,p,a,l,u);t.nj().Npt(m),t.pbt()},tYt(){const t=this.Lmt;t.Omt()&&t.Rmt().nq()},vwt(t,s){const i=this.Bc.aN().syt(t);i&&(0===s?i.vwt(!1):1===s?i.vwt(!0):i.vwt(!i.Swt()))},sYt(t){this.Bc.jN(t)},iYt(t,s){if(s<0&&(s=0),!t)return;const i=t.nj().ej();for(const t of i)t.jN(s)},eYt(t){if(!t)return;const s=t.nj().ej();for(const t of s)t.EU()},ph(t,s){if(t<0)return;const i=this.Bc.aN().Fyt();return s?i.j_t(t):i.V_t(t),!0},IN(t){return this.Bc.aN().Fyt().U_t(t),!0},nYt(){const t=this.Bc.aN();return t.Fyt().H_t(t.Xyt()),!0},TN(t){this.Bc.aN().TN(t)},async KB(t,s,i,e,n,r){const h=this.Bc.IB();h&&(this.VB(),await h.KB(0===t?"image/png":"image/jpeg",s/100,i,e,n,r),await this.Bc.ZB(ex.i$.s$.t$.QB,null))},rYt(t,s){if(t<=0||s<=0)return;this.Bc.bWt(t,s),this.Bc.OB().q3();const i=this.Bc.IB();i&&("off"===i.pWt()||this.Bc.FHt(t,s),i.$A(i.rY(),i.hY(),!0),this.Bc.VB())},hYt(t){const s=this.Bc.IB();s&&"off"!==s.pWt()&&(s.GWt(0!==t?"high":"low"),s.$A(s.rY(),s.hY(),!0))},zet(t){this.Bc.jzt(t)},oYt(){this.Bc.Vzt()},aYt(t){this.Bc.Uzt(t)},lYt(t){this.Bc.KIt(t)},uYt(t){},cYt(){for(const t of this.Bc.pB().yB())t.u8()},fYt(t){this.Bc.Bzt(0!==t)},dYt(t,s){this.Bc.rB(1/t),this.Bc.iB(1/s)},pYt(t,s){this.Bc.iB(t),this.Bc.rB(s)},mYt(t){this.Bc.QN(["vsync","unlimited-tick","unlimited-frame"][t])},gYt(t,s){if(!t)return;const i=t.nj().ej(),e=nx,n=rx,r=this.Bc.OB(),h=t.v1(),o=t.LMt();for(let t=0,r=i.length;t<r;++t){const r=i[t],a=r.kB();if(!a)continue;let l;l=h?r.uot(s+r.fU().kMt(o)):r.uot(s),e.push([a.LB().CL(),a.NB()]),n.push([r,l])}if(!e.length)return;e.sort(sx),n.sort(ix);let a=!1;for(let t=0,s=e.length;t<s;++t){const s=n[t][0],i=r.BB(e[t][0]),h=e[t][1],o=i.$B();o[h]!==s&&(o[h]=s,s.kB().WB(i,!0),i.jB(s),a=!0)}a&&this.Bc.VB(),ex.bh(nx),ex.bh(rx)},F$(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Bc.RL().F$(t,s)},yYt(t){if(this.Bc.xw())return;const s=this.Bc.pB();s.SB()||s.vB(t)},wYt(t){if(this.Bc.xw())return;const s=this.Bc.pB();if(s.SB())return;const i=s.P8(t);i&&s.vB(i)},SYt(t){if(this.Bc.xw())return;const s=this.Bc.pB();if(s.SB())return;const i=s.yB(),e=i.indexOf(s.cB());if(t&&0===e)return;if(!t&&e===i.length-1)return;const n=i[e+(t?-1:1)];s.vB(n)},vYt(){if(this.Bc.xw())return;const t=this.Bc.pB();t.SB()||(t.vB(t.cB()),this.Bc.aN().ryt())},bYt(t,s){t&&t.wV(s)},MYt(t,s){t&&t.CV(s)},CYt(t,s){t&&t.IV(s)},TYt(t,s){t&&t.bO(s/100)},xYt(t,s){t&&t.PV(s)},IYt(t,s){t&&t.EV(s)},_Yt(t,s){t&&t.Oj(ex.Qn(+s))},GYt(t,s,i){t&&(t.ZV(!0),t.Fj(s),t.Lj(i))},PYt(t){t&&t.ZV(!1)},AYt(t,s,i){t&&t.t2(s/100,i/100)},RYt(t,s){t&&t.sC(+s)},EYt(t,s){t&&t.jV(1===s)},OYt(t,s){if(!t)return;ox.ta(s),ox.Kn();const i=t.KV();i.zo(ox)||(i.Lo(ox),this.VB())},DYt(t,s){t&&t.HV(s)},FYt(t,s){t&&t.NM(s)},kYt(t,s,i){if(!t)return;const e=t._j().krt(i);if(!e)return;const n=1===s;e.uSt()!==n&&(e.ULt(n),t.vJ(),this.Bc.VB())},LYt(t,s,i,e){if(!t)return;const n=t._j(),r=n.krt(s);if(!r)return;i=Math.floor(i);const h=r.zI().qI(i);h&&("color"===h?(ox.ta(e),e=ox):"percent"===h&&(e/=100),n.MJ(r.CL(),i,e)&&r.uSt()&&this.Bc.VB())},NYt(t,s){t&&t.qV(s)},BYt(t){this.Bc.OB().Rj(+t)},$Yt(t){this.Bc.OB().Oj(ex.Qn(+t))},WYt(t,s){const i=this.Bc.OB(),e=i._j().krt(s);if(!e)return;const n=1===t;e.uSt()!==n&&(e.ULt(n),i.vJ(),this.Bc.VB())},jYt(t,s,i){const e=this.Bc.OB()._j(),n=e.krt(t);if(!n)return;s=Math.floor(s);const r=n.zI().qI(s);r&&("color"===r?(ox.ta(i),i=ox):"percent"===r&&(i/=100),e.MJ(n.CL(),s,i)&&n.uSt()&&this.Bc.VB())},VYt(t,s){this.Bc.OB().nV(t/100,s/100)},UYt(t){const s=this.Bc.OB();0===t?s.oV():s.aV()},HYt(t){this.Bc.OB().Fj(t)},zYt(t){this.Bc.OB().Lj(t)},JYt(t,s){const i=this.Bc.OB();i.Fj(t),i.Lj(s)},qYt(t){if(!t)return;const s=t.Hxt();if(!s)return;const i=s.kB();if(!i)return;const e=this.Bc.OB();e.Fj(i.YM()),e.Lj(i.ZM())},Xj(t,s,i){const e=this.Bc.OB();try{e.Xj(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},Zj(t,s,i){if(!t)return;const e=this.Bc.OB();try{e.Zj(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},tV(t){t&&this.Bc.OB().tV(t)},iV(){this.Bc.OB().iV()},async YYt(t){const s=this.Bc.cB();if(!s||!t||this.Bc.xw())return;const i=t.v1()?t.Cj():[t];await this.HJt(s,i)},async XYt(t){await ex.i$.s$.wht.YYt.call(this,this.Bc.OHt(t))},KYt(t){const s=this.Bc.cB();if(!s||!t)return;const i=t.v1()?t.Cj():[t];this.JJt(s,i)},ZYt(t){ex.i$.s$.wht.KYt.call(this,this.Bc.OHt(t))},QYt(){const t=this.Bc.cB();if(!t)return;const s=t.p5();this.JJt(t,s)},async tXt(t){const s=this.Bc.cB();t&&s&&!this.Bc.xw()&&await this.HJt(s,t.c5())},async sXt(t){const s=this.Bc.cB(),i=this.Bc.pB().P8(t);i&&s&&!this.Bc.xw()&&await this.HJt(s,i.c5())},CN(t){const s=this.Cpt.vN();if(s)switch(s.MN()){case 1:"number"==typeof t&&s.CN(t);break;case 2:"string"==typeof t&&s.CN(t);break;case 3:s.CN(t)}},iXt(t,s,i){const e=this.rqt(t.toLowerCase(),!0),n=e.oqt,r=s.toLowerCase();n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`);const h=ex.$h(n.values())||e.hqt;h&&0!==h.wN()!=(0!==i.wN())?console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`):n.set(r,i)},eXt(t,s){const i=this.rqt(t.toLowerCase(),!0);i.hqt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const e=ex.$h(i.oqt.values())||i.hqt;e&&0!==e.wN()!=(0!==s.wN())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):i.hqt=s},nXt(t,s,i){const e=this.Bc,n=e.eIt()?ax:null;i=Math.floor(i);const r=this.rqt(t.toLowerCase(),!1);if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r.oqt.get(s.toLowerCase());if(!h){if(!r.hqt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.hqt,i=0}if(!h._u())return n;if(0!==h.wN())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=e.aN(),a=o.pN(),l=a.dN(),u=l.length>0;u&&(h.yN()?o.oX(l):o.Oyt(l));const c=[],f=o.Iwt(a);if(f){const t=f.Gwt();for(let s=i,e=t.length;s<e;++s)c.push(t[s].Gnt())}const d=h.Gwt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].Ogt());return e.eIt()?this.lqt(o,h,c,u,l):this.aqt(o,h,c,u,l)}}}{const lx=self._s;lx.i$.s$.Sht={rXt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},P:t=>t.toString(),Lt:t=>"string"==typeof t?t.length:0,random(t,s){return void 0===s?this.Bc.uB()*t:this.Bc.uB()*(s-t)+t},bMt(...t){return t[Math.floor(this.Bc.uB()*t.length)]},hXt:(t,...s)=>("number"!=typeof t&&(t=0),s[t=lx.Kn(Math.floor(t),0,s.length-1)]),oXt:()=>Math.PI,aXt:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),lXt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(lx.Qn(t)),cos:t=>Math.cos(lx.Qn(t)),tan:t=>Math.tan(lx.Qn(t)),asin:t=>lx.tr(Math.asin(t)),acos:t=>lx.tr(Math.acos(t)),atan:t=>lx.tr(Math.atan(t)),exp:t=>Math.exp(t),Vt:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s<e&&(s=e)}return s},min(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s>e&&(s=e)}return s},Kn:(t,s,i)=>lx.Kn(t,s,i),bt:(t,s,i,e)=>lx.er(t,s,i,e),angle:(t,s,i,e)=>lx.tr(lx.rr(t,s,i,e)),_t:(t,s,i)=>lx._t(t,s,i),mr:(t,s,i)=>lx.mr(t,s,i),yr:(t,s,i,e)=>lx.yr(t,s,i,e),wr:(t,s,i,e,n)=>lx.wr(t,s,i,e,n),Sr:(t,s,i)=>lx.Sr(t,s,i),uXt:(t,s)=>lx.tr(lx.hr(lx.Qn(t),lx.Qn(s))),cXt:(t,s,i)=>lx.tr(lx.ur(lx.Qn(t),lx.Qn(s),i)),fXt:(t,s,i)=>lx.tr(lx.ar(lx.Qn(t),lx.Qn(s),lx.Qn(i))),dXt:(t,s,i)=>(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s,pXt:(t,s)=>(t|=0)^1<<s,mXt:(t,s)=>(t|=0)&1<<(s|=0)?1:0,gXt:()=>"\n",yXt:t=>"string"==typeof t?t.toUpperCase():"",wXt:t=>"string"==typeof t?t.toLowerCase():"",left:(t,s)=>"string"==typeof t?t.substr(0,s):"",mid:(t,s,i)=>"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i),right:(t,s)=>"string"==typeof t?t.substr(Math.max(t.length-s,0)):"",trim:t=>"string"==typeof t?t.trim():"",SXt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},vXt:(t,s)=>"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0,find:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(lx.Ki(s),"i")):-1,bXt:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(lx.Ki(s),"")):-1,replace:(t,s,i)=>"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(lx.Ki(s),"gi"),i):"string"==typeof t?t:"",MXt(t,...s){let i=t;for(let t=0,e=s.length;t<e;++t)i=i.replaceAll(`{${t}}`,s[t].toString());return i},CXt(t,s,i){const e=this.VJt(s,i);return t?t.search(e):-1},TXt(t,s,i,e){const n=this.VJt(s,i);return t?t.replace(n,e):""},xXt(t,s,i){const e=this.UJt(t.toString(),s,i);return e?e.length:0},IXt(t,s,i,e){e=Math.floor(e);const n=this.UJt(t.toString(),s,i);return!n||e<0||e>=n.length?"":n[e]},_Xt(t,s){let i=t<0?"-":"";t<0&&(t=-t);const e=s-t.toString().length;return i+="0".repeat(Math.max(e,0)),i+t.toString()},GXt:t=>encodeURIComponent(t),PXt:t=>decodeURIComponent(t),AN(){return this.Bc.l7()},AXt(){return this.Bc.u7()},RXt(){return this.Bc.WN()},EXt(){return(Date.now()-this.Bc.Pzt())/1e3},OXt:()=>Date.now(),time(){return this.Bc.FN()},DXt(){return this.Bc.LN()},FXt(){return this.Bc.Ezt()},VN(){return this.Bc.UN()},kXt(){return this.Bc.qN()},LXt(){return this.Bc.XN()},NXt(){return this.Bc.IB().oW()},BXt(){return this.Bc.IB().lW()},$Xt(){return this.Bc.qL()},WXt(){return this.Bc.XL()},jXt(){return this.Bc.qL()},VXt(){return this.Bc.XL()},UXt(){return this.Bc.OB().kj()},HXt(){return this.Bc.OB().Nj()},zXt(){return this.Bc.OB().Ac()},JXt(){return this.Bc.OB().Ej()},qXt(){return lx.tr(this.Bc.OB().Dj())},YXt(){return this.Bc.OB().Vg()},XXt(){return this.Bc.OB().Qg()},KXt(){return 100*this.Bc.OB().X4()},ZXt(){return 100*this.Bc.OB().K4()},QXt(t){const s=this.Bc.OB().LB(t);return s?s.J1().Qa():0},tKt(t){const s=this.Bc.OB().LB(t);return s?s.J1().tl():0},sKt(t){const s=this.Bc.OB().LB(t);return s?s.J1().sl():0},iKt(t){const s=this.Bc.OB().LB(t);return s?s.J1().il():0},eKt(t){const s=this.Bc.OB().LB(t);return s?s.J1().width():0},nKt(t){const s=this.Bc.OB().LB(t);return s?s.J1().height():0},rKt(t){const s=this.Bc.OB().LB(t);if(s){const t=s.J1();return(t.Qa()+t.sl())/2}return 0},hKt(t){const s=this.Bc.OB().LB(t);if(s){const t=s.J1();return(t.tl()+t.il())/2}return 0},oKt(t,s,i){const e=this.Bc.OB().LB(t);return e?e.iU(s,i)[0]:0},aKt(t,s,i){const e=this.Bc.OB().LB(t);return e?e.iU(s,i)[1]:0},lKt(t,s,i){const e=this.Bc.OB().LB(t);return e?e.nU(s,i)[0]:0},uKt(t,s,i){const e=this.Bc.OB().LB(t);return e?e.nU(s,i)[1]:0},cKt(t,s,i,e){const n=this.Bc.OB(),r=n.LB(t),h=n.LB(s);if(!r||!h||r===h)return i;const[o,a]=r.nU(i,e);return h.iU(o,a)[0]},fKt(t,s,i,e){const n=this.Bc.OB(),r=n.LB(t),h=n.LB(s);if(!r||!h||r===h)return e;const[o,a]=r.nU(i,e);return h.iU(o,a)[1]},dKt(t){const s=this.Bc.OB().LB(t);return s?s.AV():0},pKt(t){const s=this.Bc.OB().LB(t);return s?lx.tr(s.DV()):0},mKt(t){const s=this.Bc.OB().LB(t);return s?100*s.SO():0},gKt(t){const s=this.Bc.OB().LB(t);return s?s.OV():0},yKt(t){const s=this.Bc.OB().LB(t);return s?s.kj():0},wKt(t){const s=this.Bc.OB().LB(t);return s?s.Nj():0},SKt(t){const s=this.Bc.OB().LB(t);return s?100*s.LV():0},vKt(t){const s=this.Bc.OB().LB(t);return s?100*s.$V():0},bKt(t){const s=this.Bc.OB().LB(t);return s?s.tC():0},MKt(t){const s=this.Bc.OB().LB(t);return s?s.CL():-1},CKt(){const t=this.Bc.IB();return t?t.QWt():""},TKt(t){const s=this.Lmt;if(!s.Omt())return 0;if(t){const i=s.Fmt(t);return i?i.CL():0}return s.Rmt().CL()},xKt(){return this.Bc.Hzt()},IKt(t,s,...i){const e=this.rqt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=e.oqt.get(s.toLowerCase());if(!n){if(!e.hqt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=e.hqt}const r=n.wN(),h=n.uN();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n._u())return h;const o=this.Bc.aN(),a=o.pN().dN(),l=a.length>0;l&&(n.yN()?o.oX(a):o.Oyt(a));const u=n.Gwt();for(let t=i.length,s=u.length;t<s;++t)i.push(u[t].Ogt());const c=n.fN(),f=c.gN(c.dN(),n.yN(),r,h,...i);return l&&o.lX(a),f},_Kt(){return this.Bc.GL().oB()},GKt(){return this.AZ()},J_(){return this.Bc.FWt()?"webgpu":"webgl"},PKt(){return this.Bc.FWt()?this.Bc.FWt().kWt():this.Bc.DWt().PD()},AKt(){let t=this.Bc.gM().Hb();return Math.round(100*t/1048576)/100},RKt:(t,s,i)=>lx._r(t,s,i),EKt:(t,s,i)=>lx.Pr(t/100,s/100,i/100),OKt:(t,s,i,e)=>lx.Gr(t/100,s/100,i/100,e/100),DKt:(t,s,i)=>lx.Pr(t/255,s/255,i/255),FKt:(t,s,i,e)=>lx.Gr(t/255,s/255,i/255,e/255),kKt(){return this.Bc.FL()},LKt(){return this.Bc.LL()},NKt(){return this.Bc.BL()},BKt(){return this.Bc.WL()},$Kt(){return this.Bc.pN().t5().Ac()},WKt(){return this.Bc.pN().Tvt()}}}{const ux=self._s;ux.i$.jKt=class extends ux.K_t{constructor(t){super(t)}zn(){super.zn()}}}{const cx=self._s;cx.i$.jKt.dEt=class extends cx.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{const fx=self._s;fx.i$.jKt.Instance=class extends fx.$Gt{constructor(t,s){if(super(t),this.VKt="",this.UKt=0,this.HKt="",this.zKt=0,this.Lf=-1,this.JKt=new Map,this.qKt=null,this.YKt="",this.XKt=!1,this.KKt=null,this.ZKt=null,this.QKt=null,this.Ajt=this.Bc.J$(),this.Ajt){this.KKt=__require("fs"),this.ZKt=__require("path");const t=self.process||nw.process;this.QKt=this.ZKt.dirname(t.execPath)+"\\"}}zn(){super.zn()}async tZt(t,s,i){console.error(`[Construct] AJAX request to '${s}' (tag '${t}') failed: `,i),this.HKt=t,await this.ZB(fx.i$.jKt.t$.sZt),this.HKt=t,await this.ZB(fx.i$.jKt.t$.iZt)}async eZt(t){this.HKt=t,await this.ZB(fx.i$.jKt.t$.nZt),this.HKt=t,await this.ZB(fx.i$.jKt.t$.rZt)}async hZt(t,s){s.lengthComputable&&(this.zKt=s.loaded/s.total,this.HKt=t,await this.ZB(fx.i$.jKt.t$.oZt))}async aZt(t,s){s.lengthComputable&&(this.zKt=s.loaded/s.total,this.HKt=t,await this.ZB(fx.i$.jKt.t$.lZt))}uZt(t,s,i){if(!this.Ajt)return void this.tZt(t,s,i);const e=this.KKt,n=this.QKt+s;e.existsSync(n)?e.readFile(n,{encoding:"utf8"},(i,e)=>{i?this.tZt(t,s,i):(this.VKt=e.replace(/\r\n/g,"\n"),this.eZt(t))}):this.tZt(t,s,i)}async cZt(t,s){const i=this.Bc.GL(),e=this.qKt;this.qKt=null;try{if(e){const n=await i.lZ(s);e.fZt(n),this.VKt="",this.UKt=0,this.eZt(t)}else{const e=await i.uZ(s);this.VKt=e.replace(/\r\n/g,"\n"),this.UKt=0,this.eZt(t)}}catch(i){this.tZt(t,s,i)}}dZt(t,s,i,e){return new Promise(n=>{const r=i=>{this.uZt(t,s,i),n()},h=this.qKt;this.qKt=null;try{const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4===o.readyState){if(this.VKt=h?"":(o.responseText||"").replace(/\r\n/g,"\n"),this.UKt=o.status,o.status>=400)this.tZt(t,s,o.status+o.statusText);else{const s=this.VKt.length||h&&o.response instanceof ArrayBuffer;this.Ajt&&!s||!this.Ajt&&0===o.status&&!s||(h&&h.fZt(o.response),this.eZt(t))}n()}},o.onerror=r,o.ontimeout=r,o.onabort=r,o.onprogress=s=>this.hZt(t,s),o.upload.onprogress=s=>this.aZt(t,s),o.open(i,s),this.Lf>=0&&void 0!==o.timeout&&(o.timeout=this.Lf),o.responseType=h?"arraybuffer":"text",e&&!this.JKt.has("Content-Type")&&("string"!=typeof e?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));for(const[t,s]of this.JKt)try{o.setRequestHeader(t,s)}catch(i){console.error(`[Construct] AJAX: Failed to set header '${t}: ${s}': `,i)}if(this.JKt.clear(),this.YKt){try{o.overrideMimeType(this.YKt)}catch(t){console.error("[Construct] AJAX: failed to override MIME type: ",t)}this.YKt=""}this.XKt&&(o.withCredentials=!0,this.XKt=!1),e?o.send(e):o.send()}catch(t){r(t)}})}lPt(){const t="plugins.ajax.debugger";return[{title:t+".title",properties:[{name:t+".last-status-code",value:this.UKt},{name:t+".last-data",value:this.VKt}]}]}aC(){return{lastData:this.VKt,lastStatusCode:this.UKt}}lC(t){this.VKt=t.lastData,this.UKt=t.hasOwnProperty("lastStatusCode")?t.lastStatusCode:0,this.HKt="",this.zKt=0}}}{const dx=self._s;dx.i$.jKt.t$={rZt(t){return dx.Ze(this.HKt,t)},nZt:()=>!0,iZt(t){return dx.Ze(this.HKt,t)},sZt:()=>!0,oZt(t){return dx.Ze(this.HKt,t)},lZt(t){return dx.Ze(this.HKt,t)}}}{const px=self._s;px.i$.jKt.wht={async Request(t,s){this.Bc.vjt()&&px.Zh(s)&&this.Bc.GL().oZ()?await this.cZt(t,s):await this.dZt(t,s,"GET",null)},async pZt(t,s){this.Bc.vjt()&&this.Bc.GL().oZ()?await this.cZt(t,s):await this.dZt(t,s,"GET",null)},async mZt(t,s,i,e){await this.dZt(t,s,e,i)},async gZt(t,s,i,e){if(!i)return;const n=i.Hxt(this.di);if(!n)return;const r=n.iJ().yZt();await this.dZt(t,s,e,r)},wZt(t){this.Lf=1e3*t},SZt(t,s){this.JKt.set(t,s)},vZt(t){if(!t)return;const s=t.Hxt(this.di);s&&(this.qKt=s.iJ())},bZt(t){this.YKt=t},MZt(t){this.XKt=!!t}}}self._s.i$.jKt.Sht={CZt(){return this.VKt},TZt(){return this.UKt},xZt(){return this.zKt},Tag(){return this.HKt}};{const mx=self._s;mx.i$.si=class extends mx.K_t{constructor(t){super(t)}zn(){super.zn()}}}{const gx=self._s;gx.i$.si.dEt=class extends gx.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{const yx=self._s,wx="browser";yx.i$.si.Instance=class extends yx.$Gt{constructor(t,s){super(t,wx),this.IZt="",this._Zt=!1,this.GZt="",this.PZt="",this.AZt=!1,this.RZt=0,this.EZt=0,this.OZt=0,this.DZt=0,this.FZt=!1,this.kZt=!1,this.LZt=new Map,this.NZt=!1,this.BZt="",this.$Zt=!1,this.KGt([["online-state",t=>this.WZt(t)],["backbutton",()=>this.jZt()],["sw-message",t=>this.VZt(t)],["hashchange",t=>this.UZt(t)],["install-available",()=>this.HZt()],["app-installed",t=>this.zZt(t)]]);const i=this.l$().Sf();this.Kf=new yx.qf(yx.jf.Jf(i,"afterfirstlayoutstart",()=>this.JZt()),yx.jf.Jf(i,"window-resize",()=>this.k$t()),yx.jf.Jf(i,"window-focus",()=>this.UUt()),yx.jf.Jf(i,"window-blur",()=>this.VUt()),yx.jf.Jf(i,"suspend",()=>this.qZt()),yx.jf.Jf(i,"resume",()=>this.YZt())),this.Bc.YB(this.QGt("get-initial-state",{exportType:this.Bc.z$()}).then(t=>{this.IZt=t.location,this._Zt=t.isOnline,this.GZt=t.referrer,this.PZt=t.title,this.AZt=t.isCookieEnabled,this.RZt=t.screenWidth,this.EZt=t.screenHeight,this.OZt=t.windowOuterWidth,this.DZt=t.windowOuterHeight,this.FZt=t.windowHasFocus,this.kZt=t.isConstructArcade}))}zn(){super.zn()}JZt(){this.ZGt("ready-for-sw-messages")}async WZt(t){const s=!!t.isOnline;this._Zt!==s&&(this._Zt=s,this._Zt?await this.ZB(yx.i$.si.t$.XZt):await this.ZB(yx.i$.si.t$.KZt))}async k$t(){await this.ZB(yx.i$.si.t$.ZZt)}async UUt(){this.FZt=!0,await this.ZB(yx.i$.si.t$.QZt)}async VUt(){this.FZt=!1,await this.ZB(yx.i$.si.t$.tQt)}qZt(){this.qU(yx.i$.si.t$.sQt)}YZt(){this.qU(yx.i$.si.t$.iQt)}async jZt(){await this.ZB(yx.i$.si.t$.eQt)}VZt(t){const s=t.type;"downloading-update"===s?this.qU(yx.i$.si.t$.nQt):"update-ready"===s||"update-pending"===s?this.qU(yx.i$.si.t$.rQt):"offline-ready"===s&&this.qU(yx.i$.si.t$.hQt)}UZt(t){this.IZt=t.location,this.qU(yx.i$.si.t$.oQt)}HZt(){this.NZt=!0,this.qU(yx.i$.si.t$.aQt)}zZt(t){this.NZt=!1,this.qU(yx.i$.si.t$.lQt)}uQt(){return this.$Zt}cQt(t){t=!!t,this.$Zt!==t&&(this.$Zt=t,this.ZGt("set-warn-on-close",{enabled:t}))}lPt(){const t="plugins.browser.debugger";return[{title:"plugins.browser.name",properties:[{name:t+".user-agent",value:navigator.userAgent},{name:t+".is-online",value:this._Zt},{name:t+".is-fullscreen",value:this.Bc.IB().MWt()}]}]}}}{const Sx=self._s;Sx.i$.si.t$={fQt(){return this._Zt},XZt:()=>!0,KZt:()=>!0,ZZt:()=>!0,QZt:()=>!0,tQt:()=>!0,dQt(){return this.FZt},pQt(){return this.AZt},mQt(){return this.Bc.IB().MWt()},eQt:()=>!0,gQt(t){return(this.Bc.IB().rY()<=this.Bc.IB().hY()?0:1)===t},nQt:()=>!0,rQt:()=>!0,hQt:()=>!0,oQt:()=>!0,aQt:()=>!0,yQt(){return this.NZt},wQt(t){switch(t){case 0:return"accepted"===this.BZt;case 1:return"dismissed"===this.BZt;case 2:return"error"===this.BZt;case 3:return!0;default:return!1}},lQt:()=>!0,SQt(t){const s=this.Bc.IB().TWt();switch(t){case 0:return"browser"===s;case 1:return"minimal-ui"===s;case 2:return"standalone"===s;case 3:return"fullscreen"===s;default:return!1}},vQt(){return this.uQt()},bQt(){return!this.Bc.PN()},sQt:()=>!0,iQt:()=>!0,MQt:()=>!1,CQt:()=>!1,TQt:()=>!1,xQt:()=>!1,IQt:()=>!1,_Qt:()=>!0,GQt:()=>!0}}{const C3=self._s,ORIENTATIONS=["portrait","landscape","portrait-primary","portrait-secondary","landscape-primary","landscape-secondary"];C3.i$.si.wht={PQt(t){this.ZGt("alert",{message:t.toString()})},AQt(){this.kZt||(this.Bc.iH()?self.eH.RQt():this.ZGt("close"))},EQt(){this.ZGt("set-focus",{isFocus:!0})},OQt(){this.ZGt("set-focus",{isFocus:!1})},DQt(){this.kZt||this.ZGt("navigate",{type:"back"})},FQt(){this.kZt||this.ZGt("navigate",{type:"forward"})},kQt(){},LQt(){this.kZt||(this.Bc.iH()?this.Bc.tHt({type:"reload"}):this.ZGt("navigate",{type:"reload"}))},NQt(t,s){this.tPt("navigate",{type:"url",url:t,target:s,exportType:this.Bc.z$()})},BQt(t,s){this.tPt("navigate",{type:"new-window",url:t,tag:s,exportType:this.Bc.z$()})},$Qt(t,s){t>=2&&(t+=1),6===t&&(t=2),1===t&&(t=0);const i=C3.gBt.AWt(t);this.Bc.IB().IWt(i),this.tPt("request-fullscreen",{navUI:s})},WQt(){this.tPt("exit-fullscreen")},jQt(t){const s=t.split(",");for(let t=0,i=s.length;t<i;++t)s[t]=parseInt(s[t],10);this.tPt("vibrate",{pattern:s})},async GB(t,s){if(!t||!s)return;const i=await this.Bc.GL().m$(t);this.Bc.GB(i,s)},VQt(t,s,i){if(!i)return;const e=`data:${s},${encodeURIComponent(t)}`;this.Bc.GB(e,i)},UQt(t,s){s=s.toString(),0===t?console.log(s):1===t?console.warn(s):2===t&&console.error(s)},HQt(t){console.group(t)},zQt(){console.groupEnd()},JQt(jsStr){try{eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}},qQt(t){if((t=Math.floor(t))<0||t>=ORIENTATIONS.length)return;const s=ORIENTATIONS[t];this.tPt("lock-orientation",{orientation:s})},YQt(){this.tPt("unlock-orientation")},_$(t){this.Bc.GL()._$(t)},async XQt(t,s,i,e){await this.QGt("set-document-css-style",{prop:C3.bo(t),value:s,selector:i,"is-all":0!==e})},async KQt(t,s,i){const e=await this.QGt("get-document-css-style",{prop:t,selector:s});e.isOk&&this.LZt.set(i.toLowerCase(),e.result.trim())},ZQt(t){this.ZGt("set-hash",{hash:t})},QQt(t,s){this.ZGt("set-window-size",{windowWidth:t,windowHeight:s})},t0t(t,s){this.ZGt("set-window-position",{windowX:t,windowY:s})},async s0t(){const t=await this.QGt("request-install");this.BZt=t.result,this.qU(C3.i$.si.t$.wQt)},i0t(t){this.cQt(t)}}}{const C3=self._s;C3.i$.si.Sht={URL(){return this.Bc.zL()?this.IZt:location.toString()},e0t(){return this.Bc.zL()?new URL(this.IZt).protocol:location.protocol},n0t(){return this.Bc.zL()?new URL(this.IZt).hostname:location.hostname},Port(){return this.Bc.zL()?new URL(this.IZt).port:location.port},r0t(){return this.Bc.zL()?new URL(this.IZt).pathname:location.pathname},h0t(){return this.Bc.zL()?new URL(this.IZt).hash:location.hash},Ys(){return this.Bc.zL()?new URL(this.IZt).search:location.search},o0t(t){const s=this.Bc.zL()?new URL(this.IZt).search:location.search,i=RegExp("[?&]"+t+"=([^&]*)").exec(s);return i?decodeURIComponent(i[1].replace(/\+/g," ")):""},a0t(){return this.GZt},l0t(){return this.PZt},u0t:()=>navigator.language,Zs:()=>navigator.platform,c0t:()=>navigator.userAgent,f0t(jsStr){let result=0;try{result=eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}return"number"==typeof result||"string"==typeof result?result:"boolean"==typeof result&&result?1:0},CSSStyleValue(t){return this.LZt.get(t)||""},d0t:()=>navigator.appName,p0t:()=>navigator.appVersion,m0t:()=>navigator.product,g0t:()=>navigator.vendor,y0t:()=>1,w0t:()=>1/0,S0t(){const t=navigator.connection;return t&&(t.downlink||t.downlinkMax||t.bandwidth)||1/0},ConnectionType(){const t=navigator.connection;return t&&t.type||"unknown"},v0t:()=>self.devicePixelRatio,b0t(){return this.RZt},M0t(){return this.EZt},C0t(){return this.Bc.IB().rY()},T0t(){return this.Bc.IB().hY()},x0t(){return this.OZt},I0t(){return this.OZt},_0t(){return this.Bc.IB().TWt()},G0t(){return this.BZt}}}{const vx=self._s;vx.i$.P0t=class extends vx.K_t{constructor(t){super(t)}zn(){super.zn()}}}{const bx=self._s;bx.i$.P0t.dEt=class extends bx.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{const Mx=self._s,Cx="nwjs",Tx=new Map([["EACCES","access denied"],["EEXIST","file exists"],["EISDIR","is a directory"],["EMFILE","too many open files"],["ENOENT","no such file or directory"],["ENOTDIR","not a directory"],["ENOTEMPTY","directory not empty"],["EPERM","operation not permitted"]]),xx="unknown error";Mx.i$.P0t.Instance=class extends Mx.$Gt{constructor(t,s){super(t,Cx),this.Ajt=this.Bc.J$(),this.A0t=null,this.R0t=null,this.E0t=null,this.O0t=null,this.D0t=null,this.F0t="",this.k0t="",this.L0t="",this.N0t="",this.B0t="",this.$0t="\\",this.W0t=[],this.j0t="",this.V0t="",this.U0t=[],this.H0t="",this.z0t="",this.J0t=0,this.q0t=0,this.Y0t=0,this.X0t=0,this.Ajt&&this.K0t()}K0t(){this.A0t=__require("path"),this.R0t=__require("fs"),this.E0t=__require("child_process"),this.O0t=self.process||nw.process,this.D0t=__require("os"),"win32"!==this.O0t.platform&&(this.$0t="/"),this.L0t=this.A0t.dirname(this.O0t.execPath)+this.$0t,this.N0t=this.D0t.homedir()+this.$0t,this.B0t=this.O0t.mainModule.filename;const t=Math.max(this.B0t.lastIndexOf("/"),this.B0t.lastIndexOf("\\"));-1!==t&&(this.B0t=this.B0t.substr(0,t+1)),this.KGt([["drop",t=>this.Z0t(t)],["open-dlg",t=>this.Q0t(t)],["open-dlg-cancel",()=>this.t1t()],["folder-dlg",t=>this.s1t(t)],["folder-dlg-cancel",()=>this.i1t()],["save-dlg",t=>this.e1t(t)],["save-dlg-cancel",()=>this.n1t()],["window-change",t=>this.r1t(t)],["clipboard-change",t=>this.h1t(t)]]),this.Bc.YB(this.QGt("init").then(t=>{this.r1t(t),this.h1t(t),this.U0t=t.argv}))}zn(){super.zn()}r1t(t){this.z0t=t["window-title"],this.J0t=t["window-x"],this.q0t=t["window-y"],this.Y0t=t["window-width"],this.X0t=t["window-height"]}h1t(t){this.H0t=t["clipboard-text"]}o1t(t){const s=t.buffer,i=t.byteLength,e=t.byteOffset;return s.byteLength!==t.length?s.slice(e,e+i):s}a1t(t){if(!t)return null;const s=t.Hxt(this.di);return s?s.iJ():null}l1t(t){return new Promise((s,i)=>{this.R0t.readFile(t,{},(t,e)=>{t?i(t):s(this.o1t(e))})})}u1t(t,s){Mx.An(s,ArrayBuffer);const i=new Uint8Array(s);return new Promise((s,e)=>{this.R0t.writeFile(t,i,{},t=>{t?e(t):s()})})}c1t(t){return t&&"string"==typeof t.code?Tx.get(t.code)||t.code:xx}f1t(t){this.k0t=this.c1t(t),this.qU(Mx.i$.P0t.t$.d1t),this.k0t=""}async Z0t(t){const s=t.filePaths;for(const t of s)this.j0t=t,await this.ZB(Mx.i$.P0t.t$.p1t);this.j0t=""}async Q0t(t){this.V0t=t.chosenPath,await this.ZB(Mx.i$.P0t.t$.m1t)}async t1t(){await this.ZB(Mx.i$.P0t.t$.g1t)}async s1t(t){this.V0t=t.chosenPath,await this.ZB(Mx.i$.P0t.t$.y1t)}async i1t(){await this.ZB(Mx.i$.P0t.t$.w1t)}async e1t(t){this.V0t=t.chosenPath,await this.ZB(Mx.i$.P0t.t$.S1t)}async n1t(){await this.ZB(Mx.i$.P0t.t$.v1t)}lPt(){const t="plugins.nodewebkit";return[{title:t+".name",properties:[{name:t+".debugger.app-folder",value:this.L0t},{name:t+".debugger.user-folder",value:this.N0t},{name:t+".debugger.project-files-folder",value:this.B0t}]}]}}}self._s.i$.P0t.t$={b1t(t){return!!this.Ajt&&this.R0t.existsSync(t)},M1t(t){return this.F0t===t},C1t(t){return this.F0t===t},T1t:()=>!0,x1t:()=>!0,d1t:()=>!0,p1t:()=>!0,m1t:()=>!0,y1t:()=>!0,S1t:()=>!0,g1t:()=>!0,w1t:()=>!0,v1t:()=>!0};{let Ix=function(t,s,i){if("function"==typeof t.copyfileSync)t.copyfileSync(s,i);else{const e=t.readFileSync(s,{flags:"rb"});t.writeFileSync(i,e,{flags:"wb"})}};CopyBinaryFileSync=Ix;const _x=self._s;_x.i$.P0t.wht={I1t(t,s){if(this.Ajt)try{this.R0t.writeFileSync(t,s,{encoding:"utf8"})}catch(s){console.error(`Error writing text file '${t}': `,s),this.f1t(s)}},async _1t(t,s,i){const e=this.a1t(i);if(this.Ajt&&e)try{const i=await this.l1t(s);e.fZt(i),this.F0t=t,await this.ZB(_x.i$.P0t.t$.T1t),this.F0t=t,await this.ZB(_x.i$.P0t.t$.M1t),this.F0t=""}catch(t){console.error(`Error reading binary file '${s}': `,t),this.f1t(t)}},async G1t(t,s,i){const e=this.a1t(i);if(this.Ajt&&e)try{const i=e.yZt();await this.u1t(s,i),this.F0t=t,await this.ZB(_x.i$.P0t.t$.x1t),this.F0t=t,await this.ZB(_x.i$.P0t.t$.C1t),this.F0t=""}catch(t){console.error(`Error writing binary file '${s}': `,t),this.f1t(t)}},P1t(t,s){if(this.Ajt)try{this.R0t.renameSync(t,s)}catch(s){console.error(`Error renaming file '${t}': `,s),this.f1t(s)}},A1t(t){if(this.Ajt)try{this.R0t.unlinkSync(t)}catch(s){"ENOENT"!==s.code&&(console.error(`Error deleting file '${t}': `,s),this.f1t(s))}},R1t(t,s){if(this.Ajt)try{Ix(this.R0t,t,s)}catch(s){console.error(`Error copying file '${t}': `,s),this.f1t(s)}},E1t(t,s){if(this.Ajt&&t!==s)try{Ix(this.R0t,t,s),this.R0t.existsSync(s)&&this.R0t.unlinkSync(t)}catch(s){console.error(`Error moving file '${t}': `,s),this.f1t(s)}},O1t(t){this.Ajt&&this.E0t.exec(t,()=>{})},D1t(t){this.Ajt&&this.ZGt("shell-cmd",{method:"openItem",arg:t})},F1t(t){this.Ajt&&this.ZGt("shell-cmd",{method:"openExternal",arg:t})},k1t(t){if(this.Ajt)try{this.R0t.mkdirSync(t)}catch(s){console.error(`Error creating folder '${t}': `,s),this.f1t(s)}},L1t(t,s){if(this.Ajt)try{this.R0t.appendFileSync(t,s,{encoding:"utf8"})}catch(s){console.error(`Error appending to file '${t}': `,s),this.f1t(s)}},N1t(t){if(this.Ajt)try{this.W0t=this.R0t.readdirSync(t)}catch(s){this.W0t=[],console.error(`Error listing files at '${t}': `,s),this.f1t(s)}},B1t(t){this.Ajt&&this.ZGt("show-open-dlg",{accept:t})},$1t(){this.Ajt&&this.ZGt("show-folder-dlg")},W1t(t){this.Ajt&&this.ZGt("show-save-dlg",{accept:t})},j1t(t){this.Ajt&&this.ZGt("set-window-x",{x:t})},V1t(t){this.Ajt&&this.ZGt("set-window-y",{y:t})},U1t(t){this.Ajt&&this.ZGt("set-window-width",{width:t})},H1t(t){this.Ajt&&this.ZGt("set-window-height",{height:t})},z1t(t){this.Ajt&&(this.z0t=t,this.ZGt("set-title",{title:t}))},J1t(){this.Ajt&&this.ZGt("window-cmd",{method:"minimize"})},q1t(){this.Ajt&&this.ZGt("window-cmd",{method:"maximize"})},Y1t(){this.Ajt&&this.ZGt("window-cmd",{method:"unmaximize"})},X1t(){this.Ajt&&this.ZGt("window-cmd",{method:"restore"})},K1t(t){this.Ajt&&this.ZGt("window-attention",{request:t?3:0})},Z1t(t,s){this.Ajt&&this.ZGt("set-window-max-size",{width:t,height:s})},Q1t(t,s){this.Ajt&&this.ZGt("set-window-min-size",{width:t,height:s})},t2t(t){this.Ajt&&this.ZGt("set-window-resizable",{resizable:0!==t})},s2t(t){this.Ajt&&this.ZGt("set-window-always-top",{top:0!==t})},i2t(){this.Ajt&&this.ZGt("window-cmd",{method:"showDevTools"})},e2t(t){this.Ajt&&(this.H0t=t,this.ZGt("set-clipboard",{text:t}))},n2t(){this.Ajt&&(this.H0t="",this.ZGt("clear-clipboard"))}}}self._s.i$.P0t.Sht={r2t(){return this.L0t},h2t(){return"file://"+this.L0t},o2t(){return this.B0t},a2t(){return"file://"+this.B0t},l2t(){return this.N0t},u2t(t){if(!this.Ajt)return"";let s="";try{s=this.R0t.readFileSync(t,{encoding:"utf8"})}catch(s){console.error(`Failed to read file '${t}': `,s),this.f1t(s)}return s},c2t(t){if(!this.Ajt)return 0;let s=0;try{const i=this.R0t.statSync(t);i&&(s=i.size||0)}catch(s){console.error(`Failed to read file '${t}' size: `,s),this.f1t(s)}return s},f2t(){return this.W0t.length},d2t(t){return(t=Math.floor(t))<0||t>=this.W0t.length?"":this.W0t[t]},p2t(){return this.j0t},m2t(){return this.V0t},g2t(){return this.J0t},y2t(){return this.q0t},w2t(){return this.Y0t},S2t(){return this.X0t},v2t(){return this.z0t},b2t(){return this.Ajt?this.U0t.length:0},M2t(t){if(!this.Ajt)return"";t=Math.floor(t);const s=this.U0t;return t<0||t>=s.length?"":s[t]},FileError(){return this.k0t},C2t(){return this.F0t},T2t(){return this.Ajt?this.H0t:""}};{const Gx=self._s;Gx.i$.x2t=class extends Gx.K_t{constructor(t){super(t)}zn(){super.zn()}}}{const Px=self._s;Px.i$.x2t.dEt=class extends Px.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{const Ax=self._s,Rx="localstorage";Ax.i$.x2t.Instance=class extends Ax.$Gt{constructor(t,s){super(t,Rx),this.I2t="",this.N_="",this._2t=[],this.G2t="",this.P2t=!1,this.A2t=0,this.R2t=0,this.E2t=!1,s&&(this.E2t=s[0]);const i=this.Bc.fW();this.cW=null,this.E2t?this.cW=i.Ii({_i:!0}):this.cW=i,this.O2t=new Map,this.D2t=!1,this.Bc.YB(this.qM())}async qM(){const t=await Promise.race([this.QGt("init"),Ax.ph(3e3)]);t&&(this.P2t=t.isPersistent)}zn(){super.zn()}async F2t(t){this.G2t=this.k2t(t),await this.ZB(Ax.i$.x2t.t$.iZt)}k2t(t){return t?"string"==typeof t?t:"string"==typeof t.message?t.message:"string"==typeof t.name?t.name:"string"==typeof t.data?t.data:"unknown error":"unknown error"}lPt(){return this.D2t||this.L2t(),[{title:"plugins.localstorage.name",properties:[...this.O2t.entries()].map(t=>({name:"$"+t[0],value:t[1],N2t:s=>this.cW.setItem(t[0],s)}))}]}async L2t(){this.D2t=!0;try{const t=await this.cW.keys();t.sort((t,s)=>{const i=t.toLowerCase(),e=s.toLowerCase();return i<e?-1:e<i?1:0});const s=await Promise.all(t.map(t=>this.cW.getItem(t)));this.O2t.clear();for(let i=0,e=t.length;i<e;++i)this.O2t.set(t[i],s[i])}catch(t){console.warn("[C3 debugger] Error displaying local storage: ",t)}finally{this.D2t=!1}}}}{const Ex=self._s;Ex.i$.x2t.t$={B2t(t){return this.I2t===t},$2t:()=>!0,W2t(t){return this.I2t===t},j2t:()=>!0,V2t(t){return this.I2t===t},U2t:()=>!0,H2t:()=>!0,z2t:()=>!0,iZt:()=>!0,J2t(t){return this.I2t===t},q2t(t){return this.I2t===t},Y2t(t,s){return Ex.compare(this.I2t,t,s)},X2t(t,s){return Ex.compare(this.N_,t,s)},K2t(){return this.R2t>0},Z2t(){return this.A2t>0},Q2t:()=>!0,t3t:()=>!0,s3t(){return this.P2t}}}{let Ox=function(t){return"string"==typeof t||"number"==typeof t};IsExpressionType=Ox;const Dx=self._s;Dx.i$.x2t.wht={async i3t(t,s){this.R2t++;try{const i=await this.cW.setItem(t,s);await this.YGt(async()=>{this.I2t=t,this.N_=i,await this.ZB(Dx.i$.x2t.t$.$2t),await this.ZB(Dx.i$.x2t.t$.B2t)})}catch(t){await this.F2t(t)}finally{this.R2t--,0===this.R2t&&await this.ZB(Dx.i$.x2t.t$.Q2t)}},async e3t(t,s){if(!s)return;const i=s.Hxt(this.di);if(!i)return;const e=i.iJ();if(!e)return;const n=e.yZt();this.R2t++;try{await this.cW.setItem(t,n),await this.YGt(async()=>{this.I2t=t,this.N_="",await this.ZB(Dx.i$.x2t.t$.$2t),await this.ZB(Dx.i$.x2t.t$.B2t)})}catch(t){await this.F2t(t)}finally{this.R2t--,0===this.R2t&&await this.ZB(Dx.i$.x2t.t$.Q2t)}},async n3t(t){this.A2t++;try{const s=await this.cW.getItem(t);await this.YGt(async()=>{this.I2t=t,this.N_=Ox(s)?s:"",await this.ZB(Dx.i$.x2t.t$.j2t),await this.ZB(Dx.i$.x2t.t$.W2t)})}catch(t){await this.F2t(t)}finally{this.A2t--,0===this.A2t&&await this.ZB(Dx.i$.x2t.t$.t3t)}},async r3t(t,s){if(!s)return;const i=s.Hxt(this.di);if(!i)return;const e=i.iJ();this.A2t++;try{let s=await this.cW.getItem(t);s=s instanceof ArrayBuffer?s:new ArrayBuffer(0),await this.YGt(async()=>{this.N_="",this.I2t=t,e.fZt(s),await this.ZB(Dx.i$.x2t.t$.j2t),await this.ZB(Dx.i$.x2t.t$.W2t)})}catch(t){await this.F2t(t)}finally{this.A2t--,0===this.A2t&&await this.ZB(Dx.i$.x2t.t$.t3t)}},async h3t(t){try{const s=await this.cW.getItem(t);await this.YGt(async()=>{this.I2t=t,null==s?(this.N_="",await this.ZB(Dx.i$.x2t.t$.q2t)):(this.N_=Ox(s)?s:"",await this.ZB(Dx.i$.x2t.t$.J2t))})}catch(t){await this.F2t(t)}},async Fc(t){try{await this.cW.removeItem(t),await this.YGt(async()=>{this.I2t=t,this.N_="",await this.ZB(Dx.i$.x2t.t$.U2t),await this.ZB(Dx.i$.x2t.t$.V2t)})}catch(t){await this.F2t(t)}},async o3t(){try{await this.cW.clear(),await this.YGt(async()=>{this.I2t="",this.N_="",Dx.bh(this._2t),await this.ZB(Dx.i$.x2t.t$.H2t)})}catch(t){await this.F2t(t)}},async a3t(){try{const t=await this.cW.keys();await this.YGt(async()=>{this._2t=t,await this.ZB(Dx.i$.x2t.t$.z2t)})}catch(t){await this.F2t(t)}},async l3t(){const t=await this.QGt("request-persistent");t.isOk&&(this.P2t=t.isPersistent)},u3t(t){if(!this.E2t)return;let s;try{s=JSON.parse(t)}catch(t){return void console.error("[Local Storage] Failed to parse memory storage JSON: ",t)}s&&s["is-c3-storage"]&&Array.isArray(s.items)||console.error("[Local Storage] Failed to load memory storage JSON: invalid data"),this.cW.xi(new Map(s.items))}}}self._s.i$.x2t.Sht={c3t(){return this.N_},f3t(){return this.I2t},d3t(){return this._2t.length},p3t(t){return(t=Math.floor(t))<0||t>=this._2t.length?"":this._2t[t]},m3t(){return this.G2t},g3t(){return this.E2t?JSON.stringify({"is-c3-storage":!0,items:[...this.cW.Ti()]}):""}};{const Fx=self._s;Fx.i$.y3t=class extends Fx.K_t{constructor(t){super(t)}zn(){super.zn()}}}{let kx=function(){return Bx.VW().iJ()};GetSdkInstance=kx;const Lx=self._s,Nx=self.Ns;Lx.i$.y3t.dEt=class extends Lx.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){}bGt(){return self.w3t}};let Bx=null;const $x=new Set(["all","unlocked","available"]);class Wx{constructor(){}addEventListener(t,s){Nx.ue(t),Nx.Ee(s),kx().S3t().addEventListener(t,s)}removeEventListener(t,s){Nx.ue(t),Nx.Ee(s),kx().S3t().removeEventListener(t,s)}async connect(t="wss://multiplayer.construct.net"){Nx.ue(t);const s=kx();return await s.v3t(t),{b3t:s.M3t(),C3t:s.T3t(),x3t:s.I3t(),_3t:s.G3t(),P3t:s.A3t()}}get isConnected(){return kx().R3t()}disconnect(){kx().E3t()}O3t(t,s,i){Nx.ue(t),Nx.ce(s),Nx.ce(i),kx().D3t(t,s,i)}async login(t){Nx.ue(t);const s=kx();return await s.F3t(t),{k3t:s.L3t()}}get N3t(){return kx().B3t()}async $3t(t,s,i,e=0){Nx.ue(t),Nx.ue(s),Nx.ue(i),Nx.he(e);const n=kx();return await n.W3t(t,s,i,e),{j3t:n.V3t(),U3t:n.H3t(),z3t:n.J3t()}}async q3t(t,s,i,e=2,n=!0){Nx.ue(t),Nx.ue(s),Nx.ue(i),Nx.he(e);const r=kx();return await r.Y3t(t,s,i,e,n),{j3t:r.V3t(),U3t:r.H3t(),z3t:r.J3t(),X3t:r.K3t()}}async Z3t(){await kx().Q3t()}async t4t(t){Nx.ue(t);const s=kx();return await s.s4t(t),s.i4t().map(t=>({name:t.name,e4t:t.peercount}))}async n4t(t,s,i="all"){if(Nx.ue(t),Nx.ue(s),!$x.has(i))throw new Error("invalid type");const e=kx();return await e.r4t(t,s,i),e.h4t().map(t=>({name:t.name,e4t:t.peercount,o4t:t.maxpeercount,state:t.state}))}}class jx{constructor(){}get a4t(){return kx().l4t()}get u4t(){return kx().c4t()}get f4t(){return kx().d4t()}get p4t(){return kx().m4t()}get g4t(){return kx().y4t()}get w4t(){return kx().S4t()}}const Vx=new Set(["o","r","u"]),Ux={tag:"",signal:null};self.w3t=class extends self.rj{constructor(t){super(t),Bx=t;const s={v4t:{value:new Wx,writable:!1},stats:{value:new jx,writable:!1}};Object.defineProperties(this,s)}get j3t(){return kx().V3t()}get k3t(){return kx().L3t()}get b3t(){return kx().M3t()}get z3t(){return kx().J3t()}get U3t(){return kx().H3t()}get b4t(){return kx().M4t()}get C4t(){return kx().T4t()}get x4t(){return kx().K3t()}get e4t(){return kx().I4t().length}_4t(){return kx().I4t().map(t=>t.HGt())}G4t(t){Nx.ue(t);const s=kx().P4t(t);return s?s.HGt():null}A4t(t,s,i="o"){if(Nx.ue(t),"string"!=typeof s&&"object"!=typeof s&&!(s instanceof ArrayBuffer))throw new TypeError("invalid message");if(!Vx.has(i))throw new Error("invalid transmission mode");kx().R4t(t,null,s,i,"s")}E4t(t,s,i="o"){if(Nx.ce(t),"string"!=typeof s&&"object"!=typeof s&&!(s instanceof ArrayBuffer))throw new TypeError("invalid message");if(!Vx.has(i))throw new Error("invalid transmission mode");kx().O4t(t,null,s,i,"s")}D4t(t,s,i){if(Nx.ue(t),!(s instanceof Blob||s instanceof ArrayBuffer))throw new TypeError("invalid data");return Nx.we(i),i=Object.assign({},Ux,i),kx().F4t(t,s,s.type,s.name,i,"s")}k4t(){kx().L4t()}N4t(t,s,i){kx().B4t(t,s,i)}}}{const Hx=self._s,zx="multiplayer";Hx.i$.y3t.Instance=class extends Hx.$Gt{constructor(t,s){super(t,zx),this.$4t=!1,this.G2t="",this.W4t="",this.j4t={protocolrev:0,version:0,name:"",operator:"",motd:""},this.V4t=!1,this.U4t=!1,this.H4t=[],this.z4t=[],this.J4t="",this.q4t="",this.Y4t=!1,this.X4t="",this.K4t="",this.Z4t="",this.Q4t="",this.t5t="",this.s5t=1,this.i5t=new Map,this.e5t=new Map,this.n5t=[],this.r5t=new Map,this.h5t=new Map,this.o5t=new Map,this.a5t=[],this.l5t=new Map,this.u5t=new Map,this.c5t="",this.f5t="",this.d5t="",this.Ew="",this.p5t="",this.m5t="",this.g5t="",this.y5t=!1,this.w5t=[],this.S5t=null,this.v5t=0,this.b5t=0,this.M5t=!1,this.C5t=0,this.T5t=new Map,this.x5t=-1,this.I5t="",this._5t="",this.G5t="",this.P5t=0,this.A5t=-1,this.R5t=null,this.E5t=0,this.O5t=0,this.D5t=0,this.F5t=0,this.k5t=Hx.Hn(Hx.Event.Sf),this.L5t=null,this.KGt([["signalling-error",t=>this.N5t(t)],["signalling-close",()=>this.B5t()],["signalling-welcome",t=>this.$5t(t)],["signalling-login-ok",t=>this.W5t(t)],["signalling-join-ok",t=>this.j5t(t)],["signalling-leave-ok",()=>this.V5t()],["signalling-kicked",()=>this.U5t()],["signalling-instance-list",t=>this.H5t(t)],["signalling-room-list",t=>this.z5t(t)],["peer-open",t=>this.J5t(t)],["peer-message",t=>this.q5t(t)],["peer-close",t=>this.Y5t(t)],["peer-kicked",()=>this.X5t()],["peer-binary-transfer-start",t=>this.K5t(t)],["peer-binary-transfer-progress",t=>this.Z5t(t)],["peer-binary-transfer-cancelled",t=>this.Q5t(t)],["peer-binary-transfer-complete",t=>this.t8t(t)],["add-peer",t=>this.s8t(t)],["remove-peer",t=>this.i8t(t)],["stats",t=>this.e8t(t)],["before-client-update",()=>this.n8t()],["instance-destroyed",t=>this.r8t(t)],["get-object-info",t=>this.h8t(t)]]),this.Bc.YB(this.o8t());const i=this.Bc.Sf();this.Kf=new Hx.qf(Hx.jf.Jf(i,"pretick",()=>this.a8t()),Hx.jf.Jf(i,"instancedestroy",t=>this.l8t(t.dJ)),Hx.jf.Jf(i,"suspend",()=>this.qZt()),Hx.jf.Jf(i,"resume",()=>this.YZt())),this.Bc.YB(this.QGt("get-supported").then(t=>{this.$4t=t.isSupported}))}async o8t(){const t=await this.Bc.GL().m$("waker.js");this.L5t=new Worker(t,{name:"MultiplayerHostWaker"}),this.L5t.addEventListener("message",t=>{"tick"===t.data&&this.Bc.PN()&&this.Bc.c7(performance.now(),!1,"background-wake")}),this.L5t.postMessage("")}zn(){super.zn()}qZt(){this.$4t&&this.u8t()&&this.L5t.postMessage("start")}YZt(){this.L5t.postMessage("stop")}u8t(){return this.c8t()&&this.J4t&&this.J4t===this.X4t}f8t(t,s,i){this.KTt().NGt(t,s,i)}d8t(t,s,i){const e=Hx.Hn(Hx.Event,t,s);i&&Object.assign(e,i),this.k5t.dispatchEvent(e)}S3t(){return this.k5t}async v3t(t){if(this.V4t)throw new Error("already connected");this.W4t=t,await this.QGt("signalling-connect",{url:t})}E3t(){this.V4t&&this.ZGt("signalling-disconnect")}D3t(t,s,i){const e={urls:t};s&&(e.username=s),i&&(e.credential=i),this.ZGt("add-ice-servers",{list:[e]})}async F3t(t){if(!this.V4t)throw new Error("not connected");if(this.U4t)throw new Error("already logged in");await this.QGt("signalling-login",{alias:t})}async W3t(t,s,i,e){if(!this.U4t)throw new Error("not logged in");if(this.c8t())throw new Error("already in room");await this.QGt("signalling-join-room",{game:t,instance:s,room:i,maxClients:e})}async Y3t(t,s,i,e,n){if(!this.U4t)throw new Error("not logged in");if(this.c8t())throw new Error("already in room");await this.QGt("signalling-auto-join-room",{game:t,instance:s,room:i,maxClients:e,lock:n})}async Q3t(){if(!this.c8t())throw new Error("not in room");await this.QGt("signalling-leave-room")}async s4t(t){if(!this.V4t)throw new Error("not connected");await this.QGt("signalling-list-game-instances",{game:t})}async r4t(t,s,i){if(!this.V4t)throw new Error("not connected");await this.QGt("signalling-list-rooms",{game:t,instance:s,which:i})}L4t(){this.ZGt("disconnect-room")}R4t(t,s,i,e,n){this.ZGt("peer-send-message",{id:t||this.X4t,tag:s,message:i,transmissionMode:e,contentMode:n})}O4t(t,s,i,e,n){if(!this.u8t())throw new Error("not host");this.ZGt("host-broadcast",{fromId:t||this.X4t,tag:s,message:i,transmissionMode:e,contentMode:n})}F4t(t,s,i,e,n,r){if(t===this.J4t)return Promise.reject(new Error("cannot transfer binary to self"));let h,o;if(s instanceof Blob?(h=s,o="blob",i||(i=s.type),e||(e=s.name||"")):(h=new Blob([s]),o="arraybuffer"),0===h.size)return Promise.reject("data is empty");const a=Math.floor(1e9*Math.random()),l=n.signal;if(l){if(l.aborted)throw new Error("already aborted");l.addEventListener("abort",()=>{this.ZGt("peer-cancel-binary-transfer",{id:t,transferId:a}),this.T5t.delete(a)})}const u=n.tag;return this.ZGt("peer-transfer-binary",{id:t,transferId:a,blob:h,dataType:o,mimeType:i||"",fileName:e||"",tag:u,contentMode:r}),new Promise((t,s)=>{this.T5t.set(a,{resolve:t,reject:s,tag:u})})}K5t(t){const s=t.id,i=t.alias,e=t.mimeType,n=t.fileName,r=t.totalSize,h=t.contentMode,o=t.tag;"e"===h?(this.c5t=s,this.f5t=i,this.Ew=o,this.x5t=0,this.I5t="receive",this._5t=n,this.G5t=e,this.P5t=r,this.qU(Hx.i$.y3t.t$.p8t),this.qU(Hx.i$.y3t.t$.m8t)):"s"===h&&this.f8t("binarytransferstart",!1,{g8t:s,y8t:i,direction:"receive",tag:o,mimeType:e,fileName:n,size:r})}Z5t(t){const s=t.id,i=t.alias,e=t.direction,n=t.contentMode,r=t.tag,h=t.progress;"e"===n?(this.c5t=s,this.f5t=i,this.Ew=r,this.x5t=1,this.I5t=e,this.A5t=h,this.qU(Hx.i$.y3t.t$.p8t),this.qU(Hx.i$.y3t.t$.m8t)):"s"===n&&this.f8t("binarytransferprogress",!1,{g8t:s,y8t:i,direction:e,tag:r,progress:h})}Q5t(t){const s=t.id,i=t.alias,e=t.direction,n=t.transferId,r=t.contentMode,h=t.tag;"e"===r?(this.c5t=s,this.f5t=i,this.Ew=h,this.x5t=2,this.I5t=e,this.qU(Hx.i$.y3t.t$.p8t),this.qU(Hx.i$.y3t.t$.m8t)):"s"===r&&this.f8t("binarytransfercancelled",!1,{g8t:s,y8t:i,direction:e,tag:h});const o=this.T5t.get(n);o&&(o.reject(),this.T5t.delete(n))}async t8t(t){const s=t.id,i=t.alias,e=t.direction,n=t.transferId,r=t.dataType,h=t.mimeType,o=t.fileName,a=t.contentMode,l=t.tag,u=t.blob;let c=u;!u||"arraybuffer"!==r&&"e"!==a||(c=await u.arrayBuffer()),"e"===a?(this.c5t=s,this.f5t=i,this.Ew=l,this.I5t=e,this._5t=o,this.G5t=h,"receive"===e?(this.R5t=c,this.qU(Hx.i$.y3t.t$.w8t),this.qU(Hx.i$.y3t.t$.S8t),this.R5t=null):(this.x5t=3,this.qU(Hx.i$.y3t.t$.p8t),this.qU(Hx.i$.y3t.t$.m8t))):"s"===a&&this.f8t("binarytransfercomplete",!1,{g8t:s,y8t:i,direction:e,tag:l,data:c,mimeType:h,fileName:o});const f=this.T5t.get(n);f&&(f.resolve(),this.T5t.delete(n))}v8t(t,s){this.ZGt("set-bandwidth-profile",{updateRate:t,delay:s})}B4t(t,s,i){this.ZGt("simulate-latency",{latency:1e3*t,pdv:1e3*s,loss:i})}b8t(t,s){if(!this.u8t())throw new Error("not host");if(t===this.J4t)throw new Error("cannot kick self");this.ZGt("kick-peer",{id:t,reason:s})}R3t(){return this.V4t}B3t(){return this.U4t}V3t(){return this.Y4t}M8t(){return this.W4t}T3t(){return this.j4t.version}I3t(){return this.j4t.name}G3t(){return this.j4t.operator}A3t(){return this.j4t.motd}M3t(){return this.J4t}L3t(){return this.q4t}H3t(){return this.X4t}J3t(){return this.K4t}M4t(){return this.Z4t}T4t(){return this.Q4t}K3t(){return this.t5t}c8t(){return!!this.t5t}C8t(){return this.G2t}l4t(){return this.S5t?this.S5t.outboundPerSec:0}c4t(){return this.S5t?this.S5t.outboundBandwidthPerSec:0}d4t(){return this.S5t?this.S5t.outboundDecompressedBandwidthPerSec:0}m4t(){return this.S5t?this.S5t.inboundPerSec:0}y4t(){return this.S5t?this.S5t.inboundBandwidthPerSec:0}S4t(){return this.S5t?this.S5t.inboundDecompressedBandwidthPerSec:0}a8t(){if(this.T8t(),this.Bc.zL())return this.x8t();this.I8t()}async x8t(){const t=await this.QGt("tick",{dt:this.Bc.u7()});this._8t(t)}I8t(){const t=this.tPt("tick",{dt:this.Bc.u7()});this._8t(t)}_8t(t){if(!t)return;this.v5t=t.simulationTime,this.b5t=t.hostInputArrivalTime,this.C5t=t.clientDelay,this.M5t=t.isReadyForInput;for(const[s,i]of Object.entries(t.peerData)){const t=this.r5t.get(s);t&&(t.G8t(i.nid),t.P8t(i.latency),t.A8t(i.pdv),Hx.wo(i.clientState,t.R8t()))}const s=t.roData;if(this.c8t()&&!this.u8t()){const t={};for(const[i,e]of this.e5t)if(s.hasOwnProperty(i)){const n=this.E8t(i,e,s[i]);n.length&&(t[i]=n)}this.ZGt("remove-net-insts",t)}}async N5t(t){this.G2t=t.message,this.d8t("error",!1,{message:this.G2t}),await this.ZB(Hx.i$.y3t.t$.O8t)}async B5t(){this.d8t("disconnected"),await this.ZB(Hx.i$.y3t.t$.D8t),this.W4t="",this.V4t=!1,this.U4t=!1}async $5t(t){this.V4t=!0,this.t5t="",this.J4t=t.myid,this.j4t=t.sigservinfo,this.d8t("connected",!1,{b3t:this.M3t(),C3t:this.T3t(),x3t:this.I3t(),_3t:this.G3t(),P3t:this.A3t()}),await this.ZB(Hx.i$.y3t.t$.F8t)}async W5t(t){this.q4t=t.myalias,this.U4t=!0,this.d8t("login",!1,{k3t:this.q4t}),await this.ZB(Hx.i$.y3t.t$.k8t)}async j5t(t){this.Y4t=t.isHost,this.X4t=t.hostId,this.K4t=t.hostAlias,this.Z4t=t.game,this.Q4t=t.gameInstance,this.t5t=t.room,this.Bc.PN()&&this.Y4t&&this.L5t.postMessage("start"),this.h5t.clear(),this.o5t.clear(),this.u5t.clear(),Hx.bh(this.a5t),this.l5t.clear(),this.d8t("join",!1,{j3t:this.Y4t,U3t:this.X4t,z3t:this.K4t,X3t:this.t5t}),await this.ZB(Hx.i$.y3t.t$.L8t)}async V5t(){this.t5t="",this.d8t("leave"),await this.ZB(Hx.i$.y3t.t$.N8t)}async U5t(){this.t5t="",this.d8t("kicked"),await this.ZB(Hx.i$.y3t.t$.B8t)}async X5t(){this.t5t="",this.f8t("kicked"),await this.ZB(Hx.i$.y3t.t$.B8t)}async H5t(t){this.H4t=t.list,await this.ZB(Hx.i$.y3t.t$.$8t)}async z5t(t){this.z4t=t.list,await this.ZB(Hx.i$.y3t.t$.W8t)}i4t(){return this.H4t}j8t(t){return(t=Math.floor(t))<0||t>=this.H4t.length?null:this.H4t[t]}h4t(){return this.z4t}V8t(t){return(t=Math.floor(t))<0||t>=this.z4t.length?null:this.z4t[t]}async J5t(t){this.c5t=t.id,this.f5t=t.alias,this.f8t("peerconnect",!1,{g8t:this.c5t,y8t:this.f5t}),await this.ZB(Hx.i$.y3t.t$.U8t)}async q5t(t){const s=t.fromId,i=t.fromAlias,e=t.transmissionMode,n=t.content,r=t.contentMode;"e"===r?(this.p5t=s,this.m5t=i,n instanceof ArrayBuffer?(this.R5t=n,await this.ZB(Hx.i$.y3t.t$.H8t),this.R5t=null):(this.g5t=n,this.Ew=t.tag,await this.ZB(Hx.i$.y3t.t$.z8t),await this.ZB(Hx.i$.y3t.t$.J8t))):"s"===r&&this.f8t("message",!1,{q8t:s,Y8t:i,X8t:e,message:n})}async Y5t(t){this.c5t=t.id,this.f5t=t.alias,this.d5t=t.reason;const s=this.r5t.get(this.c5t),i=this.K8t(this.c5t);if(i){const t=this.i5t.get(i.fU().G1());s&&t&&this.ZGt("remove-object-nid",{roId:t,nid:s.Z8t()}),this.Bc.wU(i)}this.o5t.delete(this.c5t),s&&s.Q8t(),this.f8t("peerdisconnect",!1,{g8t:this.c5t,y8t:this.f5t,t6t:this.d5t}),this.Y4t||this.c5t!==this.X4t||(this.t5t="",await this.ZB(Hx.i$.y3t.t$.s6t)),this.Y4t&&1===this.n5t.length&&!this.V4t&&(this.t5t=""),await this.ZB(Hx.i$.y3t.t$.i6t)}s8t(t){const s=Hx.Hn(Hx.i$.y3t.e6t,this,t.id,t.alias);this.n5t.push(s),this.r5t.set(s.Oq(),s)}i8t(t){const s=t.id;this.r5t.delete(s);for(let t=0,i=this.n5t.length;t<i;++t)if(this.n5t[t].Oq()===s)return void this.n5t.splice(t,1)}I4t(){return this.n5t.filter(t=>!t.n6t())}P4t(t){return this.r5t.get(t)||null}r6t(){return this.c8t()?this.n5t.length:0}h6t(t){return(t=Math.floor(t))<0||t>=this.n5t.length||!this.c8t()?null:this.n5t[t]}o6t(t){for(const s of this.n5t)if(s.Z8t()===t)return s;return null}a6t(t,s){const i=this.r5t.get(t);return!!i&&i.R8t().has(s)}l6t(t,s){const i=this.r5t.get(t);if(!i)return 0;const e=i.R8t().get(s);return"number"==typeof e?e:0}e8t(t){this.S5t=t.stats}l8t(t){const s=t.xU();this.h5t.delete(s);for(const[t,i]of this.o5t)if(s===i){this.o5t.delete(t);break}this.l5t.delete(t);const i=this.a5t.indexOf(t);-1!==i&&this.a5t.splice(i,1),this.u5t.delete(t),this.ZGt("remove-object-id",{uid:s})}K8t(t){const s=this.o5t.get(t);return void 0===s?null:this.Bc.AB(s)}async n8t(){this.y5t=!0,await this.ZB(Hx.i$.y3t.t$.u6t),this.y5t=!1;const t=this.w5t.slice(0);return Hx.bh(this.w5t),{clientStateUpdates:t}}c6t(t){return this.l5t.get(t)}T8t(){const t=this.b5t;for(const s of this.a5t)this.f6t(s,t)}f6t(t,s){const i=t.kB();let e=this.u5t.get(t);e||(e=Hx.Hn(Hx.i$.y3t.d6t,t),this.u5t.set(t,e));const n=Hx.Hn(Hx.i$.y3t.p6t,e);n.timestamp=s,n.x=i.YM(),n.y=i.ZM(),n.angle=i.Dj(),Hx.xh(n.m6t,t.vDt()),e.g6t(n),e.y6t(s)}E8t(t,s,i){const e=this.e5t.get(t),n=this.Bc.QY(e.EQ),r=e.w6t,h=e.S6t,o=this.v5t,a=i.netValues,l=i.netInstances;for(const[t,s]of r)this.Bc.AB(s.xU())||r.delete(t);for(const[t,s]of h)s<o-3e3&&h.delete(t);const u=[];for(const t of l){const s=t.nid;if(h.get(s)>=o-3e3){u.push(s),r.has(s)&&(this.Bc.wU(r.get(s)),r.delete(s));continue}let e=null,l=!1;if(r.has(s))e=r.get(s);else{const t=this.o6t(s);if(t)this.c5t=t.Oq(),this.f5t=t.v6t();else{if(i.hasOverriddenNids)continue;this.c5t="",this.f5t=""}const h=this.Bc.cB();e=this.Bc.lj(n,h.BB(n.VEt()),-1e3,-1e3),r.set(s,e),l=!0}if(t.isTimedOut){u.push(s),r.delete(s),this.Bc.wU(e);continue}const c=this.c6t(e);if(c)this.b6t(e,t,a,this.v5t,c);else{const s=e.kB(),i=e.vDt();let n=0;for(let e=0,r=a.length;e<r;++e){const r=t.interpValues[e],h=a[e];switch(h.tag){case"x":s.XM(r),s.CH();break;case"y":s.QM(r),s.CH();break;case"a":s.Oj(r),s.CH();break;case"iv":if(n=h.userData,n>i.length||"number"!=typeof i[n])break;i[n]=r}}}l&&e.j5()}return u}static M6t(t,s,i,e){const n=s-t;if(0===n)return 0;const r=Math.abs(n);if(r<=Math.abs(i/10)||e&&(r<1||r>=1e3))return n;let h=r/50,o=Math.abs(i/5);e&&r>=10&&(h=r/10,o=Math.abs(i/2));let a=Math.max(h,o);return a>r&&(a=r),n>0?a:-a}b6t(t,s,i,e,n){const r=t.kB(),h=this.u5t.get(t);if(!h)return;const o=Hx.er(0,0,h.C6t("x"),h.C6t("y")),a=Hx.i$.y3t.Instance.M6t,l=n.T6t,u=n.x6t;let c=null;u&&(c=t.SDt(Hx.yut.Zs));for(let e=0,n=i.length;e<n;++e){const n=i[e],f=n.tag,d=n.userData,p=n.interp,m=s.latestUpdate;if(!m)continue;const g=m.data[e],y=h.I6t(f,d,m.timestamp,p);if(void 0===y)continue;let w=0;const S=t.vDt();let v=0;switch(f){case"x":if(w=a(y,g,o,!0),0!==w){const s=r.YM();r.got(w),r.CH(),l&&this.Bc.RL().O$(t)&&(r.XM(s),r.CH(),w=0)}this.E5t=g-y+w,this.D5t=g;break;case"y":if(w=u&&c?._6t()?0:a(y,g,o,!0),0!==w){const s=r.ZM();r.yot(w),r.CH(),l&&this.Bc.RL().O$(t)&&(r.QM(s),r.CH(),w=0)}this.O5t=g-y+w,this.F5t=g;break;case"a":w=Hx.ur(y,g,.5)-y,0!==w&&(r.Oj(r.Dj()+w),r.CH());break;case"iv":if(v=d,v>S.length||"number"!=typeof S[v])break;n.cvt||(S[v]=s.interpValues[e])}0!==w&&h.G6t(f,d,w)}}r8t(t){const s=t.roId,i=t.nid,e=t.timestamp,n=this.e5t.get(s);if(!n)return;const r=n.w6t;n.S6t.set(i,e);const h=r.get(i);h&&(this.Bc.wU(h),r.delete(i))}h8t(t){const s={};for(const i of t.ros){const t=i.roId,e=i.sid,n=i.netValues,r=this.Bc.QY(e);r&&(s[t]=r.ej().map(t=>this.P6t(t,n)))}return s}P6t(t,s){return{uid:t.xU(),netValues:s.map(s=>this.A6t(t,s))}}A6t(t,s){const i=t.kB();switch(s.tag){case"x":return i.YM();case"y":return i.ZM();case"a":return i.Dj();case"iv":{const i=s.userData,e=s.cvt;if(e){const s=this.h5t.get(t.xU());if(s&&this.J4t!==s&&this.a6t(s,e))return this.l6t(s,e)}const n=t.vDt()[i];return"number"==typeof n?n:0}default:return 0}}R6t(t,s,i,e){if(!this.$4t)return 0;if(!this.u8t())return 0;if(!this.r5t.get(t))return 0;const n=this.K8t(t);if(!n)return 0;let r=0;const h=n.kB();switch(i){case"x":r=h.YM();break;case"y":r=h.ZM();break;case"a":r=h.Dj()}const o=this.r5t.get(s);if(!o||s===t)return r;if(this.J4t===s)return r;const a=2*(o.E6t()+this.C5t),l=this.u5t.get(n);if(!l)return r;const u=l.I6t(i,0,performance.now()-a,e);return void 0===u?r:u}lPt(){const t="plugins.multiplayer.debugger",s=t+".multiplayer",i=t+".statistics",e=t+".signalling",n=[];for(let t=0,s=this.r6t();t<s;++t){const s=this.h6t(t);n.push({name:"$"+s.Oq(),value:s.v6t()})}return[{title:s+".title",properties:[{name:s+".my-id",value:this.M3t()},{name:s+".my-alias",value:this.L3t()},{name:s+".host-id",value:this.H3t()},{name:s+".host-alias",value:this.J3t()},{name:s+".game",value:this.M4t()},{name:s+".instance",value:this.T4t()},{name:s+".room",value:this.K3t()}]},{title:t+".peers.title",properties:n},{title:i+".title",properties:[{name:i+".outbound-count",value:this.l4t()},{name:i+".outbound-bandwidth",value:this.c4t()},{name:i+".outbound-decompressed-bandwidth",value:this.d4t()},{name:i+".outbound-compression",value:Hx.Kn(100-Math.round(100*this.c4t()/this.d4t()),0,100)+"%"},{name:i+".inbound-count",value:this.m4t()},{name:i+".inbound-bandwidth",value:this.y4t()},{name:i+".inbound-decompressed-bandwidth",value:this.S4t()},{name:i+".inbound-compression",value:Hx.Kn(100-Math.round(100*this.y4t()/this.S4t()),0,100)+"%"}]},{title:e+".title",properties:[{name:e+".url",value:this.M8t()},{name:e+".version",value:this.T3t()},{name:e+".name",value:this.I3t()},{name:e+".operator",value:this.G3t()},{name:e+".motd",value:this.A3t()}]}]}}}{const Jx=self._s;Jx.i$.y3t.t$={O8t:()=>!0,F8t:()=>!0,D8t:()=>!0,k8t:()=>!0,L8t:()=>!0,N8t:()=>!0,B8t:()=>!0,U8t:()=>!0,i6t:()=>!0,s6t:()=>!0,O6t(){return this.R3t()},D6t(){return this.B3t()},F6t(){return this.c8t()},u8t(){return this.V3t()},k6t(){return this.$4t},J8t(t){return this.Ew===t},z8t:()=>!0,H8t(t){if(!t)return!1;const s=t.Hxt(this.di);return!!s&&(s.iJ().L6t(this.R5t),!0)},u6t:()=>!0,$8t:()=>!0,W8t:()=>!0,N6t(){return this.M5t},B6t(t,s){return Jx.compare(this.n5t.length,t,s)},m8t(t,s){return Jx.Ze(t,this.Ew)&&this.x5t===s},p8t(t){return this.x5t===t},S8t(t,s){if(!Jx.Ze(t,this.Ew))return;if(!s)return!1;const i=s.Hxt(this.di);return!!i&&(i.iJ().L6t(this.R5t),!0)},w8t(t){if(!t)return!1;const s=t.Hxt(this.di);return!!s&&(s.iJ().L6t(this.R5t),!0)},$6t:()=>!1}}{let qx=function(t){switch(t){case 0:default:return"o";case 1:return"r";case 2:return"u"}};ModeToDCType=qx;const Yx=self._s;let Xx=!1;Yx.i$.y3t.wht={async W6t(t){this.$4t&&!this.V4t&&await this.v3t(t)},j6t(){this.$4t&&this.E3t()},V6t(t,s,i){this.$4t&&this.D3t(t,s,i)},async U6t(t){this.$4t&&this.V4t&&!this.U4t&&await this.F3t(t)},async H6t(t,s,i,e){this.$4t&&this.U4t&&!this.c8t()&&await this.W3t(t,s,i,e)},async z6t(t,s,i,e,n){this.$4t&&this.U4t&&!this.c8t()&&await this.Y3t(t,s,i,e,0===n)},async J6t(){this.$4t&&this.c8t()&&await this.Q3t()},q6t(){this.$4t&&this.L4t()},Y6t(t,s,i,e){this.$4t&&this.R4t(t,s,i,qx(e),"e")},X6t(t,s,i){if(!this.$4t)return;if(!s)return!1;const e=s.Hxt(this.di);if(!e)return!1;const n=e.iJ().yZt();this.R4t(t,null,n,qx(i),"e")},K6t(t,s,i,e){this.$4t&&this.u8t()&&this.O4t(t,s,i,qx(e),"e")},Z6t(t,s,i){this.$4t&&this.B4t(t,s,i)},Q6t(t,s,i,e){let n=!1,r=!1,h=!1;1===s?(n=!0,r=!0):2===s?h=!0:3===s&&(n=!0,r=!0,h=!0),Yx.i$.y3t.wht.t7t.call(this,t,n,r,h,i,e)},t7t(t,s,i,e,n,r){if(!this.$4t)return;let h;h=t.v1()?t.Cj():[t];const o=[];for(const t of h){const s=t.G1(),i=this.s5t++;this.e5t.set(i,{EQ:s,w6t:new Map,S6t:new Map}),this.i5t.set(s,i),o.push({roId:i,sid:s})}this.ZGt("sync-object",{objectClasses:o,x:s,y:i,angle:e,precision:n,bandwidth:r})},s7t(t,s,i,e,n){if(!this.$4t)return;let r;r=t.v1()?t.Cj():[t];const h=[];for(const i of r){const e=this.i5t.get(i.G1());if(!e)return void(Xx||(Xx=!0,this.ZGt("alert",{message:`Multiplayer object: incorrect use of 'Sync instance variable' for object type '${i.Ac()}'. You must use 'Sync object' before you can use 'Sync instance variable'. Please refer to the documentation for more information.`})));let n=s;t.v1()&&(n+=i.kMt(t.LMt())),h.push({roId:e,varIndex:n})}this.ZGt("sync-inst-var",{syncData:h,precision:i,interp:e,cvt:n})},i7t(t,s){if(!this.$4t)return;if(!this.r5t.has(s))return;const i=t.Hxt();if(!i)return;const e=this.i5t.get(t.G1());e&&(this.u8t()&&(this.a5t.includes(i)||this.a5t.push(i)),this.h5t.set(i.xU(),s),this.o5t.set(s,i.xU()),this.ZGt("associate-object",{roId:e,peerId:s,instUid:i.xU()}))},e7t(t,s){if(!this.$4t)return;const i={tag:t,value:s};this.y5t?this.w5t.push(i):this.ZGt("set-client-state",i)},n7t(t,s,i){this.$4t&&this.ZGt("add-client-input-value",{tag:t,precision:s,interp:i})},r7t(t,s,i){if(!this.$4t||!t)return;if(this.u8t())return;const e=t.Hxt();e&&(this.l5t.has(e)||(this.a5t.push(e),this.l5t.set(e,{T6t:s,x6t:i})))},async h7t(t){this.$4t&&this.V4t&&await this.s4t(t)},async o7t(t,s,i){if(!this.$4t||!this.V4t)return;let e="all";1===i?e="unlocked":2===i&&(e="available"),await this.r4t(t,s,e)},a7t(t){if(!this.$4t)return;let s,i;0===t?(s=30,i=80):(s=60,i=40),this.v8t(s,i)},l7t(t,s){this.$4t&&this.u8t()&&t!==this.J4t&&this.b8t(t,s)},u7t(t,s,i,e,n){if(!s)return!1;const r=s.Hxt(this.di);if(!r)return!1;const h=r.iJ().yZt();let o;return o=e?new File([h],e,{type:n}):new Blob([h],{type:n}),this.F4t(t||this.X4t,o,n,e,{tag:i},"e")},c7t(t,s){for(const[i,e]of this.T5t)Yx.Ze(e.tag,s)&&(this.ZGt("peer-cancel-binary-transfer",{id:t,transferId:i}),this.T5t.delete(i))},f7t(t){}}}{const Kx=self._s;Kx.i$.y3t.Sht={d7t(){return this.M8t()},p7t(){return this.T3t()},m7t(){return this.I3t()},g7t(){return this.G3t()},y7t(){return this.A3t()},w7t(){return this.L3t()},S7t(){return this.M4t()},v7t(){return this.T4t()},b7t(){return this.K3t()},m3t(){return this.C8t()},M7t(){return this.M3t()},C7t(){return this.c5t},T7t(){return this.f5t},x7t(){return this.H3t()},I7t(){return this.J3t()},_7t(){return this.g5t},Tag(){return this.Ew},G7t(){return this.p5t},P7t(){return this.m5t},A7t(t){const s=this.r5t.get(t);return s?s.v6t():""},R7t(t){for(const s of this.n5t)if(s.v6t()===t)return s.Oq();return""},E7t(t){const s=this.r5t.get(t);return s?s.E6t():0},O7t(t){const s=this.r5t.get(t);return s?s.D7t():0},F7t(){return this.l4t()},k7t(){return this.c4t()},L7t(){return this.d4t()},N7t(){return this.m4t()},B7t(){return this.y4t()},$7t(){return this.S4t()},W7t(t,s){return this.l6t(t,s)},j7t(){return this.E5t},V7t(){return this.O5t},U7t(){return this.D5t},H7t(){return this.F5t},z7t(){return this.r6t()},J7t(){return this.H4t.length},q7t(t){const s=this.j8t(t);return s?s.name:""},Y7t(t){const s=this.j8t(t);return s?s.peercount:0},X7t(){return this.z4t.length},K7t(t){const s=this.V8t(t);return s?s.name:""},Z7t(t){const s=this.V8t(t);return s?s.peercount:0},Q7t(t){const s=this.V8t(t);return s?s.maxpeercount:0},t9t(t){const s=this.V8t(t);return s?s.state:""},s9t(){return this.d5t},i9t(t,s){return this.R6t(t,s,"x",1)},e9t(t,s){return this.R6t(t,s,"y",1)},n9t(t,s){return Kx.tr(this.R6t(t,s,"a",2))},r9t(t){const s=this.h6t(t);return s?s.Oq():""},h9t(t){const s=this.h6t(t);return s?s.v6t():""},o9t(){return this._5t},a9t(){return this.G5t},l9t(){return this.P5t},u9t(){return this.A5t},c9t:()=>0,f9t:t=>"",d9t:t=>"",p9t:t=>"",m9t:t=>""}}{let Zx=function(t,s,i,e,n){switch(t){case 0:default:return n?i:s;case 1:return Qx._t(s,i,e);case 2:return Qx.ur(s,i,e)}};InterpNetValue=Zx;const Qx=self._s;Qx.i$.y3t.p6t=class extends Qx.Vn{constructor(t){super(),this.g9t=t,this.timestamp=0,this.x=0,this.y=0,this.angle=0,this.m6t=[]}},Qx.i$.y3t.d6t=class extends Qx.Vn{constructor(t){super(),this.di=t,this.y9t=[]}g6t(t){this.y9t.push(t)}y6t(t){for(;this.y9t.length>0&&this.y9t[0].timestamp<=t-2e3;)this.y9t.shift()}C6t(t,s){if(this.y9t.length<2)return 0;const i=this.y9t.at(-2),e=this.y9t.at(-1);switch(t){case"x":return e.x-i.x;case"y":return e.y-i.y;case"a":return e.angle-i.angle;case"iv":return e.m6t[s]-i.m6t[s]}return 0}I6t(t,s,i,e){let n=null,r=null;for(let t=0,s=this.y9t.length;t<s;++t){const s=this.y9t[t];if(!(s.timestamp<i)){t+1<this.y9t.length&&(r=this.y9t[t+1]);break}n=s}if(!n)return;let h=0;switch(t){case"x":h=n.x;break;case"y":h=n.y;break;case"a":h=n.angle;break;case"iv":h=n.m6t[s]}if(!r)return h;let o=h;switch(t){case"x":o=r.x;break;case"y":o=r.y;break;case"a":o=r.angle;break;case"iv":o=r.m6t[s]}return Zx(e,h,o,Qx.mr(n.timestamp,r.timestamp,i),!1)}G6t(t,s,i){for(const e of this.y9t)switch(t){case"x":e.x+=i;break;case"y":e.y+=i;break;case"a":e.angle+=i;break;case"iv":e.m6t[s]+=i}}}}{const tI=self._s,sI=self.Ns;tI.i$.y3t.e6t=class{constructor(t,s,i){this.w9t=t,this.Wc=s,this.S9t=i,this.v9t=-1,this.b9t=0,this.M9t=0,this.C9t=new Map,this.T9t=!1,this.x9t=null}I9t(){return this.w9t}Oq(){return this.Wc}v6t(){return this.S9t}G8t(t){sI.he(t),this.v9t=t}Z8t(){return this.v9t}P8t(t){this.b9t=t}E6t(){return this.b9t}A8t(t){this.M9t=t}D7t(){return this.M9t}R8t(){return this.C9t}Q8t(){this.T9t=!0}n6t(){return this.T9t}HGt(){return this.x9t||(this.x9t=tI.Hn(self._9t,this)),this.x9t}};const iI=new WeakMap;self._9t=class{constructor(t){const s={id:{value:t.Oq(),writable:!1},G9t:{value:t.v6t(),writable:!1},j3t:{value:t.Oq()===t.I9t().H3t(),writable:!1},P9t:{value:t.Oq()===t.I9t().M3t(),writable:!1}};Object.defineProperties(this,s),iI.set(this,t)}get latency(){return iI.get(this).E6t()}get A9t(){return iI.get(this).D7t()}send(t,s="o"){iI.get(this).I9t().fU().$W().A4t(this.id,t,s)}}}{const eI=self._s;eI.i$.R9t=class extends eI.K_t{constructor(t){super(t)}zn(){super.zn()}}}{const nI=self._s;nI.i$.R9t.dEt=class extends nI.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{const rI=self._s,hI="googleplay";rI.i$.R9t.Instance=class extends rI.$Gt{constructor(t,s){super(t,hI),this.E9t=!1,this.O9t=!1,this.D9t=!1,this.lastError="",this.F9t="",this.k9t="",this.L9t="",this.N9t="",this.B9t="",this.$9t=0,this.W9t=0,this.j9t="",this.V9t="",this.U9t=0,this.H9t="",this.z9t=null,this.J9t=null,this.q9t=new Map,this.Y9t="",this.Bc.YB(this.QGt("load",[s[1]]).then(()=>{this.E9t=!0},t=>{console.warn("failed to load Google Play",t)})),this.XGt("login",t=>{const s=t.state,i=t.error;this.D9t!=s&&(this.D9t=s,s?this.qU(rI.i$.R9t.t$.X9t):this.qU(rI.i$.R9t.t$.K9t)),i&&(this.lastError=i,this.qU(rI.i$.R9t.t$.Z9t))})}Q9t(t){return this.J9t?(t=Math.floor(t))<0||t>=this.J9t.length?null:this.J9t[t]:null}tts(t){const s=this.Q9t(t);if(!s)return null;const i=s.id;return this.q9t.has(i)?this.q9t.get(i):null}sts(t){return this.z9t?(t=Math.floor(t))<0||t>=this.z9t.length?null:this.z9t[t]:null}zn(){super.zn()}}}self._s.i$.R9t.t$={ZZ(){return this.E9t},X9t:()=>!0,K9t:()=>!0,its(){return this.D9t},iZt:()=>!0,ets:()=>!0,nts:()=>!0,Z9t:()=>!0,rts:()=>!0,hts:()=>!0,ots:()=>!0,ats:()=>!0,lts:()=>!0,uts:()=>!0,cts(t,s){const i=this.Q9t(t);return!!i&&i.achievementState===["HIDDEN","REVEALED","UNLOCKED"][s]},fts:()=>!0,dts:()=>!0,pts(t){return this.Y9t===t},mts(t){return this.Y9t===t},gts:()=>!0};{const oI=self._s;oI.i$.R9t.wht={yts(){this.tPt("signin")},wts(){this.tPt("signout")},async Sts(){try{const t=await this.QGt("getplayer");t&&(this.F9t=t.id,this.k9t=t.display,this.L9t=t.avatar,this.N9t=t.givenName,this.B9t=t.familyName,this.qU(oI.i$.R9t.t$.ets))}catch(t){this.lastError=t.message,this.qU(oI.i$.R9t.t$.iZt)}},async vts(t,s,i){t=t.trim();try{await this.QGt("submitscore",{leaderboardId:t.trim(),score:s,tag:i}),this.qU(oI.i$.R9t.t$.rts)}catch(t){this.lastError=t.message,this.qU(oI.i$.R9t.t$.hts)}},async bts(t,s,i,e,n,r){s=["PUBLIC","SOCIAL"][s],i=["ALL_TIME","WEEKLY","DAILY"][i],n=["scores","window"][n],t=t.trim();try{const h=await this.QGt("requestscores",{leaderboardId:t,collection:s,timeSpan:i,maxResults:e,reload:r,type:n});h&&(this.$9t=h.total,this.W9t=h.best,this.j9t=h.formattedbest,this.V9t=h.besttag,this.U9t=h.rank,this.H9t=h.formattedrank,this.z9t=h.page,this.qU(oI.i$.R9t.t$.ots))}catch(t){this.lastError=t.message,this.qU(oI.i$.R9t.t$.ats)}},async Mts(t,s){try{t=["ALL","HIDDEN","REVEALED","UNLOCKED"][t];const i=await this.QGt("requestachievements",{which:t,reload:s});this.J9t=i.page,i.id&&(this.q9t=i.id),this.qU(oI.i$.R9t.t$.lts)}catch(t){this.lastError=t.message,this.qU(oI.i$.R9t.t$.uts)}},async Cts(t){try{const s=await this.QGt("requestmetadata",{reload:t});s&&(this.q9t=s.id,s.page&&(this.J9t=s.page),this.qU(oI.i$.R9t.t$.fts))}catch(t){this.lastError=t.message,this.qU(oI.i$.R9t.t$.dts)}},async Tts(t){t=t.trim();try{if(await this.QGt("reveal",{id:t})){const s=this.q9t.get(t);s&&"HIDDEN"==s.achievementState&&(s.achievementState="REVEALED",this.Y9t=t,this.qU(oI.i$.R9t.t$.pts))}}catch(t){this.lastError=t.message,this.qU(oI.i$.R9t.t$.iZt)}},async xts(t){t=t.trim();try{if(await this.QGt("unlock",{id:t})){const s=this.q9t.get(t);s&&"UNLOCKED"!=s.achievementState&&(s.achievementState="UNLOCKED",this.Y9t=t,this.qU(oI.i$.R9t.t$.mts))}}catch(t){this.lastError=t.message,this.qU(oI.i$.R9t.t$.iZt)}},async Its(t,s){t=t.trim();try{if(await this.QGt("increment",{id:t,steps:s})){const i=this.q9t.get(t);i&&"UNLOCKED"!=i.achievementState&&(i.currentSteps+=s,i.currentSteps>=i.totalSteps&&(this.Y9t=t,i.currentSteps=i.totalSteps,i.achievementState="UNLOCKED",this.qU(oI.i$.R9t.t$.mts)))}}catch(t){this.lastError=t.message,this.qU(oI.i$.R9t.t$.iZt)}},async _ts(t,s){t=t.trim();try{if(await this.QGt("setsteps",{id:t,steps:s})){const i=this.q9t.get(t);i&&"UNLOCKED"!=i.achievementState&&(i.currentSteps=s,s>=i.totalSteps&&(this.Y9t=t,i.currentSteps=i.totalSteps,i.achievementState="UNLOCKED",this.qU(oI.i$.R9t.t$.mts)))}}catch(t){this.lastError=t.message,this.qU(oI.i$.R9t.t$.iZt)}},async Gts(){try{const t=null;await this.QGt("showleaderboard",{id:t})}catch(t){this.lastError=t.message,this.qU(oI.i$.R9t.t$.iZt)}},async Pts(t){t=t.trim();try{await this.QGt("showleaderboard",{id:t})}catch(t){this.lastError=t.message,this.qU(oI.i$.R9t.t$.iZt)}},async Ats(){try{await this.QGt("showachievements")}catch(t){this.lastError=t.message,this.qU(oI.i$.R9t.t$.iZt)}}}}self._s.i$.R9t.Sht={m3t(){return this.lastError},M7t(){return this.F9t},Rts(){return this.k9t},Ets(){return this.L9t},Ots(){return this.N9t},Dts(){return this.B9t},Fts(){return this.$9t},kts(){return this.W9t},Lts(){return this.V9t},Nts(){return this.j9t},Bts(){return this.U9t},$ts(){return this.H9t},Wts(){return this.z9t&&this.z9t.length||0},jts(t){const s=this.sts(t);return s&&s.player&&s.player.displayName||""},Vts(t){const s=this.sts(t);return s&&parseInt(s.scoreRank,10)||0},Uts(t){const s=this.sts(t);return s&&parseInt(s.scoreValue,10)||0},Hts(t){const s=this.sts(t);return s&&s.scoreTag&&s.scoreTag||""},zts(t){const s=this.sts(t);return s&&s.formattedScore&&s.formattedScore||""},Jts(t){const s=this.sts(t);return s&&s.formattedScoreRank&&s.formattedScoreRank||""},qts(){return this.J9t&&this.J9t.length||0},Yts(t){const s=this.Q9t(t);return s&&s.id||""},Xts(t){const s=this.Q9t(t);return s&&s.currentSteps||0},Kts(t){const s=this.tts(t);return s&&s.name||""},Zts(t){const s=this.tts(t);return s&&s.description||""},Qts(t){const s=this.tts(t);return s?(s.type||"").toLowerCase():""},tss(t){const s=this.tts(t);return s&&s.totalSteps||0},sss(t){const s=this.tts(t);return s&&s.revealedUrl||""},iss(t){const s=this.tts(t);return s&&s.unlockedUrl||""}};{const aI=self._s;aI.i$.PlatformInfo=class extends aI.K_t{constructor(t){super(t)}zn(){super.zn()}}}{const lI=self._s;lI.i$.PlatformInfo.dEt=class extends lI.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{const uI=self._s,cI="platform-info";uI.i$.PlatformInfo.Instance=class extends uI.$Gt{constructor(t,s){super(t,cI),this.RZt=0,this.EZt=0,this.OZt=0,this.DZt=0,this.ess=[0,0,0,0],this.nss=!1,this.rss=!1,this.KGt([["window-resize",t=>this.k$t(t)],["wake-lock-acquired",t=>this.hss(t)],["wake-lock-error",t=>this.oss(t)],["wake-lock-released",t=>this.ass(t)]]),navigator.connection&&navigator.connection.addEventListener("change",()=>this.lss()),this.Bc.YB(this.QGt("get-initial-state").then(t=>{this.RZt=t.screenWidth,this.EZt=t.screenHeight,this.OZt=t.windowOuterWidth,this.DZt=t.windowOuterHeight,this.ess=t.safeAreaInset,this.nss=t.supportsWakeLock}))}zn(){super.zn()}k$t(t){this.OZt=t.windowOuterWidth,this.DZt=t.windowOuterHeight,this.ess=t.safeAreaInset}async lss(){await this.ZB(uI.i$.PlatformInfo.t$.uss)}async hss(){this.rss=!0,await this.ZB(uI.i$.PlatformInfo.t$.css)}async oss(){this.rss=!1,await this.ZB(uI.i$.PlatformInfo.t$.fss)}async ass(){this.rss=!1,await this.ZB(uI.i$.PlatformInfo.t$.dss)}}}{const fI=self._s;fI.i$.PlatformInfo.t$={pss:()=>fI.Zs.oi,mss:()=>"Windows"===fI.Zs.Qs,gss:()=>"macOS"===fI.Zs.Qs,yss:()=>"Linux"===fI.Zs.Qs,wss:()=>"Chrome OS"===fI.Zs.Qs,Sss:()=>"Android"===fI.Zs.Qs,vss:()=>"iOS"===fI.Zs.Qs,bss(){const t=this.Bc.z$();return"html5"===t||"scirra-arcade"===t||"preview"===t||"instant-games"===t},Mss(){return this.Bc.vjt()},Css(){return this.Bc.J$()},Tss(){return"windows-uwp"===this.Bc.z$()},xss(){return this.Bc.q$()},Iss(){return"macos-wkwebview"===this.Bc.z$()},_ss(){return"linux-cef"===this.Bc.z$()},uss:()=>!0,css:()=>!0,fss:()=>!0,dss:()=>!0,Gss(){return this.rss},Pss(){return this.nss}}}self._s.i$.PlatformInfo.wht={Ass(){this.nss&&this.tPt("request-wake-lock")},Rss(){this.nss&&(this.rss=!1,this.ZGt("release-wake-lock"))}},self._s.i$.PlatformInfo.Sht={Ess(){return this.Bc.IB().Y$()},Oss(){return this.Bc.IB().K$()},v0t(){return this.Bc.uW()},b0t(){return this.RZt},M0t(){return this.EZt},C0t(){return this.Bc.IB().rY()},T0t(){return this.Bc.IB().hY()},x0t(){return this.OZt},I0t(){return this.DZt},Dss(){return this.Bc.IB().eW()},Fss(){return this.Bc.IB().rW()},kss(){return this.Bc.IB().oW()},Lss(){return this.Bc.IB().lW()},Nss:()=>navigator.connection&&navigator.connection.downlink||0,Bss:()=>navigator.connection&&navigator.connection.downlinkMax||0,ConnectionType:()=>navigator.connection&&navigator.connection.type||"unknown",$ss:()=>navigator.connection&&navigator.connection.effectiveType||"unknown",Wss:()=>navigator.connection&&navigator.connection.rtt||0,jss:()=>navigator.hardwareConcurrency||0,Vss:()=>navigator.deviceMemory||0,Uss(){return this.ess[0]},Hss(){return this.ess[1]},zss(){return this.ess[2]},Jss(){return this.ess[3]},qss(){return this.Bc.UN()},Yss(){return this.Bc.zN()}};{const dI=self._s;dI.i$.Xss=class extends dI.K_t{constructor(t){super(t)}zn(){super.zn()}}}{const pI=self._s;pI.i$.Xss.dEt=class extends pI.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{const mI=self._s,gI="game-recorder",yI=0,wI=1,SI=2,vI=0,bI=2,MI=3,CI=4,TI=5,xI=0,II=1,_I=2,GI=3;mI.i$.Xss.Instance=class extends mI.$Gt{constructor(t,s){super(t,gI),this.$4t=!1,this.Kss=!1,this.Zss=!1,this.Qss=[],this.AK=[],this.tis=!1,this.sis="",this.iis="",this.KGt([["recording-ready",t=>this.eis(t)],["error",t=>this.uZt(t)],["screen-recording-stopped",()=>this.nis()]]),this.Bc.YB(this.QGt("get-supported-formats").then(t=>{this.$4t=t.isSupported,this.Kss=t.isMediaRecorderSupported,this.Zss=t.isScreenRecordingSupported,this.Qss=t.supportedVideoFormats,this.AK=t.supportedAudioFormats}))}zn(){super.zn()}ris(t,s,i){if(s===vI&&i===xI)return["","",""];let e="";e=s===vI?"audio":"video";let n="";n=t===wI?"webm":t===SI?"mp4":s===bI||s===MI?"webm":s===CI||s===TI?"mp4":i===_I?"webm":i===GI||this.Qss[0].startsWith("video/mp4")?"mp4":"webm";let r="";s===bI?r="vp8":s===MI?r="vp9":s===CI?r="avc1.420034":s===TI?r="hev1.1.2.L93.B0":1===s&&("mp4"===n?this.Qss.includes("video/mp4;codecs=avc1.420034")?r="avc1.420034":this.Qss.includes("video/mp4;codecs=hev1.1.2.L93.B0")?r="hev1.1.2.L93.B0":this.Qss.includes("video/mp4;codecs=vp9")?r="vp9":this.Qss.includes("video/mp4;codecs=vp8")&&(r="vp8"):"webm"===n&&(this.Qss.includes("video/webm;codecs=vp9")?r="vp9":this.Qss.includes("video/webm;codecs=vp8")?r="vp8":this.Qss.includes("video/webm;codecs=avc1.420034")&&(r="avc1.420034")));let h="";return i===_I?h="opus":i===GI?h="mp4a.40.2":i===II&&("vp9"===r||"vp8"===r?h="opus":"avc1.420034"===r||"hev1.1.2.L93.B0"===r?h="mp4a.40.2":"webm"===n?h="opus":"mp4"===n&&(h="mp4a.40.2")),[`${e}/${n}`,r,h]}his(t,s,i){if(!t)return"";const e=[];return s&&e.push(s),i&&e.push(i),`${t};codecs=${e.join(",")}`}ois(t,s,i){const[e,n,r]=this.ris(t,s,i);return this.his(e,n,r)}ais(t,s){let i=yI,e=vI,n=xI;if(0===t){if(0===s)return["","",""];if(1===s)return this.ris(yI,vI,II);if(2===s)return["","",""];if(3===s)return this.ris(wI,vI,_I);if(4===s)return this.ris(SI,vI,GI)}else 1===t?this.Qss.includes("video/mp4;codecs=avc1.420034")?(i=SI,e=CI):this.Qss.includes("video/webm;codecs=vp9")?(i=wI,e=MI):this.Qss.includes("video/webm;codecs=vp8")&&(i=wI,e=bI):2===t?(i=wI,e=bI):3===t?(i=wI,e=MI):4===t&&(i=SI,e=CI);return 1===s?n=II:2===s||3===s?n=_I:4===s&&(n=GI),this.ris(i,e,n)}async eis(t){this.sis=t.url,await this.ZB(mI.i$.Xss.t$.lis)}async uZt(t){await this.ZB(mI.i$.Xss.t$.uis)}nis(){this.tis=!1,this.VGt()}c7(){this.Bc.VB()}lPt(){const t="plugins.gamerecorder";return[{title:t+".name",properties:[{name:t+".debugger.supported-video-formats",value:this.Qss.join(", ")},{name:t+".debugger.supported-audio-formats",value:this.AK.join(", ")},{name:t+".debugger.is-recording",value:this.tis}]}]}}}self._s.i$.Xss.t$={lis:()=>!0,uis:()=>!0,cis(){return this.$4t},fis(){return this.Zss},dis(t,s){return this.Qss.includes(this.ois(t+1,s+2,0))},pis(t,s){return this.AK.includes(this.ois(t+1,0,s+2))},mis(){return this.tis},gis(t){return 0===t?this.Qss.includes("video/webm;codecs=vp8"):1===t?this.Qss.includes("video/webm;codecs=vp9"):2===t?this.Qss.includes("video/mp4;codecs=avc1.420034"):3===t&&this.Qss.includes("video/mp4;codecs=hev1.1.2.L93.B0")},FZ(t){return 0===t?this.AK.includes("audio/ogg;codecs=opus"):1===t?this.AK.includes("audio/webm;codecs=opus"):2===t&&this.AK.includes("audio/mp4;codecs=mp4a.40.2")}},self._s.i$.Xss.wht={yis(t,s,i,e,n){if(!this.$4t||this.tis)return;const[r,h,o]=this.ris(t,s,e);this.iis=r,this.iis&&(this.tis=!0,this.rPt(),this.ZGt("start-recording",{containerPart:r,videoPart:h,audioPart:o,bitsPerSecond:1e3*n,framerate:i}))},wis(t,s,i,e,n){if(!this.Zss||this.tis)return;const[r,h,o]=this.ris(t,s,i);this.iis=r,this.iis&&(this.tis=!0,this.tPt("start-screen-recording",{containerPart:r,videoPart:h,audioPart:o,systemAudio:e,bitsPerSecond:1e3*n}))},Sis(t,s,i,e){if(!this.Kss||this.tis)return;const[n,r,h]=this.ris(t,s,i);this.iis=n,this.iis&&(this.tis=!0,this.ZGt("start-user-media-recording",{containerPart:n,videoPart:r,audioPart:h,bitsPerSecond:1e3*e}))},vis(){this.tis&&(this.nis(),this.ZGt("stop-recording"))},bis(t,s,i,e){if(!this.$4t||this.tis)return;const[n,r,h]=this.ais(t,i);this.iis=n,this.iis&&(this.tis=!0,this.rPt(),this.ZGt("start-recording",{containerPart:n,videoPart:r,audioPart:h,bitsPerSecond:1e3*e,framerate:s}))},Mis(t,s,i,e){if(!this.Zss||this.tis)return;const[n,r,h]=this.ais(t,s);this.iis=n,this.iis&&(this.tis=!0,this.tPt("start-screen-recording",{containerPart:n,videoPart:r,audioPart:h,systemAudio:i,bitsPerSecond:1e3*e}))},Cis(t,s,i){if(!this.Kss||this.tis)return;const[e,n,r]=this.ais(t,s);this.iis=e,this.iis&&(this.tis=!0,this.ZGt("start-user-media-recording",{containerPart:e,videoPart:n,audioPart:r,bitsPerSecond:1e3*i}))}},self._s.i$.Xss.Sht={Tis(){return this.sis},xis(){return this.iis},Iis(){const t=this.iis;return t.startsWith("audio/mp4")?".m4a":t.startsWith("video/mp4")?".mp4":".webm"}};{const PI=self._s;PI.i$.Brt=class extends PI.K_t{constructor(t){super(t)}zn(){super.zn()}}}{const AI=self._s,RI=self.Ns,EI=[];AI.i$.Brt.dEt=class extends AI.FGt{constructor(t){super(t),this.hEt=t.UEt()}zn(){AI.bh(this.hEt),super.zn()}vGt(){for(const t of this.hEt)t.oRt(this.Bc)}g5(t){const s={eT:this.Bc.KL()};return Promise.all(this.hEt.map(i=>i.aRt(t,s)))}M5(){for(const t of this.hEt)t.lRt()}S5(){this._is()}_is(){for(const t of this.mpt.ij())t.iJ().Gis()}dTt(t){AI.i$.Brt.P_t(this,t)}ZTt(t){EI.push({BGt:null,Pis:!1,qW:[]})}Ais(t,s,i){const e=EI.at(-1);e.BGt=t,e.Pis=i,e.qW.push(s)}QTt(t){const s=EI.pop(),i=s.BGt,e=s.Pis;if(!i)return;const n=new Map;for(const t of s.qW)t.iDt(n,i,e);for(const[t,s]of n)t.nj().Bpt(s)}Ris(t){const s=this.fU().YEt(t),i=this.l$();return s.uRt(0).WJ().KX(i.gM(),{eT:i.KL()}).then(()=>this._is()),s}Eis(t){for(const s of this.mpt.ij())s.iJ().Ois(t);this.fU().XEt(t)}Dis(t,s){const i=this.mpt.JEt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.pRt(s);e<0&&(e+=i.OJ()+1);const n=AI.nRt.hRt(this.l$());i.cRt(n,e);const r=this.l$();n.WJ().KX(r.gM(),{eT:r.KL()}).then(()=>this._is());for(const t of this.mpt.ij())t.iJ().Fis();return n}kis(t,s){const i=this.mpt.JEt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.OJ())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.pRt(s);e<0&&(e+=i.OJ()),i.fRt(e);for(const t of this.mpt.ij())t.iJ().Fis()}bGt(){return self.Lis}};const OI=new WeakMap;self.Lis=class extends self.rj{constructor(t){super(t),OI.set(this,t.KTt())}Nis(t){RI.ue(t);const s=OI.get(this).fU().JEt(t);return s?s.mRt():null}Bis(){return OI.get(this).fU().zEt().map(t=>t.mRt())}$is(t){return RI.ue(t),OI.get(this).Ris(t).mRt()}Wis(t){RI.ue(t),OI.get(this).Eis(t)}jis(t,s){if(RI.ue(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return OI.get(this).Dis(t,s).kJ()}Vis(t,s){if(RI.ue(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");OI.get(this).kis(t,s)}}}{const DI=self._s,FI=self.Ns,kI=0,LI=1,NI=2,BI=3,$I=DI.Hn(DI.Rect),WI=DI.Hn(DI.Pl),jI=DI.Hn(DI.Pa),VI=1,UI=2,HI=4;DI.i$.Brt.Instance=class extends DI.pPt{constructor(t,s){super(t);let i=!0,e="",n=0,r=!0;s&&(i=!!s[kI],e=s[LI],n=s[NI],r=s[BI]),this.Uis=this.mpt.JEt(e)||this.mpt.UEt()[0],this.His=DI.Kn(n,0,this.Uis.OJ()-1),this.zis=this.Uis.uRt(this.His);const h=this.zis.WJ();this.Jis=h.Tx(),this.qis=h.yR(),this.Yis=h.IPt(),this.wPt(),t.tDt(UI,!0),t.tDt(VI,this.Uis.TJ()>=0),this.Xis=Math.abs(this.Uis.TJ()),this.Kis=this.Uis.AJ(),this.Zis=DI.Hn(DI.td),this.Qis=0,this.tes=0,this.ses="",this.ies=-1,this.ees="",this.nes=0;const o=this.kB();this.res=o.WH(),o.wV(i),o.ez(r),o.PH(this.zis.GH()),o.EH(this.zis.RH()),o.rLt(this.zis.KJ()),o.CH(),1===this.mpt.HEt()&&1===this.mpt.UEt()[0].OJ()||0===this.Xis||this.rPt()}zn(){this.Uis=null,this.zis=null,this.Jis=null,this.Zis=null,super.zn()}MPt(){return this.zis.WJ()}wet(){return!0}rQ(){this.Jis=null}bPt(){this.Gis()}HC(t){const s=this.Jis;if(null===s)return;t.TO(s);const i=this.kB();i.zz()?this.hes(i,t):this.oes(i,t)}oes(t,s){let i=this.res;this.Bc.QL()&&(i=t.Kkt(i)),s.kO(i,this.Yis)}hes(t,s){const i=t.gLt();if(t.wLt()){t.NH($I,WI,!1);let s=WI;this.Bc.QL()&&(s=t.Kkt(s)),i.BC(t.Jz(),s,this.Yis),t.yLt(!1)}i.HC(s,t.kH())}aes(){return this.Zis.zs()}les(){return this.di.sDt(UI)}ues(t){this.di.tDt(UI,t)}ces(){return this.di.sDt(VI)}fes(t){this.di.tDt(VI,t)}des(){return this.di.sDt(HI)}pes(t){this.di.tDt(HI,t)}c7(){this.ees&&this.mes(),this.ies>=0&&this.ges();const t=this.Xis;if(!this.les()||0===t)return void this.VGt();const s=this.Bc.RN(this.di);this.Zis.$u(s);const i=this.aes(),e=this.zis,n=e.jJ()/t;if(i<this.Qis+n)return;const r=this.Uis,h=this.Kis,o=r.OJ(),a=r.GJ(),l=r.IJ(),u=r.EJ();this.ces()?this.His++:this.His--,this.Qis+=n,this.His>=o&&(u?(this.fes(!1),this.His=o-2):l?this.His=h:(this.tes++,this.tes>=a?this.yes(!1):this.His=h)),this.His<0&&(u?(this.His=1,this.fes(!0),l||(this.tes++,this.tes>=a&&this.yes(!0))):l?this.His=h:(this.tes++,this.tes>=a?this.yes(!0):this.His=h)),this.His=DI.Kn(this.His,0,o-1);const c=r.uRt(this.His);i>this.Qis+c.jJ()/t&&(this.Qis=i),this.wes(e,c)}yes(t){this.His=t?0:this.Uis.OJ()-1,this.ues(!1),this.ses=this.Uis.Ac(),this.pes(!0),this.NGt("animationend",!1,{animationName:this.ses}),this.qU(DI.i$.Brt.t$.Ses),this.qU(DI.i$.Brt.t$.ves),this.pes(!1),this.tes=0}wes(t,s,i){if(t===s)return;const e=this.kB(),n=t.WJ(),r=s.WJ(),h=n.Vg(),o=n.Qg(),a=r.Vg(),l=r.Qg();i&&i.$rt?i.$rt(e,h,o,a,l):(h!==a&&e.Xg(e.Vg()*(a/h)),o!==l&&e.Ug(e.Qg()*(l/o))),e.PH(s.GH()),e.EH(s.RH()),e.rLt(s.KJ()),e.CH(),this.zis=s,this.Jis=r.Tx(),this.qis=r.yR(),this.Yis=r.IPt();const u=this.Pq().Ort();for(let i=0,e=u.length;i<e;++i)u[i].cAt(t,s);this.NGt("framechange",!1,{animationName:this.Uis.Ac(),bes:this.His}),this.qU(DI.i$.Brt.t$.Mes),this.Bc.VB()}Ces(t){this.ues(!0),this.Qis=this.aes(),1===t&&0!==this.His&&(this.ies=0,this.des()||this.ges()),this.rPt()}Tes(t,s,i){this.ees=t,this.nes=s,this.rPt(),!i&&this.des()||this.mes()}xes(){return this.Uis}Ies(){return this.ees?this.ees:this.Uis.Ac()}Ois(t){DI.Ze(t,this.Ies())&&this.Tes(this.mpt.KEt().Ac(),1,!0)}_es(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.mpt.JEt(this.Ies());if(!s)return;if(-1===(t=s.dRt(t)))return}isFinite(t)&&(this.ies=t,this.des()||this.ges())}Fis(){if(this.ees||-1!==this.ies)return;const t=this.zis,s=this.Uis.uRt(DI.Kn(this.His,0,this.Uis.OJ()-1));t!==s&&this.wes(t,s),this.Uis.OJ()>1&&this.Xis>0&&this.rPt()}Ges(){return this.His}Pes(){return this.zis.sq()}Aes(t){this.Xis=Math.abs(t),this.fes(t>=0),this.Xis>0&&this.rPt()}Res(){return this.ces()?this.Xis:-this.Xis}Ees(t){"string"==typeof t&&-1===(t=this.Uis.dRt(t))||(t=DI.Kn(Math.floor(t),0,this.Uis.OJ()-1),this.Kis=t)}Oes(){return this.Kis}mes(t){const s=this.zis,i=this.mpt.JEt(this.ees);if(this.ees="",!i)return;if(i===this.Uis&&this.les())return;this.Uis=i,this.fes(i.TJ()>=0),this.Xis=Math.abs(i.TJ()),this.Kis=i.AJ(),this.His=DI.Kn(this.His,0,this.Uis.OJ()-1),1===this.nes&&(this.His=0),this.ues(!0),this.Qis=this.aes();const e=this.Uis.uRt(this.His);this.wes(s,e,t)}ges(t){const s=this.zis,i=this.His;if(this.His=DI.Kn(Math.floor(this.ies),0,this.Uis.OJ()-1),this.ies=-1,!t&&i===this.His)return;const e=this.Uis.uRt(this.His);this.wes(s,e),this.Qis=this.aes()}Gis(){const t=this.zis.WJ();this.Jis=t.Tx(),this.qis=t.yR(),this.Yis=t.IPt(),this.kB().yLt(!0)}Tx(){return this.Jis}yR(){return this.qis}IPt(){return this.Yis}UJ(){return this.zis.UJ()}pxt(t){const s=this.zis,i=this.kB();let e=null;if("string"==typeof t)e=s.YJ(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.qJ(t-1)}let n=i.kH();if(!e)return[i.YM(),i.ZM(),n];if(jI.S(e.IRt()),i.zz()){const[t,s,e]=i.Jz().ZC(jI.Da(),jI.ka());jI.set(t,s),n+=e}return jI.offset(-s.GH(),-s.RH()),jI.scale(i.Vg(),i.Qg()),jI.rotate(i.Dj()),jI.offset(i.YM(),i.ZM()),[jI.Da(),jI.ka(),n]}Des(){return this.kB().uLt().mu()}Fes(t){t=Math.floor(t);const s=this.kB(),i=s.uLt(),e=i.mu();if(t===e&&(t=0),t<0||t>=e)return[0,0];const n=i.pu();return[n[2*t+0]+s.YM(),n[2*t+1]+s.ZM()]}lPt(){const t=DI.i$.Brt.wht,s="plugins.sprite.debugger.animation-properties";return[{title:s+".title",properties:[{name:s+".current-animation",value:this.Uis.Ac(),N2t:s=>this.cPt(t.kes,s,0)},{name:s+".current-frame",value:this.His,N2t:s=>this.cPt(t.Les,s)},{name:s+".is-playing",value:this.les(),N2t:s=>s?this.cPt(t.Nes,0):this.cPt(t.Bes)},{name:s+".speed",value:this.Xis,N2t:s=>this.cPt(t.$es,s)},{name:s+".repeats",value:this.tes,N2t:t=>this.tes=t}]}]}aC(){const t={a:this.Uis.G1()};0!==this.Qis&&(t.fs=this.Qis);const s=this.aes();0!==s&&(t.at=s),0!==this.His&&(t.f=this.His),0!==this.Xis&&(t.cas=this.Xis),1!==this.tes&&(t.ar=this.tes),0!==this.Kis&&(t.rt=this.Kis),this.les()||(t.ap=this.les()),this.ces()||(t.af=this.ces());const i=this.kB();return i.iz()&&(t.ce=i.iz()),t}lC(t){const s=this.fU().qEt(t.a);s&&(this.Uis=s),this.Qis=t.hasOwnProperty("fs")?t.fs:0,this.Zis.Set(t.hasOwnProperty("at")?t.at:0);const i=t.hasOwnProperty("f")?t.f:0;this.His=DI.Kn(i,0,this.Uis.OJ()-1),this.Xis=t.hasOwnProperty("cas")?t.cas:0,this.tes=t.hasOwnProperty("ar")?t.ar:1;const e=t.hasOwnProperty("rt")?t.rt:0;this.Kis=DI.Kn(e,0,this.Uis.OJ()-1),this.ues(!t.hasOwnProperty("ap")||!!t.ap),this.fes(!t.hasOwnProperty("af")||!!t.af);const n=this.Uis.uRt(this.His);this.zis=n,this.Gis();const r=this.kB();r.PH(n.GH()),r.EH(n.RH()),r.rLt(n.KJ()),r.ez(!!t.ce),this.les()&&this.rPt()}sot(t){const s=this.kB();switch(t){case BI:return s.iz();case NI:return DI.Kn(this.His,0,this.Uis.OJ()-1);case LI:return this.Uis.Ac()}}oot(t,s,i){const e=this.kB();switch(t){case BI:e.ez(!!s);break;case NI:{this.ues(!1);const t=this.Uis.OJ()-1,e=s=DI.Kn(s,0,t),n=this.Uis.uRt(this.His),r=this.Uis.uRt(e);this.wes(n,r,i),this.His=DI.Kn(e,0,t);break}case LI:this.ees=s,this.mes(i),this.Uis.OJ()>1&&this.Uis.TJ()>0?this.rPt():this.VGt()}}bGt(){return self.Wes}};const zI=new WeakMap,JI=new Map([["current-frame",0],["beginning",1]]);self.Wes=class extends self.Kz{constructor(){super(),zI.set(this,self.cU.mU().iJ())}VJ(){return zI.get(this).UJ()}HJ(t){return this.zJ(t)[0]}JJ(t){return this.zJ(t)[1]}jes(t){return this.zJ(t)[2]}zJ(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return zI.get(this).pxt(t)}XJ(){return zI.get(this).Des()}ZJ(t){return FI.he(t),zI.get(this).Fes(t)[0]}tq(t){return FI.he(t),zI.get(this).Fes(t)[1]}QJ(t){return FI.he(t),zI.get(this).Fes(t)}Ves(){zI.get(this).ues(!1)}Ues(t="current-frame"){FI.ue(t);const s=JI.get(t);if(void 0===s)throw new Error("invalid mode");zI.get(this).Ces(s)}Hes(t,s="beginning"){FI.ue(t),FI.ue(s);const i=JI.get(s);if(void 0===i)throw new Error("invalid mode");const e=zI.get(this);if(!e.fU().JEt(t))throw new Error(`animation name "${t}" does not exist`);e.Tes(t,i)}Nis(t){FI.ue(t);const s=zI.get(this).fU().JEt(t);return s?s.mRt():null}get animation(){return zI.get(this).xes().mRt()}get animationName(){return zI.get(this).Ies()}set bes(t){FI.he(t),zI.get(this)._es(t)}get bes(){return zI.get(this).Ges()}set zes(t){FI.ue(t),zI.get(this)._es(t)}get zes(){return zI.get(this).Pes()}set Jes(t){FI.he(t),zI.get(this).Aes(t)}get Jes(){return zI.get(this).Res()}set qes(t){FI.he(t),zI.get(this).Ees(t)}get qes(){return zI.get(this).Oes()}get imageWidth(){return zI.get(this).MPt().Vg()}get imageHeight(){return zI.get(this).MPt().Qg()}Yes(){const t=zI.get(this).MPt();return[t.Vg(),t.Qg()]}async Xes(t){FI.Be(t,Blob);const s=zI.get(this),i=s.l$(),e=s.MPt(),n=DI.Hn(DI.AAt);if(n.UAt(i,t),await n.KX(i.gM(),{eT:i.KL()}),s.Jn())return void n.zn();e.HAt(n);const r=s.KTt();r._is(),r.fU().Sf().dispatchEvent(new DI.Event("animationframeimagechange")),i.VB()}Kes(t,s){FI.ue(s),zI.get(this).kB().Jkt(!!t,s)}}}{const qI=self._s;qI.i$.Brt.t$={Zes(t){return qI.Ze(this.Ies(),t)},Qes(t,s){return qI.compare(this.His,t,s)},tns(t,s){if("string"!=typeof s)return!1;const i=this.zis.sq();return qI.compare(i.toLowerCase(),t,s.toLowerCase())},sns(t,s){return qI.compare(this.Res(),t,s)},ves(t){return qI.Ze(this.ses,t)},Ses:()=>!0,Mes:()=>!0,ins(){return this.kB().Vg()<0},ens(){return this.kB().Qg()<0},nns:()=>!0,rns:()=>!0,iz(){return this.kB().iz()}}}{const YI=self._s;YI.i$.Brt.wht={hns(t,s,i,e,n){if(!t||!s)return;const[r,h]=this.pxt(i),o=this.Bc.lj(t,s,r,h,e,n);if(!o)return;if(e&&s.uj(o),t.zW().IW()){const t=o.kB();t.Oj(this.kB().Dj()),t.CH()}const a=this.Bc.aN();a.cj(!0),o.fj(),a.cj(!1),t!==this.Bc.Lgt().fU()&&this.jGt.Ais(t,o,e)},Bes(){this.ues(!1)},Nes(t){this.Ces(t)},kes(t,s){this.Tes(t,s)},Les(t){this._es(t)},$es(t){this.Aes(t)},ons(t){this.Ees(t)},ans(t,s){try{0===t?this.KTt().Ris(s):this.KTt().Eis(s)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation: `,s)}},lns(t,s,i){try{0===t?this.KTt().Dis(s,i):this.KTt().kis(s,i)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation frame: `,s)}},uns(t){const s=this.kB(),i=s.Vg(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Xg(e),s.CH())},cns(t){const s=this.kB(),i=s.Qg(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Ug(e),s.CH())},Rj(t){const s=this.zis.WJ(),i=this.kB(),e=i.Vg()<0?-1:1,n=i.Qg()<0?-1:1,r=s.Vg()*t*e,h=s.Qg()*t*n;i.Vg()===r&&i.Qg()===h||(i.$A(r,h),i.CH())},async fns(t,s,i){const e=this.zis.WJ(),n=this.kB(),r=this.Bc,h=this.jGt;if(e.TZ()===t)return 0===s&&(n.$A(e.Vg(),e.Qg()),n.CH()),void this.qU(YI.i$.Brt.t$.nns);const o=YI.Hn(YI.AAt);try{if(await o.VAt(r,t),!o.ZZ())throw new Error("image failed to load");if(this.Jn())return void o.zn();await o.KX(r.gM(),{eT:r.KL()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jn()||this.qU(YI.i$.Brt.t$.rns))}this.Jn()?o.zn():(e.HAt(o),h._is(),h.fU().Sf().dispatchEvent(new YI.Event("animationframeimagechange")),r.VB(),0===s&&(n.$A(e.Vg(),e.Qg()),n.CH()),await this.ZB(YI.i$.Brt.t$.nns))},pns(t){this.kB().ez(t)},Jkt(t,s){this.kB().Jkt(0===t,s)},mns(t){this.kB().NM(t),this.Bc.VB()}}}self._s.i$.Brt.Sht={gns(){return this.Ges()},yns(){return this.Pes()},wns(){return this.Uis.OJ()},Sns(){return this.Uis.Ac()},vns(){return this.Res()},bns(){return this.Uis.TJ()},Mns(t){return this.pxt(t)[0]},Cns(t){return this.pxt(t)[1]},Tns(t){return this.pxt(t)[2]},xns(){return this.UJ()},Ins(){return this.MPt().Vg()},_ns(){return this.MPt().Qg()},Gns(t){return this.Fes(t)[0]},Pns(t){return this.Fes(t)[1]},Ans(){return this.Des()}};{const XI=self._s;XI.i$.Text=class extends XI.K_t{constructor(t){super(t)}zn(){super.zn()}}}{const KI=self._s;KI.i$.Text.dEt=class extends KI.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){}g5(t){}M5(){}}}{const ZI=self._s,QI=self.Ns,t_=[0,0,0],s_=0,i_=1,e_=2,n_=3,r_=4,h_=5,o_=6,a_=7,l_=8,u_=9,c_=10,f_=11,d_=12,p_=13,m_=15,g_=["left","center","right"],y_=["top","center","bottom"],w_=["ltr","rtl"],S_=["word","cjk","character"],v_=new ZI.Rect,b_=new ZI.Pl,M_=new ZI.To,C_=ZI.Hn(ZI.Pa),T_=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]);ZI.i$.Text.Instance=class extends ZI.pPt{constructor(t,s){if(super(t),this.$c="",this.Rns=!0,this.Ens="Arial",this.Ons=12,this.Dns=0,this.xP=!1,this.IP=!1,this.OM=ZI.Hn(ZI.To),this.EP=0,this.OP=0,this.kP="word",this.LP=0,this.Fns="auto",this.kns=1,this.Lns=null,this.Nns="",this.Bns=!1,this.$ns=!1,this.Wns=null,this.jns=-1,this.Vns=-1,this.Uns=0,this.Hns=ZI.Hn(ZI.Nw.qb,this.Bc.gM(),{timeout:5}),this.Hns.uA=()=>this.Bc.VB(),this.zns=()=>this.Jns(),this.qns=!1,s){this.$c=s[s_],this.Rns=!!s[i_],this.Ens=s[e_],this.Ons=s[n_],this.Dns=s[r_],this.xP=!!s[h_],this.IP=!!s[o_],this.EP=s[l_],this.OP=s[u_],this.kP=S_[s[c_]],this.LP=s[f_],this.Yns(this.Bc.QY(s[d_]));const t=s[a_];this.OM.Ao(t[0],t[1],t[2]),this.kB().wV(s[p_]),this.$ns=!!s[m_]}this.Xns(),this.Kns()}zn(){this.Yns(null),this.Zns(),this.Wns&&(this.Wns.zn(),this.Wns=null),this.Hns.zn(),this.Hns=null,super.zn()}Xns(){const t=this.Hns;t.Vc(this.$c),t.pA(this.Rns),this.Hns.wP()&&this.Lns?this.Hns.Wg(this.l$().$zt(this.Lns)):this.Hns.Wg(null),t.mA("nearest"!==this.Bc.KL()),t.gA(this.Ens),t.vA(this.Dns),t.MA(this.xP),t.TA(this.IP),t.BM(this.OM),t.RA(g_[this.EP]),t.OA(y_[this.OP]),t.FA(this.kP),t.LA(w_[this.LP])}Qns(){const t=this.kB();this.Hns.yA(this.Ons),this.Hns.SA(t.dkt());const s=t.LB();let i;"auto"===this.Fns?i=s.q2(t.kH()):"fixed"===this.Fns&&(i=this.kns),t.zz()&&i!==this.Hns.WA()&&t.yLt(!0),this.Hns.$A(t.Vg(),t.Qg(),i)}Yns(t){t&&(t.v1()||t.zW().constructor!==ZI.i$.Brt)||t!==this.Lns&&(this.Lns&&this.Lns.Sf().removeEventListener("animationframeimagechange",this.zns),this.Lns=t,this.Lns&&this.Lns.Sf().addEventListener("animationframeimagechange",this.zns),this.Xns(),this.Bns=!1,this.Bc.VB())}Jns(){this.Bc.Wzt(this.Lns),this.Bc.VB(),this.qns=!0}Kns(){if(this.$ns){let t=this.$c;this.Rns&&(t=ZI.pn.Fg(t)),this.Wns?this.Wns.Vc(t):this.Wns=ZI.Hn(ZI.Nc,this.Bc,t)}else this.Wns&&(this.Wns.zn(),this.Wns=null)}HC(t){const s=this.kB();this.Qns(),this.qns&&(this.qns=!1,this.Hns.wP()&&this.Lns&&this.Hns.Wg(this.l$().$zt(this.Lns)));const i=this.Hns.Tx();if(!i)return;const e=s.LB();if(0===s.Dj()&&0===e.Dj()&&0===s.kH()&&!s.zz()&&e.a2()){const n=s.WH(),[r,h]=e.aU(n.Br(),n.$r()),[o,a]=e.aU(n.Vr(),n.Ur()),l=r-Math.round(r),u=h-Math.round(h);v_.set(r,h,o,a),v_.offset(-l,-u),b_.Xl(v_);const[c,f]=t.WO(t.hD());t.jb()?this.Bc.IB().hK(t,c,f):(t.zk(!0),b_.St(c,f)),t.TO(i),t.sb(b_,this.Hns.yR()),t.jb()?e.aK(t):t.zk(!1)}else t.TO(i),s.zz()?this.hes(s,t):this.oes(s,t)}oes(t,s){let i=t.WH();this.Bc.QL()&&(i=this.trs(i)),s.sb(i,this.Hns.yR())}hes(t,s){const i=t.gLt();if(t.wLt()){t.NH(v_,b_,!1);let s=b_;this.Bc.QL()&&(s=this.trs(s)),i.BC(t.Jz(),s,this.Hns.yR()),t.yLt(!1)}i.HC(s,t.kH())}trs(t){const s=t.Br()-Math.round(t.Br()),i=t.$r()-Math.round(t.$r());return 0===s&&0===i?t:(b_.S(t),b_.offset(-s,-i),b_)}CPt(){const t=this.Hns.Tx();return t?[t.Vg(),t.Qg()]:[100,100]}TPt(){return this.Hns.yR()}_Pt(){return!1}aC(){const t={t:this.$c,c:this.OM.toJSON(),fn:this.Ens,ps:this.Ons};return this.Rns&&(t.bbc=this.Rns),0!==this.EP&&(t.ha=this.EP),0!==this.OP&&(t.va=this.OP),"word"!==this.kP&&(t.wr=this.kP),0!==this.Dns&&(t.lho=this.Dns),this.xP&&(t.b=this.xP),this.IP&&(t.i=this.IP),-1!==this.Vns&&(t.tw={st:this.jns,en:this.Vns,l:this.Uns}),this.Lns&&(t.ioc=this.Lns.G1()),"fixed"===this.Fns&&(t.fs=this.kns),t}lC(t){if(this.Zns(),this.$c=t.t,this.OM.Sa(t.c),this.Ens=t.fn,this.Ons=t.ps,this.Rns=!!t.hasOwnProperty("bbc")&&t.bbc,this.EP=t.hasOwnProperty("ha")?t.ha:0,this.OP=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.kP="boolean"==typeof s?s?"word":"character":s}else this.kP="word";if(this.Dns=t.hasOwnProperty("lho")?t.lho:0,this.xP=!!t.hasOwnProperty("b")&&t.b,this.IP=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const s=t.tw;this.jns=s.st,this.Vns=s.en,this.Uns=s.l}if(t.hasOwnProperty("ioc")){const s=this.l$().QY(t.ioc);s&&this.Yns(s)}else this.Yns(null);t.hasOwnProperty("fs")?(this.Fns="fixed",this.kns=t.fs):this.Fns="auto",this.Xns(),this.Kns(),this.Bns=!1,-1!==this.Vns&&this.rPt()}sot(t){switch(t){case s_:return this.BA();case i_:return this.Rns;case e_:return this.srs();case n_:return this.irs();case r_:return this.ers();case h_:return this.nrs();case o_:return this.rrs();case a_:return t_[0]=this.OM.No(),t_[1]=this.OM.Bo(),t_[2]=this.OM.$o(),t_;case l_:return this.hrs();case u_:return this.ors();case c_:return this.ars();case m_:return this.lrs()}}oot(t,s){switch(t){case s_:this.urs(s);break;case i_:if(this.Rns===!!s)return;this.Rns=!!s,this.Xns();break;case e_:this.crs(s);break;case n_:this.frs(s);break;case r_:this.drs(s);break;case h_:this.prs(s);break;case o_:this.mrs(s);break;case a_:const t=this.OM,i=s;if(t.No()===i[0]&&t.Bo()===i[1]&&t.$o()===i[2])return;this.OM.Ao(i[0],i[1],i[2]),this.Xns();break;case l_:this.grs(s);break;case u_:this.yrs(s);break;case c_:this.wrs(s)}}uPt(t,s,i,e){0===s&&0===i&&0===e||t!==a_||(this.OM.Ro(s,i,e),this.Xns())}urs(t){this.$c!==t&&(this.$c=t,this.Hns.Vc(t),this.Kns(),this.Bns=!1,this.Bc.VB())}BA(){return this.$c}Srs(t,s){this.Qns(),this.urs(t),this.jns=this.Bc.BN(),this.Vns=this.jns+s/this.Pq().AU(),this.Uns=this.Hns.HA(),this.Hns.IA(0),this.rPt()}Zns(){this.jns=-1,this.Vns=-1,this.Uns=0,this.Hns.IA(-1),this.VGt()}vrs(){-1!==this.Vns&&(this.Zns(),this.qU(ZI.i$.Text.t$.brs),this.Bc.VB())}crs(t){this.Ens!==t&&(this.Ens=t,this.Hns.gA(t),this.Bc.VB())}srs(){return this.Ens}prs(t){t=!!t,this.xP!==t&&(this.xP=t,this.Hns.MA(t),this.Bc.VB())}nrs(){return this.xP}mrs(t){t=!!t,this.IP!==t&&(this.IP=t,this.Hns.TA(t),this.Bc.VB())}rrs(){return this.IP}frs(t){this.Ons!==t&&(this.Ons=t,this.Bc.VB())}irs(){return this.Ons}Mrs(t){this.OM.zo(t)||(this.OM.Lo(t),this.Hns.BM(this.OM),this.Bc.VB())}Crs(){return this.OM}drs(t){this.Dns!==t&&(this.Dns=t,this.Xns(),this.Bc.VB())}ers(){return this.Dns}grs(t){this.EP!==t&&(this.EP=t,this.Xns(),this.Bc.VB())}hrs(){return this.EP}yrs(t){this.OP!==t&&(this.OP=t,this.Xns(),this.Bc.VB())}ors(){return this.OP}Trs(t){this.wrs(S_[t])}wrs(t){this.kP!==t&&(this.kP=t,this.Xns(),this.Bc.VB())}ars(){return this.kP}xrs(t){this.LP!==t&&(this.LP=t,this.Xns(),this.Bc.VB())}Irs(){return this.LP}_rs(t){this.$ns=!!t,this.Kns()}lrs(){return this.$ns}Grs(t){this.Fns!==t&&(this.Fns=t,this.Bc.VB())}Prs(){return this.Fns}Ars(t){this.kns!==t&&(this.kns=t,"fixed"===this.Fns&&this.Bc.VB())}Rrs(){return this.kns}Ers(){return this.Qns(),this.Hns.jA()}Ors(){return this.Qns(),this.Hns.UA()}Drs(t,s){this.Qns();const i=this.kB();C_.set(t-i.YM(),s-i.ZM()),C_.rotate(-i.Dj()),C_.offset(i.Vg()*i.GH(),i.Qg()*i.RH()),C_.St(i.Vg(),i.Qg()),C_.scale(this.Hns.Vg(),this.Hns.Qg());const e=this.Hns.JA(C_.Da(),C_.ka());if(e){const t=e.Hy("tag");if(t)return t.Pg}return""}Frs(t,s,i){const e=this.Drs(s,i);return e&&ZI.Ze(t,e)}krs(t,s){this.Qns(),s=Math.floor(s);const i=this.Hns.YA(t,s);if(!i)return null;const e=this.kB(),n=this.Hns.PA(),r=i.$y(),h=i.jy()-(i.Qg()-i.sy())*n,o=i.Vg()*n/this.Hns.Vg()*e.Vg(),a=i.Qg()*n/this.Hns.Qg()*e.Qg();return C_.set(r,h),C_.St(this.Hns.Vg(),this.Hns.Qg()),C_.scale(e.Vg(),e.Qg()),C_.offset(-e.Vg()*e.GH(),-e.Qg()*e.RH()),C_.rotate(e.Dj()),C_.offset(e.YM(),e.ZM()),{x:C_.Da(),y:C_.ka(),width:o,height:a}}Lrs(t){return this.Qns(),this.Hns.XA(t)}Nrs(t){let s=T_.get(t);return null===s?"":(s||(s="span"),`</${s||"span"}>`)}Brs(t,s){let i=T_.get(t);if(null===i)return"";switch(i||(i="span"),t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async $rs(){if(this.Bns)return this.Nns;const t=new ZI.pn(this.$c,{pg:!0})._g(),s=new Map;let i='<span class="c3-text"';const e=[];e.push(`font-family: '${this.srs()}';`),this.nrs()&&e.push("font-weight: bold;"),this.rrs()&&e.push("font-style: italic;"),"character"===this.ars()&&e.push("word-break: break-all;"),i+=` style="${e.join(" ")}">`;const n=this.Lns?this.l$().$zt(this.Lns):null;if(this.Lns){const i=ZI.Hn(ZI.Hd),e=[],r=new Map;for(const s of t)if(s.Kg()){const t=s.Ky(n);if(t){const s=t.Dw().WJ().XAt();if(r.has(s))continue;r.set(s,null),e.push(i.$u(async()=>{const t=await s.lQ();r.set(s,t)}))}}await Promise.all(e);const h=[];for(const e of t)if(e.Kg()){const t=e.Ky(n);if(t){const e=t.Dw(),n=e.WJ().XAt();h.push(i.$u(async()=>{const i=await e.WJ().ZAt(r.get(n));s.set(t,i)}))}}await Promise.all(h);for(const t of r.values())t instanceof ImageBitmap&&t.close&&t.close()}const r=new Map;for(const e of t){const t=e.Jy();let h=[...r.keys()];h.reverse();for(const s of h)t.has(s)&&t.get(s)===r.get(s)||(r.delete(s),i+=this.Nrs(s));for(const[s,e]of t)r.has(s)||(r.set(s,e),i+=this.Brs(s,e));if(e.Yg()&&(i+=ZI.Am(ZI.Gm(e.wy().join("")),"\n","<br>")),e.Kg()&&n){const r=e.Ky(n);if(r){const n=s.get(r);if(n){const s=[];let h="0.2em";const o=t.get("iconoffsety");if(o){let t=o.trim();h=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}s.push(`top: ${h}`),"nearest"===this.Bc.KL()&&s.push("image-rendering: pixelated"),i+=`<img class="c3-text-icon" data-icon="${e.Xy()}" width="${r.Vg()}" height="${r.Qg()}" style="${s.join(";")}" src="${n}">`}}}}const h=[...r.keys()];h.reverse();for(const t of h)i+=this.Nrs(t);return i+="</span>",this.Nns=i,this.Bns=!0,this.Nns}c7(){const t=this.Bc.BN();if(t>=this.Vns)this.Zns(),this.qU(ZI.i$.Text.t$.brs),this.Bc.VB();else{let s=ZI.gr(this.jns,this.Vns,t,0,this.Uns);s=Math.floor(s),s!==this.Hns._A()&&(this.Hns.IA(s),this.Bc.VB())}}lPt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.BA(),N2t:t=>this.urs(t)},{name:t+".properties.font.name",value:this.srs(),N2t:t=>this.crs(t)},{name:t+".properties.size.name",value:this.irs(),N2t:t=>this.frs(t)},{name:t+".properties.line-height.name",value:this.ers(),N2t:t=>this.drs(t)},{name:t+".properties.bold.name",value:this.nrs(),N2t:t=>this.prs(t)},{name:t+".properties.italic.name",value:this.rrs(),N2t:t=>this.mrs(t)},{name:t+".debugger.text-width",value:this.Ers()},{name:t+".debugger.text-height",value:this.Ors()}]}]}bGt(){return self.Wrs}};const x_=new WeakMap,I_=new Map([["left",0],["center",1],["right",2]]),__=new Map([["top",0],["center",1],["bottom",2]]),G_=["ltr","rtl"];self.Wrs=class extends self.Kz{constructor(){super(),x_.set(this,self.cU.mU().iJ())}get text(){return x_.get(this).BA()}set text(t){QI.ue(t);const s=x_.get(this);s.Zns(),s.urs(t)}jrs(t,s){QI.ue(t),QI.he(s);const i=x_.get(this);i.Zns(),i.Srs(t,s)}Vrs(){x_.get(this).vrs()}set uK(t){QI.ue(t),x_.get(this).crs(t)}get uK(){return x_.get(this).srs()}set fK(t){x_.get(this).prs(t)}get fK(){return x_.get(this).nrs()}set dK(t){x_.get(this).mrs(t)}get dK(){return x_.get(this).rrs()}set cK(t){QI.he(t),x_.get(this).frs(t)}get cK(){return x_.get(this).irs()}set Urs(t){if(QI.xe(t),t.length<3)throw new Error("expected 3 elements");M_.Ao(t[0],t[1],t[2]),x_.get(this).Mrs(M_)}get Urs(){const t=x_.get(this).Crs();return[t.No(),t.Bo(),t.$o()]}set lineHeight(t){QI.he(t),x_.get(this).drs(t)}get lineHeight(){return x_.get(this).ers()}set gK(t){QI.ue(t);const s=I_.get(t);if(void 0===s)throw new Error("invalid mode");x_.get(this).grs(s)}get gK(){return g_[x_.get(this).hrs()]}set verticalAlign(t){QI.ue(t);const s=__.get(t);if(void 0===s)throw new Error("invalid mode");x_.get(this).yrs(s)}get verticalAlign(){return y_[x_.get(this).ors()]}set yK(t){if(!S_.includes(t))throw new Error("invalid mode");x_.get(this).wrs(t)}get yK(){return x_.get(this).ars()}set wK(t){QI.ue(t);const s=G_.indexOf(t);if(-1===s)throw new Error("invalid text direction");x_.get(this).xrs(s)}get wK(){return G_[x_.get(this).Irs()]}set Hrs(t){x_.get(this)._rs(!!t)}get Hrs(){return x_.get(this).lrs()}zrs(t){QI.he(t);const s=x_.get(this);s.Grs("fixed"),s.Ars(t)}Jrs(){x_.get(this).Grs("auto")}get bK(){return x_.get(this).Ers()}get MK(){return x_.get(this).Ors()}qrs(){const t=x_.get(this);return[t.Ers(),t.Ors()]}Yrs(t,s,i){return QI.ue(t),QI.he(s),QI.he(i),x_.get(this).Frs(t,s,i)}Xrs(t,s){return QI.he(t),QI.he(s),x_.get(this).Drs(t,s)}Krs(t,s=0){return QI.ue(t),QI.he(s),x_.get(this).krs(t,s)}Zrs(t){return QI.ue(t),x_.get(this).Lrs(t)}Qrs(t){const s=x_.get(this),i=s.l$().B$(t);s.Yns(i)}ths(){return x_.get(this).$rs()}}}{const P_=self._s;P_.i$.Text.t$={shs(t,s){return s?this.$c===t:P_.Ze(this.$c,t)},ihs(){return-1!==this.Vns},brs:()=>!0,ehs(t,s,i){return this.Frs(t,s,i)}}}{const A_=self._s,R_=A_.Hn(A_.To);A_.i$.Text.wht={Vc(t){this.Zns(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.urs(t.toString())},nhs(t){this.Zns(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.urs(this.$c+t)},rhs(t,s){this.Zns(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.Srs(t.toString(),s)},hhs(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.Ens&&i===this.xP&&e===this.IP||(this.crs(t),this.prs(i),this.mrs(e))},yA(t){this.frs(t)},ohs(t){R_.ta(t),R_.Kn(),this.Mrs(R_)},ahs(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},mns(t){this.kB().NM(t),this.Bc.VB()},lhs(){this.vrs()},vA(t){this.drs(t)},uhs(t){this.grs(t)},chs(t){this.yrs(t)},fhs(t){this.Trs(t)},LA(t){this.xrs(t)},dhs(t){this.Yns(t)},phs(){return this.$rs()},mhs(t){this._rs(t)},ghs(t,s){this.Grs(["auto","fixed"][t]),this.Ars(s)}}}{const E_=self._s;E_.i$.Text.Sht={Text(){return this.$c},yhs(){return this.Rns?E_.pn.Fg(this.$c):this.$c},whs(){return this.Ens},Shs(){return this.Ons},vhs(){return this.Ers()},bhs(){return this.Ors()},Mhs(){return this.Dns},Chs(t,s){return this.Drs(t,s)},Ths(t){return this.Lrs(t)},xhs(t,s){const i=this.krs(t,s);return i?i.x:0},Ihs(t,s){const i=this.krs(t,s);return i?i.y:0},_hs(t,s){const i=this.krs(t,s);return i?i.width:0},Ghs(t,s){const i=this.krs(t,s);return i?i.height:0},Phs(){return this.Nns}}}{const O_=self._s;O_.i$.Ahs=class extends O_.K_t{constructor(t){super(t)}zn(){super.zn()}}}{const D_=self._s;D_.i$.Ahs.dEt=class extends D_.FGt{constructor(t){super(t),this.Rhs=null,this.Ow=null}zn(){this.M5(),super.zn()}vGt(){this.WJ().a$(this.Bc)}async g5(t){const s=this.WJ();this.Ow=await s.KAt()}Ehs(t,s,i,e){!this.Rhs&&this.Ow&&(this.Rhs=new self.Ohs(this),this.Rhs.Dhs(this.Ow,t,s,i,e))}M5(){this.Rhs&&(this.Rhs.zn(),this.Rhs=null)}Fhs(){return this.Rhs}}}{const F_=self._s,k_=0,L_=1,N_=2,B_=3,$_=4,W_=5,j_=6,V_=8,U_=F_.Hn(F_.Rect),H_=F_.Hn(F_.Rect),z_=F_.Hn(F_.Pl);F_.i$.Ahs.Instance=class extends F_.pPt{constructor(t,s){super(t),this.khs=16,this.Lhs=16,this.Nhs=16,this.Bhs=16,this.$hs=1,this.Whs=1,this.jhs=!0,this.Vhs=null,s&&(this.khs=s[k_],this.Lhs=s[L_],this.Nhs=s[N_],this.Bhs=s[B_],this.$hs=s[$_],this.Whs=s[W_],this.jhs=!!s[V_],this.kB().wV(!!s[j_])),this.jGt.Ehs(this.khs,this.Lhs,this.Nhs,this.Bhs)}zn(){super.zn()}Uhs(t){this.Vhs=t}HC(t){const s=this.kB(),i=s.WH();this.Hhs(t,i.Br(),i.$r(),s.Vg(),s.Qg())}Hhs(t,s,i,e,n){let r=this.jGt.Fhs();if(!r&&(this.jGt.Ehs(this.khs,this.Lhs,this.Nhs,this.Bhs),r=this.jGt.Fhs(),!r))return;const h=r.zhs(),o=r.Jhs(),a=Math.min(this.khs,h),l=Math.min(this.Lhs,h),u=Math.min(this.Nhs,o),c=Math.min(this.Bhs,o),f=h-l,d=o-c,p=this.jhs?1:0,m=this.$hs,g=this.Whs;if(a>0&&u>0&&this.qhs(t,r.Tx(),0,0,a+p,u+p,s,i,a+p,u+p),l>0&&u>0&&this.qhs(t,r.Tx(),f-p,0,l+p,u+p,s+e-l-p,i,l+p,u+p),l>0&&c>0&&this.qhs(t,r.Tx(),f-p,d-p,l+p,c+p,s+e-l-p,i+n-c-p,l+p,c+p),a>0&&c>0&&this.qhs(t,r.Tx(),0,d-p,a+p,c+p,s,i+n-c-p,a+p,c+p),0===m){const h=2===g?0:p;a>0&&d>u&&this.Yhs(t,r.Xhs(),s,i+u,a+h,n-u-c,0,0),l>0&&d>u&&this.Yhs(t,r.Khs(),s+e-l-h,i+u,l+h,n-u-c,h,0),u>0&&f>a&&this.Yhs(t,r.Zhs(),s+a,i,e-a-l,u+h,0,0),c>0&&f>a&&this.Yhs(t,r.Qhs(),s+a,i+n-c-h,e-a-l,c+h,0,h)}else 1===m&&(a>0&&d>u&&this.qhs(t,r.Tx(),0,u,a,d-u,s,i+u,a,n-u-c),l>0&&d>u&&this.qhs(t,r.Tx(),f,u,l,d-u,s+e-l,i+u,l,n-u-c),u>0&&f>a&&this.qhs(t,r.Tx(),a,0,f-a,u,s+a,i,e-a-l,u),c>0&&f>a&&this.qhs(t,r.Tx(),a,d,f-a,c,s+a,i+n-c,e-a-l,c));d>u&&f>a&&(0===g?this.Yhs(t,r.tos(),s+a,i+u,e-a-l,n-u-c,0,0):1===g&&this.qhs(t,r.Tx(),a,u,f-a,d-u,s+a,i+u,e-a-l,n-u-c))}qhs(t,s,i,e,n,r,h,o,a,l){const u=s.Vg(),c=s.Qg();if(t.TO(s),U_.set(h,o,h+a,o+l),H_.set(i/u,e/c,(i+n)/u,(e+r)/c),null===this.Vhs){const s=this.kB(),i=s.WH(),e=i.Br(),n=i.$r();U_.offset(-e,-n),z_.Kl(U_,s.Dj()),z_.offset(e,n),t.sb(z_,H_)}else this.Vhs(U_,H_)}Yhs(t,s,i,e,n,r,h,o){const a=s.Vg(),l=s.Qg();if(t.TO(s),U_.set(i,e,i+n,e+r),H_.set(-h/a,-o/l,(n-h)/a,(r-o)/l),null===this.Vhs){const s=this.kB(),i=s.WH(),e=i.Br(),n=i.$r();U_.offset(-e,-n),z_.Kl(U_,s.Dj()),z_.offset(e,n),t.sb(z_,H_)}else this.Vhs(U_,H_)}MPt(){this.mpt.WJ()}sot(t){}oot(t,s){}}}self._s.i$.Ahs.t$={},self._s.i$.Ahs.wht={mns(t){this.kB().NM(t),this.Bc.VB()}},self._s.i$.Ahs.Sht={};{let J_=function(t){const s=q_.co(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),s};CloneDrawable=J_;const q_=self._s;self.Ohs=class{constructor(t){this.jGt=t,this.Bc=this.jGt.l$(),this.cT=null,this.sos=null,this.ios=null,this.eos=null,this.nos=null,this.ros=null,this.iQ=0,this.eQ=0,this.Xb=this.Bc.gM(),this.Sw=!1,this.cA=!1}zn(){this.Xb.mR()||(this.Xb.wx(this.cT),this.Xb.wx(this.sos),this.Xb.wx(this.ios),this.Xb.wx(this.eos),this.Xb.wx(this.nos),this.Xb.wx(this.ros)),this.cT=null,this.sos=null,this.ios=null,this.eos=null,this.nos=null,this.ros=null,this.jGt=null,this.Xb=null,this.cA=!0}Jn(){return this.cA}Dhs(t,s,i,e,n){this.hos(t,s,i,e,n)}oos(){return!!this.cT}hos(t,s,i,e,n){if(this.cA)return;const r=t.width,h=t.height;this.iQ=r,this.eQ=h,s=Math.min(Math.floor(s),r),i=Math.min(Math.floor(i),r),e=Math.min(Math.floor(e),h);const o=r-i,a=h-(n=Math.min(Math.floor(n),h)),l=this.Bc.KL(),u=this.Bc.IB().hQ();this.cT=this.Xb.lD(J_(t),{eT:l,nT:u}),o>s&&a>e&&(this.sos=this.Xb.lD(this.aos(J_(t),s,e,o,a),{sT:"repeat",iT:"repeat",eT:l,nT:u})),s>0&&a>e&&(this.ios=this.Xb.lD(this.aos(J_(t),0,e,s,a),{iT:"repeat",eT:l,nT:u})),i>0&&a>e&&(this.eos=this.Xb.lD(this.aos(J_(t),o,e,r,a),{iT:"repeat",eT:l,nT:u})),e>0&&o>s&&(this.nos=this.Xb.lD(this.aos(J_(t),s,0,o,e),{sT:"repeat",eT:l,nT:u})),n>0&&o>s&&(this.ros=this.Xb.lD(this.aos(J_(t),s,a,o,h),{sT:"repeat",eT:l,nT:u}))}aos(t,s,i,e,n){const r=e-s,h=n-i,o=q_.co(r,h);return o.getContext("2d").drawImage(t,s,i,r,h,0,0,r,h),o}zhs(){return this.iQ}Jhs(){return this.eQ}Tx(){return this.cT}tos(){return this.sos}Xhs(){return this.ios}Khs(){return this.eos}Zhs(){return this.nos}Qhs(){return this.ros}}}{const Y_=self._s;Y_.i$.los=class extends Y_.K_t{constructor(t){super(t)}zn(){super.zn()}}}{const X_=self._s;X_.i$.los.dEt=class extends X_.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{let K_=function(t,s,i){if(s<t.length)Z_.Sh(t,s);else if(s>t.length)if("function"==typeof i)for(let e=t.length;e<s;++e)t.push(i());else for(let e=t.length;e<s;++e)t.push(i)};ResizeArray=K_;const Z_=self._s,Q_=self.Ns,tG=self.cU;Z_.i$.los.Instance=class extends Z_.$Gt{constructor(t,s){super(t),this.uos=10,this.fos=1,this.dos=1,this.Nu=null,this.pos=[],this.mos=[],this.gos=[],this.yos=-1,s&&(this.uos=s[0],this.fos=s[1],this.dos=s[2]),this.Nu=Z_.Co(this.uos,()=>Z_.Co(this.fos,()=>Z_.Co(this.dos,0)))}zn(){this.Nu=null,super.zn()}wos(t,s,i){return t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),t>=0&&t<this.uos&&s>=0&&s<this.fos&&i>=0&&i<this.dos?this.Nu[t][s][i]:0}Set(t,s,i,e){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),t>=0&&t<this.uos&&s>=0&&s<this.fos&&i>=0&&i<this.dos&&(this.Nu[t][s][i]=e)}$A(t,s,i){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),t<0&&(t=0),s<0&&(s=0),i<0&&(i=0),this.uos===t&&this.fos===s&&this.dos===i)return;this.uos=t,this.fos=s,this.dos=i;const e=this.Nu;K_(e,t,()=>Z_.Co(s,()=>Z_.Co(i,0)));for(let n=0;n<t;++n){K_(e[n],s,()=>Z_.Co(i,0));for(let t=0;t<s;++t)K_(e[n][t],i,0)}}Vg(){return this.uos}Qg(){return this.fos}O3(){return this.dos}Sos(t,s,i,e,n){for(;s>0;){const r=Math.floor(this.Bc.uB()*s);if(--s,0===t){const t=this.wos(s,e,n),i=this.wos(r,e,n);this.Set(s,e,n,i),this.Set(r,e,n,t)}else if(1===t){const t=this.wos(i,s,n),e=this.wos(i,r,n);this.Set(i,s,n,e),this.Set(i,r,n,t)}else if(2===t){const t=this.wos(i,e,s),n=this.wos(i,e,r);this.Set(i,e,s,n),this.Set(i,e,r,t)}}}lPt(){const t="plugins.arr.debugger",s="plugins.arr.properties",i=[{title:t+".array-properties.title",properties:[{name:s+".width.name",value:this.uos,N2t:t=>this.$A(t,this.fos,this.dos)},{name:s+".height.name",value:this.fos,N2t:t=>this.$A(this.uos,t,this.dos)},{name:s+".depth.name",value:this.dos,N2t:t=>this.$A(this.uos,this.fos,t)},{name:s+".elements.name",value:this.uos*this.fos*this.dos}]}],e=[];if(1===this.fos&&1===this.dos)for(let t=0;t<this.uos;++t)e.push({name:"$"+t,value:this.Nu[t][0][0],N2t:s=>this.Nu[t][0][0]=s});else for(let t=0;t<this.uos;++t)e.push({name:"$"+t,value:this.Nu[t].toString()});return e.length&&i.push({title:t+".array-data.title",properties:e}),i}vos(){return JSON.stringify({c2array:!0,size:[this.uos,this.fos,this.dos],data:this.Nu})}aC(){return{size:[this.uos,this.fos,this.dos],data:this.Nu}}lC(t){const s=t.size;this.uos=s[0],this.fos=s[1],this.dos=s[2],this.Nu=t.data}bos(){return this.yos>=0&&this.yos<this.pos.length?this.pos[this.yos]:0}Mos(){return this.yos>=0&&this.yos<this.mos.length?this.mos[this.yos]:0}Cos(){return this.yos>=0&&this.yos<this.gos.length?this.gos[this.yos]:0}bGt(){return self.Tos}};const sG=new WeakMap;self.Tos=class extends tG{constructor(){super(),sG.set(this,tG.mU().iJ())}get width(){return sG.get(this).Vg()}get height(){return sG.get(this).Qg()}get depth(){return sG.get(this).O3()}Aj(t,s=1,i=1){Q_.he(t),Q_.he(s),Q_.he(i),sG.get(this).$A(t,s,i)}xos(t,s=0,i=0){return Q_.he(t),Q_.he(s),Q_.he(i),sG.get(this).wos(t,s,i)}Ios(t,s,i=0,e=0){if(Q_.he(s),Q_.he(i),Q_.he(e),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid type");sG.get(this).Set(s,i,e,t)}}}{let iG=function(t,s,i,e,n,r){t.oX(i),r.fU().nj().Vpt(r.Pq()),s.aX(e,n),t.lX(i)};DoForEachTrigger=iG;const eG=self._s;eG.i$.los.t$={hxt(t,s,i){return eG.compare(this.wos(t,0,0),s,i)},_os(t,s,i,e){return eG.compare(this.wos(t,s,0),i,e)},Gos(t,s,i,e,n){return eG.compare(this.wos(t,s,i),e,n)},Pos(t){const s=this.Bc,i=s.aN(),e=s.pN(),n=e.tX(),r=s.bN(),h=r.sX(),o=r.iX(e),a=++this.yos,l=this.pos,u=this.mos,c=this.gos,f=this.uos,d=this.fos,p=this.dos;if(a===this.pos.length?(l.push(0),u.push(0),c.push(0)):(l[a]=0,u[a]=0,c[a]=0),s.rX(!1),0===t)for(let t=0;t<f;++t)for(let s=0;s<d;++s)for(let r=0;r<p;++r)l[a]=t,u[a]=s,c[a]=r,iG(i,e,n,h,o,this);else if(1===t)for(let t=0;t<f;++t)for(let s=0;s<d;++s)l[a]=t,u[a]=s,iG(i,e,n,h,o,this);else for(let t=0;t<f;++t)l[a]=t,iG(i,e,n,h,o,this);return s.rX(!0),this.yos--,r.dX(),!1},Aos(t,s){return eG.compare(this.wos(this.bos(),this.Mos(),this.Cos()),t,s)},Ros(t){const s=this.uos,i=this.fos,e=this.dos,n=this.Nu;for(let r=0;r<s;++r)for(let s=0;s<i;++s)for(let i=0;i<e;++i)if(n[r][s][i]===t)return!0;return!1},Ru(){return 0===this.uos||0===this.fos||0===this.dos},Eos(t,s,i){let e=0;switch(t){case 0:e=this.uos;break;case 1:e=this.fos;break;case 2:e=this.dos}return eG.compare(e,s,i)}}}{let nG=function(t,s){if("number"==typeof t&&"number"==typeof s)return t-s;{const i=t.toString(),e=s.toString();return i<e?-1:i>e?1:0}};CompareValues=nG;const rG=self._s;rG.i$.los.wht={Au(t){const s=this.uos,i=this.fos,e=this.dos,n=this.Nu;for(let r=0;r<s;++r)for(let s=0;s<i;++s)for(let i=0;i<e;++i)n[r][s][i]=t},$A(t,s,i){this.$A(t,s,i)},XM(t,s){this.Set(t,0,0,s)},TH(t,s,i){this.Set(t,s,0,i)},Oos(t,s,i,e){this.Set(t,s,i,e)},iX(t,s,i){const e=this.uos,n=this.fos,r=this.dos,h=this.Nu;if(0===i){const i=rG.Co(n,()=>rG.Co(r,s));0===t?h.push(i):h.unshift(i),this.uos++}else if(1===i){for(let i=0;i<e;++i){const e=rG.Co(r,s);0===t?h[i].push(e):h[i].unshift(e)}this.fos++}else{for(let i=0;i<e;++i)for(let e=0;e<n;++e)0===t?h[i][e].push(s):h[i][e].unshift(s);this.dos++}},dX(t,s){const i=this.uos,e=this.fos,n=this.dos,r=this.Nu;if(0===s){if(0===i)return;0===t?r.pop():r.shift(),this.uos--}else if(1===s){if(0===e)return;for(let s=0;s<i;++s)0===t?r[s].pop():r[s].shift();this.fos--}else{if(0===n)return;for(let s=0;s<i;++s)for(let i=0;i<e;++i)0===t?r[s][i].pop():r[s][i].shift();this.dos--}},Dos(t){const s=this.uos,i=this.fos,e=this.dos,n=this.Nu;if(0!==s&&0!==i&&0!==e)if(0===t)n.reverse();else if(1===t)for(let t=0;t<s;++t)n[t].reverse();else for(let t=0;t<s;++t)for(let s=0;s<i;++s)n[t][s].reverse()},Fos(t){const s=this.uos,i=this.fos,e=this.dos,n=this.Nu;if(0!==s&&0!==i&&0!==e)if(0===t)n.sort((t,s)=>nG(t[0][0],s[0][0]));else if(1===t)for(let t=0;t<s;++t)n[t].sort((t,s)=>nG(t[0],s[0]));else for(let t=0;t<s;++t)for(let s=0;s<i;++s)n[t][s].sort(nG)},kos(t){const s=this.uos,i=this.fos,e=this.dos,n=this.Nu;if(0!==s&&0!==i&&0!==e)if(0===t)n.sort((t,s)=>{for(let e=0;e<i;++e){const i=nG(t[e][0],s[e][0]);if(0!==i)return i}return 0});else if(1===t)for(let t=0;t<i;++t){const i=[];for(let e=0;e<s;++e)i.push(n[e][t]);i.sort((t,s)=>nG(t[0],s[0]));for(let e=0;e<s;++e)n[e][t]=i[e]}else if(2===t){const t=[];for(let s=0;s<i;++s)t.push(s);t.sort((t,i)=>{for(let e=0;e<s;++e){const s=nG(n[e][t],n[e][i]);if(0!==s)return s}return 0});for(let i=0;i<s;++i){let s=[];for(const e of t)s.push(n[i][e]);n[i]=s}}else if(3===t)for(let t=0;t<s;++t)n[t].sort((t,s)=>nG(t[0],s[0]));else for(let t=0;t<s;++t)for(let s=0;s<i;++s)n[t][s].sort(nG)},Los(t){const s=this.uos,i=this.fos,e=this.dos;if(0!==s&&0!==i&&0!==e)if(0===t)for(let n=0;n<i;++n)for(let i=0;i<e;++i)this.Sos(t,s,0,n,i);else if(1===t)for(let n=0;n<s;++n)for(let s=0;s<e;++s)this.Sos(t,i,n,0,s);else for(let n=0;n<s;++n)for(let s=0;s<i;++s)this.Sos(t,e,n,s,0)},Eu(t,s){if((t=Math.floor(t))<0)return;const i=this.uos,e=this.fos,n=this.dos,r=this.Nu;if(0===s){if(t>=i)return;r.splice(t,1),this.uos--}else if(1===s){if(t>=e)return;for(let s=0;s<i;++s)r[s].splice(t,1);this.fos--}else{if(t>=n)return;for(let s=0;s<i;++s)for(let i=0;i<e;++i)r[s][i].splice(t,1);this.dos--}},SQ(t,s,i){if((s=Math.floor(s))<0)return;const e=this.uos,n=this.fos,r=this.dos,h=this.Nu;if(0===i){if(s>e)return;h.splice(s,0,rG.Co(n,()=>rG.Co(r,t))),this.uos++}else if(1===i){if(s>n)return;for(let i=0;i<e;++i)h[i].splice(s,0,rG.Co(r,t));this.fos++}else{if(s>r)return;for(let i=0;i<e;++i)for(let e=0;e<n;++e)h[i][e].splice(s,0,t);this.dos++}},Nos(t,s,i){const e=t.split(s);this.$A(e.length,1,1);for(let t=0,s=e.length;t<s;++t){let s=e[t];0===i?String(Number(s))===s&&(s=Number(s)):2===i&&(s=Number(s)),this.Set(t,0,0,s)}},Bos(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse JSON: ",t)}if(!s.c2array)return void console.warn("[Array] Attempted to load JSON that does not appear to be Construct array data - no data loaded");const i=s.size;this.uos=i[0],this.fos=i[1],this.dos=i[2],this.Nu=s.data},$os(t){const s=URL.createObjectURL(new Blob([this.vos()],{type:"application/json"}));this.Bc.GB(s,t)}}}self._s.i$.los.Sht={wos(t,s,i){return this.wos(t,s||0,i||0)},c_t(){return this.uos},f_t(){return this.fos},Wos(){return this.dos},jos(){return this.bos()},Vos(){return this.Mos()},Uos(){return this.Cos()},Hos(){return this.wos(this.bos(),this.Mos(),this.Cos())},Wd(){return this.wos(0,0,0)},zos(){return this.wos(this.uos-1,0,0)},Jos(t){const s=this.Nu;for(let i=0,e=this.uos;i<e;++i)if(s[i][0][0]===t)return i;return-1},qos(t){const s=this.Nu;for(let i=this.uos-1;i>=0;--i)if(s[i][0][0]===t)return i;return-1},Yos(t){let s=[];for(let t=0;t<this.uos;++t)s.push(this.wos(t,0,0));return s.join(t)},s_t(){return this.vos()}};{const hG=self._s;hG.i$.gamepad=class extends hG.K_t{constructor(t){super(t)}zn(){super.zn()}}}{const oG=self._s;oG.i$.gamepad.dEt=class extends oG.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{const aG=self._s,lG="gamepad";class uG{constructor(t,s,i){this.Rw=t,this.Wc=s,this.Xos=new Set(i),this.Kos=new cG,this.Zos=new cG,this.Qos=[],this.tas=[]}yW(){return this.Wc}PQ(t,s){const i=this.Zos;this.Zos=this.Kos,this.Kos=i,this.Kos.PQ(t,s),aG.Th(this.Qos,this.Kos.sas(),!1),aG.Th(this.tas,this.Kos.sas(),!1);for(let t=0,s=this.Kos.sas();t<s;++t){const s=this.Zos.ias(t),i=this.Kos.ias(t);i>=.5&&s<.5&&(this.Qos[t]=!0),i<.5&&s>=.5&&(this.tas[t]=!0)}}sas(){return this.Kos.sas()}eas(){return this.Kos.eas()}nas(t){return!((t=Math.floor(t))<0||t>=this.Qos.length)&&this.Qos[t]}ras(t){return!((t=Math.floor(t))<0||t>=this.tas.length)&&this.tas[t]}oas(){this.Qos.fill(!1),this.tas.fill(!1)}ias(t){return this.Kos.ias(t)}aas(t){return this.Kos.ias(t)>=.5}las(t){return this.Kos.las(t)}CL(){return this.Rw}uas(){return this.Xos}}class cG{constructor(){this.cas=[],this.fas=[]}PQ(t,s){const i=this.cas;let e=0;for(let s=t.length;e<s;++e){const s=t[e];e===i.length?i.push(s.value):i[e]=s.value}e<i.length&&aG.Sh(i,e),aG.xh(this.fas,s)}sas(){return this.cas.length}eas(){return this.fas.length}ias(t){return(t=Math.floor(t))<0||t>=this.cas.length?0:this.cas[t]}las(t){return(t=Math.floor(t))<0||t>=this.fas.length?0:this.fas[t]}}aG.i$.gamepad.Instance=class extends aG.$Gt{constructor(t,s){super(t,lG),this.das=25,this.pas=0,this.mas=-1,this.gas=new Map,s&&(this.das=s[0]),this.XGt("gamepad-connected",t=>this.yas(t)),this.XGt("gamepad-disconnected",t=>this.was(t)),this.XGt("input-update",t=>this.Sas(t));const i=this.l$().Sf();this.Kf=new aG.qf(aG.jf.Jf(i,"tick2",()=>this.n6()),aG.jf.Jf(i,"suspend",()=>this.qZt()),aG.jf.Jf(i,"resume",()=>this.YZt())),this.ZGt("ready")}zn(){super.zn()}yas(t){const s=t.index,i=t.id,e=t.vibrationEffects;this.gas.has(s)||(this.gas.set(s,new uG(s,i,e)),this.mas=s,this.qU(aG.i$.gamepad.t$.vas),this.mas=-1)}was(t){const s=t.index;this.mas=s,this.qU(aG.i$.gamepad.t$.bas),this.mas=-1,this.gas.delete(s)}Sas(t){for(const s of t)this.Mas(s)}Mas(t){const s=t.index;this.gas.has(s)||this.yas(t);const i=this.gas.get(s);i.PQ(t.buttons,t.axes);for(let t=0,s=i.sas();t<s;++t)i.nas(t)&&(this.pas=t)}Cas(t){return this.gas.get(Math.floor(t))||null}Tas(t){if(-1===t)return[...this.gas.values()];{const s=this.gas.get(Math.floor(t));return s?[s]:[]}}n6(){for(const t of this.gas.values())t.oas()}qZt(){this.ZGt("suspend")}YZt(){this.ZGt("resume")}lPt(){const t="plugins.gamepad";return[{title:t+".name",properties:[{name:t+".debugger.last-button",value:this.pas},{name:t+".properties.analog-deadzone.name",value:this.das}]}]}}}{const fG=self._s;fG.i$.gamepad.t$={vas:()=>!0,bas:()=>!0,aas(t,s){const i=this.Cas(t);if(!i)return!1;const e=i.aas(s);return e&&(this.pas=s),e},xas(t,s){const i=this.Cas(t);if(!i)return!1;const e=i.nas(s);return e&&(this.pas=s),e},Ias(t,s){const i=this.Cas(t);if(!i)return!1;const e=i.ras(s);return e&&(this.pas=s),e},_as(){return this.gas.size>0},Gas(t,s,i,e){s=Math.floor(s);const n=this.Cas(t);if(!n)return!1;let r=n.las(s),h=0;return h=s%2==0?n.las(s+1):n.las(s-1),r*=100,h*=100,Math.hypot(r,h)<=this.das&&(r=0),fG.compare(r,i,e)},Pas(t){const s=this.Tas(t);if(0===s.length)return!1;const i=this.Bc,e=i.aN(),n=i.pN(),r=n.tX(),h=i.bN(),o=h.sX(),a=h.iX(n);i.rX(!1);for(const t of s)for(let s=0,i=t.sas();s<i;++s)t.nas(s)&&(this.mas=t.CL(),this.pas=s,e.oX(r),n.aX(o,a),e.lX(r),this.mas=-1);return i.rX(!0),h.dX(),!1},Aas(t){const s=this.Tas(t);if(0===s.length)return!1;const i=this.Bc,e=i.aN(),n=i.pN(),r=n.tX(),h=i.bN(),o=h.sX(),a=h.iX(n);i.rX(!1);for(const t of s)for(let s=0,i=t.sas();s<i;++s)t.ras(s)&&(this.mas=t.CL(),this.pas=s,e.oX(r),n.aX(o,a),e.lX(r),this.mas=-1);return i.rX(!0),h.dX(),!1},Ras(t,s){s=Math.floor(s);const i=this.Cas(t);if(!i)return!1;const e=i.aas(s);return e&&(this.pas=s),e},Eas(t,s){s=Math.floor(s);const i=this.Cas(t);if(!i)return!1;const e=i.nas(s);return e&&(this.pas=s),e},Oas(t,s){s=Math.floor(s);const i=this.Cas(t);if(!i)return!1;const e=i.ras(s);return e&&(this.pas=s),e},Das(t,s){const i=this.Cas(t);if(!i)return!1;const e=i.uas();return 0===s?e.has("dual-rumble"):1===s&&e.has("trigger-rumble")},Fas:()=>!0}}{const dG=self._s;dG.i$.gamepad.wht={kas(t,s,i,e){this.ZGt("vibrate-dual-rumble",{index:t,duration:s,weakMag:dG.Kn(i/100,0,1),strongMag:dG.Kn(e/100,0,1)})},Las(t,s,i,e,n,r){this.ZGt("vibrate-trigger-rumble",{index:t,duration:s,weakMag:dG.Kn(i/100,0,1),strongMag:dG.Kn(e/100,0,1),leftMag:dG.Kn(n/100,0,1),rightMag:dG.Kn(r/100,0,1)})},Nas(t){this.ZGt("reset-vibrate",{index:t})}}}self._s.i$.gamepad.Sht={Bas(){return this.gas.size},$as(t){const s=this.Cas(t);return s?s.yW():""},Was(){return this.mas},jas(t){const s=this.Cas(t);if(!s)return"";let i="";for(let t=0,e=s.eas();t<e;++t)i+=`Axis ${t}: ${Math.round(100*s.las(t))}\n`;return i},Vas(t){const s=this.Cas(t);if(!s)return"";let i="";for(let t=0,e=s.sas();t<e;++t)i+=`Button ${t}: ${Math.round(100*s.ias(t))}\n`;return i},Uas(t,s){const i=this.Cas(t);return i?i.ias(Math.floor(s)):0},Has(t,s){const i=this.Cas(t);return i?i.las(Math.floor(s)):0},zas(t){const s=this.Cas(t);return s?s.sas():0},Jas(t){const s=this.Cas(t);return s?s.eas():0},qas(t,s){const i=this.Cas(t);return i?100*i.ias(Math.floor(s)):0},Yas(t,s){s=Math.floor(s);const i=this.Cas(t);if(!i)return 0;let e=i.las(s),n=0;return n=s%2==0?i.las(s+1):i.las(s-1),e*=100,n*=100,Math.hypot(e,n)<=this.das&&(e=0),e},Xas(){return this.pas},Kas(){return this.pas}};{const pG=self._s;pG.i$.Keyboard=class extends pG.K_t{constructor(t){super(t)}zn(){super.zn()}}}{let mG=function(){return yG.VW().iJ()};GetKeyboardSdkInstance=mG;const gG=self._s;self.Ns,gG.i$.Keyboard.dEt=class extends gG.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){}bGt(){return self.Zas}};let yG=null;self.Zas=class extends self.rj{constructor(t){super(t),yG=t,t.l$().bB().keyboard=this}Qas(t){const s=mG();if("string"==typeof t)return s.tls(t);if("number"==typeof t)return s.sls(t);throw new TypeError("expected string or number")}}}{const wG=self._s,SG="keyboard";wG.i$.Keyboard.Instance=class extends wG.$Gt{constructor(t,s){super(t,SG),this.ils=new Set,this.els=new Set,this.nls=0,this.rls="",this.hls="",this.ols=!1;const i=this.l$().Sf();this.Kf=new wG.qf(wG.jf.Jf(i,"keydown",t=>this.als(t.data)),wG.jf.Jf(i,"keyup",t=>this.lls(t.data)),wG.jf.Jf(i,"window-blur",()=>this.uls()),wG.jf.Jf(i,"keyboard-blur",()=>this.uls())),this.Bc.YB(this.qM())}zn(){super.zn()}async qM(){const t=await this.QGt("init");this.ols=t.isKeyboardLockSupported}als(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.ils.has(i)||(this.ils.add(i),this.els.add(s),this.rls=i,this.nls=s,this.hls=e,this.qU(wG.i$.Keyboard.t$.cls),this.qU(wG.i$.Keyboard.t$.fls),this.qU(wG.i$.Keyboard.t$.dls),this.qU(wG.i$.Keyboard.t$.pls))}lls(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.ils.delete(i),this.els.delete(s),this.rls=i,this.nls=s,this.hls=e,this.qU(wG.i$.Keyboard.t$.mls),this.qU(wG.i$.Keyboard.t$.gls),this.qU(wG.i$.Keyboard.t$.yls),this.qU(wG.i$.Keyboard.t$.wls)}uls(){for(const t of this.els)this.els.delete(t),this.nls=t,this.qU(wG.i$.Keyboard.t$.mls),this.qU(wG.i$.Keyboard.t$.gls),this.qU(wG.i$.Keyboard.t$.wls);this.ils.clear()}tls(t){return this.ils.has(t)}sls(t){return this.els.has(t)}aC(){return{tk:this.nls,tkk:this.hls}}lC(t){this.nls=t.tk,t.hasOwnProperty("tkk")&&(this.hls=t.tkk)}lPt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.nls},{name:t+".debugger.last-key-string",value:wG.i$.Keyboard.Sht.Sls(this.nls)},{name:t+".debugger.last-typed-key",value:this.hls}]}]}}}{const vG=self._s,bG=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];vG.i$.Keyboard.t$={tls(t){return this.els.has(t)},fls(t){return this.nls===t},cls:()=>!0,mls:()=>!0,gls(t){return this.nls===t},sls(t){return t=Math.floor(t),this.els.has(t)},pls(t){return this.nls===t},wls(t){return this.nls===t},dls(t){const s=bG[t];return this.rls===s},yls(t){const s=bG[t];return this.rls===s},vls(t){const s=bG[t];return this.ils.has(s)},bls(){return this.ols},Mls:()=>!0,Cls:()=>!0}}{const MG=self._s;MG.i$.Keyboard.wht={async Tls(t){if(!this.ols)return;let s=[];t&&(s=t.split(",")),(await this.QGt("lock-keyboard",{keysArr:s})).isOk?this.qU(MG.i$.Keyboard.t$.Mls):this.qU(MG.i$.Keyboard.t$.Cls)},xls(){this.ols&&this.QGt("unlock-keyboard")}}}{let CG=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"←";case 38:return"↑";case 39:return"→";case 40:return"↓";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};StringFromCharCode=CG,self._s.i$.Keyboard.Sht={Ils(){return this.nls},Sls:t=>CG(t),_ls(){return this.hls}}}{const TG=self._s;TG.i$.Touch=class extends TG.K_t{constructor(t){super(t)}zn(){super.zn()}}}{let xG=function(){return GG.VW().iJ()};GetTouchSdkInstance=xG;const IG=self._s,_G=self.Ns;IG.i$.Touch.dEt=class extends IG.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){}bGt(){return self.Gls}};let GG=null;self.Gls=class extends self.rj{constructor(t){super(t),GG=t,t.l$().bB().CB=this}requestPermission(t){_G.ue(t);const s=xG();if("orientation"===t)return s.Pls(0);if("motion"===t)return s.Pls(1);throw new Error("invalid type")}}}{const PG=self._s,AG="touch";PG.i$.Touch.Instance=class extends PG.$Gt{constructor(t,s){super(t,AG),this.Als=new Map,this.Rls=!1,this.Els=!1,this.Ols=0,this.Dls=0,this.Fls=0,this.kls=0,this.Lls=0,this.Nls=0,this.Bls=0,this.$ls=0,this.Wls=0,this.jls=0,this.Vls=0,this.Uls=0,this.Hls=0,this.zls=0,this.Jls=0,this.qls=0,this.Yls=0,this.Xls=[],s&&(this.Rls=s[0]),this.XGt("permission-result",t=>this.Kls(t));const i=this.l$().Sf();this.Kf=new PG.qf(PG.jf.Jf(i,"pointerdown",t=>this.Zls(t.data)),PG.jf.Jf(i,"pointermove",t=>this.Qls(t.data)),PG.jf.Jf(i,"pointerup",t=>this.tus(t.data,!1)),PG.jf.Jf(i,"pointercancel",t=>this.tus(t.data,!0)),PG.jf.Jf(i,"deviceorientation",t=>this.sus(t.data)),PG.jf.Jf(i,"deviceorientationabsolute",t=>this.ius(t.data)),PG.jf.Jf(i,"devicemotion",t=>this.eus(t.data)),PG.jf.Jf(i,"tick2",t=>this.n6()))}zn(){this.Als.clear(),super.zn()}Zls(t){if("mouse"===t.pointerType){if(!this.Rls)return;this.Els=!0}const s=t.pointerId;if(this.Als.has(s))return;const i=t.pageX-this.Bc.Q$(),e=t.pageY-this.Bc.sW(),n=performance.now(),r=this.Als.size;this.Vls=r,this.Uls=s;const h=PG.Hn(PG.i$.Touch.nus);h.FOt(n,i,e,s,r),this.Als.set(s,h),this.qU(PG.i$.Touch.t$.rus),this.qU(PG.i$.Touch.t$.hus),this.zls=i,this.Jls=e,this.Yls=0,this.qU(PG.i$.Touch.t$.ous)}Qls(t){if("mouse"===t.pointerType&&!this.Els)return;const s=this.Als.get(t.pointerId);if(!s)return;const i=performance.now();if(i-s.YD()<2)return;const e=t.pageX-this.Bc.Q$(),n=t.pageY-this.Bc.sW();s.PQ(i,e,n,t.width,t.height,t.pressure)}tus(t,s){if("mouse"===t.pointerType){if(!this.Els)return;this.Els=!1}const i=performance.now(),e=t.pointerId,n=this.Als.get(e);if(n){if(this.Vls=n.aus(),this.Uls=n.Oq(),!s){const s=t.pageX-this.Bc.Q$(),i=t.pageY-this.Bc.sW();this.zls=s,this.Jls=i,this.Yls=1,this.qU(PG.i$.Touch.t$.ous)}if(this.qU(PG.i$.Touch.t$.lus),this.qU(PG.i$.Touch.t$.uus),!s){const t=n.cus(i);"single-tap"===t?(this.qU(PG.i$.Touch.t$.fus),this.zls=n.YM(),this.Jls=n.ZM(),this.qU(PG.i$.Touch.t$.dus)):"double-tap"===t&&(this.qU(PG.i$.Touch.t$.pus),this.zls=n.YM(),this.Jls=n.ZM(),this.qU(PG.i$.Touch.t$.mus))}n.zn(),this.Als.delete(e)}}Pls(t){return this.tPt("request-permission",{type:t}),new Promise((s,i)=>{this.Xls.push({type:t,resolve:s,reject:i})})}Kls(t){const s=t.result,i=t.type;this.Hls=i;const e=this.Xls.filter(t=>t.type===i);for(const t of e)t.resolve(s?"granted":"denied");this.Xls=this.Xls.filter(t=>t.type!==i),s?(this.qU(PG.i$.Touch.t$.gus),0===i?this.Bc.gJt():this.Bc.yJt()):this.qU(PG.i$.Touch.t$.yus)}sus(t){"number"==typeof t.webkitCompassHeading?this.Ols=t.webkitCompassHeading:t.absolute&&(this.Ols=t.alpha),this.Dls=t.alpha,this.Fls=t.beta,this.kls=t.gamma}ius(t){this.Ols=t.alpha}eus(t){const s=t.acceleration;s&&(this.Lls=s.x,this.Nls=s.y,this.Bls=s.z);const i=t.accelerationIncludingGravity;i&&(this.$ls=i.x,this.Wls=i.y,this.jls=i.z)}n6(){const t=performance.now();let s=0;for(const i of this.Als.values())i.YD()<=t-50&&i.wus(t),i.Sus(t)&&(this.Vls=i.aus(),this.Uls=i.Oq(),this.qls=s,this.qU(PG.i$.Touch.t$.vus),this.zls=i.YM(),this.Jls=i.ZM(),this.qU(PG.i$.Touch.t$.bus),this.qls=0),++s}Mus(t){t=Math.floor(t);for(const s of this.Als.values()){if(0===t)return s;--t}return null}Cus(t,s){return t>=0&&s>=0&&t<this.Bc.kHt()&&s<this.Bc.LHt()}lPt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.Als.values()].map(t=>({name:"$"+t.Oq(),value:t.YM()+", "+t.ZM()}))}]}}}{const RG=self._s;RG.i$.Touch.t$={hus:()=>!0,uus:()=>!0,Tus(){return this.Als.size>0},ous(t,s){return!!t&&s===this.Yls&&!!this.Cus(this.zls,this.Jls)&&this.Bc.RL()._Nt(t,[[this.zls,this.Jls]],!1)},xus(t){if(!t)return!1;const s=this.Bc.Fgt().iTt(),i=[...this.Als.values()].filter(t=>this.Cus(t.YM(),t.ZM())).map(t=>[t.YM(),t.ZM()]);return RG.xor(this.Bc.RL()._Nt(t,i,s),s)},Ius(t,s,i){const e=this.Mus(t);return!!e&&RG.compare(e.TJ(),s,i)},_us:()=>!0,Gus:()=>!0,Pus(t,s,i){this.Bc.gJt();let e=0;return e=0===t?this.Dls:1===t?this.Fls:this.kls,RG.compare(e,s,i)},Aus(t,s,i){this.Bc.yJt();let e=0;return e=0===t?this.$ls:1===t?this.Wls:2===t?this.jls:3===t?this.Lls:4===t?this.Nls:this.Bls,RG.compare(e,s,i)},rus(t){return(t=Math.floor(t))===this.Vls},lus(t){return(t=Math.floor(t))===this.Vls},Rus(t){return t=Math.floor(t),this.Als.size>=t+1},vus:()=>!0,fus:()=>!0,pus:()=>!0,bus(t){return!!t&&!!this.Cus(this.zls,this.Jls)&&this.Bc.RL()._Nt(t,[[this.zls,this.Jls]],!1)},dus(t){return!!t&&!!this.Cus(this.zls,this.Jls)&&this.Bc.RL()._Nt(t,[[this.zls,this.Jls]],!1)},mus(t){return!!t&&!!this.Cus(this.zls,this.Jls)&&this.Bc.RL()._Nt(t,[[this.zls,this.Jls]],!1)},gus(t){return this.Hls===t},yus(t){return this.Hls===t}}}self._s.i$.Touch.wht={Eus(t){this.Pls(t)}};{const EG=self._s;EG.i$.Touch.Sht={Ous(){return this.Als.size},l_t(t){const s=this.Mus(this.qls);return s?s.Dus(this.Bc.OB(),t,!0):0},u_t(t){const s=this.Mus(this.qls);return s?s.Dus(this.Bc.OB(),t,!1):0},Fus(t,s){const i=this.Mus(t);return i?i.Dus(this.Bc.OB(),s,!0):0},kus(t,s){const i=this.Mus(t);return i?i.Dus(this.Bc.OB(),s,!1):0},Lus(t,s){const i=this.Als.get(t);return i?i.Dus(this.Bc.OB(),s,!0):0},Nus(t,s){const i=this.Als.get(t);return i?i.Dus(this.Bc.OB(),s,!1):0},Bus(){const t=this.Mus(0);return t?t.YM():0},$us(){const t=this.Mus(0);return t?t.ZM():0},Wus(t){const s=this.Mus(t);return s?s.YM():0},jus(t){const s=this.Mus(t);return s?s.ZM():0},Vus(t){const s=this.Als.get(t);return s?s.YM():0},Uus(t){const s=this.Als.get(t);return s?s.ZM():0},Hus(t){const s=this.Mus(t);return s?s.TJ():0},zus(t){const s=this.Als.get(t);return s?s.TJ():0},Jus(t){const s=this.Mus(t);return s?EG.tr(s.Dj()):0},qus(t){const s=this.Als.get(t);return s?EG.tr(s.Dj()):0},Yus(){return this.Bc.gJt(),this.Ols},Xus(){return this.Bc.gJt(),this.Dls},Kus(){return this.Bc.gJt(),this.Fls},Zus(){return this.Bc.gJt(),this.kls},Qus(){return this.Bc.yJt(),this.$ls},tcs(){return this.Bc.yJt(),this.Wls},scs(){return this.Bc.yJt(),this.jls},ics(){return this.Bc.yJt(),this.Lls},ecs(){return this.Bc.yJt(),this.Nls},ncs(){return this.Bc.yJt(),this.Bls},rcs(){return this.Vls},hcs(){return this.Uls},ocs(t){const s=this.Als.get(t);return s?s.Vg():0},acs(t){const s=this.Als.get(t);return s?s.Qg():0},lcs(t){const s=this.Als.get(t);return s?s.ucs():0}}}{const OG=self._s,DG=15,FG=500,kG=333,LG=25;let NG=-1e3,BG=-1e3,$G=-1e4;OG.i$.Touch.nus=class extends OG.Vn{constructor(){super(),this.ccs=0,this.Z_=0,this.tUt=0,this.HF=0,this.fcs=0,this.dcs=0,this.pcs=0,this.Aa=0,this.Ra=0,this.mcs=0,this.gcs=0,this.Ay=0,this.Ry=0,this.ycs=0,this.wcs=!1,this.Scs=!1}zn(){}FOt(t,s,i,e,n){this.ccs=e,this.Z_=n,this.HF=t,this.fcs=t,this.tUt=t,this.dcs=s,this.pcs=i,this.Aa=s,this.Ra=i,this.mcs=s,this.gcs=i}PQ(t,s,i,e,n,r){this.fcs=this.HF,this.HF=t,this.mcs=this.Aa,this.gcs=this.Ra,this.Aa=s,this.Ra=i,this.Ay=e,this.Ry=n,this.ycs=r,!this.Scs&&OG.er(this.dcs,this.pcs,this.Aa,this.Ra)>=15&&(this.Scs=!0)}Oq(){return this.ccs}aus(){return this.Z_}YD(){return this.HF}wus(t){this.fcs=t}YM(){return this.Aa}ZM(){return this.Ra}TJ(){const t=OG.er(this.Aa,this.Ra,this.mcs,this.gcs),s=(this.HF-this.fcs)/1e3;return s>0?t/s:0}Dj(){return OG.rr(this.mcs,this.gcs,this.Aa,this.Ra)}Vg(){return this.Ay}Qg(){return this.Ry}ucs(){return this.ycs}Sus(t){return!this.wcs&&t-this.tUt>=500&&!this.Scs&&OG.er(this.dcs,this.pcs,this.Aa,this.Ra)<15&&(this.wcs=!0,!0)}cus(t){return this.wcs?"":t-this.tUt<=333&&!this.Scs&&OG.er(this.dcs,this.pcs,this.Aa,this.Ra)<15?t-$G<=666&&OG.er(NG,BG,this.Aa,this.Ra)<25?(NG=-1e3,BG=-1e3,$G=-1e4,"double-tap"):(NG=this.Aa,BG=this.Ra,$G=t,"single-tap"):""}Dus(t,s,i){if(void 0===s)return t.BB(0).K3(this.Aa,this.Ra)[i?0:1];{const e=t.LB(s);return e?e.iU(this.Aa,this.Ra)[i?0:1]:0}}}}{const WG=self._s;WG.i$.vcs=class extends WG.K_t{constructor(t){super(t)}zn(){super.zn()}}}{let jG=function(){return HG.VW().iJ()};GetMouseSdkInstance=jG;const VG=self._s,UG=self.Ns;VG.i$.vcs.dEt=class extends VG.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){}bGt(){return self.bcs}};let HG=null;self.bcs=class extends self.rj{constructor(t){super(t),HG=t,t.l$().bB().MB=this}Mcs(t){return jG().Ccs(t)[0]}Tcs(t){return jG().Ccs(t)[1]}xcs(t){return jG().Ccs(t)}Ics(t){return jG()._cs(t)}Gcs(t){UG.ue(t),jG().Pcs(t)}Acs(t){const s=jG(),i=s.l$().B$(t);s.Rcs(i)}}}{const zG=self._s,JG="mouse";let qG=null;zG.i$.vcs.Instance=class extends zG.$Gt{constructor(t,s){super(t,JG),this.Ecs=[!1,!1,!1,!1,!1],this.Ocs=0,this.Dcs=0,this.Fcs=0,this.Yls=0,this.kcs=0,this.Lcs=0,this.Ncs=0,this.Bcs=0,this.$cs=!1,this.Wcs=0,this.jcs=0,this.KGt([["pointer-lock-change",t=>this.Vcs(t)],["pointer-lock-error",t=>this.Ucs(t)]]);const i=this.l$().Sf();this.Kf=new zG.qf(zG.jf.Jf(i,"pointermove",t=>this.Qls(t.data)),zG.jf.Jf(i,"pointerdown",t=>this.Zls(t.data)),zG.jf.Jf(i,"pointerup",t=>this.tus(t.data)),zG.jf.Jf(i,"dblclick",t=>this.Hcs(t.data)),zG.jf.Jf(i,"wheel",t=>this.zcs(t.data)),zG.jf.Jf(i,"window-blur",()=>this.VUt()))}zn(){super.zn()}Zls(t){"mouse"===t.pointerType&&(this.Ocs=t.pageX-this.Bc.Q$(),this.Dcs=t.pageY-this.Bc.sW(),this.Jcs(t.lastButtons,t.buttons))}Qls(t){this.Wcs=t.movementX,this.jcs=t.movementY,this.qU(zG.i$.vcs.t$.qcs),this.Wcs=0,this.jcs=0,"mouse"===t.pointerType&&(this.Ocs=t.pageX-this.Bc.Q$(),this.Dcs=t.pageY-this.Bc.sW(),this.Jcs(t.lastButtons,t.buttons))}tus(t){"mouse"===t.pointerType&&this.Jcs(t.lastButtons,t.buttons)}Jcs(t,s){this.Ycs(t,s,1,0),this.Ycs(t,s,4,1),this.Ycs(t,s,2,2),this.Ycs(t,s,8,3),this.Ycs(t,s,16,4)}Ycs(t,s,i,e){!(t&i)&&s&i?this.Xcs(e):t&i&&!(s&i)&&this.Kcs(e)}Xcs(t){this.Ecs[t]=!0,this.qU(zG.i$.vcs.t$.Zcs),this.Fcs=t,this.Yls=0,this.qU(zG.i$.vcs.t$.Qcs),this.qU(zG.i$.vcs.t$.tfs)}Kcs(t){this.Ecs[t]&&(this.Ecs[t]=!1,this.Fcs=t,this.qU(zG.i$.vcs.t$.sfs))}Hcs(t){this.Fcs=t.button,this.Yls=1,this.qU(zG.i$.vcs.t$.Qcs),this.qU(zG.i$.vcs.t$.tfs)}zcs(t){this.kcs=t.deltaY<0?1:0,this.Lcs=t.deltaX,this.Ncs=t.deltaY,this.Bcs=t.deltaZ,this.qU(zG.i$.vcs.t$.ifs)}VUt(){for(let t=0,s=this.Ecs.length;t<s;++t){if(!this.Ecs[t])return;this.Ecs[t]=!1,this.Fcs=t,this.qU(zG.i$.vcs.t$.sfs)}}Ccs(t){const s=this.Bc.cB(),i=this.Ocs,e=this.Dcs;if(void 0===t)return s.BB(0).K3(i,e);{const n=s.LB(t);return n?n.iU(i,e):[0,0]}}_cs(t){return t=Math.floor(t),!!this.Ecs[t]}efs(){return this.Ocs>=0&&this.Dcs>=0&&this.Ocs<this.Bc.kHt()&&this.Dcs<this.Bc.LHt()}Pcs(t){qG!==t&&(qG=t,this.ZGt("cursor",t))}async Rcs(t){if(zG.Zs.oi||!t)return;const s=t.Hxt();if(!s)return;const i=s.kB(),e=s.MPt();if(!i||!e)return;if(qG===e)return;qG=e;const n=`url(${await e.ZAt()}) ${Math.round(i.GH()*e.Vg())} ${Math.round(i.RH()*e.Qg())}, auto`;this.ZGt("cursor",n)}Vcs(t){this.nfs(t["has-pointer-lock"])}Ucs(t){this.nfs(t["has-pointer-lock"]),this.qU(zG.i$.vcs.t$.rfs)}nfs(t){this.$cs!==t&&(this.$cs=t,this.$cs?this.qU(zG.i$.vcs.t$.hfs):this.qU(zG.i$.vcs.t$.ofs))}lPt(){const t="plugins.mouse";return[{title:t+".name",properties:[{name:t+".debugger.absolute-position",value:this.Ocs+","+this.Dcs},{name:t+".debugger.left-button",value:this.Ecs[0]},{name:t+".debugger.middle-button",value:this.Ecs[1]},{name:t+".debugger.right-button",value:this.Ecs[2]},{name:t+".debugger.button-4",value:this.Ecs[3]},{name:t+".debugger.button-5",value:this.Ecs[4]}]},{title:t+".debugger.position-on-each-layer",properties:this.Bc.cB().Hj().map(t=>({name:"$"+t.Ac(),value:t.iU(this.Ocs,this.Dcs).join(", ")}))}]}}}{const YG=self._s;YG.i$.vcs.t$={Qcs(t,s){return this.Fcs===t&&this.Yls===s},Zcs:()=>!0,aas(t){return this.Ecs[t]},sfs(t){return this.Fcs===t},afs(t){const s=this.Bc.Fgt().iTt(),i=[];return this.efs()&&i.push([this.Ocs,this.Dcs]),YG.xor(this.Bc.RL()._Nt(t,i,s),s)},tfs(t,s,i){if(t!==this.Fcs||s!==this.Yls)return!1;if(!this.efs())return!1;const e=this.Ocs,n=this.Dcs;return this.Bc.RL()._Nt(i,[[e,n]],!1)},ifs(t){return 2===t||this.kcs===t},hfs:()=>!0,ofs:()=>!0,rfs:()=>!0,lfs(){return this.$cs},qcs:()=>!0}}{const XG=self._s,KG=["auto","pointer","text","crosshair","move","help","wait","none"],ZG=["auto","all-scroll","none","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","not-allowed","grab","grabbing","col-resize","row-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out"];XG.i$.vcs.wht={ufs(t){this.Pcs(KG[t])},cfs(t){this.Pcs(ZG[t])},ffs(t){this.Rcs(t)},dfs(t){this.tPt("request-pointer-lock",{unadjustedMovement:t})},pfs(){this.ZGt("release-pointer-lock")}}}self._s.i$.vcs.Sht={l_t(t){return this.Ccs(t)[0]},u_t(t){return this.Ccs(t)[1]},Bus(){return this.Ocs},$us(){return this.Dcs},mfs(){return this.Wcs},gfs(){return this.jcs},yfs(){return this.Lcs},wfs(){return this.Ncs},Sfs(){return this.Bcs}};{const QG=self._s,tP="text-input";QG.i$.vfs=class extends QG.IGt{constructor(t){super(t,tP),this.AGt("click",(t,s)=>t.bfs(s)),this.AGt("dblclick",(t,s)=>t.Hcs(s)),this.AGt("change",(t,s)=>t.Mfs(s))}zn(){super.zn()}}}{const sP=self._s;sP.i$.vfs.dEt=class extends sP.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{const iP=self._s,eP=self.Ns,nP=0,rP=1,hP=2,oP=3,aP=4,lP=5,uP=6,cP=7,fP=8,dP=9,pP=10,mP="text-input",gP=["text","password","email","number","tel","url","textarea","search"];iP.i$.vfs.Instance=class extends iP.APt{constructor(t,s){super(t,mP),this.$c="",this.Cfs="",this.Tfs="",this.Obt=!0,this.xfs=!1,this.Ifs=!1,this.Jc="text",this.DPt=!0,this._fs=-1,this.Wc="",this.Gfs="",s&&(this.$c=s[nP],this.Cfs=s[rP],this.Tfs=s[hP],this.kB().wV(s[oP]),this.Obt=s[aP],this.xfs=s[lP],this.Ifs=s[uP],this.Jc=gP[s[cP]],this.DPt=s[fP],this.Wc=s[dP],this.Gfs=s[pP]),this.HPt({type:this.Jc,id:this.Wc,className:this.Gfs})}zn(){super.zn()}zPt(){return{text:this.$c,placeholder:this.Cfs,title:this.Tfs,isEnabled:this.Obt,isReadOnly:this.xfs,spellCheck:this.Ifs,maxLength:this._fs}}async bfs(t){this.NGt("click",!0),await this.ZB(iP.i$.vfs.t$.Pfs)}async Hcs(t){this.NGt("dblclick",!0),await this.ZB(iP.i$.vfs.t$.Afs)}async Mfs(t){this.$c=t.text,this.NGt("change",!0),await this.ZB(iP.i$.vfs.t$.Rfs)}urs(t){this.$c!==t&&(this.$c=t,this.YPt())}Efs(){return this.$c}Ofs(t){this.Cfs!==t&&(this.Cfs=t,this.YPt())}Dfs(){return this.Cfs}Ffs(t){this.Tfs!==t&&(this.Tfs=t,this.YPt())}kfs(){return this.Tfs}AIt(t){t=!!t,this.Obt!==t&&(this.Obt=t,this.YPt())}EIt(){return this.Obt}Lfs(t){t=!!t,this.xfs!==t&&(this.xfs=t,this.YPt())}Nfs(){return this.xfs}Bfs(t){t=Math.max(+t,-1),this._fs!==t&&(this._fs=t,this.YPt())}$fs(){return this._fs}Wfs(){Promise.resolve().then(()=>this.jPt("scroll-to-bottom"))}HC(t){}aC(){return{t:this.$c,p:this.Cfs,ti:this.Tfs,e:this.Obt,r:this.xfs,sp:this.Ifs,ml:this._fs,type:this.Jc,id:this.Wc}}lC(t){this.$c=t.t,this.Cfs=t.p,this.Tfs=t.ti,this.Obt=t.e,this.xfs=t.r,this.Ifs=t.sp,this._fs=t.hasOwnProperty("ml")?t.ml:-1,this.Jc=t.type,this.Wc=t.id,this.YPt()}sot(t){switch(t){case nP:return this.$c;case rP:return this.Cfs;case hP:return this.Tfs;case aP:return this.Obt;case lP:return this.xfs;case uP:return this.Ifs;case fP:return this.DPt}}oot(t,s){switch(t){case nP:if(this.$c===s)return;this.$c=s,this.YPt();break;case rP:if(this.Cfs===s)return;this.Cfs=s,this.YPt();break;case hP:if(this.Tfs===s)return;this.Tfs=s,this.YPt();break;case aP:if(this.Obt===!!s)return;this.Obt=!!s,this.YPt();break;case lP:if(this.xfs===!!s)return;this.xfs=!!s,this.YPt();break;case uP:if(this.Ifs===!!s)return;this.Ifs=!!s,this.YPt();break;case fP:this.DPt=!!s}}lPt(){const t=iP.i$.vfs.wht,s="plugins.textbox";return[{title:s+".name",properties:[{name:s+".properties.text.name",value:this.$c,N2t:s=>this.cPt(t.Vc,s)},{name:s+".properties.enabled.name",value:this.Obt,N2t:s=>this.cPt(t.G_t,s)},{name:s+".properties.read-only.name",value:this.xfs,N2t:s=>this.cPt(t.jfs,s)}]}]}bGt(){return self.Vfs}};const yP=new WeakMap;self.Vfs=class extends self.Qz{constructor(){super(),yP.set(this,self.cU.mU().iJ())}set text(t){eP.ue(t),yP.get(this).urs(t)}get text(){return yP.get(this).Efs()}set placeholder(t){eP.ue(t),yP.get(this).Ofs(t)}get placeholder(){return yP.get(this).Dfs()}set Ufs(t){eP.ue(t),yP.get(this).Ffs(t)}get Ufs(){return yP.get(this).kfs()}set isEnabled(t){yP.get(this).AIt(t)}get isEnabled(){return yP.get(this).EIt()}set Hfs(t){yP.get(this).Lfs(t)}get Hfs(){return yP.get(this).Nfs()}set maxLength(t){eP.he(t),yP.get(this).Bfs(t)}get maxLength(){return yP.get(this).$fs()}zfs(){yP.get(this).Wfs()}}}{const wP=self._s;wP.i$.vfs.t$={shs(t,s){return 0===s?wP.Ze(this.$c,t):this.$c===t},Rfs:()=>!0,Pfs:()=>!0,Afs:()=>!0}}self._s.i$.vfs.wht={Vc(t){this.urs(t.toString())},nhs(t){""!==t&&this.urs(this.Efs()+t)},Jfs(t){this.Ofs(t)},qfs(t){this.Ffs(t)},jfs(t){this.Lfs(0===t)},Yfs(){this.Wfs()},Xfs(t){this.Bfs(t)}},self._s.i$.vfs.Sht={Text(){return this.Efs()},Kfs(){return this.$fs()}};{const SP=self._s;SP.i$.Zfs=class extends SP.K_t{constructor(t){super(t)}zn(){super.zn()}}}{let vP=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};WrapModeToStr=vP;const bP=self._s;bP.i$.Zfs.dEt=class extends bP.FGt{constructor(t,s){super(t),this.dT="repeat",this.pT="repeat",s&&(this.dT=vP(s[0]),this.pT=vP(s[1]))}zn(){super.zn()}vGt(){this.WJ().a$(this.Bc)}g5(t){return this.WJ().KX(t,{eT:this.Bc.KL(),sT:this.dT,iT:this.pT})}M5(){this.WJ().aA()}Qfs(){return this.dT}tds(){return this.pT}}}{const MP=self._s,CP=self.Ns,TP=0,xP=4,IP=5,_P=6,GP=7,PP=8,AP=9,RP=10,EP=11,OP=12,DP=13,FP=14,kP=MP.Hn(MP.Rect),LP=MP.Hn(MP.Pl),NP=MP.Hn(MP.Rect),BP=MP.Hn(MP.Pl);MP.i$.Zfs.Instance=class extends MP.pPt{constructor(t,s){super(t),this.sds=0,this.ids=0,this.eds=1,this.nds=1,this.rds=0,this.hds=!1,this.ods=0,this.ads=0,this.lds=0,this.uds=0,this.cds=0,this.fds=null,s&&(this.kB().wV(!!s[TP]),this.sds=s[xP],this.ids=s[IP],this.eds=s[_P],this.nds=s[GP],this.rds=MP.Qn(s[PP]),this.hds=!!s[AP],this.ods=s[RP],this.ads=s[EP],this.lds=s[OP],this.uds=s[DP],this.cds=s[FP])}zn(){this.dds(),super.zn()}dds(){this.fds&&(this.fds.zn(),this.fds=null)}pds(t,s,i){const e=this.MPt(),n=e.Vg(),r=e.Qg(),h=this.sds/n,o=this.ids/r,a=this.rds;NP.set(0,0,t/(n*this.eds),s/(r*this.nds)),NP.offset(-h,-o),0===a?i.Xl(NP):i.Kl(NP,-a)}mds(t,s=!0){if(this.hds){const s=this.MPt();t.mv(),t.XO(s.Vg()*this.eds,s.Qg()*this.nds,this.ods,this.ads,this.lds,this.uds,this.cds)}else s&&t.uv()}HC(t){const s=this.MPt(),i=s.Tx();if(null===i)return;this.mds(t),t.TO(i);const e=s.Vg(),n=s.Qg();let r=this.sds/e,h=this.ids/n;0!==this.rds||this.hds||("repeat"===this.KTt().Qfs()&&(r%=1),"repeat"===this.KTt().tds()&&(h%=1));const o=this.kB();NP.set(0,0,o.Vg()/(e*this.eds),o.Qg()/(n*this.nds)),NP.offset(-r,-h),o.zz()?this.hes(o,t):this.oes(o,t)}oes(t,s){let i=t.WH();this.Bc.QL()&&(i=t.Kkt(i)),0===this.rds?s.sb(i,NP):(BP.Kl(NP,-this.rds),s.kO(i,BP))}hes(t,s){const i=t.gLt();if(t.wLt()){t.NH(kP,LP,!1);let s=LP;this.Bc.QL()&&(s=t.Kkt(s));let e=NP;0!==this.rds&&(BP.Kl(NP,-this.rds),e=BP),i.BC(t.Jz(),s,e),t.yLt(!1)}i.HC(s,t.kH())}MPt(){return this.fds||this.mpt.WJ()}wet(){return!0}Tx(){return this.MPt().Tx()}gds(){this.kB().yLt(!0)}yds(t){this.sds!==t&&(this.sds=t,this.Bc.VB(),this.gds())}wds(){return this.sds}Sds(t){this.ids!==t&&(this.ids=t,this.Bc.VB(),this.gds())}vds(){return this.ids}bds(t){this.eds!==t&&(this.eds=t,this.Bc.VB(),this.gds())}Mds(){return this.eds}Cds(t){this.nds!==t&&(this.nds=t,this.Bc.VB(),this.gds())}Tds(){return this.nds}xds(t){this.rds!==t&&(this.rds=t,this.Bc.VB(),this.gds())}Ids(){return this.rds}_ds(t){t=!!t,this.hds!==t&&(this.hds=t,this.Bc.VB())}Gds(){return this.hds}Pds(t){this.ods!==t&&(this.ods=t,this.Gds()&&this.Bc.VB())}Ads(){return this.ods}Rds(t){this.ads!==t&&(this.ads=t,this.Gds()&&this.Bc.VB())}Eds(){return this.ads}Ods(t){this.lds!==t&&(this.lds=t,this.Gds()&&this.Bc.VB())}Dds(){return this.lds}Fds(t){this.uds!==t&&(this.uds=t,this.Gds()&&this.Bc.VB())}kds(){return this.uds}Lds(t){this.cds!==t&&(this.cds=t,this.Gds()&&this.Bc.VB())}Nds(){return this.cds}aC(){const t={};return 0!==this.sds&&(t.iox=this.sds),0!==this.ids&&(t.ioy=this.ids),1!==this.eds&&(t.isx=this.eds),1!==this.nds&&(t.isy=this.nds),0!==this.rds&&(t.ia=this.rds),this.hds&&(t.tr=!0),1!==this.ods&&(t.trx=this.ods),1!==this.ads&&(t.try=this.ads),1!==this.lds&&(t.tra=this.lds),.1!==this.uds&&(t.trbmx=this.uds),.1!==this.cds&&(t.trbmy=this.cds),t}lC(t){this.sds=t.iox||0,this.ids=t.ioy||0,this.eds=t.hasOwnProperty("isx")?t.isx:1,this.nds=t.hasOwnProperty("isy")?t.isy:1,this.rds=t.ia||0,this.hds=!!t.tr,this.ods=t.hasOwnProperty("trx")?t.trx:1,this.ads=t.hasOwnProperty("try")?t.try:1,this.lds=t.hasOwnProperty("tra")?t.tra:1,this.uds=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.cds=t.hasOwnProperty("trbmy")?t.trbmy:.1}lPt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.wds(),N2t:t=>this.yds(t)},{name:t+".image-offset-y.name",value:this.vds(),N2t:t=>this.Sds(t)},{name:t+".image-scale-x.name",value:100*this.Mds(),N2t:t=>this.bds(t/100)},{name:t+".image-scale-y.name",value:100*this.Tds(),N2t:t=>this.Cds(t/100)},{name:t+".image-angle.name",value:MP.tr(this.Ids()),N2t:t=>this.xds(MP.Qn(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.Gds(),N2t:t=>this._ds(t)},{name:t+".x-random.name",value:100*this.Ads(),N2t:t=>this.Pds(t/100)},{name:t+".y-random.name",value:100*this.Eds(),N2t:t=>this.Rds(t/100)},{name:t+".angle-random.name",value:100*this.Dds(),N2t:t=>this.Ods(t/100)},{name:t+".blend-margin-x.name",value:100*this.kds(),N2t:t=>this.Fds(t/100)},{name:t+".blend-margin-y.name",value:100*this.Nds(),N2t:t=>this.Lds(t/100)}]}]}sot(t){switch(t){case xP:return this.wds();case IP:return this.vds();case _P:return this.Mds();case GP:return this.Tds();case PP:return this.Ids();case AP:return this.Gds();case RP:return this.Ads();case EP:return this.Eds();case OP:return this.Dds();case DP:return this.kds();case FP:return this.Nds()}}oot(t,s){switch(t){case xP:this.yds(s);break;case IP:this.Sds(s);break;case _P:this.bds(s);break;case GP:this.Cds(s);break;case PP:this.xds(s);break;case AP:this._ds(!!s);break;case RP:this.Pds(s);break;case EP:this.Rds(s);break;case OP:this.Ods(s);break;case DP:this.Fds(s);break;case FP:this.Lds(s)}}bGt(){return self.Bds}};const $P=new WeakMap;self.Bds=class extends self.Kz{constructor(){super(),$P.set(this,self.cU.mU().iJ())}set $ds(t){CP.he(t),$P.get(this).yds(t)}get $ds(){return $P.get(this).wds()}set Wds(t){CP.he(t),$P.get(this).Sds(t)}get Wds(){return $P.get(this).vds()}jds(t,s){CP.he(t),CP.he(s);const i=$P.get(this);i.yds(t),i.Sds(s)}Vds(){const t=$P.get(this);return[t.wds(),t.vds()]}set Uds(t){CP.he(t),$P.get(this).bds(t)}get Uds(){return $P.get(this).Mds()}set Hds(t){CP.he(t),$P.get(this).Cds(t)}get Hds(){return $P.get(this).Tds()}zds(t,s){CP.he(t),CP.he(s);const i=$P.get(this);i.bds(t),i.Cds(s)}Jds(){const t=$P.get(this);return[t.Mds(),t.Tds()]}set qds(t){CP.he(t),$P.get(this).xds(t)}get qds(){return $P.get(this).Ids()}set Yds(t){CP.he(t),$P.get(this).xds(MP.Qn(t))}get Yds(){return MP.tr($P.get(this).Ids())}get imageWidth(){return $P.get(this).MPt().Vg()}get imageHeight(){return $P.get(this).MPt().Qg()}Yes(){const t=$P.get(this).MPt();return[t.Vg(),t.Qg()]}set Xds(t){$P.get(this)._ds(!!t)}get Xds(){return $P.get(this).Gds()}set Kds(t){CP.he(t),$P.get(this).Pds(t)}get Kds(){return $P.get(this).Ads()}set Zds(t){CP.he(t),$P.get(this).Rds(t)}get Zds(){return $P.get(this).Eds()}Qds(t,s){CP.he(t),CP.he(s);const i=$P.get(this);i.Pds(t),i.Rds(s)}tps(){const t=$P.get(this);return[t.Ads(),t.Eds()]}set sps(t){CP.he(t),$P.get(this).Ods(t)}get sps(){return $P.get(this).Dds()}set ips(t){CP.he(t),$P.get(this).Fds(t)}get ips(){return $P.get(this).kds()}set eps(t){CP.he(t),$P.get(this).Lds(t)}get eps(){return $P.get(this).Nds()}nps(t,s){CP.he(t),CP.he(s);const i=$P.get(this);i.Fds(t),i.Lds(s)}rps(){const t=$P.get(this);return[t.kds(),t.Nds()]}async hps(t){CP.Be(t,Blob);const s=$P.get(this),i=s.l$(),e=MP.Hn(MP.AAt);e.UAt(i,t),await e.KX(i.gM(),{eT:i.KL(),sT:s.KTt().Qfs(),iT:s.KTt().tds()}),s.Jn()?e.zn():(s.dds(),s.fds=e,i.VB())}}}self._s.i$.Zfs.t$={nns:()=>!0,rns:()=>!0,ops(){return this.Gds()}};{const WP=self._s;WP.i$.Zfs.wht={aps(t){this.yds(t)},lps(t){this.Sds(t)},ups(t){this.bds(t/100)},cps(t){this.Cds(t/100)},fps(t){this.xds(WP.Qn(t))},dps(t){this._ds(t)},pps(t,s){this.Pds(t/100),this.Rds(s/100)},mps(t){this.Ods(t/100)},gps(t,s){this.Fds(t/100),this.Lds(s/100)},mns(t){this.kB().NM(t),this.Bc.VB()},async fns(t,s){if(this.fds&&this.fds.TZ()===t)return;const i=this.Bc,e=WP.Hn(WP.AAt);try{if(await e.VAt(i,t,!0),!e.ZZ())throw new Error("image failed to load");if(this.Jn())return e.zn(),null;if(!await e.KX(i.gM(),{eT:i.KL(),sT:this.KTt().Qfs(),iT:this.KTt().tds()}))return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jn()||this.qU(WP.i$.Zfs.t$.rns))}this.Jn()?e.zn():(this.dds(),this.fds=e,i.VB(),await this.ZB(WP.i$.Zfs.t$.nns))}}}{const jP=self._s;jP.i$.Zfs.Sht={Ins(){return this.MPt().Vg()},_ns(){return this.MPt().Qg()},yps(){return this.sds},wps(){return this.ids},Sps(){return 100*this.eds},vps(){return 100*this.nds},bps(){return jP.tr(this.rds)},Mps(){return 100*this.Ads()},Cps(){return 100*this.Eds()},Tps(){return 100*this.Dds()},xps(){return 100*this.kds()},Ips(){return 100*this.Nds()}}}{const VP=self._s;VP.i$._ps=class extends VP.K_t{constructor(t){super(t)}zn(){super.zn()}}}{const UP=self._s;UP.i$._ps.dEt=class extends UP.FGt{constructor(t){super(t),this.hEt=t.UEt()}zn(){UP.bh(this.hEt),super.zn()}vGt(){for(const t of this.hEt)t.oRt(this.Bc)}g5(t){const s={eT:this.Bc.KL()};return Promise.all(this.hEt.map(i=>i.aRt(t,s)))}M5(){for(const t of this.hEt)t.lRt()}dTt(t){UP.i$._ps.P_t(this,t)}}}{let HP=function(t,s){return t.Gps===s.Gps?s.Pps-t.Pps:s.Gps-t.Gps},zP=function(t,s,i,e,n,r){const h=e-t,o=n-s,a=r-i;return h*h+o*o+a*a},JP=function(t,s,i,e,n,r,h){return XP.ir(e-t,n-s,(r-i)*h)},qP=function(t,s,i,e,n,r,h){return[XP._t(t,e,h),XP._t(s,n,h),XP._t(i,r,h)]},YP=function(t,s,i,e,n,r,h,o,a,l,u){const[c,f,d]=qP(t,s,i,e,n,r,l);return qP(c,f,d,c+(h-t),f+(o-s),d+(a-i),u)};SortFacesToDrawByDist=HP,sqDistanceTo3D=zP,distanceTo3D=JP,lerp3d=qP,lerp3d2=YP;const XP=self._s,KP=self.Ns,ZP=0,QP=1,tA=2,sA=3,iA=4,eA=5,nA=6,rA=7,hA=8,oA=9,aA=10,lA=11,uA=12,cA=13,fA=14,dA=15,pA=16,mA=[];let gA=0;for(let bA=0;bA<6;bA++)mA.push({Aps:0,Rps:NaN,Eps:NaN,Ops:NaN,Dps:NaN,Fps:NaN,kps:NaN,Lps:NaN,Nps:NaN,Bps:NaN,$ps:NaN,Wps:NaN,jps:NaN,shape:0,Gps:NaN,Pps:NaN,enable:!1});const yA=XP.Hn(XP.Pl);XP.Hn(XP.Pa),XP.i$._ps.Instance=class extends XP.pPt{constructor(t,s){super(t),this.Vps=0,this.Ups=15;let i=!0;this.Hps=!1,this.zps=!0,this.Jps=!0,this.qps=!0,this.Yps=!0,this.Xps=!0,this.Kps=!1,this.Zps=this.mpt.UEt()[0],this.Qps=[!1,!0,!0,!0,!0,!0],this.tms=[0,1,2,3,4,5],this.sms=8,this.ims=[null,null,null,null,null,null],s&&(this.Vps=s[ZP],this.Ups=s[QP],i=!!s[tA],this.Qps[0]=!!s[sA],this.Qps[1]=!!s[iA],this.Qps[2]=!!s[eA],this.Qps[3]=!!s[nA],this.Qps[4]=!!s[rA],this.Qps[5]=!!s[hA],this.Kps=s[oA],this.sms=s[aA],this.ems(0,this.Bc.QY(s[lA])),this.ems(1,this.Bc.QY(s[uA])),this.ems(2,this.Bc.QY(s[cA])),this.ems(3,this.Bc.QY(s[fA])),this.ems(4,this.Bc.QY(s[dA])),this.ems(5,this.Bc.QY(s[pA])));const e=this.kB();e.nLt(this.Kps),e.fkt(this.Ups),this.res=e.WH(),e.wV(i);const n=this.nms();e.PH(n.GH()),e.EH(n.RH()),e.CH()}zn(){super.zn()}nms(){return this.Zps.uRt(0)}MPt(){return this.nms().WJ()}wet(){return!0}rms(t,s,i,e,n,r,h,o,a,l,u,c,f,d){const p=mA[t];p.Aps=t,p.Rps=s,p.Eps=i,p.Ops=e,p.Dps=n,p.Fps=r,p.kps=h,p.Lps=o,p.Nps=a,p.Bps=l,p.$ps=u,p.Wps=c,p.jps=f,p.shape=d,p.enable=!0,gA++}HC(t){const s=this.kB(),i=this.Qps;let e=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5];if(s.iLt()?(n=!1,r=!1,h=!1,o=!1,a=!1):s.eLt()&&(e=!1),!(e||n||r||h||o||a))return;let l=this.res;this.Bc.QL()&&(l=s.Kkt(l));const u=l.Br(),c=l.$r(),f=l.Wr(),d=l.jr(),p=l.Vr(),m=l.Ur(),g=l.Hr(),y=l.zr(),w=this.Vps,S=this.Ups;gA=0;for(let t=0;t<6;t++)mA[t].enable=!1;if(e&&this.rms(0,f,d,0,u,c,0,g,y,0,p,m,0,5),0===w)r&&this.rms(2,u,c,S,g,y,S,g,y,0,u,c,0,0),h&&this.rms(3,p,m,S,f,d,S,f,d,0,p,m,0,0),o&&this.rms(4,f,d,S,u,c,S,u,c,0,f,d,0,0),a&&this.rms(5,g,y,S,p,m,S,p,m,0,g,y,0,0),n&&this.rms(1,u,c,S,f,d,S,p,m,S,g,y,S,0);else if(1===w){const t=(u+g)/2,s=(c+y)/2,i=(f+p)/2,e=(d+m)/2;r&&this.rms(2,t,s,S,t,s,S,g,y,0,u,c,0,4),h&&this.rms(3,i,e,S,i,e,S,f,d,0,p,m,0,4),o&&this.rms(4,i,e,S,t,s,S,u,c,0,f,d,0,0),a&&this.rms(5,t,s,S,i,e,S,p,m,0,g,y,0,0)}else if(2===w)r&&this.rms(2,f,d,S,p,m,S,g,y,0,u,c,0,0),h&&this.rms(3,p,m,S,f,d,S,f,d,0,p,m,0,0),o&&this.rms(4,f,d,S,f,d,S,u,c,0,f,d,0,2),a&&this.rms(5,p,m,S,p,m,S,p,m,0,g,y,0,3);else if(3===w){const t=l.ol(),s=l.al();r&&this.rms(2,t,s,S,t,s,S,g,y,0,u,c,0,4),h&&this.rms(3,t,s,S,t,s,S,f,d,0,p,m,0,4),o&&this.rms(4,t,s,S,t,s,S,u,c,0,f,d,0,4),a&&this.rms(5,t,s,S,t,s,S,p,m,0,g,y,0,4)}else 4===w?(r&&this.rms(2,f,d,S,f,d,S,g,y,0,u,c,0,2),h&&this.rms(3,f,d,S,f,d,S,f,d,0,p,m,0,3),o&&this.rms(4,f,d,S,f,d,S,u,c,0,f,d,0,2),a&&this.rms(5,f,d,S,f,d,S,p,m,0,g,y,0,3)):5===w&&(r&&this.rms(2,u,c,S,u,c,S,g,y,0,u,c,0,2),h&&this.rms(3,p,m,S,f,d,S,f,d,0,p,m,0,0),o&&this.rms(4,f,d,S,u,c,S,u,c,0,f,d,0,0),a&&this.rms(5,p,m,S,p,m,S,p,m,0,g,y,0,3),n&&this.rms(1,u,c,S,f,d,S,p,m,S,g,y,0,1));if(gA>1){const[t,i,e]=s.LB().Z2();for(let s=0;s<6;++s){const n=mA[s];n.enable&&(n.Gps=Math.min(zP(t,i,e,n.Rps,n.Eps,n.Ops),zP(t,i,e,n.Dps,n.Fps,n.kps),zP(t,i,e,n.Lps,n.Nps,n.Bps),zP(t,i,e,n.$ps,n.Wps,n.jps)),n.Pps=zP(t,i,e,(n.Rps+n.Dps+n.Lps+n.$ps)/4,(n.Eps+n.Fps+n.Nps+n.Wps)/4,(n.Ops+n.kps+n.Bps+n.jps)/4))}mA.sort(HP)}const v=t.HO();for(let s=0;s<6;++s){const i=mA[s];i.enable&&(t.cv(v),this.hms(t,i.Aps,i.Rps,i.Eps,i.Ops,i.Dps,i.Fps,i.kps,i.Lps,i.Nps,i.Bps,i.$ps,i.Wps,i.jps,i.shape))}}hms(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p){let m=null,g=null,y=!1;const w=this.ims[s];if(null!==w){const s=w.sj(this.Pq());if(!s)return;const S=s.iJ();if(XP.i$.Brt&&S instanceof XP.i$.Brt.Instance){if(m=S.Tx(),null===m)return;g=S.IPt()}else{if(!(XP.i$.Zfs&&S instanceof XP.i$.Zfs.Instance||XP.i$.Ahs&&S instanceof XP.i$.Ahs.Instance))return;{let s=0,g=0;const w=this.sms;switch(p){case 0:case 5:case 1:s=JP(i,e,n,r,h,o,w),g=JP(r,h,o,a,l,u,w);break;case 2:s=JP(c,f,d,a,l,u,w),g=JP(i,e,n,c,f,d,w);break;case 3:s=JP(c,f,d,a,l,u,w),g=JP(r,h,o,a,l,u,w);break;case 4:s=JP(c,f,d,a,l,u,w),g=JP(i,e,n,(c+a)/2,(f+l)/2,(d+u)/2,w)}if(!(XP.i$.Zfs&&S instanceof XP.i$.Zfs.Instance)){if(0!==p&&5!==p)return;return S.Uhs((a,l)=>{a.St(s,g);const u=a.Qa(),p=a.tl(),m=a.sl(),y=a.il(),[w,S,v]=YP(i,e,n,r,h,o,c,f,d,u,p),[b,M,C]=YP(i,e,n,r,h,o,c,f,d,m,p),[T,x,I]=YP(i,e,n,r,h,o,c,f,d,m,y),[_,G,P]=YP(i,e,n,r,h,o,c,f,d,u,y);t.NO(w,S,v,b,M,C,T,x,I,_,G,P,l)}),S.Hhs(t,0,0,s,g),void S.Uhs(null)}if(m=S.Tx(),null===m)return;S.pds(s,g,yA),y=!0,S.mds(t,!1)}}}else{s=this.tms[s];const t=this.Zps.uRt(s).WJ();if(m=t.Tx(),null===m)return;g=t.IPt()}t.TO(m),p>=3||y?(y||yA.S(g),3===p?(yA.Bl(yA.Wr()),yA.$l(yA.$r())):4===p?(yA.Bl((yA.Br()+yA.Wr())/2),yA.$l((yA.$r()+yA.jr())/2)):5===p&&yA.eu(),t.Xv(i,e,n,r,h,o,a,l,u,c,f,d,yA)):t.Xv(i,e,n,r,h,o,a,l,u,c,f,d,g)}bM(){for(const t of this.ims){if(!t)continue;const s=t.sj(this.Pq());if(!s)continue;const i=s.iJ();if(XP.i$.Zfs&&i instanceof XP.i$.Zfs.Instance&&i.Gds())return!0}return!1}E3(){return this.oms(0)}UJ(){return this.ams(0)}pxt(t){return this.lms(0,t)}ums(t){const s=this.res,i=s.Br(),e=s.$r(),n=s.Wr(),r=s.jr(),h=s.Vr(),o=s.Ur(),a=s.Hr(),l=s.zr(),u=this.Vps,c=this.kB().kH(),f=c+this.Ups;if(1===u||3===u){let s=(i+a)/2,d=(e+l)/2,p=(n+h)/2,m=(r+o)/2;switch(t){case 4:return[p,m,f,s,d,f,i,e,c,n,r,c];case 5:return[s,d,f,p,m,f,h,o,c,a,l,c]}if(3===u)switch(s=(i+n)/2,d=(e+r)/2,p=(a+h)/2,m=(l+o)/2,t){case 2:return[s,d,f,p,m,f,a,l,c,i,e,c];case 3:return[p,m,f,s,d,f,n,r,c,h,o,c]}}else if(2===u&&2===t)return[n,r,f,h,o,f,a,l,c,i,e,c];switch(t){case 0:return[i,e,c,n,r,c,h,o,c,a,l,c];case 1:return[i,e,f,n,r,f,h,o,f,a,l,f];case 2:return[i,e,f,a,l,f,a,l,c,i,e,c];case 3:return[h,o,f,n,r,f,n,r,c,h,o,c];case 4:return[n,r,f,i,e,f,i,e,c,n,r,c];case 5:return[a,l,f,h,o,f,h,o,c,a,l,c];default:return[0,0,0,0,0,0,0,0,0,0,0,0]}}lms(t,s){const i=this.kB();if((t=Math.floor(t))<0||t>5)return[i.YM(),i.ZM(),i.kH()];const e=this.Zps.uRt(t);let n=null;"string"==typeof s?n=e.YJ(s):"number"==typeof s&&(n=e.qJ(s-1));let r=.5,h=.5;n?(r=n.YM(),h=n.ZM()):0===t&&(r=e.GH(),h=e.RH()),i.BH();const o=this.ums(t);return YP(o[0],o[1],o[2],o[3],o[4],o[5],o[9],o[10],o[11],r,h)}ams(t){return this.kB(),(t=Math.floor(t))<0||t>5?0:this.Zps.uRt(t).UJ()}cms(t){this.Vps!==t&&(this.Vps=t,this.Bc.VB())}fms(){return this.Vps}dms(t){t=Math.max(t,0),this.Ups!==t&&(this.Ups=t,this.kB().fkt(t),this.Bc.VB())}pms(){return this.Ups}mms(t,s){s=!!s,this.Qps[t]!==s&&(this.Qps[t]=s,this.Bc.VB())}oms(t){return this.Qps[t]}gms(t){t=!!t,this.Kps!==t&&(this.Kps=t,this.kB().nLt(t),this.Bc.VB())}yms(){return this.Kps}wms(t,s){const i=this.tms,e=this.ims;i[t]===s&&null===e[t]||(i[t]=s,e[t]=null,this.Bc.VB())}ems(t,s){null!==s&&s.v1()&&(s=s.Cj()[0]);const i=this.ims;i[t]!==s&&(i[t]=s,this.Bc.VB())}Sms(t){this.sms!==t&&(this.sms=t,this.Bc.VB())}vms(){return this.sms}aC(){return{s:this.Vps,zh:this.Ups,fv:this.Qps,fi:this.tms,fo:this.ims.map(t=>t?t.G1():-1),zf:this.sms}}lC(t){this.Vps=t.s,this.Ups=t.zh,this.kB().fkt(this.Ups),this.Qps=t.fv.slice(0),this.tms=t.fi.slice(0),t.hasOwnProperty("fo")&&(this.ims=t.fo.map(t=>this.Bc.QY(t))),t.hasOwnProperty("zf")&&(this.sms=t.zf)}sot(t){}oot(t,s){}lPt(){const t="plugins.shape3d";return[{title:t+".name",properties:[{name:t+".properties.z-height.name",value:this.pms(),N2t:t=>this.dms(t)}]}]}bGt(){return self.bms}};const wA=new WeakMap,SA=["box","prism","wedge","pyramid","corner-out","corner-in"],vA=["back","front","left","right","top","bottom"];self.bms=class extends self.Kz{constructor(){super(),wA.set(this,self.cU.mU().iJ())}VJ(){return wA.get(this).UJ()}HJ(t){return this.zJ(t)[0]}JJ(t){return this.zJ(t)[1]}zJ(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return wA.get(this).pxt(t)}Mms(t){const s=vA.indexOf(t);if(s<0)throw new Error("invalid face");return wA.get(this).ams(s)}Cms(t,s){return this.Tms(t,s)[0]}xms(t,s){return this.Tms(t,s)[1]}Ims(t,s){return this.Tms(t,s)[2]}Tms(t,s){const i=vA.indexOf(t);if(i<0)throw new Error("invalid face");if("string"!=typeof s&&"number"!=typeof s)throw new TypeError("expected string or number");return wA.get(this).lms(i,s)}set _ms(t){KP.he(t),wA.get(this).dms(t)}get _ms(){return wA.get(this).pms()}set shape(t){KP.ue(t);const s=SA.indexOf(t);if(-1===s)throw new TypeError("invalid shape");wA.get(this).cms(s)}get shape(){return SA[wA.get(this).fms()]}Gms(t,s){const i=vA.indexOf(t);if(i<0)throw new Error("invalid face");wA.get(this).mms(i,!!s)}Pms(t){const s=vA.indexOf(t);if(s<0)throw new Error("invalid face");return wA.get(this).oms(s)}set Ams(t){wA.get(this).gms(t)}get Ams(){return wA.get(this).yms()}Rms(t,s){const i=vA.indexOf(t),e=vA.indexOf(s);if(i<0||e<0)throw new Error("invalid face");wA.get(this).wms(i,e)}get Ems(){return wA.get(this).vms()}set Ems(t){KP.he(t),wA.get(this).Sms(t)}Oms(t,s){const i=vA.indexOf(t);if(i<0)throw new Error("invalid face");const e=wA.get(this),n=e.l$().B$(s);e.ems(i,n)}}}{const MA=self._s;MA.i$._ps.t$={Dms(t){return this.fms()===t},Fms(t,s){return MA.compare(this.pms(),t,s)},kms(t){return this.oms(t)}}}self._s.i$._ps.wht={Lms(t){this.cms(t)},Nms(t){this.dms(t)},Bms(t,s){this.mms(t,s)},nLt(t){this.gms(t)},$ms(t,s){this.wms(t,s)},Wms(t){this.Sms(t)},jms(t,s){this.ems(t,s)}},self._s.i$._ps.Sht={Vms(){return this.pms()},Ums(){return this.vms()},Hms(t,s){return this.lms(t,s)[0]},zms(t,s){return this.lms(t,s)[1]},Jms(t,s){return this.lms(t,s)[2]},qms(t){return this.ams(t)}};{const CA=self._s;CA.i$.Yms=class extends CA.K_t{constructor(t){super(t)}zn(){super.zn()}}}{const TA=self._s;TA.i$.Yms.dEt=class extends TA.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){this.WJ().a$(this.Bc)}g5(t){return this.WJ().KX(t,{eT:this.Bc.KL()})}M5(){this.WJ().aA()}}}{let xA=function(t){return ZA.get(t).Xms()};GetParticleEngine=xA;const IA=self._s,_A=self.Ns,GA=0,PA=1,AA=2,RA=3,EA=4,OA=5,DA=6,FA=7,kA=8,LA=9,NA=10,BA=11,$A=12,WA=13,jA=14,VA=15,UA=16,HA=17,zA=18,JA=19,qA=20,YA=0,XA=1,KA=IA.Hn(IA.Rect);IA.i$.Yms.Instance=class extends IA.pPt{constructor(t,s){super(t),this.Kms=!0;const i=IA.Hn(self.Zms);this.Qms=i,i.tgs=()=>this.sgs(),this.igs=null,this.egs=(t,s,i,e,n,r)=>this.ngs(t,s,i,e,n,r),this.rgs=t=>this.hgs(t),this.ogs=!0;let e=!0;s&&(i.ags(s[GA]),i.lgs(IA.Qn(s[PA])),i.ugs(s[AA]?"one-shot":"continuous-spray"),this.cgs(this.Bc.QY(s[RA])),e=s[EA],i.fgs(s[OA]),i.dgs(s[DA]),i.pgs(s[FA]/100),i.mgs(s[kA]),i.ggs(s[LA]),i.ygs(s[NA]),i.wgs(s[BA]),i.Sgs(s[$A]),i.vgs(s[WA]),i.bgs(s[jA]),i.Mgs(s[VA]),i.Cgs(s[UA]),i.Tgs(s[HA]),i.xgs(s[zA]),i.Igs(s[JA]),i.wZt(s[qA])),this._gs(),this.igs&&(this.ogs=!1),"one-shot"===i.Ggs()?i.Pgs():i.Ags(!0);const n=this.kB();n.wV(e),n.Qkt(!0),this.di.Sf().addEventListener("bboxchange",()=>{n.Zkt(this.Qms.BH())}),this.l$().gM().sv()&&n.Vkt(),this.d6=t=>this.p6(t),this.l$().Sf().addEventListener("afterload",this.d6),this.rPt()}zn(){this.l$().Sf().removeEventListener("afterload",this.d6),this.d6=null,this.Qms.zn(),this.Qms=null,this.egs=null,this.rgs=null,super.zn()}Xms(){return this.Qms}Rgs(t){this.Qms.ags(t),"one-shot"===this.Qms.Ggs()&&this.Kms&&this.Qms.Egs(t)}cgs(t){t===this.fU()&&(t=null),t!==this.igs&&(this.igs=t,this.Qms.Ogs=t?t=>this.Dgs(t):null,this.igs||(this.ogs=!0))}_gs(){const t=this.Qms,s=this.kB();t.Fgs(s.SO()),t.fYt(this.Bc.QL()),t.kgs(s.YM()),t.Lgs(s.ZM()),t.Ngs(s.Dj()),t.Bgs(Math.abs(s.dkt()))}sgs(){this.Bc.wU(this.di)}HC(t){if(!this.ogs)return;const s=this.mpt.WJ(),i=s.Tx();if(!i)return;const e=this.kB(),n=e.LB(),r=KA;this.Bc.IB().sjt()?r.set(-1/0,-1/0,1/0,1/0):n.u2()?n.Y3(e.kH(),r):n.Y1(e.kH(),r),t.TO(i);const h=n.X1(e.kH());this.Qms.$gs(n.uU()*h),this.Qms.HC(t,s.IPt(),r,n.u2())}aC(){const t=this.Qms;return{r:t.Wgs(),sc:t.jgs(),st:t.Ggs(),isp:t.Vgs(),isz:t.Ugs(),io:t.Hgs(),gr:t.zgs(),xr:t.Jgs(),yr:t.qgs(),spr:t.Ygs(),szr:t.Xgs(),grnd:t.Kgs(),acc:t.Zgs(),g:t.Qgs(),lar:t.tys(),lsr:t.sys(),lor:t.iys(),dm:t.eys(),to:t.nys(),s:t.rys(),pcc:t.hys(),ft:this.Kms,soc:this.igs?this.igs.G1():null,p:t.oys().map(t=>t.toJSON())}}lC(t,s){const i=this.Qms;if(i.ags(t.r),i.lgs(t.sc),i.ugs(t.st),i.fgs(t.isp),i.dgs(t.isz),i.pgs(t.io),i.mgs(t.gr),i.ggs(t.xr),i.ygs(t.yr),i.wgs(t.spr),i.Sgs(t.szr),i.vgs(t.grnd),i.bgs(t.acc),i.Mgs(t.g),i.Cgs(t.lar),i.Tgs(t.lsr),i.xgs(t.lor),i.Igs(t.dm),i.wZt(t.to),i.Ags(t.s),i.ays(t.pcc),this.Kms=t.ft,t.hasOwnProperty("soc")){const s=this.l$().QY(t.soc);s&&this.cgs(s)}const e=t.p;i.Egs(e.length,!1);const n=i.oys();for(let t=0,s=n.length;t<s;++t)n[t].Sa(e[t]);"state"===s&&this.igs&&(i.lys(),i.uys(this))}p6(){const t=this.Qms;t.lys(),t.uys(this);const s=t.oys();for(let t=0,i=s.length;t<i;++t){const i=s[t],e=i.cys();if(!e)continue;const n=e.kB();if(!n)continue;const r=n.Pq();if(!r)continue;const h=i.fys(),o=r.xU();if(("number"!=typeof h||"number"!=typeof o||h!==o)&&"number"==typeof h){const t=this.l$(),s=t.AB(h);s&&t.wU(s)}}}c7(){const t=this.Bc.RN(this.di);this._gs(),this.Kms&&"one-shot"===this.Qms.Ggs()&&this.Qms.dys(),this.Qms.c7(t),this.Qms.rys()&&this.Bc.VB(),this.kB().CH(),this.Kms=!1}pys(t){const s=1/60;for(this.Kms&&"one-shot"===this.Qms.Ggs()&&this.Qms.dys();t>0;)this.Qms.c7(s),t-=s;this.Qms.rys()&&this.Bc.VB(),this.kB().CH(),this.Kms=!1}Dgs(t,s){let i;"number"==typeof s&&(i=this.Bc.AB(s)),i&&i.fU()!==this.igs&&(i=null),i||(i=this.Bc.lj(this.igs,this.kB().LB(),t.YM(),t.ZM()));const e=i.kB();return e.$A(t.Du(),t.Du()),e.Oj(t.Dj()),e.bO(t.SO()),e.zH(this.kB().HH()),e.CH(),e.tz(this.Pq(),!0),i.j5(),t.mys(this.egs),t.gys(this.rgs),i}ngs(t,s,i,e,n,r){if(t.SY())return;const h=t.kB();h.IH(s,i),h.$A(h.Vg()+e,h.Qg()+e),h.Oj(h.Dj()+n),h.bO(h.SO()+r),h.CH()}hgs(t){t.SY()||this.Bc.wU(t)}sot(t){const s=this.Qms;switch(t){case GA:return s.Wgs();case PA:return IA.tr(s.jgs());case AA:return"one-shot"===s.Ggs()?XA:YA;case OA:return s.Vgs();case DA:return s.Ugs();case FA:return 100*s.Hgs();case kA:return s.zgs();case LA:return s.Jgs();case NA:return s.qgs();case BA:return s.Ygs();case $A:return s.Xgs();case WA:return s.Kgs();case jA:return s.Zgs();case VA:return s.Qgs();case UA:return s.tys();case HA:return s.sys();case zA:return s.iys();case JA:return s.eys();case qA:return s.nys()}}oot(t,s){const i=this.Qms;switch(t){case GA:i.ags(s);break;case PA:i.lgs(IA.Qn(s));break;case AA:i.ugs(s?"one-shot":"continuous-spray");break;case OA:i.fgs(s);break;case DA:i.dgs(s);break;case FA:i.pgs(s/100);break;case kA:i.mgs(s);break;case LA:i.ggs(s);break;case NA:i.ygs(s);break;case BA:i.wgs(s);break;case $A:i.Sgs(s);break;case WA:i.vgs(s);break;case jA:i.bgs(s);break;case VA:i.Mgs(s);break;case UA:i.Cgs(s);break;case HA:i.Tgs(s);break;case zA:i.xgs(s);break;case JA:i.Igs(s);break;case qA:i.wZt(s)}}lPt(){const t="plugins.particles",s=t+".properties",i=t+".debugger",e=this.Qms;return[{title:t+".name",properties:[{name:i+".particle-count",value:e.yys()},{name:s+".type.name",value:[s+".type.items."+e.Ggs()]},{name:i+".is-spraying",value:e.rys(),N2t:t=>e.Ags(t)},{name:s+".rate.name",value:e.Wgs(),N2t:t=>e.ags(t)},{name:s+".spray-cone.name",value:IA.tr(e.jgs()),N2t:t=>e.lgs(IA.Qn(t))},{name:s+".speed.name",value:e.Vgs(),N2t:t=>e.fgs(t)},{name:s+".size.name",value:e.Ugs(),N2t:t=>e.dgs(t)},{name:s+".opacity.name",value:e.Hgs(),N2t:t=>e.pgs(t)},{name:s+".grow-rate.name",value:e.zgs(),N2t:t=>e.mgs(t)},{name:s+".x-randomiser.name",value:e.Jgs(),N2t:t=>e.ggs(t)},{name:s+".y-randomiser.name",value:e.qgs(),N2t:t=>e.ygs(t)},{name:s+".initial-speed-randomiser.name",value:e.Ygs(),N2t:t=>e.wgs(t)},{name:s+".size-randomiser.name",value:e.Xgs(),N2t:t=>e.Sgs(t)},{name:s+".grow-rate-randomiser.name",value:e.Kgs(),N2t:t=>e.vgs(t)},{name:s+".acceleration.name",value:e.Zgs(),N2t:t=>e.bgs(t)},{name:s+".gravity.name",value:e.Qgs(),N2t:t=>e.Mgs(t)},{name:s+".angle-randomiser.name",value:e.tys(),N2t:t=>e.Cgs(t)},{name:s+".life-speed-randomiser.name",value:e.sys(),N2t:t=>e.Tgs(t)},{name:s+".opacity-randomiser.name",value:e.iys(),N2t:t=>e.xgs(t)},{name:s+".timeout.name",value:e.nys(),N2t:t=>e.wZt(t)}]}]}bGt(){return self.wys}};const ZA=new WeakMap;self.wys=class extends self.Kz{constructor(){super(),ZA.set(this,self.cU.mU().iJ())}set Sys(t){xA(this).Ags(!!t)}get Sys(){return xA(this).rys()}set rate(t){_A.he(t),ZA.get(this).Rgs(t)}get rate(){return xA(this).Wgs()}set vys(t){_A.he(t),xA(this).lgs(t)}get vys(){return xA(this).jgs()}set bys(t){_A.he(t),xA(this).fgs(t)}get bys(){return xA(this).Vgs()}set Mys(t){_A.he(t),xA(this).dgs(t)}get Mys(){return xA(this).Ugs()}set Cys(t){_A.he(t),xA(this).pgs(t)}get Cys(){return xA(this).Hgs()}set Tys(t){_A.he(t),xA(this).ggs(t)}get Tys(){return xA(this).Jgs()}set xys(t){_A.he(t),xA(this).ygs(t)}get xys(){return xA(this).qgs()}set Iys(t){_A.he(t),xA(this).wgs(t)}get Iys(){return xA(this).Ygs()}set _ys(t){_A.he(t),xA(this).Sgs(t)}get _ys(){return xA(this).Xgs()}set Gys(t){_A.he(t),xA(this).mgs(t)}get Gys(){return xA(this).zgs()}set Pys(t){_A.he(t),xA(this).vgs(t)}get Pys(){return xA(this).Kgs()}set acceleration(t){_A.he(t),xA(this).bgs(t)}get acceleration(){return xA(this).Zgs()}set Ays(t){_A.he(t),xA(this).Mgs(t)}get Ays(){return xA(this).Qgs()}set Rys(t){_A.he(t),xA(this).Cgs(t)}get Rys(){return xA(this).tys()}set Eys(t){_A.he(t),xA(this).Tgs(t)}get Eys(){return xA(this).sys()}set Oys(t){_A.he(t),xA(this).xgs(t)}get Oys(){return xA(this).iys()}set timeout(t){_A.he(t),xA(this).wZt(t)}get timeout(){return xA(this).nys()}Dys(t){_A.he(t),ZA.get(this).pys(t)}Fys(t){const s=ZA.get(this);t?s.cgs(s.l$().B$(t)):s.cgs(null)}}}self._s.i$.Yms.t$={rys(){return this.Qms.rys()}};{const QA=self._s;QA.i$.Yms.wht={Ags(t){this.Qms.Ags(0!==t)},ags(t){this.Rgs(t)},kys(t){this.cgs(t)},Lys(){this.cgs(null)},lgs(t){this.Qms.lgs(QA.Qn(t))},fgs(t){this.Qms.fgs(t)},dgs(t){this.Qms.dgs(t)},pgs(t){this.Qms.pgs(t/100)},mgs(t){this.Qms.mgs(t)},Nys(t){this.Qms.ggs(t)},Bys(t){this.Qms.ygs(t)},$ys(t){this.Qms.wgs(t)},Wys(t){this.Qms.Sgs(t)},jys(t){this.Qms.vgs(t)},Vys(t){this.Qms.bgs(t)},Mgs(t){this.Qms.Mgs(t)},Uys(t){this.Qms.Cgs(t)},Hys(t){this.Qms.Tgs(t)},zys(t){this.Qms.xgs(t)},wZt(t){this.Qms.wZt(t)},Jys(t){this.pys(t)},mns(t){this.kB().NM(t),this.Bc.VB()}}}{const tR=self._s;tR.i$.Yms.Sht={qys(){return this.Qms.yys()},Yys(){return this.Qms.Wgs()},Xys(){return tR.tr(this.Qms.jgs())},Kys(){return this.Qms.Vgs()},Zys(){return this.Qms.Ugs()},Qys(){return 100*this.Qms.Hgs()},tws(){return this.Qms.zgs()},sws(){return this.Qms.Jgs()},iws(){return this.Qms.qgs()},ews(){return this.Qms.Xgs()},nws(){return this.Qms.Ygs()},rws(){return this.Qms.Kgs()},hws(){return this.Qms.Zgs()},ows(){return this.Qms.Qgs()},aws(){return this.Qms.tys()},lws(){return this.Qms.sys()},uws(){return this.Qms.iys()},cws(){return this.Qms.nys()}}}{const sR=self._s,iR=[],eR=1e3,nR=new Set(["continuous-spray","one-shot"]),rR=["fade-to-invisible","timeout-expired","particle-stopped"],hR=sR.Hn(sR.Rect);self.Zms=class{constructor(){this.fws=0,this.dws=0,this.pws="continuous-spray",this.mws=!1,this.gws=0,this.yws=!1,this.wws=0,this.Sws=0,this.vws=0,this.bws=0,this.Mws=0,this.Cws=1,this.Tws=0,this.xws=0,this.Iws=0,this._ws=0,this.Gws=0,this.Pws=0,this.Aws=0,this.Rws=0,this.Ews=0,this.Ows=0,this.Dws=0,this.Fws=0,this.kws=0,this.Lf=0,this.Lws=0,this.Nws=1,this.tgs=null,this.Ogs=null,this.Bws=[],this.LFt=new sR.Rect,this.OM=new sR.To,this.jF=globalThis.devicePixelRatio||1}zn(){this.Wf(),sR.bh(this.Bws),this.Bws=null,this.tgs=null,this.Ogs=null,this.LFt=null,this.OM=null}Wf(){const t=this.Bws;for(let s=0,i=t.length;s<i;++s)t[s].VIt();sR.On(iR,t),sR.bh(t),iR.length>1e3&&sR.Sh(iR,1e3),this.mws=!1}Pgs(){for(let t=0,s=this.fws;t<s;++t)this.$ws();this.Bws.length&&(this.mws=!0)}$ws(t=!0){let s=null;return iR.length?(s=iR.pop(),s.Wws(this)):s=sR.Hn(self.jws,this),this.Bws.push(s),t?s.FOt(this.Ogs):s.FOt(),s}dys(){const t=this.Bws,s=this.Ogs;for(let i=0,e=t.length;i<e;++i)t[i].FOt(s)}lys(){const t=this.Bws,s=this.Ogs;for(let i=0,e=t.length;i<e;++i)t[i].Vws(s)}uys(t){const s=this.Bws;for(let i=0,e=s.length;i<e;++i){const e=s[i],n=e.cys();if(n){const s=n.kB();s.XM(e.YM()),s.QM(e.ZM()),s.$A(e.Du(),e.Du()),s.bO(e.SO()),s.Oj(e.Dj()),s.zH(t.kB().HH()),s.CH()}}}Egs(t,s=!0){const i=this.Bws;if(t<i.length){const s=i.length-t;for(let t=0;t<s;++t){const t=i.pop();t.VIt(),iR.push(t)}iR.length>1e3&&sR.Sh(iR,1e3)}else if(t>i.length){const e=t-i.length;for(let t=0;t<e;++t)this.$ws(s)}}oys(){return this.Bws}yys(){return this.Bws.length}c7(t){this.Uws(t),this.Hws(t),this.zws()}Uws(t){if("continuous-spray"===this.pws&&this.mws){this.Lws+=t*this.fws;const s=Math.floor(this.Lws);this.Lws-=s;for(let t=0;t<s;++t)this.$ws()}}ays(t){this.Lws=t}hys(){return this.Lws}Hws(t){const s=this.LFt;s.set(this.wws,this.Sws,this.wws,this.Sws);const i=this.Bws;let e=0;for(let n=0,r=i.length;n<r;++n){const r=i[n];i[e]=r,r.c7(t),r.uSt()?(++e,s._l(r.BH())):(r.VIt(),iR.push(r))}sR.Sh(i,e),iR.length>1e3&&sR.Sh(iR,1e3)}zws(){"one-shot"===this.pws&&0===this.Bws.length&&this.mws&&(this.tgs&&this.tgs(),this.mws=!1)}HC(t,s,i,e){this.jF=globalThis.devicePixelRatio||1,hR.set(s.Br(),s.$r(),s.Vr(),s.Ur()),t.jO(hR),this.OM.S(t.CO());const n=this.Bws;for(let r=0,h=n.length;r<h;++r){const h=n[r];i.Cl(h.BH())&&h.HC(t,s,e)}t.VO()}CO(){return this.OM}ags(t){this.fws=+t}Wgs(){return this.fws}lgs(t){this.dws=+t}jgs(){return this.dws}ugs(t){if(!nR.has(t))throw new Error("invalid spray type");this.pws=t}Ggs(){return this.pws}Ags(t){this.mws=!!t}rys(){return this.mws}Fgs(t){this.gws=+t}Jws(){return this.gws}fYt(t){this.yws=!!t}qws(){return this.yws}kgs(t){this.wws=+t}Yws(){return this.wws}Lgs(t){this.Sws=+t}Xws(){return this.Sws}Ngs(t){this.vws=+t}Kws(){return this.vws}fgs(t){this.bws=+t}Vgs(){return this.bws}dgs(t){this.Mws=+t}Ugs(){return this.Mws}Bgs(t){this.Cws=+t}Zws(){return this.Cws}pgs(t){this.Tws=+t}Hgs(){return this.Tws}mgs(t){this.xws=+t}zgs(){return this.xws}ggs(t){this.Iws=+t}Jgs(){return this.Iws}ygs(t){this._ws=+t}qgs(){return this._ws}wgs(t){this.Gws=+t}Ygs(){return this.Gws}Sgs(t){this.Pws=+t}Xgs(){return this.Pws}vgs(t){this.Aws=+t}Kgs(){return this.Aws}bgs(t){this.Rws=+t}Zgs(){return this.Rws}Mgs(t){this.Ews=+t}Qgs(){return this.Ews}Cgs(t){this.Ows=+t}tys(){return this.Ows}Tgs(t){this.Dws=+t}sys(){return this.Dws}xgs(t){this.Fws=+t}iys(){return this.Fws}Qws(t){let s=rR.indexOf(t);if(-1===s)throw new Error("invalid destroy mode");this.kws=s}Igs(t){this.Qws(rR[t])}tSs(){return rR[this.kws]}eys(){return this.kws}wZt(t){this.Lf=+t}nys(){return this.Lf}$gs(t){this.Nws=+t}sSs(){return this.Nws}BH(){return this.LFt}uW(){return this.jF}}}{let oR=function(t){return Math.random()*t-t/2};randomOffset=oR;const aR=self._s,lR=self.Zms,uR=new aR.Pl,cR=new aR.To;let fR=!1;self.jws=class{constructor(t){this.iSs=t,this.Bf=!1,this.Aa=0,this.Ra=0,this.tRt=0,this.l0=0,this.eSs=1,this.nSs=0,this.rSs=0,this.qZ=0,this.hSs=0,this.oSs=0,this.aSs=0,this.cu=new aR.Rect,this.lSs=null,this.uSs=NaN,this.cSs=null,this.fSs=null}Wws(t){this.iSs=t}FOt(t){const s=this.iSs;this.Bf=!0,this.Aa=s.Yws()+oR(s.Jgs()),this.Ra=s.Xws()+oR(s.qgs()),this.tRt=s.Vgs()+oR(s.Ygs()),this.l0=s.Kws()+oR(s.jgs()),this.eSs=s.Hgs(),this.nSs=this.eSs,this.qZ=(s.Ugs()+oR(s.Xgs()))*s.Zws(),this.hSs=this.qZ/2,this.rSs=s.zgs()+oR(s.Kgs()),this.oSs=0,this.aSs=0,this.dSs(),t?this.lSs||(this.lSs=t(this)):(this.lSs=null,this.cSs=null,this.fSs=null)}Vws(t){t?this.lSs&&!this.lSs.SY()||(this.lSs=t(this,this.uSs)):(this.lSs=null,this.cSs=null,this.fSs=null)}mys(t){this.cSs=t}gys(t){this.fSs=t}VIt(){const t=this.fSs;t&&t(this.lSs),this.lSs=null,this.cSs=null,this.fSs=null}toJSON(){let t;return this.lSs&&this.lSs.kB()&&(t=this.lSs.kB().Pq().xU()),[this.Aa,this.Ra,this.tRt,this.l0,this.eSs,this.rSs,this.qZ,this.oSs,this.aSs,t]}Sa(t){this.Aa=t[0],this.Ra=t[1],this.tRt=t[2],this.l0=t[3],this.eSs=t[4],this.nSs=this.eSs,this.rSs=t[5],this.qZ=t[6],this.oSs=t[7],this.aSs=t[8],this.uSs=t[9],this.hSs=this.qZ/2,this.dSs()}c7(t){const s=this.iSs,i=this.tRt*t,e=this.l0,n=Math.cos(e)*i,r=Math.sin(e)*i+this.oSs*t;this.Aa+=n,this.Ra+=r;const h=this.rSs*t;this.qZ+=h,this.hSs=this.qZ/2,this.tRt+=s.Zgs()*t,this.oSs+=s.Qgs()*t,this.aSs+=t,this.dSs();const o=s.tys(),a=s.sys(),l=s.iys();let u=0;0!==o&&(u=oR(o*t),this.l0+=u),0!==a&&(this.tRt+=oR(a*t)),0!==l&&(this.eSs=aR.Kn(this.eSs+oR(l*t),0,1));const c=this.qZ>=1&&(2===s.eys()?this.tRt>0:this.aSs<s.nys()),f=this.cSs;if(f&&c){let t=s.Jws()*this.eSs;0===s.eys()&&(t*=1-this.aSs/s.nys());const i=t-this.nSs;this.nSs=t,f(this.lSs,n,r,h,u,i)}this.Bf=c}uSt(){return this.Bf}BH(){return this.cu}dSs(){const t=this.Aa,s=this.Ra,i=this.hSs;this.cu.set(t-i,s-i,t+i,s+i)}HC(t,s,i){if(this.lSs)return;const e=this.iSs;let n=e.Jws()*this.eSs;if(0===e.eys()&&(n*=1-this.aSs/e.nys()),n<=0)return;const r=this.qZ,h=r*e.sSs()*e.uW();if(h<1)return;let o=this.Aa,a=this.Ra;e.qws()&&(o=o+.5|0,a=a+.5|0),t.sv()?t.UO(o,a,r,n):i||h>t._D()||h<t.ID()?(cR.S(e.CO()),cR.Ko(n),t.BM(cR),fR=!0,uR.Xl(this.cu),t.kO(uR,s)):(fR&&(t.BM(e.CO()),fR=!1),t.UO(o,a,h,n))}cys(){return this.lSs}fys(){return this.uSs}YM(){return this.Aa}ZM(){return this.Ra}Du(){return this.qZ}Dj(){return this.l0}SO(){return this.eSs}}}{const dR=self._s,pR=[];dR.i$.Audio=class extends dR.K_t{constructor(t){super(t)}pSs(t){pR.push(t)}static async mSs(){await Promise.all(pR),dR.bh(pR)}zn(){super.zn()}}}{let mR=function(){return SR.VW().iJ()},gR=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};GetAudioSdkInstance=mR,GetAudioDOMInterface=gR;const yR=self._s,wR=self.Ns;yR.i$.Audio.dEt=class extends yR.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){}bGt(){return self.gSs}};let SR=null;self.gSs=class extends self.rj{constructor(t){super(t),SR=t}get ySs(){return gR().GetAudioContextExtern()}get wSs(){return gR().GetDestinationNodeExtern()}get SSs(){return mR().vSs()}set SSs(t){mR().bSs(t)}get MSs(){return mR().CSs()}set MSs(t){wR.he(t),mR().TSs(t)}xSs(){mR().ISs()}}}{const vR=self._s,bR="audio",MR=["interactive","balanced","playback"];vR.i$.Audio.Instance=class extends vR.$Gt{constructor(t,s){super(t,bR),this._Ss=0,this.GSs=0,this.PSs=[],this.ASs=!0,this.RSs=0,this.ESs=0,this.OSs=!1,this.DSs=1,this.FSs=1,this.kSs=[this.Bc.Z1()/2,this.Bc.Q1()/2,600],this.LSs=[0,0,-1],this.NSs=[0,1,0],this.BSs=600,this.$Ss=1e4,this.WSs=1,this.jSs=null,this.VSs=-1,this.USs=1,this.HSs=!1,this.zSs=0,this.JSs="suspended",this.qSs=0,this.YSs=new Map,this.XSs=0,this.KSs=0,this.ZSs=new Map,this.QSs=new Map;let i="interactive";s&&(this.RSs=s[0],this.ESs=s[1],this.OSs=s[2],i=MR[s[3]],this.ASs=s[4],this.DSs=s[5],this.FSs=s[6],this.kSs[2]=s[7],this.BSs=s[8],this.$Ss=s[9],this.WSs=s[10]),this.tvs=[],this.svs=[],this.ivs=[],this.KGt([["state",t=>this.evs(t)],["audiocontext-state",t=>this.nvs(t)],["fxstate",t=>this.rvs(t)],["trigger",t=>this.hvs(t)],["buffer-metadata",t=>this.ovs(t)]]);const e=this.l$().Sf();this.Kf=new vR.qf(vR.jf.Jf(e,"instancedestroy",t=>this.l8t(t.dJ)),vR.jf.Jf(e,"afterload",()=>this.p6()),vR.jf.Jf(e,"suspend",()=>this.qZt()),vR.jf.Jf(e,"resume",()=>this.YZt()));const n=this.Bc.z$(),r="Safari"===vR.Zs.si,h=this.Bc.Fzt()||"macos-wkwebview"===n,o=this.Bc.GL().oZ(),a="playable-ad-single-file"===n,l="cordova"===n&&"Android"===vR.Zs.Qs,u=r||h||o||a||l;this.Bc.YB(this.QGt("create-audio-context",{preloadList:this.Bc.GL().jZ().map(t=>({originalUrl:t.VZ,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.RSs,latencyHint:i,panningModel:this.DSs,distanceModel:this.FSs,refDistance:this.BSs,maxDistance:this.$Ss,rolloffFactor:this.WSs,listenerPos:this.kSs,usePlayMusicAsSoundWorkaround:u}).then(t=>{this.zSs=t.sampleRate,this.JSs=t.audioContextState,this.qSs=t.outputLatency})),this.rPt()}zn(){this.jSs=null,super.zn()}avs(t){return this.ASs?t.split(" ").filter(t=>!!t):t?[t]:[]}lvs(t,s){for(const i of s){let s=!1;for(const e of t)if(vR.Ze(e,i)){s=!0;break}if(!s)return!1}return!0}uvs(t,s){return this.lvs(t,this.avs(s))}pSs(t){this.zW().pSs(t)}l8t(t){this.jSs===t&&(this.jSs=null)}cvs(t){return Math.pow(10,t/20)}fvs(t){const s=this.cvs(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}dvs(t){return Math.log(t)/Math.log(10)*20}pvs(t){return this.dvs(Math.max(Math.min(t,1),0))}mvs(){let t=0;const s=!!self.C3_GetAudioContextCurrentTime;return t=s?this._Ss:this.GSs,this._Ss=0,this.GSs=0,{gvs:t,yvs:s}}qZt(){this.OSs||this.ZGt("set-suspended",{isSuspended:!0})}YZt(){this.OSs||this.ZGt("set-suspended",{isSuspended:!1})}evs(t){const s=t.tickCount;this.qSs=t.outputLatency;const i=this.tvs.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder));this.tvs=t.audioInstances,this.ivs=t.analysers,i.length>0&&vR.On(this.tvs,i)}ovs(t){this.ZSs.set(t.originalUrl,{duration:t.duration})}nvs(t){this.JSs=t.audioContextState}Ght(){return this.Bc.oWt()?"running":this.JSs}rvs(t){this.svs=t.fxstate}wvs(t){const s=this.avs(t);for(const t of this.tvs)if(this.lvs(t.tags,s))return t;return null}Svs(t){const s=this.avs(t);return this.tvs.some(t=>this.lvs(t.tags,s)&&t.isPlaying)}vvs(t,s,i,e,n){if(this.Svs(s))return null;const r=this.ZSs.get(t),h={tags:this.avs(s),duration:r?r.duration:0,volume:n,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.tvs.push(h),h}bvs(t){const s=this.avs(t);for(const t of this.tvs)this.lvs(t.tags,s)&&(t.isPlaying=!1)}async hvs(t){const s=t.type;this.PSs=t.tags;const i=t.aiid;if("ended"===s){for(const t of this.tvs)if(t.aiid===i){t.isPlaying=!1;break}await this.ZB(vR.i$.Audio.t$.Mvs)}else"fade-ended"===s&&await this.ZB(vR.i$.Audio.t$.Cvs)}Tvs(t){return this.uvs(this.PSs,t)}c7(){const t={timeScale:this.Bc.WN(),gameTime:this.Bc.Azt(),instPans:this.xvs(),tickCount:this.Bc.Rzt()};if(this.jSs){const s=this.jSs.kB();this.kSs[0]=s.YM(),this.kSs[1]=s.ZM(),t.listenerPos=this.kSs,t.listenerOrientation=[...this.LSs,...this.NSs]}this.ZGt("tick",t)}Ivs(t,s,i,e,n){if(0===i)return[t,s];const r=Math.sin(i),h=Math.cos(i),o=(t-=e)*r;return t=t*h-(s-=n)*r,s=s*h+o,[t+=e,s+=n]}xvs(){return this.tvs.filter(t=>-1!==t.uid).map(t=>this.Bc.AB(t.uid)).filter(t=>t).map(t=>{const s=t.kB(),i=s.LB().Dj(),[e,n]=this.Ivs(s.YM(),s.ZM(),-i,this.kSs[0],this.kSs[1]);return{uid:t.xU(),x:e,y:n,z:s.kH(),angle:s.Dj()-i}})}_vs(t,s){for(const i of this.ivs)if(i.index===s&&vR.Ze(i.tag,t))return i;return null}Gvs(t){for(const s of this.avs(t)){const t=s.toLowerCase();this.YSs.set(t,(this.YSs.get(t)||0)+1)}}vSs(){return this.HSs}bSs(t){t=!!t,this.HSs!==t&&(this.HSs=t,this.ZGt("set-silent",{isSilent:t}))}CSs(){return this.USs}TSs(t){this.USs!==t&&(this.USs=t,this.ZGt("set-master-volume",{vol:t}))}ISs(){this.ZGt("stop-all");for(const t of this.tvs)t.isPlaying=!1}Pvs(t){return!(t.hasOwnProperty("placeholder")||3===this.ESs||t.isMusic&&1===this.ESs||!t.isMusic&&2===this.ESs)}aC(){return{isSilent:this.HSs,masterVolume:this.USs,listenerZ:this.kSs[2],listenerForwardVec:this.LSs,listenerUpVec:this.NSs,listenerUid:this.jSs?this.jSs.xU():-1,remoteUrls:[...this.QSs.entries()],playing:this.tvs.filter(t=>this.Pvs(t)),effects:this.svs,analysers:this.ivs}}lC(t){if(this.HSs=t.isSilent,this.USs=t.masterVolume,this.kSs[2]=t.listenerZ,this.jSs=null,this.VSs=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.LSs=t.listenerForwardVec:this.LSs=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.NSs=t.listenerUpVec:this.NSs=[0,1,0],this.QSs.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.QSs.set(s,i);this.tvs=t.playing;for(const t of this.tvs)t.hasOwnProperty("tag")&&!t.hasOwnProperty("tags")&&(t.tags=[t.tag].filter(t=>!!t));this.svs=t.effects,this.ivs=t.analysers}p6(){if(-1!==this.VSs&&(this.jSs=this.Bc.AB(this.VSs),this.VSs=-1,this.jSs)){const t=this.jSs.kB();this.kSs[0]=t.YM(),this.kSs[1]=t.ZM()}for(const t of this.tvs){const s=this.Bc.GL().WZ(t.bufferOriginalUrl);s?(t.bufferUrl=s.url,t.bufferType=s.type):t.bufferUrl=null}for(const t of Object.values(this.svs))for(const s of t)if(s.hasOwnProperty("bufferOriginalUrl")){const t=this.Bc.GL().WZ(s.bufferOriginalUrl);t&&(s.bufferUrl=t.url,s.bufferType=t.type)}this.ZGt("load-state",{saveLoadMode:this.ESs,timeScale:this.Bc.WN(),gameTime:this.Bc.Azt(),listenerPos:this.kSs,listenerOrientation:[...this.LSs,...this.NSs],isSilent:this.HSs,masterVolume:this.USs,playing:this.tvs.filter(t=>null!==t.bufferUrl),effects:this.svs})}lPt(){const t=[];for(const[s,i]of Object.entries(this.svs))t.push({name:"$"+s,value:i.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.tvs.length},...this.tvs.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / ${Math.round(10*t.duration)/10}`}))]}]}}}self._s.i$.Audio.t$={Mvs(t){return this.Tvs(t)},Cvs(t){return this.Tvs(t)},Avs(){return this.KSs===this.XSs},Rvs:()=>!0,Evs(){return this.vSs()},Ovs(){for(const t of this.tvs)if(t.isPlaying)return!0;return!1},Dvs(t){return this.Svs(t)}};{const CR=self._s,TR=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];CR.i$.Audio.wht={Play(t,s,i,e,n){const r=CR.i$.Audio.wht.Fvs.call(this,t,s,i,e,n);return this.pSs(r),r},Pht(t,s,i,e){CR.i$.Audio.wht.Fvs.call(this,t,0,s,0,i,e)},async Fvs(t,s,i,e,n,r){if(this.HSs)return;const h=t[1],o=this.Bc.GL().WZ(t[0]);if(!o)return;const{gvs:a,yvs:l}=this.mvs(),u=this.vvs(t[0],n,h,0!==s,this.fvs(i));try{await this.QGt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:h,tags:this.avs(n),isLooping:0!==s,vol:this.fvs(i),stereoPan:CR.Kn(e/100,-1,1),pos:r||0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.Bc.Rzt())}},async kvs(t,s,i,e,n,r,h,o,a,l,u){if(this.HSs)return;const c=t[1],f=this.Bc.GL().WZ(t[0]);if(!f)return;const{gvs:d,yvs:p}=this.mvs(),m=this.vvs(t[0],u,c,0!==s,this.fvs(i));try{await this.QGt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.avs(u),isLooping:0!==s,vol:this.fvs(i),pos:0,off:d,trueClock:p,panning:{x:e,y:n,z:r,angle:CR.Qn(h),innerAngle:CR.Qn(o),outerAngle:CR.Qn(a),outerGain:this.fvs(l)}})}finally{m&&(m.placeholder=this.Bc.Rzt())}},async Lvs(t,s,i,e,n,r,h,o){if(this.HSs)return;if(!e)return;const a=e.Hxt();if(!a||!a.kB())return;const l=a.kB(),u=l.LB().Dj(),[c,f]=this.Ivs(l.YM(),l.ZM(),-u,this.kSs[0],this.kSs[1]),d=t[1],p=this.Bc.GL().WZ(t[0]);if(!p)return;const{gvs:m,yvs:g}=this.mvs(),y=this.vvs(t[0],o,d,0!==s,this.fvs(i));try{await this.QGt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.avs(o),isLooping:0!==s,vol:this.fvs(i),pos:0,off:m,trueClock:g,panning:{x:c,y:f,z:l.kH(),angle:l.Dj()-u,innerAngle:CR.Qn(n),outerAngle:CR.Qn(r),outerGain:this.fvs(h),uid:a.xU()}})}finally{y&&(y.placeholder=this.Bc.Rzt())}},async Nvs(t,s,i,e,n,r){if(this.HSs)return;const h=1===t,o=this.Bc.GL().WZ(s)||this.QSs.get(s.toLowerCase());if(!o)return;const{gvs:a,yvs:l}=this.mvs(),u=this.vvs(s,r,h,0!==i,this.fvs(e));try{await this.QGt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:h,tags:this.avs(r),isLooping:0!==i,vol:this.fvs(e),stereoPan:CR.Kn(n/100,-1,1),pos:0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.Bc.Rzt())}},async Bvs(t,s,i,e,n,r,h,o,a,l,u,c){if(this.HSs)return;const f=1===t,d=this.Bc.GL().WZ(s)||this.QSs.get(s.toLowerCase());if(!d)return;const{gvs:p,yvs:m}=this.mvs(),g=this.vvs(s,c,f,0!==i,this.fvs(e));try{await this.QGt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.avs(c),isLooping:0!==i,vol:this.fvs(e),pos:0,off:p,trueClock:m,panning:{x:n,y:r,z:h,angle:CR.Qn(o),innerAngle:CR.Qn(a),outerAngle:CR.Qn(l),outerGain:this.fvs(u)}})}finally{g&&(g.placeholder=this.Bc.Rzt())}},async $vs(t,s,i,e,n,r,h,o,a){if(this.HSs)return;if(this.HSs)return;if(!n)return;const l=n.Hxt();if(!l||!l.kB())return;const u=l.kB(),c=u.LB().Dj(),[f,d]=this.Ivs(u.YM(),u.ZM(),-c,this.kSs[0],this.kSs[1]),p=1===t,m=this.Bc.GL().WZ(s)||this.QSs.get(s.toLowerCase());if(!m)return;const{gvs:g,yvs:y}=this.mvs(),w=this.vvs(s,a,p,0!==i,this.fvs(e));try{await this.QGt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.avs(a),isLooping:0!==i,vol:this.fvs(e),pos:0,off:g,trueClock:y,panning:{x:f,y:d,z:u.kH(),angle:u.Dj()-c,innerAngle:CR.Qn(r),outerAngle:CR.Qn(h),outerGain:this.fvs(o),uid:l.xU()}})}finally{w&&(w.placeholder=this.Bc.Rzt())}},Wvs(t,s){this.ZGt("set-looping",{tags:this.avs(t),isLooping:0===s})},jvs(t,s){this.ZGt("set-muted",{tags:this.avs(t),isMuted:0===s})},Iht(t,s){this.ZGt("set-volume",{tags:this.avs(t),vol:this.fvs(s)})},Vvs(t,s,i,e){this.ZGt("fade-volume",{tags:this.avs(t),vol:this.fvs(s),duration:i,stopOnEnd:0===e})},Uvs(t,s){this.ZGt("set-stereo-pan",{tags:this.avs(t),p:CR.Kn(s/100,-1,1)})},async Hvs(t){const s=t[1],i=this.Bc.GL().WZ(t[0]);i&&(this.XSs++,await this.QGt("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.KSs++)},async zvs(t,s){const i=1===t,e=this.Bc.GL().WZ(s)||this.QSs.get(s.toLowerCase());e&&(this.XSs++,await this.QGt("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.KSs++)},mq(t,s){this.ZGt("set-playback-rate",{tags:this.avs(t),rate:Math.max(s,0)})},nq(t){this.bvs(t),this.ZGt("stop",{tags:this.avs(t)})},Jvs(){this.ISs()},qvs(t,s){this.ZGt("set-paused",{tags:this.avs(t),paused:0===s})},Yvs(t,s){this.ZGt("seek",{tags:this.avs(t),pos:s})},Xvs(t){2===t&&(t=this.vSs()?1:0),this.bSs(0===t)},Kvs(t){const s=this.fvs(t);this.TSs(s)},Zvs(t,s,i,e,n,r,h){const o=TR[s];this.Gvs(t),this.ZGt("add-effect",{type:"filter",tags:this.avs(t),params:[o,i,e,n,r,CR.Kn(h/100,0,1)]})},Qvs(t,s,i,e){this.Gvs(t),this.ZGt("add-effect",{type:"delay",tags:this.avs(t),params:[s,this.fvs(i),CR.Kn(e/100,0,1)]})},tbs(t,s,i,e,n,r){this.Gvs(t),this.ZGt("add-effect",{type:"flanger",tags:this.avs(t),params:[s/1e3,i/1e3,e,n/100,CR.Kn(r/100,0,1)]})},sbs(t,s,i,e,n,r,h){this.Gvs(t),this.ZGt("add-effect",{type:"phaser",tags:this.avs(t),params:[s,i,e,n,r,CR.Kn(h/100,0,1)]})},ibs(t,s,i,e){const n=this.Bc.GL().WZ(s[0]);n&&(this.Gvs(t),this.ZGt("add-effect",{type:"convolution",tags:this.avs(t),bufferOriginalUrl:s[0],bufferUrl:n.url,bufferType:n.type,params:[0===i,CR.Kn(e/100,0,1)]}))},ebs(t,s){this.Gvs(t),this.ZGt("add-effect",{type:"gain",tags:this.avs(t),params:[this.fvs(s)]})},nbs(t,s){this.Gvs(t),this.ZGt("add-effect",{type:"stereopan",tags:this.avs(t),params:[CR.Kn(s/100,-1,1)]})},rbs(t){this.Gvs(t),this.ZGt("add-effect",{type:"gain",tags:this.avs(t),params:[0]})},hbs(t,s,i){this.Gvs(t),this.ZGt("add-effect",{type:"tremolo",tags:this.avs(t),params:[s,CR.Kn(i/100,0,1)]})},obs(t,s,i){this.Gvs(t),this.ZGt("add-effect",{type:"ringmod",tags:this.avs(t),params:[s,CR.Kn(i/100,0,1)]})},lbs(t,s,i,e,n,r){this.Gvs(t),this.ZGt("add-effect",{type:"distortion",tags:this.avs(t),params:[this.cvs(s),this.cvs(i),e,this.cvs(n),CR.Kn(r/100,0,1)]})},ubs(t,s,i,e,n,r){this.Gvs(t),this.ZGt("add-effect",{type:"compressor",tags:this.avs(t),params:[s,i,e,n/1e3,r/1e3]})},cbs(t,s,i){this.Gvs(t),this.ZGt("add-effect",{type:"analyser",tags:this.avs(t),params:[s,i]})},fbs(t){const s=this.avs(t);for(const t of s)this.YSs.set(t.toLowerCase(),0);this.ZGt("remove-effects",{tags:s}),this.svs={}},MJ(t,s,i,e,n,r){this.ZGt("set-effect-param",{tags:this.avs(t),index:Math.floor(s),param:i,value:e,ramp:n,time:r})},dbs(t){if(!t)return;const s=t.Hxt();s&&s.kB()&&(this.jSs=s)},pbs(t){this.kSs[2]=t},mbs(t,s,i,e,n,r){this.LSs[0]=t,this.LSs[1]=s,this.LSs[2]=-i,this.NSs[0]=e,this.NSs[1]=n,this.NSs[2]=-r},gbs(t){this._Ss=Math.max(t,0),this.GSs=Math.max(t-performance.now()/1e3,0)},ybs(t){const s=t[1],i=this.Bc.GL().WZ(t[0]);i&&this.ZGt("unload",{url:i.url,type:i.type,isMusic:s})},wbs(t,s){const i=1===t,e=this.Bc.GL().WZ(s)||this.QSs.get(s.toLowerCase());e&&this.ZGt("unload",{url:e.url,type:e.type,isMusic:i})},Sbs(){this.ZGt("unload-all")},vbs(t,s,i){this.QSs.set(i.toLowerCase(),{url:t,type:s})}}}{const xR=self._s;xR.i$.Audio.Sht={bbs(t){const s=this.wvs(t);return s?s.duration:0},Mht(t){const s=this.wvs(t);return s?s.playbackTime:0},_ht(t){const s=this.wvs(t);return s?s.playbackRate:0},Cht(t){const s=this.wvs(t);return s?this.pvs(s.volume):0},Mbs(){return this.pvs(this.CSs())},Cbs(t){return this.YSs.get(t.toLowerCase())||0},Tbs(t,s){const i=this._vs(t,Math.floor(s));return i?i.binCount:0},xbs(t,s,i){const e=this._vs(t,Math.floor(s));return e?(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]:0},Ibs(t,s){const i=this._vs(t,Math.floor(s));return i?i.peak:0},_bs(t,s){const i=this._vs(t,Math.floor(s));return i?i.rms:0},Gbs(){return this.zSs},Pbs:()=>self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3,Abs(){return this.qSs},Rbs(t,s){return 0==(t=xR.Kn(+t,0,100)/100)?-1/0:t<.1?this.pvs(xR._t(0,this.fvs(s),10*t)):xR._t(s,0,(t-.1)/.9)}}}{const IR=self._s;IR.i$.Ebs=class extends IR.K_t{constructor(t){super(t)}zn(){super.zn()}},IR.i$.Ebs.Obs=-2147483648,IR.i$.Ebs.Dbs=1073741824,IR.i$.Ebs.Fbs=536870912,IR.i$.Ebs.kbs=3758096384,IR.i$.Ebs.Lbs=536870911}{const _R=self._s,GR=_R.i$.Ebs.Obs,PR=_R.i$.Ebs.Dbs,AR=_R.i$.Ebs.Fbs,RR=_R.i$.Ebs.Lbs;_R.i$.Ebs.dEt=class extends _R.FGt{constructor(t){super(t),this.Nbs=[],this.Bbs=!1,this.$bs=0,this.Wbs=[],this.jbs=null}zn(){this.jbs.clear(),this.jbs=null,super.zn()}vGt(){this.WJ().a$(this.Bc)}g5(t){return this.WJ().KX(t,{eT:this.Bc.KL()})}M5(){this.WJ().aA()}S5(){for(const t of this.fU().ij())t.iJ().Vbs()}LGt(t,s,i){this.$bs=s;for(const s of t)if(s){const t=s[0],i=!!s[1];this.Nbs.push({KFt:t,use:i,Ubs:[[[null,null],[null,null]],[[null,null],[null,null]]]})}else this.Nbs.push(null);for(const t of i){const s=t[0],i=t[1],e=t[2];this.Wbs.push({name:s,type:i,Hbs:e})}}zbs(t,s){this.Bbs=!1,this.Jbs(t,s)}Jbs(t,s){if(!this.Bbs){this.Bbs=!0;for(let i=0,e=this.Nbs.length;i<e;++i)this.Nbs[i]&&(this.qbs(i,t,s,!1,!1,!1),this.qbs(i,t,s,!1,!1,!0),this.qbs(i,t,s,!1,!0,!1),this.qbs(i,t,s,!1,!0,!0),this.qbs(i,t,s,!0,!1,!1),this.qbs(i,t,s,!0,!1,!0),this.qbs(i,t,s,!0,!0,!1),this.qbs(i,t,s,!0,!0,!0))}}qbs(t,s,i,e,n,r){if(t<0||t>=this.Nbs.length)return;const h=this.Nbs[t];if(!h)return;const o=_R.Hn(_R.lu,h.KFt,h.use);o.transform(s,i,0),r&&o.hu(),e&&o.eu(s/2),n&&o.ru(i/2),h.Ubs[e?1:0][n?1:0][r?1:0]=null,h.Ubs[e?1:0][n?1:0][r?1:0]=o}Ybs(t){if(-1===t)return null;const s=t&RR;if(s<0||s>=this.Nbs.length)return null;const i=this.Nbs[s];if(!i)return null;const e=t&GR?1:0,n=t&PR?1:0,r=t&AR?1:0;return i.Ubs[e][n][r]}Xbs(t){return!t||t._u()}Kbs(){return this.$bs}Zbs(t){this.jbs||(this.jbs=new Map);const s=this.jbs.get(t);if("number"==typeof s&&s>=0)return this.Wbs[s];for(let s=0;s<this.Wbs.length;s++)if(this.Wbs[s].name===t)return this.jbs.set(t,s),this.Wbs[s]}}}{let ER=function(t){const s=[],i=t.split(",");for(let t=0,e=i.length;t<e;++t){const e=i[t],n=e.indexOf("x");if(n>-1){let t=parseInt(e.substring(0,n),10);const i=e.substring(n+1);let r=parseInt(i,10);for(i.includes("h")&&(r|=jR),i.includes("v")&&(r|=VR),i.includes("d")&&(r|=UR);t>0;--t)s.push(r)}else{let t=parseInt(e,10);e.includes("h")&&(t|=jR),e.includes("v")&&(t|=VR),e.includes("d")&&(t|=UR),s.push(t)}}return s};RunLengthDecode=ER;const OR=self._s,DR=self.Ns,FR=0,kR=1,LR=2,NR=3,BR=4,$R=5,WR=6,jR=OR.i$.Ebs.Obs,VR=OR.i$.Ebs.Dbs,UR=OR.i$.Ebs.Fbs,HR=OR.i$.Ebs.kbs,zR=OR.i$.Ebs.Lbs,JR=OR.Hn(OR.Rect),qR=OR.Hn(OR.Rect),YR=OR.Hn(OR.Rect);OR.i$.Ebs.Instance=class extends OR.pPt{constructor(t,s){super(t);const i=this.kB();this.Qbs=32,this.tMs=32,this.sMs=0,this.iMs=0,this.eMs=0,this.nMs=0,this.rMs=0,this.hMs=0,this.oMs=i.Vg(),this.aMs=i.Qg(),this.CQ=0,this.TQ=0,this.lMs=[],this.uMs=new Map,this.cMs=!0,this.fds=null,s&&(i.wV(s[FR]),this.Qbs=Math.max(s[kR],1),this.tMs=Math.max(s[LR],1),this.sMs=s[NR],this.iMs=s[BR],this.eMs=s[$R],this.nMs=s[WR]),this.CQ=Math.ceil(this.Bc.qL()/this.Qbs),this.TQ=Math.ceil(this.Bc.XL()/this.tMs),this.jGt.Jbs(this.Qbs,this.tMs),this.fMs=null}zn(){this.dds(),OR.bh(this.lMs),this.lMs=null,this.uMs.clear(),this.uMs=null,super.zn()}dds(){this.fds&&(this.fds.zn(),this.fds=null)}LGt(t,s,i){this.rMs=s,this.hMs=i,this.dMs(!0),this.pMs(t),this.mMs()}dMs(t){const[s,i]=this.gMs();if(s<=this.rMs&&i<=this.hMs&&!t)return;let e=0,n=0;t?(e=Math.ceil(this.hMs/this.TQ),n=Math.ceil(this.rMs/this.CQ)):(e=this.lMs.length,n=Math.ceil(this.rMs/this.CQ),i>this.hMs&&(this.hMs=i,e=Math.ceil(this.hMs/this.TQ)),s>this.rMs&&(this.rMs=s,n=Math.ceil(this.rMs/this.CQ)),this.yMs(),this.wMs(),this.Bc.VB());const r=this.lMs;if(r.length<e)for(let t=r.length;t<e;++t)r.push([]);for(let t=0;t<e;++t){const s=r[t];for(let i=s.length;i<n;++i)s.push(OR.Hn(OR.i$.Ebs.SMs,this,i,t))}}pMs(t){const s=ER(t);let i=0;const e=this.rMs,n=this.CQ,r=this.TQ;for(let t=0,h=this.hMs;t<h;++t)for(let h=0;h<e;++h){const e=s[i++],o=this.vMs(h,t);o&&o.bMs(h%n,t%r,e)}}MMs(){let t="";if(this.rMs<=0||this.hMs<=0)return t;let s=1,i=this.CMs(0,0);const[e,n]=this.gMs();let r=-1,h=!1,o=!1,a=!1;for(let l=0;l<n;++l)for(let n=0===l?1:0;n<e;++n){const e=this.CMs(n,l);e===i?++s:(-1===i?(r=-1,h=!1,o=!1,a=!1):(r=i&zR,h=0!==(i&jR),o=0!==(i&VR),a=0!==(i&UR)),t+=1===s?""+r:s+"x"+r,h&&(t+="h"),o&&(t+="v"),a&&(t+="d"),t+=",",s=1,i=e)}return-1===i?(r=-1,h=!1,o=!1,a=!1):(r=i&zR,h=0!==(i&jR),o=0!==(i&VR),a=0!==(i&UR)),t+=1===s?""+r:s+"x"+r,h&&(t+="h"),o&&(t+="v"),a&&(t+="d"),t}yMs(){const t=this.lMs;for(let s=0,i=t.length;s<i;++s){const i=t[s];for(let t=0,s=i.length;t<s;++t)i[t].TMs()}this.cMs=!0}mMs(){if(!this.cMs)return;this.cMs=!1;const t=this.lMs;for(let s=0,i=t.length;s<i;++s){const i=t[s];for(let t=0,s=i.length;t<s;++t)i[t].xMs()}}IMs(){this.cMs=!0,this.wMs(),this.Bc.VB()}wMs(){this.kB().dLt(!0)}vMs(t,s){if(t<0||s<0)return null;const i=Math.floor(s/this.TQ);if(i>=this.lMs.length)return null;const e=this.lMs[i],n=Math.floor(t/this.CQ);return n>=e.length?null:e[n]}_Ms(t,s){if(t<0||s<0||s>=this.lMs.length)return null;const i=this.lMs[s];return t>=i.length?null:i[t]}CMs(t,s){if(t=Math.floor(t),s=Math.floor(s),t<0||s<0||t>=this.rMs||s>=this.hMs)return-1;const i=this.vMs(t,s);return i?i.GMs()[s%this.TQ][t%this.CQ]:-1}bMs(t,s,i){if(t=Math.floor(t),s=Math.floor(s),t<0||s<0||t>=this.rMs||s>=this.hMs)return;if(-1!==i&&(i&zR)>this.Kbs())return;const e=this.vMs(t,s);e&&e.bMs(t%this.CQ,s%this.TQ,i)}Kbs(){return this.jGt.Kbs()}PMs(t){return Math.floor((t-this.kB().YM())/(this.CQ*this.Qbs))}AMs(t){return Math.floor((t-this.kB().ZM())/(this.TQ*this.tMs))}RMs(t){return Math.floor((t-this.kB().YM())/this.Qbs)}EMs(t){return Math.floor((t-this.kB().ZM())/this.tMs)}OMs(){return this.rMs}DMs(){return this.hMs}FMs(){return Math.floor(this.kB().Vg()/this.kMs())}LMs(){return Math.floor(this.kB().Qg()/this.NMs())}gMs(){const t=this.kB();return[Math.floor(t.Vg()/this.kMs()),Math.floor(t.Qg()/this.NMs())]}kMs(){return this.Qbs}NMs(){return this.tMs}BMs(){return this.CQ}$Ms(){return this.TQ}TNt(t,s){const i=this.PMs(t.Qa()),e=this.AMs(t.tl()),n=this.PMs(t.sl()),r=this.AMs(t.il());for(let t=i;t<=n;++t)for(let i=e;i<=r;++i){const e=this._Ms(t,i);e&&(e.xMs(),OR.On(s,e.WMs()))}}PPt(t,s){const i=this.RMs(t),e=this.EMs(s),n=this.CMs(i,e);if(-1===n)return!1;const r=this.jGt.Ybs(n);if(!r)return!0;if(!this.jGt.Xbs(r))return!1;const h=this.kB();return t-=Math.floor((t-h.YM())/this.Qbs)*this.Qbs+h.YM(),s-=Math.floor((s-h.ZM())/this.tMs)*this.tMs+h.ZM(),r.xl(t,s)}jMs(t){const s=this.lMs;for(let i=0,e=s.length;i<e;++i){const e=s[i];for(let s=0,i=e.length;s<i;++s){const i=e[s];i.xMs(),OR.On(t,i.WMs())}}}MPt(){return this.fds||this.mpt.WJ()}VMs(t){const s=this.uMs,i=s.get(t);if(i)return i;const e=t&zR,n=0!==(t&jR),r=0!==(t&VR),h=0!==(t&UR),o=this.MPt(),a=o.Vg(),l=this.Qbs,u=this.sMs,c=this.eMs,f=Math.floor((a-u)/(l+c)*l)+c,d=Math.floor(f/l),p=e%d,m=Math.floor(e/d),g=o.zAt()+this.sMs+(this.Qbs+this.eMs)*p,y=o.JAt()+this.iMs+(this.tMs+this.nMs)*m;JR.Ha(g,y,this.Qbs,this.tMs),JR.St(o.qAt(),o.YAt());const w=OR.Hn(OR.Pl);return w.Xl(JR),h&&w.hu(),n&&w.eu(),r&&w.ru(),w.offset(p,m),s.set(t,w),w}Vbs(){this.uMs.clear(),this.yMs()}HC(t){const s=this.MPt(),i=s.Tx();if(!i)return;JR.S(s.yR()),JR.offsetLeft(this.sMs/i.Vg()),JR.offsetTop(this.iMs/i.Qg()),t.pv(),t.YO(JR,i.Vg(),i.Qg(),this.Qbs,this.tMs,this.eMs,this.nMs),t.TO(i);const e=this.kB(),n=e.LB();e.Vg()===this.oMs&&e.Qg()===this.aMs||(this.wMs(),this.yMs(),this.oMs=e.Vg(),this.aMs=e.Qg());let r=e.YM(),h=e.ZM();this.Bc.QL()&&(r=Math.round(r),h=Math.round(h));const o=this.CQ*this.Qbs,a=this.TQ*this.tMs,l=e.kH(),u=qR;if(n.u2()){u.set(-1/0,-1/0,1/0,1/0);const s=YR,i=n.A3();for(const e of this.lMs)for(const n of e)n.UMs(s),i.Xw(s.Qa(),s.tl(),l,s.sl(),s.il(),l)&&(n.xMs(),n.HC(t,u,r,h))}else{n.Y1(l,u);const s=Math.floor((u.Qa()-r)/o),i=Math.floor((u.sl()-r)/o),e=Math.floor((u.tl()-h)/a),c=Math.floor((u.il()-h)/a);for(let n=s;n<=i;++n)for(let s=e;s<=c;++s){const i=this._Ms(n,s);i&&(i.xMs(),i.HC(t,u,r,h))}}}aC(){this.dMs();const[t,s]=this.gMs();return{tw:this.Qbs,th:this.tMs,tox:this.sMs,toy:this.iMs,tsx:this.eMs,tsy:this.nMs,w:t,h:s,d:this.MMs()}}lC(t){this.Qbs=t.tw,this.tMs=t.th,this.sMs=t.tox,this.iMs=t.toy,this.eMs=t.tsx,this.nMs=t.tsy,this.rMs=t.w,this.hMs=t.h,this.dMs(!0),this.pMs(t.d),this.wMs(),this.yMs()}vos(){this.dMs();const[t,s]=this.gMs();return JSON.stringify({c2tilemap:!0,width:t,height:s,data:this.MMs()})}HMs(t){switch(t){case 0:default:return 0;case 1:return jR;case 2:return VR;case 3:return jR|UR;case 4:return jR|VR;case 5:return VR|UR;case 6:return jR|VR|UR;case 7:return UR}}sot(t){switch(t){case kR:return this.Qbs;case LR:return this.tMs;case NR:return this.sMs;case BR:return this.iMs;case $R:return this.eMs;case WR:return this.nMs}}oot(t,s){switch(t){case kR:if(this.Qbs===s)return;this.Qbs=Math.max(s,1),this.CQ=Math.ceil(this.Bc.qL()/this.Qbs),this.jGt.zbs(),this.zMs();break;case LR:if(this.tMs===s)return;this.tMs=Math.max(s,1),this.TQ=Math.ceil(this.Bc.XL()/this.tMs),this.jGt.zbs(),this.zMs();break;case NR:if(this.sMs===s)return;this.sMs=s,this.zMs();break;case BR:if(this.iMs===s)return;this.iMs=s,this.zMs();break;case $R:if(this.eMs===s)return;this.eMs=s,this.zMs();break;case WR:if(this.nMs===s)return;this.nMs=s,this.zMs()}}zMs(){this.uMs.clear(),this.yMs(),this.mMs()}bGt(){return KR}};const XR=new WeakMap,KR=self.JMs=class extends self.Kz{constructor(){super(),XR.set(this,self.cU.mU().iJ())}get qMs(){return XR.get(this).OMs()}get YMs(){return XR.get(this).DMs()}XMs(){const t=XR.get(this);return[t.OMs(),t.DMs()]}get KMs(){return XR.get(this).FMs()}get ZMs(){return XR.get(this).LMs()}QMs(){const t=XR.get(this);return[t.FMs(),t.LMs()]}get tCs(){return XR.get(this).kMs()}get sCs(){return XR.get(this).NMs()}iCs(){const t=XR.get(this);return[t.kMs(),t.NMs()]}eCs(t,s){return DR.he(t),DR.he(s),XR.get(this).CMs(t,s)}nCs(t,s,i){DR.he(t),DR.he(s),DR.he(i);const e=XR.get(this);e.dMs(),e.bMs(t,s,i)}async hps(t){DR.Be(t,Blob);const s=XR.get(this),i=s.l$(),e=OR.Hn(OR.AAt);e.UAt(i,t),await e.KX(i.gM(),{eT:i.KL()}),s.Jn()?e.zn():(s.dds(),s.fds=e,s.uMs.clear(),s.yMs(),i.VB())}};KR.Obs=jR,KR.Dbs=VR,KR.Fbs=UR,KR.kbs=HR,KR.Lbs=zR}{const ZR=self._s,QR=ZR.i$.Ebs.kbs,tE=ZR.i$.Ebs.Lbs;ZR.i$.Ebs.t$={rCs(t,s,i,e){let n=this.CMs(t,s);return-1!==n&&(n&=tE),ZR.compare(n,i,e)},hCs(t,s,i){const e=this.CMs(t,s);let n=0;return-1!==e&&(n=e&QR),n===this.HMs(i)},nns:()=>!0,rns:()=>!0,oCs(t){return this.fMs||(this.fMs=new ZR.i$.Ebs.aCs(this,this.jGt)),this.fMs.oCs(t)}}}{const sE=self._s,iE=sE.i$.Ebs.Lbs;sE.i$.Ebs.wht={lCs(t,s){this.dMs(),this.bMs(t,s,-1)},uCs(t,s,i,e){this.dMs(),this.bMs(t,s,i&iE|this.HMs(e))},cCs(t,s,i){const e=this.CMs(t,s);-1!==e&&(this.dMs(),this.bMs(t,s,e&iE|this.HMs(i)))},fCs(t,s,i,e){const n=Math.floor(Math.max(t,0)),r=Math.floor(Math.max(s,0)),h=Math.floor(Math.min(t+i,this.rMs)),o=Math.floor(Math.min(s+e,this.hMs));for(let t=r;t<o;++t)for(let s=n;s<h;++s)this.bMs(s,t,-1)},dCs(t,s,i,e,n,r){this.dMs();const h=Math.floor(Math.max(t,0)),o=Math.floor(Math.max(s,0)),a=Math.floor(Math.min(t+i,this.rMs)),l=Math.floor(Math.min(s+e,this.hMs)),u=n&iE|this.HMs(r);for(let t=o;t<l;++t)for(let s=h;s<a;++s)this.bMs(s,t,u)},pCs(t,s,i,e,n){this.dMs();const r=Math.floor(Math.max(t,0)),h=Math.floor(Math.max(s,0)),o=Math.floor(Math.min(t+i,this.rMs)),a=Math.floor(Math.min(s+e,this.hMs)),l=this.HMs(n);for(let t=h;t<a;++t)for(let s=r;s<o;++s){const i=this.CMs(s,t);-1!==i&&this.bMs(s,t,i&iE|l)}},mCs(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse tilemap JSON: ",t)}s.c2tilemap?(this.rMs=s.width,this.hMs=s.height,this.dMs(!0),this.pMs(s.data),this.yMs(),this.wMs()):console.error("[Construct] Unrecognized JSON data format")},$os(t){const s=URL.createObjectURL(new Blob([this.vos()],{type:"application/json"}));this.Bc.GB(s,t)},async fns(t,s){if(this.fds&&this.fds.TZ()===t)return;const i=this.Bc,e=sE.Hn(sE.AAt);try{if(await e.VAt(i,t),!e.ZZ())throw new Error("image failed to load");if(this.Jn())return e.zn(),null;if(!await e.KX(i.gM(),{eT:i.KL()}))return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jn()||this.qU(sE.i$.Ebs.t$.rns))}this.Jn()?e.zn():(this.dds(),this.fds=e,i.VB(),this.uMs.clear(),this.yMs(),await this.ZB(sE.i$.Ebs.t$.nns))},mns(t){t>=2&&t++,this.kB().NM(t),this.Bc.VB()},gCs(t,s,i){if(this.dMs(),this.fMs||(this.fMs=new sE.i$.Ebs.aCs(this,this.jGt)),this.fMs.oCs(i))switch(this.fMs.yCs(i)){case 0:case 1:this.fMs.wCs(t,s,i);break;case 2:this.fMs.SCs(t,s,i)}},vCs(t,s,i,e,n,r,h){this.dMs(),this.fMs||(this.fMs=new sE.i$.Ebs.aCs(this,this.jGt)),this.fMs.oCs(i)&&2===this.fMs.yCs(i)&&this.fMs.SCs(t,s,i,e,n,r,h)},bCs(t,s,i){if(this.dMs(),this.fMs||(this.fMs=new sE.i$.Ebs.aCs(this,this.jGt)),this.fMs.oCs(i))switch(this.fMs.yCs(i)){case 0:case 1:this.fMs.MCs(t,s,i);break;case 2:this.fMs.CCs(t,s,i)}},TCs(t,s,i,e,n,r){this.dMs(),this.fMs||(this.fMs=new sE.i$.Ebs.aCs(this,this.jGt)),this.fMs.oCs(i)&&2===this.fMs.yCs(i)&&this.fMs.CCs(t,s,i,e,n,r)},xCs(t,s,i,e,n,r,h){sE.i$.Ebs.wht.vCs.call(this,t,s,i,e,n,r,h)},ICs(t,s,i,e,n,r){sE.i$.Ebs.wht.TCs.call(this,t,s,i,e,n,r)},_Cs(t,s,i){sE.i$.Ebs.wht.gCs.call(this,t,s,i)},GCs(t,s,i){sE.i$.Ebs.wht.bCs.call(this,t,s,i)}}}{const eE=self._s,nE=eE.i$.Ebs.Lbs;eE.i$.Ebs.Sht={PCs(t,s){const i=this.CMs(t,s);return-1===i?-1:i&nE},ACs(t){return this.RMs(t)},RCs(t){return this.EMs(t)},ECs(t){return t*this.Qbs+this.kB().YM()+this.Qbs/2},OCs(t){return t*this.tMs+this.kB().ZM()+this.tMs/2},DCs(t){const s=this.kB().YM();return Math.floor((t-s)/this.Qbs)*this.Qbs+s+this.Qbs/2},FCs(t){const s=this.kB().ZM();return Math.floor((t-s)/this.tMs)*this.tMs+s+this.tMs/2},kCs(){return this.vos()},LCs(){return this.kMs()},NCs(){return this.NMs()},BCs(){return this.FMs()},$Cs(){return this.LMs()},WCs(t){return this.fMs||(this.fMs=new eE.i$.Ebs.aCs(this,this.jGt)),this.fMs.oCs(t)&&2===this.fMs.yCs(t)?this.fMs.jCs(t):0},VCs(t){return this.fMs||(this.fMs=new eE.i$.Ebs.aCs(this,this.jGt)),this.fMs.oCs(t)&&2===this.fMs.yCs(t)?this.fMs.UCs(t):0}}}{const rE=self._s,hE=rE.i$.Ebs.Obs,oE=rE.i$.Ebs.Dbs,aE=rE.i$.Ebs.Fbs,lE=rE.i$.Ebs.Lbs,uE=rE.Hn(rE.Rect),cE=rE.Hn(rE.Pl);rE.i$.Ebs.HCs=class extends rE.Vn{constructor(){super(),this.Wc=-1,this.zCs=-1,this.JCs=!1,this.qCs=!1,this.YCs=!1,this.XCs=rE.Hn(rE.Rect),this.KCs=null}PQ(t,s,i,e,n,r,h,o){this.Wc=t,this.zCs=t&lE,this.JCs=0!==(t&hE),this.qCs=0!==(t&oE),this.YCs=0!==(t&aE),this.XCs.Ha(e*s+r,n*i+h,s,i),this.KCs=o.VMs(this.Wc)}HC(t,s,i,e,n){uE.S(this.XCs),uE.offset(i,e),uE.Cl(s)&&(cE.Xl(uE),t.kO(cE,this.KCs))}}}{const fE=self._s;fE.i$.Ebs.ZCs=class extends fE.Vn{constructor(){super(),this.Wc=-1,this.QCs=null,this.XCs=fE.Hn(fE.Rect)}PQ(t,s,i,e,n,r,h,o){this.Wc=t,this.QCs=s,this.XCs.Ha(n*i+h,r*e+o,i,e)}tTs(t){this.XCs.Ya(this.XCs.sl()+t)}sTs(){return this.Wc}iTs(){return!!this.QCs}INt(){return this.QCs}xNt(){return this.XCs}}}{const dE=self._s,pE=dE.i$.Ebs.Lbs;dE.i$.Ebs.SMs=class extends dE.Vn{constructor(t,s,i){super();const e=t.BMs(),n=t.$Ms();this.MOt=t,this.Aa=s,this.Ra=i,this.Wa=this.Aa*e*t.kMs(),this.ja=this.Ra*n*t.NMs(),this.eTs=[],this.nTs=[],this.rTs=[],this.hTs=!1;for(let t=0;t<n;++t){const t=new Int32Array(e);t.fill(-1),this.eTs.push(t)}}Au(){const t=this.MOt.BMs(),s=this.MOt.$Ms(),i=this.eTs;if(i.length<s)for(let e=i.length;e<s;++e)i.push(new Int32Array(t));else i.length>s&&dE.Sh(i,s);for(let s=0,e=i.length;s<e;++s){let e=i[s];e.length!==t&&(e=new Int32Array(t),i[s]=e),e.fill(-1)}}UMs(t){const s=this.MOt,i=s.kB(),e=s.BMs()*s.kMs(),n=s.$Ms()*s.NMs(),r=i.YM()+this.Wa,h=i.ZM()+this.ja;t.set(r,h,r+e,h+n)}TMs(){this.hTs=!1}xMs(){if(this.hTs)return;const t=this.MOt,s=t.KTt(),i=t.kB(),e=t.kMs(),n=t.NMs(),r=t.BMs(),h=t.$Ms(),o=this.Wa,a=this.ja;if(e<=0||n<=0)return;let l=Math.min(t.OMs(),Math.floor(i.Vg()/e)),u=Math.min(t.DMs(),Math.floor(i.Qg()/n));l-=o/e,u-=a/n,l>r&&(l=r),u>h&&(u=h);const c=this.eTs,f=this.nTs;let d=0;for(let s=0;s<u;++s){const i=c[s];for(let r=0;r<l;++r){const h=i[r];if(-1===h)continue;let l=null;d<f.length?l=f[d]:(l=dE.Hn(dE.i$.Ebs.HCs),f.push(l)),l.PQ(h,e,n,r,s,o,a,t),++d}}d<f.length&&dE.Sh(f,d);let p=null,m=!1;const g=this.rTs;dE.bh(g);for(let t=0;t<u;++t){const i=c[t];for(let r=0;r<l;++r){const h=i[r],l=s.Ybs(h),u=s.Xbs(l);-1!==h&&u?!p||l||m?(p&&g.push(p),p=dE.Hn(dE.i$.Ebs.ZCs),p.PQ(h,l,e,n,r,t,o,a),m=!!l):p.tTs(e):p&&(g.push(p),p=null,m=!1)}p&&(g.push(p),p=null,m=!1)}let y=g.length;for(let t=0;t<y;++t){const s=g[t];if(s.iTs())continue;const i=s.xNt();for(let s=t+1;s<y;++s){const t=g[s],e=t.xNt();e.tl()<i.il()||e.tl()>i.il()||e.sl()>i.sl()||e.Qa()>i.Qa()||t.iTs()||e.Qa()===i.Qa()&&e.sl()===i.sl()&&(g.splice(s,1),--y,i.Xa(i.il()+n),--s)}}this.hTs=!0}bMs(t,s,i){this.eTs[s][t]!==i&&(this.eTs[s][t]=i,this.hTs=!1,this.MOt.IMs())}GMs(){return this.eTs}WMs(){return this.rTs}HC(t,s,i,e){const n=this.MOt,r=this.nTs;for(let h=0,o=r.length;h<o;++h)r[h].HC(t,s,i,e,n)}}}{const mE=self._s,gE=-999,yE=-998,wE=-1,SE=0,vE=1,bE=Object.freeze([[0,0,0],[0,0,0],[0,0,0]]);mE.i$.Ebs.aCs=class{constructor(t,s){this.MOt=t,this.jGt=s,this.oTs=[null,null,null],this.aTs=[mE.i$.Ebs.lTs,mE.i$.Ebs.uTs,mE.i$.Ebs.cTs],this.fTs=new mE._c}get dTs(){return bE}get pTs(){return-999}get mTs(){return-998}get gTs(){return-1}get yTs(){return 0}get wTs(){return 1}STs(){return this.MOt}KTt(){return this.jGt}vTs(){return this.fTs}jCs(t){return this.oCs(t)?this.bTs(t):0}UCs(t){return this.oCs(t)?this.MTs(t):0}wCs(t,s,i){this.oCs(i)&&(this.CTs(i,0),this.TTs(t,s,this.xTs(t,s,i)))}MCs(t,s,i){this.oCs(i)&&(this.CTs(i,1),this.ITs(t,s),this.TTs(t,s,this.xTs(t,s,i)))}SCs(t,s,i,e,n,r,h){this.oCs(i)&&(this.CTs(i,0),this._Ts(t,s,i,this.xTs(t,s,i),e,n,r,h,0))}CCs(t,s,i,e,n,r){this.oCs(i)&&(this.CTs(i,1),this._Ts(t,s,i,this.xTs(t,s,i),e,n,r,0,1))}yCs(t){return this.GTs(t)}oCs(t){return!!this.KTt().Zbs(t)}PTs(t,s){return this.STs().CMs(t,s)}ATs(t,s,i){this.STs().bMs(t,s,i)}ITs(t,s){this.STs().bMs(t,s,-1)}TTs(t,s,i){i&&(this.ATs(t-1,s-1,i[0][0]),this.ATs(t,s-1,i[1][0]),this.ATs(t+1,s-1,i[2][0]),this.ATs(t-1,s,i[0][1]),this.ATs(t,s,i[1][1]),this.ATs(t+1,s,i[2][1]),this.ATs(t-1,s+1,i[0][2]),this.ATs(t,s+1,i[1][2]),this.ATs(t+1,s+1,i[2][2]))}_Ts(t,s,i,e,n=!1,r=!1,h=0,o=0,a=0){if(!e)return;const l=(e=this.RTs(e,i,n,r,h,o,a))[0].length,u=e.length;for(let i=0;i<u;i++)for(let n=0;n<l;n++)if(e[i][n]!==this.pTs)switch(o){case 0:e[i][n]===this.gTs?this.ITs(t+n,s+i):this.ATs(t+n,s+i,e[i][n]);break;case 1:-1!==e[i][n]&&this.ATs(t+n,s+i,e[i][n])}}GTs(t){return this.KTt().Zbs(t).type}ETs(t){const s=this.GTs(t);this.oTs[s]||(this.oTs[s]=new this.aTs[s](this))}CTs(t,s){this.ETs(t);const i=this.GTs(t);this.oTs[i]&&this.oTs[i].OTs(s)}DTs(t){this.ETs(t);const s=this.GTs(t);if(this.oTs[s])return this.oTs[s].FTs()}xTs(t,s,i){this.ETs(i);const e=this.KTt().Zbs(i);if(this.oTs[e.type])return this.oTs[e.type].kTs(t,s,e)}RTs(t,s,i=!1,e=!1,n=0,r=0,h=0){this.ETs(s);const o=this.KTt().Zbs(s);if(this.oTs[o.type])return this.oTs[o.type].LTs(t,i,e,n,r,h)}bTs(t){this.ETs(t);const s=this.KTt().Zbs(t);if(this.oTs[s.type])return this.oTs[s.type].jCs(s)}MTs(t){this.ETs(t);const s=this.KTt().Zbs(t);if(this.oTs[s.type])return this.oTs[s.type].UCs(s)}}}{const ME=self._s;ME.i$.Ebs.NTs=class{constructor(t){this.Vp=t}BTs(t,s,i){const e=this.Vp.PTs(t,s);return!!this.$Ts(e,!0,e,i)}$Ts(t,s,i,e){return t===this.Vp.gTs?0:s&&t===this.Vp.mTs?1:s&&e&&!this.WTs(i,e)?0:1}jTs(t,s,i,e){const n=e.Hbs[t];if(!n.length)return this.Vp.gTs;if(1===n.length)return n[0][0];const r=this.Vp.PTs(s,i);if(this.$Ts(r)&&n.some(t=>r===t[0]))return r;const h=this.Vp.vTs();h.Au();for(let[t,s]of n)t>this.Vp.STs().Kbs()||("number"!=typeof s&&(s=1),h.Dc(s,t));return h.Ec()}WTs(t,s){for(const i of s.Hbs)for(const[s]of i)if(s===t)return!0;return!1}}}{const CE=self._s;CE.i$.Ebs.lTs=class{constructor(t){this.Vp=t,this.VTs=new CE.i$.Ebs.NTs(t),this.UTs=t.yTs}OTs(t){this.UTs=t}FTs(){return this.UTs}jCs(t){return 0}UCs(t){return 0}LTs(t,s=!1,i=!1,e=0,n=0,r=0){return t}kTs(t,s,i){return this.HTs(t,s,i)}HTs(t,s,i){const e=this.UTs===this.Vp.yTs?this.zTs(t,s,void 0,i):this.Vp.gTs,n=this.JTs(t,s-1,"s",i),r=this.JTs(t-1,s,"e",i),h=this.JTs(t+1,s,"w",i),o=this.JTs(t,s+1,"n",i),a=this.Vp.dTs;return a[0][0]=this.Vp.pTs,a[1][0]=this.qTs(n,t,s-1,i),a[2][0]=this.Vp.pTs,a[0][1]=this.qTs(r,t-1,s,i),a[1][1]=this.qTs(e,t,s,i),a[2][1]=this.qTs(h,t+1,s,i),a[0][2]=this.Vp.pTs,a[1][2]=this.qTs(o,t,s+1,i),a[2][2]=this.Vp.pTs,a}JTs(t,s,i,e){return this.VTs.BTs(t,s,e)?this.zTs(t,s,i,e):this.Vp.pTs}zTs(t,s,i,e){this.UTs===this.Vp.wTs&&(i=void 0);const n=this.Vp.PTs(t,s-1),r=this.Vp.PTs(t-1,s),h=this.Vp.PTs(t+1,s),o=this.Vp.PTs(t,s+1),a="n"===i?this.Vp.mTs:n,l="w"===i?this.Vp.mTs:r,u="e"===i?this.Vp.mTs:h,c="s"===i?this.Vp.mTs:o;return 1*this.VTs.$Ts(a,!0,n,e)+2*this.VTs.$Ts(l,!0,r,e)+4*this.VTs.$Ts(u,!0,h,e)+8*this.VTs.$Ts(c,!0,o,e)}qTs(t,s,i,e){return t===this.Vp.pTs||t===this.Vp.gTs?t:this.VTs.jTs(t,s,i,e)}}}{const TE=self._s,xE=new Map([[2,1],[8,2],[10,3],[11,4],[16,5],[18,6],[22,7],[24,8],[26,9],[27,10],[30,11],[31,12],[64,13],[66,14],[72,15],[74,16],[75,17],[80,18],[82,19],[86,20],[88,21],[90,22],[91,23],[94,24],[95,25],[104,26],[106,27],[107,28],[120,29],[122,30],[123,31],[126,32],[127,33],[208,34],[210,35],[214,36],[216,37],[218,38],[219,39],[222,40],[223,41],[248,42],[250,43],[251,44],[254,45],[255,46],[0,47]]);TE.i$.Ebs.uTs=class{constructor(t){this.Vp=t,this.VTs=new TE.i$.Ebs.NTs(t),this.UTs=t.yTs}OTs(t){this.UTs=t}FTs(){return this.UTs}jCs(t){return 0}UCs(t){return 0}LTs(t,s=!1,i=!1,e=0,n=0,r=0){return t}kTs(t,s,i){return this.YTs(t,s,i)}YTs(t,s,i){const e=this.UTs===this.Vp.yTs?this.XTs(t,s,void 0,i):this.Vp.gTs,n=this.KTs(t-1,s-1,"se",i),r=this.KTs(t,s-1,"s",i),h=this.KTs(t+1,s-1,"sw",i),o=this.KTs(t-1,s,"e",i),a=this.KTs(t+1,s,"w",i),l=this.KTs(t-1,s+1,"ne",i),u=this.KTs(t,s+1,"n",i),c=this.KTs(t+1,s+1,"nw",i),f=this.Vp.dTs;return f[0][0]=this.ZTs(n,t-1,s-1,i),f[1][0]=this.ZTs(r,t,s-1,i),f[2][0]=this.ZTs(h,t+1,s-1,i),f[0][1]=this.ZTs(o,t-1,s,i),f[1][1]=this.ZTs(e,t,s,i),f[2][1]=this.ZTs(a,t+1,s,i),f[0][2]=this.ZTs(l,t-1,s+1,i),f[1][2]=this.ZTs(u,t,s+1,i),f[2][2]=this.ZTs(c,t+1,s+1,i),f}KTs(t,s,i,e){return this.VTs.BTs(t,s,e)?this.XTs(t,s,i,e):this.Vp.pTs}XTs(t,s,i,e){this.UTs===this.Vp.wTs&&(i=void 0);const n=this.Vp.PTs(t,s-1),r=this.Vp.PTs(t-1,s),h=this.Vp.PTs(t+1,s),o=this.Vp.PTs(t,s+1),a=this.Vp.PTs(t-1,s-1),l=this.Vp.PTs(t+1,s-1),u=this.Vp.PTs(t-1,s+1),c=this.Vp.PTs(t+1,s+1),f="n"===i?this.Vp.mTs:n,d="w"===i?this.Vp.mTs:r,p="e"===i?this.Vp.mTs:h,m="s"===i?this.Vp.mTs:o,g="nw"===i?this.Vp.mTs:a,y="ne"===i?this.Vp.mTs:l,w="sw"===i?this.Vp.mTs:u,S="se"===i?this.Vp.mTs:c,v=this.VTs.$Ts(f,!0,n,e),b=this.VTs.$Ts(d,!0,r,e),M=this.VTs.$Ts(p,!0,h,e),C=this.VTs.$Ts(m,!0,o,e);return 1*(v&&b?this.VTs.$Ts(g,!0,a,e):0)+2*v+4*(v&&M?this.VTs.$Ts(y,!0,l,e):0)+8*b+16*M+32*(C&&b?this.VTs.$Ts(w,!0,u,e):0)+64*C+128*(C&&M?this.VTs.$Ts(S,!0,c,e):0)}ZTs(t,s,i,e){return t===this.Vp.pTs||t===this.Vp.gTs?t:this.VTs.jTs(xE.get(t),s,i,e)}}}{const IE=self._s;IE.i$.Ebs.cTs=class{constructor(t){this.Vp=t,this.UTs=t.yTs,this.QTs=0,this.txs=0,this.sxs=0,this.ixs=0,this.exs=0,this.nxs=0}OTs(t){this.UTs=t}FTs(){return this.UTs}jCs(t){return t.Hbs[0].length}UCs(t){return t.Hbs.length}LTs(t,s=!1,i=!1,e=0,n=0,r=0){switch(t=this.rxs(0,0,e,t),this.ixs=this.QTs,this.exs=this.txs,this.nxs=this.sxs,this.sxs&&(t=this.hxs(t)),this.QTs&&(t=this.oxs(t,r===this.Vp.yTs)),this.txs&&(t=this.axs(t,r===this.Vp.yTs)),t=this.rxs(s?1:0,i?1:0,0,t),e){case 0:this.ixs=this.QTs,this.exs=this.txs;break;case 1:this.ixs=1^this.QTs,this.exs=this.txs;break;case 2:this.ixs=1^this.QTs,this.exs=1^this.txs;break;case 3:this.ixs=this.QTs,this.exs=1^this.txs}return this.QTs&&(t=this.oxs(t,r===this.Vp.yTs)),this.txs&&(t=this.axs(t,r===this.Vp.yTs)),t}kTs(t,s,i){const e=i.Hbs[0].length,n=i.Hbs.length,r=Array.from({length:n},()=>new Array(e).fill(this.Vp.gTs)),h=this.Vp.vTs();h.Au();for(let t=0;t<n;t++)for(let s=0;s<e;s++){const e=i.Hbs[t][s];switch(this.UTs){case this.Vp.yTs:if(1===e.length){const i=e[0][0];if(i>this.Vp.STs().Kbs())continue;r[t][s]=i}else{for(let[t,s]of e)t>this.Vp.STs().Kbs()||("number"!=typeof s&&(s=1),h.Dc(s,t));r[t][s]=h.Ec()}break;case this.Vp.wTs:i.Hbs[t][s][0][0]===this.Vp.gTs?r[t][s]=this.Vp.pTs:r[t][s]=this.Vp.gTs}}return r}rxs(t,s,i,e){switch(i){case 0:this.QTs=t,this.txs=s,this.sxs=0;break;case 1:this.QTs=1^s,this.txs=t,this.sxs=1;break;case 2:this.QTs=1^t,this.txs=1^s,this.sxs=0;break;case 3:this.QTs=s,this.txs=1^t,this.sxs=1}return e}lxs(t){if(t===this.Vp.pTs||t===this.Vp.gTs)return t;const s=globalThis.JMs;let i=t&s.Lbs;return this.nxs&&(i|=s.Fbs),this.ixs&&(i|=s.Obs),this.exs&&(i|=s.Dbs),i}oxs(t,s){for(let s=0;s<t.length;s++)t[s].reverse();if(s){let s=t[0].length,i=t.length;for(let e=0;e<i;e++)for(let i=0;i<s;i++){const s=this.lxs(t[e][i]);t[e][i]=s}}return t}axs(t,s){if(t.reverse(),s){let s=t[0].length,i=t.length;for(let e=0;e<i;e++)for(let i=0;i<s;i++){const s=this.lxs(t[e][i]);t[e][i]=s}}return t}hxs(t){let s=[],i=t.length,e=t[0].length;for(let n=0;n<e;n++){let e=[];for(let s=0;s<i;s++)e.push(t[s][n]);s.push(e)}return s}}}{const _E=self._s;_E.i$.uxs=class extends _E.K_t{constructor(t){super(t)}zn(){super.zn()}}}{const GE=self._s;GE.i$.uxs.dEt=class extends GE.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{const PE=self._s,AE=self.Ns,RE=self.cU;PE.i$.uxs.Instance=class extends PE.$Gt{constructor(t,s){super(t),this.cxs=[null,null],this.fxs=[null,null],this.Olt={},this.A0t=[],this.I2t="",this.dxs=0}zn(){super.zn()}pxs(){this.cxs[0]=null,this.cxs[1]=null}mxs(t,s){const i=this.cxs[0];if(null===t||null===i)return!1;if(i===t||PE.Gh(i,t))return!0;if(s&&i.length>0){for(let s=0,e=Math.min(t.length,i.length);s<e;++s)if(t[s]!==i[s])return!1;return!0}return!1}gxs(){return this.cxs[1]}yxs(t,s){this.cxs[0]=t,this.cxs[1]=s}wxs(){this.fxs[0]=null,this.fxs[1]=null}Sxs(t){return this.fxs[0]===t}vxs(){return this.fxs[1]}bxs(t,s){this.fxs[0]=t,this.fxs[1]=s}Mxs(t){this.Olt=t,this.pxs(),this.Cxs("")}Txs(){return this.Olt}Cxs(t){this.A0t=this.xxs(t),this.wxs()}Ixs(t){return PE.Oh(this.xxs(t))}xxs(t){const s=[];let i,e=!1;if(this.Sxs(t))return this.vxs();"."===t[0]?(i=PE.Oh(this.A0t),t=t.slice(1)):i=[];for(const n of t)e?(s.push(n),e=!1):"\\"===n?e=!0:"."===n?(i.push(s.join("")),PE.bh(s)):s.push(n);return 0!==s.length&&i.push(s.join("")),this.bxs(t,i),i}_xs(t,s){if(this.mxs(t,!1))return this.gxs();let i=this.Olt;for(const e of t)if(Array.isArray(i)){const t=parseInt(e,10);if(t<0||t>=i.length||!isFinite(t)){i=null;break}i=i[t]}else{if("object"!=typeof i||null===i){i=null;break}if(i.hasOwnProperty(e))i=i[e];else{if(!s){i=null;break}{const t={};i[e]=t,i=t}}}return this.yxs(t,i),i}Gxs(t){const s=this.Ixs(t);if(!s.length)return this.Olt;const i=s.pop(),e=this._xs(s,!1);if(Array.isArray(e)){const t=parseInt(i,10);return t>=0&&t<e.length?e[t]:null}return"object"==typeof e&&null!==e&&e.hasOwnProperty(i)?e[i]:null}Pxs(t){return null===t?"null":Array.isArray(t)?"array":typeof t}Axs(t){const s=this.Gxs(t);return this.Pxs(s)}Rxs(t){const s=typeof t;return"number"===s||"string"===s?t:"boolean"===s&&t?1:0}Exs(t){return this.Rxs(this.Gxs(t))}Oxs(t){const s=this.Ixs(t);if(!s.length)return!1;const i=s.pop(),e=this._xs(s,!1);if(Array.isArray(e)){const t=parseInt(i,10);return t>=0&&t<e.length}return"object"==typeof e&&null!==e&&e.hasOwnProperty(i)}Dxs(t,s){const i=this.Ixs(t);if(!i.length)return!1;this.mxs(i,!0)&&this.pxs();const e=i.pop(),n=this._xs(i,!0);if(Array.isArray(n)){const t=parseInt(e,10);return!(!isFinite(t)||t<0||t>=n.length||(n[t]=s,0))}return"object"==typeof n&&null!==n&&(n[e]=s,!0)}Fxs(t){const s=this.Ixs(t);if(!s.length)return!1;this.mxs(s,!0)&&this.pxs();const i=s.pop(),e=this._xs(s,!1);return!Array.isArray(e)&&"object"==typeof e&&null!==e&&(delete e[i],!0)}aC(){return{path:this.A0t,data:this.Olt}}lC(t){this.pxs(),this.wxs(),this.A0t=t.path,this.Olt=t.data}kxs(t){return"number"==typeof t?isFinite(t)?t:0:"object"==typeof t?JSON.stringify(t):t+""}lPt(){const t="plugins.json.debugger";let s;try{s=this.kxs(this.Olt)}catch(t){s='"invalid"'}return[{title:t+".title",properties:[{name:t+".data",value:s,N2t:t=>{try{const s=JSON.parse(t);this.Mxs(s)}catch(t){}}},{name:t+".path",value:this.A0t.map(t=>t.replace(/\./g,"\\.")).join(".")}]}]}bGt(){return self.Lxs}};const EE=new WeakMap;self.Lxs=class extends RE{constructor(){super(),EE.set(this,RE.mU().iJ())}Nxs(){const t=EE.get(this).Txs();return JSON.parse(JSON.stringify(t))}Bxs(t){try{const s=JSON.parse(JSON.stringify(t));EE.get(this).Mxs(s)}catch(t){throw console.error("[JSON plugin] setJsonData: object is not valid JSON: ",t),t}}$xs(t){AE.ue(t);try{const s=JSON.parse(t);EE.get(this).Mxs(s)}catch(t){throw console.error("[JSON plugin] setJsonString: string is not valid JSON: ",t),t}}Wxs(){return JSON.stringify(EE.get(this).Txs())}jxs(){return JSON.stringify(EE.get(this).Txs(),null,4)}}}{const OE=self._s,DE=["null","boolean","number","string","object","array"];OE.i$.uxs.t$={Vxs(t){return this.Oxs(t)},Uxs(t,s){return this.Axs(t)===DE[s]},X2t(t,s,i){return OE.compare(this.Exs(t),s,i)},Hxs(t){return!0===this.Gxs(t)},Ud(t){const s=this.Gxs(t);if("object"!=typeof s||null===s)return!1;const i=this.Bc,e=i.aN(),n=i.pN(),r=n.tX(),h=i.bN(),o=h.sX(),a=h.iX(n),l=this.A0t,u=this.I2t,c=this.dxs,f=this.xxs(t);i.rX(!1);for(const[t,i]of Object.entries(s))this.A0t=OE.Oh(f),this.A0t.push(t),this.I2t=t,this.dxs=i,e.oX(r),this.fU().nj().Vpt(this.Pq()),n.aX(o,a),e.lX(r);return i.rX(!0),this.A0t=l,this.wxs(),this.I2t=u,this.dxs=c,h.dX(),!1},zxs:()=>!0,Jxs:()=>!0}}{const FE=self._s;FE.i$.uxs.wht={qxs(t){try{this.Mxs(JSON.parse(t)),this.qU(FE.i$.uxs.t$.Jxs)}catch(t){console.warn("[JSON plugin] Failed to parse JSON data: ",t),this.Mxs({}),this.qU(FE.i$.uxs.t$.zxs)}},Yxs(t){this.Cxs(t)},urt(t,s){this.Dxs(t,s)},Xxs(t,s){let i=this.Gxs(t);Array.isArray(i)?FE.Th(i,s,0):(i=[],FE.Ch(i,s,0),this.Dxs(t,i))},Kxs(t){this.Dxs(t,{})},Zxs(t,s){let i=null;try{i=JSON.parse(s),this.qU(FE.i$.uxs.t$.Jxs)}catch(t){console.warn("[JSON plugin] Failed to parse JSON data: ",t),this.qU(FE.i$.uxs.t$.zxs)}this.Dxs(t,i)},Qxs(t){this.Dxs(t,null)},tIs(t,s){this.Dxs(t,0!==s)},sIs(t){const s=this.Gxs(t);"boolean"==typeof s&&this.Dxs(t,!s)},iIs(t,s){const i=this.Gxs(t);"number"==typeof i&&this.Dxs(t,i+s)},eIs(t,s){const i=this.Gxs(t);"number"==typeof i&&this.Dxs(t,i-s)},nIs(t){this.Fxs(t)},rIs(t,s,i){const e=this.Gxs(s);Array.isArray(e)&&(0===t?e.push(i):e.unshift(i),this.pxs())},hIs(t,s){const i=this.Gxs(s);Array.isArray(i)&&(0===t?i.pop():i.shift(),this.pxs())},oIs(t,s,i){const e=this.Gxs(s);Array.isArray(e)&&(e.splice(i,0,t),this.pxs())},aIs(t,s,i){const e=this.Gxs(s);Array.isArray(e)&&t>0&&(e.splice(i,t),this.pxs())}}}self._s.i$.uxs.Sht={lIs(){try{return JSON.stringify(this.Olt)}catch(t){return""}},uIs(){try{return JSON.stringify(this.Olt,null,4)}catch(t){return""}},zs(t){return this.Exs(t)},cIs(t){const s=this.Gxs(t);return JSON.stringify(s)},fIs(t){const s=this.Gxs(t);return JSON.stringify(s,null,4)},Wd(t){const s=this.Gxs(t);if(Array.isArray(s)){const t=s[0];return this.Rxs(t)}return-1},zos(t){const s=this.Gxs(t);if(Array.isArray(s)){const t=s.at(-1);return this.Rxs(t)}return-1},dEt(t){return this.Axs(t)},dIs(t){const s=this.Gxs(t);return Array.isArray(s)?s.length:-1},pIs(){return this.A0t.map(t=>t.replace(/\./g,"\\.")).join(".")},mIs(){return this.I2t},gIs(){return this.Rxs(this.dxs)},yIs(){return this.Pxs(this.dxs)}};{const kE=self._s,LE="list";kE.i$.wIs=class extends kE.IGt{constructor(t){super(t,LE),this.AGt("click",(t,s)=>t.bfs(s)),this.AGt("dblclick",(t,s)=>t.Hcs(s)),this.AGt("change",(t,s)=>t.Mfs(s))}zn(){super.zn()}}}{const NE=self._s;NE.i$.wIs.dEt=class extends NE.FGt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{const BE=self._s,$E=self.Ns,WE=0,jE=1,VE=2,UE=3,HE=4,zE=5,JE=6,qE=7,YE=8,XE=1,KE="list";BE.i$.wIs.Instance=class extends BE.APt{constructor(t,s){if(super(t,KE),this.Gc=[],this.SIs="",this.Tfs="",this.Obt=!0,this.vIs=!0,this.bIs=!1,this.DPt=!0,this.Wc="",this.Gfs="",this.MIs=-1,this.CIs=[],s){const t=s[WE];this.Gc=t?t.split("\n"):[],this.SIs=s[WE],this.Tfs=s[jE],this.kB().wV(!!s[VE]),this.Obt=!!s[UE],this.vIs=s[HE]===XE,this.bIs=!!s[zE]&&!this.vIs,this.DPt=!!s[JE],this.Wc=s[qE],this.Gfs=s[YE],this.vIs&&(this.MIs=0)}this.HPt({id:this.Wc,className:this.Gfs,isDropdown:this.vIs,isMultiSelect:this.bIs,items:this.Gc})}zn(){BE.bh(this.Gc),this.Gc=null,BE.bh(this.CIs),this.CIs=null,super.zn()}zPt(){return{title:this.Tfs,isEnabled:this.Obt,isMultiSelect:this.bIs}}TIs(){this.jPt("set-selected-index",{selectedIndex:this.MIs})}xIs(t){this.MIs=t.selectedIndex,this.CIs=t.selectedIndices}async bfs(t){this.xIs(t),this.NGt("click"),await this.ZB(BE.i$.wIs.t$.Pfs)}async Hcs(t){this.xIs(t),this.NGt("dblclick"),await this.ZB(BE.i$.wIs.t$.Afs)}async Mfs(t){this.xIs(t),this.NGt("selectionchange"),await this.ZB(BE.i$.wIs.t$.IIs)}_Is(){return this.Gc.length}GIs(t){(t=Math.floor(t))<0&&(t=-1),t>=this.Gc.length||this.MIs!==t&&(this.MIs=t,this.CIs=[t],this.TIs())}PIs(){return this.MIs}AIs(){return this.CIs.length}RIs(t){return(t=Math.floor(t))<0||t>=this.CIs.length?0:this.CIs[t]}EIs(t){return(t=Math.floor(t))<0||t>=this.CIs.length||(t=this.CIs[t])<0||t>=this.Gc.length?"":this.Gc[t]}Ffs(t){this.Tfs!==t&&(this.Tfs=t,this.YPt())}kfs(){return this.Tfs}OIs(t){this.Gc.push(t),this.jPt("add-item",{text:t,index:-1})}DIs(t,s){if((t=Math.max(Math.floor(t),0))>=this.Gc.length)this.Gc.push(s),t=-1;else{this.Gc.splice(t,0,s),this.MIs>=t&&this.MIs++;for(let s=0,i=this.CIs.length;s<i;++s)this.CIs[s]>=t&&this.CIs[s]++}this.jPt("add-item",{index:t,text:s})}FIs(t){if((t=Math.floor(t))<0||t>=this.Gc.length)return;this.Gc.splice(t,1),this.MIs>=t&&this.MIs--;let s=this.CIs.indexOf(t);-1!==s&&this.CIs.splice(s,1),s=0;for(let i=this.CIs.length;s<i;++s)this.CIs[s]>=t&&this.CIs[s]--;this.jPt("remove-item",{index:t})}kIs(t,s){(t=Math.floor(t))<0||t>=this.Gc.length||(this.Gc[t]=s,this.jPt("set-item",{index:t,text:s}))}LIs(t){return(t=Math.floor(t))<0||t>=this.Gc.length?"":this.Gc[t]}NIs(){BE.bh(this.Gc),this.MIs=-1,BE.bh(this.CIs),this.jPt("clear")}BIs(t){t=!!t,this.bIs!==t&&(this.bIs=t,this.YPt())}$Is(){return this.bIs}AIt(t){t=!!t,this.Obt!==t&&(this.Obt=t,this.YPt())}EIt(){return this.Obt}HC(t){}aC(){return{title:this.Tfs,isEnabled:this.Obt,id:this.Wc,items:BE.Oh(this.Gc),selectedIndex:this.MIs,selectedIndices:this.CIs}}lC(t){this.Tfs=t.title,this.Obt=t.isEnabled,this.Wc=t.id,this.Gc=BE.Oh(t.items),this.SIs=this.Gc.join("/n"),this.MIs=t.selectedIndex,this.CIs=t.selectedIndices,this.YPt(),this.jPt("load-state",{items:this.Gc,selectedIndex:this.MIs,selectedIndices:this.CIs})}sot(t){switch(t){case WE:return this.SIs;case jE:return this.kfs();case UE:return this.EIt();case zE:return this.$Is();case JE:return this.DPt}}oot(t,s){switch(t){case WE:if(this.SIs===s)return;this.Gc=s.split("\n"),this.SIs=s,this.MIs=BE.Kn(this.MIs,0,this.Gc.length-1),this.YPt(),this.jPt("load-state",{items:this.Gc,selectedIndex:this.MIs,selectedIndices:this.CIs});break;case jE:this.Ffs(s);break;case UE:this.AIt(s);break;case zE:this.BIs(s);break;case JE:if(this.DPt===!!s)return;this.DPt=!!s,this.YPt()}}lPt(){const t="plugins.list";return[{title:t+".name",properties:[{name:t+".debugger.item-count",value:this._Is()},{name:t+".properties.enabled.name",value:this.EIt(),N2t:t=>this.AIt(t)},{name:t+".debugger.selected-index",value:this.PIs()}]},{title:t+".properties.items.name",properties:this.Gc.map((t,s)=>({name:"$"+s,value:t,N2t:t=>this.kIs(s,t)}))}]}bGt(){return self.WIs}};const ZE=new WeakMap;self.WIs=class extends self.Qz{constructor(){super(),ZE.set(this,self.cU.mU().iJ())}set selectedIndex(t){$E.he(t),ZE.get(this).GIs(t)}get selectedIndex(){return ZE.get(this).PIs()}get jIs(){return ZE.get(this).AIs()}VIs(t){return $E.he(t),ZE.get(this).RIs(t)}UIs(t){return $E.he(t),ZE.get(this).EIs(t)}set Ufs(t){$E.ue(t),ZE.get(this).Ffs(t)}get Ufs(){return ZE.get(this).kfs()}HIs(t){$E.ue(t),ZE.get(this).OIs(t)}zIs(t,s){$E.he(t),$E.ue(s),ZE.get(this).DIs(t,s)}JIs(t,s){$E.he(t),$E.ue(s),ZE.get(this).kIs(t,s)}qIs(t){return $E.he(t),ZE.get(this).LIs(t)}removeItem(t){$E.he(t),ZE.get(this).FIs(t)}clear(){ZE.get(this).NIs()}get YIs(){return ZE.get(this)._Is()}}}{const QE=self._s;QE.i$.wIs.t$={XIs(t,s){return QE.compare(this.MIs,t,s)},IIs:()=>!0,Pfs:()=>!0,Afs:()=>!0,KIs(t,s){const i=this.MIs;if(i<0||i>=this.Gc.length)return!1;const e=this.Gc[i];return s?e===t:QE.Ze(e,t)},ZIs(t,s,i){if((t=Math.floor(t))<0||t>=this.Gc.length)return!1;const e=this.Gc[t];return i?e===s:QE.Ze(e,s)}}}self._s.i$.wIs.wht={QIs(t){this.GIs(t)},qfs(t){this.Ffs(t)},wV(t){const s=this.kB();t=0!==t,s.vV()!==t&&s.wV(t)},Dc(t){this.OIs(t)},t_s(t,s){this.DIs(t,s)},Zf(t){this.FIs(t)},s_s(t,s){this.kIs(t,s)},Au(){this.NIs()}},self._s.i$.wIs.Sht={i_s(){return this._Is()},e_s(t){return this.LIs(t)},n_s(){return this.PIs()},r_s(){return this.LIs(this.PIs())},h_s(){return this.AIs()},o_s(t){return this.RIs(t)},a_s(t){return this.EIs(t)}};{const tO=self._s;tO.yut.l_s=class extends tO.KPt{constructor(t){super(t)}zn(){super.zn()}}}{const sO=self._s;sO.yut.l_s.dEt=class extends sO.iAt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{const iO=self._s,eO=self.Ns,nO=self.oJ;iO.yut.l_s.u_s=class{constructor(t,s,i,e){this.wpt=iO.Hn(iO.td),this.wpt.Set(t||0),this.c_s=iO.Hn(iO.td),this.c_s.Set(s||0),this.yRt=i||0,this.f_s=!!e,this.d_s=!1}p_s(){return this.wpt.zs()}lq(){return this.c_s.zs()}jJ(){return this.yRt}qvs(t){this.d_s=!!t}bq(){return this.d_s}$u(t){this.wpt.$u(t),this.c_s.$u(t)}m_s(){return this.wpt.zs()>=this.yRt}PQ(){if(this.m_s()){if(!this.f_s)return!0;this.wpt.rd(this.yRt)}return!1}aC(){return{c:this.wpt.zs(),t:this.c_s.zs(),d:this.yRt,r:this.f_s,p:this.d_s}}lC(t){this.wpt.Set(t.c),this.c_s.Set(t.t),this.yRt=t.d,this.f_s=!!t.r,this.d_s=!!t.p}},iO.yut.l_s.Instance=class extends iO.nAt{constructor(t,s){super(t),this.g_s=new Map}zn(){this.g_s.clear(),super.zn()}y_s(t,s,i){const e=new iO.yut.l_s.u_s(0,0,t,i);this.g_s.set(s.toLowerCase(),e),this.w_s()}S_s(t){this.g_s.delete(t.toLowerCase()),this.w_s()}v_s(){this.g_s.clear(),this.w_s()}b_s(t){return this.g_s.has(t.toLowerCase())}M_s(t){const s=this.g_s.get(t.toLowerCase());return s?s.p_s():0}C_s(t){const s=this.g_s.get(t.toLowerCase());return s?s.p_s()/s.jJ():0}T_s(t){const s=this.g_s.get(t.toLowerCase());return s?s.lq():0}x_s(t){const s=this.g_s.get(t.toLowerCase());return s?s.jJ():0}I_s(t){const s=this.g_s.get(t.toLowerCase());return!!s&&s.m_s()}__s(t,s){const i=this.g_s.get(t.toLowerCase());i&&i.qvs(s)}G_s(t){const s=this.g_s.get(t.toLowerCase());return!!s&&s.bq()}P_s(t){for(const s of this.g_s.values())s.qvs(t)}w_s(){this.g_s.size>0?(this.rPt(),this.oPt()):(this.VGt(),this.UGt())}aC(){const t={};for(const[s,i]of this.g_s.entries())t[s]=i.aC();return t}lC(t){this.g_s.clear();for(const[s,i]of Object.entries(t)){const t=new iO.yut.l_s.u_s;t.lC(i),this.g_s.set(s,t)}this.w_s()}c7(){const t=this.Bc.RN(this.di);for(const[s,i]of this.g_s)i.bq()||(i.$u(t),i.m_s()&&this.NGt("timer",!1,{tag:s}))}nPt(){for(const[t,s]of this.g_s.entries())s.PQ()&&this.g_s.delete(t)}lPt(){return[{title:"behaviors.timer.debugger.timers",properties:[...this.g_s.entries()].map(t=>({name:"$"+t[0],value:`${Math.round(10*t[1].p_s())/10} / ${Math.round(10*t[1].jJ())/10}`}))}]}bGt(){return self.A_s}};const rO=["once","regular"];self.A_s=class extends nO{#t;constructor(){super(),this.#t=nO.mU().iJ()}R_s(t,s,i="once"){eO.he(t),eO.ue(s);const e=rO.indexOf(i);if(-1===e)throw new Error("invalid type");this.#t.y_s(t,s,1===e)}E_s(t,s){eO.ue(t),this.#t.__s(t,!!s)}O_s(t){this.#t.P_s(!!t)}D_s(t){eO.ue(t),this.#t.S_s(t)}F_s(){this.#t.v_s()}k_s(t){return eO.ue(t),this.#t.b_s(t)}L_s(t){return eO.ue(t),this.#t.G_s(t)}getCurrentTime(t){return eO.ue(t),this.#t.M_s(t)}N_s(t){return eO.ue(t),this.#t.C_s(t)}B_s(t){return eO.ue(t),this.#t.T_s(t)}$_s(t){return eO.ue(t),this.#t.x_s(t)}W_s(t){return eO.ue(t),this.#t.I_s(t)}}}self._s.yut.l_s.t$={j_s(t){return this.I_s(t)},V_s(t){return this.b_s(t)},U_s(t){return this.G_s(t)}},self._s.yut.l_s.wht={H_s(t,s,i){this.y_s(t,i,1===s)},z_s(t){this.S_s(t)},J_s(){this.v_s()},q_s(t,s){this.__s(t,0===s)},Y_s(t){this.P_s(0===t)}},self._s.yut.l_s.Sht={Pbs(t){return this.M_s(t)},X_s(t){return this.C_s(t)},K_s(t){return this.T_s(t)},bbs(t){return this.x_s(t)}};{const hO=self._s;hO.yut.Zs=class extends hO.KPt{constructor(t){super(t)}zn(){super.zn()}}}{const oO=self._s;oO.yut.Zs.dEt=class extends oO.iAt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{let aO=function(t,s,i,e,n){const r=s*n,h=i*n;return lO.Kn(t*n+.5*e*n*n,r,h)};accelerate=aO;const lO=self._s,uO=self.Ns,cO=self.oJ,fO=0,dO=1,pO=2,mO=3,gO=4,yO=5,wO=6,SO=7,vO=8,bO=9,MO=.05;lO.yut.Zs.Instance=class extends lO.nAt{constructor(t,s){super(t),this.Z_s=null,this.Q_s=!1,this.tGs=!1,this.sGs=!1,this.iGs=!1,this.eGs=!1,this.nGs=!1,this.rGs=!1,this.hGs=!1,this.oGs=!1,this.aGs=!1,this.lGs=null,this.uGs=-1,this.cGs=0,this.fGs=0,this.dGs=!1,this.pGs=!1,this.mGs=this.Bc.RL().DNt(this.di),this.gGs=-1,this.yGs="stopped",this.wGs=-1,this.Kms=!0,this.SGs=0,this.vGs=0,this.bGs=0,this.MGs=0,this.CGs=0,this.TGs=0,this.Io=1500,this.xGs=1500,this.IGs=lO.Qn(90),this._Gs=330,this.GGs=1500,this.PGs=1500,this.AGs=650,this.RGs=1e3,this.EGs=!1,this.OGs=0,this.DGs=0,this.FGs=!0,this.kGs=0,this.Obt=!0,s&&(this._Gs=s[fO],this.GGs=s[dO],this.PGs=s[pO],this.AGs=s[mO],this.Io=s[gO],this.RGs=s[yO],this.EGs=!!s[wO],this.OGs=s[SO]/1e3,this.FGs=!!s[vO],this.Obt=!!s[bO]);const i=this.Bc.Sf();this.Kf=new lO.qf(lO.jf.Jf(i,"instancedestroy",t=>this.l8t(t.dJ)),lO.jf.Jf(i,"afterload",t=>this.p6())),this.FGs&&this.LGs(),this.Obt&&this.lAt(),this.NGs()}zn(){this.Z_s&&(this.Z_s.zn(),this.Z_s=null),this.lGs=null,this.mGs=null,super.zn()}LGs(){if(this.Z_s)return;const t=this.Bc.Sf();this.Z_s=new lO.qf(lO.jf.Jf(t,"keydown",t=>this.als(t.data)),lO.jf.Jf(t,"keyup",t=>this.lls(t.data)),lO.jf.Jf(t,"window-blur",()=>this.uls()),lO.jf.Jf(t,"keyboard-blur",()=>this.uls()))}BGs(){this.Z_s&&(this.Z_s.zn(),this.Z_s=null)}l8t(t){this.lGs===t&&(this.lGs=null),this.mGs===t&&(this.mGs=null)}als(t){switch(t.key){case"ArrowLeft":this.Q_s=!0;break;case"ArrowRight":this.tGs=!0;break;case"ArrowUp":this.sGs=!0}}lls(t){switch(t.key){case"ArrowLeft":this.Q_s=!1;break;case"ArrowRight":this.tGs=!1;break;case"ArrowUp":this.sGs=!1,this.iGs=!1}}uls(){this.Q_s=!1,this.tGs=!1,this.sGs=!1,this.iGs=!1}aC(){return{ii:this.rGs,lfx:this.cGs,lfy:this.fGs,lfo:this.lGs?this.lGs.xU():-1,am:this.yGs,en:this.Obt,fallt:this.wGs,ft:this.Kms,dx:this.SGs,dy:this.vGs,ms:this._Gs,acc:this.GGs,dec:this.PGs,js:this.AGs,g:this.Io,g1:this.xGs,mf:this.RGs,wof:this.pGs,woj:this.mGs?this.mGs.xU():-1,ga:this.IGs,edj:this.EGs,cdj:this.nGs,dj:this.eGs,sus:this.OGs,dc:this.FGs,cc:this.kGs}}lC(t){this.rGs=t.ii,this.cGs=t.lfx,this.fGs=t.lfy,this.uGs=t.lfo,this.yGs=t.am;const s=t.en;this.wGs=t.fallt||-1,this.Kms=t.ft,this.SGs=t.dx,this.vGs=t.dy,this._Gs=t.ms,this.GGs=t.acc,this.PGs=t.dec,this.AGs=t.js,this.Io=t.g,this.xGs=t.g1,this.RGs=t.mf,this.pGs=t.wof,this.gGs=t.woj,this.IGs=t.ga,this.EGs=t.edj,this.nGs=t.cdj,this.eGs=t.dj,this.OGs=t.sus,this.FGs=t.dc,this.kGs=t.cc||0,this.Q_s=!1,this.tGs=!1,this.sGs=!1,this.iGs=!1,this.hGs=!1,this.oGs=!1,this.aGs=!1,this.DGs=0,this.FGs?this.LGs():this.BGs(),this.AIt(s),this.NGs()}p6(){-1===this.uGs?this.lGs=null:this.lGs=this.Bc.AB(this.uGs),-1===this.gGs?this.mGs=null:this.mGs=this.Bc.AB(this.gGs)}$Gs(t){if(this.lGs=t,t){const s=t.kB();this.cGs=s.YM(),this.fGs=s.ZM()}}WGs(){return this.Bc.FN()>this.wGs+MO}NGs(){this.bGs=Math.cos(this.IGs),this.MGs=Math.sin(this.IGs),this.CGs=Math.cos(this.IGs-Math.PI/2),this.TGs=Math.sin(this.IGs-Math.PI/2),this.bGs=lO.Tr(this.bGs,6),this.MGs=lO.Tr(this.MGs,6),this.CGs=lO.Tr(this.CGs,6),this.TGs=lO.Tr(this.TGs,6),this.xGs=this.Io,this.Io<0&&(this.bGs*=-1,this.MGs*=-1,this.Io=Math.abs(this.Io))}jGs(){return this.Io<0?-1:1}_6t(){const t=this.di.kB(),s=this.Bc.RL(),i=this.di,e=this.lGs,n=t.YM(),r=t.ZM();if(t.IH(this.bGs,this.MGs),t.CH(),!e||!s.A$(i,e)||e.fU().uOt()&&!s.qkt(e,i)||e.fU().cOt()&&!e.XOt()){let e=s.O$(i),h=null;if(!e&&this.WGs()&&(h=s.DNt(i,!0)),t.TH(n,r),t.CH(),e)return s.A$(i,e)?null:(this.dGs=!1,e);if(h&&h.length){let t=0;for(let e=0,n=h.length;e<n;++e)h[t]=h[e],s.A$(i,h[e])||++t;if(t>=1)return this.dGs=!0,h[0]}return null}return t.TH(n,r),t.CH(),e}aAt(){if(!this.Obt)return;const t=this.Bc.RN(this.di);this.sGs||this.aGs||(this.iGs=!1);let s=this.Q_s||this.hGs,i=this.tGs||this.oGs,e=this.sGs||this.aGs,n=e&&!this.iGs;this.hGs=!1,this.oGs=!1,this.aGs=!1,this.rGs&&(s=!1,i=!1,e=!1,n=!1),e||(this.DGs=0),this.VGs();const[r,h,o]=this.UGs();let a=this._6t();const l=a&&!this.pGs;let u=!1;if([u,a]=this.HGs(a),u)return;this.zGs(a,o,r,e),n=this.JGs(a,n,e),a||this.qGs(n,e,t),this.pGs=!!a;const c=this.YGs(s,i);let f=!1,d=0;if(0!==this.SGs&&([f,a]=this.XGs(t,c,a,n)),0!==this.vGs){const[s,i]=this.KGs(t,a);f=f||s,d=i}!f&&l&&this.vGs<0&&d>0&&(this.vGs=0,f=!0),this.ZGs(s,i,c,t),a&&!n||f||(this.vGs=Math.min(this.vGs+this.Io*t,this.RGs)),this.QGs(a,f,n),this.mGs=this.Bc.RL().DNt(this.di)}VGs(){if(!this.Kms)return;const t=this.di,s=this.Bc.RL();(s.O$(t)||s.DNt(t))&&s.kNt(t,-this.bGs,-this.MGs,4,!0),this.Kms=!1}UGs(){const t=this.lGs,s=t?t.kB():null;let i=0,e=0,n=!1;if(t&&0===this.vGs&&(s.ZM()!==this.fGs||s.YM()!==this.cGs)){const t=this.di,r=t.kB(),h=this.Bc.RL(),o=s.YM(),a=s.ZM();i=o-this.cGs,e=a-this.fGs,r.IH(i,e),r.CH(),this.cGs=o,this.fGs=a,n=!0;const l=h.O$(t);l&&(h.wNt(t,l),h.kNt(t,-i,-e,2.5*lO.sr(i,e)))}return[i,e,n]}HGs(t){let s=!1;const i=this.di,e=i.kB(),n=this.Bc.RL(),r=n.O$(i);if(!r)return[!1,t];const h=Math.abs(e.Vg()),o=Math.abs(e.Qg());return n.kNt(i,-this.bGs,-this.MGs,o/8)?(n.wNt(i,r),t=r,this.$Gs(r),this.dGs=!1,this.vGs=0):n.NNt(i,this.CGs,this.TGs,h/2)||n.NNt(i,this.bGs,this.MGs,o/2)||n.BNt(i,Math.max(h,o)/2)?n.wNt(i,r):s=!0,[s,t]}zGs(t,s,i,e){const n=this.di,r=this.Bc.RL();if(t){const e=this.bGs,h=this.MGs,o=this.CGs,a=this.TGs;if(this.eGs=!1,this.nGs=!1,this.vGs>0&&(this.pGs||(r.LNt(n,-e,-h,t,16),this.pGs=!0),this.vGs=0),this.lGs!==t)this.$Gs(t),r.wNt(n,t);else if(s){const t=r.O$(n);t&&(r.wNt(n,t),0!==i&&(i>0?r.kNt(n,-o,-a):r.kNt(n,o,a)),r.kNt(n,-e,-h))}}else e||(this.nGs=!0)}JGs(t,s,i){if(t&&s||!t&&this.EGs&&i&&this.nGs&&!this.eGs){const i=this.di,e=i.kB(),n=this.Bc.RL(),r=e.YM(),h=e.ZM();e.IH(-this.bGs,-this.MGs),e.CH(),n.O$(i)?s=!1:(this.DGs=this.OGs,this.qU(lO.yut.Zs.t$.tPs),this.yGs="jumping",this.vGs=-this.AGs,s=!0,t?this.iGs=!0:this.eGs=!0),e.TH(r,h),e.CH()}return s}qGs(t,s,i){s&&this.DGs>0?(this.vGs=-this.AGs,this.DGs-=i):this.lGs=null,t&&(this.iGs=!0)}YGs(t,s){let i=0;const e=this.GGs,n=this.PGs;return t&&!s&&(i=this.SGs>0?-(e+n):-e),s&&!t&&(i=this.SGs<0?e+n:e),i}ZGs(t,s,i,e){const n=this.PGs;t===s&&(this.SGs<0?this.SGs=Math.min(this.SGs+n*e,0):this.SGs>0&&(this.SGs=Math.max(this.SGs-n*e,0))),this.SGs=lO.Kn(this.SGs+i*e,-this._Gs,this._Gs);const r=this.Bc.RL(),h=this.SGs<0?this.sPs(0,1,1):null;if(h)this.SGs=0,r.wNt(this.di,h);else{const t=this.SGs>0?this.sPs(1,1,1):null;t&&(this.SGs=0,r.wNt(this.di,t))}}XGs(t,s,i,e){const n=this.di,r=n.kB(),h=this.Bc.RL(),o=this.bGs,a=this.MGs,l=this.CGs,u=this.TGs,c=this._Gs;let f=!1;const d=new Set(h.DNt(n,!0));let p=r.YM(),m=r.ZM();const g=aO(this.SGs,-c,c,s,t)*l,y=aO(this.SGs,-c,c,s,t)*u;r.IH(l*(this.SGs>1?1:-1)-o,u*(this.SGs>1?1:-1)-a),r.CH();let w=!1;const S=h.O$(n);r.TH(p+g,m+y),r.CH();let v=h.O$(n);if(!v&&i&&this.dGs&&(v=h.DNt(n),d.has(v)?v=null:w=!0),v){let s=Math.abs(this.SGs*t)+2;S||!h.kNt(n,-o,-a,s,w,v)?(h.wNt(n,v),s=Math.max(Math.abs(this.SGs*t*2.5),Math.floor(r.Vg())),h.kNt(n,l*(this.SGs<0?1:-1),u*(this.SGs<0?1:-1),s,!1)?!i||w||this.dGs||(p=r.YM(),m=r.ZM(),r.IH(o,a),h.O$(n)&&h.kNt(n,-o,-a,3,!1)||(r.TH(p,m),r.CH())):(r.TH(p,m),r.CH()),w||(this.SGs=0)):!S&&!e&&Math.abs(this.vGs)<Math.abs(this.AGs/4)&&(this.vGs=0,i||(f=!0))}else{const s=this._6t();if(i&&!s){const s=Math.ceil(Math.abs(this.SGs*t))+2;p=r.YM(),m=r.ZM(),r.IH(o*s,a*s),r.CH();const e=h.DNt(n);let l=!1;e&&!d.has(e)&&h.kNt(n,-o,-a,s+2,!0,e)&&(i=e,this.$Gs(e),this.dGs=!0,l=!0),l||(h.O$(n)?h.kNt(n,-o,-a,s+2,!1):(r.TH(p,m),r.CH()))}else s&&(!i&&this.dGs&&(this.$Gs(s),this.vGs=0,f=!0),0===this.vGs&&h.LNt(n,-o,-a,s,16))}return[f,i]}KGs(t,s){const i=this.di,e=i.kB(),n=this.Bc.RL(),r=this.bGs,h=this.MGs;let o=!1,a=e.YM(),l=e.ZM();const u=aO(this.vGs,-1/0,this.RGs,this.Io,t);e.IH(u*r,u*h);const c=e.YM(),f=e.ZM();e.CH();let d=n.O$(i),p=!1;if(!d&&this.vGs>0&&!s){const t=this.WGs()?n.DNt(i,!0):null;if(t&&t.length){if(this.mGs){e.TH(a,l),e.CH();let s=0;for(let e=0,r=t.length;e<r;++e)t[s]=t[e],n.A$(i,t[e])||++s;lO.Sh(t,s),e.TH(c,f),e.CH()}t.length>=1&&(d=t[0])}p=!!d}if(d){n.wNt(i,d),this.DGs=0;let s=1.1;p&&!this.mGs&&(s=2);const u=Math.max(Math.abs(this.vGs*t*s),2);n.kNt(i,r*(this.vGs<0?1:-1),h*(this.vGs<0?1:-1),u,p,d)?(this.$Gs(d),this.dGs=p,this.vGs>0&&(o=!0),(this.vGs>0||0===this.kGs)&&(this.vGs=0),this.vGs<0&&1===this.kGs&&n.LNt(i,r,h,d,32)):(e.TH(a,l),e.CH(),this.pGs=!0,p||(this.vGs=0))}return[o,u]}QGs(t,s,i){"falling"!==this.yGs&&this.vGs>0&&!t&&(this.qU(lO.yut.Zs.t$.iPs),this.yGs="falling"),(t||s)&&this.vGs>=0&&("falling"===this.yGs||s||i&&0===this.vGs?(this.qU(lO.yut.Zs.t$.ePs),0===this.SGs&&0===this.vGs?this.yGs="stopped":this.yGs="moving"):("stopped"!==this.yGs&&0===this.SGs&&0===this.vGs&&(this.qU(lO.yut.Zs.t$.nPs),this.yGs="stopped"),"moving"===this.yGs||0===this.SGs&&0===this.vGs||i||(this.qU(lO.yut.Zs.t$.rPs),this.yGs="moving")))}hPs(){return 0!==this.oPs()||0!==this.aPs()}lPs(){if(0!==this.vGs)return!1;const t=this.di,s=this.kB(),i=this.Bc.RL(),e=s.YM(),n=s.ZM();s.IH(this.bGs,this.MGs),s.CH();const r=i.O$(t);let h=null;if(!r&&this.WGs()&&(h=i.DNt(t,!0)),s.TH(e,n),s.CH(),r)return!i.A$(t,r);if(h&&h.length){let s=0;for(let e=0,n=h.length;e<n;++e)h[s]=h[e],i.A$(t,h[e])||s++;if(s>=1)return!0}return!1}uPs(t,s=2,i=3){return!!this.sPs(t,s,i)}sPs(t,s=2,i=3){const e=this.di,n=this.kB(),r=this.Bc.RL(),h=n.YM(),o=n.ZM();if(0===t?n.IH(-this.CGs*s,-this.TGs*s):n.IH(this.CGs*s,this.TGs*s),n.CH(),!r.O$(e))return n.TH(h,o),n.CH(),null;n.IH(-this.bGs*i,-this.MGs*i),n.CH();const a=r.O$(e);return n.TH(h,o),n.CH(),a}cPs(){const t=this.kB(),s=t.YM(),i=t.ZM();t.IH(this.bGs,this.MGs),t.CH();const e=this.Bc.RL().DNt(this.di,!1);t.TH(s,i),t.CH(),e&&(this.wGs=this.Bc.FN(),this.lGs=null)}fPs(t){this.eGs=!t}dPs(){return Math.hypot(this.SGs,this.vGs)}pPs(){return Math.atan2(this.vGs,this.SGs)}mPs(){return this.vGs<0}gPs(){return this.vGs>0}yPs(t){this._Gs=Math.max(t,0)}wPs(){return this._Gs}SPs(t){this.GGs=Math.max(t,0)}vPs(){return this.GGs}bPs(t){this.PGs=Math.max(t,0)}MPs(){return this.PGs}CPs(t){this.AGs=Math.max(t,0)}TPs(){return this.AGs}xPs(t){this.RGs=Math.max(t,0)}IPs(){return this.RGs}_Ps(t){if(this.xGs===t)return;this.Io=t,this.NGs();const s=this.Bc.RL(),i=this.kB();s.O$(this.di)&&(s.kNt(this.di,this.bGs,this.MGs,10),i.IH(2*this.bGs,2*this.MGs),i.CH()),this.lGs=null}GPs(){return this.Io}PPs(t){t=lO.Zn(t),this.IGs!==t&&(this.IGs=t,this.NGs(),this.lGs=null)}APs(){return this.IGs}RPs(t){this.EGs=!!t}EPs(){return this.EGs}OPs(t){this.OGs=t}DPs(){return this.OGs}FPs(t){this.kGs=t}kPs(){return this.kGs}LPs(t){this.SGs=t}oPs(){return this.SGs}NPs(t){this.vGs=t}aPs(){return this.vGs}BPs(t){if(this.Obt)switch(t){case 0:this.hGs=!0;break;case 1:this.oGs=!0;break;case 2:this.aGs=!0}}$Ps(t){t=!!t,this.FGs!==t&&(this.FGs=t,this.FGs?this.LGs():(this.BGs(),this.uls()))}WPs(){return this.FGs}jPs(t){this.rGs=!!t}VPs(){return this.rGs}AIt(t){t=!!t,this.Obt!==t&&(this.Obt=t,this.Obt?this.lAt():(this.rAt(),this.lGs=null,this.hGs=!1,this.oGs=!1,this.aGs=!1))}EIt(){return this.Obt}sot(t){switch(t){case fO:return this.wPs();case dO:return this.vPs();case pO:return this.MPs();case mO:return this.TPs();case gO:return this.GPs();case yO:return this.IPs();case wO:return this.EPs();case SO:return 1e3*this.DPs();case vO:return this.WPs();case bO:return this.EIt()}}oot(t,s){switch(t){case fO:this.yPs(s);break;case dO:this.SPs(s);break;case pO:this.bPs(s);break;case mO:this.CPs(s);break;case gO:this._Ps(s);break;case yO:this.xPs(s);break;case wO:this.RPs(!!s);break;case SO:this.OPs(s/1e3);break;case vO:this.$Ps(!!s);break;case bO:this.AIt(!!s)}}lPt(){const t="behaviors.platform";return[{title:"$"+this.fJ().Ac(),properties:[{name:t+".debugger.vector-x",value:this.oPs(),N2t:t=>this.LPs(t)},{name:t+".debugger.vector-y",value:this.aPs(),N2t:t=>this.NPs(t)},{name:t+".properties.max-speed.name",value:this.wPs(),N2t:t=>this.yPs(t)},{name:t+".properties.acceleration.name",value:this.vPs(),N2t:t=>this.SPs(t)},{name:t+".properties.deceleration.name",value:this.MPs(),N2t:t=>this.bPs(t)},{name:t+".properties.jump-strength.name",value:this.TPs(),N2t:t=>this.CPs(t)},{name:t+".properties.gravity.name",value:this.GPs(),N2t:t=>this._Ps(t)},{name:t+".debugger.gravity-angle",value:lO.tr(this.APs()),N2t:t=>this.PPs(lO.Qn(t))},{name:t+".properties.max-fall-speed.name",value:this.IPs(),N2t:t=>this.xPs(t)},{name:t+".properties.double-jump.name",value:this.EPs(),N2t:t=>this.RPs(t)},{name:t+".properties.jump-sustain.name",value:1e3*this.DPs(),N2t:t=>this.OPs(t/1e3)},{name:t+".debugger.animation-mode",value:[t+".debugger.anim-"+this.yGs]},{name:t+".properties.enabled.name",value:this.EIt(),N2t:t=>this.AIt(t)}]}]}bGt(){return self.UPs}};const CO=new WeakMap,TO=new Map([["left",0],["right",1],["jump",2]]);self.UPs=class extends cO{constructor(){super(),CO.set(this,cO.mU().iJ())}HPs(){CO.get(this).cPs()}zPs(t){CO.get(this).fPs(!!t)}JPs(t){uO.ue(t);const s=TO.get(t);if("number"!=typeof s)throw new Error("invalid control");CO.get(this).BPs(s)}get speed(){return CO.get(this).dPs()}get qPs(){return CO.get(this).wPs()}set qPs(t){uO.he(t),CO.get(this).yPs(t)}get acceleration(){return CO.get(this).vPs()}set acceleration(t){uO.he(t),CO.get(this).SPs(t)}get YPs(){return CO.get(this).MPs()}set YPs(t){uO.he(t),CO.get(this).bPs(t)}get XPs(){return CO.get(this).TPs()}set XPs(t){uO.he(t),CO.get(this).CPs(t)}get KPs(){return CO.get(this).IPs()}set KPs(t){uO.he(t),CO.get(this).xPs(t)}get Ays(){return CO.get(this).GPs()}set Ays(t){uO.he(t),CO.get(this)._Ps(t)}get ZPs(){return CO.get(this).APs()}set ZPs(t){uO.he(t),CO.get(this).PPs(t)}get QPs(){return CO.get(this).EPs()}set QPs(t){CO.get(this).RPs(!!t)}get tAs(){return CO.get(this).DPs()}set tAs(t){uO.he(t),CO.get(this).OPs(t)}get sAs(){return 0===CO.get(this).kPs()?"stop":"preserve-momentum"}set sAs(t){uO.ue(t);const s=CO.get(this);if("stop"===t)s.FPs(0);else{if("preserve-momentum"!==t)throw new Error("invalid mode");s.FPs(1)}}get iAs(){return CO.get(this).lPs()}eAs(t){uO.ue(t);const s=CO.get(this);if("left"===t)return s.uPs(0);if("right"===t)return s.uPs(1);throw new Error("invalid side")}get nAs(){return CO.get(this).hPs()}get rAs(){return CO.get(this).mPs()}get hAs(){return CO.get(this).gPs()}get oAs(){return CO.get(this).oPs()}set oAs(t){uO.he(t),CO.get(this).LPs(t)}get aAs(){return CO.get(this).aPs()}set aAs(t){uO.he(t),CO.get(this).NPs(t)}lAs(t,s){uO.he(t),uO.he(s);const i=CO.get(this);i.LPs(t),i.NPs(s)}uAs(){const t=CO.get(this);return[t.oPs(),t.aPs()]}get cAs(){return CO.get(this).WPs()}set cAs(t){CO.get(this).$Ps(!!t)}get fAs(){return CO.get(this).VPs()}set fAs(t){CO.get(this).jPs(!!t)}get isEnabled(){return CO.get(this).EIt()}set isEnabled(t){CO.get(this).AIt(!!t)}}}{const xO=self._s;xO.yut.Zs.t$={dAs(){return this.hPs()},pAs(t,s){return xO.compare(this.dPs(),t,s)},mAs(){return this.lPs()},gAs(t){return this.uPs(t)},yAs(){return this.mPs()},wAs(){return this.gPs()},SAs(){return this.EPs()},tPs:()=>!0,iPs:()=>!0,nPs:()=>!0,rPs:()=>!0,ePs:()=>!0,_u(){return this.EIt()}}}{const IO=self._s;IO.yut.Zs.wht={vAs(t){this.yPs(t)},bgs(t){this.SPs(t)},bAs(t){this.bPs(t)},MAs(t){this.CPs(t)},CAs(t){this.xPs(t)},Mgs(t){this._Ps(t)},TAs(t){this.BPs(t)},xAs(t){this.jPs(!!t)},IAs(t){this.LPs(t)},_As(t){this.NPs(t)},GAs(t){this.PPs(IO.Qn(t))},G_t(t){this.AIt(0!==t)},PAs(){this.cPs()},AAs(t){this.RPs(0!==t)},RAs(t){this.OPs(t/1e3)},EAs(t){this.FPs(t)},OAs(t){this.$Ps(t)},DAs(t){this.fPs(t)}}}{const _O=self._s;_O.yut.Zs.Sht={FAs(){return this.dPs()},kAs(){return this.wPs()},LAs(){return this.vPs()},NAs(){return this.MPs()},BAs(){return this.TPs()},ows(){return this.GPs()},$As(){return _O.tr(this.APs())},WAs(){return this.IPs()},jAs(){return _O.tr(this.pPs())},VAs(){return this.oPs()},UAs(){return this.aPs()},HAs(){return 1e3*this.DPs()}}}{const GO=self._s;GO.yut.zAs=class extends GO.KPt{constructor(t){super(t),this.JAs=0,this.qAs=0,this.YAs=0,this.XAs=0}zn(){super.zn()}KAs(t){this.JAs=t}ZAs(){return this.JAs}QAs(t){this.qAs=t}tRs(){return this.qAs}sRs(t){this.YAs=t}iRs(){return this.YAs}eRs(t){this.XAs=t}nRs(){return this.XAs}}}{const PO=self._s;PO.yut.zAs.dEt=class extends PO.iAt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{const AO=self._s,RO=0;AO.yut.zAs.Instance=class extends AO.nAt{constructor(t,s){super(t),this.Obt=!0,s&&(this.Obt=s[RO]),this.Obt&&this.oPt()}zn(){super.zn()}aC(){const t=this.lJ();return{e:this.Obt,smg:t.ZAs(),ss:t.tRs(),se:t.iRs(),smd:t.nRs()}}lC(t){const s=this.lJ();s.KAs(t.smg),s.QAs(t.ss),s.sRs(t.se),s.eRs(t.smd),this.Obt=t.e,this.Obt?this.oPt():this.UGt()}AIt(t){this.Obt=!!t,this.Obt?this.oPt():this.UGt()}_u(){return this.Obt}nPt(){if(!this._u())return;this.Bc.RN(this.di);const t=this.lJ(),s=t.ej();let i=0,e=0,n=0;for(const t of s){const s=t.wDt(AO.yut.zAs);if(!s||!s.iJ()._u())continue;const r=t.kB();i+=r.YM(),e+=r.ZM(),++n}const r=this.di.kB().mB(),h=this.Bc.FN();let o=0,a=0;if(h>=t.tRs()&&h<t.iRs()){let s=t.ZAs()*Math.min(this.Bc.WN(),1);0===t.nRs()&&(s*=1-(h-t.tRs())/(t.iRs()-t.tRs()));const i=this.Bc.uB()*Math.PI*2,e=this.Bc.uB()*s;o=Math.cos(i)*e,a=Math.sin(i)*e}r.Fj(i/n+o),r.Lj(e/n+a)}sot(t){if(t===RO)return this.Obt}oot(t,s){t===RO&&(this.Obt=!!s,this.Obt?this.oPt():this.UGt())}lPt(){return[{title:"$"+this.fJ().Ac(),properties:[{name:"behaviors.scrollto.properties.enabled.name",value:this._u(),N2t:t=>this.AIt(t)}]}]}}}self._s.yut.zAs.t$={_u(){return this._u()}},self._s.yut.zAs.wht={rRs(t,s,i){const e=this.lJ();e.KAs(t),e.QAs(this.Bc.FN()),e.sRs(this.Bc.FN()+s),e.eRs(i)},G_t(t){this.AIt(0!==t)}},self._s.yut.zAs.Sht={};{const EO=self._s;EO.yut.gut=class extends EO.KPt{constructor(t){super(t)}zn(){super.zn()}}}{const OO=self._s;OO.yut.gut.dEt=class extends OO.iAt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{const DO=self._s,FO=DO.yut.gut,kO=0;FO.Instance=class extends DO.nAt{constructor(t,s){super(t),this.hRs=!1,this.du=!0,s&&(this.hRs=!1,this.du=!!s[kO]),this.oRs=new Map,this.aRs=[],this.lRs=new Map,this.uRs=null,this.cRs=null,this.fRs=null,this.dRs=null,this.pRs="",this.mRs=[],this.d6=t=>this.p6(),this.l$().Sf().addEventListener("afterload",this.d6)}zn(){this.l$().Sf().removeEventListener("afterload",this.d6),this.d6=null,this.uRs&&(this.gRs(this.uRs),this.uRs=null),this.yRs(),this.wRs=null,this.SRs(),this.aRs=null,this.vRs(),this.lRs=null,this.mRs=null,super.zn()}but(t){this.mRs.push(t)}Mut(){this.mRs.pop()}bRs(){return this.mRs[this.mRs.length-1]}G_t(t){this.du=!!t,t?this.lRs&&this.lRs.size&&this.oPt():this.UGt();for(const s of this.MRs())t?this.CRs(s)&&s.rq():((s.IsPlaying()||s.Cst())&&this.TRs(s),s.nq());t&&this.SRs()}_u(){return this.du}TRs(t){this.aRs.push(t)}CRs(t){return this.aRs.includes(t)}SRs(){DO.bh(this.aRs)}xRs(){return this.uRs}Uit(){const t=this.pJ();return!!t&&!t.SY()}IRs(t,s,i=!1){const e=s?this._Rs(s,i):this.MRs(i);if(e&&e.length)for(const s of e)if(s.hq(t))return s}GRs(t,s){for(const i of this.oRs.values())for(const e of i)if(!e.iq()&&e.hq(t)&&s(e))return!0;for(const i of this.lRs.values())for(const e of i)if(!e.iq()&&e.hq(t)&&s(e))return!0;return!1}PRs(t){for(const s of this.oRs.values())for(const i of s)if(!i.iq()&&t(i))return!0;for(const s of this.lRs.values())for(const i of s)if(!i.iq()&&t(i))return!0;return!1}ARs(t,s){return this.IRs(t,s,!0)}*RRs(t,s,i=!1){const e=s?this._Rs(s,i):this.MRs(i);if(e&&e.length)for(const s of e)s.hq(t)&&(yield s)}*ERs(t,s){yield*this.RRs(t,s,!0)}_Rs(t,s){if(s){let s=this.oRs.get(t),i=this.lRs.get(t);return s||(s=[]),i||(i=[]),s.concat(i).filter(t=>t).filter(t=>!t.iq())}{let s=this.oRs.get(t);return s||(s=[]),s.filter(t=>t).filter(t=>!t.iq())}}MRs(t){if(t){const t=[...this.oRs.values()].flat(),s=[...this.lRs.values()].flat();return t.concat(s).filter(t=>t).filter(t=>!t.iq())}return[...this.oRs.values()].flat().filter(t=>t).filter(t=>!t.iq())}ORs(){return this.MRs(!0)}aC(t="full"){return{s:!1,e:!!this.du,at:this.DRs(),dt:this.FRs(),wt:this.kRs(),ft:this.LRs()}}lC(t,s="full"){t&&(this.cRs=t.at,this.fRs=t.dt,this.dRs=t.wt,this.pRs=t.ft,this.hRs=!1,this.du=!!t.e,"state"===s&&this.p6())}p6(){const t=this.l$().Vtt();if(this.NRs(this.cRs,this.oRs,t),this.fRs){DO.bh(this.aRs);for(const s of this.fRs)this.BRs(this.aRs,s,t)}this.NRs(this.dRs,this.lRs,t),this.uRs=this.$Rs(this.pRs,t),this.du?this.lRs&&this.lRs.size&&this.oPt():this.UGt()}NRs(t,s,i){if(t)for(const e in t){let n=s.get(e);n?DO.bh(n):n=[];const r=t[e];for(const t of r)if(this.BRs(n,t.name,i))this.WRs(t.name,t,i);else{const s=DO.Yot.xut({runtime:this.l$(),json:t});DO.Yot.let(s,this.pJ().xU()),s.iut(t=>this.jRs(t)),s.tut(this),i.z6(s),this.BRs(n,s,i)}s.set(e,n)}}$Rs(t,s){return s.V6(t)}BRs(t,s,i){if("string"!=typeof s)return!!t.push(s);{const e=this.$Rs(s,i);if(e)return!!t.push(e)}return!1}WRs(t,s,i){if("string"==typeof t){const e=this.$Rs(t,i);e&&(e.n4(s),DO.Yot.let(e,this.pJ().xU()),DO.Yot.tut(e,this))}else t.n4(s),DO.Yot.let(t,this.pJ().xU()),DO.Yot.tut(t,this)}DRs(){const t={};for(const[s,i]of this.oRs)t[s]=i.filter(t=>!t.iq()).map(t=>t.e4());return t}FRs(){return this.aRs.filter(t=>!t.iq()).map(t=>t.Ac())}kRs(){const t={};for(const[s,i]of this.lRs)t[s]=i.map(t=>t.e4());return t}LRs(){return this.uRs?this.uRs.Ac():""}nPt(){this.vRs()}VRs(t){const s=FO.HRs.URs(t.het,t.Dut,t.Fut,t.Out,t.Aut,this.pJ()),i=FO.JRs.zRs(t.het);FO.JRs.qRs(i)||this.YRs(t.het);const e=DO.Yot.xut({runtime:this.l$(),id:i,tags:t.tags,time:t.time,dJ:this.pJ(),Gut:!!t.Gut,loop:!!t.loop,Put:!!t.Put,_J:t._J,_ut:t._ut,Iut:s});return e.iut(t=>this.jRs(t)),e.tut(this),this.XRs(e,t.het),e}KRs(t){const s=t.Oq();if(this.oRs.has(s)){const i=this.oRs.get(s);if(i){const s=i.indexOf(t);-1!==s&&i.splice(s,1)}}}Iq(t,s=!1){this.KRs(t),t.iq()||this.ZRs(t)||(t.nq(s),this.QRs(t))}YRs(t,s=!1){if(DO.te(t)){const i=FO.JRs.zRs(t);if(!this.oRs.has(i))return;const e=this.oRs.get(i),n=this.xRs();for(const t of e)t!==n&&(t.iq()||this.ZRs(t)||(t.nq(s),t.zn()));DO.bh(e)}else{const t=this.xRs();for(const i of this.MRs())i!==t&&(i.iq()||this.ZRs(i)||(i.nq(s),i.zn()));for(const t of this.oRs.keys())DO.bh(this.oRs.get(t)),this.oRs.delete(t);this.oRs.clear()}}gRs(t){this.Iq(t,!0)}yRs(){this.YRs(NaN,!0)}sot(t){if(t===kO)return this.du}oot(t,s){t===kO&&(this.du=!!s)}tEs(t){const s=t.Pq().Ort();for(const t of s){const s=t.fJ();if(s.DEt()===this.constructor)return s}}qU(t,s,i,e){return this.Bc?super.qU(t):s.qU(t,i,e)}jRs(t){let s,i;if(this.uRs=t,FO.t$.sEs(t),this.l$())s=this.di,i=this.Bc,this.qU(FO.t$.iEs),this.qU(FO.t$.eEs),this.Iq(t);else{if(s=t.Pq(),!s)return;if(s&&s.SY())return;i=s.l$();const e=this.tEs(t);this.qU(FO.t$.iEs,i,s,e),this.qU(FO.t$.eEs,i,s,e),t.nq()}this.uRs=null,FO.t$.sEs(null),t.Rq()&&i.wU(s)}XRs(t,s){const i=FO.JRs.zRs(s);this.oRs.has(i)||this.oRs.set(i,[]),this.oRs.get(i).push(t)}QRs(t){const s=t.Oq();this.lRs.has(s)||this.lRs.set(s,[]),this.lRs.get(s).push(t),this.aPt()||this.oPt()}ZRs(t){const s=t.Oq();return!!this.lRs.has(s)&&this.lRs.get(s).includes(t)}vRs(){if(this.lRs.size){for(const t of this.lRs.values()){for(const s of t)s.iq()||s.zn();DO.bh(t)}this.lRs.clear(),this.aPt()&&this.UGt()}}lPt(){return[{title:"$"+this.fJ().Ac(),properties:[{name:"behaviors.tween.properties.enabled.name",value:this._u(),N2t:t=>this.G_t(t)}]}]}bGt(){return self.nEs}}}{const LO=self._s;let NO=null;LO.yut.gut.t$={mut:()=>!0,wut(t){const s=this.bRs();return!!s&&s.hq(t)},Sut(t){const s=this.bRs();return!!s&&(s.est()===t||2===t)},vut(t,s){const i=this.bRs();return!!i&&(i.est()===s||2===s)&&i.hq(t)},sEs(t){NO=t},iEs:t=>NO.hq(t),eEs:()=>!0,IsPlaying(t){return this.GRs(t,LO.Yot.IsPlaying)},Ovs(){return this.PRs(LO.Yot.IsPlaying)},bq(t){return this.GRs(t,LO.Yot.bq)},rEs(){return this.PRs(LO.Yot.bq)},EJ(t,s){return 0===s?this.GRs(t,LO.Yot.Cut):1===s&&this.GRs(t,LO.Yot.Tut)},hEs(t){return 0===t?this.PRs(LO.Yot.Cut):1===t&&this.PRs(LO.Yot.Tut)}}}{const BO=self._s,$O=self.Vu,WO=BO.yut.gut;WO.wht={G_t(t){this.G_t(!!t)},async oEs(...t){if(!this._u()||!this.Uit())return;const s=this.VRs(WO.lEs.aEs(this,...t));s.Play()&&await s.wq()},async uEs(...t){if(!this._u()||!this.Uit())return;const s=this.VRs(WO.lEs.cEs(this,...t));s.Play()&&await s.wq()},async fEs(...t){if(!this._u()||!this.Uit())return;const s=this.VRs(WO.lEs.dEs(this,...t));s.Play()&&await s.wq()},pEs(t){if(this._u()&&this.Uit())for(const s of this.RRs(t))s.nq()},mEs(){if(this._u()&&this.Uit())for(const t of this.MRs())t.nq()},gEs(t){if(this._u()&&this.Uit())for(const s of this.RRs(t))s.rq()},yEs(){if(this._u()&&this.Uit())for(const t of this.MRs())t.rq()},wEs(t){if(this._u()&&this.Uit())for(const s of this.RRs(t))this.Iq(s)},SEs(){if(this._u()&&this.Uit())for(const t of this.MRs())this.Iq(t)},vEs(t,s,i){if(!this._u()||!this.Uit())return;const e=BO.yut.gut.JRs.bEs(s);for(const s of this.RRs(t))s.out([e]),s.aut(i,e)},MEs(t,s,i,e){if(!this._u()||!this.Uit())return;const n=BO.yut.gut.JRs.CEs(s);for(const s of this.RRs(t))s.out(n),s.aut(i,n[0]),s.aut(e,n[1])},TEs(t,s){if(this._u()&&this.Uit())for(const i of this.RRs(t,"value"))i.rut(s,"value")},xEs(t,s){if(this._u()&&this.Uit())for(const i of this.RRs(t,"value"))i.out(["value"]),i.aut(s,"value")},IEs(t,s){if(!this._u()||!this.Uit())return;const i=$O.ac(s);for(const s of this.RRs(t))s.Gq(i)},_Es(t){if(!this._u()||!this.Uit())return;const s=$O.ac(t);for(const t of this.MRs())t.Gq(s)},GEs(t,s){if(this._u()&&this.Uit())for(const i of this.RRs(t))i.oq(s)},PEs(t){if(this._u()&&this.Uit())for(const s of this.MRs())s.oq(t)},AEs(t,s){if(this._u()&&this.Uit())for(const i of this.RRs(t))i.mq(s)},REs(t){if(this._u()&&this.Uit())for(const s of this.MRs())s.mq(t)},EEs(t,s){if(this._u()&&this.Uit())for(const i of this.RRs(t))i.Eq(!!s)},OEs(t){if(this._u()&&this.Uit())for(const s of this.MRs())s.Eq(!!t)}}}self._s.yut.gut.Sht={DEs(t){const s=this.ARs(t);return s?s.YD():0},xZt(t){const s=this.ARs(t);return s?s.YD()/s.lq():0},_ht(t){const s=this.ARs(t);return s?s.gq():0},FEs(t){const s=this.ARs(t,"value");return s?s.Fq("value").Dq():0},LIt(){let t=this.xRs();return t?t.ost():(t=this.bRs(),t?t.ost():"")}};{const jO=self._s,VO=self.Vu,UO=["position","size","scale"],HO=["offsetX","offsetY","offsetWidth","offsetHeight","offsetAngle","offsetOpacity","offsetColor","offsetZElevation","offsetScaleX","offsetScaleY"],zO=["value"],JO=[].concat(UO).concat(HO).concat(zO),qO={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},YO=Object.assign({},JO.reduce((t,s)=>Object.assign({},t,{[s]:[s]}),{}),qO);jO.yut.gut.JRs=class{constructor(){}static kEs(){return[...VO.Ku()]}static ac(t){return[...VO.Ku()][t]}static zRs(t){return JO[t]}static LEs(t){return JO.indexOf(t)}static NEs(t){return UO[t]}static bEs(t){return HO[t]}static BEs(t){return zO[t]}static $Es(t){return qO[t]}static CEs(t){return jO.le(t)?YO[t]:YO[JO[t]]}static WEs(t){return!!qO[t]}static jEs(t){return"offsetColor"===t}static VEs(t){return"offsetAngle"===t}static UEs(t){return"offsetOpacity"===t}static qRs(t){return"value"===t}}}{const XO=self._s,KO=XO.yut.gut,ZO=new Map;KO.HRs=class{constructor(){}static URs(t,s,i,e,n,r){0===ZO.size&&this.HEs();const h=KO.JEs.zEs(t);let o=ZO.get(h);return XO.te(t)&&(t=KO.JRs.zRs(t)),this.qEs(o,t,s,i,e,n,r)}static YEs(t,s){return XO.yut.gut.URs(t).XEs(s)}static HEs(){const t=KO.JEs,s=KO.KEs;this.ZEs(t.QEs,this.tOs,s.sOs),this.ZEs(t.COLOR,this.iOs,s.eOs),this.ZEs(t.nOs,this.rOs,s.hOs),this.ZEs(t.oOs,this.aOs,s.sOs),this.ZEs(t.lOs,this.uOs,s.sOs)}static ZEs(t,s,i){ZO.set(t,this.cOs(t,s,i))}static cOs(t,s,i){return{name:t,fOs:s,XEs:i}}static qEs(t,s,i,e,n,r,h){return t.fOs(s,t.XEs(i),t.XEs(e),n,r,h)}static tOs(t,s,i,e,n,r){return KO.JRs.$Es(t).map((t,r)=>({Rut:"world-instance",het:t,type:"float",valueType:"numeric",Dut:s[r],Fut:i[r],Out:KO.JRs.ac(e),Aut:n}))}static iOs(t,s,i,e,n,r){return XO.i$.Text&&r.zW()instanceof XO.i$.Text?{Rut:"plugin",Eut:[7],het:"color",type:"color",valueType:"color",Dut:s,Fut:i,Out:KO.JRs.ac(e),Aut:n}:{Rut:"world-instance",het:t,type:"color",valueType:"color",Dut:s,Fut:i,Out:KO.JRs.ac(e),Aut:n}}static rOs(t,s,i,e,n,r){return{Rut:"world-instance",het:t,type:"angle",valueType:"angle",Dut:s,Fut:i,Out:KO.JRs.ac(e),Aut:n}}static uOs(t,s,i,e,n,r){return{Rut:"world-instance",het:t,type:"float",valueType:"numeric",Dut:s,Fut:i,Out:KO.JRs.ac(e),Aut:n}}static aOs(t,s,i,e,n,r){return{Rut:"value",het:t,type:"float",valueType:"numeric",Dut:s,Fut:i,Out:KO.JRs.ac(e),Aut:n}}}}{const QO=self._s,tD=QO.yut.gut,sD={Aut:"absolute"},iD=Object.assign({},sD,{tags:"",het:"",time:0,Out:0,Gut:0,loop:!1,Put:!1,_J:1}),eD=Object.assign({},iD,{_ut:"current-state",Dut:0,Fut:0}),nD=Object.assign({},iD,{_ut:"current-state",Dut:[0,0],Fut:[0,0]}),rD=Object.assign({},iD,{_ut:"current-state",Dut:[0,0,0],Fut:[0,0,0]}),hD=Object.assign({},eD,{_ut:"start-value"}),oD=0,aD=1,lD=0,uD=1,cD=2;tD.lEs=class{constructor(){}static dOs(t,s,i,e,n,r,h,o){t.tags=s,t.time=i,t.Out=e,t.Gut=n,t.loop=r,t.Put=h,t._J=o}static aEs(t,s,i,e,n,r,h,o,a,l){const u="string"==typeof i?i:tD.JRs.bEs(i),c=tD.JRs.jEs(u)?rD:eD;return this.dOs(c,s,n,r,h,o,a,l),tD.JRs.jEs(u)?(rD.Fut[0]=QO.Ar(e),rD.Fut[1]=QO.Rr(e),rD.Fut[2]=QO.Er(e),rD.het=tD.JRs.LEs(u)):tD.JRs.UEs(u)?eD.Fut=e/100:eD.Fut=e,c.het=tD.JRs.LEs(u),c}static cEs(t,s,i,e,n,r,h,o,a,l,u){this.dOs(nD,s,r,h,o,a,l,u);const c="string"==typeof i?i:tD.JRs.NEs(i);return nD.Fut[0]=e,nD.Fut[1]=n,nD.het=tD.JRs.LEs(c),nD}static dEs(t,s,i,e,n,r,h,o,a,l){return this.dOs(hD,s,n,r,h,o,a,l),hD.Dut=i,hD.Fut=e,hD.het=tD.JRs.LEs("value"),hD}}}{const fD=self._s,dD=fD.yut.gut,pD=[];dD.JEs=class{constructor(){}static zEs(t){if(0===pD.length){const t=pD;t.push({JR:dD.JRs.WEs,result:this.QEs}),t.push({JR:dD.JRs.jEs,result:this.COLOR}),t.push({JR:dD.JRs.VEs,result:this.nOs}),t.push({JR:dD.JRs.qRs,result:this.oOs}),t.push({JR:()=>!0,result:this.lOs})}fD.te(t)&&(t=fD.yut.gut.JRs.zRs(t));for(const s of pD)if(s.JR(t))return s.result}static get QEs(){return"pair"}static get COLOR(){return"color"}static get nOs(){return"angle"}static get oOs(){return"value"}static get lOs(){return"other"}}}{const mD=self._s,gD=mD.yut.gut;gD.KEs=class{constructor(){}static hOs(t){const s=mD.Qn(parseFloat(t));return mD.Zn(s)}static eOs(t){return t.slice(0)}static sOs(t){return t}}}{let yD=function(t){vD.ue(t);const s=MD.zu(t);let i;if(i=s?MD.lc(s,null):MD.lc(t,null),-1===i)throw new Error(`invalid ease name '${t}'`);return i},wD=function(t,s=!1){if(!(s&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")};getIndexForEase=yD,ValidateTags=wD;const SD=self._s,vD=self.Ns,bD=self.oJ,MD=self.Vu,CD=SD.yut.gut,TD=new WeakMap,xD=new Map([["x",{name:"offsetX",type:"one"}],["y",{name:"offsetY",type:"one"}],["width",{name:"offsetWidth",type:"one"}],["height",{name:"offsetHeight",type:"one"}],["angle",{name:"offsetAngle",type:"one"}],["opacity",{name:"offsetOpacity",type:"one"}],["color",{name:"offsetColor",type:"color"}],["z-elevation",{name:"offsetZElevation",type:"one"}],["x-scale",{name:"offsetScaleX",type:"one"}],["y-scale",{name:"offsetScaleY",type:"one"}],["position",{name:"position",type:"two"}],["size",{name:"size",type:"two"}],["scale",{name:"scale",type:"two"}],["value",{name:"value",type:"value"}]]),ID={tags:"",pOs:!1,loop:!1,Put:!1,_J:1,Dut:0},_D={xq:yD};self.nEs=class extends bD{constructor(){super(),TD.set(this,bD.mU().iJ())}mOs(t,s,i,e,n){const r=TD.get(this);if(!r._u()||!r.Uit())return null;const h=xD.get(t);if(!h)throw new Error("invalid tween property");"one"===h.type||"value"===h.type?vD.se(s):(vD.xe(s),"two"===h.type?(vD.se(s[0]),vD.se(s[1])):"color"===h.type&&(vD.se(s[0]),vD.se(s[1]),vD.se(s[2]))),"angle"===t?s=SD.tr(s):"opacity"===t?s*=100:"color"===t&&(s=SD.Pr(s[0],s[1],s[2]));const o=yD(e);let a;if(vD.he(i),n=Object.assign({},ID,n),"value"===h.type&&vD.se(n.Dut),wD(n.tags,!0),"one"===h.type||"color"===h.type?a=r.VRs(CD.lEs.aEs(r,n.tags,h.name,s,i,o,!!n.pOs,!!n.loop,!!n.Put,n._J)):"two"===h.type?a=r.VRs(CD.lEs.cEs(r,n.tags,h.name,s[0],s[1],i,o,!!n.pOs,!!n.loop,!!n.Put,n._J)):"value"===h.type&&(a=r.VRs(CD.lEs.dEs(r,n.tags,n.Dut,s,i,o,!!n.pOs,!!n.loop,!!n.Put,n._J))),a.tut(r.hAt().iJ()),!a.Play())throw new Error("failed to start tween");return a.kut(r,_D)}*gOs(){const t=TD.get(this);for(const s of t.MRs())yield s.kut(t,_D)}*yOs(t){wD(t);const s=TD.get(this);for(const i of s.RRs(t))yield i.kut(s,_D)}get isEnabled(){return TD.get(this)._u()}set isEnabled(t){TD.get(this).G_t(t)}}}{const GD=self._s;GD.yut.bound=class extends GD.KPt{constructor(t){super(t)}zn(){super.zn()}}}{const PD=self._s;PD.yut.bound.dEt=class extends PD.iAt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{const AD=self._s,RD=0;AD.yut.bound.Instance=class extends AD.nAt{constructor(t,s){super(t),this.UTs=0,s&&(this.UTs=s[RD]),this.oPt()}zn(){super.zn()}aC(){return{m:this.UTs}}lC(t){this.UTs=t.m}nPt(){const t=this.di.kB(),s=t.BH(),i=t.mB();let e=!1;0===this.UTs?(t.YM()<0&&(t.XM(0),e=!0),t.ZM()<0&&(t.QM(0),e=!0),t.YM()>i.Vg()&&(t.XM(i.Vg()),e=!0),t.ZM()>i.Qg()&&(t.QM(i.Qg()),e=!0)):(s.Qa()<0&&(t.got(-s.Qa()),e=!0),s.tl()<0&&(t.yot(-s.tl()),e=!0),s.sl()>i.Vg()&&(t.got(-(s.sl()-i.Vg())),e=!0),s.il()>i.Qg()&&(t.yot(-(s.il()-i.Qg())),e=!0)),e&&t.CH()}sot(t){if(t===RD)return this.UTs}oot(t,s){t===RD&&(this.UTs=s)}}}self._s.yut.bound.t$={},self._s.yut.bound.wht={},self._s.yut.bound.Sht={};{let ED=function(t,s,i){const e=t.oTt(),n=s.oTt();if(i){const i=e.get($D);i&&i.delete(s.G1());const r=n.get($D);r&&r.delete(t.G1())}else{let i=e.get($D);i||(i=new Set,e.set($D,i));let r=n.get($D);r||(r=new Set,n.set($D,r)),i.add(s.G1()),r.add(t.G1())}};SetObjectTypeCollisionsEnabled=ED;const OD=self._s,DD=self.Ns;let FD=null,kD=null,LD=[],ND=null,BD=null;const $D="Physics_DisabledCollisions";OD.yut.wOs=class extends OD.KPt{constructor(t){super(t),BD=this,this.SOs=null,this.vOs=10,this.bOs=.02,this.MOs=null,this.COs=-1,this.TOs=1,this.xOs=8,this.IOs=3,this._Os=!0,this.Bc.YB(this.GOs())}bGt(){return self.POs}async GOs(){const t=await this.Bc.GL().m$("box2d.wasm");await new Promise(s=>{self.Box2DWasmModule({wasmBinaryFile:t}).then(t=>{ND=t,this.AOs(),s()})})}AOs(){const t=this.Bc.RL();FD=OD.yut.wOs.IRt(0,0),kD=OD.yut.wOs.IRt(0,0),this.SOs=new ND.b2World(OD.yut.wOs.ROs(0,this.vOs),!0);const s=new ND.JSContactListener;s.BeginContact=s=>{const i=ND.wrapPointer(s,ND.b2Contact),e=OD.yut.wOs.Instance.EOs(i.GetFixtureA().GetBody()),n=OD.yut.wOs.Instance.EOs(i.GetFixtureB().GetBody());t.wNt(e.pJ(),n.pJ())},s.EndContact=()=>{},s.PreSolve=()=>{},s.PostSolve=()=>{},this.SOs.SetContactListener(s);const i=new ND.JSContactFilter;i.ShouldCollide=(t,s)=>{if(this._Os)return!0;const i=ND.wrapPointer(t,ND.b2Fixture),e=ND.wrapPointer(s,ND.b2Fixture),n=OD.yut.wOs.Instance.EOs(i.GetBody()),r=OD.yut.wOs.Instance.EOs(e.GetBody()),h=n.pJ().fU(),o=r.pJ().fU(),a=h.G1(),l=o.G1(),u=h.oTt().get($D);if(u&&u.has(l))return!1;const c=o.oTt().get($D);return!c||!c.has(a)},this.SOs.SetContactFilter(i),this.MOs=new ND.b2WorldManifold}zn(){super.zn()}OOs(){return ND}DOs(){return this.SOs}FOs(){return this.bOs}kOs(){return this.TOs}LOs(t){this.TOs=t}NOs(t){this.COs=t}BOs(){return this.COs}$Os(t){this.xOs=Math.max(t,1)}WOs(){return this.xOs}jOs(t){this.IOs=Math.max(t,1)}VOs(){return this.IOs}UOs(t,s){this.$Os(t),this.jOs(s)}Qgs(){return this.vOs}Mgs(t){t!==this.vOs&&(this.SOs.SetGravity(OD.yut.wOs.ROs(0,t)),this.vOs=t,this.HOs())}HOs(){for(const t of this.ej()){const s=OD.yut.wOs.Instance.zOs(t);if(!s)continue;const i=s.JOs();i&&i.SetAwake(!0)}}qOs(){this._Os=!1}YOs(t,s,i){if(i=!!i,t&&s){if(s.v1())for(const e of s.Cj())ED(t,e,i);else ED(t,s,i);this.qOs()}}XOs(){return this.MOs}static KOs(){return $D}static IRt(t,s){if(LD.length){const i=LD.pop();return i.set_x(t),i.set_y(s),i}return new(0,ND.b2Vec2)(t,s)}static ZOs(t){LD.push(t)}static ROs(t,s){return FD.set_x(t),FD.set_y(s),FD}static QOs(t,s){return kD.set_x(t),kD.set_y(s),kD}static tDs(t){const s=new(0,ND.b2PolygonShape),i=ND._malloc(8*t.length);let e=0;for(let s=0;s<t.length;++s)ND.HEAPF32[i+e>>2]=t[s].get_x(),ND.HEAPF32[i+(e+4)>>2]=t[s].get_y(),e+=8;const n=ND.wrapPointer(i,ND.b2Vec2);return s.Set(n,t.length),ND._free(i),s}};const WD=["fixed","variable"];self.POs=class extends self.gJ{constructor(){super()}set sDs(t){DD.he(t),BD.Mgs(t)}get sDs(){return BD.Qgs()}set iDs(t){const s=WD.indexOf(t);if(s<0)throw new Error("invalid stepping mode");BD.LOs(WD[s])}get iDs(){return WD[BD.kOs()]}set eDs(t){DD.he(t),BD.$Os(t)}get eDs(){return BD.WOs()}set nDs(t){DD.he(t),BD.jOs(t)}get nDs(){return BD.VOs()}rDs(t,s,i){const e=BD.l$(),n=e.B$(t),r=e.B$(s);i=!!i,BD.YOs(n,r,i)}}}{const jD=self._s;jD.yut.wOs.dEt=class extends jD.iAt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{let VD=function(t,s){return pF.get(t).l$().DB(s)};UnwrapIWorldInstance=VD;const UD=self._s,HD=self.Ns,zD=self.oJ,JD=(self.assert,0),qD=1,YD=2,XD=3,KD=4,ZD=5,QD=6,tF=7,sF=8,iF=9,eF=new WeakMap,nF=new WeakMap,rF=new WeakMap,hF=-2147483648,oF=1073741824,aF=536870912,lF=3758096384,uF=UD.yut.wOs.ROs,cF=UD.yut.wOs.QOs,fF=UD.Hn(UD.Rect),dF=UD.Hn(UD.Pl);UD.yut.wOs.Instance=class extends UD.nAt{constructor(t,s){super(t);const i=this.lJ(),e=this.kB();this.hDs=i.OOs(),this.SOs=i.DOs(),this.bOs=i.FOs(),this.oDs=!1,this.aDs=0,this.lDs=0,this.uDs=!1,this.cDs=1,this.fDs=.5,this.dDs=.2,this.pDs=0,this.mDs=.01,this.gDs=!1,this.Obt=!0,this.yDs=null,this.wDs=[],this.SDs=[],this.vDs=[],this.bDs=new Set,this.MDs=e.YM(),this.CDs=e.ZM(),this.TDs=e.Dj(),this.oMs=0,this.aMs=0,this.xDs=!1,s&&(this.oDs=!!s[JD],this.aDs=s[qD],this.uDs=!!s[YD],this.cDs=s[XD],this.fDs=s[KD],this.dDs=s[ZD],this.pDs=s[QD],this.mDs=s[tF],this.gDs=!!s[sF],this.Obt=!!s[iF]);const n=this.Bc.Sf();this.Kf=new UD.qf(UD.jf.Jf(n,"instancedestroy",t=>this.l8t(t.dJ)),UD.jf.Jf(n,"beforeload",()=>this.f6()),UD.jf.Jf(n,"afterload",()=>this.p6())),nF.set(this.di,this),this.Obt&&this.rPt()}oAt(){this.IDs()}zn(){this._Ds(),UD.bh(this.vDs),this.bDs.clear(),this.yDs&&(this.GDs(),this.SOs.DestroyBody(this.yDs),this.yDs=null),super.zn()}PDs(t){if(!this.yDs)return;const s=this.yDs.CreateFixture(t);return this.wDs.push(s),s}GDs(){if(this.yDs){for(const t of this.wDs)this.yDs.DestroyFixture(t);UD.bh(this.wDs)}}ADs(){const t=this.kB();return t.zz()?(t.NH(fF,dF,!1),dF):t.WH()}RDs(t){this.hDs.destroy(t)}IDs(){if(!this.Obt)return;const t=this.hDs.b2FixtureDef,s=this.hDs.b2BodyDef,i=this.kB(),e=i.lLt();if(this.lDs=this.aDs,e||this.di.HOt()||0!==this.lDs||(this.lDs=1),!this.yDs){const t=new s;t.set_type(this.oDs?0:2);let e=i.YM()*this.bOs,n=i.ZM()*this.bOs;if(2===this.lDs){const t=this.ADs();e=t.ol()*this.bOs,n=t.al()*this.bOs}t.set_position(cF(e,n)),t.set_angle(i.Dj()),t.set_fixedRotation(this.uDs),t.set_linearDamping(this.pDs),t.set_angularDamping(this.mDs),t.set_bullet(this.gDs),this.yDs=this.SOs.CreateBody(t),this.RDs(t),eF.set(this.yDs,this)}this.GDs();const n=new t;n.set_density(this.cDs),n.set_friction(this.fDs),n.set_restitution(this.dDs);const r=Math.max(Math.abs(i.Vg()),1),h=Math.max(Math.abs(i.Qg()),1);0===this.lDs?this.di.HOt()?this.EDs(n):this.ODs(n,r,h):1===this.lDs?this.DDs(n,i,r,h):this.FDs(n,r,h),this.oMs=i.Vg(),this.aMs=i.Qg(),i.dLt(!1),this.RDs(n)}DDs(t,s,i,e){const n=new(0,this.hDs.b2PolygonShape),r=i*this.bOs,h=e*this.bOs;let o=s.GH(),a=s.RH();s.Vg()<0&&(o=1-o),s.Qg()<0&&(a=1-a);const l=(.5-o)*r,u=(.5-a)*h,c=UD.yut.wOs.IRt(l,u);n.SetAsBox(r/2,h/2,c,0),t.set_shape(n),this.PDs(t),this.RDs(n),UD.yut.wOs.ZOs(c)}FDs(t,s,i){const e=new(0,this.hDs.b2CircleShape);e.set_m_radius(Math.min(s,i)*this.bOs*.5),t.set_shape(e),this.PDs(t),this.RDs(e)}ODs(t,s,i){const e=this.kB(),n=e.Vg()<0,r=e.Qg()<0,h=this.bOs,o=e.fLt(n?-s:s,r?-i:i,0).pu(),a=o.length/2,l=[];for(let t=0;t<a;++t)l.push(UD.yut.wOs.IRt(o[2*t],o[2*t+1]));n!==r&&l.reverse();const u=UD.yut.wOs.LDs.kDs(l,s*i);for(const t of l)UD.yut.wOs.ZOs(t);if(u.length)for(const s of u){for(const t of s)t.set_x(t.get_x()*h),t.set_y(t.get_y()*h);const i=UD.yut.wOs.tDs(s);t.set_shape(i),this.PDs(t),this.RDs(i);for(const t of s)UD.yut.wOs.ZOs(t)}else this.DDs(t,e,s,i)}EDs(t){const s=this.bOs,i=UD.yut.wOs.IRt,e=UD.yut.wOs.ZOs,n=[];this.di.iJ().jMs(n);const r=[];for(let h=0,o=n.length;h<o;++h){const o=n[h],a=o.xNt(),l=o.INt();if(l){let n=rF.get(l);if(!n){const t=l.pu(),s=l.mu();for(let e=0;e<s;++e)r.push(i(t[2*e],t[2*e+1]));const h=o.sTs()&lF;(h===hF||h===oF||h===aF||h&hF&&h&oF&&h&aF)&&r.reverse(),n=UD.yut.wOs.LDs.kDs(r,a.width()*a.height()),rF.set(l,n);for(const t of r)e(t);UD.bh(r)}for(let h=0,o=n.length;h<o;++h){const o=n[h];for(let t=0,e=o.length;t<e;++t)r.push(i((a.Qa()+o[t].get_x())*s,(a.tl()+o[t].get_y())*s));const l=UD.yut.wOs.tDs(r);t.set_shape(l),this.PDs(t),this.RDs(l);for(const t of r)e(t);UD.bh(r)}}else{r.push(i(a.Qa()*s,a.tl()*s)),r.push(i(a.sl()*s,a.tl()*s)),r.push(i(a.sl()*s,a.il()*s)),r.push(i(a.Qa()*s,a.il()*s));const e=UD.yut.wOs.tDs(r);t.set_shape(e),this.PDs(t),this.RDs(e)}for(const t of r)e(t);UD.bh(r)}}NDs(){this.yDs&&(this._Ds(),eF.delete(this.yDs),this.GDs(),this.SOs.DestroyBody(this.yDs),this.yDs=null)}_Ds(){for(const t of this.SDs)this.SOs.DestroyJoint(t);UD.bh(this.SDs)}BDs(){for(const t of this.vDs)switch(t.type){case 0:this.$Ds(...t.WDs);break;case 1:this.jDs(...t.WDs);break;case 2:this.VDs(...t.WDs);break;case 3:this.UDs(...t.WDs)}}HDs(t){const s=this.kB();if(-1===t)return[s.YM(),s.ZM()];if(0===t&&this.yDs){const t=this.yDs.GetWorldCenter();return[t.get_x()/this.bOs,t.get_y()/this.bOs]}return this.di.pxt(t)}zDs(t,s,i,e,n){if(!this.Obt||!s||s===this.di)return;const r=UD.yut.wOs.Instance.zOs(s);r&&r.EIt()&&(this.vDs.push({type:0,WDs:[t,s.xU(),i,e,n]}),this.$Ds(t,s.xU(),i,e,n))}$Ds(t,s,i,e,n){if(!this.Obt)return;const r=this.Bc.AB(s);if(!r||r===this.di)return;const h=UD.yut.wOs.Instance.zOs(r);if(!h||!h.EIt())return;h.bDs.add(this.di),this.JDs(!1),h.JDs(!1);const[o,a]=this.HDs(t),[l,u]=r.pxt(i),c=o-l,f=a-u,d=this.hDs.b2DistanceJointDef,p=this.bOs,m=new d;m.Initialize(this.yDs,h.JOs(),uF(o*p,a*p),cF(l*p,u*p)),m.set_length(Math.hypot(c,f)*p),m.set_dampingRatio(e),m.set_frequencyHz(n),this.SDs.push(this.SOs.CreateJoint(m)),this.RDs(m)}qDs(t,s){if(!this.Obt||!s||s===this.di)return;const i=UD.yut.wOs.Instance.zOs(s);i&&i.EIt()&&(this.vDs.push({type:1,WDs:[t,s.xU()]}),this.jDs(t,s.xU()))}jDs(t,s){if(!this.Obt)return;const i=this.Bc.AB(s);if(!i||i===this.di)return;const e=UD.yut.wOs.Instance.zOs(i);if(!e||!e.EIt())return;e.bDs.add(this.di),this.JDs(!1),e.JDs(!1);const[n,r]=this.HDs(t),h=this.hDs.b2RevoluteJointDef,o=this.bOs,a=new h;a.Initialize(this.yDs,e.JOs(),uF(n*o,r*o)),this.SDs.push(this.SOs.CreateJoint(a)),this.RDs(a)}YDs(t,s,i,e){if(!this.Obt||!s||s===this.di)return;const n=UD.yut.wOs.Instance.zOs(s);n&&n.EIt()&&(i=UD.tr(i),e=UD.tr(e),this.vDs.push({type:2,WDs:[t,s.xU(),i,e]}),this.VDs(t,s.xU(),i,e))}VDs(t,s,i,e){if(!this.Obt)return;const n=this.Bc.AB(s);if(!n||n===this.di)return;const r=UD.yut.wOs.Instance.zOs(n);if(!r||!r.EIt())return;r.bDs.add(this.di),this.JDs(!1),r.JDs(!1);const[h,o]=this.HDs(t),a=this.hDs.b2RevoluteJointDef,l=this.bOs,u=new a;u.Initialize(this.yDs,r.JOs(),uF(h*l,o*l)),u.set_enableLimit(!0),u.set_lowerAngle(UD.Qn(i)),u.set_upperAngle(UD.Qn(e)),this.SDs.push(this.SOs.CreateJoint(u)),this.RDs(u)}XDs(t,s,i,e,n,r,h,o,a){if(!this.Obt||!s||s===this.di)return;const l=UD.yut.wOs.Instance.zOs(s);l&&l.EIt()&&(i=UD.tr(i),o=UD.tr(o),this.vDs.push({type:3,WDs:[t,s.xU(),i,e,n,r,h,o,a]}),this.UDs(t,s.xU(),i,e,n,r,h,o,a))}UDs(t,s,i,e,n,r,h,o,a){if(!this.Obt)return;const l=this.Bc.AB(s);if(!l||l===this.di)return;const u=UD.yut.wOs.Instance.zOs(l);if(!u||!u.EIt())return;u.bDs.add(this.di),this.JDs(!1),u.JDs(!1);const[c,f]=this.HDs(t);i=UD.Qn(i);const d=Math.cos(i),p=Math.sin(i),m=this.hDs.b2PrismaticJointDef,g=this.bOs,y=new m;y.Initialize(this.yDs,u.JOs(),uF(c*g,f*g),cF(d,p)),y.set_enableLimit(!!e),y.set_lowerTranslation(n*g),y.set_upperTranslation(r*g),y.set_enableMotor(!!h),y.set_motorSpeed(UD.Qn(o)),y.set_maxMotorForce(a),this.SDs.push(this.SOs.CreateJoint(y)),this.RDs(y)}KDs(){this.Obt&&(this._Ds(),UD.bh(this.vDs),this.bDs.clear())}ZDs(){for(const t of this.bDs){const s=UD.yut.wOs.Instance.zOs(t);if(!s||!s.EIt())return;s.QDs(this.di)}this.bDs.clear()}l8t(t){this.QDs(t)}QDs(t){const s=t.xU();let i=0;for(let t=0,e=this.vDs.length;t<e;++t)this.vDs[i]=this.vDs[t],i<this.SDs.length&&(this.SDs[i]=this.SDs[t]),this.vDs[t].WDs[1]===s?t<this.SDs.length&&this.SOs.DestroyJoint(this.SDs[t]):++i;UD.Sh(this.vDs,i),i<this.SDs.length&&UD.Sh(this.SDs,i),this.bDs.delete(t)}JOs(){return this.yDs}static EOs(t){return eF.get(t)||null}static zOs(t){return nF.get(t)||null}aC(){const t={e:this.Obt,im:this.oDs,pr:this.uDs,d:this.cDs,fr:this.fDs,re:this.dDs,ld:this.pDs,ad:this.mDs,b:this.gDs,mcj:this.vDs};if(this.Obt){const s=this.yDs.GetLinearVelocity();t.vx=s.get_x(),t.vy=s.get_y(),t.om=this.yDs.GetAngularVelocity()}return t}f6(){this._Ds(),UD.bh(this.vDs),this.bDs.clear()}lC(t){this.NDs(),this.Obt=t.e,t.hasOwnProperty("im")&&(this.oDs=!!t.im),this.uDs=t.pr,this.cDs=t.d,this.fDs=t.fr,this.dDs=t.re,this.pDs=t.ld,this.mDs=t.ad,this.gDs=t.b,this.vDs=t.mcj;const s=this.kB();this.MDs=s.YM(),this.CDs=s.ZM(),this.TDs=s.Dj(),this.oMs=s.Vg(),this.aMs=s.Qg(),this.Obt&&(this.IDs(),this.yDs.SetLinearVelocity(uF(t.vx,t.vy)),this.yDs.SetAngularVelocity(t.om),0===t.vx&&0===t.vy&&0===t.om||this.yDs.SetAwake(!0),this.vDs=t.mcj),this.Obt?this.rPt():this.VGt()}p6(){this.Obt&&this.BDs()}c7(){if(!this.Obt)return;const t=this.Bc,s=this.lJ();let i=0;0===s.kOs()?i=t.WN()/60:(i=t.RN(this.di),i>1/30&&(i=1/30));const e=t.Rzt();e>s.BOs()&&t.WN()>0&&(0!==i&&this.SOs.Step(i,s.WOs(),s.VOs()),this.SOs.ClearForces(),s.NOs(e)),this.JDs(!0)}JDs(t){const s=this.di.kB(),i=this.bOs;(s.Vg()!==this.oMs||s.Qg()!==this.aMs||s.SLt())&&this.IDs();const e=this.yDs,n=s.YM(),r=s.ZM(),h=n-this.MDs,o=r-this.CDs,a=Math.abs(h)>.001||Math.abs(o)>.001,l=s.Dj()!==this.TDs;let u=n,c=r;if(2===this.lDs){const t=this.ADs();u=t.ol(),c=t.al()}a?(l?e.SetTransform(uF(u*i,c*i),s.Dj()):e.SetTransform(uF(u*i,c*i),e.GetAngle()),t&&(e.SetLinearVelocity(uF(h,o)),this.xDs=!0),e.SetAwake(!0)):t&&this.xDs&&(this.xDs=!1,e.SetLinearVelocity(uF(0,0)),e.SetTransform(uF(u*i,c*i),e.GetAngle())),!a&&l&&(e.SetTransform(e.GetPosition(),s.Dj()),e.SetAwake(!0));const f=e.GetPosition(),d=f.get_x()/i,p=f.get_y()/i,m=e.GetAngle();if((d!==s.YM()||p!==s.ZM()||m!==s.Dj())&&(s.TH(d,p),s.Oj(m),s.CH(),2===this.lDs)){const t=this.ADs(),i=t.ol()-s.YM(),e=t.al()-s.ZM();0===i&&0===e||(s.IH(-i,-e),s.CH())}this.MDs=s.YM(),this.CDs=s.ZM(),this.TDs=s.Dj()}sot(t){switch(t){case YD:return this.tFs();case XD:return this.sFs();case KD:return this.iFs();case ZD:return this.eFs();case QD:return this.nFs();case tF:return this.rFs();case sF:return this.hFs();case iF:return this.EIt()}}oot(t,s){switch(t){case YD:this.oFs(s);break;case XD:this.aFs(s);break;case KD:this.lFs(s);break;case ZD:this.uFs(s);break;case QD:this.cFs(s);break;case tF:this.fFs(s);break;case sF:this.dFs(s);break;case iF:this.AIt(s)}}AIt(t){t=!!t,this.Obt&&!t?(this.ZDs(),this.NDs(),this.Obt=!1,this.VGt()):!this.Obt&&t&&(this.Obt=!0,this.IDs(),this.rPt())}EIt(){return this.Obt}lPt(){const t="behaviors.physics",s=[{name:t+".properties.enabled.name",value:this.EIt(),N2t:t=>this.AIt(t)},{name:t+".properties.immovable.name",value:this.pFs(),N2t:t=>this.mFs(t)},{name:t+".properties.density.name",value:this.sFs(),N2t:t=>this.aFs(t)},{name:t+".properties.friction.name",value:this.iFs(),N2t:t=>this.lFs(t)},{name:t+".properties.elasticity.name",value:this.eFs(),N2t:t=>this.uFs(t)},{name:t+".properties.linear-damping.name",value:this.nFs(),N2t:t=>this.cFs(t)},{name:t+".properties.angular-damping.name",value:this.rFs(),N2t:t=>this.fFs(t)}];return this.Obt&&(s.push({name:t+".debugger.is-sleeping",value:!this.gFs()}),s.push({name:t+".debugger.velocity-x",value:this.yFs(),N2t:t=>this.wFs(t,this.SFs())}),s.push({name:t+".debugger.velocity-y",value:this.SFs(),N2t:t=>this.wFs(this.yFs(),t)}),s.push({name:t+".debugger.angular-velocity",value:UD.tr(this.vFs()),N2t:t=>this.bFs(UD.Qn(t))}),s.push({name:t+".debugger.mass",value:this.MFs()})),[{title:"$"+this.fJ().Ac(),properties:s}]}CFs(t,s,i){const[e,n]=this.HDs(i);this.TFs(t,s,e,n)}xFs(t,s,i,e){const[n,r]=this.HDs(e),h=UD.rr(n,r,s,i);this.TFs(Math.cos(h)*t,Math.sin(h)*t,n,r)}IFs(t,s,i){const[e,n]=this.HDs(i);this.TFs(Math.cos(s)*t,Math.sin(s)*t,e,n)}TFs(t,s,i,e){if(!this.Obt)return;const n=this.bOs;this.yDs.ApplyForce(uF(t,s),cF(i*n,e*n),!0)}_Fs(t,s,i){const[e,n]=this.HDs(i);this.GFs(t,s,e,n)}PFs(t,s,i,e){const[n,r]=this.HDs(e),h=UD.rr(n,r,s,i);this.GFs(Math.cos(h)*t,Math.sin(h)*t,n,r)}AFs(t,s,i){const[e,n]=this.HDs(i);this.GFs(Math.cos(s)*t,Math.sin(s)*t,e,n)}GFs(t,s,i,e){if(!this.Obt)return;const n=this.bOs;this.yDs.ApplyLinearImpulse(uF(t,s),cF(i*n,e*n),!0);const r=this.kB();this.MDs=r.YM(),this.CDs=r.ZM(),this.xDs=!1}RFs(t){this.Obt&&this.yDs.ApplyTorque(t,!0)}EFs(t,s){const i=UD.lr(this.kB().Dj(),s)?-1:1;this.RFs(t*i)}OFs(t,s,i){const e=this.kB(),n=UD.rr(e.YM(),e.ZM(),s,i),r=UD.lr(e.Dj(),n)?-1:1;this.RFs(t*r)}bFs(t){this.Obt&&(this.yDs.SetAngularVelocity(t),this.yDs.SetAwake(!0))}vFs(){return this.Obt?this.yDs.GetAngularVelocity():0}wFs(t,s){if(!this.Obt)return;const i=this.bOs;this.yDs.SetLinearVelocity(uF(t*i,s*i)),this.yDs.SetAwake(!0);const e=this.kB();this.MDs=e.YM(),this.CDs=e.ZM(),this.xDs=!1}DFs(){if(!this.Obt)return[0,0];const t=this.bOs,s=this.yDs.GetLinearVelocity();return[s.get_x()/t,s.get_y()/t]}yFs(){return this.Obt?this.yDs.GetLinearVelocity().get_x()/this.bOs:0}SFs(){return this.Obt?this.yDs.GetLinearVelocity().get_y()/this.bOs:0}FFs(t,s){if(!this.Obt)return;const i=this.bOs;this.yDs.SetTransform(uF(t*i,s*i),this.yDs.GetAngle());const e=this.kB();e.TH(t,s),e.CH(),this.MDs=e.YM(),this.CDs=e.ZM()}aFs(t){if(this.Obt&&this.cDs!==t){this.cDs=t;for(const s of this.wDs)s.SetDensity(t);this.yDs.ResetMassData()}}sFs(){return this.Obt?this.cDs:0}lFs(t){if(this.Obt&&this.fDs!==t){this.fDs=t;for(const s of this.wDs)s.SetFriction(t);if(this.yDs)for(let t=this.yDs.GetContactList();this.hDs.getPointer(t);t=t.get_next()){const s=t.get_contact();s&&s.ResetFriction()}}}iFs(){return this.Obt?this.fDs:0}uFs(t){if(this.Obt&&this.dDs!==t){this.dDs=t;for(const s of this.wDs)s.SetRestitution(t)}}eFs(){return this.Obt?this.dDs:0}cFs(t){this.Obt&&this.pDs!==t&&(this.pDs=t,this.yDs.SetLinearDamping(t))}nFs(){return this.Obt?this.pDs:0}fFs(t){this.Obt&&this.mDs!==t&&(this.mDs=t,this.yDs.SetAngularDamping(t))}rFs(){return this.Obt?this.mDs:0}mFs(t){this.Obt&&(t=!!t,this.oDs!==t&&(this.oDs=t,this.yDs.SetType(this.oDs?0:2),this.yDs.SetAwake(!0)))}pFs(){return this.oDs}oFs(t){this.Obt&&(t=!!t,this.uDs!==t&&(this.uDs=t,this.yDs.SetFixedRotation(this.uDs),this.yDs.SetAngularVelocity(0),this.yDs.SetAwake(!0)))}tFs(){return this.uDs}dFs(t){this.Obt&&(t=!!t,this.gDs!==t&&(this.gDs=t,this.yDs.SetBullet(this.gDs),this.yDs.SetAwake(!0)))}hFs(){return this.gDs}kFs(t){this.Obt&&this.yDs.SetAwake(!!t)}gFs(){return!!this.Obt&&this.yDs.IsAwake()}MFs(){return this.Obt?this.yDs.GetMass()/this.bOs:0}LFs(){return this.Obt?this.yDs.GetWorldCenter().get_x()/this.bOs:0}NFs(){return this.Obt?this.yDs.GetWorldCenter().get_y()/this.bOs:0}BFs(){if(!this.Obt)return[0,0];const t=this.yDs.GetWorldCenter(),s=this.bOs;return[t.get_x()/s,t.get_y()/s]}$Fs(){if(!this.Obt)return 0;let t=0;for(let s=this.yDs.GetContactList();this.hDs.getPointer(s);s=s.get_next()){const i=s.get_contact();i&&(t+=i.GetManifold().get_pointCount())}return t}WFs(t){if(t=Math.floor(t),!this.Obt)return[0,0];let s=0;for(let i=this.yDs.GetContactList();this.hDs.getPointer(i);i=i.get_next()){const e=i.get_contact();if(!e)continue;const n=e.GetManifold().get_pointCount();if(t>=s&&t<s+n){const i=t-s,n=this.lJ().XOs();e.GetWorldManifold(n);const r=n.get_points(i);return[r.get_x()/this.bOs,r.get_y()/this.bOs]}s+=n}return[0,0]}bGt(){return self.jFs}};const pF=new WeakMap;self.jFs=class extends zD{constructor(){super(),pF.set(this,zD.mU().iJ())}get isEnabled(){return pF.get(this).EIt()}set isEnabled(t){pF.get(this).AIt(t)}VFs(t,s,i=0){HD.he(t),HD.he(s),pF.get(this).CFs(t,s,i)}UFs(t,s,i,e=0){HD.he(t),HD.he(s),HD.he(i),pF.get(this).xFs(t,s,i,e)}HFs(t,s,i=0){HD.he(t),HD.he(s),pF.get(this).IFs(t,s,i)}zFs(t,s,i=0){HD.he(t),HD.he(s),pF.get(this)._Fs(t,s,i)}JFs(t,s,i,e=0){HD.he(t),HD.he(s),HD.he(i),pF.get(this).PFs(t,s,i,e)}qFs(t,s,i=0){HD.he(t),HD.he(s),pF.get(this).AFs(t,s,i)}YFs(t){HD.he(t),pF.get(this).RFs(t)}XFs(t,s){HD.he(t),HD.he(s),pF.get(this).EFs(t,s)}KFs(t,s,i){HD.he(t),HD.he(s),HD.he(i),pF.get(this).OFs(t,s,i)}set angularVelocity(t){HD.he(t),pF.get(this).bFs(t)}get angularVelocity(){return pF.get(this).vFs()}setVelocity(t,s){HD.he(t),HD.he(s),pF.get(this).wFs(t,s)}ZFs(){return pF.get(this).yFs()}QFs(){return pF.get(this).SFs()}tks(){return pF.get(this).DFs()}sks(t,s){HD.he(t),HD.he(s),pF.get(this).FFs(t,s)}set iks(t){HD.he(t),pF.get(this).aFs(t)}get iks(){return pF.get(this).sFs()}set eks(t){HD.he(t),pF.get(this).lFs(t)}get eks(){return pF.get(this).iFs()}set nks(t){HD.he(t),pF.get(this).uFs(t)}get nks(){return pF.get(this).eFs()}set rks(t){HD.he(t),pF.get(this).cFs(t)}get rks(){return pF.get(this).nFs()}set hks(t){HD.he(t),pF.get(this).fFs(t)}get hks(){return pF.get(this).rFs()}set oks(t){pF.get(this).mFs(t)}get oks(){return pF.get(this).pFs()}set aks(t){pF.get(this).oFs(t)}get aks(){return pF.get(this).tFs()}set lks(t){pF.get(this).dFs(t)}get lks(){return pF.get(this).hFs()}get uks(){return pF.get(this).MFs()}cks(){return pF.get(this).LFs()}fks(){return pF.get(this).NFs()}dks(){return pF.get(this).BFs()}pks(){return pF.get(this).$Fs()}mks(t){return HD.he(t),pF.get(this).WFs(t)[0]}gks(t){return HD.he(t),pF.get(this).WFs(t)[1]}yks(t){return HD.he(t),pF.get(this).WFs(t)}set wks(t){pF.get(this).kFs(!!t)}get wks(){return pF.get(this).gFs()}get Sks(){return!pF.get(this).gFs()}vks(t,s,i,e,n){HD.he(e),HD.he(n);const r=VD(this,s);pF.get(this).zDs(t,r,i,e,n)}bks(t,s){const i=VD(this,s);pF.get(this).qDs(t,i)}Mks(t,s,i,e){HD.he(i),HD.he(e);const n=VD(this,s);pF.get(this).YDs(t,n,i,e)}Cks(t,s,i,e,n,r,h,o,a){const l=VD(this,s);pF.get(this).XDs(t,l,i,e,n,r,h,o,a)}Tks(){pF.get(this).KDs()}}}{const mF=self._s;mF.yut.wOs.t$={xks(){return!this.gFs()},Iks(){return this.pFs()},_ks(t,s,i){if(!this.Obt)return!1;let e=0;if(0===t)e=this.yFs();else if(1===t)e=this.SFs();else{const[t,s]=this.DFs();e=Math.hypot(t,s)}return mF.compare(e,s,i)},Gks(t,s){if(!this.Obt)return!1;const i=mF.tr(this.vFs());return mF.compare(i,t,s)},Pks(t,s){if(!this.Obt)return!1;const i=this.MFs();return mF.compare(i,t,s)},_u(){return this.EIt()}}}{const gF=self._s;gF.yut.wOs.wht={Aks(t,s,i){this.CFs(t,s,i)},Rks(t,s,i,e){this.xFs(t,s,i,e)},Eks(t,s,i){this.IFs(t,gF.Qn(s),i)},Oks(t,s,i){this._Fs(t,s,i)},Dks(t,s,i,e){this.PFs(t,s,i,e)},Fks(t,s,i){this.AFs(t,gF.Qn(s),i)},kks(t){this.RFs(gF.Qn(t))},Lks(t,s){this.EFs(gF.Qn(t),gF.Qn(s))},Nks(t,s,i){this.OFs(gF.Qn(t),s,i)},Bks(t){this.bFs(gF.Qn(t))},$ks(t,s,i,e,n){if(!s)return;const r=s.Hxt(this.di);this.zDs(t,r,i,e,n)},Wks(t,s){if(!s)return;const i=s.Hxt(this.di);this.qDs(t,i)},jks(t,s,i,e){if(!s)return;const n=s.Hxt(this.di);this.YDs(t,n,gF.Qn(i),gF.Qn(e))},Vks(t,s,i,e,n,r,h,o,a){if(!s)return;const l=s.Hxt(this.di);this.XDs(t,l,gF.Qn(i),e,n,r,h,gF.Qn(o),a)},Uks(){this.KDs()},Hks(t){this.lJ().Mgs(t)},LOs(t){this.lJ().LOs(t)},UOs(t,s){this.lJ().UOs(t,s)},zks(t,s){this.wFs(t,s)},Jks(t,s){this.FFs(t,s)},qks(t){this.aFs(t)},Yks(t){this.lFs(t)},Xks(t){this.uFs(t)},Kks(t){this.cFs(t)},Zks(t){this.fFs(t)},Qks(t){this.mFs(t)},tLs(t,s){this.lJ().YOs(this.fU(),t,0!==s)},sLs(t){this.oFs(0!==t)},iLs(t){this.dFs(0!==t)},eLs(t){this.kFs(!!t)},G_t(t){this.AIt(0!==t)}}}{const yF=self._s;yF.yut.wOs.Sht={nLs(){return this.yFs()},rLs(){return this.SFs()},hLs(){return yF.tr(this.vFs())},oLs(){return this.MFs()},aLs(){return this.LFs()},lLs(){return this.NFs()},uLs(){return this.sFs()},cLs(){return this.iFs()},fLs(){return this.eFs()},dLs(){return this.nFs()},pLs(){return this.rFs()},mLs(){return this.$Fs()},gLs(t){return this.WFs(t)[0]},yLs(t){return this.WFs(t)[1]}}}{let wF=function(t){return CF(t.get_x(),t.get_y())},SF=function(t){const s=[];for(const i of t)i.length<=8?s.push(i):s.push.apply(s,vF(i));return s},vF=function(t){const s=[];s.push(t.splice(0,8));const i=s[0][0];let e=s[0][7];for(;t.length;){const n=t.splice(0,Math.min(t.length,6));let r=n.at(-1);n.push(wF(i)),n.push(wF(e)),s.push(n),e=r}return s};CloneVec2=wF,SplitConvexPolysOver8Points=SF,SplitConvexPoly=vF;const bF=self._s,MF={};bF.yut.wOs.LDs=MF;const CF=bF.yut.wOs.IRt,TF=bF.yut.wOs.ZOs;MF.wLs=function(t,s,i,e,n,r){return t*e+i*r+n*s-s*i-e*n-r*t},MF.SLs=function(t,s,i,e,n,r,h,o){const a=i-t,l=e-s,u=h-n,c=o-r,f=(u*(r-s)-c*(n-t))/(l*u-a*c),d=t+f*a,p=s+f*l,m=MF.vLs(i,e,t,s,d,p),g=MF.vLs(d,p,n,r,h,o);return m&&g?CF(d,p):null},MF.vLs=function(t,s,i,e,n,r){return(i+.1>=t&&t>=n-.1||i-.1<=t&&t<=n+.1)&&(e+.1>=s&&s>=r-.1||e-.1<=s&&s<=r+.1)&&MF.bLs(t,s,i,e,n,r)},MF.bLs=function(t,s,i,e,n,r){if(Math.abs(n-i)>.1){const h=(r-e)/(n-i)*(t-i)+e;return Math.abs(h-s)<.1}return Math.abs(t-i)<.1},MF.MLs=function(t,s,i,e){return Math.abs(i-t)<.1&&Math.abs(e-s)<.1},MF.kDs=function(t,s){if(3===t.length)return[t.map(t=>CF(t.get_x(),t.get_y()))];const i=MF.CLs(t);let e=[];for(let t=0,n=i.length;t<n;++t){const n=i[t],r=[];let h=0;for(let t=0,s=n.length;t<s;++t){const i=n[t],e=n[(t+1)%s];h+=i.get_x()*e.get_y()-i.get_y()*e.get_x(),r.push(CF(i.get_x(),i.get_y()))}if(h=Math.abs(h/2),h>=.001*s)e.push(r);else for(let t=0,s=r.length;t<s;t++)TF(r[t])}return e=SF(e),e},MF.CLs=function(t){let s,i,e,n,r,h,o,a=[],l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=0,w=0,S=0,v=0,b=0,M=0,C=0,T=[],x=[],I=!1,_=[],G=[],P=!1;for(G.push(t);G.length;){for(a=G[0],u=a.length,I=!0,l=0;l<u;l++)if(y=l,w=l<u-1?l+1:l+1-u,S=l<u-2?l+2:l+2-u,s=a[y],i=a[w],e=a[S],f=MF.wLs(s.get_x(),s.get_y(),i.get_x(),i.get_y(),e.get_x(),e.get_y()),f<0){for(I=!1,g=1e9,c=0;c<u;c++)c!==y&&c!==w&&(v=c,b=c<u-1?c+1:0,n=a[v],r=a[b],h=MF.SLs(s.get_x(),s.get_y(),i.get_x(),i.get_y(),n.get_x(),n.get_y(),r.get_x(),r.get_y()),h&&(p=i.get_x()-h.get_x(),m=i.get_y()-h.get_y(),d=p*p+m*m,d<g?(C=v,M=b,o=h,g=d):TF(h)));if(1e9===g)return[];for(T=[],x=[],v=C,b=M,n=a[v],r=a[b],P=!1,MF.MLs(o.get_x(),o.get_y(),r.get_x(),r.get_y())||(T.push(o),P=!0),MF.MLs(o.get_x(),o.get_y(),n.get_x(),n.get_y())||(x.push(o),P=!0),P||TF(o),C=-1,M=y;;){if(M===b){if(C<0||C>=u)return[];MF.vLs(r.get_x(),r.get_y(),a[C].get_x(),a[C].get_y(),s.get_x(),s.get_y())||T.push(a[M]);break}T.push(a[M]),C=M,M-1<0?M=u-1:M--}for(T.reverse(),C=-1,M=w;;){if(M===v){if(C<0||C>=u)return[];M!==v||MF.vLs(n.get_x(),n.get_y(),a[C].get_x(),a[C].get_y(),i.get_x(),i.get_y())||x.push(a[M]);break}x.push(a[M]),C=M,M+1>u-1?M=0:M++}G.push(T,x),G.shift();break}I&&_.push(G.shift())}return _}}{const xF=self._s;xF.yut.TLs=class extends xF.KPt{constructor(t){super(t)}zn(){super.zn()}}}{const IF=self._s;IF.yut.TLs.dEt=class extends IF.iAt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{const _F=self._s,GF=self.Ns,PF=self.oJ,AF=0,RF=1,EF=2,OF=3,DF=4,FF=5,kF=6,LF=7,NF=.01,BF=10,$F=[];_F.yut.TLs.Instance=class extends _F.nAt{constructor(t,s){super(t),this.xLs=!1,this.ILs=!1,this.Q_s=!1,this.tGs=!1,this.rGs=!1,this._Ls=!1,this.GLs=!1,this.hGs=!1,this.oGs=!1,this.PLs=32,this.ALs=32,this.RLs=0,this.ELs=0,this.OLs=100,this.DLs=100,this.Obt=!0,this.FGs=!0,this.FLs=!1,s&&(this.PLs=s[0],this.ALs=s[1],this.RLs=s[2],this.ELs=s[3],this.OLs=s[4],this.DLs=s[5],this.Obt=s[6],this.FGs=s[7],this.FLs=s[8]),this.ttt=0,this.stt=0,this.kLs=0,this.LLs=0,this.mcs=NaN,this.gcs=NaN,this.NLs=NaN,this.BLs=NaN,this.$Ls=_F.Hn(_F.Rect),this.Kf=null,this.Obt&&this.rPt(),this.FGs&&this.LGs(),this.WLs()}zn(){this.BGs(),super.zn()}LGs(){if(this.Kf)return;const t=this.Bc.Sf();this.Kf=new _F.qf(_F.jf.Jf(t,"keydown",t=>this.als(t.data)),_F.jf.Jf(t,"keyup",t=>this.lls(t.data)),_F.jf.Jf(t,"window-blur",()=>this.uls()),_F.jf.Jf(t,"keyboard-blur",()=>this.uls()))}BGs(){this.Kf&&(this.Kf.zn(),this.Kf=null)}als(t){switch(t.key){case"ArrowLeft":this.Q_s=!0;break;case"ArrowUp":this.xLs=!0;break;case"ArrowRight":this.tGs=!0;break;case"ArrowDown":this.ILs=!0}}lls(t){switch(t.key){case"ArrowLeft":this.Q_s=!1;break;case"ArrowUp":this.xLs=!1;break;case"ArrowRight":this.tGs=!1;break;case"ArrowDown":this.ILs=!1}}uls(){this.xLs=!1,this.ILs=!1,this.Q_s=!1,this.tGs=!1}jLs(){this.mcs=NaN,this.gcs=NaN,this.NLs=NaN,this.BLs=NaN}aC(){return{gw:this.PLs,gh:this.ALs,ox:this.RLs,oy:this.ELs,sx:this.OLs,sy:this.DLs,x:this.ttt,y:this.stt,gx:this.kLs,gy:this.LLs,e:this.Obt,i:this.rGs,c:this.FGs}}lC(t){this.PLs=t.gw,this.ALs=t.gh,this.RLs=t.ox,this.ELs=t.oy,this.OLs=t.sx,this.DLs=t.sy,this.ttt=t.x,this.stt=t.y,this.kLs=t.gx,this.LLs=t.gy,this.Obt=!!t.e,this.rGs=!!t.i,this.FGs=!!t.c,this.Obt?this.rPt():(this.hGs=!1,this.oGs=!1,this._Ls=!1,this.GLs=!1,this.VGt()),this.FGs?this.LGs():this.BGs(),this.jLs()}VLs(){const t=this.kB();return[this.ttt-t.YM(),this.stt-t.ZM()]}dAs(){if(!this._u())return!1;const[t,s]=this.VLs();return Math.abs(t)>0&&0!==this.OLs||Math.abs(s)>0&&0!==this.DLs}ULs(t){if(!this._u())return!1;const[s,i]=this.VLs();return t<2&&0!==this.OLs?0===t?s>0:s<0:0!==this.DLs&&(2===t?i>0:i<0)}HLs(t,s){const i=this.kB(),e=i.YM(),n=i.ZM(),r=this.zLs(t,s);i.XM(r[0]),i.QM(r[1]),i.CH();const h=this.JLs();return i.XM(e),i.QM(n),i.CH(),!h}qLs(t,s){const i=this.kB(),e=i.YM(),n=i.ZM();let r=0,h=0;switch(t){case 0:r=1;break;case 1:r=-1;break;case 2:h=1;break;case 3:h=-1}(s=Math.floor(s))<0&&(r=-r,h=-h,s=-s);let o=this.YLs(e,n),a=this.XLs(e,n),l=null;for(let t=0;t<s;t++){o+=r,a+=h;const t=this.zLs(o,a);if(i.XM(t[0]),i.QM(t[1]),i.CH(),l=this.JLs(),l)break}return i.XM(e),i.QM(n),i.CH(),!l}xAs(t){this.rGs=!!t}KLs(){return this.FGs}TAs(t){if(this._u())switch(t){case 0:this.hGs=!0;break;case 1:this.oGs=!0;break;case 2:this._Ls=!0;break;case 3:this.GLs=!0}}ZLs(t,s){this.OLs=t,this.DLs=s}QLs(t,s,i){i=!!i,!this.tNs(t,s)&&i&&this.sNs()}iNs(t,s,i,e){this.PLs=t,this.ALs=s,this.RLs=i,this.ELs=e,this.eNs()}YLs(t,s){return this.FLs?this.nNs(t,s):(t-=this.RLs,t/=this.PLs,Math.round(t))}XLs(t,s){return this.FLs?this.rNs(t,s):(s-=this.ELs,s/=this.ALs,Math.round(s))}nNs(t,s){t-=this.RLs,s-=this.ELs;const i=((t/=this.PLs/2)+(s/=this.ALs/2))/2;return Math.round(i)}rNs(t,s){t-=this.RLs,s-=this.ELs,t/=this.PLs/2;const i=((s/=this.ALs/2)-t)/2;return Math.round(i)}hNs(t,s){const[i,e]=this.oNs(t,s);return[Math.round(i),Math.round(e)]}oNs(t,s){return this.FLs?this.aNs(t,s):(t-=this.RLs,s-=this.ELs,[t/=this.PLs,s/=this.ALs])}zLs(t,s){return this.FLs?this.lNs(t,s):(t*=this.PLs,s*=this.ALs,[t+=this.RLs,s+=this.ELs])}aNs(t,s){return t-=this.RLs,s-=this.ELs,[((t/=this.PLs/2)+(s/=this.ALs/2))/2,(s-t)/2]}lNs(t,s){let i=t-s,e=t+s;return i*=this.PLs/2,e*=this.ALs/2,i+=this.RLs,e+=this.ELs,[i,e]}tNs(t,s){const i=this.kB(),e=i.YM(),n=i.ZM(),r=this.zLs(t,s);i.XM(r[0]),i.QM(r[1]),i.CH();const h=this.JLs();return i.XM(e),i.QM(n),i.CH(),!!h||(this.kLs=t,this.LLs=s,this.ttt=r[0],this.stt=r[1],this.jLs(),!1)}sNs(){const t=this.kB();t.TH(this.ttt,this.stt),t.CH()}eNs(){const t=this.kB(),s=this.hNs(t.YM(),t.ZM()),i=this.zLs(s[0],s[1]);this.kLs=s[0],this.LLs=s[1],this.ttt=i[0],this.stt=i[1],this.jLs()}WLs(){this.eNs(),this.sNs()}uNs(){const t=this.kB().BH();this.$Ls.S(t);let s=NF,i=NF;const e=t.width(),n=t.height();if(e<NF+NF){const i=t.ol();s=0,t.Ya(i),t.Ja(i)}if(n<NF+NF){const s=t.al();i=0,t.Ya(s),t.Ja(s)}return this.$Ls.dl(s,i),this.$Ls}JLs(){const t=this.pJ();if(!t.kB().iz())return null;const s=this.Bc.RL(),i=this.uNs();s.ANt(null,i,$F);for(const e of $F)if(e!==t&&s.qkt(e,t)&&s.ONt(i,e))return _F.bh($F),e;return _F.bh($F),null}cNs(){const t=this.Bc.RL(),s=this.JLs();if(!s)return null;const i=this.kB(),e=i.YM(),n=i.ZM(),r=i.BH(),h=s.kB().BH(),o=Math.max(r.sl(),h.sl())-Math.min(r.Qa(),h.Qa()),a=Math.max(r.il(),h.il())-Math.min(r.tl(),h.tl());let l=r.width()+h.width()-o,u=r.height()+h.height()-a,c=!1;return l<u?(l>BF&&(c=!0),l=Math.min(l,BF),r.Qa()<h.Qa()?i.got(-l):i.got(l)):(u>BF&&(c=!0),u=Math.min(u,BF),r.tl()<h.tl()?i.yot(-u):i.yot(u)),i.CH(),this.JLs()&&(i.XM(e),i.QM(n),i.CH()),c&&t.wNt(this.di,s),this.eNs(),s}c7(){const t=this.Bc.RN(this.di),s=this.kB();let i=this.Q_s||this.hGs,e=this.tGs||this.oGs,n=this.xLs||this._Ls,r=this.ILs||this.GLs;if(this.hGs=!1,this.oGs=!1,this._Ls=!1,this.GLs=!1,!this._u())return;if(this.rGs&&(i=e=n=r=!1),n&&r&&(n=r=!1),i&&e&&(i=e=!1),this.cNs())return;if(0===t)return;const h=s.YM(),o=s.ZM(),a=t*this.OLs,l=t*this.DLs;let u=this.kLs,c=this.LLs,f=this.ttt-h,d=this.stt-o,p=Math.abs(f),m=Math.abs(d),g=0,y=0;if(p>0){const t=Math.sign(f),s=t<0&&i,n=t>0&&e;if(s||n)for(;!(!(p<a)||n&&this.tNs(++u,c)||s&&this.tNs(--u,c));)f=this.ttt-h,p=Math.abs(f);g=t*_F.Kn(p,0,a)}if(m>0){const t=Math.sign(d),s=t>0&&r,i=t<0&&n;if(s||i)for(;!(!(m<l)||s&&this.tNs(u,++c)||i&&this.tNs(u,--c));)d=this.stt-o,m=Math.abs(d);y=t*_F.Kn(m,0,l)}if(0!=g||0!=y)if(this.NLs=this.mcs,this.BLs=this.gcs,this.mcs=s.YM(),this.gcs=s.ZM(),this.mcs===this.NLs&&this.gcs===this.BLs)this.tNs(u-Math.sign(g),c-Math.sign(y));else if(Math.abs(this.mcs-this.NLs)>=this.PLs||Math.abs(this.gcs-this.BLs)>=this.ALs){const[t,s]=this.oNs(this.mcs,this.gcs);this.tNs(Math.floor(t)+(g>0?1:0),Math.floor(s)+(y>0?1:0))}else s.IH(g,y),s.CH(),this.cNs();else 0!==this.OLs&&(i?this.tNs(u-1,c):e&&this.tNs(u+1,c)),0!==this.DLs&&(i||e||!n?r&&this.tNs(u,c+1):this.tNs(u,c-1))}sot(t){switch(t){case AF:return this.PLs;case RF:return this.ALs;case EF:return this.RLs;case OF:return this.ELs;case DF:return this.OLs;case FF:return this.DLs;case kF:return this._u();case LF:return this.FGs}}oot(t,s){switch(t){case AF:this.PLs=s,this.eNs();break;case RF:this.ALs=s,this.eNs();break;case EF:this.RLs=s,this.eNs();break;case OF:this.ELs=s,this.eNs();break;case DF:this.OLs=s;break;case FF:this.DLs=s;break;case kF:this.G_t(s);break;case LF:this.$Ps(s)}}G_t(t){t=!!t,this.Obt!==t&&(this.Obt=t,this.Obt?this.rPt():(this.hGs=!1,this.oGs=!1,this._Ls=!1,this.GLs=!1,this.VGt()),this.jLs())}_u(){return this.Obt}$Ps(t){t=!!t,this.FGs!==t&&(this.FGs=t,this.FGs?this.LGs():(this.BGs(),this.uls()))}lPt(){const t="behaviors.tilemovement",s=this.kB(),i=this.oNs(s.YM(),s.ZM());return[{title:"$"+this.fJ().Ac(),properties:[{name:t+".debugger.grid-x",value:i[0],N2t:t=>{const e=this.zLs(t,i[1]);s.XM(e[0]),s.CH()}},{name:t+".debugger.grid-y",value:i[1],N2t:t=>{const e=this.zLs(i[0],t);s.QM(e[1]),s.CH()}},{name:t+".properties.grid-width.name",value:this.PLs,N2t:t=>{this.PLs=t,this.eNs()}},{name:t+".properties.grid-height.name",value:this.ALs,N2t:t=>{this.ALs=t,this.eNs()}},{name:t+".properties.grid-offset-x.name",value:this.RLs,N2t:t=>{this.RLs=t,this.eNs()}},{name:t+".properties.grid-offset-y.name",value:this.ELs,N2t:t=>{this.ELs=t,this.eNs()}},{name:t+".properties.speed-x.name",value:this.OLs,N2t:t=>this.OLs=t},{name:t+".properties.speed-y.name",value:this.DLs,N2t:t=>this.DLs=t},{name:t+".debugger.target-x",value:this.ttt,N2t:t=>{this.ttt=t;const s=this.hNs(this.ttt,this.stt);this.kLs=s[0],this.jLs()}},{name:t+".debugger.target-y",value:this.stt,N2t:t=>{this.stt=t;const s=this.hNs(this.ttt,this.stt);this.LLs=s[1],this.jLs()}},{name:t+".debugger.grid-target-x",value:this.kLs,N2t:t=>{this.kLs=t;const s=this.zLs(this.kLs,this.LLs);this.ttt=s[0]}},{name:t+".debugger.grid-target-y",value:this.LLs,N2t:t=>{this.LLs=t;const s=this.zLs(this.kLs,this.LLs);this.stt=s[1]}},{name:t+".properties.enabled.name",value:this._u(),N2t:t=>this.G_t(t)},{name:t+".properties.default-controls.name",value:this.FGs,N2t:t=>this.$Ps(t)}]}]}bGt(){return self.fNs}};const WF=new WeakMap;self.fNs=class extends PF{constructor(){super(),WF.set(this,PF.mU().iJ())}set fAs(t){WF.get(this).xAs(!!t)}get fAs(){return WF.get(this).rGs}JPs(t){GF.ue(t);let s=-1;switch(t){case"left":s=0;break;case"right":s=1;break;case"up":s=2;break;case"down":s=3;break;default:throw new Error(`Invalid direction ${t}`)}WF.get(this).TAs(s)}set isEnabled(t){WF.get(this).G_t(!!t)}get isEnabled(){return WF.get(this)._u()}get cAs(){return WF.get(this).KLs()}set cAs(t){WF.get(this).$Ps(!!t)}dNs(t,s){GF.he(t),GF.he(s),WF.get(this).ZLs(t,s)}pNs(){const t=WF.get(this);return[t.OLs,t.DLs]}mNs(t,s,i){GF.he(t),GF.he(s),WF.get(this).QLs(t,s,!!i)}gNs(){const t=WF.get(this),s=t.kB(),i=s.YM(),e=s.ZM();return[t.YLs(i,e),t.XLs(i,e)]}yNs(t,s,i,e){GF.he(t),GF.he(s),GF.he(i),GF.he(e),WF.get(this).iNs(t,s,i,e)}nAs(){return WF.get(this).dAs()}wNs(t){GF.ue(t);let s=-1;switch(t){case"right":s=0;break;case"left":s=1;break;case"down":s=2;break;case"up":s=3;break;default:throw new Error(`Invalid direction ${t}`)}return WF.get(this).ULs(s)}SNs(t,s){return GF.he(t),GF.he(s),WF.get(this).HLs(t,s)}vNs(t,s){GF.ue(t);let i=-1;switch(t){case"right":i=0;break;case"left":i=1;break;case"down":i=2;break;case"up":i=3;break;default:throw new Error(`invalid direction '${t}'`)}return WF.get(this).qLs(i,s)}bNs(){const t=WF.get(this);return[t.ttt,t.stt]}MNs(){const t=WF.get(this);return[t.kLs,t.LLs]}CNs(t,s){return GF.he(t),GF.he(s),WF.get(this).oNs(t,s)}TNs(t,s){return GF.he(t),GF.he(s),WF.get(this).zLs(t,s)}}}self._s.yut.TLs.t$={dAs(){return this.dAs()},ULs(t){return this.ULs(t)},_u(){return this.Obt},HLs(t,s){return this.HLs(t,s)},qLs(t,s){return this.qLs(t,s)}},self._s.yut.TLs.wht={xAs(t){this.xAs(t)},TAs(t){this.TAs(t)},G_t(t){this.G_t(t)},ZLs(t,s){this.ZLs(t,s)},QLs(t,s,i){this.QLs(t,s,i)},iNs(t,s,i,e){this.iNs(t,s,i,e)},OAs(t){this.$Ps(!!t)}},self._s.yut.TLs.Sht={xNs(){const t=this.kB();return this.YLs(t.YM(),t.ZM())},INs(){const t=this.kB();return this.XLs(t.YM(),t.ZM())},_Ns(){return this.OLs},GNs(){return this.DLs},PNs(){return this.ttt},ANs(){return this.stt},RNs(){return this.kLs},ENs(){return this.LLs}};{const jF=self._s;jF.yut.MAt=class extends jF.KPt{constructor(t){super(t)}zn(){super.zn()}}}{const VF=self._s;VF.yut.MAt.dEt=class extends VF.iAt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{const UF=self._s,HF=self.Ns,zF=self.oJ,JF=0,qF=1,YF=new Set;UF.yut.MAt.Instance=class extends UF.nAt{constructor(t,s){super(t),this.G_t(!0),s&&(this.G_t(s[JF]),this.rst(s[qF]))}zn(){super.zn()}G_t(t){this.di.YOt(!!t)}_u(){return this.di.qOt()}rst(t){const s=this.di.oTt();if(!t.trim())return void s.delete("solidTags");let i=s.get("solidTags");i||(i=new Set,s.set("solidTags",i)),i.clear();for(const s of t.split(" "))s&&i.add(s.toLowerCase())}yq(){return this.di.oTt().get("solidTags")||YF}ONs(){return[...this.yq()].join(" ")}aC(){return{e:this._u()}}lC(t){this.G_t(t.e)}sot(t){if(t===JF)return this._u()}oot(t,s){t===JF&&this.G_t(s)}lPt(){return[{title:"$"+this.fJ().Ac(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this._u(),N2t:t=>this.G_t(t)},{name:"behaviors.solid.properties.tags.name",value:this.ONs(),N2t:t=>this.rst(t)}]}]}bGt(){return self.DNs}};const XF=new WeakMap;self.DNs=class extends zF{constructor(){super(),XF.set(this,zF.mU().iJ())}set isEnabled(t){XF.get(this).G_t(!!t)}get isEnabled(){return XF.get(this)._u()}set tags(t){HF.ue(t),XF.get(this).rst(t)}get tags(){return XF.get(this).ONs()}}}self._s.yut.MAt.t$={_u(){return this._u()}},self._s.yut.MAt.wht={G_t(t){this.G_t(t)},rst(t){this.rst(t)}},self._s.yut.MAt.Sht={};{const KF=self._s;KF.yut.FNs=class extends KF.KPt{constructor(t){super(t)}zn(){super.zn()}}}{const ZF=self._s;ZF.yut.FNs.dEt=class extends ZF.iAt{constructor(t){super(t)}zn(){super.zn()}vGt(){}}}{const QF=self._s;QF.yut.FNs.Instance=class extends QF.nAt{constructor(t,s){super(t),this.kNs=null,this.LNs=-1,this.UTs="",this.NNs=new Set,this.BNs=0,this.$Ns=0,this.WNs=0,this.SGs=0,this.vGs=0,this.jNs=0,this.VNs=0,this.UNs=0,this.HNs=0,this.TDs=0,this.zNs=!1,s&&(this.zNs=s[0]);const i=this.Bc.Sf();this.Kf=new QF.qf(QF.jf.Jf(i,"instancedestroy",t=>this.l8t(t.dJ)),QF.jf.Jf(i,"afterload",t=>this.p6()))}zn(){this.kNs=null,super.zn()}JNs(t){t?(this.kNs=t,this.oPt()):(this.kNs=null,this.UGt())}qNs(t,s,i){if(!t)return;const e=t.Hxt(this.di);if(!e)return;this.UTs=s,this.JNs(e);const n=this.di.kB(),r=e.kB();if("properties"===this.UTs){const t=this.NNs;t.clear();for(const s of i)t.add(s);this.SGs=n.YM()-r.YM(),this.vGs=n.ZM()-r.ZM(),this.UNs=n.Dj()-r.Dj(),this.TDs=n.Dj(),this.HNs=n.tC()-r.tC(),t.has("x")&&t.has("y")&&(this.$Ns=QF.rr(r.YM(),r.ZM(),n.YM(),n.ZM())-r.Dj(),this.BNs=QF.er(r.YM(),r.ZM(),n.YM(),n.ZM())),t.has("width-abs")?this.jNs=n.Vg()-r.Vg():t.has("width-scale")&&(this.jNs=n.Vg()/r.Vg()),t.has("height-abs")?this.VNs=n.Qg()-r.Qg():t.has("height-scale")&&(this.VNs=n.Qg()/r.Qg())}else this.BNs=QF.er(r.YM(),r.ZM(),n.YM(),n.ZM())}aC(){const t=this.NNs,s=this.UTs,i={uid:this.kNs&&!this.kNs.SY()?this.kNs.xU():-1,m:s,d:this.zNs};return"rope"===s||"bar"===s?i.pd=this.BNs:"properties"===s&&(i.ps=[...this.NNs],t.has("imagepoint")?i.ip=this.WNs:t.has("x")&&t.has("y")?(i.pa=this.$Ns,i.pd=this.BNs):(t.has("x")&&(i.dx=this.SGs),t.has("y")&&(i.dy=this.vGs)),t.has("angle")&&(i.da=this.UNs,i.lka=this.TDs),(t.has("width-abs")||t.has("width-scale"))&&(i.dw=this.jNs),(t.has("height-abs")||t.has("height-scale"))&&(i.dh=this.VNs),t.has("z")&&(i.dz=this.HNs)),i}lC(t){const s=t.m,i=this.NNs;if(i.clear(),this.LNs=t.uid,"number"!=typeof s){if(this.UTs=s,t.hasOwnProperty("d")&&(this.zNs=!!t.d),"rope"===s||"bar"===s)this.BNs=t.pd;else if("properties"===s){for(const s of t.ps)i.add(s);i.has("imagepoint")?this.WNs=t.ip:i.has("x")&&i.has("y")?(this.$Ns=t.pa,this.BNs=t.pd):(i.has("x")&&(this.SGs=t.dx),i.has("y")&&(this.vGs=t.dy)),i.has("angle")&&(this.UNs=t.da,this.TDs=t.lka||0),(i.has("width-abs")||i.has("width-scale"))&&(this.jNs=t.dw),(i.has("height-abs")||i.has("height-scale"))&&(this.VNs=t.dh),i.has("z")&&(this.HNs=t.dz)}}else this.YNs(t)}YNs(t){const s=this.NNs,i=t.msa,e=t.tsa,n=t.pa,r=t.pd;switch(t.m){case 0:this.UTs="properties",s.add("x").add("y").add("angle"),this.$Ns=n,this.BNs=r,this.UNs=i-e,this.TDs=t.lka;break;case 1:this.UTs="properties",s.add("x").add("y"),this.$Ns=n,this.BNs=r;break;case 2:this.UTs="properties",s.add("angle"),this.UNs=i-e,this.TDs=t.lka;break;case 3:this.UTs="rope",this.BNs=t.pd;break;case 4:this.UTs="bar",this.BNs=t.pd}}p6(){-1===this.LNs?this.JNs(null):(this.JNs(this.Bc.AB(this.LNs)),this.LNs=-1)}l8t(t){this.kNs===t&&(this.JNs(null),this.zNs&&this.Bc.wU(this.di))}nPt(){const t=this.kNs;if(!t||t.SY())return;const s=t.kB(),i=this.di.kB(),e=this.UTs;let n=!1;if("rope"===e||"bar"===e){const t=QF.er(i.YM(),i.ZM(),s.YM(),s.ZM());if(t>this.BNs||"bar"===e&&t<this.BNs){const t=QF.rr(s.YM(),s.ZM(),i.YM(),i.ZM());i.TH(s.YM()+Math.cos(t)*this.BNs,s.ZM()+Math.sin(t)*this.BNs),n=!0}}else{const e=this.NNs;let r=0;if(e.has("imagepoint")){const[s,e]=t.pxt(this.WNs);i.fxt(s,e)||(i.TH(s,e),n=!0)}else if(e.has("x")&&e.has("y")){const t=s.YM()+Math.cos(s.Dj()+this.$Ns)*this.BNs,e=s.ZM()+Math.sin(s.Dj()+this.$Ns)*this.BNs;i.fxt(t,e)||(i.TH(t,e),n=!0)}else r=s.YM()+this.SGs,e.has("x")&&r!==i.YM()&&(i.XM(r),n=!0),r=s.ZM()+this.vGs,e.has("y")&&r!==i.ZM()&&(i.QM(r),n=!0);e.has("angle")&&(this.TDs!==i.Dj()&&(this.UNs=QF.Zn(this.UNs+(i.Dj()-this.TDs))),r=QF.Zn(s.Dj()+this.UNs),r!==i.Dj()&&(i.Oj(r),n=!0),this.TDs=i.Dj()),e.has("width-abs")&&(r=s.Vg()+this.jNs,r!==i.Vg()&&(i.Xg(r),n=!0)),e.has("width-scale")&&(r=s.Vg()*this.jNs,r!==i.Vg()&&(i.Xg(r),n=!0)),e.has("height-abs")&&(r=s.Qg()+this.VNs,r!==i.Qg()&&(i.Ug(r),n=!0)),e.has("height-scale")&&(r=s.Qg()*this.VNs,r!==i.Qg()&&(i.Ug(r),n=!0)),e.has("z")&&(r=s.tC()+this.HNs,r!==i.tC()&&(i.sC(r),this.Bc.VB()))}n&&i.CH()}lPt(){const t="behaviors.pin.debugger";return[{title:"$"+this.fJ().Ac(),properties:[{name:t+".is-pinned",value:!!this.kNs},{name:t+".pinned-uid",value:this.kNs?this.kNs.xU():0}]}]}}}self._s.yut.FNs.t$={XNs(){return!!this.kNs},KNs(){return this.zNs}},self._s.yut.FNs.wht={ZNs(t,s){this.qNs(t,0===s?"rope":"bar")},QNs(t,s,i,e,n,r,h){const o=[];s&&o.push("x"),i&&o.push("y"),e&&o.push("angle"),h&&o.push("z"),1===n?o.push("width-abs"):2===n&&o.push("width-scale"),1===r?o.push("height-abs"):2===r&&o.push("height-scale"),0!==o.length&&this.qNs(t,"properties",o)},tBs(t,s,i,e,n,r){const h=["imagepoint"];i&&h.push("angle"),r&&h.push("z"),1===e?h.push("width-abs"):2===e&&h.push("width-scale"),1===n?h.push("height-abs"):2===n&&h.push("height-scale"),this.WNs=s,this.qNs(t,"properties",h)},sBs(t){"rope"!==this.UTs&&"bar"!==this.UTs||(this.BNs=Math.max(t,0))},iBs(t){this.zNs=t},eBs(){this.JNs(null),this.UTs="",this.NNs.clear(),this.WNs=""},FNs(t,s){switch(s){case 0:this.qNs(t,"properties",["x","y","angle"]);break;case 1:this.qNs(t,"properties",["x","y"]);break;case 2:this.qNs(t,"properties",["angle"]);break;case 3:this.qNs(t,"rope");break;case 4:this.qNs(t,"bar")}}},self._s.yut.FNs.Sht={nBs(){return this.kNs?this.kNs.xU():-1}};{let tk=function(t){return"number"==typeof t?-t:t},sk=function(t,s){return"number"==typeof t&&"number"==typeof s},ik=function(t,s){return sk(t,s)?t+s:t},ek=function(t,s){return sk(t,s)?t-s:t},nk=function(t,s){return sk(t,s)?t*s:t},rk=function(t,s){return sk(t,s)?t/s:t},hk=function(t,s){return sk(t,s)?t%s:t},ok=function(t,s){return sk(t,s)?Math.pow(t,s):t},ak=function(t,s){if("string"==typeof t||"string"==typeof s){let i,e;return i="number"==typeof t?(Math.round(1e10*t)/1e10).toString():t,e="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,i+e}return t&&s?1:0},lk=function(t,s){return sk(t,s)?t||s?1:0:t};unaryminus=tk,bothNumbers=sk,add=ik,subtract=ek,multiply=nk,divide=rk,mod=hk,pow=ok,and=ak,or=lk;const uk=self._s;self.JMt=[()=>2,t=>{const s=t.eCt(0).CMt();return()=>s()},()=>"Custom Levels",()=>0,t=>{const s=t.eCt(0);return()=>s.PMt()},()=>"Editor",t=>{const s=t.eCt(0).CMt(),i=t.eCt(1).CMt(),e=t.eCt(2),n=t.eCt(3);return()=>s(i(e.PMt(n.PMt()),0,","))},t=>{const s=t.eCt(0).CMt(),i=t.eCt(1).CMt(),e=t.eCt(2),n=t.eCt(3);return()=>s(i(e.PMt(n.PMt()),1,","))},()=>"",t=>{const s=t.eCt(0).CMt(),i=t.eCt(1).CMt(),e=t.eCt(2),n=t.eCt(3);return()=>s(i(e.PMt(n.PMt(),1),0,","))},t=>{const s=t.eCt(0).CMt(),i=t.eCt(1).CMt(),e=t.eCt(2),n=t.eCt(3);return()=>s(i(e.PMt(n.PMt(),1),1,","))},t=>{const s=t.eCt(0),i=t.eCt(1);return()=>s.PMt(i.PMt(),2)},t=>{const s=t.eCt(0),i=t.eCt(1);return()=>s.PMt(i.PMt(),3)},t=>{const s=t.eCt(0),i=t.eCt(1);return()=>s.PMt(i.PMt(),4)},()=>1,()=>"Player",()=>"Environment",()=>"Goal",t=>{const s=t.eCt(0),i=t.eCt(1);return()=>s.PMt(i.PMt(),1)},t=>{const s=t.eCt(0),i=t.eCt(1);return()=>s.PMt(i.PMt(),6)},t=>{const s=t.eCt(0),i=t.eCt(1);return()=>s.PMt(i.PMt(),7)},()=>"Game",()=>"Blocks",()=>"Visuals",()=>"Laser Cannon",()=>"Laser",()=>16,()=>.1,t=>{const s=t.eCt(0);return()=>s.OMt()},()=>"shrinkToDestroy",()=>"Locked",()=>40,()=>"Sawblade",()=>.25,t=>{const s=t.eCt(0);return()=>s.FMt()},()=>"Paint Cannon",()=>"fire",()=>"Paint",()=>.75,()=>"Actuator",()=>"Actuator_on",()=>"Actuator_off",t=>{const s=t.eCt(0).CMt(),i=t.eCt(1),e=t.eCt(2);return()=>s(i.OMt(),e.PMt())},()=>"Laser Detector",()=>"Special Tags",t=>{const s=t.eCt(0).CMt(),i=t.eCt(1);return()=>s(i.OMt(),0,"_")},()=>"rotate",t=>{const s=t.eCt(0).CMt(),i=t.eCt(1);return()=>s(i.OMt(),1,"_")},()=>"cw",t=>{const s=t.eCt(0).CMt(),i=t.eCt(1).CMt(),e=t.eCt(2),n=t.eCt(3).CMt();return()=>s(i(e.OMt(),2,"_"))*n()},()=>"ccw",()=>1200,t=>{const s=t.eCt(0),i=t.eCt(1).CMt();return()=>s.PMt()+2500*i()},t=>{const s=t.eCt(0),i=t.eCt(1),e=t.eCt(2),n=t.eCt(3);return()=>uk.er(s.PMt(),i.PMt(),e.PMt(),n.PMt())-16},()=>"Block Initialization",()=>"block",()=>"Block Animations",()=>"Node",t=>{const s=t.eCt(0).CMt(),i=t.eCt(1),e=t.eCt(2),n=t.eCt(3);return()=>s(i.PMt(),e.PMt(),32,0,n.PMt())},()=>-1,t=>{const s=t.eCt(0).CMt(),i=t.eCt(1),e=t.eCt(2),n=t.eCt(3);return()=>s(i.PMt(),e.PMt(),-32,0,n.PMt())},t=>{const s=t.eCt(0).CMt(),i=t.eCt(1),e=t.eCt(2),n=t.eCt(3);return()=>s(i.PMt(),e.PMt(),0,-32,n.PMt())},t=>{const s=t.eCt(0).CMt(),i=t.eCt(1),e=t.eCt(2),n=t.eCt(3);return()=>s(i.PMt(),e.PMt(),0,32,n.PMt())},()=>"Mover",()=>"All",t=>{const s=t.eCt(0).CMt(),i=t.eCt(1),e=t.eCt(2),n=t.eCt(3),r=t.eCt(4);return()=>s(i.PMt(),e.PMt(),32,0,n.PMt(),r.OMt())},t=>{const s=t.eCt(0).CMt(),i=t.eCt(1),e=t.eCt(2),n=t.eCt(3),r=t.eCt(4);return()=>s(i.PMt(),e.PMt(),-32,0,n.PMt(),r.OMt())},t=>{const s=t.eCt(0).CMt(),i=t.eCt(1),e=t.eCt(2),n=t.eCt(3),r=t.eCt(4);return()=>s(i.PMt(),e.PMt(),0,-32,n.PMt(),r.OMt())},t=>{const s=t.eCt(0).CMt(),i=t.eCt(1),e=t.eCt(2),n=t.eCt(3),r=t.eCt(4);return()=>s(i.PMt(),e.PMt(),0,32,n.PMt(),r.OMt())},()=>"Switch",()=>"Color",()=>"Player Cannon Aiming",t=>{const s=t.eCt(0),i=t.eCt(1),e=t.eCt(2),n=t.eCt(3);return()=>uk.er(s.PMt(),i.PMt(),e.PMt(),n.PMt())},()=>64,t=>{const s=t.eCt(0).CMt();return()=>45*s()},()=>"Player Reset Triggers",()=>"suffocate",()=>.5,()=>"Spike",()=>"Player Animations",()=>"right",()=>"left",()=>"Slammed",()=>"Land",()=>"Idle",()=>"Run",()=>"Run Dust",()=>"Jumping",()=>"Slam",()=>1.5,()=>"Player Movement",()=>"unfreeze",()=>600,()=>240,()=>200,()=>"jumpOnLand",t=>{const s=t.eCt(0);return()=>-s.WMt()},()=>"noJump",t=>{const s=t.eCt(0).zMt(),i=t.eCt(1).zMt();return()=>s.Gnt()+i.Gnt()},t=>{const s=t.eCt(0).zMt();return()=>s.Gnt()},t=>{const s=t.eCt(0),i=t.eCt(1).zMt();return()=>s.PMt()+i.Gnt()},()=>"Button",()=>"Solid Node",()=>"Holding",()=>"Background Effects",t=>{const s=t.eCt(0).CMt();return()=>10*s()},t=>{const s=t.eCt(0),i=t.eCt(1);return()=>s.PMt()*i.PMt()},t=>{const s=t.eCt(0).zMt(),i=t.eCt(1),e=t.eCt(2);return()=>s.Gnt()-i.PMt()*e.PMt()},()=>"Level Transitions",()=>"Custom Level",()=>"Z-Orders",()=>"Special Triggers",t=>{const s=t.eCt(0).CMt(),i=t.eCt(1);return()=>s(i.OMt(),",")},t=>{const s=t.eCt(0).CMt(),i=t.eCt(1),e=t.eCt(2).zMt();return()=>s(i.OMt(),e.Gnt(),",")},t=>{const s=t.eCt(0).CMt(),i=t.eCt(1).zMt();return()=>s(i.Gnt(),0,"_")},()=>"camera",t=>{const s=t.eCt(0).CMt(),i=t.eCt(1).zMt();return()=>s(i.Gnt(),1,"_")},()=>"shake",t=>{const s=t.eCt(0).CMt(),i=t.eCt(1).CMt(),e=t.eCt(2).zMt();return()=>s(i(e.Gnt(),2,"_"))},t=>{const s=t.eCt(0).CMt(),i=t.eCt(1).CMt(),e=t.eCt(2).zMt();return()=>s(i(e.Gnt(),3,"_"))},()=>"freeze",()=>"glance",()=>5,()=>"player",()=>"fx",t=>{const s=t.eCt(0).CMt(),i=t.eCt(1).zMt();return()=>s(i.Gnt(),2,"_")},()=>"trigger",t=>{const s=t.eCt(0).CMt(),i=t.eCt(1).CMt(),e=t.eCt(2);return()=>s(i(e.OMt(),1,"_"))},()=>"translate",t=>{const s=t.eCt(0),i=t.eCt(1).CMt(),e=t.eCt(2).CMt(),n=t.eCt(3);return()=>s.PMt()+32*i(e(n.OMt(),1,"_"))},t=>{const s=t.eCt(0),i=t.eCt(1).CMt(),e=t.eCt(2).CMt(),n=t.eCt(3);return()=>s.PMt()+32*i(e(n.OMt(),2,"_"))},t=>{const s=t.eCt(0).CMt(),i=t.eCt(1).CMt(),e=t.eCt(2);return()=>s(i(e.OMt(),3,"_"))},t=>{const s=t.eCt(0),i=t.eCt(1).CMt(),e=t.eCt(2).CMt(),n=t.eCt(3);return()=>s.WMt()+i(e(n.OMt(),1,"_"))},t=>{const s=t.eCt(0),i=t.eCt(1).CMt(),e=t.eCt(2).CMt(),n=t.eCt(3);return()=>s.WMt()+i(e(n.OMt(),2,"_"))},()=>"Camera",()=>"FX",t=>{const s=t.eCt(0).CMt();return()=>s(-60,60)-90},()=>"spawn",()=>.4,t=>{const s=t.eCt(0).CMt();return()=>60*s()},()=>"grow",()=>"shrink",t=>{const s=t.eCt(0).CMt();return()=>15*s()},()=>"main",()=>"touch",()=>"Buttons",()=>"menu",()=>"action",()=>"exit",()=>"Play Last Level",()=>"layout",()=>"Navigation",()=>"controller",()=>"keyboard",t=>{const s=t.eCt(0),i=t.eCt(1).zMt(),e=t.eCt(2).zMt();return()=>s.PMt(i.Gnt(),e.Gnt())},()=>"mouse",()=>"Click Buttons",()=>"Keyboard Navigation",()=>"Controller Navigation",()=>"AxisReset",()=>-50,()=>.2,()=>50,t=>{const s=t.eCt(0);return()=>s.PMt()-1},()=>"Refresh Button Map",t=>{const s=t.eCt(0).zMt();return()=>("buttonmap_"+s.Gnt()+".json").toString()},()=>"Custom to Load",t=>{const s=t.eCt(0).CMt(),i=t.eCt(1);return()=>s()+"/Custom Levels/"+i.PMt()+".json"},t=>{const s=t.eCt(0).CMt(),i=t.eCt(1).CMt(),e=t.eCt(2);return()=>s(i()+"/Custom Levels/"+e.PMt())},()=>"Frame Buffer",()=>"font-size",t=>{const s=t.eCt(0);return()=>ak(s.OMt(),"em")},()=>"Block Map",t=>{const s=t.eCt(0).CMt();return()=>s()+"/Custom Levels"},()=>"Level Properties",()=>"Level Width",()=>"Level Height",()=>"Level Name",()=>"Block Editing",()=>"Block Properties",()=>"Trigger Properties",t=>{const s=t.eCt(0).CMt(),i=t.eCt(1);return()=>s(i.PMt())},t=>{const s=t.eCt(0).zMt();return()=>32*s.Gnt()-1},()=>"General Level Editor UI",()=>"int",()=>"main menu",()=>"Block Cursor",()=>"Draw",()=>"Draw Tool",t=>{const s=t.eCt(0).CMt();return()=>32*Math.ceil(s()/32)-16},t=>{const s=t.eCt(0),i=t.eCt(1);return()=>ak(ak(s.PMt(),","),i.PMt())},()=>3,()=>90,()=>"Select Tool",()=>"Select",()=>-2,t=>{const s=t.eCt(0).CMt(),i=t.eCt(1);return()=>s()-i.PMt()},t=>{const s=t.eCt(0),i=t.eCt(1),e=t.eCt(2),n=t.eCt(3);return()=>s.PMt(i.PMt(ak(ak(e.PMt(),","),n.PMt())),6,0)},t=>{const s=t.eCt(0),i=t.eCt(1),e=t.eCt(2),n=t.eCt(3);return()=>s.PMt(i.PMt(ak(ak(e.PMt(),","),n.PMt())),7,0)},t=>{const s=t.eCt(0),i=t.eCt(1),e=t.eCt(2);return()=>s.PMt(ak(ak(i.PMt(),","),e.PMt()))},t=>{const s=t.eCt(0),i=t.eCt(1);return()=>s.PMt()+i.PMt()/2},()=>"Block Editing UI",()=>"color",()=>"tool",()=>"Highlighted Blocks",()=>"Block Property Editing",()=>"Special Tag",t=>{const s=t.eCt(0),i=t.eCt(1),e=t.eCt(2);return()=>s.PMt(i.PMt(e.PMt()))},()=>6,()=>"Special Condition",()=>7,()=>"Repeat Count",()=>"0",()=>8,t=>{const s=t.eCt(0),i=t.eCt(1);return()=>s.PMt(i.PMt())},()=>"isBlockLocked",()=>4,()=>"Special Trigger Editing",t=>{const s=t.eCt(0).CMt(),i=t.eCt(1).zMt();return()=>s()+"/Custom Levels/"+i.Gnt()+".json"},t=>{const s=t.eCt(0).CMt(),i=t.eCt(1).zMt();return()=>s()+"/Custom Levels/"+i.Gnt()+"triggerData.json"},()=>"Varies",t=>{const s=t.eCt(0).CMt(),i=t.eCt(1).CMt(),e=t.eCt(2).zMt();return()=>s(i(e.Gnt(),0,","))},t=>{const s=t.eCt(0).CMt(),i=t.eCt(1).CMt(),e=t.eCt(2).zMt();return()=>s(i(e.Gnt(),1,","))},t=>{const s=t.eCt(0),i=t.eCt(1).zMt();return()=>s.PMt(i.Gnt())},()=>"Layout Navigation",()=>"Move",t=>{const s=t.eCt(0),i=t.eCt(1).CMt();return()=>s.PMt()+-i()/2},()=>"Tool Selection",()=>"Mouse Cursor",()=>"Pointer",()=>"Trigger"]}}}),import_c3runtime=__toESM(require_c3runtime()),C32=self._s;C32.i$.rBs=class extends globalThis.kq{constructor(){super()}};var C33=self._s;C33.i$.rBs.dEt=class extends globalThis.Uq{constructor(){super()}Hq(){}};var C34=self._s,DOM_COMPONENT_ID="greenworks";C34.i$.rBs.Instance=class extends globalThis.$U{constructor(){super({WU:DOM_COMPONENT_ID}),this.hBs=!1,this.oBs=!1,this.aBs=!1,this.lBs=0,this.uBs="",this.cBs="",this.fBs=0,this.dBs="",this.pBs="",this.ZU([["game-overlay-activated",t=>this.mBs(t)]]),this.runtime.iN.qB(this.eht())}async eht(){const t=await this.tH("load");this.hBs=t.isAvailable,this.hBs&&(this.oBs=t.isGameOverlayEnabled,this.aBs=t.isRunningOnSteamDeck,this.lBs=t.accountId,this.uBs=t.staticAccountId,this.cBs=t.screenName,this.fBs=t.level,this.dBs=t.gameLang,this.pBs=t.uiLang)}yU(){super.yU()}mBs(t){t.isActive?this.JU(C34.i$.rBs.t$.gBs):this.JU(C34.i$.rBs.t$.yBs)}};var C35=self._s;C35.i$.rBs.t$={wBs(){return this.hBs},SBs:()=>!0,vBs:()=>!0,bBs(){return this.oBs},gBs:()=>!0,yBs:()=>!0,MBs(){return this.aBs}};var C36=self._s,OVERLAY_OPTIONS=["Friends","Community","Players","Settings","OfficialGameGroup","Stats","Achievements"];C36.i$.rBs.wht={CBs(t){this.hBs&&this.tH("activate-achievement",{achievement:t}).then(()=>{this.JU(C36.i$.rBs.t$.SBs)}).catch(t=>{console.warn("[Construct 3] Greenworks: error activating achievement: ",t),this.JU(C36.i$.rBs.t$.vBs)})},TBs(t){this.hBs&&this.QU("activate-overlay",{option:OVERLAY_OPTIONS[t]})}};var C37=self._s;C37.i$.rBs.Sht={xBs(){return this.lBs},IBs(){const t=parseFloat(this.uBs);return isFinite(t)?t:0},_Bs(){return this.uBs},GBs(){return this.cBs},PBs(){return this.fBs},ABs(){return this.dBs},RBs(){return this.pBs}};var C38=self._s;self.oHt=function(){return[C38.i$.jKt,C38.i$.si,C38.i$.rBs,C38.i$.P0t,C38.i$.x2t,C38.i$.y3t,C38.i$.R9t,C38.i$.PlatformInfo,C38.i$.Xss,C38.i$.Brt,C38.i$.Text,C38.i$.Ahs,C38.i$.los,C38.yut.l_s,C38.i$.gamepad,C38.i$.Keyboard,C38.i$.Touch,C38.i$.vcs,C38.i$.vfs,C38.yut.Zs,C38.yut.zAs,C38.yut.gut,C38.yut.bound,C38.i$.Zfs,C38.i$._ps,C38.i$.Yms,C38.i$.Audio,C38.yut.wOs,C38.i$.Ebs,C38.i$.uxs,C38.i$.wIs,C38.yut.TLs,C38.yut.MAt,C38.yut.FNs,C38.i$.s$.t$.J5,C38.i$.s$.wht.BYt,C38.i$.s$.t$.vqt,C38.i$.s$.wht.Hqt,C38.i$.s$.Sht.zXt,C38.i$.s$.t$.Swt,C38.i$.Keyboard.t$.fls,C38.i$.s$.wht.yYt,C38.i$.s$.wht.iYt,C38.i$.los.t$.Pos,C38.i$.los.t$.hxt,C38.i$.los.Sht.jos,C38.i$.s$.wht.Zqt,C38.i$.s$.Sht.rXt,C38.i$.s$.Sht.SXt,C38.i$.los.Sht.wos,C38.i$.Brt.wht.kes,C38.i$.Brt.wht.$A,C38.i$.Brt.wht.zIt,C38.i$.los.t$._os,C38.i$.Brt.wht.Lxt,C38.i$.Brt.Sht.ColorValue,C38.i$.Brt.wht.Oj,C38.i$.s$.wht.qqt,C38.i$.s$.wht.eYt,C38.i$.Brt.t$.DIt,C38.i$.s$.t$.Ud,C38.i$.Brt.wht.hns,C38.i$.Brt.wht.wV,C38.i$.Brt.Sht.R_t,C38.i$.Brt.Sht.b_t,C38.i$.Brt.wht.YIt,C38.i$.Brt.t$.OIt,C38.i$.Brt.wht.mxt,C38.i$.Brt.t$.kIt,C38.i$.Brt.wht.dxt,C38.i$.Brt.Sht.Sns,C38.i$.Brt.wht.Les,C38.i$.Brt.Sht.gns,C38.yut.gut.t$.IsPlaying,C38.i$.Brt.Sht.c_t,C38.i$.Brt.Sht.f_t,C38.i$.s$.t$.pqt,C38.i$.Brt.wht.VIt,C38.i$.Brt.t$.nIt,C38.i$.Brt.wht.bO,C38.yut.TLs.t$._u,C38.yut.TLs.wht.G_t,C38.yut.gut.wht.uEs,C38.i$.Yms.wht.Lxt,C38.yut.l_s.t$.j_s,C38.i$.Brt.t$.uxt,C38.i$.Brt.Sht.l_t,C38.i$.Brt.Sht.u_t,C38.yut.wOs.wht.Fks,C38.yut.l_s.t$.V_s,C38.yut.l_s.wht.H_s,C38.i$.Brt.t$.HIt,C38.i$.Brt.t$.iIt,C38.yut.MAt.t$._u,C38.i$.Brt.t$.lxt,C38.yut.MAt.wht.G_t,C38.i$.s$.t$.yqt,C38.i$.Brt.wht.Axt,C38.i$.s$.Sht.AN,C38.i$.Brt.wht.Rxt,C38.i$.Brt.t$.Sxt,C38.i$.Brt.wht.Xg,C38.i$.Brt.t$.UIt,C38.i$.Brt.wht.Jkt,C38.i$.Brt.t$.Zes,C38.yut.TLs.t$.dAs,C38.i$.Brt.t$.rIt,C38.yut.TLs.wht.TAs,C38.yut.Zs.t$.ePs,C38.yut.gut.t$.Ovs,C38.i$.Keyboard.t$.tls,C38.i$.gamepad.t$.xas,C38.i$.Brt.t$.ins,C38.i$.Brt.wht.uns,C38.i$.Brt.t$.ves,C38.yut.Zs.t$.mAs,C38.yut.Zs.t$.dAs,C38.yut.Zs.t$.yAs,C38.i$.Brt.wht.Rj,C38.yut.l_s.wht.z_s,C38.i$.Brt.t$.Ses,C38.yut.Zs.wht.xAs,C38.yut.Zs.wht._As,C38.yut.Zs.wht.vAs,C38.i$.gamepad.t$.Gas,C38.i$.gamepad.t$.aas,C38.yut.Zs.wht.TAs,C38.yut.Zs.Sht.BAs,C38.yut.Zs.t$.iPs,C38.i$.s$.wht.CN,C38.i$.s$.t$.Dqt,C38.i$.Brt.wht.cxt,C38.i$.s$.t$.uqt,C38.i$.s$.wht.zqt,C38.i$.Zfs.wht.aps,C38.i$.Zfs.wht.lps,C38.i$.s$.t$.Sqt,C38.i$.Zfs.Sht.Ins,C38.i$.Zfs.Sht.Sps,C38.i$.Zfs.Sht._ns,C38.i$.Zfs.Sht.vps,C38.i$.s$.wht.SYt,C38.i$.s$.wht.vYt,C38.i$.s$.Sht.vXt,C38.i$.s$.t$.Oqt,C38.yut.zAs.wht.rRs,C38.i$.s$.Sht.float,C38.yut.TLs.wht.QLs,C38.yut.TLs.Sht.xNs,C38.yut.TLs.Sht.INs,C38.i$.s$.Sht.random,C38.yut.gut.t$.iEs,C38.i$.Text.wht.wV,C38.i$.vcs.wht.ufs,C38.i$.si.wht.$Qt,C38.i$.PlatformInfo.t$.pss,C38.i$.Text.wht.Vc,C38.i$.Text.wht.zIt,C38.i$.si.wht.AQt,C38.i$.s$.wht.wYt,C38.i$.s$.Sht.UXt,C38.i$.s$.Sht.HXt,C38.i$.s$.wht.qYt,C38.i$.vcs.t$.Zcs,C38.i$.Keyboard.t$.cls,C38.i$.gamepad.t$.Pas,C38.i$.Touch.t$.hus,C38.i$.vcs.t$.sfs,C38.i$.vcs.t$.afs,C38.i$.los.Sht.f_t,C38.i$.s$.wht.Jqt,C38.i$.los.Sht.c_t,C38.i$.jKt.wht.Request,C38.i$.jKt.t$.rZt,C38.i$.los.wht.Bos,C38.i$.jKt.Sht.CZt,C38.i$.vfs.t$.x_t,C38.i$.vfs.t$.OIt,C38.i$.vfs.t$.shs,C38.i$.P0t.t$.b1t,C38.i$.P0t.Sht.r2t,C38.i$.vfs.Sht.Text,C38.i$.P0t.Sht.u2t,C38.i$.s$.wht.TN,C38.i$.vfs.wht.M_t,C38.i$.P0t.wht.k1t,C38.i$.vfs.wht.Vc,C38.i$.s$.wht.bYt,C38.i$.Zfs.wht.Xg,C38.i$.Zfs.wht.Ug,C38.i$.vcs.t$.tfs,C38.i$.s$.t$.Lqt,C38.i$.Brt.Sht.Jxt,C38.i$.Brt.t$.Qes,C38.i$.Ahs.Sht.Jxt,C38.i$.Ahs.wht.wV,C38.i$.Ahs.t$.vV,C38.i$.vcs.Sht.l_t,C38.i$.vcs.Sht.u_t,C38.i$.Brt.wht.Wxt,C38.i$.los.wht.$A,C38.i$.vcs.t$.aas,C38.i$.los.t$.Gos,C38.i$.los.t$.Eos,C38.i$.los.wht.iX,C38.i$.los.wht.TH,C38.i$.los.t$.Ros,C38.i$.vcs.t$.ifs,C38.i$.vcs.t$.qcs,C38.i$.vcs.Sht.mfs,C38.i$.vcs.Sht.gfs,C38.i$.Ahs.wht.$A,C38.i$.Ahs.wht.cxt,C38.i$.Ahs.wht.Wxt,C38.i$.Ahs.Sht.l_t,C38.i$.Ahs.Sht.u_t,C38.i$.los.wht.XM,C38.i$.los.Sht.Jos,C38.i$.los.wht.Eu,C38.i$.Ahs.Sht.c_t,C38.i$.Ahs.Sht.f_t,C38.i$.s$.wht.Yqt,C38.i$.Brt.t$.oxt,C38.i$.Brt.wht.QM,C38.i$.los.t$.Ru,C38.i$.Brt.t$.Nxt,C38.i$.Brt.wht.Vxt,C38.i$.los.wht.Oos,C38.i$.los.Sht.Hos,C38.i$.P0t.wht.I1t,C38.i$.los.Sht.s_t,C38.i$.Brt.wht.Uxt,C38.i$.vfs.wht.__t,C38.i$.vfs.wht.Jfs,C38.i$.Brt.t$.hxt,C38.i$.vcs.wht.ffs]},self.PHt=[{jKt:0},{si:0},{rBs:0},{EBs:0},{x2t:0},{y3t:0},{OBs:0},{PlatformInfo:0},{Xss:0},{buttonID:0},{text:0},{type:0},{DBs:0},{layout:0},{button:0},{FBs:0},{kBs:0},{LBs:0},{NBs:0},{BBs:0},{$Bs:0},{WBs:0},{jBs:0},{l_s:0},{VBs:0},{Gamepad:0},{Keyboard:0},{Touch:0},{vcs:0},{UBs:0},{HBs:0},{lowerBound:0},{upperBound:0},{fontSize:0},{zBs:0},{JBs:0},{qBs:0},{color:0},{on:0},{YBs:0},{XBs:0},{locked:0},{KBs:0},{ZBs:0},{QBs:0},{t$s:0},{s$s:0},{i$s:0},{e$s:0},{Zs:0},{n$s:0},{r$s:0},{target:0},{h$s:0},{o$s:0},{a$s:0},{gut:0},{l$s:0},{u$s:0},{c$s:0},{f$s:0},{d$s:0},{p$s:0},{m$s:0},{g$s:0},{source:0},{y$s:0},{w$s:0},{S$s:0},{Audio:0},{v$s:0},{wOs:0},{b$s:0},{M$s:0},{C$s:0},{T$s:0},{x$s:0},{tag:0},{once:0},{I$s:0},{fx:0},{_$s:0},{G$s:0},{P$s:0},{A$s:0},{R$s:0},{E$s:0},{O$s:0},{D$s:0},{F$s:0},{k$s:0},{Brt:0},{L$s:0},{JSON:0},{N$s:0},{B$s:0},{TLs:0},{$$s:0},{FNs:0},{W$s:0},{j$s:0},{V$s:0},{U$s:0},{H$s:0},{z$s:0},{J$s:0},{q$s:0},{Y$s:0},{X$s:0},{K$s:0},{Z$s:0},{To:0},{Q$s:0},{ivt:0},{tWs:0},{sWs:0},{iWs:0},{eWs:0},{nWs:0},{rWs:0},{hWs:0},{oWs:0},{aWs:0},{lWs:0},{uWs:0},{cWs:0},{fWs:0},{dWs:0},{pWs:0},{mWs:0},{gWs:0},{yWs:0},{wWs:0},{SWs:0},{vWs:0},{bWs:0},{MWs:0},{CWs:0},{TWs:0},{xWs:0},{IWs:0}],self._Ws={jKt:class extends self.cU{},si:class extends self.cU{},rBs:class extends C38.i$.rBs.Instance{},EBs:class extends self.cU{},x2t:class extends self.cU{},y3t:class extends self.cU{},OBs:class extends self.cU{},PlatformInfo:class extends self.cU{},Xss:class extends self.cU{},button:class extends self.Wes{},LBs:class extends self.Wrs{},NBs:class extends self.Kz{},BBs:class extends self.Wes{},WBs:class extends self.Wes{},jBs:class extends self.Tos{},VBs:class extends self.Wes{},Gamepad:class extends self.cU{},Keyboard:class extends self.cU{},Touch:class extends self.cU{},vcs:class extends self.cU{},UBs:class extends self.Tos{},zBs:class extends self.Vfs{},JBs:class extends self.Tos{},qBs:class extends self.Tos{},QBs:class extends self.Wes{},n$s:class extends self.Wes{},r$s:class extends self.Wes{},u$s:class extends self.Wes{},c$s:class extends self.Bds{},f$s:class extends self.Wes{},d$s:class extends self.bms{},g$s:class extends self.Wes{},y$s:class extends self.Wes{},w$s:class extends self.wys{},S$s:class extends self.Wes{},Audio:class extends self.cU{},b$s:class extends self.Wes{},C$s:class extends self.Wes{},T$s:class extends self.Wrs{},I$s:class extends self.Wes{},fx:class extends self.Wes{},_$s:class extends self.Wes{},G$s:class extends self.Wes{},P$s:class extends self.JMs{},A$s:class extends self.Wes{},E$s:class extends self.Wes{},O$s:class extends self.Wes{},D$s:class extends self.Wes{},k$s:class extends self.Wes{},Brt:class extends self.Wes{},L$s:class extends self.Kz{},JSON:class extends self.Lxs{},N$s:class extends self.WIs{},B$s:class extends self.Wes{},W$s:class extends self.Wes{},j$s:class extends self.Wes{},V$s:class extends self.Wes{},U$s:class extends self.Wes{}};
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/