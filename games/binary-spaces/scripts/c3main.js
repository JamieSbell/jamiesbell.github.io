import "./../box2d.wasm.js";
// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJS=(t,s)=>function(){return s||(0,t[__getOwnPropNames(t)[0]])((s={exports:{}}).exports,s),s.exports},__copyProps=(t,s,e,i)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let r of __getOwnPropNames(s))__hasOwnProp.call(t,r)||r===e||__defProp(t,r,{get:()=>s[r],enumerable:!(i=__getOwnPropDesc(s,r))||i.enumerable});return t},__toESM=(t,s,e)=>(e=null!=t?__create(__getProtoOf(t)):{},__copyProps(!s&&t&&t.i?e:__defProp(e,"default",{value:t,enumerable:!0}),t)),require_c3runtime=__commonJS({"file-map:scripts/c3runtime.js"(exports,module){{let e=function(t){ARRAY_TYPE=t},n=function(t){return t*degree},h=function(t,s){return Math.abs(t-s)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(s))},u=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},p=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},m=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},g=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},y=function(t,s,e,i){var r=new ARRAY_TYPE(4);return r[0]=t,r[1]=s,r[2]=e,r[3]=i,r},w=function(t,s,e,i,r){return t[0]=s,t[1]=e,t[2]=i,t[3]=r,t},S=function(t,s){if(t===s){var e=s[1];t[1]=s[2],t[2]=e}else t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3];return t},v=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=e*n-r*i;return h?(h=1/h,t[0]=n*h,t[1]=-i*h,t[2]=-r*h,t[3]=e*h,t):null},b=function(t,s){var e=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=e,t},M=function(t){return t[0]*t[3]-t[2]*t[1]},T=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=e[0],a=e[1],l=e[2],u=e[3];return t[0]=i*o+n*a,t[1]=r*o+h*a,t[2]=i*l+n*u,t[3]=r*l+h*u,t},x=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=Math.sin(e),a=Math.cos(e);return t[0]=i*a+n*o,t[1]=r*a+h*o,t[2]=i*-o+n*a,t[3]=r*-o+h*a,t},C=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=e[0],a=e[1];return t[0]=i*o,t[1]=r*o,t[2]=n*a,t[3]=h*a,t},G=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=e,t[2]=-e,t[3]=i,t},_=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},I=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},P=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},R=function(t,s,e,i){return t[2]=i[2]/i[0],e[0]=i[0],e[1]=i[1],e[3]=i[3]-t[2]*e[1],[t,s,e]},A=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t},E=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t},O=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},F=function(t,s){var e=t[0],i=t[1],r=t[2],n=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(e-h)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(i-o)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-l)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(l))},D=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t},L=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t},k=function(){var t=new ARRAY_TYPE(6);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},N=function(t){var s=new ARRAY_TYPE(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},B=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},$=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},W=function(t,s,e,i,r,n){var h=new ARRAY_TYPE(6);return h[0]=t,h[1]=s,h[2]=e,h[3]=i,h[4]=r,h[5]=n,h},V=function(t,s,e,i,r,n,h){return t[0]=s,t[1]=e,t[2]=i,t[3]=r,t[4]=n,t[5]=h,t},j=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=s[4],o=s[5],a=e*n-i*r;return a?(a=1/a,t[0]=n*a,t[1]=-i*a,t[2]=-r*a,t[3]=e*a,t[4]=(r*o-n*h)*a,t[5]=(i*h-e*o)*a,t):null},U=function(t){return t[0]*t[3]-t[1]*t[2]},z=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=e[0],u=e[1],c=e[2],f=e[3],d=e[4],p=e[5];return t[0]=i*l+n*u,t[1]=r*l+h*u,t[2]=i*c+n*f,t[3]=r*c+h*f,t[4]=i*d+n*p+o,t[5]=r*d+h*p+a,t},H=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=Math.sin(e),u=Math.cos(e);return t[0]=i*u+n*l,t[1]=r*u+h*l,t[2]=i*-l+n*u,t[3]=r*-l+h*u,t[4]=o,t[5]=a,t},q=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=e[0],u=e[1];return t[0]=i*l,t[1]=r*l,t[2]=n*u,t[3]=h*u,t[4]=o,t[5]=a,t},J=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=e[0],u=e[1];return t[0]=i,t[1]=r,t[2]=n,t[3]=h,t[4]=i*l+n*u+o,t[5]=r*l+h*u+a,t},Y=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=e,t[2]=-e,t[3]=i,t[4]=0,t[5]=0,t},X=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},Z=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},K=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Q=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},tt=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t},st=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t[4]=s[4]-e[4],t[5]=s[5]-e[5],t},et=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t},it=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t[4]=s[4]+e[4]*i,t[5]=s[5]+e[5]*i,t},rt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},nt=function(t,s){var e=t[0],i=t[1],r=t[2],n=t[3],h=t[4],o=t[5],a=s[0],l=s[1],u=s[2],c=s[3],f=s[4],d=s[5];return Math.abs(e-a)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(i-l)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-u)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(h-f)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(o-d)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(d))},ht=function(){var t=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},ot=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},at=function(t){var s=new ARRAY_TYPE(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},ut=function(t,s,e,i,r,n,h,o,a){var l=new ARRAY_TYPE(9);return l[0]=t,l[1]=s,l[2]=e,l[3]=i,l[4]=r,l[5]=n,l[6]=h,l[7]=o,l[8]=a,l},ct=function(t,s,e,i,r,n,h,o,a,l){return t[0]=s,t[1]=e,t[2]=i,t[3]=r,t[4]=n,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},dt=function(t,s){if(t===s){var e=s[1],i=s[2],r=s[5];t[1]=s[3],t[2]=s[6],t[3]=e,t[5]=s[7],t[6]=i,t[7]=r}else t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8];return t},pt=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=u*h-o*l,f=-u*n+o*a,d=l*n-h*a,p=e*c+i*f+r*d;return p?(p=1/p,t[0]=c*p,t[1]=(-u*i+r*l)*p,t[2]=(o*i-r*h)*p,t[3]=f*p,t[4]=(u*e-r*a)*p,t[5]=(-o*e+r*n)*p,t[6]=d*p,t[7]=(-l*e+i*a)*p,t[8]=(h*e-i*n)*p,t):null},mt=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8];return t[0]=h*u-o*l,t[1]=r*l-i*u,t[2]=i*o-r*h,t[3]=o*a-n*u,t[4]=e*u-r*a,t[5]=r*n-e*o,t[6]=n*l-h*a,t[7]=i*a-e*l,t[8]=e*h-i*n,t},gt=function(t){var s=t[0],e=t[1],i=t[2],r=t[3],n=t[4],h=t[5],o=t[6],a=t[7],l=t[8];return s*(l*n-h*a)+e*(-l*r+h*o)+i*(a*r-n*o)},yt=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=e[0],d=e[1],p=e[2],m=e[3],g=e[4],y=e[5],w=e[6],S=e[7],v=e[8];return t[0]=f*i+d*h+p*l,t[1]=f*r+d*o+p*u,t[2]=f*n+d*a+p*c,t[3]=m*i+g*h+y*l,t[4]=m*r+g*o+y*u,t[5]=m*n+g*a+y*c,t[6]=w*i+S*h+v*l,t[7]=w*r+S*o+v*u,t[8]=w*n+S*a+v*c,t},wt=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=e[0],d=e[1];return t[0]=i,t[1]=r,t[2]=n,t[3]=h,t[4]=o,t[5]=a,t[6]=f*i+d*h+l,t[7]=f*r+d*o+u,t[8]=f*n+d*a+c,t},St=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=Math.sin(e),d=Math.cos(e);return t[0]=d*i+f*h,t[1]=d*r+f*o,t[2]=d*n+f*a,t[3]=d*h-f*i,t[4]=d*o-f*r,t[5]=d*a-f*n,t[6]=l,t[7]=u,t[8]=c,t},vt=function(t,s,e){var i=e[0],r=e[1];return t[0]=i*s[0],t[1]=i*s[1],t[2]=i*s[2],t[3]=r*s[3],t[4]=r*s[4],t[5]=r*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Mt=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=e,t[2]=0,t[3]=-e,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Tt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},xt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Ct=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=e+e,o=i+i,a=r+r,l=e*h,u=i*h,c=i*o,f=r*h,d=r*o,p=r*a,m=n*h,g=n*o,y=n*a;return t[0]=1-c-p,t[3]=u-y,t[6]=f+g,t[1]=u+y,t[4]=1-l-p,t[7]=d-m,t[2]=f-g,t[5]=d+m,t[8]=1-l-c,t},Gt=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=e*o-i*h,S=e*a-r*h,v=e*l-n*h,b=i*a-r*o,M=i*l-n*o,T=r*l-n*a,x=u*m-c*p,C=u*g-f*p,G=u*y-d*p,_=c*g-f*m,I=c*y-d*m,P=f*y-d*g,R=w*P-S*I+v*_+b*G-M*C+T*x;return R?(R=1/R,t[0]=(o*P-a*I+l*_)*R,t[1]=(a*G-h*P-l*C)*R,t[2]=(h*I-o*G+l*x)*R,t[3]=(r*I-i*P-n*_)*R,t[4]=(e*P-r*G+n*C)*R,t[5]=(i*G-e*I-n*x)*R,t[6]=(m*T-g*M+y*b)*R,t[7]=(g*v-p*T-y*S)*R,t[8]=(p*M-m*v+y*w)*R,t):null},_t=function(t,s,e){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},It=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Pt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Rt=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t[6]=s[6]+e[6],t[7]=s[7]+e[7],t[8]=s[8]+e[8],t},At=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t[4]=s[4]-e[4],t[5]=s[5]-e[5],t[6]=s[6]-e[6],t[7]=s[7]-e[7],t[8]=s[8]-e[8],t},Et=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t[6]=s[6]*e,t[7]=s[7]*e,t[8]=s[8]*e,t},Ot=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t[4]=s[4]+e[4]*i,t[5]=s[5]+e[5]*i,t[6]=s[6]+e[6]*i,t[7]=s[7]+e[7]*i,t[8]=s[8]+e[8]*i,t},Ft=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},Dt=function(t,s){var e=t[0],i=t[1],r=t[2],n=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=s[0],f=s[1],d=s[2],p=s[3],m=s[4],g=s[5],y=s[6],w=s[7],S=s[8];return Math.abs(e-c)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(i-f)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(r-d)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-p)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(h-m)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(o-g)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-y)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-w)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(u-S)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(S))},Lt=function(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},kt=function(t){var s=new ARRAY_TYPE(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},Nt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},Bt=function(t,s,e,i,r,n,h,o,a,l,u,c,f,d,p,m){var g=new ARRAY_TYPE(16);return g[0]=t,g[1]=s,g[2]=e,g[3]=i,g[4]=r,g[5]=n,g[6]=h,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},$t=function(t,s,e,i,r,n,h,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=e,t[2]=i,t[3]=r,t[4]=n,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},Wt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Vt=function(t,s){if(t===s){var e=s[1],i=s[2],r=s[3],n=s[6],h=s[7],o=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=e,t[6]=s[9],t[7]=s[13],t[8]=i,t[9]=n,t[11]=s[14],t[12]=r,t[13]=h,t[14]=o}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t},jt=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=e*o-i*h,S=e*a-r*h,v=e*l-n*h,b=i*a-r*o,M=i*l-n*o,T=r*l-n*a,x=u*m-c*p,C=u*g-f*p,G=u*y-d*p,_=c*g-f*m,I=c*y-d*m,P=f*y-d*g,R=w*P-S*I+v*_+b*G-M*C+T*x;return R?(R=1/R,t[0]=(o*P-a*I+l*_)*R,t[1]=(r*I-i*P-n*_)*R,t[2]=(m*T-g*M+y*b)*R,t[3]=(f*M-c*T-d*b)*R,t[4]=(a*G-h*P-l*C)*R,t[5]=(e*P-r*G+n*C)*R,t[6]=(g*v-p*T-y*S)*R,t[7]=(u*T-f*v+d*S)*R,t[8]=(h*I-o*G+l*x)*R,t[9]=(i*G-e*I-n*x)*R,t[10]=(p*M-m*v+y*w)*R,t[11]=(c*v-u*M-d*w)*R,t[12]=(o*C-h*_-a*x)*R,t[13]=(e*_-i*C+r*x)*R,t[14]=(m*S-p*b-g*w)*R,t[15]=(u*b-c*S+f*w)*R,t):null},Ut=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=e*o-i*h,S=e*a-r*h,v=e*l-n*h,b=i*a-r*o,M=i*l-n*o,T=r*l-n*a,x=u*m-c*p,C=u*g-f*p,G=u*y-d*p,_=c*g-f*m,I=c*y-d*m,P=f*y-d*g;return t[0]=o*P-a*I+l*_,t[1]=r*I-i*P-n*_,t[2]=m*T-g*M+y*b,t[3]=f*M-c*T-d*b,t[4]=a*G-h*P-l*C,t[5]=e*P-r*G+n*C,t[6]=g*v-p*T-y*S,t[7]=u*T-f*v+d*S,t[8]=h*I-o*G+l*x,t[9]=i*G-e*I-n*x,t[10]=p*M-m*v+y*w,t[11]=c*v-u*M-d*w,t[12]=o*C-h*_-a*x,t[13]=e*_-i*C+r*x,t[14]=m*S-p*b-g*w,t[15]=u*b-c*S+f*w,t},zt=function(t){var s=t[0],e=t[1],i=t[2],r=t[3],n=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],g=s*h-e*n,y=s*o-i*n,w=e*o-i*h,S=l*p-u*d,v=l*m-c*d,b=u*m-c*p;return a*(s*b-e*v+i*S)-r*(n*b-h*v+o*S)+t[15]*(l*w-u*y+c*g)-f*(d*w-p*y+m*g)},Ht=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],w=s[15],S=e[0],v=e[1],b=e[2],M=e[3];return t[0]=S*i+v*o+b*c+M*m,t[1]=S*r+v*a+b*f+M*g,t[2]=S*n+v*l+b*d+M*y,t[3]=S*h+v*u+b*p+M*w,S=e[4],v=e[5],b=e[6],M=e[7],t[4]=S*i+v*o+b*c+M*m,t[5]=S*r+v*a+b*f+M*g,t[6]=S*n+v*l+b*d+M*y,t[7]=S*h+v*u+b*p+M*w,S=e[8],v=e[9],b=e[10],M=e[11],t[8]=S*i+v*o+b*c+M*m,t[9]=S*r+v*a+b*f+M*g,t[10]=S*n+v*l+b*d+M*y,t[11]=S*h+v*u+b*p+M*w,S=e[12],v=e[13],b=e[14],M=e[15],t[12]=S*i+v*o+b*c+M*m,t[13]=S*r+v*a+b*f+M*g,t[14]=S*n+v*l+b*d+M*y,t[15]=S*h+v*u+b*p+M*w,t},qt=function(t,s,e){var i,r,n,h,o,a,l,u,c,f,d,p,m=e[0],g=e[1],y=e[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*y+s[12],t[13]=s[1]*m+s[5]*g+s[9]*y+s[13],t[14]=s[2]*m+s[6]*g+s[10]*y+s[14],t[15]=s[3]*m+s[7]*g+s[11]*y+s[15]):(i=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=i,t[1]=r,t[2]=n,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=i*m+o*g+c*y+s[12],t[13]=r*m+a*g+f*y+s[13],t[14]=n*m+l*g+d*y+s[14],t[15]=h*m+u*g+p*y+s[15]),t},Jt=function(t,s,e){var i=e[0],r=e[1],n=e[2];return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*r,t[5]=s[5]*r,t[6]=s[6]*r,t[7]=s[7]*r,t[8]=s[8]*n,t[9]=s[9]*n,t[10]=s[10]*n,t[11]=s[11]*n,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},Yt=function(t,s,e,i){var r,n,h,o,a,l,u,c,f,d,p,m,g,y,w,S,v,b,M,T,x,C,G,_,I=i[0],P=i[1],R=i[2],A=Math.hypot(I,P,R);return A<EPSILON?null:(I*=A=1/A,P*=A,R*=A,r=Math.sin(e),h=1-(n=Math.cos(e)),o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],f=s[5],d=s[6],p=s[7],m=s[8],g=s[9],y=s[10],w=s[11],S=I*I*h+n,v=P*I*h+R*r,b=R*I*h-P*r,M=I*P*h-R*r,T=P*P*h+n,x=R*P*h+I*r,C=I*R*h+P*r,G=P*R*h-I*r,_=R*R*h+n,t[0]=o*S+c*v+m*b,t[1]=a*S+f*v+g*b,t[2]=l*S+d*v+y*b,t[3]=u*S+p*v+w*b,t[4]=o*M+c*T+m*x,t[5]=a*M+f*T+g*x,t[6]=l*M+d*T+y*x,t[7]=u*M+p*T+w*x,t[8]=o*C+c*G+m*_,t[9]=a*C+f*G+g*_,t[10]=l*C+d*G+y*_,t[11]=u*C+p*G+w*_,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},Xt=function(t,s,e){var i=Math.sin(e),r=Math.cos(e),n=s[4],h=s[5],o=s[6],a=s[7],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=n*r+l*i,t[5]=h*r+u*i,t[6]=o*r+c*i,t[7]=a*r+f*i,t[8]=l*r-n*i,t[9]=u*r-h*i,t[10]=c*r-o*i,t[11]=f*r-a*i,t},Zt=function(t,s,e){var i=Math.sin(e),r=Math.cos(e),n=s[0],h=s[1],o=s[2],a=s[3],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=n*r-l*i,t[1]=h*r-u*i,t[2]=o*r-c*i,t[3]=a*r-f*i,t[8]=n*i+l*r,t[9]=h*i+u*r,t[10]=o*i+c*r,t[11]=a*i+f*r,t},Kt=function(t,s,e){var i=Math.sin(e),r=Math.cos(e),n=s[0],h=s[1],o=s[2],a=s[3],l=s[4],u=s[5],c=s[6],f=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=n*r+l*i,t[1]=h*r+u*i,t[2]=o*r+c*i,t[3]=a*r+f*i,t[4]=l*r-n*i,t[5]=u*r-h*i,t[6]=c*r-o*i,t[7]=f*r-a*i,t},Qt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ts=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ss=function(t,s,e){var i,r,n,h=e[0],o=e[1],a=e[2],l=Math.hypot(h,o,a);return l<EPSILON?null:(h*=l=1/l,o*=l,a*=l,i=Math.sin(s),n=1-(r=Math.cos(s)),t[0]=h*h*n+r,t[1]=o*h*n+a*i,t[2]=a*h*n-o*i,t[3]=0,t[4]=h*o*n-a*i,t[5]=o*o*n+r,t[6]=a*o*n+h*i,t[7]=0,t[8]=h*a*n+o*i,t[9]=o*a*n-h*i,t[10]=a*a*n+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},es=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},is=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rs=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=i+i,a=r+r,l=n+n,u=i*o,c=i*a,f=i*l,d=r*a,p=r*l,m=n*l,g=h*o,y=h*a,w=h*l;return t[0]=1-(d+m),t[1]=c+w,t[2]=f-y,t[3]=0,t[4]=c-w,t[5]=1-(u+m),t[6]=p+g,t[7]=0,t[8]=f+y,t[9]=p-g,t[10]=1-(u+d),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},hs=function(t,s){var e=new ARRAY_TYPE(3),i=-s[0],r=-s[1],n=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=i*i+r*r+n*n+h*h;return c>0?(e[0]=2*(o*h+u*i+a*n-l*r)/c,e[1]=2*(a*h+u*r+l*i-o*n)/c,e[2]=2*(l*h+u*n+o*r-a*i)/c):(e[0]=2*(o*h+u*i+a*n-l*r),e[1]=2*(a*h+u*r+l*i-o*n),e[2]=2*(l*h+u*n+o*r-a*i)),ns(t,s,e),t},os=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},as=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[4],h=s[5],o=s[6],a=s[8],l=s[9],u=s[10];return t[0]=Math.hypot(e,i,r),t[1]=Math.hypot(n,h,o),t[2]=Math.hypot(a,l,u),t},ls=function(t,s){var e=new ARRAY_TYPE(3);as(e,s);var i=1/e[0],r=1/e[1],n=1/e[2],h=s[0]*i,o=s[1]*r,a=s[2]*n,l=s[4]*i,u=s[5]*r,c=s[6]*n,f=s[8]*i,d=s[9]*r,p=s[10]*n,m=h+u+p,g=0;return m>0?(g=2*Math.sqrt(m+1),t[3]=.25*g,t[0]=(c-d)/g,t[1]=(f-a)/g,t[2]=(o-l)/g):h>u&&h>p?(g=2*Math.sqrt(1+h-u-p),t[3]=(c-d)/g,t[0]=.25*g,t[1]=(o+l)/g,t[2]=(f+a)/g):u>p?(g=2*Math.sqrt(1+u-h-p),t[3]=(f-a)/g,t[0]=(o+l)/g,t[1]=.25*g,t[2]=(c+d)/g):(g=2*Math.sqrt(1+p-h-u),t[3]=(o-l)/g,t[0]=(f+a)/g,t[1]=(c+d)/g,t[2]=.25*g),t},us=function(t,s,e,i){s[0]=i[12],s[1]=i[13],s[2]=i[14];var r=i[0],n=i[1],h=i[2],o=i[4],a=i[5],l=i[6],u=i[8],c=i[9],f=i[10];e[0]=Math.hypot(r,n,h),e[1]=Math.hypot(o,a,l),e[2]=Math.hypot(u,c,f);var d=1/e[0],p=1/e[1],m=1/e[2],g=r*d,y=n*p,w=h*m,S=o*d,v=a*p,b=l*m,M=u*d,T=c*p,x=f*m,C=g+v+x,G=0;return C>0?(G=2*Math.sqrt(C+1),t[3]=.25*G,t[0]=(b-T)/G,t[1]=(M-w)/G,t[2]=(y-S)/G):g>v&&g>x?(G=2*Math.sqrt(1+g-v-x),t[3]=(b-T)/G,t[0]=.25*G,t[1]=(y+S)/G,t[2]=(M+w)/G):v>x?(G=2*Math.sqrt(1+v-g-x),t[3]=(M-w)/G,t[0]=(y+S)/G,t[1]=.25*G,t[2]=(b+T)/G):(G=2*Math.sqrt(1+x-g-v),t[3]=(y-S)/G,t[0]=(M+w)/G,t[1]=(b+T)/G,t[2]=.25*G),t},cs=function(t,s,e,i){var r=s[0],n=s[1],h=s[2],o=s[3],a=r+r,l=n+n,u=h+h,c=r*a,f=r*l,d=r*u,p=n*l,m=n*u,g=h*u,y=o*a,w=o*l,S=o*u,v=i[0],b=i[1],M=i[2];return t[0]=(1-(p+g))*v,t[1]=(f+S)*v,t[2]=(d-w)*v,t[3]=0,t[4]=(f-S)*b,t[5]=(1-(c+g))*b,t[6]=(m+y)*b,t[7]=0,t[8]=(d+w)*M,t[9]=(m-y)*M,t[10]=(1-(c+p))*M,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},fs=function(t,s,e,i,r){var n=s[0],h=s[1],o=s[2],a=s[3],l=n+n,u=h+h,c=o+o,f=n*l,d=n*u,p=n*c,m=h*u,g=h*c,y=o*c,w=a*l,S=a*u,v=a*c,b=i[0],M=i[1],T=i[2],x=r[0],C=r[1],G=r[2],_=(1-(m+y))*b,I=(d+v)*b,P=(p-S)*b,R=(d-v)*M,A=(1-(f+y))*M,E=(g+w)*M,O=(p+S)*T,F=(g-w)*T,D=(1-(f+m))*T;return t[0]=_,t[1]=I,t[2]=P,t[3]=0,t[4]=R,t[5]=A,t[6]=E,t[7]=0,t[8]=O,t[9]=F,t[10]=D,t[11]=0,t[12]=e[0]+x-(_*x+R*C+O*G),t[13]=e[1]+C-(I*x+A*C+F*G),t[14]=e[2]+G-(P*x+E*C+D*G),t[15]=1,t},ds=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=e+e,o=i+i,a=r+r,l=e*h,u=i*h,c=i*o,f=r*h,d=r*o,p=r*a,m=n*h,g=n*o,y=n*a;return t[0]=1-c-p,t[1]=u+y,t[2]=f-g,t[3]=0,t[4]=u-y,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ps=function(t,s,e,i,r,n,h){var o=1/(e-s),a=1/(r-i),l=1/(n-h);return t[0]=2*n*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*a,t[6]=0,t[7]=0,t[8]=(e+s)*o,t[9]=(r+i)*a,t[10]=(h+n)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*n*2*l,t[15]=0,t},ms=function(t,s,e,i,r){var n=1/Math.tan(s/2);if(t[0]=n/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0){var h=1/(i-r);t[10]=(r+i)*h,t[14]=2*r*i*h}else t[10]=-1,t[14]=-2*i;return t},gs=function(t,s,e,i,r){var n=1/Math.tan(s/2);if(t[0]=n/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0){var h=1/(i-r);t[10]=r*h,t[14]=r*i*h}else t[10]=-1,t[14]=-i;return t},ys=function(t,s,e,i){var r=Math.tan(s.upDegrees*Math.PI/180),n=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=Math.tan(s.rightDegrees*Math.PI/180),a=2/(h+o),l=2/(r+n);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(h-o)*a*.5,t[9]=(r-n)*l*.5,t[10]=i/(e-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*e/(e-i),t[15]=0,t},ws=function(t,s,e,i,r,n,h){var o=1/(s-e),a=1/(i-r),l=1/(n-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+e)*o,t[13]=(r+i)*a,t[14]=(h+n)*l,t[15]=1,t},Ss=function(t,s,e,i,r,n,h){var o=1/(s-e),a=1/(i-r),l=1/(n-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(s+e)*o,t[13]=(r+i)*a,t[14]=n*l,t[15]=1,t},vs=function(t,s,e,i){var r,n,h,o,a,l,u,c,f,d,p=s[0],m=s[1],g=s[2],y=i[0],w=i[1],S=i[2],v=e[0],b=e[1],M=e[2];return Math.abs(p-v)<EPSILON&&Math.abs(m-b)<EPSILON&&Math.abs(g-M)<EPSILON?Wt(t):(u=p-v,c=m-b,f=g-M,r=w*(f*=d=1/Math.hypot(u,c,f))-S*(c*=d),n=S*(u*=d)-y*f,h=y*c-w*u,(d=Math.hypot(r,n,h))?(r*=d=1/d,n*=d,h*=d):(r=0,n=0,h=0),o=c*h-f*n,a=f*r-u*h,l=u*n-c*r,(d=Math.hypot(o,a,l))?(o*=d=1/d,a*=d,l*=d):(o=0,a=0,l=0),t[0]=r,t[1]=o,t[2]=u,t[3]=0,t[4]=n,t[5]=a,t[6]=c,t[7]=0,t[8]=h,t[9]=l,t[10]=f,t[11]=0,t[12]=-(r*p+n*m+h*g),t[13]=-(o*p+a*m+l*g),t[14]=-(u*p+c*m+f*g),t[15]=1,t)},bs=function(t,s,e,i){var r=s[0],n=s[1],h=s[2],o=i[0],a=i[1],l=i[2],u=r-e[0],c=n-e[1],f=h-e[2],d=u*u+c*c+f*f;d>0&&(u*=d=1/Math.sqrt(d),c*=d,f*=d);var p=a*f-l*c,m=l*u-o*f,g=o*c-a*u;return(d=p*p+m*m+g*g)>0&&(p*=d=1/Math.sqrt(d),m*=d,g*=d),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=c*g-f*m,t[5]=f*p-u*g,t[6]=u*m-c*p,t[7]=0,t[8]=u,t[9]=c,t[10]=f,t[11]=0,t[12]=r,t[13]=n,t[14]=h,t[15]=1,t},Ms=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Ts=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},xs=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t[6]=s[6]+e[6],t[7]=s[7]+e[7],t[8]=s[8]+e[8],t[9]=s[9]+e[9],t[10]=s[10]+e[10],t[11]=s[11]+e[11],t[12]=s[12]+e[12],t[13]=s[13]+e[13],t[14]=s[14]+e[14],t[15]=s[15]+e[15],t},Cs=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t[4]=s[4]-e[4],t[5]=s[5]-e[5],t[6]=s[6]-e[6],t[7]=s[7]-e[7],t[8]=s[8]-e[8],t[9]=s[9]-e[9],t[10]=s[10]-e[10],t[11]=s[11]-e[11],t[12]=s[12]-e[12],t[13]=s[13]-e[13],t[14]=s[14]-e[14],t[15]=s[15]-e[15],t},Gs=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t[6]=s[6]*e,t[7]=s[7]*e,t[8]=s[8]*e,t[9]=s[9]*e,t[10]=s[10]*e,t[11]=s[11]*e,t[12]=s[12]*e,t[13]=s[13]*e,t[14]=s[14]*e,t[15]=s[15]*e,t},_s=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t[4]=s[4]+e[4]*i,t[5]=s[5]+e[5]*i,t[6]=s[6]+e[6]*i,t[7]=s[7]+e[7]*i,t[8]=s[8]+e[8]*i,t[9]=s[9]+e[9]*i,t[10]=s[10]+e[10]*i,t[11]=s[11]+e[11]*i,t[12]=s[12]+e[12]*i,t[13]=s[13]+e[13]*i,t[14]=s[14]+e[14]*i,t[15]=s[15]+e[15]*i,t},Is=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ps=function(t,s){var e=t[0],i=t[1],r=t[2],n=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],y=t[15],w=s[0],S=s[1],v=s[2],b=s[3],M=s[4],T=s[5],x=s[6],C=s[7],G=s[8],_=s[9],I=s[10],P=s[11],R=s[12],A=s[13],E=s[14],O=s[15];return Math.abs(e-w)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(i-S)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(r-v)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(n-b)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(h-M)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(o-T)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(a-x)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-C)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(u-G)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(G))&&Math.abs(c-_)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-I)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-P)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(p-R)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(m-A)<=EPSILON*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(g-E)<=EPSILON*Math.max(1,Math.abs(g),Math.abs(E))&&Math.abs(y-O)<=EPSILON*Math.max(1,Math.abs(y),Math.abs(O))},Rs=function(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},As=function(t){var s=new ARRAY_TYPE(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Es=function(t){var s=t[0],e=t[1],i=t[2];return Math.hypot(s,e,i)},Os=function(t,s,e){var i=new ARRAY_TYPE(3);return i[0]=t,i[1]=s,i[2]=e,i},Fs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Ds=function(t,s,e,i){return t[0]=s,t[1]=e,t[2]=i,t},Ls=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t},ks=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t},Ns=function(t,s,e){return t[0]=s[0]*e[0],t[1]=s[1]*e[1],t[2]=s[2]*e[2],t},Bs=function(t,s,e){return t[0]=s[0]/e[0],t[1]=s[1]/e[1],t[2]=s[2]/e[2],t},$s=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Ws=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Vs=function(t,s,e){return t[0]=Math.min(s[0],e[0]),t[1]=Math.min(s[1],e[1]),t[2]=Math.min(s[2],e[2]),t},js=function(t,s,e){return t[0]=Math.max(s[0],e[0]),t[1]=Math.max(s[1],e[1]),t[2]=Math.max(s[2],e[2]),t},Us=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},zs=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t},Hs=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t},qs=function(t,s){var e=s[0]-t[0],i=s[1]-t[1],r=s[2]-t[2];return Math.hypot(e,i,r)},Js=function(t,s){var e=s[0]-t[0],i=s[1]-t[1],r=s[2]-t[2];return e*e+i*i+r*r},Ys=function(t){var s=t[0],e=t[1],i=t[2];return s*s+e*e+i*i},Xs=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},Zs=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},Ks=function(t,s){var e=s[0],i=s[1],r=s[2],n=e*e+i*i+r*r;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t[2]=s[2]*n,t},Qs=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},te=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=e[0],o=e[1],a=e[2];return t[0]=r*a-n*o,t[1]=n*h-i*a,t[2]=i*o-r*h,t},se=function(t,s,e,i){var r=s[0],n=s[1],h=s[2];return t[0]=r+i*(e[0]-r),t[1]=n+i*(e[1]-n),t[2]=h+i*(e[2]-h),t},ee=function(t,s,e,i){var r=Math.acos(Math.min(Math.max(Qs(s,e),-1),1)),n=Math.sin(r),h=Math.sin((1-i)*r)/n,o=Math.sin(i*r)/n;return t[0]=h*s[0]+o*e[0],t[1]=h*s[1]+o*e[1],t[2]=h*s[2]+o*e[2],t},ie=function(t,s,e,i,r,n){var h=n*n,o=h*(2*n-3)+1,a=h*(n-2)+n,l=h*(n-1),u=h*(3-2*n);return t[0]=s[0]*o+e[0]*a+i[0]*l+r[0]*u,t[1]=s[1]*o+e[1]*a+i[1]*l+r[1]*u,t[2]=s[2]*o+e[2]*a+i[2]*l+r[2]*u,t},re=function(t,s,e,i,r,n){var h=1-n,o=h*h,a=n*n,l=o*h,u=3*n*o,c=3*a*h,f=a*n;return t[0]=s[0]*l+e[0]*u+i[0]*c+r[0]*f,t[1]=s[1]*l+e[1]*u+i[1]*c+r[1]*f,t[2]=s[2]*l+e[2]*u+i[2]*c+r[2]*f,t},ne=function(t,s){s=s||1;var e=2*RANDOM()*Math.PI,i=2*RANDOM()-1,r=Math.sqrt(1-i*i)*s;return t[0]=Math.cos(e)*r,t[1]=Math.sin(e)*r,t[2]=i*s,t},he=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=e[3]*i+e[7]*r+e[11]*n+e[15];return h=h||1,t[0]=(e[0]*i+e[4]*r+e[8]*n+e[12])/h,t[1]=(e[1]*i+e[5]*r+e[9]*n+e[13])/h,t[2]=(e[2]*i+e[6]*r+e[10]*n+e[14])/h,t},oe=function(t,s,e){var i=s[0],r=s[1],n=s[2];return t[0]=i*e[0]+r*e[3]+n*e[6],t[1]=i*e[1]+r*e[4]+n*e[7],t[2]=i*e[2]+r*e[5]+n*e[8],t},ae=function(t,s,e){var i=e[0],r=e[1],n=e[2],h=e[3],o=s[0],a=s[1],l=s[2],u=r*l-n*a,c=n*o-i*l,f=i*a-r*o,d=r*f-n*c,p=n*u-i*f,m=i*c-r*u,g=2*h;return u*=g,c*=g,f*=g,d*=2,p*=2,m*=2,t[0]=o+u+d,t[1]=a+c+p,t[2]=l+f+m,t},le=function(t,s,e,i){var r=[],n=[];return r[0]=s[0]-e[0],r[1]=s[1]-e[1],r[2]=s[2]-e[2],n[0]=r[0],n[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),n[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t},ue=function(t,s,e,i){var r=[],n=[];return r[0]=s[0]-e[0],r[1]=s[1]-e[1],r[2]=s[2]-e[2],n[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),n[1]=r[1],n[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t},ce=function(t,s,e,i){var r=[],n=[];return r[0]=s[0]-e[0],r[1]=s[1]-e[1],r[2]=s[2]-e[2],n[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),n[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),n[2]=r[2],t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t},fe=function(t,s){var e=t[0],i=t[1],r=t[2],n=s[0],h=s[1],o=s[2],a=Math.sqrt((e*e+i*i+r*r)*(n*n+h*h+o*o)),l=a&&Qs(t,s)/a;return Math.acos(Math.min(Math.max(l,-1),1))},de=function(t){return t[0]=0,t[1]=0,t[2]=0,t},pe=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},me=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},ge=function(t,s){var e=t[0],i=t[1],r=t[2],n=s[0],h=s[1],o=s[2];return Math.abs(e-n)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(r-o)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(o))},ye=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},we=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Se=function(t,s,e,i){var r=new ARRAY_TYPE(4);return r[0]=t,r[1]=s,r[2]=e,r[3]=i,r},ve=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},be=function(t,s,e,i,r){return t[0]=s,t[1]=e,t[2]=i,t[3]=r,t},Me=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t},Te=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t},xe=function(t,s,e){return t[0]=s[0]*e[0],t[1]=s[1]*e[1],t[2]=s[2]*e[2],t[3]=s[3]*e[3],t},Ce=function(t,s,e){return t[0]=s[0]/e[0],t[1]=s[1]/e[1],t[2]=s[2]/e[2],t[3]=s[3]/e[3],t},Ge=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},_e=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Ie=function(t,s,e){return t[0]=Math.min(s[0],e[0]),t[1]=Math.min(s[1],e[1]),t[2]=Math.min(s[2],e[2]),t[3]=Math.min(s[3],e[3]),t},Pe=function(t,s,e){return t[0]=Math.max(s[0],e[0]),t[1]=Math.max(s[1],e[1]),t[2]=Math.max(s[2],e[2]),t[3]=Math.max(s[3],e[3]),t},Re=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Ae=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t},Ee=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t},Oe=function(t,s){var e=s[0]-t[0],i=s[1]-t[1],r=s[2]-t[2],n=s[3]-t[3];return Math.hypot(e,i,r,n)},Fe=function(t,s){var e=s[0]-t[0],i=s[1]-t[1],r=s[2]-t[2],n=s[3]-t[3];return e*e+i*i+r*r+n*n},De=function(t){var s=t[0],e=t[1],i=t[2],r=t[3];return Math.hypot(s,e,i,r)},Le=function(t){var s=t[0],e=t[1],i=t[2],r=t[3];return s*s+e*e+i*i+r*r},ke=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},Ne=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Be=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=e*e+i*i+r*r+n*n;return h>0&&(h=1/Math.sqrt(h)),t[0]=e*h,t[1]=i*h,t[2]=r*h,t[3]=n*h,t},$e=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},We=function(t,s,e,i){var r=e[0]*i[1]-e[1]*i[0],n=e[0]*i[2]-e[2]*i[0],h=e[0]*i[3]-e[3]*i[0],o=e[1]*i[2]-e[2]*i[1],a=e[1]*i[3]-e[3]*i[1],l=e[2]*i[3]-e[3]*i[2],u=s[0],c=s[1],f=s[2],d=s[3];return t[0]=c*l-f*a+d*o,t[1]=-u*l+f*h-d*n,t[2]=u*a-c*h+d*r,t[3]=-u*o+c*n-f*r,t},Ve=function(t,s,e,i){var r=s[0],n=s[1],h=s[2],o=s[3];return t[0]=r+i*(e[0]-r),t[1]=n+i*(e[1]-n),t[2]=h+i*(e[2]-h),t[3]=o+i*(e[3]-o),t},je=function(t,s){var e,i,r,n,h,o;s=s||1;do{h=(e=2*RANDOM()-1)*e+(i=2*RANDOM()-1)*i}while(h>=1);do{o=(r=2*RANDOM()-1)*r+(n=2*RANDOM()-1)*n}while(o>=1);var a=Math.sqrt((1-h)/o);return t[0]=s*e,t[1]=s*i,t[2]=s*r*a,t[3]=s*n*a,t},Ue=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3];return t[0]=e[0]*i+e[4]*r+e[8]*n+e[12]*h,t[1]=e[1]*i+e[5]*r+e[9]*n+e[13]*h,t[2]=e[2]*i+e[6]*r+e[10]*n+e[14]*h,t[3]=e[3]*i+e[7]*r+e[11]*n+e[15]*h,t},ze=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=e[0],o=e[1],a=e[2],l=e[3],u=l*i+o*n-a*r,c=l*r+a*i-h*n,f=l*n+h*r-o*i,d=-h*i-o*r-a*n;return t[0]=u*l+d*-h+c*-a-f*-o,t[1]=c*l+d*-o+f*-h-u*-a,t[2]=f*l+d*-a+u*-o-c*-h,t[3]=s[3],t},He=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},qe=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Je=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Ye=function(t,s){var e=t[0],i=t[1],r=t[2],n=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(e-h)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(i-o)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-l)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(l))},Xe=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Ze=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},Ke=function(t,s,e){e*=.5;var i=Math.sin(e);return t[0]=i*s[0],t[1]=i*s[1],t[2]=i*s[2],t[3]=Math.cos(e),t},Qe=function(t,s){var e=2*Math.acos(s[3]),i=Math.sin(e/2);return i>EPSILON?(t[0]=s[0]/i,t[1]=s[1]/i,t[2]=s[2]/i):(t[0]=1,t[1]=0,t[2]=0),e},ti=function(t,s){var e=dot$2(t,s);return Math.acos(2*e*e-1)},si=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=e[0],a=e[1],l=e[2],u=e[3];return t[0]=i*u+h*o+r*l-n*a,t[1]=r*u+h*a+n*o-i*l,t[2]=n*u+h*l+i*a-r*o,t[3]=h*u-i*o-r*a-n*l,t},ei=function(t,s,e){e*=.5;var i=s[0],r=s[1],n=s[2],h=s[3],o=Math.sin(e),a=Math.cos(e);return t[0]=i*a+h*o,t[1]=r*a+n*o,t[2]=n*a-r*o,t[3]=h*a-i*o,t},ii=function(t,s,e){e*=.5;var i=s[0],r=s[1],n=s[2],h=s[3],o=Math.sin(e),a=Math.cos(e);return t[0]=i*a-n*o,t[1]=r*a+h*o,t[2]=n*a+i*o,t[3]=h*a-r*o,t},ri=function(t,s,e){e*=.5;var i=s[0],r=s[1],n=s[2],h=s[3],o=Math.sin(e),a=Math.cos(e);return t[0]=i*a+r*o,t[1]=r*a-i*o,t[2]=n*a+h*o,t[3]=h*a-n*o,t},ni=function(t,s){var e=s[0],i=s[1],r=s[2];return t[0]=e,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-e*e-i*i-r*r)),t},hi=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=Math.sqrt(e*e+i*i+r*r),o=Math.exp(n),a=h>0?o*Math.sin(h)/h:0;return t[0]=e*a,t[1]=i*a,t[2]=r*a,t[3]=o*Math.cos(h),t},oi=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=Math.sqrt(e*e+i*i+r*r),o=h>0?Math.atan2(h,n)/h:0;return t[0]=e*o,t[1]=i*o,t[2]=r*o,t[3]=.5*Math.log(e*e+i*i+r*r+n*n),t},ai=function(t,s,e){return oi(t,s),scale$2(t,t,e),hi(t,t),t},li=function(t,s,e,i){var r,n,h,o,a,l=s[0],u=s[1],c=s[2],f=s[3],d=e[0],p=e[1],m=e[2],g=e[3];return(n=l*d+u*p+c*m+f*g)<0&&(n=-n,d=-d,p=-p,m=-m,g=-g),1-n>EPSILON?(r=Math.acos(n),h=Math.sin(r),o=Math.sin((1-i)*r)/h,a=Math.sin(i*r)/h):(o=1-i,a=i),t[0]=o*l+a*d,t[1]=o*u+a*p,t[2]=o*c+a*m,t[3]=o*f+a*g,t},ui=function(t){var s=RANDOM(),e=RANDOM(),i=RANDOM(),r=Math.sqrt(1-s),n=Math.sqrt(s);return t[0]=r*Math.sin(2*Math.PI*e),t[1]=r*Math.cos(2*Math.PI*e),t[2]=n*Math.sin(2*Math.PI*i),t[3]=n*Math.cos(2*Math.PI*i),t},ci=function(t,s){var e=s[0],i=s[1],r=s[2],n=s[3],h=e*e+i*i+r*r+n*n,o=h?1/h:0;return t[0]=-e*o,t[1]=-i*o,t[2]=-r*o,t[3]=n*o,t},fi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},di=function(t,s){var e,i=s[0]+s[4]+s[8];if(i>0)e=Math.sqrt(i+1),t[3]=.5*e,e=.5/e,t[0]=(s[5]-s[7])*e,t[1]=(s[6]-s[2])*e,t[2]=(s[1]-s[3])*e;else{var r=0;s[4]>s[0]&&(r=1),s[8]>s[3*r+r]&&(r=2);var n=(r+1)%3,h=(r+2)%3;e=Math.sqrt(s[3*r+r]-s[3*n+n]-s[3*h+h]+1),t[r]=.5*e,e=.5/e,t[3]=(s[3*n+h]-s[3*h+n])*e,t[n]=(s[3*n+r]+s[3*r+n])*e,t[h]=(s[3*h+r]+s[3*r+h])*e}return t},pi=function(t,s,e,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ANGLE_ORDER,n=Math.PI/360;s*=n,i*=n,e*=n;var h=Math.sin(s),o=Math.cos(s),a=Math.sin(e),l=Math.cos(e),u=Math.sin(i),c=Math.cos(i);switch(r){case"xyz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"xzy":t[0]=h*l*c-o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c+h*a*u;break;case"yxz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;case"yzx":t[0]=h*l*c+o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c-h*a*u;break;case"zxy":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"zyx":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;default:throw new Error("Unknown angle order "+r)}return t},mi=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},gi=function(t,s){return Math.abs($e(t,s))>=1-EPSILON},yi=function(){var t=new ARRAY_TYPE(8);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},wi=function(t){var s=new ARRAY_TYPE(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},Si=function(t,s,e,i,r,n,h,o){var a=new ARRAY_TYPE(8);return a[0]=t,a[1]=s,a[2]=e,a[3]=i,a[4]=r,a[5]=n,a[6]=h,a[7]=o,a},vi=function(t,s,e,i,r,n,h){var o=new ARRAY_TYPE(8);o[0]=t,o[1]=s,o[2]=e,o[3]=i;var a=.5*r,l=.5*n,u=.5*h;return o[4]=a*i+l*e-u*s,o[5]=l*i+u*t-a*e,o[6]=u*i+a*s-l*t,o[7]=-a*t-l*s-u*e,o},bi=function(t,s,e){var i=.5*e[0],r=.5*e[1],n=.5*e[2],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h,t[1]=o,t[2]=a,t[3]=l,t[4]=i*l+r*a-n*o,t[5]=r*l+n*h-i*a,t[6]=n*l+i*o-r*h,t[7]=-i*h-r*o-n*a,t},Mi=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},Ti=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},xi=function(t,s){var e=Xe();ls(e,s);var i=new ARRAY_TYPE(3);return os(i,s),bi(t,e,i),t},Ci=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},Gi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},_i=function(t,s,e,i,r,n,h,o,a){return t[0]=s,t[1]=e,t[2]=i,t[3]=r,t[4]=n,t[5]=h,t[6]=o,t[7]=a,t},Ii=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Pi=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Ri=function(t,s){var e=s[4],i=s[5],r=s[6],n=s[7],h=-s[0],o=-s[1],a=-s[2],l=s[3];return t[0]=2*(e*l+n*h+i*a-r*o),t[1]=2*(i*l+n*o+r*h-e*a),t[2]=2*(r*l+n*a+e*o-i*h),t},Ai=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=.5*e[0],a=.5*e[1],l=.5*e[2],u=s[4],c=s[5],f=s[6],d=s[7];return t[0]=i,t[1]=r,t[2]=n,t[3]=h,t[4]=h*o+r*l-n*a+u,t[5]=h*a+n*o-i*l+c,t[6]=h*l+i*a-r*o+f,t[7]=-i*o-r*a-n*l+d,t},Ei=function(t,s,e){var i=-s[0],r=-s[1],n=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*i+a*n-l*r,f=a*h+u*r+l*i-o*n,d=l*h+u*n+o*r-a*i,p=u*h-o*i-a*r-l*n;return ei(t,s,e),i=t[0],r=t[1],n=t[2],h=t[3],t[4]=c*h+p*i+f*n-d*r,t[5]=f*h+p*r+d*i-c*n,t[6]=d*h+p*n+c*r-f*i,t[7]=p*h-c*i-f*r-d*n,t},Oi=function(t,s,e){var i=-s[0],r=-s[1],n=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*i+a*n-l*r,f=a*h+u*r+l*i-o*n,d=l*h+u*n+o*r-a*i,p=u*h-o*i-a*r-l*n;return ii(t,s,e),i=t[0],r=t[1],n=t[2],h=t[3],t[4]=c*h+p*i+f*n-d*r,t[5]=f*h+p*r+d*i-c*n,t[6]=d*h+p*n+c*r-f*i,t[7]=p*h-c*i-f*r-d*n,t},Fi=function(t,s,e){var i=-s[0],r=-s[1],n=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*i+a*n-l*r,f=a*h+u*r+l*i-o*n,d=l*h+u*n+o*r-a*i,p=u*h-o*i-a*r-l*n;return ri(t,s,e),i=t[0],r=t[1],n=t[2],h=t[3],t[4]=c*h+p*i+f*n-d*r,t[5]=f*h+p*r+d*i-c*n,t[6]=d*h+p*n+c*r-f*i,t[7]=p*h-c*i-f*r-d*n,t},Di=function(t,s,e){var i=e[0],r=e[1],n=e[2],h=e[3],o=s[0],a=s[1],l=s[2],u=s[3];return t[0]=o*h+u*i+a*n-l*r,t[1]=a*h+u*r+l*i-o*n,t[2]=l*h+u*n+o*r-a*i,t[3]=u*h-o*i-a*r-l*n,o=s[4],a=s[5],l=s[6],u=s[7],t[4]=o*h+u*i+a*n-l*r,t[5]=a*h+u*r+l*i-o*n,t[6]=l*h+u*n+o*r-a*i,t[7]=u*h-o*i-a*r-l*n,t},Li=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=e[0],a=e[1],l=e[2],u=e[3];return t[0]=i*u+h*o+r*l-n*a,t[1]=r*u+h*a+n*o-i*l,t[2]=n*u+h*l+i*a-r*o,t[3]=h*u-i*o-r*a-n*l,o=e[4],a=e[5],l=e[6],u=e[7],t[4]=i*u+h*o+r*l-n*a,t[5]=r*u+h*a+n*o-i*l,t[6]=n*u+h*l+i*a-r*o,t[7]=h*u-i*o-r*a-n*l,t},ki=function(t,s,e,i){if(Math.abs(i)<EPSILON)return Ci(t,s);var r=Math.hypot(e[0],e[1],e[2]);i*=.5;var n=Math.sin(i),h=n*e[0]/r,o=n*e[1]/r,a=n*e[2]/r,l=Math.cos(i),u=s[0],c=s[1],f=s[2],d=s[3];t[0]=u*l+d*h+c*a-f*o,t[1]=c*l+d*o+f*h-u*a,t[2]=f*l+d*a+u*o-c*h,t[3]=d*l-u*h-c*o-f*a;var p=s[4],m=s[5],g=s[6],y=s[7];return t[4]=p*l+y*h+m*a-g*o,t[5]=m*l+y*o+g*h-p*a,t[6]=g*l+y*a+p*o-m*h,t[7]=y*l-p*h-m*o-g*a,t},Ni=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t[6]=s[6]+e[6],t[7]=s[7]+e[7],t},Bi=function(t,s,e){var i=s[0],r=s[1],n=s[2],h=s[3],o=e[4],a=e[5],l=e[6],u=e[7],c=s[4],f=s[5],d=s[6],p=s[7],m=e[0],g=e[1],y=e[2],w=e[3];return t[0]=i*w+h*m+r*y-n*g,t[1]=r*w+h*g+n*m-i*y,t[2]=n*w+h*y+i*g-r*m,t[3]=h*w-i*m-r*g-n*y,t[4]=i*u+h*o+r*l-n*a+c*w+p*m+f*y-d*g,t[5]=r*u+h*a+n*o-i*l+f*w+p*g+d*m-c*y,t[6]=n*u+h*l+i*a-r*o+d*w+p*y+c*g-f*m,t[7]=h*u-i*o-r*a-n*l+p*w-c*m-f*g-d*y,t},$i=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t[6]=s[6]*e,t[7]=s[7]*e,t},Wi=function(t,s,e,i){var r=1-i;return dot$1(s,e)<0&&(i=-i),t[0]=s[0]*r+e[0]*i,t[1]=s[1]*r+e[1]*i,t[2]=s[2]*r+e[2]*i,t[3]=s[3]*r+e[3]*i,t[4]=s[4]*r+e[4]*i,t[5]=s[5]*r+e[5]*i,t[6]=s[6]*r+e[6]*i,t[7]=s[7]*r+e[7]*i,t},Vi=function(t,s){var e=squaredLength$1(s);return t[0]=-s[0]/e,t[1]=-s[1]/e,t[2]=-s[2]/e,t[3]=s[3]/e,t[4]=-s[4]/e,t[5]=-s[5]/e,t[6]=-s[6]/e,t[7]=s[7]/e,t},ji=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Ui=function(t,s){var e=squaredLength$1(s);if(e>0){e=Math.sqrt(e);var i=s[0]/e,r=s[1]/e,n=s[2]/e,h=s[3]/e,o=s[4],a=s[5],l=s[6],u=s[7],c=i*o+r*a+n*l+h*u;t[0]=i,t[1]=r,t[2]=n,t[3]=h,t[4]=(o-i*c)/e,t[5]=(a-r*c)/e,t[6]=(l-n*c)/e,t[7]=(u-h*c)/e}return t},zi=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Hi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},qi=function(t,s){var e=t[0],i=t[1],r=t[2],n=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7];return Math.abs(e-u)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(i-c)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(r-f)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(h-p)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(y))},Ji=function(){var t=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t},Yi=function(t){var s=new ARRAY_TYPE(2);return s[0]=t[0],s[1]=t[1],s},Xi=function(t,s){var e=new ARRAY_TYPE(2);return e[0]=t,e[1]=s,e},Zi=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ki=function(t,s,e){return t[0]=s,t[1]=e,t},Qi=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t},tr=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t},sr=function(t,s,e){return t[0]=s[0]*e[0],t[1]=s[1]*e[1],t},er=function(t,s,e){return t[0]=s[0]/e[0],t[1]=s[1]/e[1],t},ir=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},rr=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},nr=function(t,s,e){return t[0]=Math.min(s[0],e[0]),t[1]=Math.min(s[1],e[1]),t},hr=function(t,s,e){return t[0]=Math.max(s[0],e[0]),t[1]=Math.max(s[1],e[1]),t},ar=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},lr=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t},ur=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t},cr=function(t,s){var e=s[0]-t[0],i=s[1]-t[1];return Math.hypot(e,i)},fr=function(t,s){var e=s[0]-t[0],i=s[1]-t[1];return e*e+i*i},dr=function(t){var s=t[0],e=t[1];return Math.hypot(s,e)},pr=function(t){var s=t[0],e=t[1];return s*s+e*e},mr=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},gr=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},yr=function(t,s){var e=s[0],i=s[1],r=e*e+i*i;return r>0&&(r=1/Math.sqrt(r)),t[0]=s[0]*r,t[1]=s[1]*r,t},wr=function(t,s){return t[0]*s[0]+t[1]*s[1]},Sr=function(t,s,e){var i=s[0]*e[1]-s[1]*e[0];return t[0]=t[1]=0,t[2]=i,t},vr=function(t,s,e,i){var r=s[0],n=s[1];return t[0]=r+i*(e[0]-r),t[1]=n+i*(e[1]-n),t},br=function(t,s){s=s||1;var e=2*RANDOM()*Math.PI;return t[0]=Math.cos(e)*s,t[1]=Math.sin(e)*s,t},Mr=function(t,s,e){var i=s[0],r=s[1];return t[0]=e[0]*i+e[2]*r,t[1]=e[1]*i+e[3]*r,t},Tr=function(t,s,e){var i=s[0],r=s[1];return t[0]=e[0]*i+e[2]*r+e[4],t[1]=e[1]*i+e[3]*r+e[5],t},xr=function(t,s,e){var i=s[0],r=s[1];return t[0]=e[0]*i+e[3]*r+e[6],t[1]=e[1]*i+e[4]*r+e[7],t},Cr=function(t,s,e){var i=s[0],r=s[1];return t[0]=e[0]*i+e[4]*r+e[12],t[1]=e[1]*i+e[5]*r+e[13],t},Gr=function(t,s,e,i){var r=s[0]-e[0],n=s[1]-e[1],h=Math.sin(i),o=Math.cos(i);return t[0]=r*o-n*h+e[0],t[1]=r*h+n*o+e[1],t},_r=function(t,s){var e=t[0],i=t[1],r=s[0],n=s[1],h=Math.sqrt((e*e+i*i)*(r*r+n*n)),o=h&&(e*r+i*n)/h;return Math.acos(Math.min(Math.max(o,-1),1))},Ir=function(t){return t[0]=0,t[1]=0,t},Pr=function(t){return"vec2("+t[0]+", "+t[1]+")"},Rr=function(t,s){return t[0]===s[0]&&t[1]===s[1]},Ar=function(t,s){var e=t[0],i=t[1],r=s[0],n=s[1];return Math.abs(e-r)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(i-n)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(n))};setMatrixArrayType=e,toRadian=n,equals$9=h,create$8=u,clone$8=p,copy$8=m,identity$5=g,fromValues$8=y,set$8=w,transpose$2=S,invert$5=v,adjoint$2=b,determinant$3=M,multiply$8=T,rotate$4=x,scale$8=C,fromRotation$4=G,fromScaling$3=_,str$8=I,frob$3=P,LDU=R,add$8=A,subtract$6=E,exactEquals$8=O,equals$8=F,multiplyScalar$3=D,multiplyScalarAndAdd$3=L,create$7=k,clone$7=N,copy$7=B,identity$4=$,fromValues$7=W,set$7=V,invert$4=j,determinant$2=U,multiply$7=z,rotate$3=H,scale$7=q,translate$3=J,fromRotation$3=Y,fromScaling$2=X,fromTranslation$3=Z,str$7=K,frob$2=Q,add$7=tt,subtract$5=st,multiplyScalar$2=et,multiplyScalarAndAdd$2=it,exactEquals$7=rt,equals$7=nt,create$6=ht,fromMat4$1=ot,clone$6=at,copy$6=lt,fromValues$6=ut,set$6=ct,identity$3=ft,transpose$1=dt,invert$3=pt,adjoint$1=mt,determinant$1=gt,multiply$6=yt,translate$2=wt,rotate$2=St,scale$6=vt,fromTranslation$2=bt,fromRotation$2=Mt,fromScaling$1=Tt,fromMat2d=xt,fromQuat$1=Ct,normalFromMat4=Gt,projection=_t,str$6=It,frob$1=Pt,add$6=Rt,subtract$4=At,multiplyScalar$1=Et,multiplyScalarAndAdd$1=Ot,exactEquals$6=Ft,equals$6=Dt,create$5=Lt,clone$5=kt,copy$5=Nt,fromValues$5=Bt,set$5=$t,identity$2=Wt,transpose=Vt,invert$2=jt,adjoint=Ut,determinant=zt,multiply$5=Ht,translate$1=qt,scale$5=Jt,rotate$1=Yt,rotateX$3=Xt,rotateY$3=Zt,rotateZ$3=Kt,fromTranslation$1=Qt,fromScaling=ts,fromRotation$1=ss,fromXRotation=es,fromYRotation=is,fromZRotation=rs,fromRotationTranslation$1=ns,fromQuat2=hs,getTranslation$1=os,getScaling=as,getRotation=ls,decompose=us,fromRotationTranslationScale=cs,fromRotationTranslationScaleOrigin=fs,fromQuat=ds,frustum=ps,perspectiveNO=ms,perspectiveZO=gs,perspectiveFromFieldOfView=ys,orthoNO=ws,orthoZO=Ss,lookAt=vs,targetTo=bs,str$5=Ms,frob=Ts,add$5=xs,subtract$3=Cs,multiplyScalar=Gs,multiplyScalarAndAdd=_s,exactEquals$5=Is,equals$5=Ps,create$4=Rs,clone$4=As,length$4=Es,fromValues$4=Os,copy$4=Fs,set$4=Ds,add$4=Ls,subtract$2=ks,multiply$4=Ns,divide$2=Bs,ceil$2=$s,floor$2=Ws,min$2=Vs,max$2=js,round$2=Us,scale$4=zs,scaleAndAdd$2=Hs,distance$2=qs,squaredDistance$2=Js,squaredLength$4=Ys,negate$2=Xs,inverse$2=Zs,normalize$4=Ks,dot$4=Qs,cross$2=te,lerp$4=se,slerp$1=ee,hermite=ie,bezier=re,random$3=ne,transformMat4$2=he,transformMat3$1=oe,transformQuat$1=ae,rotateX$2=le,rotateY$2=ue,rotateZ$2=ce,angle$1=fe,zero$2=de,str$4=pe,exactEquals$4=me,equals$4=ge,create$3=ye,clone$3=we,fromValues$3=Se,copy$3=ve,set$3=be,add$3=Me,subtract$1=Te,multiply$3=xe,divide$1=Ce,ceil$1=Ge,floor$1=_e,min$1=Ie,max$1=Pe,round$1=Re,scale$3=Ae,scaleAndAdd$1=Ee,distance$1=Oe,squaredDistance$1=Fe,length$3=De,squaredLength$3=Le,negate$1=ke,inverse$1=Ne,normalize$3=Be,dot$3=$e,cross$1=We,lerp$3=Ve,random$2=je,transformMat4$1=Ue,transformQuat=ze,zero$1=He,str$3=qe,exactEquals$3=Je,equals$3=Ye,create$2=Xe,identity$1=Ze,setAxisAngle=Ke,getAxisAngle=Qe,getAngle=ti,multiply$2=si,rotateX$1=ei,rotateY$1=ii,rotateZ$1=ri,calculateW=ni,exp=hi,ln=oi,pow=ai,slerp=li,random$1=ui,invert$1=ci,conjugate$1=fi,fromMat3=di,fromEuler=pi,str$2=mi,equals$2=gi,create$1=yi,clone$1=wi,fromValues$1=Si,fromRotationTranslationValues=vi,fromRotationTranslation=bi,fromTranslation=Mi,fromRotation=Ti,fromMat4=xi,copy$1=Ci,identity=Gi,set$1=_i,getDual=Ii,setDual=Pi,getTranslation=Ri,translate=Ai,rotateX=Ei,rotateY=Oi,rotateZ=Fi,rotateByQuatAppend=Di,rotateByQuatPrepend=Li,rotateAroundAxis=ki,add$1=Ni,multiply$1=Bi,scale$1=$i,lerp$1=Wi,invert=Vi,conjugate=ji,normalize$1=Ui,str$1=zi,exactEquals$1=Hi,equals$1=qi,create=Ji,clone=Yi,fromValues=Xi,copy=Zi,set=Ki,add=Qi,subtract=tr,multiply=sr,divide=er,ceil=ir,floor=rr,min=nr,max=hr,round=ar,scale=lr,scaleAndAdd=ur,distance=cr,squaredDistance=fr,length=dr,squaredLength=pr,negate=mr,inverse=gr,normalize=yr,dot=wr,cross=Sr,lerp=vr,random=br,transformMat2=Mr,transformMat2d=Tr,transformMat3=xr,transformMat4=Cr,rotate=Gr,angle=_r,zero=Ir,str=Pr,exactEquals=Rr,equals=Ar,EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random,ANGLE_ORDER="zyx",degree=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),common={__proto__:null,EPSILON:EPSILON,get h(){return ARRAY_TYPE},o:RANDOM,l:ANGLE_ORDER,u:e,m:n,equals:h},mul$8=T,sub$6=E,mat2=Object.freeze({__proto__:null,create:u,clone:p,S:m,identity:g,v:y,set:w,M:S,T:v,C:b,G:M,multiply:T,rotate:x,scale:C,_:G,I:_,P:I,R:P,A:R,add:A,O:E,F:O,equals:F,D:D,L:L,mul:mul$8,sub:sub$6}),mul$7=z,sub$5=st,mat2d=Object.freeze({__proto__:null,create:k,clone:N,S:B,identity:$,v:W,set:V,T:j,G:U,multiply:z,rotate:H,scale:q,translate:J,_:Y,I:X,N:Z,P:K,R:Q,add:tt,O:st,D:et,L:it,F:rt,equals:nt,mul:mul$7,sub:sub$5}),mul$6=yt,sub$4=At,mat3=Object.freeze({__proto__:null,create:ht,B:ot,clone:at,S:lt,v:ut,set:ct,identity:ft,M:dt,T:pt,C:mt,G:gt,multiply:yt,translate:wt,rotate:St,scale:vt,N:bt,_:Mt,I:Tt,$:xt,W:Ct,V:Gt,j:_t,P:It,R:Pt,add:Rt,O:At,D:Et,L:Ot,F:Ft,equals:Dt,mul:mul$6,sub:sub$4}),perspective=ms,ortho=ws,mul$5=Ht,sub$3=Cs,mat4=Object.freeze({__proto__:null,create:Lt,clone:kt,S:Nt,v:Bt,set:$t,identity:Wt,M:Vt,T:jt,C:Ut,G:zt,multiply:Ht,translate:qt,scale:Jt,rotate:Yt,U:Xt,H:Zt,J:Kt,N:Qt,I:ts,_:ss,Y:es,X:is,Z:rs,K:ns,tt:hs,st:os,et:as,it:ls,rt:us,nt:cs,ht:fs,W:ds,ot:ps,lt:ms,perspective:perspective,ut:gs,ct:ys,ft:ws,dt:ortho,gt:Ss,yt:vs,wt:bs,P:Ms,R:Ts,add:xs,O:Cs,D:Gs,L:_s,F:Is,equals:Ps,mul:mul$5,sub:sub$3}),sub$2=ks,mul$4=Ns,div$2=Bs,dist$2=qs,sqrDist$2=Js,len$4=Es,sqrLen$4=Ys,t=Rs(),forEach$2=function(s,e,i,r,n,h){var o,a;for(e||(e=3),i||(i=0),a=r?Math.min(r*e+i,s.length):s.length,o=i;o<a;o+=e)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],n(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2];return s},vec3=Object.freeze({__proto__:null,create:Rs,clone:As,length:Es,v:Os,S:Fs,set:Ds,add:Ls,O:ks,multiply:Ns,St:Bs,ceil:$s,floor:Ws,min:Vs,max:js,round:Us,scale:zs,vt:Hs,bt:qs,Mt:Js,Tt:Ys,xt:Xs,inverse:Zs,normalize:Ks,Ct:Qs,Gt:te,_t:se,It:ee,Pt:ie,Rt:re,random:ne,At:he,Et:oe,Ot:ae,U:le,H:ue,J:ce,angle:fe,Ft:de,P:pe,F:me,equals:ge,sub:sub$2,mul:mul$4,div:div$2,Dt:dist$2,Lt:sqrDist$2,kt:len$4,Nt:sqrLen$4,forEach:forEach$2}),sub$1=Te,mul$3=xe,div$1=Ce,dist$1=Oe,sqrDist$1=Fe,len$3=De,sqrLen$3=Le,forEach$1=function(){var t=ye();return function(s,e,i,r,n,h){var o,a;for(e||(e=4),i||(i=0),a=r?Math.min(r*e+i,s.length):s.length,o=i;o<a;o+=e)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],t[3]=s[o+3],n(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2],s[o+3]=t[3];return s}}(),vec4=Object.freeze({__proto__:null,create:ye,clone:we,v:Se,S:ve,set:be,add:Me,O:Te,multiply:xe,St:Ce,ceil:Ge,floor:_e,min:Ie,max:Pe,round:Re,scale:Ae,vt:Ee,bt:Oe,Mt:Fe,length:De,Tt:Le,xt:ke,inverse:Ne,normalize:Be,Ct:$e,Gt:We,_t:Ve,random:je,At:Ue,Ot:ze,Ft:He,P:qe,F:Je,equals:Ye,sub:sub$1,mul:mul$3,div:div$1,Dt:dist$1,Lt:sqrDist$1,kt:len$3,Nt:sqrLen$3,forEach:forEach$1}),clone$2=we,fromValues$2=Se,copy$2=ve,set$2=be,add$2=Me,mul$2=si,scale$2=Ae,dot$2=$e,lerp$2=Ve,length$2=De,len$2=length$2,squaredLength$2=Le,sqrLen$2=squaredLength$2,normalize$2=Be,exactEquals$2=Je,rotationTo=function(){var t=Rs(),s=Os(1,0,0),e=Os(0,1,0);return function(i,r,n){var h=Qs(r,n);return h<-.999999?(te(t,s,r),len$4(t)<1e-6&&te(t,e,r),Ks(t,t),Ke(i,t,Math.PI),i):h>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(te(t,r,n),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+h,normalize$2(i,i))}}(),sqlerp=function(){var t=Xe(),s=Xe();return function(e,i,r,n,h,o){return li(t,i,h,o),li(s,r,n,o),li(e,t,s,2*o*(1-o)),e}}(),setAxes=function(){var t=ht();return function(s,e,i,r){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],normalize$2(s,di(s,t))}}(),quat=Object.freeze({__proto__:null,create:Xe,identity:Ze,Bt:Ke,$t:Qe,Wt:ti,multiply:si,U:ei,H:ii,J:ri,Vt:ni,exp:hi,jt:oi,pow:ai,It:li,random:ui,T:ci,Ut:fi,zt:di,Ht:pi,P:mi,clone:clone$2,v:fromValues$2,S:copy$2,set:set$2,add:add$2,mul:mul$2,scale:scale$2,Ct:dot$2,_t:lerp$2,length:length$2,kt:len$2,Tt:squaredLength$2,Nt:sqrLen$2,normalize:normalize$2,F:exactEquals$2,equals:gi,qt:rotationTo,Jt:sqlerp,Yt:setAxes}),getReal=copy$2,setReal=copy$2,mul$1=Bi,dot$1=dot$2,length$1=length$2,len$1=length$1,squaredLength$1=squaredLength$2,sqrLen$1=squaredLength$1,quat2=Object.freeze({__proto__:null,create:yi,clone:wi,v:Si,Xt:vi,K:bi,N:Mi,_:Ti,B:xi,S:Ci,identity:Gi,set:_i,Zt:getReal,Kt:Ii,Qt:setReal,ts:Pi,st:Ri,translate:Ai,U:Ei,H:Oi,J:Fi,ss:Di,es:Li,rs:ki,add:Ni,multiply:Bi,mul:mul$1,scale:$i,Ct:dot$1,_t:Wi,T:Vi,Ut:ji,length:length$1,kt:len$1,Tt:squaredLength$1,Nt:sqrLen$1,normalize:Ui,P:zi,F:Hi,equals:qi}),len=dr,sub=tr,mul=sr,div=er,dist=cr,sqrDist=fr,sqrLen=pr,forEach=function(){var t=Ji();return function(s,e,i,r,n,h){var o,a;for(e||(e=2),i||(i=0),a=r?Math.min(r*e+i,s.length):s.length,o=i;o<a;o+=e)t[0]=s[o],t[1]=s[o+1],n(t,t,h),s[o]=t[0],s[o+1]=t[1];return s}}(),vec2=Object.freeze({__proto__:null,create:Ji,clone:Yi,v:Xi,S:Zi,set:Ki,add:Qi,O:tr,multiply:sr,St:er,ceil:ir,floor:rr,min:nr,max:hr,round:ar,scale:lr,vt:ur,bt:cr,Mt:fr,length:dr,Tt:pr,xt:mr,inverse:gr,normalize:yr,Ct:wr,Gt:Sr,_t:vr,random:br,ns:Mr,hs:Tr,Et:xr,At:Cr,rotate:Gr,angle:_r,Ft:Ir,P:Pr,F:Rr,equals:Ar,kt:len,sub:sub,mul:mul,div:div,Dt:dist,Lt:sqrDist,Nt:sqrLen,forEach:forEach}),globalThis.ls=common,globalThis.ls.us=mat2,globalThis.ls.cs=mat2d,globalThis.ls.fs=mat3,globalThis.ls.ds=mat4,globalThis.ls.ps=quat,globalThis.ls.gs=quat2,globalThis.ls.ys=vec2,globalThis.ls.ws=vec3,globalThis.ls.Ss=vec4}var t,EPSILON,ARRAY_TYPE,RANDOM,ANGLE_ORDER,degree,common,mul$8,sub$6,mat2,mul$7,sub$5,mat2d,mul$6,sub$4,mat3,perspective,ortho,mul$5,sub$3,mat4,sub$2,mul$4,div$2,dist$2,sqrDist$2,len$4,sqrLen$4,forEach$2,vec3,sub$1,mul$3,div$1,dist$1,sqrDist$1,len$3,sqrLen$3,forEach$1,vec4,clone$2,fromValues$2,copy$2,set$2,add$2,mul$2,scale$2,dot$2,lerp$2,length$2,len$2,squaredLength$2,sqrLen$2,normalize$2,exactEquals$2,rotationTo,sqlerp,setAxes,quat,getReal,setReal,mul$1,dot$1,length$1,len$1,squaredLength$1,sqrLen$1,quat2,len,sub,mul,div,dist,sqrDist,sqrLen,forEach,vec2,setMatrixArrayType,toRadian,equals$9,create$8,clone$8,copy$8,identity$5,fromValues$8,set$8,transpose$2,invert$5,adjoint$2,determinant$3,multiply$8,rotate$4,scale$8,fromRotation$4,fromScaling$3,str$8,frob$3,LDU,add$8,subtract$6,exactEquals$8,equals$8,multiplyScalar$3,multiplyScalarAndAdd$3,create$7,clone$7,copy$7,identity$4,fromValues$7,set$7,invert$4,determinant$2,multiply$7,rotate$3,scale$7,translate$3,fromRotation$3,fromScaling$2,fromTranslation$3,str$7,frob$2,add$7,subtract$5,multiplyScalar$2,multiplyScalarAndAdd$2,exactEquals$7,equals$7,create$6,fromMat4$1,clone$6,copy$6,fromValues$6,set$6,identity$3,transpose$1,invert$3,adjoint$1,determinant$1,multiply$6,translate$2,rotate$2,scale$6,fromTranslation$2,fromRotation$2,fromScaling$1,fromMat2d,fromQuat$1,normalFromMat4,projection,str$6,frob$1,add$6,subtract$4,multiplyScalar$1,multiplyScalarAndAdd$1,exactEquals$6,equals$6,create$5,clone$5,copy$5,fromValues$5,set$5,identity$2,transpose,invert$2,adjoint,determinant,multiply$5,translate$1,scale$5,rotate$1,rotateX$3,rotateY$3,rotateZ$3,fromTranslation$1,fromScaling,fromRotation$1,fromXRotation,fromYRotation,fromZRotation,fromRotationTranslation$1,fromQuat2,getTranslation$1,getScaling,getRotation,decompose,fromRotationTranslationScale,fromRotationTranslationScaleOrigin,fromQuat,frustum,perspectiveNO,perspectiveZO,perspectiveFromFieldOfView,orthoNO,orthoZO,lookAt,targetTo,str$5,frob,add$5,subtract$3,multiplyScalar,multiplyScalarAndAdd,exactEquals$5,equals$5,create$4,clone$4,length$4,fromValues$4,copy$4,set$4,add$4,subtract$2,multiply$4,divide$2,ceil$2,floor$2,min$2,max$2,round$2,scale$4,scaleAndAdd$2,distance$2,squaredDistance$2,squaredLength$4,negate$2,inverse$2,normalize$4,dot$4,cross$2,lerp$4,slerp$1,hermite,bezier,random$3,transformMat4$2,transformMat3$1,transformQuat$1,rotateX$2,rotateY$2,rotateZ$2,angle$1,zero$2,str$4,exactEquals$4,equals$4,create$3,clone$3,fromValues$3,copy$3,set$3,add$3,subtract$1,multiply$3,divide$1,ceil$1,floor$1,min$1,max$1,round$1,scale$3,scaleAndAdd$1,distance$1,squaredDistance$1,length$3,squaredLength$3,negate$1,inverse$1,normalize$3,dot$3,cross$1,lerp$3,random$2,transformMat4$1,transformQuat,zero$1,str$3,exactEquals$3,equals$3,create$2,identity$1,setAxisAngle,getAxisAngle,getAngle,multiply$2,rotateX$1,rotateY$1,rotateZ$1,calculateW,exp,ln,pow,slerp,random$1,invert$1,conjugate$1,fromMat3,fromEuler,str$2,equals$2,create$1,clone$1,fromValues$1,fromRotationTranslationValues,fromRotationTranslation,fromTranslation,fromRotation,fromMat4,copy$1,identity,set$1,getDual,setDual,getTranslation,translate,rotateX,rotateY,rotateZ,rotateByQuatAppend,rotateByQuatPrepend,rotateAroundAxis,add$1,multiply$1,scale$1,lerp$1,invert,conjugate,normalize$1,str$1,exactEquals$1,equals$1,create,clone,fromValues,copy,set,add,subtract,multiply,divide,ceil,floor,min,max,round,scale,scaleAndAdd,distance,squaredDistance,length,squaredLength,negate,inverse,normalize,dot,cross,lerp,random,transformMat2,transformMat2d,transformMat3,transformMat4,rotate,angle,zero,str,exactEquals,equals,tmpPoint1,tmpPoint2,tmpLine1,tmpLine2,lineInt,lineSegmentsIntersect,triangleArea,isLeft,isLeftOn,isRight,isRightOn,collinear,sqdist,polygonAt,polygonClear,polygonAppend,polygonMakeCCW,polygonReverse,polygonIsReflex,polygonCanSee,polygonCanSee2,polygonCopy,polygonGetCutEdges,polygonDecomp,polygonSlice,polygonIsSimple,getIntersectionPoint,polygonQuickDecomp,polygonRemoveCollinearPoints,polygonRemoveDuplicatePoints,scalar_eq,points_eq,ReadBrandList,RunTest,GetWindowsNTVersionName,s,a,c,i,l,f,d,r,a,o,arrayFlat,assertFail,isValidTypeChange,logDefendedObjectWarning,CheckDefendedObjectsUsedCorrectly,getObjectPropertySet,VerifyObjectPropertiesConsistent,isNegativeZero,padTwoDigits,hueToRGB,RequireStringOrNumber,SetNewCallback,DoAsyncifiedWork,DoNextAsyncifiedJob,ClearTimeCache,CheckActiveIdleTimeouts,lookupHtmlEntity,bbToHtmlReplacerFunc,IsWordBreakWhiteSpace,IsOpeningCJKPunctiationChar,IsContinuingCJKPunctuationChar,WordBreakTrimEnd,IsNewline,PlaneFromPoints,IsInFrontOfPlane,IsPointInFrontOfPlane,interpolateQuad,GetFormatSpecifiers,fillOrStrokeRect,ptToPx,getOffsetParam,CheckPendingPolls,SortZOrderList,GetDispatcher,MakeIWorldInstanceClass,GetDispatcher,GetTimelineState,GetTimelineState,GetTweenState,IsStaticTextureDataType,getActual,GetTypeFromFileExtension,AddScript,SortByInstLastCachedZIndex,SortByInstLastCachedZIndex,SortByInstZElevation,vec3EqualsXYZ,MaybePrepareLayerDraw,SortSolArray,IsSolArrayIdentical,NoActions,WrapIndex,GetExpressionFunc,EvalParams,EvalParams,GetInst,GetWorldInfo,GetInst_SDKv2,GetWorldInfo_SDKv2,GetObjectClass,GetLayer,CollMemory_Add,CollMemory_Remove,CollMemory_RemoveInstance,CollMemory_Get,DoOverlapCondition,FinishCollisionConditionPicking,FinishCollisionCondition,PickByUID_Normal,PickByUID_Inverted,GetNextParamMap,ValidateInternalAPIToken,ForEachOrdered_SortInstances,SortZOrderList,SortInstancesByValue,GetCameraInstance,GetLayout,SortFacesToDrawByDist,sqDistanceTo3D,distanceTo3D,lerp3d,lerp3d2,WrapModeToStr,GetMouseSdkInstance,GetKeyboardSdkInstance,StringFromCharCode,ResizeArray,DoForEachTrigger,CompareValues,RunLengthDecode,CloneDrawable,GetAudioSdkInstance,GetAudioDOMInterface,SetObjectTypeCollisionsEnabled,UnwrapIWorldInstance,CloneVec2,SplitConvexPolysOver8Points,SplitConvexPoly,getIndexForEase,ValidateTags,unaryminus,bothNumbers,add,subtract,multiply,divide,mod,pow,and,or;{let Er=function(t,s,e){e=e||0;var i,r,n,h,o,a,l,u=[0,0];return i=t[1][1]-t[0][1],r=t[0][0]-t[1][0],n=i*t[0][0]+r*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],a=h*s[0][0]+o*s[0][1],nn(l=i*o-h*r,0,e)||(u[0]=(o*n-r*a)/l,u[1]=(i*a-h*n)/l),u},Or=function(t,s,e,i){var r=s[0]-t[0],n=s[1]-t[1],h=i[0]-e[0],o=i[1]-e[1];if(h*n-o*r===0)return!1;var a=(r*(e[1]-t[1])+n*(t[0]-e[0]))/(h*n-o*r),l=(h*(t[1]-e[1])+o*(e[0]-t[0]))/(o*r-h*n);return a>=0&&a<=1&&l>=0&&l<=1},Fr=function(t,s,e){return(s[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(s[1]-t[1])},Dr=function(t,s,e){return Fr(t,s,e)>0},Lr=function(t,s,e){return Fr(t,s,e)>=0},kr=function(t,s,e){return Fr(t,s,e)<0},Nr=function(t,s,e){return Fr(t,s,e)<=0},Br=function(t,s,e,i){if(i){var r=tmpPoint1,n=tmpPoint2;r[0]=s[0]-t[0],r[1]=s[1]-t[1],n[0]=e[0]-s[0],n[1]=e[1]-s[1];var h=r[0]*n[0]+r[1]*n[1],o=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=Math.sqrt(n[0]*n[0]+n[1]*n[1]);return Math.acos(h/(o*a))<i}return 0===Fr(t,s,e)},$r=function(t,s){var e=s[0]-t[0],i=s[1]-t[1];return e*e+i*i},Wr=function(t,s){var e=t.length;return t[s<0?s%e+e:s%e]},Vr=function(t){t.length=0},jr=function(t,s,e,i){for(var r=e;r<i;r++)t.push(s[r])},Ur=function(t){for(var s=0,e=t,i=1;i<t.length;++i)(e[i][1]<e[s][1]||e[i][1]===e[s][1]&&e[i][0]>e[s][0])&&(s=i);return!Dr(Wr(t,s-1),Wr(t,s),Wr(t,s+1))&&(zr(t),!0)},zr=function(t){for(var s=[],e=t.length,i=0;i!==e;i++)s.push(t.pop());for(i=0;i!==e;i++)t[i]=s[i]},Hr=function(t,s){return kr(Wr(t,s-1),Wr(t,s),Wr(t,s+1))},qr=function(t,s,e){var i,r,n=tmpLine1,h=tmpLine2;if(Lr(Wr(t,s+1),Wr(t,s),Wr(t,e))&&Nr(Wr(t,s-1),Wr(t,s),Wr(t,e)))return!1;r=$r(Wr(t,s),Wr(t,e));for(var o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&Lr(Wr(t,s),Wr(t,e),Wr(t,o+1))&&Nr(Wr(t,s),Wr(t,e),Wr(t,o))&&(n[0]=Wr(t,s),n[1]=Wr(t,e),h[0]=Wr(t,o),h[1]=Wr(t,o+1),i=Er(n,h),$r(Wr(t,s),i)<r))return!1;return!0},Jr=function(t,s,e){for(var i=0;i!==t.length;++i)if(i!==s&&i!==e&&(i+1)%t.length!==s&&(i+1)%t.length!==e&&Or(Wr(t,s),Wr(t,e),Wr(t,i),Wr(t,i+1)))return!1;return!0},Yr=function(t,s,e,i){var r=i||[];if(Vr(r),s<e)for(var n=s;n<=e;n++)r.push(t[n]);else{for(n=0;n<=e;n++)r.push(t[n]);for(n=s;n<t.length;n++)r.push(t[n])}return r},Xr=function(t){for(var s=[],e=[],i=[],r=[],n=Number.MAX_VALUE,h=0;h<t.length;++h)if(Hr(t,h))for(var o=0;o<t.length;++o)if(qr(t,h,o)){e=Xr(Yr(t,h,o,r)),i=Xr(Yr(t,o,h,r));for(var a=0;a<i.length;a++)e.push(i[a]);e.length<n&&(s=e,n=e.length,s.push([Wr(t,h),Wr(t,o)]))}return s},Zr=function(t){var s=Xr(t);return s.length>0?Kr(t,s):[t]},Kr=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var e=[t],i=0;i<s.length;i++)for(var r=s[i],n=0;n<e.length;n++){var h=Kr(e[n],r);if(h){e.splice(n,1),e.push(h[0],h[1]);break}}return e}return r=s,i=t.indexOf(r[0]),n=t.indexOf(r[1]),-1!==i&&-1!==n&&[Yr(t,i,n),Yr(t,n,i)]},Qr=function(t){var s,e=t;for(s=0;s<e.length-1;s++)for(var i=0;i<s-1;i++)if(Or(e[s],e[s+1],e[i],e[i+1]))return!1;for(s=1;s<e.length-2;s++)if(Or(e[0],e[e.length-1],e[s],e[s+1]))return!1;return!0},tn=function(t,s,e,i,r){r=r||0;var n=s[1]-t[1],h=t[0]-s[0],o=n*t[0]+h*t[1],a=i[1]-e[1],l=e[0]-i[0],u=a*e[0]+l*e[1],c=n*l-a*h;return nn(c,0,r)?[0,0]:[(l*o-h*u)/c,(n*u-a*o)/c]},sn=function(t,s,e,i,r,n,h){n=n||100,h=h||0,r=r||25,s=void 0!==s?s:[],e=e||[],i=i||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,v=t;if(v.length<3)return s;if(++h>n)return console.warn("quickDecomp: max level ("+n+") reached."),s;for(var b=0;b<t.length;++b)if(Hr(S,b)){e.push(S[b]),u=c=Number.MAX_VALUE;for(var M=0;M<t.length;++M)Dr(Wr(S,b-1),Wr(S,b),Wr(S,M))&&Nr(Wr(S,b-1),Wr(S,b),Wr(S,M-1))&&(l=tn(Wr(S,b-1),Wr(S,b),Wr(S,M),Wr(S,M-1)),kr(Wr(S,b+1),Wr(S,b),l)&&(f=$r(S[b],l))<c&&(c=f,a=l,m=M)),Dr(Wr(S,b+1),Wr(S,b),Wr(S,M+1))&&Nr(Wr(S,b+1),Wr(S,b),Wr(S,M))&&(l=tn(Wr(S,b+1),Wr(S,b),Wr(S,M),Wr(S,M+1)),Dr(Wr(S,b-1),Wr(S,b),l)&&(f=$r(S[b],l))<u&&(u=f,o=l,p=M));if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,i.push(l),b<p?(jr(y,S,b,p+1),y.push(l),w.push(l),0!==m&&jr(w,S,m,S.length),jr(w,S,0,b+1)):(0!==b&&jr(y,S,b,S.length),jr(y,S,0,p+1),y.push(l),w.push(l),jr(w,S,m,b+1));else{if(m>p&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(M=m;M<=p;++M)Lr(Wr(S,b-1),Wr(S,b),Wr(S,M))&&Nr(Wr(S,b+1),Wr(S,b),Wr(S,M))&&(f=$r(Wr(S,b),Wr(S,M)))<d&&Jr(S,b,M)&&(d=f,g=M%t.length);b<g?(jr(y,S,b,g+1),0!==g&&jr(w,S,g,v.length),jr(w,S,0,b+1)):(0!==b&&jr(y,S,b,v.length),jr(y,S,0,g+1),jr(w,S,g,b+1))}return y.length<w.length?(sn(y,s,e,i,r,n,h),sn(w,s,e,i,r,n,h)):(sn(w,s,e,i,r,n,h),sn(y,s,e,i,r,n,h)),s}return s.push(t),s},en=function(t,s){for(var e=0,i=t.length-1;t.length>3&&i>=0;--i)Br(Wr(t,i-1),Wr(t,i),Wr(t,i+1),s)&&(t.splice(i%t.length,1),e++);return e},rn=function(t,s){for(var e=t.length-1;e>=1;--e)for(var i=t[e],r=e-1;r>=0;--r)hn(i,t[r],s)&&t.splice(e,1)},nn=function(t,s,e){return e=e||0,Math.abs(t-s)<=e},hn=function(t,s,e){return nn(t[0],s[0],e)&&nn(t[1],s[1],e)};lineInt=Er,lineSegmentsIntersect=Or,triangleArea=Fr,isLeft=Dr,isLeftOn=Lr,isRight=kr,isRightOn=Nr,collinear=Br,sqdist=$r,polygonAt=Wr,polygonClear=Vr,polygonAppend=jr,polygonMakeCCW=Ur,polygonReverse=zr,polygonIsReflex=Hr,polygonCanSee=qr,polygonCanSee2=Jr,polygonCopy=Yr,polygonGetCutEdges=Xr,polygonDecomp=Zr,polygonSlice=Kr,polygonIsSimple=Qr,getIntersectionPoint=tn,polygonQuickDecomp=sn,polygonRemoveCollinearPoints=en,polygonRemoveDuplicatePoints=rn,scalar_eq=nn,points_eq=hn,tmpPoint1=[],tmpPoint2=[],tmpLine1=[],tmpLine2=[],self.vs={bs:Zr,Ms:sn,Ts:Qr,xs:en,Cs:rn,Gs:Ur}}{let on=!1,an=!1,un="dev";const cn=Symbol("Construct internal API token");let fn=16;const dn=self._s=class{constructor(){throw TypeError("static class can't be instantiated")}static Is(){if(fn<=0)throw new Error("cannot obtain internal API token");return--fn,cn}static Ps(){on=!0}static Rs(){return on}static As(){an=!0}static Es(){return an}static Os(t){un=t}static Fs(){return un}static Ds(){return"final"===un}};dn.Ls=!1,dn.ks=!1,dn.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ns={}}{const pn=self._s;pn.Bs=class{constructor(t){this.$s=t,this.Ws=new Map,this.Vs()}Vs(){let t=this.$s;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const s=t.split("&");for(const t of s)this.js(t)}js(t){if(!t)return;if(!t.includes("="))return void this.Ws.set(t,null);const s=t.indexOf("="),e=decodeURIComponent(t.substring(0,s)),i=decodeURIComponent(t.substring(s+1));this.Ws.set(e,i)}Us(){for(const t of this.Ws)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}zs(t){return this.Ws.has(t)}Hs(t){const s=this.Ws.get(t);return void 0===s?null:s}qs(){history.replaceState("",document.title,location.pathname+location.search)}Js(t){this.$s=t,this.Ws.clear(),this.Vs()}},pn.Ys=new pn.Bs(location.search),pn.Xs=new pn.Bs(location.hash),pn.Ys.zs("perf")&&(pn.Zs=!0),"dev"!==pn.Ys.Hs("mode")&&pn.Os("final")}{let mn=function(t){const s=parseFloat(t);return wn.get(s)||(s>=13?"11":"NT "+t)};GetWindowsNTVersionName=mn;const gn=self._s,yn="(unknown)";gn.Ks={Qs:yn,te:yn,se:yn,ee:yn,ie:NaN,re:yn,ne:"browser",he:!0,oe:!1,ae:!1,le:!1,ue:async()=>{}};const wn=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),Sn=navigator.userAgent,vn=navigator.userAgentData;if(vn&&vn.brands.length>0){let Mn=function(t){let s="",e="",i="",r="";for(const n of t){const t=Tn.get(n.brand);!s&&t&&(s=t,e=n.version);const h=xn.get(n.brand);!i&&h&&(i=h,r=n.version)}s||"Chromium"!==i||(gn.Ks.se="Chromium",gn.Ks.ee=r),gn.Ks.se=s||yn,gn.Ks.ee=e||yn,gn.Ks.re=i||yn};ReadBrandList=Mn,gn.Ks.Qs=vn.platform,gn.Ks.oe=vn.mobile,gn.Ks.he=!gn.Ks.oe;const Tn=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),xn=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);Mn(vn.brands);let Cn=!1;gn.Ks.ue=async()=>{if(!Cn)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);Mn(t.fullVersionList),"Windows"===gn.Ks.Qs?gn.Ks.te=mn(t.platformVersion):gn.Ks.te=t.platformVersion,Cn=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let Gn=function(t,s){const e=Array.isArray(t)?t:[t];for(const t of e){const e=t.exec(Sn);if(e){s(e);break}}};RunTest=Gn,Gn(/windows\s+nt\s+([\d\.]+)/i,t=>{gn.Ks.Qs="Windows";const s=t[1];gn.Ks.te=mn(s)}),Gn(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{gn.Ks.Qs="macOS",gn.Ks.te=t[1].replace(/_/g,".")}),Gn(/CrOS/,()=>{gn.Ks.Qs="Chrome OS"}),Gn(/linux|openbsd|freebsd|netbsd/i,()=>{gn.Ks.Qs="Linux"}),Gn(/android/i,()=>{gn.Ks.Qs="Android"}),Gn(/android\s+([\d\.]+)/i,t=>{gn.Ks.Qs="Android",gn.Ks.te=t[1]}),gn.Ks.Qs===yn&&(Gn(/(iphone|ipod|ipad)/i,t=>{gn.Ks.Qs="iOS"}),Gn([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{gn.Ks.Qs="iOS",gn.Ks.te=t[1].replace(/_/g,".")}));const _n=/chrome\//i.test(Sn),In=/chromium\//i.test(Sn),Pn=/edg\//i.test(Sn),Rn=/OPR\//.test(Sn),An=/nwjs/i.test(Sn),En=/safari\//i.test(Sn),On=/webkit/i.test(Sn);Pn||Rn||Gn(/chrome\/([\d\.]+)/i,t=>{gn.Ks.se="Chrome",gn.Ks.ee=t[1],gn.Ks.re="Chromium"}),Gn(/edg\/([\d\.]+)/i,t=>{gn.Ks.se="Edge",gn.Ks.ee=t[1],gn.Ks.re="Chromium"}),Gn(/OPR\/([\d\.]+)/,t=>{gn.Ks.se="Opera",gn.Ks.ee=t[1],gn.Ks.re="Chromium"}),Gn(/chromium\/([\d\.]+)/i,t=>{gn.Ks.se="Chromium",gn.Ks.ee=t[1],gn.Ks.re="Chromium"}),Gn(/nwjs\/[0-9.]+/i,t=>{gn.Ks.se="NW.js",gn.Ks.ee=t[1],gn.Ks.re="Chromium",gn.Ks.ne="nwjs"}),Gn(/firefox\/([\d\.]+)/i,t=>{gn.Ks.se="Firefox",gn.Ks.ee=t[1],gn.Ks.re="Gecko"}),!En||_n||In||Pn||Rn||An||(gn.Ks.se="Safari",gn.Ks.re="WebKit",Gn(/version\/([\d\.]+)/i,t=>{gn.Ks.ee=t[1]}),Gn(/crios\/([\d\.]+)/i,t=>{gn.Ks.se="Chrome for iOS",gn.Ks.ee=t[1]}),Gn(/fxios\/([\d\.]+)/i,t=>{gn.Ks.se="Firefox for iOS",gn.Ks.ee=t[1]}),Gn(/edgios\/([\d\.]+)/i,t=>{gn.Ks.se="Edge for iOS",gn.Ks.ee=t[1]})),gn.Ks.re===yn&&On&&(gn.Ks.re="WebKit"),"Android"===gn.Ks.Qs&&"Safari"===gn.Ks.se&&(gn.Ks.se="Stock");const Fn=new Set(["Windows","macOS","Linux","Chrome OS"]).has(gn.Ks.Qs)||"nwjs"===gn.Ks.ne;gn.Ks.he=Fn,gn.Ks.oe=!Fn}"Chrome"===gn.Ks.se&&"browser"===gn.Ks.ne&&/wv\)/.test(Sn)&&(gn.Ks.ne="webview"),"nwjs"!==gn.Ks.ne&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(gn.Ks.ne="webapp"),gn.Ks.ie=parseFloat(gn.Ks.ee);const bn="macOS"===gn.Ks.Qs&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2;bn&&(gn.Ks.Qs="iOS",gn.Ks.te=gn.Ks.ee,gn.Ks.he=!1,gn.Ks.oe=!0,gn.Ks.le=!0),gn.Ks.ae="macOS"===gn.Ks.Qs||"iOS"===gn.Ks.Qs}{let Dn=function(t){return new Promise((s,e)=>{t.onsuccess=()=>s(t.result),t.onerror=()=>e(t.error)})},Ln=function(t){return new Promise((s,e)=>{t.oncomplete=()=>s(),t.onerror=()=>e(t.error),t.onabort=()=>e(t.error)})},kn=function(t,s){return qn(t,s)},Nn=function(t,s){return qn(t,s,!0)},Bn=function(t){$n(t);let s=Un.get(t);return s instanceof Promise||(s=Jn(t),Un.set(t,s),s.catch(s=>Un.delete(t))),s},$n=function(t){if("string"!=typeof t)throw new TypeError("expected string")},Wn=function(t,s){const e=t.objectStore(jn).openCursor();return new Promise(t=>{const i=[];e.onsuccess=e=>{const r=e.target.result;if(r){switch(s){case"entries":i.push([r.key,r.value]);break;case"keys":i.push(r.key);break;case"values":i.push(r.value)}r.continue()}else t(i)}})};s=Dn,a=Ln,c=kn,i=Nn,l=Bn,f=$n,d=Wn;const Vn=2,jn="keyvaluepairs",Un=new Map,zn="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,Hn="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function qn(t,s,e=!1,i=!0){const r=await Bn(t);try{return s(r.transaction([jn],e?"readwrite":"readonly"))}catch(r){if(i&&"InvalidStateError"===r.name)return Un.delete(t),qn(t,s,e,!1);throw r}}async function Jn(t){$n(t);const s=indexedDB.open(t,Vn);return s.addEventListener("upgradeneeded",s=>{try{s.target.result.createObjectStore(jn)}catch(s){console.error(`Failed to create objectstore for database ${t}`,s)}}),Dn(s)}class Yn{constructor(t){$n(t),this.name=t}async ready(){await Bn(this.name)}set(t,s){return $n(t),Nn(this.name,async e=>{const i=Dn(e.objectStore(jn).put(s,t)),r=Ln(e);await Promise.all([r,i])})}get(t){return $n(t),kn(this.name,async s=>{const e=Dn(s.objectStore(jn).get(t)),i=Ln(s),[r,n]=await Promise.all([i,e]);return n})}delete(t){return $n(t),Nn(this.name,async s=>{const e=Dn(s.objectStore(jn).delete(t)),i=Ln(s);await Promise.all([i,e])})}clear(){return Nn(this.name,async t=>{const s=Dn(t.objectStore(jn).clear()),e=Ln(t);await Promise.all([e,s])})}keys(){return kn(this.name,async t=>{let s;s=Hn?Dn(t.objectStore(jn).getAllKeys()):Wn(t,"keys");const e=Ln(t),[i,r]=await Promise.all([e,s]);return r})}values(){return kn(this.name,async t=>{let s;s=zn?Dn(t.objectStore(jn).getAll()):Wn(t,"values");const e=Ln(t),[i,r]=await Promise.all([e,s]);return r})}entries(){return kn(this.name,async t=>{const s=Wn(t,"entries"),e=Ln(t),[i,r]=await Promise.all([e,s]);return r})}}self.ce=Yn}{let Xn=function(t){throw new Error(`"${t}" is not implemented`)},Zn=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},Kn=function(t){return"object"==typeof t?new Promise(s=>{const{port1:e,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),e.postMessage(t)}):Promise.resolve(t)};r=Xn,a=Zn,o=Kn;const Qn=self.ce,th=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class sh{constructor(t){this.fe=t,this.de=!this.fe,this.de||"undefined"!=typeof indexedDB||(this.de=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.pe=new Map}me(t){if(!this.de)for(const s of th)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.de=!0;break}}async ge(t){const s=this.pe.get(t),e=await Kn(s);return void 0===e?null:e}async ye(t,s){s=await Kn(s),this.pe.set(t,s)}we(t){this.pe.delete(t)}Se(){this.pe.clear()}ve(){return Array.from(this.pe.keys())}be(){return this.de}Me(){return this.pe}Te(t){this.pe=t}async getItem(t,s){if(Zn(s),this.de)return await this.ge(t);let e;try{e=await this.fe.get(t)}catch(s){return this.me(s),this.de?await this.ge(t):(console.error(`Error reading '${t}' from storage, returning null: `,s),null)}return void 0===e?null:e}async setItem(t,s,e){if(Zn(e),void 0===s&&(s=null),this.de)await this.ye(t,s);else try{await this.fe.set(t,s)}catch(e){if(this.me(e),!this.de)throw e;await this.ye(t,s)}}async removeItem(t,s){if(Zn(s),this.de)this.we(t);else try{await this.fe.delete(t)}catch(s){this.me(s),this.de?this.we(t):console.error(`Error removing '${t}' from storage: `,s)}}async clear(t){if(Zn(t),this.de)this.Se();else try{await this.fe.clear()}catch(t){this.me(t),this.de?this.Se():console.error("Error clearing storage: ",t)}}async keys(t){if(Zn(t),this.de)return this.ve();let s=[];try{s=await this.fe.keys()}catch(t){if(this.me(t),this.de)return this.ve();console.error("Error getting storage keys: ",t)}return s}ready(t){return Zn(t),this.de?Promise.resolve(!0):this.fe.ready()}xe(t){if(t.Ce)return new sh(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const e=new Qn(s);return new sh(e)}}length(t){Xn("localforage.length()")}key(t,s){Xn("localforage.key()")}iterate(t,s){Xn("localforage.iterate()")}Ge(t){Xn("localforage.setDriver()")}config(t){Xn("localforage.config()")}_e(t){Xn("localforage.defineDriver()")}Ie(){Xn("localforage.driver()")}supports(t){Xn("localforage.supports()")}dropInstance(){Xn("localforage.dropInstance()")}}self.localforage=new sh(new Qn("localforage"))}{const eh=self._s;if(eh.Pe={},eh.Pe.Re=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),eh.Pe.Ae="undefined"!=typeof HTMLDialogElement,eh.Pe.Ee=!!self.requestIdleCallback,eh.Pe.ImageBitmap=!!self.createImageBitmap,eh.Pe.ImageBitmapOptions=!1,eh.Pe.Oe=!1,eh.Pe.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{eh.Pe.ImageBitmapOptions=!0}).catch(()=>{eh.Pe.ImageBitmapOptions=!1})}catch(ih){eh.Pe.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{eh.Pe.Oe=10===t.width&&10===t.height}).catch(()=>{eh.Pe.Oe=!1})}catch(rh){eh.Pe.Oe=!1}}if(eh.Pe.Fe=!(!navigator.clipboard||!navigator.clipboard.readText),eh.Pe.De=!(!navigator.permissions||!navigator.permissions.query),eh.Pe.Le=!1,eh.Pe.De){const nh={name:"clipboard-read"};navigator.permissions.query(nh).then(()=>{eh.Pe.Le=!0}).catch(()=>{eh.Pe.Le=!1})}eh.Pe.ke=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),eh.Pe.Ne="undefined"!=typeof Proxy,eh.Pe.Be="undefined"!=typeof document&&void 0!==document.createElement("a").download,eh.Pe.$e="function"==typeof fetch,eh.Pe.We=!!(self.isSecureContext&&"Opera"!==eh.Ks.se&&navigator.storage&&navigator.storage.persist),eh.Pe.Ve=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),eh.Pe.je=(()=>{if("undefined"==typeof document)return!1;if("iOS"===eh.Ks.Qs)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),eh.Pe.ImageDecoder=void 0!==self.ImageDecoder,eh.Pe.Ue=!!self.VideoEncoder,eh.Pe.ze=!!self.showOpenFilePicker,eh.Pe.He=!!self.queryLocalFonts,eh.Pe.UserActivation=!!navigator.userActivation,eh.Pe.qe=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const s=t.getContext("2d");s.fillStyle="blue",s.fillRect(0,0,32,32);let e=null;try{t.convertToBlob?e=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(e=await new Promise(s=>t.toBlob(s,"image/webp",1))),eh.Pe.qe=e&&"image/webp"===e.type}catch(t){eh.Pe.qe=!1}})()}{const hh=self._s;if(!String.prototype.trimStart){const oh=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(oh,"")}}if(!String.prototype.trimEnd){const ah=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(ah,"")}}if(String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(hh.Je(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),!Array.prototype.flat){let lh=function(t,s){return t.reduce((t,e)=>s>0&&Array.isArray(e)?(Array.prototype.push.apply(t,lh(e,s-1)),t):(t.push(e),t),[])};arrayFlat=lh,Array.prototype.flat=function(t=1){return lh(this,t)}}Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((t,s)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((s,e)=>t({usage:s,quota:e}),s))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let uh=function(t){let s="Assertion failure: "+t+"\n\nStack trace:\n"+ch.Ye();console.error(s)};assertFail=uh;const ch=self._s;self.assert=function(t,s){t||uh(s)}}{const fh=self._s,dh=self.Ns;fh.Xe=function(t){return"number"==typeof t},fh.Ze=function(t){return fh.Xe(t)&&isFinite(t)},fh.Ke=function(t){if(!fh.Xe(t))throw new TypeError("expected number")},fh.Qe=function(t){fh.ti(t)},fh.si=function(t,s,e){if(!fh.Xe(t)||isNaN(t)||s>t||e<t)throw new RangeError("number outside of range")},fh.ei=function(...t){for(let s of t);},fh.ii=function(t){if(!fh.Ze(t))throw new TypeError("expected finite number")},fh.ri=function(t){fh.ti(t)},fh.ni=function(...t){for(let s of t);},fh.hi=function(t){return"string"==typeof t},fh.oi=function(t){if(!fh.hi(t))throw new TypeError("expected string")},fh.ai=function(t){fh.ti(t)},fh.li=function(...t){for(let s of t);},fh.ci=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},fh.fi=function(t){if(!fh.ci(t))throw new TypeError("expected simple object")},fh.di=function(t){if(!fh.ti(t)&&!fh.ci(t))throw new TypeError("expected simple object")},fh.pi=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},fh.mi=function(t){if(!fh.pi(t))throw new TypeError("expected object")},fh.gi=function(t){fh.ti(t)},fh.yi=function(...t){for(let s of t);},fh.wi=function(t){return fh.Si(t,Blob)&&"string"==typeof t.name},fh.bi=function(t){if(!fh.wi(t))throw new TypeError("expected file")},fh.Mi=function(t){fh.ti(t)},fh.Ti=function(t){return Array.isArray(t)},fh.xi=function(t){if(!fh.Ti(t))throw new TypeError("expected array")},fh.Ci=function(t){fh.ti(t)},fh.Gi=function(...t){for(let s of t);},fh._i=function(t){return!(!fh.Ti(t)||t.length&&!fh.Ti(t[0]))},fh.Ii=function(t){if(!fh._i(t))throw new TypeError("expected 2d array");for(let s of t)if(!fh.Ti(s))throw new TypeError("expected 2d array")},fh.Pi=function(t){fh.ti(t)},fh.Ri=function(t){return"function"==typeof t},fh.Ai=function(t,s){if(!fh.Ri(t))throw new TypeError("expected function");if(!fh.ti(s)&&t!==s)throw new TypeError("expected same function reference")},fh.Ei=function(t){fh.ti(t)},fh.Oi=function(...t){for(let s of t);},fh.Fi=function(t,...s){if(!fh.Ri(t))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let e of s)if(!fh.ti(e)&&t===e)return;throw new TypeError("expected same function reference")},fh.Di=function(...t){if(!fh.ti(t))for(let s of t);},fh.Li=function(t,s){return t instanceof s},fh.ki=function(t,...s){for(let e of s)if(fh.Li(t,e))return!0;return!1},fh.Ni=function(t,s){if(!fh.Li(t,s))throw new TypeError("unexpected type")},fh.Bi=function(t,s){fh.ti(t)},fh.$i=function(t,...s){for(let t of s);},fh.Wi=function(t,...s){if(!fh.ki(t,...s))throw new TypeError("unexpected type")},fh.Vi=function(t,...s){if(!fh.ti(t)&&!fh.ki(t,...s))throw new TypeError("unexpected type")},fh.ji=function(t,s){for(let e of t)if(!fh.Li(e,s))return!1;return!0},fh.Ui=function(t){for(let s of t)if(!fh.Ze(s))return!1;return!0},fh.zi=function(t,s){for(let s of t);},fh.Hi=function(t,s){if(!fh.ti(t))for(let s of t);},fh.Ji=function(t,s){if(!fh.ti(t))for(let s of t);},fh.Yi=function(t,...s){for(let s of t);},fh.Xi=function(t,...s){if(!fh.ti(t))for(let s of t);},fh.Zi=function(t,s){return!(fh.ti(t)||!fh.hi(t.nodeName))&&(!s||fh.Ki(t.nodeName,s))},fh.Qi=function(t,s){if(fh.ti(t)||!fh.hi(t.nodeName))throw new TypeError("expected DOM node");if(s&&!fh.Ki(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},fh.tr=function(t,s){fh.ti(t)},fh.sr=function(t,s){return!(fh.ti(t)||!fh.hi(t.tagName))&&(!s||fh.Ki(t.tagName,s))},fh.er=function(t,s){if(fh.ti(t)||!fh.hi(t.tagName))throw new TypeError("expected HTML element");if(s&&!fh.Ki(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},fh.ir=function(t,s){fh.ti(t)},fh.rr=function(t){return fh.sr(t,"img")||fh.sr(t,"canvas")||fh.sr(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},fh.nr=function(t){if(!fh.rr(t))throw new TypeError("expected drawable")},fh.hr=function(t){fh.ti(t)},fh.ar=function(t){return t instanceof ImageData||fh.rr(t)},fh.lr=function(t){if(!fh.ar(t))throw new TypeError("expected drawable or image data")},fh.ur=function(t){if(!fh.ti(t)&&!fh.ar(t))throw new TypeError("expected drawable or image data")},fh.cr=function(t){return"string"==typeof t||fh.dr&&t instanceof fh.dr||t instanceof fh.pr},fh.mr=function(t){if(!fh.cr(t))throw new TypeError("expected string-like")},fh.gr=function(t){fh.ti(t)},fh.yr=function(...t){for(let s of t);},fh.wr=function(){throw new Error("must be overridden")},fh.Sr=function(){throw new Error("not yet implemented")},fh.vr=function(t){return t.constructor===function*(){}.constructor},fh.br=function(t){if(!fh.vr(t))throw new Error("expected generator function")},fh.Mr=function(t){return"function"===t[Symbol.iterator]},fh.Tr=function(t){if(!fh.Mr(t))throw new Error("expected iterable")},fh.Cr=function(t){return!fh.ti(t)},fh.ti=function(t){return null==t},fh.Gr=function(t){let s=t[0].constructor;for(let e of t)if(e.constructor!==s)return!1;return s},fh._r=function(t,s){for(let e of t)if(!(e instanceof s))return!1;return!0};const ph=Object.getPrototypeOf(Uint8Array);fh.Ir=function(t){return fh.Li(t,ph)},fh.Pr=function(t){},fh.Rr=function(t){fh.Ar(t,ph)},fh.Er=function(t,...s){if(!fh.Or(t,...s))throw new TypeError("unexpected type")},fh.Or=function(t,...s){for(const e of s)if(fh.Si(t,e))return!0;return!1},fh.Ar=function(t,s){if(!fh.Si(t,s))throw new TypeError("unexpected type")},fh.Si=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},dh.Ke=fh.Ke,dh.Qe=fh.Qe,dh.ii=fh.ii,dh.ri=fh.ri,dh.oi=fh.oi,dh.ai=fh.ai,dh.mi=fh.mi,dh.gi=fh.gi,dh.xi=fh.xi,dh.Ci=fh.Ci,dh.Ai=fh.Ai,dh.Ei=fh.Ei,dh.Ni=fh.Ni,dh.Bi=fh.Bi,dh.ti=fh.ti}{let mh=function(t,s){let e=vh.getType(t),i=vh.getType(s);return"null"===e||"null"===i||"undefined"!==e&&"undefined"!==i&&e===i},gh=function(t){console.warn("[Defence] "+t+" @",vh.Ye())},yh=function(){if(Ih=-1,Th.size>0||xh.size>0){let t=[...new Set([...Th.keys()].map(t=>vh.getName(t)))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),Th.clear(),xh.clear()}},wh=function(t){let s=new Set;for(let e in t)s.add(e);return s},Sh=function(t,s){let e=wh(s),i=Ph.get(t);if(i){let s=[];for(let t of i.values())e.has(t)?e.delete(t):s.push(t);vh.Fr(s,[...e]),s.length&&console.warn(`[Defence] '${vh.getName(t)}' constructor creates inconsistent properties: ${s.join(", ")}`)}else Ph.set(t,e)};isValidTypeChange=mh,logDefendedObjectWarning=gh,CheckDefendedObjectsUsedCorrectly=yh,getObjectPropertySet=wh,VerifyObjectPropertiesConsistent=Sh;const vh=self._s,bh=new Map;let Mh;vh.Dr=function(t,s){console.log(`%c${t}`,`font-weight: bold; color:${s}`)},vh.Lr=function(t,...s){bh.has(t)||bh.set(t,-1),-1===bh.get(t)&&bh.set(t,requestAnimationFrame(()=>{console.log(`%c${t}`,"font-weight: bold",...s),bh.set(t,-1)}))},vh.kr=function(t){performance.mark(t),Mh||(Mh=new Map),Mh.has(t)||Mh.set(t,{Nr:0,total:0,Br:0,$r:1,toString:function(){return`${t} :: current => ${this.Nr.toPrecision(3)} :: average => ${this.Br.toPrecision(3)} :: calls => ${this.$r}`}})},vh.Wr=function(t){performance.measure(`measure-${t}`,t);const s=performance.getEntriesByName(`measure-${t}`)[0],e=Mh.get(t);e.Nr=s.duration,e.total+=e.Nr,e.Br=e.total/e.$r,console.log(e.toString()),e.$r++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},vh.Ye=function(){return(new Error).stack},vh.Vr=function(){},vh.cast=function(t,s){return t&&t instanceof s?t:null},vh.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":vh.Xe(t)?"<number>":vh.hi(t)?"<string>":vh.Ti(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":vh.Ri(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},vh.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},vh.range=function*(t,s){if(!isFinite(Math.abs(t-s)))throw new Error("Invalid parameters");if(t>s)for(let e=t-1;e>=s;e--)yield e;else for(let e=t;e<s;e++)yield e};let Th=new Map,xh=new Map,Ch=new WeakMap,Gh=new WeakMap;vh.jr={};const _h=new Set(["then","splice"]);vh.jr.get=function(t,s){return s in t||"symbol"==typeof s||_h.has(s)||gh(`Accessed missing property '${s}' from defended object '${vh.getName(t)}', returning undefined`),Gh.has(t)&&"symbol"!=typeof s&&!_h.has(s)&&gh(`Accessed property '${s}' on a released object '${vh.getName(t)}'\nObject was originally released at: ${Gh.get(t)})\nCall stack at access: `),t[s]},vh.jr.set=function(t,s,e){return s in t||Th.has(t)||gh(`Set non-existent property '${s}' to '${e}' on defended object '${vh.getName(t)}'`),mh(t[s],e)||Th.has(t)||gh(`Set '${vh.getType(t[s])}' property '${s}' to type '${vh.getType(e)}' on defended object '${vh.getName(t)}'`),Gh.has(t)&&gh(`Set property '${s}' on a released object '${vh.getName(t)}'\nObject was originally released at: ${Gh.get(t)})\nCall stack at access: `),t[s]=e,!0},vh.jr.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${vh.getName(t)}'`)},vh.jr.defineProperty=function(t,s,e){throw new ReferenceError(`Cannot define property '${s}' on defended object '${vh.getName(t)}'`)},vh.jr.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${vh.getName(t)}'`)};let Ih=-1;vh.Ur=class{constructor(){if(!vh.ks||!vh.Pe.Ne)return;let t=new.target,s=Object.create(t.prototype),e=new Proxy(s,vh.jr);return Th.set(s,e),xh.set(e,s),Ch.set(e,s),-1===Ih&&(Ih=requestAnimationFrame(yh)),e}},vh.zr=function(t){if(vh.ks&&vh.Pe.Ne&&t instanceof vh.Ur){if(!xh.has(t))return t;let s=xh.get(t);return xh.delete(t),Th.delete(s),t}return vh.Ls?Object.seal(t):t},vh.Hr=function(t,...s){let e;try{e=new t(...s)}catch(t){throw xh.clear(),Th.clear(),t}return vh.ks&&Sh(t,e),vh.zr(e)},vh.qr=function(t){let s=Ch.get(t);s&&Gh.set(s,vh.Ye())},vh.Jr=function(t){let s=Ch.get(t);return!!s&&!!Gh.get(s)};let Ph=new Map;vh.Yr=class{constructor(t){this.Xr="",t&&this.start(t)}start(t){vh.Zs&&(this.Xr=t,performance.mark(this.Xr+"-Start"))}end(){vh.Zs&&(performance.mark(this.Xr+"-End"),performance.measure(this.Xr,this.Xr+"-Start",this.Xr+"-End"))}next(t){vh.Zs&&(this.end(),this.Xr=t,performance.mark(this.Xr+"-Start"))}}}{let Rh=function(t){return 0===t&&1/t<0};isNegativeZero=Rh;const Ah=self._s,Eh=2*Math.PI,Oh=Math.PI/180,Fh=180/Math.PI;Ah.wrap=function(t,s,e){t=Math.floor(t),s=Math.floor(s);const i=(e=Math.floor(e))-s;if(0===i)return e;if(t<s){const r=e-(s-t)%i;return r===e?0:r}return s+(t-s)%i},Ah.Zr=function(t,s,e,i,r){const n=e-s;return 0===n&&0===i?t:(t-s)*(r-i)/n+i},Ah.normalize=function(t,s,e){return s-e===0?1:(t-s)/(e-s)},Ah.Kr=function(t,s,e){return t<s?s:t>e?e:t},Ah.Qr=function(t){return(t%=Eh)<0&&(t+=Eh),t},Ah.tn=function(t){return t*Oh},Ah.sn=function(t){return t*Fh},Ah.en=function(t,s){return Math.sqrt(t*t+s*s)},Ah.rn=function(t,s,e){return Math.sqrt(t*t+s*s+e*e)},Ah.nn=function(t,s,e,i){return Ah.en(e-t,i-s)},Ah.hn=function(t,s,e,i){const r=e-t,n=i-s;return r*r+n*n},Ah.an=function(t,s,e,i){return Math.atan2(i-s,e-t)},Ah.ln=function(t,s){if(t===s)return 0;let e=Math.sin(t),i=Math.cos(t),r=e*Math.sin(s)+i*Math.cos(s);return r>=1?0:r<=-1?Math.PI:Math.acos(r)},Ah.un=function(t,s,e){let i=Math.sin(t),r=Math.cos(t),n=Math.sin(s),h=Math.cos(s);return Math.acos(i*n+r*h)>e?r*n-i*h>0?Ah.Qr(t+e):Ah.Qr(t-e):Ah.Qr(s)},Ah.cn=function(t,s){let e=Math.sin(t);return Math.cos(t)*Math.sin(s)-e*Math.cos(s)<=0},Ah.fn=function(t,s,e,i=0){let r=Ah.ln(t,s);const n=Eh*i;return Ah.cn(s,t)?Ah.Qr(t+(r+n)*e):Ah.Qr(t-(r+n)*e)},Ah.dn=function(t,s,e,i=0){const r=Ah.ln(t,s),n=Eh*i;return Ah.cn(s,t)?Ah.Qr(t+(r+n)*e):Ah.Qr(t+(Eh-r+n)*e)},Ah.pn=function(t,s,e,i=0){const r=Ah.ln(t,s),n=Eh*i;return Ah.cn(s,t)?Ah.Qr(t-(-Eh+r-n)*e):Ah.Qr(t-(r+n)*e)},Ah.mn=function(t,s){const e=Ah.ln(t,s);return Ah.cn(t,s)?Ah.Qr(s-e):Ah.Qr(s+e)},Ah._t=function(t,s,e){return t+e*(s-t)},Ah.gn=function(t,s,e){return t===s?0:(e-t)/(s-t)},Ah.yn=function(t,s,e,i,r){return Ah._t(i,r,Ah.gn(t,s,e))},Ah.wn=function(t,s,e,i){return Ah._t(Ah._t(t,s,i),Ah._t(s,e,i),i)},Ah.Sn=function(t,s,e,i,r){return Ah._t(Ah.wn(t,s,e,r),Ah.wn(s,e,i,r),r)},Ah.vn=function(t,s,e){return(t+s+(t-s)*Math.cos(e*Math.PI))/2},Ah.bn=function(t){return t>0&&!(t-1&t)},Ah.Mn=function(t){--t;for(let s=1;s<32;s<<=1)t|=t>>s;return t+1},Ah.Tn=function(t,s){return Math.round(t*s)/s},Ah.xn=function(t,s){return Math.floor(t*s)/s},Ah.Cn=function(t,s){s=Math.max(Math.floor(s),0);const e=Math.pow(10,s);return Math.round(t*e)/e},Ah.Gn=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},Ah.toFixed=function(t,s){let e=t.toFixed(s),i=e.length-1;for(;i>=0&&"0"===e.charAt(i);--i);return i>=0&&"."===e.charAt(i)&&--i,i<0?e:e.substr(0,i+1)},Ah._n=function(t,s,e){return Ah.Kr(t,0,255)|Ah.Kr(s,0,255)<<8|Ah.Kr(e,0,255)<<16};const Dh=1024,Lh=1023,kh=16384,Nh=8191,Bh=-8192;Ah.In=function(t,s,e,i){return(t=Ah.Kr(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(s=Ah.Kr(Math.floor(1024*s),-8192,8191))<0&&(s+=16384),(e=Ah.Kr(Math.floor(1024*e),-8192,8191))<0&&(e+=16384),-(16384*t*16384*1024+16384*s*1024+1024*e+(i=Ah.Kr(Math.floor(1023*i),0,1023)))},Ah.Pn=function(t,s,e){return Ah.In(t,s,e,1)},Ah.Rn=function(t){if(t>=0)return(255&t)/255;{let s=Math.floor(-t/274877906944);return s>8191&&(s-=16384),s/1024}},Ah.An=function(t){if(t>=0)return((65280&t)>>8)/255;{let s=Math.floor(-t%274877906944/16777216);return s>8191&&(s-=16384),s/1024}},Ah.En=function(t){if(t>=0)return((16711680&t)>>16)/255;{let s=Math.floor(-t%16777216/1024);return s>8191&&(s-=16384),s/1024}},Ah.On=function(t){return Rh(t)?0:t>=0?1:Math.floor(-t%1024)/1023},Ah.Fn=function(t,s){for(t=Math.floor(t),s=Math.floor(s);0!==s;){let e=s;s=t%s,t=e}return t};const $h=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];Ah.Dn=function(t,s){if((t=Math.floor(t))===(s=Math.floor(s)))return[1,1];for(let e of $h){let i=t/e[0]*e[1];if(Math.abs(s-i)<1)return e.slice(0);if(i=t/e[1]*e[0],Math.abs(s-i)<1)return[e[1],e[0]]}let e=Ah.Fn(t,s);return[t/e,s/e]},Ah.Ln=function(t,s,e,i,r,n,h,o){const a=Math.min(t,e),l=Math.max(t,e),u=Math.min(r,h),c=Math.max(r,h);if(l<u||a>c)return!1;const f=Math.min(s,i),d=Math.max(s,i),p=Math.min(n,o),m=Math.max(n,o);if(d<p||f>m)return!1;const g=r-t+h-e,y=n-s+o-i,w=e-t,S=i-s,v=h-r,b=o-n,M=Math.abs(S*v-b*w),T=v*y-b*g;if(Math.abs(T)>M)return!1;const x=w*y-S*g;return Math.abs(x)<=M},Ah.kn=function(t,s,e,i,r,n,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(n<f||r>d)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||h>m)return!1;const g=a-t+u-e,y=l-s+c-i,w=e-t,S=i-s,v=u-a,b=c-l,M=Math.abs(S*v-b*w),T=v*y-b*g;if(Math.abs(T)>M)return!1;const x=w*y-S*g;return Math.abs(x)<=M},Ah.Nn=function(t,s,e,i,r){const n=Math.min(t,e),h=Math.max(t,e),o=Math.min(s,i),a=Math.max(s,i),l=r.Bn(),u=r.$n(),c=r.Wn(),f=r.Vn(),d=r.jn(),p=r.Un(),m=r.zn(),g=r.Hn();return Ah.kn(t,s,e,i,n,h,o,a,l,u,c,f)||Ah.kn(t,s,e,i,n,h,o,a,c,f,d,p)||Ah.kn(t,s,e,i,n,h,o,a,d,p,m,g)||Ah.kn(t,s,e,i,n,h,o,a,m,g,l,u)},Ah.qn=function(t,s,e,i,r){const n=Math.min(t,e),h=Math.max(t,e),o=Math.min(s,i),a=Math.max(s,i);let l=0;for(let u=r.length-4;l<=u;l+=2)if(Ah.kn(t,s,e,i,n,h,o,a,r[l],r[l+1],r[l+2],r[l+3]))return!0;return Ah.kn(t,s,e,i,n,h,o,a,r[l],r[l+1],r[0],r[1])};const Wh=2,Vh=1e-6;Ah.Jn=function(t,s,e,i,r,n,h,o){const a=e-t,l=o-n,u=a*l-(i-s)*(h-r);if(0===u)return 2;const c=((s-i)*(h-t)+a*(o-s))/u;return 0<c&&c<1.000001?(l*(h-t)+(r-h)*(o-s))/u:2},Ah.Yn=function(t,s,e,i,r,n,h,o,a){const l=(h-r)*a,u=(o-n)*a;return Ah.Jn(t,s,e,i,r-l,n-u,h+l,o+u)},Ah.Xn=function(t,s,e,i,r,n,h,o){const a=r-e,l=n-i,u=h-e,c=o-i,f=t-e,d=s-i,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,S=1/(p*y-m*m),v=(y*g-m*w)*S,b=(p*w-m*g)*S;return v>=0&&b>=0&&v+b<=1},Ah.Zn=function(t,s,e,i,r,n,h,o){const a=r-e,l=n-i,u=h-e,c=o-i,f=t-e,d=s-i,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,S=p*g-m*m,v=(g*y-m*w)/S,b=(p*w-m*y)/S;return[1-v-b,v,b]},Ah.Kn=function(t,s,e,i,r,n,h,o,a,l,u,c){return[t*i+s*h+e*l,t*r+s*o+e*u,t*n+s*a+e*c]}}{const jh=self._s;let Uh=null,zh="";if("undefined"!=typeof document){Uh=document;const Zh=document.querySelector("base");zh=Zh&&Zh.hasAttribute("href")?Zh.getAttribute("href"):"",zh&&(zh.startsWith("/")&&(zh=zh.substr(1)),zh.endsWith("/")||(zh+="/"))}jh.Qn=function(){return zh},jh.th=function(){if(!Uh)return"";const t=Uh.location;return jh.sh(t.origin+t.pathname)+zh},jh.sh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},jh.eh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},jh.ih=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},jh.rh=function(t,s){const e=t.lastIndexOf(".");return-1===e?t+"."+s:t.substr(0,e+1)+s},jh.nh=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},jh.hh=function(t){return t.replace(/\\/g,"/")},jh.oh=function(t,s){return s===(t?jh.ih(t).slice(1):"")},jh.ah=function(t,s){let e,i;return jh.wi(t)&&(e=jh.nh(t.name)),jh.hi(t)&&(e=jh.nh(t)),jh.wi(s)&&(i=jh.nh(s.name)),jh.hi(s)&&(i=jh.nh(s)),e===i},jh.uh=function(t){t=jh.hh(t);let s=/^\w\:\//.exec(t);s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const e=t.lastIndexOf("/")+1;let i,r="",n=t,h="";e>0&&(r=t.slice(0,e),n=t.slice(e)),i=n;const o=n.lastIndexOf(".");return o>0&&(h=n.slice(o),i=n.slice(0,-h.length)),{dir:r,fh:n,name:i,root:s,ext:h,dh:s+r+n}},jh.ph=function(t,s){return new Promise((e,i)=>{self.setTimeout(e,t,s)})},jh.mh=function(t){try{t()}catch(t){jh.Ls&&console.warn("Swallowed exception: ",t)}},jh.gh=function(){},jh.Ki=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},jh.yh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},jh.wh=function(t,s,e){t[e++]=s[0],t[e++]=s[1],t[e++]=s[2],t[e++]=s[3],t[e++]=s[4],t[e++]=s[5],t[e++]=s[6],t[e++]=s[7],t[e++]=s[8],t[e++]=s[9],t[e++]=s[10],t[e++]=s[11],t[e++]=s[12],t[e++]=s[13],t[e++]=s[14],t[e]=s[15]},jh.Sh=function(t,s){t.length=s},jh.bh=function(t){t&&0!==t.length&&jh.Sh(t,0)},jh.Mh=function(t){if(t){for(let s=0;s<t.length;s++){let e=t[s];jh.Sh(e,0)}jh.Sh(t,0)}},jh.Th=function(t,s,e){s|=0;const i=t.length;if(!(s<=i))for(let r=i;r<s;++r)t.push(e)},jh.xh=function(t,s,e){s|=0;const i=t.length;s<i?jh.Sh(t,s):s>i&&jh.Th(t,s,e)},jh.Ch=function(t,s){jh.bh(t),jh.Fr(t,s)},jh.Fr=function(t,s){if(s.length<1e4)t.push(...s);else for(let e=0,i=s.length;e<i;++e)t.push(s[e])},jh.Gh=function(t,s){if((s=Math.floor(s))<0||s>=t.length)return;let e=t.length-1;for(let i=s;i<e;++i)t[i]=t[i+1];jh.Sh(t,e)},jh._h=function(t,s){let e=t.indexOf(s);e>=0&&t.splice(e,1)},jh.Ih=function(t,s){let e=t.length;if(s.length!==e)return!1;for(let i=0;i<e;++i)if(t[i]!==s[i])return!1;return!0},jh.Ph=function(t,s){let e=[],i=0;for(let r=0,n=t.length;r<n;++r){let n=t[r];s(n)?e.push(n):(t[i]=n,++i)}return jh.Sh(t,i),e},jh.Rh=function(t,s){const e=t.length;let i=0;for(let e=0,r=t.length;e<r;++e){let r=t[e];s.has(r)||(t[i++]=r)}return jh.Sh(t,i),e-i},jh.Ah=function(t,s){return t===Math.floor(t)&&t>=0&&t<s.length},jh.Eh=function(t,s){if(!jh.Ah(t,s))throw new RangeError("array index out of bounds")},jh.Oh=function(t){return t.slice()},jh.Fh=function(t,s){let e=[];for(let i of t)if(jh.pi(i)){let t=s(i);if(!t)throw new Error("missing clone");if(t.constructor!==i.constructor)throw new Error("object is not a clone");e.push(t)}else jh.Ti(i)?e.push(jh.Fh(i,s)):e.push(i);return e},jh.Dh=function(t){let s=[];for(let e of t)s.push(e.slice());return s},jh.Lh=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},jh.kh=function(t,s,e){const i=new Set;for(const r of t.values())s(r)&&(e?i.add(e(r)):i.add(r));return i},jh.Nh=function(t,s){return t.union?t.union(s):new Set([...t,...s])},jh.Bh=function(t,s){for(const e of s)t.add(e);return t},jh.$h=function(t){for(let s of t)return s;return null},jh.xor=function(t,s){return!t!=!s},jh.compare=function(t,s,e){switch(s){case 0:return t===e;case 1:return t!==e;case 2:return t<e;case 3:return t<=e;case 4:return t>e;case 5:return t>=e;default:return!1}},jh.Wh=function(t){for(let s in t)if(t.hasOwnProperty(s))return!0;return!1},jh.Vh=function(t,s){return t.length?new Promise((e,i)=>{const r=[];let n=0,h=!1;for(let o=0,a=t.length;o<a;++o)r.push(void 0),t[o].then(i=>{h||(r[o]=i,++n,n===t.length?e(r):s(n,t.length))}).catch(t=>{h=!0,i(t)})}):Promise.resolve([])};let Hh=[];jh.jh=function(t){Hh.push(t)},jh.Uh=function(){let t=0;for(let s of Hh)t+=s();return Math.floor(t)};let qh=1;const Jh=new Map,Yh=new MessageChannel;Yh.port2.onmessage=function(t){const s=t.data,e=Jh.get(s);Jh.delete(s),e&&e(performance.now())},jh.zh=function(t){const s=qh++;return Jh.set(s,t),Yh.port1.postMessage(s),s},jh.Hh=function(t){Jh.delete(t)},jh.qh=jh.zh,jh.Jh=function(){return new Promise(t=>jh.qh(t))};const Xh=new Set;jh.Yh=function(t){const s=self.requestAnimationFrame(async e=>{await jh.Jh(),Xh.has(s)&&(Xh.delete(s),t(e))});return Xh.add(s),s},jh.Xh=function(t){Xh.has(t)&&(self.cancelAnimationFrame(t),Xh.delete(t))}}{const Kh=self._s;Kh.Zh=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},Kh.Kh=function(t){return!Kh.Zh(t)},Kh.Qh=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},Kh.so=function(t,s){return fetch(t,s).then(t=>(Kh.Qh(t),t))},Kh.eo=function(t){return Kh.so(t).then(t=>t.text())},Kh.io=function(t){return Kh.so(t).then(t=>t.json())},Kh.ro=function(t){return Kh.so(t).then(t=>t.blob())},Kh.no=function(t){return Kh.so(t).then(t=>t.arrayBuffer())},Kh.ho=function(t){return new Promise((s,e)=>{const i=new Image;i.onload=()=>s(i),i.onerror=t=>e(t),i.src=t})},Kh.oo=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((s,e)=>{const i=new FileReader;i.onload=()=>s(i.result),i.onerror=()=>e(i.error),i.readAsArrayBuffer(t)})},Kh.ao=function(t){return"function"==typeof t.text?t.text():new Promise((s,e)=>{const i=new FileReader;i.onload=()=>s(i.result),i.onerror=()=>e(i.error),i.readAsText(t)})},Kh.lo=function(t){return Kh.ao(t).then(t=>JSON.parse(t))},Kh.uo=async function(t,s){let e=URL.createObjectURL(t);try{const t=await Kh.ho(e);return URL.revokeObjectURL(e),e="",s&&"function"==typeof t.decode&&await t.decode(),t}finally{e&&URL.revokeObjectURL(e)}},Kh.co=function(t,s){if("undefined"!=typeof document&&"function"==typeof document.createElement){const e=document.createElement("canvas");return e.width=t,e.height=s,e}return new OffscreenCanvas(t,s)},Kh.fo=function(t,s,e){if("number"!=typeof e&&(e=1),s=s||"image/png",e=Kh.Kr(e,0,1),t.convertToBlob)return t.convertToBlob({type:s,quality:e});if(t.toBlob)return new Promise(i=>t.toBlob(i,s,e));throw new Error("could not convert canvas to blob")},Kh.do=function(t,s,e){const i=Kh.co(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),Kh.fo(i,s,e)},Kh.po=function(t,s,e){if(Kh.Pe.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>Kh.do(t,s,e));if(Kh.Pe.ImageBitmap)return createImageBitmap(t).then(t=>Kh.do(t,s,e));{const i=Kh.co(t.width,t.height);return i.getContext("2d").putImageData(t,0,0),Kh.fo(i,s,e)}},Kh.mo=function(t,s){t.clear();for(const e of s)t.add(e)},Kh.yo=function(t){const s=Object.create(null);for(const[e,i]of t.entries())s[e]=i;return s},Kh.wo=function(t,s){s.clear();for(const[e,i]of Object.entries(t))s.set(e,i)},Kh.So=function t(s){if("object"==typeof s&&null!==s){if(s instanceof Set)return{_c3type_:"set",data:[...s].map(s=>t(s))};if(s instanceof Map)return{_c3type_:"map",data:[...s].map(s=>[s[0],t(s[1])])};{const e=Object.create(null);for(const[i,r]of Object.entries(s))e[i]=t(r);return e}}return s},Kh.vo=function t(s){if("object"==typeof s&null!==s){if("set"===s._c3type_)return new Set(s.data.map(s=>t(s)));if("map"===s._c3type_)return new Map(s.data.map(s=>[s[0],t(s[1])]));{const e=Object.create(null);for(const[i,r]of Object.entries(s))e[i]=t(r);return e}}return s},Kh.bo=function(t){if(t.startsWith("--"))return t;let s="",e=!1,i=0;for(const r of t)"-"===r?i>0&&(e=!0):e?(s+=r.toUpperCase(),e=!1):s+=r,++i;return s},Kh.Mo=function(t){return"object"==typeof t&&"function"==typeof t.next},Kh.To=function(t,s){const e=[];if("function"==typeof s)for(let i=0;i<t;++i)e.push(s());else for(let i=0;i<t;++i)e.push(s);return e}}{let Qh=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},to=function(t,s,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(s-t)*e:e<.5?s:e<2/3?t+(s-t)*(2/3-e)*6:t};padTwoDigits=Qh,hueToRGB=to;const so=self._s,eo=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,io=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;so.xo=class{constructor(t,s,e,i){this.Co=NaN,this.Go=NaN,this._o=NaN,this.Io=NaN,this.Co=0,this.Go=0,this._o=0,this.Io=0,t instanceof so.xo?this.set(t):this.Po(t||0,s||0,e||0,i||0)}Ro(t,s,e){return this.Co=+t,this.Go=+s,this._o=+e,this.Kr(),this}Po(t,s,e,i){return this.Co=+t,this.Go=+s,this._o=+e,this.Io=+i,this.Kr(),this}set(t){return this.Co=t.Co,this.Go=t.Go,this._o=t._o,this.Io=t.Io,this}S(t){return this.set(t)}add(t){this.Co+=t.Co,this.Go+=t.Go,this._o+=t._o,this.Io+=t.Io,this.Kr()}Ao(t,s,e,i=0){this.Co+=+t,this.Go+=+s,this._o+=+e,this.Io+=+i,this.Kr()}Eo(t){this.Oo(Math.max(this.Co,t.Co)-Math.min(this.Co,t.Co)),this.Fo(Math.max(this.Go,t.Go)-Math.min(this.Go,t.Go)),this.Do(Math.max(this._o,t._o)-Math.min(this._o,t._o)),this.Lo(Math.max(this.Io,t.Io)-Math.min(this.Io,t.Io)),this.Kr()}ko(t){this.Co=t.Co,this.Go=t.Go,this._o=t._o}Oo(t){this.Co=so.Kr(+t,0,1)}No(){return this.Co}Fo(t){this.Go=so.Kr(+t,0,1)}Bo(){return this.Go}Do(t){this._o=so.Kr(+t,0,1)}$o(){return this._o}Lo(t){this.Io=so.Kr(+t,0,1)}Wo(){return this.Io}clone(){return so.Hr(so.xo,this.Co,this.Go,this._o,this.Io)}toArray(){return[this.Co,this.Go,this._o,this.Io]}Vo(){return new Float64Array(this.toArray())}jo(t,s){t[s++]=this.Co,t[s++]=this.Go,t[s++]=this._o,t[s]=this.Io}Uo(t,s){const e=this.Co,i=this.Go,r=this._o,n=this.Io;for(let h=0;h<4;++h)t[s++]=e,t[s++]=i,t[s++]=r,t[s++]=n}zo(t,s){t[s++]=this.Co,t[s++]=this.Go,t[s]=this._o}equals(t){return this.Co===t.Co&&this.Go===t.Go&&this._o===t._o&&this.Io===t.Io}Ho(t){return this.Co===t.Co&&this.Go===t.Go&&this._o===t._o}qo(t,s,e){return this.Co===t&&this.Go===s&&this._o===e}Jo(t,s,e,i){return this.Co===t&&this.Go===s&&this._o===e&&this.Io===i}Yo(t,s){return t[s]===Math.fround(this.Co)&&t[s+1]===Math.fround(this.Go)&&t[s+2]===Math.fround(this._o)&&t[s+3]===Math.fround(this.Io)}Xo(t,s){return t[s]===Math.fround(this.Co)&&t[s+1]===Math.fround(this.Go)&&t[s+2]===Math.fround(this._o)}multiply(t){this.Co*=t.Co,this.Go*=t.Go,this._o*=t._o,this.Io*=t.Io}Zo(t){this.Co*=t,this.Go*=t,this._o*=t,this.Io*=t}Ko(){return this.Co*=this.Io,this.Go*=this.Io,this._o*=this.Io,this}Qo(){return this.Co/=this.Io,this.Go/=this.Io,this._o/=this.Io,this}Kr(){return this.Co=so.Kr(this.Co,0,1),this.Go=so.Kr(this.Go,0,1),this._o=so.Kr(this._o,0,1),this.Io=so.Kr(this.Io,0,1),this}ta(t){this.Co=so.Rn(t),this.Go=so.An(t),this._o=so.En(t),this.Io=so.On(t)}sa(t,s,e){return`rgb(${100*(so.Ze(t)?t:this.No())}%, ${100*(so.Ze(s)?s:this.Bo())}%, ${100*(so.Ze(e)?e:this.$o())}%)`}ea(t,s,e,i){return`rgba(${100*(so.Ze(t)?t:this.No())}%, ${100*(so.Ze(s)?s:this.Bo())}%, ${100*(so.Ze(e)?e:this.$o())}%, ${so.Ze(i)?i:this.Wo()})`}ia(){const t=Math.round(255*this.No()),s=Math.round(255*this.Bo()),e=Math.round(255*this.$o());return"#"+Qh(t.toString(16))+Qh(s.toString(16))+Qh(e.toString(16))}ra(t){if("string"!=typeof t)return!1;let s,e,i;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length)s=parseInt(t[0],16)/15,e=parseInt(t[1],16)/15,i=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,e=parseInt(t.substr(2,2),16)/255,i=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Oo(s),isFinite(e)&&this.Fo(e),isFinite(i)&&this.Do(i),this.Lo(1),!0}na(){return`${Math.round(255*this.No())}, ${Math.round(255*this.Bo())}, ${Math.round(255*this.$o())}`}ha(){return[Math.round(255*this.No()),Math.round(255*this.Bo()),Math.round(255*this.$o())]}oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const e=parseInt(s[0].trim(),10)/255,i=parseInt(s[1].trim(),10)/255,r=parseInt(s[2].trim(),10)/255;return isFinite(e)&&this.Oo(e),isFinite(i)&&this.Fo(i),isFinite(r)&&this.Do(r),this.Lo(1),!0}aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const e=parseInt(s[0].trim(),10)/100,i=parseInt(s[1].trim(),10)/100,r=parseInt(s[2].trim(),10)/100;return isFinite(e)&&this.Oo(e),isFinite(i)&&this.Fo(i),isFinite(r)&&this.Do(r),this.Lo(1),!0}la(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const e=parseInt(s[0].trim(),10)/255,i=parseInt(s[1].trim(),10)/255,r=parseInt(s[2].trim(),10)/255,n=parseFloat(s[3].trim());return isFinite(e)&&this.Oo(e),isFinite(i)&&this.Fo(i),isFinite(r)&&this.Do(r),isFinite(n)&&this.Lo(n),!0}ua(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const e=parseInt(s[0].trim(),10)/100,i=parseInt(s[1].trim(),10)/100,r=parseInt(s[2].trim(),10)/100,n=parseFloat(s[3].trim());return isFinite(e)&&this.Oo(e),isFinite(i)&&this.Fo(i),isFinite(r)&&this.Do(r),isFinite(n)&&this.Lo(n),!0}ca(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.aa(t):this.oa(t);if(t.startsWith("rgba("))return t.includes("%")?this.ua(t):this.la(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.fa(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.aa(t):4===s.length&&this.ua(t):3===s.length?this.oa(t):4===s.length&&this.la(t)}}return this.ra(t)}toJSON(){return[this.Co,this.Go,this._o,this.Io]}da(t,s,e,i){let r,n,h;if(t%=360,s=so.Kr(s,0,100),e=so.Kr(e,0,100),i=so.Kr(i,0,1),t/=360,e/=100,0==(s/=100))r=n=h=e;else{const i=e<.5?e*(1+s):e+s-e*s,o=2*e-i;r=to(o,i,t+1/3),n=to(o,i,t),h=to(o,i,t-1/3)}return this.Oo(r),this.Fo(n),this.Do(h),this.Lo(i),this}fa(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),e=eo.exec(s),i=io.exec(s);return e&&4===e.length?(this.da(+e[1],+e[2],+e[3],1),!0):!(!i||5!==i.length||(this.da(+e[1],+e[2],+e[3],+e[4]),0))}pa(){const t=this.Co,s=this.Go,e=this._o,i=this.Io;return`hsla(${so.xo.ma(t,s,e)}, ${so.xo.ga(t,s,e)}%, ${so.xo.ya(t,s,e)}%, ${i})`}wa(){const t=this.Co,s=this.Go,e=this._o;return[so.xo.ma(t,s,e),so.xo.ga(t,s,e),so.xo.ya(t,s,e),this.Io]}Sa(t){Array.isArray(t)&&(t.length<3||(this.Co=t[0],this.Go=t[1],this._o=t[2],t.length>=4?this.Io=t[3]:this.Io=1))}set r(t){this.Oo(t)}get r(){return this.No()}set g(t){this.Fo(t)}get g(){return this.Bo()}set b(t){this.Do(t)}get b(){return this.$o()}set a(t){this.Lo(t)}get a(){return this.Wo()}va(t,s){switch(t){case 0:this.Oo(s);break;case 1:this.Fo(s);break;case 2:this.Do(s);break;case 3:this.Lo(s);break;default:throw new RangeError("invalid color index")}}ba(t){switch(t){case 0:return this.No();case 1:return this.Bo();case 2:return this.$o();case 3:return this.Wo();default:throw new RangeError("invalid color index")}}static Ma(t,s){let e,i;if(Array.isArray(t))e=new so.xo,e.Sa(t);else{if(!(t instanceof so.xo))throw new Error("unexpected type");e=t}if(Array.isArray(s))i=new so.xo,i.Sa(s);else{if(!(s instanceof so.xo))throw new Error("unexpected type");i=s}return e.equals(i)}static Ta(t,s){return so.Kr(Math.max(t,s)-Math.min(t,s),0,1)}static xa(t,s){const e=new so.xo;return e.Oo(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),e.Fo(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),e.Do(Math.max(t._o,s._o)-Math.min(t._o,s._o)),e.Lo(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),e}static Ca(t,s){const e=new so.xo(0,0,0,1);return e.Oo(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),e.Fo(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),e.Do(Math.max(t._o,s._o)-Math.min(t._o,s._o)),e}static ma(t,s,e){const i=Math.max(t,s,e),r=Math.min(t,s,e);if(i===r)return 0;let n=0;switch(i){case t:n=(s-e)/(i-r)+(s<e?6:0);break;case s:n=(e-t)/(i-r)+2;break;case e:n=(t-s)/(i-r)+4}return Math.round(n/6*360)}static ga(t,s,e){const i=Math.max(t,s,e),r=Math.min(t,s,e);if(i===r)return 0;const n=i-r,h=(i+r)/2>.5?n/(2-i-r):n/(i+r);return Math.round(100*h)}static ya(t,s,e){const i=Math.max(t,s,e),r=(i+Math.min(t,s,e))/2;return i?Math.round(100*r):0}},so.xo.Ga=Object.freeze(so.Hr(so.xo,1,1,1,1)),so.xo._a=Object.freeze(so.Hr(so.xo,0,0,0,1)),so.xo.Ia=Object.freeze(so.Hr(so.xo,0,0,0,0))}{const ro=self._s;ro.Pa=class{constructor(t,s){this.Ra=0,this.Aa=0,t instanceof ro.Pa?this.S(t):this.set(t||0,s||0)}set(t,s){this.Ra=+t,this.Aa=+s}S(t){this.Ra=t.Ra,this.Aa=t.Aa}equals(t){return this.Ra===t.Ra&&this.Aa===t.Aa}Ea(t,s){return this.Ra===t&&this.Aa===s}Yo(t,s){return t[s]===Math.fround(this.Ra)&&t[s+1]===Math.fround(this.Aa)}Oa(t){this.Ra=+t}Fa(){return this.Ra}Da(t){this.Aa=+t}La(){return this.Aa}toArray(){return[this.Ra,this.Aa]}Vo(){return new Float64Array(this.toArray())}jo(t,s){t[s++]=this.Ra,t[s]=this.Aa}offset(t,s){this.Ra+=+t,this.Aa+=+s}scale(t,s){this.Ra*=t,this.Aa*=s}St(t,s){this.Ra/=t,this.Aa/=s}round(){this.Ra=Math.round(this.Ra),this.Aa=Math.round(this.Aa)}floor(){this.Ra=Math.floor(this.Ra),this.Aa=Math.floor(this.Aa)}ceil(){this.Ra=Math.ceil(this.Ra),this.Aa=Math.ceil(this.Aa)}angle(){return ro.an(0,0,this.Ra,this.Aa)}ka(){return this.Ra*this.Ra+this.Aa*this.Aa}length(){return ro.en(this.Ra,this.Aa)}Na(t,s){const e=this.Ra*s-this.Aa*t;this.Aa=this.Aa*s+this.Ra*t,this.Ra=e}rotate(t){0!==t&&this.Na(Math.sin(t),Math.cos(t))}Ba(t,s,e){0===t||s===this.Ra&&e===this.Aa||(this.Ra-=s,this.Aa-=e,this.Na(Math.sin(t),Math.cos(t)),this.Ra+=+s,this.Aa+=+e)}move(t,s){0!==s&&(this.Ra+=Math.cos(t)*s,this.Aa+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Ra/=t,this.Aa/=t)}Kr(t,s){this.Ra=ro.Kr(this.Ra,t,s),this.Aa=ro.Kr(this.Aa,t,s)}Ct(t){return this.Ra*t.Ra+this.Aa*t.Aa}reverse(){this.Ra=-this.Ra,this.Aa=-this.Aa}$a(){let t=this.Ra;return this.Ra=this.Aa,this.Aa=-t,this}}}{const no=self._s;no.Rect=class{constructor(t,s,e,i){this.Wa=NaN,this.Va=NaN,this.ja=NaN,this.Ua=NaN,this.Wa=0,this.Va=0,this.ja=0,this.Ua=0,t instanceof no.Rect?this.S(t):this.set(t||0,s||0,e||0,i||0)}set(t,s,e,i){this.Wa=+t,this.Va=+s,this.ja=+e,this.Ua=+i}za(t,s,e,i){t=+t,s=+s,this.Wa=t,this.Va=s,this.ja=t+ +e,this.Ua=s+ +i}S(t){this.Wa=+t.Wa,this.Va=+t.Va,this.ja=+t.ja,this.Ua=+t.Ua}clone(){return new no.Rect(this.Wa,this.Va,this.ja,this.Ua)}static Ha(t,s){const e=new no.Rect;return e.qa(Math.min(t.Wa,s.Wa)),e.Ja(Math.min(t.Va,s.Va)),e.Ya(Math.max(t.ja,s.ja)),e.Xa(Math.max(t.Ua,s.Ua)),e}static Za(t){return new no.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Wa===t.Wa&&this.Va===t.Va&&this.ja===t.ja&&this.Ua===t.Ua}Ka(t,s,e,i){return this.Wa===t&&this.Va===s&&this.width()===e&&this.height()===i}Yo(t,s){return t[s]===Math.fround(this.Wa)&&t[s+1]===Math.fround(this.Va)&&t[s+2]===Math.fround(this.ja)&&t[s+3]===Math.fround(this.Ua)}qa(t){this.Wa=+t}Qa(){return this.Wa}Ja(t){this.Va=+t}tl(){return this.Va}Ya(t){this.ja=+t}sl(){return this.ja}Xa(t){this.Ua=+t}el(){return this.Ua}toArray(){return[this.Wa,this.Va,this.ja,this.Ua]}Vo(){return new Float64Array(this.toArray())}il(){return new DOMRect(this.Wa,this.Va,this.width(),this.height())}static rl(t){return no.Hr(no.Rect,t.left,t.top,t.right,t.bottom)}jo(t,s){t[s++]=this.Wa,t[s++]=this.Va,t[s++]=this.ja,t[s]=this.Ua}nl(t,s){t[s++]=this.Wa,t[s++]=this.Va,t[s++]=this.ja,t[s++]=this.Va,t[s++]=this.ja,t[s++]=this.Ua,t[s++]=this.Wa,t[s]=this.Ua}hl(t,s,e){t[s++]=this.Wa,t[s++]=this.Va,t[s++]=e,t[s++]=this.ja,t[s++]=this.Va,t[s++]=e,t[s++]=this.ja,t[s++]=this.Ua,t[s++]=e,t[s++]=this.Wa,t[s++]=this.Ua,t[s]=e}width(){return this.ja-this.Wa}height(){return this.Ua-this.Va}ol(){return(this.Wa+this.ja)/2}al(){return(this.Va+this.Ua)/2}offset(t,s){t=+t,s=+s,this.Wa+=t,this.Va+=s,this.ja+=t,this.Ua+=s}offsetLeft(t){this.Wa+=+t}offsetTop(t){this.Va+=+t}ll(t){this.ja+=+t}ul(t){this.Ua+=+t}cl(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.Va<this.Ua?this.Wa<this.ja?this.Ua=this.Va+this.width():this.Ua=this.Va-this.width():this.Wa<this.ja?this.Ua=this.Va-this.width():this.Ua=this.Va+this.width()}fl(t,s){t=+t,s=+s,this.Wa-=t,this.Va-=s,this.ja+=t,this.Ua+=s}dl(t,s){t=+t,s=+s,this.Wa+=t,this.Va+=s,this.ja-=t,this.Ua-=s}multiply(t,s){this.Wa*=t,this.Va*=s,this.ja*=t,this.Ua*=s}St(t,s){this.Wa/=t,this.Va/=s,this.ja/=t,this.Ua/=s}pl(t){this.Wa=+t-this.Wa,this.ja=+t-this.ja}ml(t){this.Va=+t-this.Va,this.Ua=+t-this.Ua}gl(t,s){const e=this.width(),i=this.height(),r=this.Qa()+e*t,n=this.tl()+i*s;this.za(r-i*s,n-e*t,i,e)}yl(){const t=this.Wa;this.Wa=this.ja,this.ja=t}wl(){const t=this.Va;this.Va=this.Ua,this.Ua=t}Sl(t){const s=this.Va;this.Va=+t-this.Ua,this.Ua=+t-s}round(){this.Wa=Math.round(this.Wa),this.Va=Math.round(this.Va),this.ja=Math.round(this.ja),this.Ua=Math.round(this.Ua)}vl(){this.Wa=Math.ceil(this.Wa),this.Va=Math.ceil(this.Va),this.ja=Math.floor(this.ja),this.Ua=Math.floor(this.Ua)}bl(){this.Wa=Math.floor(this.Wa),this.Va=Math.floor(this.Va),this.ja=Math.ceil(this.ja),this.Ua=Math.ceil(this.Ua)}floor(){this.Wa=Math.floor(this.Wa),this.Va=Math.floor(this.Va),this.ja=Math.floor(this.ja),this.Ua=Math.floor(this.Ua)}ceil(){this.Wa=Math.ceil(this.Wa),this.Va=Math.ceil(this.Va),this.ja=Math.ceil(this.ja),this.Ua=Math.ceil(this.Ua)}Kr(t,s,e,i){this.Wa=Math.max(this.Wa,+t),this.Va=Math.max(this.Va,+s),this.ja=Math.min(this.ja,+e),this.Ua=Math.min(this.Ua,+i)}Ml(t,s,e,i){t=+t,s=+s,e=+e,i=+i,this.Wa=no.Kr(this.Wa,t,e),this.Va=no.Kr(this.Va,s,i),this.ja=no.Kr(this.ja,t,e),this.Ua=no.Kr(this.Ua,s,i)}normalize(){this.Wa>this.ja&&this.yl(),this.Va>this.Ua&&this.wl()}Tl(t){return!(t.ja<this.Wa||t.Ua<this.Va||t.Wa>this.ja||t.Va>this.Ua)}xl(t,s,e){return!(t.ja+s<this.Wa||t.Ua+e<this.Va||t.Wa+s>this.ja||t.Va+e>this.Ua)}Cl(t,s){return t>=this.Wa&&t<=this.ja&&s>=this.Va&&s<=this.Ua}Gl(t){return t.Wa>=this.Wa&&t.Va>=this.Va&&t.ja<=this.ja&&t.Ua<=this.Ua}_l(t){t.Wa<this.Wa&&(this.Wa=+t.Wa),t.Va<this.Va&&(this.Va=+t.Va),t.ja>this.ja&&(this.ja=+t.ja),t.Ua>this.Ua&&(this.Ua=+t.Ua)}Il(t){this.Wa=no._t(t.Wa,t.ja,this.Wa),this.Va=no._t(t.Va,t.Ua,this.Va),this.ja=no._t(t.Wa,t.ja,this.ja),this.Ua=no._t(t.Va,t.Ua,this.Ua)}}}{const ho=self._s;ho.Pl=class{constructor(t,s,e,i,r,n,h,o){this.Rl=NaN,this.Al=NaN,this.El=NaN,this.Ol=NaN,this.Fl=NaN,this.Dl=NaN,this.Ll=NaN,this.kl=NaN,this.Rl=0,this.Al=0,this.El=0,this.Ol=0,this.Fl=0,this.Dl=0,this.Ll=0,this.kl=0,t instanceof ho.Pl?this.S(t):this.set(t||0,s||0,e||0,i||0,r||0,n||0,h||0,o||0)}set(t,s,e,i,r,n,h,o){this.Rl=+t,this.Al=+s,this.El=+e,this.Ol=+i,this.Fl=+r,this.Dl=+n,this.Ll=+h,this.kl=+o}Nl(t,s,e,i){this.set(t,s,e,s,e,i,t,i)}S(t){this.Rl=t.Rl,this.Al=t.Al,this.El=t.El,this.Ol=t.Ol,this.Fl=t.Fl,this.Dl=t.Dl,this.Ll=t.Ll,this.kl=t.kl}equals(t){return this.Rl===t.Rl&&this.Al===t.Al&&this.El===t.El&&this.Ol===t.Ol&&this.Fl===t.Fl&&this.Dl===t.Dl&&this.Ll===t.Ll&&this.kl===t.kl}Bl(t){this.Rl=+t}Bn(){return this.Rl}$l(t){this.Al=+t}$n(){return this.Al}Wl(t){this.El=+t}Wn(){return this.El}Vl(t){this.Ol=+t}Vn(){return this.Ol}jl(t){this.Fl=+t}jn(){return this.Fl}Ul(t){this.Dl=+t}Un(){return this.Dl}zl(t){this.Ll=+t}zn(){return this.Ll}Hl(t){this.kl=+t}Hn(){return this.kl}ql(){return new DOMQuad(new DOMPoint(this.Rl,this.Al),new DOMPoint(this.El,this.Ol),new DOMPoint(this.Fl,this.Dl),new DOMPoint(this.Ll,this.kl))}static Jl(t){return ho.Hr(ho.Pl,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Rl,this.Al,this.El,this.Ol,this.Fl,this.Dl,this.Ll,this.kl]}Vo(){return new Float64Array(this.toArray())}jo(t,s){t[s++]=this.Rl,t[s++]=this.Al,t[s++]=this.El,t[s++]=this.Ol,t[s++]=this.Fl,t[s++]=this.Dl,t[s++]=this.Ll,t[s]=this.kl}Yl(t,s,e){t[s++]=this.Rl,t[s++]=this.Al,t[s++]=e,t[s++]=this.El,t[s++]=this.Ol,t[s++]=e,t[s++]=this.Fl,t[s++]=this.Dl,t[s++]=e,t[s++]=this.Ll,t[s++]=this.kl,t[s]=e}offset(t,s){t=+t,s=+s,this.Rl+=t,this.Al+=s,this.El+=t,this.Ol+=s,this.Fl+=t,this.Dl+=s,this.Ll+=t,this.kl+=s}round(){this.Rl=Math.round(this.Rl),this.Al=Math.round(this.Al),this.El=Math.round(this.El),this.Ol=Math.round(this.Ol),this.Fl=Math.round(this.Fl),this.Dl=Math.round(this.Dl),this.Ll=Math.round(this.Ll),this.kl=Math.round(this.kl)}floor(){this.Rl=Math.floor(this.Rl),this.Al=Math.floor(this.Al),this.El=Math.floor(this.El),this.Ol=Math.floor(this.Ol),this.Fl=Math.floor(this.Fl),this.Dl=Math.floor(this.Dl),this.Ll=Math.floor(this.Ll),this.kl=Math.floor(this.kl)}ceil(){this.Rl=Math.ceil(this.Rl),this.Al=Math.ceil(this.Al),this.El=Math.ceil(this.El),this.Ol=Math.ceil(this.Ol),this.Fl=Math.ceil(this.Fl),this.Dl=Math.ceil(this.Dl),this.Ll=Math.ceil(this.Ll),this.kl=Math.ceil(this.kl)}Xl(t){this.Rl=t.Wa,this.Al=t.Va,this.El=t.ja,this.Ol=t.Va,this.Fl=t.ja,this.Dl=t.Ua,this.Ll=t.Wa,this.kl=t.Ua}Zl(t,s){0===s?this.Xl(t):this.Kl(t,Math.sin(s),Math.cos(s))}Kl(t,s,e){const i=t.Wa*s,r=t.Va*s,n=t.ja*s,h=t.Ua*s,o=t.Wa*e,a=t.Va*e,l=t.ja*e,u=t.Ua*e;this.Rl=o-r,this.Al=a+i,this.El=l-r,this.Ol=a+n,this.Fl=l-h,this.Dl=u+n,this.Ll=o-h,this.kl=u+i}Ql(t){t.set(Math.min(this.Rl,this.El,this.Fl,this.Ll),Math.min(this.Al,this.Ol,this.Dl,this.kl),Math.max(this.Rl,this.El,this.Fl,this.Ll),Math.max(this.Al,this.Ol,this.Dl,this.kl))}Cl(t,s){let e=this.El-this.Rl,i=this.Ol-this.Al;const r=this.Fl-this.Rl,n=this.Dl-this.Al,h=t-this.Rl,o=s-this.Al;let a=e*e+i*i,l=e*r+i*n,u=e*h+i*o;const c=r*r+n*n,f=r*h+n*o;let d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return p>=0&&m>0&&p+m<1||(e=this.Ll-this.Rl,i=this.kl-this.Al,a=e*e+i*i,l=e*r+i*n,u=e*h+i*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d,p>=0&&m>0&&p+m<1)}ol(){return(this.Rl+this.El+this.Fl+this.Ll)/4}al(){return(this.Al+this.Ol+this.Dl+this.kl)/4}tu(t,s,e,i){return!(!this.Cl(t,s)&&!this.Cl(e,i))||ho.Nn(t,s,e,i,this)}su(t){let s=t.ol(),e=t.al();if(this.Cl(s,e))return!0;if(s=this.ol(),e=this.al(),t.Cl(s,e))return!0;const i=this.Rl,r=this.Al,n=this.El,h=this.Ol,o=this.Fl,a=this.Dl,l=this.Ll,u=this.kl;return ho.Nn(i,r,n,h,t)||ho.Nn(n,h,o,a,t)||ho.Nn(o,a,l,u,t)||ho.Nn(l,u,i,r,t)}eu(){const t=this.Rl,s=this.Al;this.Rl=this.El,this.Al=this.Ol,this.El=this.Fl,this.Ol=this.Dl,this.Fl=this.Ll,this.Dl=this.kl,this.Ll=t,this.kl=s}iu(){this.ru(0,2),this.ru(1,3),this.ru(6,4),this.ru(7,5)}nu(){this.ru(0,6),this.ru(1,7),this.ru(2,4),this.ru(3,5)}hu(){this.ru(2,6),this.ru(3,7)}ru(t,s){const e=this.ou(t);this.au(t,this.ou(s)),this.au(s,e)}ou(t){switch(t){case 0:return this.Rl;case 1:return this.Al;case 2:return this.El;case 3:return this.Ol;case 4:return this.Fl;case 5:return this.Dl;case 6:return this.Ll;case 7:return this.kl;default:throw new RangeError("invalid quad point index")}}au(t,s){switch(s=+s,t){case 0:this.Rl=s;break;case 1:this.Al=s;break;case 2:this.El=s;break;case 3:this.Ol=s;break;case 4:this.Fl=s;break;case 5:this.Dl=s;break;case 6:this.Ll=s;break;case 7:this.kl=s;break;default:throw new RangeError("invalid quad point index")}}St(t,s){this.Rl/=t,this.Al/=s,this.El/=t,this.Ol/=s,this.Fl/=t,this.Dl/=s,this.Ll/=t,this.kl/=s}}}{const oo=self._s,ao=self.assert,lo=[0,0,1,0,1,1,0,1],uo=oo.Hr(oo.Pl);oo.lu=class extends oo.Ur{constructor(t,s=!0){super(),t||(t=lo),this.uu=Float64Array.from(t),this.cu=new oo.Rect,this.fu=!0,this.du=s}qr(){}pu(){return this.uu}mu(){return this.uu.length/2}gu(t){this.uu.length===t.length?this.uu.set(t):this.uu=Float64Array.from(t),this.fu=!0}yu(){this.gu(lo)}S(t){this.gu(t.uu)}wu(){this.fu=!0}Su(){if(!this.fu)return;const t=this.uu;let s=t[0],e=t[1],i=s,r=e;for(let n=0,h=t.length;n<h;n+=2){const h=t[n],o=t[n+1];h<s&&(s=h),h>i&&(i=h),o<e&&(e=o),o>r&&(r=o)}this.cu.set(s,e,i,r),this.fu=!1}Xl(t,s,e){let i=this.uu;8!==i.length&&(i=new Float64Array(8),this.uu=i),i[0]=t.Qa()-s,i[1]=t.tl()-e,i[2]=t.sl()-s,i[3]=t.tl()-e,i[4]=t.sl()-s,i[5]=t.el()-e,i[6]=t.Qa()-s,i[7]=t.el()-e,this.cu.S(t),0===s&&0===e||this.cu.offset(-s,-e),this.fu=!1}vu(t,s,e){uo.S(t),uo.offset(s,e),this.gu(uo.toArray()),this.fu=!0}transform(t,s,e){let i=0,r=1;0!==e&&(i=Math.sin(e),r=Math.cos(e)),this.bu(t,s,i,r)}bu(t,s,e,i){const r=this.uu;for(let n=0,h=r.length;n<h;n+=2){const h=n+1,o=r[n]*t,a=r[h]*s;r[n]=o*i-a*e,r[h]=a*i+o*e}this.fu=!0}offset(t,s){const e=this.uu;for(let i=0,r=e.length;i<r;i+=2)e[i]+=t,e[i+1]+=s}Cl(t,s){const e=this.uu;if(t===e[0]&&s===e[1])return!0;this.Su();const i=this.cu,r=i.Qa()-110,n=i.tl()-101,h=i.sl()+131,o=i.el()+120;let a=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0;r<t?(a=r,u=t):(a=t,u=r),n<s?(l=n,c=s):(l=s,c=n),h<t?(f=h,p=t):(f=t,p=h),o<s?(d=o,m=s):(d=s,m=o);let g=0,y=0;for(let i=0,w=e.length;i<w;i+=2){const S=(i+2)%w,v=e[i],b=e[i+1],M=e[S],T=e[S+1];oo.kn(r,n,t,s,a,u,l,c,v,b,M,T)&&++g,oo.kn(h,o,t,s,f,p,d,m,v,b,M,T)&&++y}return g%2==1||y%2==1}Mu(t,s,e){const i=t.uu,r=this.uu;if(this.Cl(i[0]+s,i[1]+e))return!0;if(t.Cl(r[0]-s,r[1]-e))return!0;for(let t=0,n=r.length;t<n;t+=2){const h=(t+2)%n,o=r[t],a=r[t+1],l=r[h],u=r[h+1];let c=0,f=0,d=0,p=0;o<l?(c=o,d=l):(c=l,d=o),a<u?(f=a,p=u):(f=u,p=a);for(let t=0,r=i.length;t<r;t+=2){const n=(t+2)%r,h=i[t]+s,m=i[t+1]+e,g=i[n]+s,y=i[n+1]+e;if(oo.kn(o,a,l,u,c,d,f,p,h,m,g,y))return!0}}return!1}tu(t,s,e,i,r,n){if(this.Cl(e-t,i-s))return!0;if(this.Cl(r-t,n-s))return!0;let h=0,o=0,a=0,l=0;e<r?(h=e,a=r):(h=r,a=e),i<n?(o=i,l=n):(o=n,l=i);const u=this.uu;for(let c=0,f=u.length;c<f;c+=2){const d=(c+2)%f,p=u[c]+t,m=u[c+1]+s,g=u[d]+t,y=u[d+1]+s;if(oo.kn(e,i,r,n,h,a,o,l,p,m,g,y))return!0}return!1}iu(t){const s=this.uu;for(let e=0,i=s.length;e<i;e+=2)s[e]=2*t-s[e];this.fu=!0}nu(t){const s=this.uu;for(let e=0,i=s.length;e<i;e+=2){const i=e+1;s[i]=2*t-s[i]}this.fu=!0}hu(){const t=this.uu;for(let s=0,e=t.length;s<e;s+=2){const e=s+1,i=t[s];t[s]=t[e],t[e]=i}this.fu=!0}Tu(){const t=this.uu;let s=0;for(let e=0,i=t.length;e<i;e+=2)s+=t[e];return s/this.mu()}xu(){const t=this.uu;let s=0;for(let e=0,i=t.length;e<i;e+=2)s+=t[e+1];return s/this.mu()}Cu(){return this.uu}Gu(){return this.mu()}_u(){return this.du}}}{const co=self._s;co.Iu=class extends co.Ur{constructor(t){if(super(),this.Pu=new Map,t)for(const[s,e,i]of t)this.Set(s,e,i)}qr(){this.Ru(),this.Pu=null}Au(){return 0===this.Pu.size}Ru(){const t=this.Pu;for(const s of t.values())s.clear();t.clear()}Set(t,s,e){const i=this.Pu;let r=i.get(t);r||(r=new Map,i.set(t,r)),r.set(s,e)}Hs(t,s){const e=this.Pu.get(t);return e?e.get(s):e}zs(t,s){const e=this.Pu.get(t);return!!e&&e.has(s)}Eu(t,s){const e=this.Pu,i=e.get(t);if(!i)return!1;const r=i.delete(s);return r&&0===i.size&&e.delete(t),r}Ou(t){const s=this.Pu,e=s.get(t);e&&(e.clear(),s.delete(t));for(const[e,i]of s.entries())i.delete(t)&&0===i.size&&s.delete(e)}Fu(){let t=0;for(const s of this.Pu.values())t+=s.size;return t}*values(){for(const t of this.Pu.values())yield*t.values()}*Du(){for(const[t,s]of this.Pu.entries())for(const e of s.keys())yield[t,e]}*entries(){for(const[t,s]of this.Pu.entries())for(const[e,i]of s.entries())yield[t,e,i]}}}{const fo=self._s;fo.Lu=class extends fo.Ur{constructor(){super(),this.ku=new Set,this.Nu=[],this.Bu=!1}qr(){this.Ru()}Ru(){this.ku.clear(),fo.bh(this.Nu),this.Bu=!1}$u(t){this.ku.has(t)||(this.ku.add(t),this.Bu||this.Nu.push(t))}zs(t){return this.ku.has(t)}Eu(t){this.ku.delete(t)&&(this.Bu=!0)}Fu(){return this.ku.size}Au(){return 0===this.ku.size}Wu(){return this.Bu&&(this.Vu(),this.Bu=!1),this.Nu}Vu(){const t=this.Nu;fo.bh(t);for(const s of this.ku)t.push(s)}}}{const po=self._s,mo=new Map,go=new Map,yo=new Map,wo=new Map,So=new Map,vo=new Map,bo=new Map,Mo=new Map,To=new Map;To.set("linear","noease"),To.set("default","noease");const xo=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],Co=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Go=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.ju=class t{constructor(){}static Uu(){return"default"}static zu(){return"noease"}static Hu(t){return Go.get(t)}static qu(s,...e){let i,r;this.Ju(),s?(yo.has(s)||yo.set(s,new Map),i=yo.get(s),r=[...i.keys()].filter(e=>!t.Yu(e,s)||t.Yu(e,s).transition.Xu())):(i=So,r=[...i.keys()]);const n=r.sort();return[...go.keys()].concat(n).filter(t=>!e.includes(t))}static Zu(){this.Ju();const t=[...So.keys()];return t.sort(),[...go.keys()].concat(t)}static Ku(){this.Ju();const t=[...So.keys()];return t.sort(),t}static Qu(t){for(const s of xo)if(self.lang(`ui.bars.timeline.eases.${s}`)===t)return!0;for(const s of Co)if(self.lang(`ui.bars.timeline.short-eases.${s}`)===t)return!0}static tc(t){return this.Ju(),[...go.keys()].includes(t)}static sc(s){const e=To.get(s);return e?mo.get(e):t.tc(s)?mo.get(s):bo.has(s)?bo.get(s):void 0}static ec(t){return this.Ju(),Mo.get(t)}static rc(s,e){this.Ju();const i=t.sc(s);if(i)return i;if(!e)throw new Error("missing ease function");return yo.get(e).get(s)}static Yu(t,s){this.Ju();const e=wo.get(s);if(e)return e.get(t)}static nc(s,e){return this.Ju(),!!t.sc(s)||!!yo.get(e).get(s)}static hc(s){this.Ju();return t.sc(s)||So.get(s)}static oc(t){return this.Ju(),vo.get(t)}static ac(t){return this.Ju(),this.Zu()[t]}static lc(t,s){return this.Ju(),this.qu(s).indexOf(t)}static uc(t){return this.lc(t)}static Ju(){0===mo.size&&(this.cc("default",()=>{}),this.cc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.cc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.cc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.cc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.cc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.cc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.cc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.cc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.cc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.cc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.cc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.cc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.cc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.cc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.cc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.cc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.cc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.cc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.cc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.cc("easeinquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.cc("easeoutquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.cc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.cc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.cc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.cc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.cc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.cc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.cc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.cc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.cc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.cc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.fc("cubicbezier",this.dc),this.fc("spline",this.mc))}static cc(s,e,i=!1){if("function"==typeof e)t.yc(s,e,"predefined");else{if(!po.Ti(e))throw new Error("unexpected arguments");if(self.wc){const r=po.Hr(self.wc,s,i);r.Sc(e),t.yc(s,(t,s,e,i)=>r.vc(t,s,e,i),"predefined"),Mo.set(s,r)}else{const r=po.Hr(po.bc,[s,e.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.Mc(i),t.yc(s,(t,s,e,i)=>r.vc(t,s,e,i),"predefined")}}}static fc(s,e){t.yc(s,e,"private")}static Tc(s,e,i,r){this.Ju(),t.yc(s,e,"custom",i,r)}static xc(t,s){if(this.tc(t))return;if([...bo.keys()].includes(t))return;const e=yo.get(s);e&&e.delete(t);const i=wo.get(s);i&&i.delete(t)}static yc(t,s,e,i,r){switch(e){case"predefined":mo.set(t,s),go.set(t,s);break;case"custom":i?(yo.has(i)||yo.set(i,new Map),wo.has(i)||wo.set(i,new Map),yo.get(i).set(t,s),wo.get(i).set(t,r)):(So.set(t,s),vo.set(t,r));break;case"private":mo.set(t,s),bo.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Cc(t,s,e,i){return 0===i?s:e*t/i+s}static dc(t,s,e,i,r){return s+3*t*(e-s)+3*t**2*(s+i-2*e)+t**3*(r-s+3*e-3*i)}static mc(t,s,e,i,r,n,h,o,a,l){if(i===r&&n===h)return t;const u=No(t,s,i,n,o,l),c=Oo(e,r,h,a),f=Fo(e,r,h,a),d=Do(e,r,h,a);return Lo(u,c,f,d)}static Gc(t,s,e,i){const r=[],n=Oo(t,s,e,i),h=Fo(t,s,e,i),o=Do(t,s,e,i);for(let t=0;t<_o;++t){const s=Lo(t*Io,n,h,o);r.push(s)}return r}};const _o=11,Io=1/(_o-1),Po=4,Ro=.01,Ao=1e-7,Eo=10,Oo=(t,s,e,i)=>i-3*e+3*s-t,Fo=(t,s,e,i)=>3*e-6*s+3*t,Do=(t,s,e,i)=>3*(s-t),Lo=(t,s,e,i)=>((s*t+e)*t+i)*t,ko=(t,s,e,i)=>3*s*t*t+2*e*t+i,No=(t,s,e,i,r,n)=>{if(1==t)return 1;let h=0,o=1,a=n[o],l=_o-1;for(n[_o-1];o!=l&&a<=t;)o++,a=n[o],h+=Io;o--,a=n[o];let u=h+(t-a)/(n[o+1]-a)*Io;const c=Oo(s,e,i,r),f=Fo(s,e,i,r),d=Do(s,e,i,r),p=ko(u,c,f,d);if(0===p)return u;if(p>=.01){for(let s=0;s<4;++s)u-=(Lo(u,c,f,d)-t)/ko(u,c,f,d);return u}{let s,e,i=h,r=h+Io,n=0;do{u=i+(r-i)/2;let h=Lo(u,c,f,d)-t;h>0?r=u:i=u,s=Math.abs(h)>1e-7,e=++n<10}while(s&&e);return u}}}{let Bo=function(t){$o.hi(t)};RequireStringOrNumber=Bo;const $o=self._s;$o._c=class{constructor(t){this.Ic=[],this.Xr=t||"",this.Pc=0}qr(){this.Ru(),this.Ic=null}Rc(){return this.Xr}Ru(){$o.Mh(this.Ic),this.Pc=0}Ac(){return this.Pc}Ec(t=Math.random()*this.Ac()){let s=0;for(const[e,i]of this.Ic)if(s+=e,t<s)return i;return 0}Oc(){return!!this.Ic.length}Fc(t,s){Bo(s),this.Pc+=t,this.Ic.push([t,s])}Dc(t,s){Bo(s);const e=0===t;for(let i=0;i<this.Ic.length;i++){const r=this.Ic[i],n=e||r[0]===t,h=r[1]===s;if(n&&h){this.Ic.splice(i,1),this.Pc-=r[0];break}}}Lc(){return JSON.stringify(this.Ic)}static kc(t,s){const e=new $o._c(s),i=JSON.parse(t);for(const t of i){const s=t[0],i=t[1];e.Fc(s,i)}return e}}}{const Wo=self._s;let Vo=0;Wo.Nc=class{constructor(t,s){this.Bc=t,this.$c=s,this.Wc=Vo++,this.Bc.Vc("runtime","screen-reader-text",{type:"create",id:this.Wc,text:this.$c})}qr(){this.Bc.Vc("runtime","screen-reader-text",{type:"release",id:this.Wc}),this.Bc=null,this.$c="",this.Wc=-1}jc(t){this.$c!==t&&(this.$c=t,this.Bc.Vc("runtime","screen-reader-text",{type:"update",id:this.Wc,text:this.$c}))}}}{const jo=self._s;jo.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Uc=!1,this.zc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.zc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Uc=!0}}}{const Uo=self._s,zo=self.assert;Uo.Event.Hc=class extends Uo.Ur{constructor(t){super(),this.qc=t,this.Jc=[],this.Yc=new Set,this.Xc=[],this.Zc=new Set,this.Kc=0,this.Qc=[]}qr(){this.Kc>0||(Uo.bh(this.Jc),this.Yc.clear(),Uo.bh(this.Xc),this.Zc.clear(),Uo.bh(this.Qc),Uo.qr(this))}tf(t,s){if(this.sf())this.Qc.push({ef:"add",if:t,capture:s});else if(s){if(this.Yc.has(t))return;this.Jc.push(t),this.Yc.add(t)}else{if(this.Zc.has(t))return;this.Xc.push(t),this.Zc.add(t)}}rf(t,s){this.sf()?this.Qc.push({ef:"remove",if:t,capture:s}):s?this.Yc.has(t)&&(this.Yc.delete(t),Uo._h(this.Jc,t)):this.Zc.has(t)&&(this.Zc.delete(t),Uo._h(this.Xc,t))}nf(){return!this.Jc.length&&!this.Xc.length}sf(){return this.Kc>0}hf(){const t=new Set,s=new Set;for(const e of this.Qc)if("add"===e.ef)this.tf(e.if,e.capture),e.capture?s.delete(e.if):t.delete(e.if);else{if("remove"!==e.ef)throw new Error("invalid op");e.capture?(this.Yc.delete(e.if),s.add(e.if)):(this.Zc.delete(e.if),t.add(e.if))}Uo.Rh(this.Xc,t),Uo.Rh(this.Jc,s),Uo.bh(this.Qc)}af(t){this.lf();let s=!1;for(let e=0,i=this.Jc.length;e<i;++e)if(this.Jc[e](t),t.Uc){s=!0;break}if(!s)for(let s=0,e=this.Xc.length;s<e&&(this.Xc[s](t),!t.Uc);++s);return this.uf(),!t.defaultPrevented}cf(t){this.lf();for(let s=0,e=this.Jc.length;s<e;++s)this.Jc[s](t);for(let s=0,e=this.Xc.length;s<e;++s)this.Xc[s](t);return this.uf(),!0}lf(){this.Kc++}uf(){this.Kc--,0===this.Kc&&this.Qc.length>0&&this.hf()}ff(t){t?this.lf():this.uf()}df(t){let s=[];for(let e=0,i=this.Jc.length;e<i;++e){let i=this.Jc[e];s.push(Uo.pf(()=>i(t)))}for(let e=0,i=this.Xc.length;e<i;++e){let i=this.Xc[e];s.push(Uo.pf(()=>i(t)))}return Promise.all(s).then(()=>!t.defaultPrevented)}mf(t){const s=[];this.lf();for(let e=0,i=this.Jc.length;e<i;++e){const i=this.Jc[e](t);i instanceof Promise&&s.push(i)}for(let e=0,i=this.Xc.length;e<i;++e){const i=this.Xc[e](t);i instanceof Promise&&s.push(i)}return this.uf(),s.length?Promise.all(s).then(()=>!t.defaultPrevented):!t.defaultPrevented}async gf(t){return await this.mf(t)}async yf(t){this.lf();for(let s=0,e=this.Jc.length;s<e;++s){const e=this.Jc[s](t);e instanceof Promise&&await e}for(let s=0,e=this.Xc.length;s<e;++s){const e=this.Xc[s](t);e instanceof Promise&&await e}return this.uf(),!t.defaultPrevented}*wf(t){this.lf();for(let s=0,e=this.Jc.length;s<e;++s){const e=this.Jc[s](t);Uo.Mo(e)&&(yield*e)}for(let s=0,e=this.Xc.length;s<e;++s){const e=this.Xc[s](t);Uo.Mo(e)&&(yield*e)}this.uf()}}}{const Ho=self._s;Ho.Event.Sf=class extends Ho.Ur{constructor(){super(),this.vf=new Map,this.bf=!1}qr(){if(this.bf)throw new Error("already released");this.Mf(),this.bf=!0,Ho.qr(this)}Jr(){return this.bf}Mf(){if(this.vf){for(let t of this.vf.values())t.qr();this.vf.clear()}}Tf(t,s){let e=this.vf.get(t);return e||(s?(e=Ho.Hr(Ho.Event.Hc,t),this.vf.set(t,e),e):null)}xf(t){return this.vf.has(t)}addEventListener(t,s,e){this.Tf(t,!0).tf(s,!!e)}removeEventListener(t,s,e){let i=this.Tf(t,!1);i&&(i.rf(s,!!e),i.nf()&&this.vf.delete(t))}dispatchEvent(t){const s=this.Tf(t.type,!1);return!s||(t.cancelable?s.af(t):s.cf(t))}Cf(t){const s=this.Tf(t.type,!1);return s?(t.zc=!0,s.df(t)):Promise.resolve(!0)}async Gf(t){const s=this.Tf(t.type,!1);if(!s)return!0;this.vf.delete(t.type),t.zc=!0;const e=await s.df(t);return s.qr(),e}async _f(t){const s=this.Tf(t.type,!1);return!s||await s.gf(t)}If(t){const s=this.Tf(t.type,!1);return!s||s.mf(t)}async Pf(t){const s=this.Tf(t.type,!1);return!s||await s.yf(t)}Rf(t){const s=this.Tf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.wf(t)}ff(t){for(const s of this.vf.values())s.ff(t)}}}{let qo=function(t){ea=ta&&0===ia?requestIdleCallback(Jo,{timeout:35}):setTimeout(Jo,ia>0?1:t)},Jo=function(t){if(ea=-1,!sa.length)return;let s=performance.now(),e=s,i=0,r=0;do{Yo(sa.shift()),e=performance.now(),++i,r=(e-s)/i*1.1}while(sa.length&&(ta&&0===ia&&void 0!==t?r<t.timeRemaining():e-s+r<12));if(-1===ea&&sa.length){let t=e-s;qo(Math.max(16-t,4))}},Yo=function(t){let s;try{s=t.if()}catch(s){return void t.reject(s)}t.resolve(s)};SetNewCallback=qo,DoAsyncifiedWork=Jo,DoNextAsyncifiedJob=Yo;const Xo=self._s,Zo=12,Ko=16,Qo=35,ta="undefined"!=typeof requestIdleCallback;let sa=[],ea=-1,ia=0,ra=Xo.Ys.zs("disable-asyncify");ra&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),Xo.pf=function(t){let s=null;return Xo.Ls&&(s=Xo.Ye()),new Promise((e,i)=>{sa.push({if:t,resolve:e,reject:i,stack:s}),ra?Yo(sa.pop()):-1===ea&&qo(16)})},Xo.pf.Af=function(t){if(t)++ia;else if(--ia,ia<0)throw new Error("already turned off high throughput mode")}}{let na=function(){ua=-1},ha=function(){ca=-1,fa=-1;let t=Date.now();for(let s of da)if(s.Ef(t)){let t=s.Of();(-1===fa||t<fa)&&(fa=t)}else da.delete(s);if(-1!==fa){let s=Math.max(fa-t+100,1e3);ca=self.setTimeout(ha,s)}};ClearTimeCache=na,CheckActiveIdleTimeouts=ha;const oa=self._s,aa=1e3,la=100;let ua=-1;oa.Ff=function(){return-1===ua&&(ua=Date.now(),self.setTimeout(na,16)),ua};let ca=-1,fa=-1,da=new Set;oa.Df=class{constructor(t,s){this.Lf=t,this.kf=1e3*s,this.Nf=0,this.Bf=!1}$f(){let t=oa.Ff();this.Nf=t+this.kf,this.Bf||(da.add(this),this.Bf=!0),-1===ca?(fa=this.Nf,ca=self.setTimeout(ha,this.kf+100)):this.Nf<fa&&fa>t+1e3&&(self.clearTimeout(ca),fa=this.Nf,ca=self.setTimeout(ha,this.kf+100))}Ef(t){return!(t>=this.Nf&&(this.Lf()?(this.Nf=t+this.kf,0):(this.Bf=!1,1)))}Of(){return this.Nf}Wf(){this.Bf&&(da.delete(this),this.Bf=!1,0===da.size&&-1!==ca&&(self.clearTimeout(ca),ca=-1,fa=-1))}qr(){this.Wf(),this.Lf=null}}}{const pa=self._s;pa.Vf=class t{constructor(t){this.jf=!1,this.Uf=t}zf(){this.jf||(this.jf=!0,this.Uf&&(this.Uf(),this.Uf=null))}Hf(){return this.jf}qr(){this.zf()}static qr(s){return new t(()=>s.qr())}static qf(t,s,e,i,r){if("string"!=typeof s&&!Array.isArray(s))throw new TypeError("expected string or array");if(null==i)i=!1;else if("boolean"!=typeof i&&"object"!=typeof i)throw new TypeError("invalid event listener options");if(r&&(e=e.bind(r)),Array.isArray(s)||s.includes(" ")){"string"==typeof s&&(s=s.split(" "));const r=new pa.Jf;for(const n of s)t.addEventListener(n,e,i),r.$u(pa.Hr(pa.Vf,()=>t.removeEventListener(n,e,i)));return r}return t.addEventListener(s,e,i),pa.Hr(pa.Vf,()=>t.removeEventListener(s,e,i))}},pa.Yf=class extends pa.Vf{Xf(t){this.Uf=t}},pa.Jf=class extends pa.Vf{constructor(...t){super(),this.Zf=new Set;for(let s of t)this.$u(s)}$u(...t){if(this.jf)throw new Error("already disposed");for(let s of t)this.Zf.add(s)}Kf(t){if(this.jf)throw new Error("already disposed");this.Zf.delete(t)}Qf(){if(this.jf)throw new Error("already disposed");if(this.Zf){for(let t of this.Zf)t.zf();this.Zf.clear()}}Hf(){return this.jf}zf(){if(this.jf)throw new Error("already disposed");this.jf=!0;for(let t of this.Zf)t.zf();this.Zf.clear(),this.Zf=null}qr(){this.zf()}}}{const ma=self._s;ma.td=class extends ma.Ur{constructor(){super(),this.sd=0,this.Aa=0,this.ed=0,this.rd=0}$u(t){t=+t,this.Aa=t-this.sd,this.ed=this.rd+this.Aa,this.sd=this.ed-this.rd-this.Aa,this.rd=this.ed}nd(t){this.rd-=+t}Hs(){return this.rd}$f(){this.sd=0,this.Aa=0,this.ed=0,this.rd=0}Set(t){this.sd=0,this.Aa=0,this.ed=0,this.rd=+t}hd(t){this.sd=t.sd,this.Aa=t.Aa,this.ed=t.ed,this.rd=t.rd}qr(){}}}{const ga=self._s,ya={},wa=!0,Sa=!1;ya.od=function(t){this.ad=t,this.right=this.ad.ld,this.left=this.ad.ld,this.parent=null,this.color=!1,this.key=null},ya.ud=function(t){this.size=0,this.ld=new ya.od(this),this.ld.color=!1,this.root=this.ld,this.root.parent=this.ld,this.compare=t||this.fd},ya.ud.prototype.fd=function(t,s){return t<s?-1:s<t?1:0},ya.ud.prototype.clone=function(){var t=new ya.ud(this.compare);return t.dd(this),t},ya.ud.prototype.clear=function(){this.size=0,this.ld=new ya.od(this),this.ld.color=!1,this.root=this.ld,this.root.parent=this.ld},ya.ud.prototype.pd=function(t){var s=t.right;t.right=s.left,s.left!=this.ld&&(s.left.parent=t),s.parent=t.parent,t.parent==this.ld?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,s.left=t,t.parent=s},ya.ud.prototype.md=function(t){var s=t.left;t.left=s.right,s.right!=this.ld&&(s.right.parent=t),s.parent=t.parent,t.parent==this.ld?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,s.right=t,t.parent=s},ya.ud.prototype.gd=function(t){if(this.contains(t))this.yd(t).key=t;else{var s=new ya.od(this);s.key=t;for(var e=this.ld,i=this.root;i!=this.ld;)e=i,i=this.compare(s.key,i.key)<0?i.left:i.right;s.parent=e,e==this.ld?this.root=s:this.compare(s.key,e.key)<0?e.left=s:e.right=s,s.left=this.ld,s.right=this.ld,s.color=wa,this.wd(s),this.size++}},ya.ud.prototype.wd=function(t){for(;t!=this.ld&&t!=this.root&&t.parent.color==wa;){var s;t.parent==t.parent.parent.left?(s=t.parent.parent.right).color==wa?(t.parent.color=!1,s.color=!1,t.parent.parent.color=wa,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.pd(t)),t.parent.color=!1,t.parent.parent.color=wa,t.parent.parent!=this.ld&&this.md(t.parent.parent)):(s=t.parent.parent.left).color==wa?(t.parent.color=!1,s.color=!1,t.parent.parent.color=wa,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.md(t)),t.parent.color=!1,t.parent.parent.color=wa,t.parent.parent!=this.ld&&this.pd(t.parent.parent))}this.root.color=!1},ya.ud.prototype.Sd=function(t){var s,e;(e=(s=t.left==this.ld||t.right==this.ld?t:this.vd(t)).left!=this.ld?s.left:s.right).parent=s.parent,s.parent==this.ld?this.root=e:s==s.parent.left?s.parent.left=e:s.parent.right=e,s!=t&&(t.key=s.key),0==s.color&&this.bd(e),this.size--},ya.ud.prototype.bd=function(t){for(;t!=this.root&&0==t.color;){var s;t==t.parent.left?((s=t.parent.right).color==wa&&(s.color=!1,t.parent.color=wa,this.pd(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=wa,t=t.parent):(0==s.right.color&&(s.left.color=!1,s.color=wa,this.md(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.pd(t.parent),t=this.root)):((s=t.parent.left).color==wa&&(s.color=!1,t.parent.color=wa,this.md(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=wa,t=t.parent):(0==s.left.color&&(s.right.color=!1,s.color=wa,this.pd(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.md(t.parent),t=this.root))}t.color=!1},ya.ud.prototype.remove=function(t){var s=this.yd(t);if(s!=this.ld){var e=s.key;return this.Sd(s),e}return null},ya.ud.prototype.Md=function(t,s){this.remove(s)},ya.ud.prototype.min=function(t){for(;t.left!=this.ld;)t=t.left;return t},ya.ud.prototype.max=function(t){for(;t.right!=this.ld;)t=t.right;return t},ya.ud.prototype.vd=function(t){if(t.right!=this.ld)return this.min(t.right);for(var s=t.parent;s!=this.ld&&t==s.right;)t=s,s=s.parent;return s},ya.ud.prototype.Td=function(t){if(t.left!=this.ld)return this.max(t.left);for(var s=t.parent;s!=this.ld&&t==s.left;)t=s,s=s.parent;return s},ya.ud.prototype.xd=function(t){if(this.size>0){var s=this.yd(t);if(s==this.ld)return null;if(s.right!=this.ld)return this.min(s.right).key;for(var e=s.parent;e!=this.ld&&s==e.right;)s=e,e=e.parent;return e!=this.ld?e.key:null}return null},ya.ud.prototype.Cd=function(t){if(this.size>0){var s=this.yd(t);if(s==this.ld)return null;if(s.left!=this.ld)return this.max(s.left).key;for(var e=s.parent;e!=this.ld&&s==e.left;)s=e,e=e.parent;return e!=this.ld?e.key:null}return null},ya.ud.prototype.Gd=function(){return this.min(this.root).key},ya.ud.prototype._d=function(){return this.max(this.root).key},ya.ud.prototype.yd=function(t){for(var s=this.root;s!=this.ld&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},ya.ud.prototype.contains=function(t){return null!=this.yd(t).key},ya.ud.prototype.getValues=function(){var t=[];return this.forEach(function(s){t.push(s)}),t},ya.ud.prototype.dd=function(t){if("array"==ya.Id(t))for(var s=0;s<t.length;s++)this.gd(t[s]);else if("function"==ya.Id(t.forEach))t.forEach(this.gd,this);else if("function"==ya.Id(t.getValues)){var e=t.getValues();for(s=0;s<e.length;s++)this.gd(e[s])}else if("object"==ya.Id(t))for(var i in t)this.gd(t[i])},ya.ud.prototype.Pd=function(t){if("array"==ya.Id(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==ya.Id(t.forEach))t.forEach(this.Md,this);else if("function"==ya.Id(t.getValues)){var e=t.getValues();for(s=0;s<e.length;s++)this.remove(e[s])}else if("object"==ya.Id(t))for(var i in t)this.remove(t[i])},ya.ud.prototype.Rd=function(t){if("array"==ya.Id(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==ya.Id(t.forEach))return t.every(this.contains,this);if("function"==ya.Id(t.getValues)){var e=t.getValues();for(s=0;s<e.length;s++)if(!this.contains(e[s]))return!1;return!0}if("object"==ya.Id(t)){for(var i in t)if(!this.contains(t[i]))return!1;return!0}},ya.ud.prototype.range=function(t,s){var e=[];return this.Ad(function(t){e.push(t)},t,s),e},ya.ud.prototype.Ed=function(t,s){if(!this.Od())for(var e=this.min(this.root);e!=this.ld;){if(t.call(s,e.key,this))return;e=this.vd(e)}},ya.ud.prototype.Fd=function(t,s,e){if(!this.Od())for(var i=this.yd(s);i!=this.ld;){if(t.call(e,i.key,this))return;i=this.vd(i)}},ya.ud.prototype.traverseTo=function(t,s,e){if(!this.Od())for(var i=this.min(this.root),r=this.yd(s);i!=r;){if(t.call(e,i.key,this))return;i=this.vd(i)}},ya.ud.prototype.Ad=function(t,s,e,i){if(!this.Od())for(var r=this.yd(s),n=this.yd(e);r!=n;){if(t.call(i,r.key,this))return;r=this.vd(r)}},ya.ud.prototype.Dd=function(t,s){if(!this.Od())for(var e=this.max(this.root);e!=this.ld;){if(t.call(s,e.key,this))return;e=this.Td(e)}},ya.ud.prototype.forEach=function(t,s){if(!this.Od())for(var e=this.min(this.root);e!=this.ld;e=this.vd(e))t.call(s,e.key,e.key,this)},ya.ud.prototype.some=function(t,s){if(this.Od())return!1;for(var e=this.min(this.root);e!=this.ld;e=this.vd(e))if(t.call(s,e.key,e.key,this))return!0;return!1},ya.ud.prototype.every=function(t,s){if(this.Od())return!1;for(var e=this.min(this.root);e!=this.ld;e=this.vd(e))if(!t.call(s,e.key,e.key,this))return!1;return!0},ya.ud.prototype.map=function(t,s){var e=[];if(this.Od())return e;for(var i=this.min(this.root);i!=this.ld;i=this.vd(i))e.push(t.call(s,i.key,i.key,this));return e},ya.ud.prototype.filter=function(t,s){var e=[];if(this.Od())return e;for(var i=this.min(this.root);i!=this.ld;i=this.vd(i))t.call(s,i.key,i.key,this)&&e.push(i.key);return e},ya.ud.prototype.Ld=function(){return this.size},ya.ud.prototype.Od=function(){return 0==this.size},ya.ud.prototype.isSubsetOf=function(t){var s=ya.Ld(t);if(this.Ld()>s)return!1;var e=0;if(this.Od())return!0;for(var i=this.min(this.root);i!=this.ld;i=this.vd(i))ya.contains.call(t,t,i.key)&&e++;return e==this.Ld()},ya.ud.prototype.intersection=function(t){var s=new ya.ud(this.compare);if(this.Od())return s;for(var e=this.min(this.root);e!=this.ld;e=this.vd(e))t.contains.call(t,e.key,e.key,this)&&s.gd(e.key);return s},ga.ud=class extends ga.Ur{constructor(t){super(),this.kd=new ya.ud(t),this.Nd=!1,this.Bd=new Set,this.$d=new Set}$u(t){this.Nd?this.kd.contains(t)?this.$d.delete(t):this.Bd.add(t):this.kd.gd(t)}Kf(t){this.Nd?this.kd.contains(t)?this.$d.add(t):this.Bd.delete(t):this.kd.remove(t)}zs(t){return this.Nd?!!this.Bd.has(t)||!this.$d.has(t)&&this.kd.contains(t):this.kd.contains(t)}Ru(){this.kd.clear(),this.Bd.clear(),this.$d.clear()}toArray(){if(this.Nd)throw new Error("cannot be used in queueing mode");return this.kd.getValues()}Fu(){return this.kd.Ld()+this.Bd.size-this.$d.size}Au(){return 0===this.Fu()}Wd(){if(this.Au())throw new Error("empty set");if(this.Nd)throw new Error("cannot be used in queueing mode");const t=this.kd;return t.min(t.root).key}Vd(){if(this.Au())throw new Error("empty set");if(this.Nd)throw new Error("cannot be used in queueing mode");const t=this.Wd();return this.Kf(t),t}jd(t){if(t=!!t,this.Nd!==t&&(this.Nd=t,!t)){for(const t of this.$d)this.kd.remove(t);this.$d.clear();for(const t of this.Bd)this.kd.gd(t);this.Bd.clear()}}Ud(t){this.kd.forEach(t)}*values(){if(this.Au())return;const t=this.kd;for(let s=t.min(t.root);s!=t.ld;s=t.vd(s))yield s.key}[Symbol.iterator](){return this.values()}}}{const va=self._s;va.zd=class{constructor(t=va.hardwareConcurrency){this.Hd=t,this.qd=[],this.Jd=0}$u(t,s){return new Promise((e,i)=>{const r={if:t,resolve:e,reject:i,Yd:s};s?.signal&&s.signal.aborted?i(new Error("abort")):(s?.signal&&(r.onabort=()=>{const t=this.qd.indexOf(r);-1!==t&&(this.qd.splice(t,1),i(new Error("abort")))},s.signal.addEventListener("abort",r.onabort)),this.qd.push(r),this.Xd())})}Zd(t){for(let s=0,e=this.qd.length;s<e;++s)if(this.qd[s].if===t)return s;return-1}Kd(t,s){const e=this.Zd(t);if(-1===e)throw new Error("cannot find promise to resolve");this.qd[e].resolve(s),this.qd.splice(e,1)}Qd(t,s){const e=this.Zd(t);if(-1===e)throw new Error("cannot find promise to reject");this.qd[e].reject(s),this.qd.splice(e,1)}async Xd(){if(!this.qd.length)return;if(this.Jd>=this.Hd)return;this.Jd++;const t=this.qd.shift();t.Yd?.signal&&t.onabort&&t.Yd.signal.removeEventListener("abort",t.onabort);try{const s=await t.if();t.resolve(s)}catch(s){t.reject(s)}this.Jd--,this.Xd()}}}{const ba=self._s;ba.tp=class{constructor(t,s,e){this.Lf=t,this.sp=s,this.ep=e||2*s,this.ip=-1,this.rp=-1/0,this.np=()=>this.hp(),this.op=!1,this.ap=!1,this.lp=null}up(t){this.ap=!!t}cp(){return void 0!==ba.fp&&ba.fp.pp()?this.ep:this.sp}mp(...t){if(-1!==this.ip)return;this.lp=t;let s=ba.Ff(),e=s-this.rp,i=this.cp();e>=i&&this.ap?(this.rp=s,this.gp()):this.ip=self.setTimeout(this.np,Math.max(i-e,4))}gp(){this.op=!0;const t=this.lp;this.lp=null,t?this.Lf(...t):this.Lf(),this.op=!1}$f(){this.op||(this.yp(),this.lp=null,this.rp=ba.Ff())}hp(){this.ip=-1,this.rp=ba.Ff(),this.gp()}yp(){-1!==this.ip&&(self.clearTimeout(this.ip),this.ip=-1)}qr(){this.yp(),this.Lf=null,this.lp=null,this.np=null}}}{const Ma=self._s;Ma.wp=class{constructor(){this.Sp=new Map,this.vp=!1,this.bp=null,this.Mp=null,this.Tp=null,this.xp=null}Cp(t){this.vp=!!t}Gp(){return this.vp}_p(t){this.bp=t}Ip(t){if(!this.bp)throw new Error("no get base size callback set");return this.bp(t)}Pp(t){this.Mp=t}Rp(t,s,e,i,r,n){if(!this.Mp)throw new Error("no raster at size callback set");return this.Mp(t,s,e,i,r,n)}Ap(t){this.Tp=t}Ep(t){if(!this.Tp)throw new Error("no release result callback set");this.Tp(t)}Op(t){this.xp=t}Fp(){if(!this.xp)throw new Error("no redraw callback set");this.xp()}Dp(t){let s=this.Sp.get(t);return s||(s=Ma.Hr(Ma.Lp,this,t),this.Sp.set(t,s)),s.kp(),s}Np(t){this.Sp.delete(t.Bp())}$p(){for(const t of this.Sp.values())t.Wp(),t.Vp()}}}{const Ta=self._s,xa=4096;Ta.Lp=class{constructor(t,s){this.jp=t,this.Up=s,this.zp=0,this.Hp=0,this.qp=0,this.Jp=this.jp.Ip(s).then(t=>{this.jp&&(this.Hp=t[0],this.qp=t[1],this.jp.Fp())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.Yp=!0,this.jp&&this.jp.Fp()}),this.Xp=0,this.Zp=0,this.Kp=0,this.Qp=0,this.tm=!1,this.sm=null,this.im=!1,this.Yp=!1}qr(){if(this.zp<=0)throw new Error("already released");this.zp--,0===this.zp&&this.rm()}Wp(){this.sm&&(this.jp.Ep(this.sm),this.sm=null)}rm(){this.Wp(),this.jp.Np(this),this.jp=null}Bp(){return this.Up}kp(){this.zp++}nm(){return this.zp>0}hm(){return this.sm}Vp(){this.im=!0}async om(t,s,e){if(0===s||0===e||this.Yp)return;if(this.tm)return;let i=Ta.Mn(Math.ceil(s)),r=Ta.Mn(Math.ceil(e));const n=Math.max(i,r);if(n>4096){const t=4096/n;s*=t,e*=t,i=Math.min(Math.ceil(i*t),4096),r=Math.min(Math.ceil(r*t),4096)}if(s<i&&e<r){const t=s/e;i/r>t?(s=r*t,e=r):(s=i,e=i/t)}if(this.jp.Gp()&&(i=Math.ceil(s),r=Math.ceil(e)),i<=this.Xp&&r<=this.Zp&&!this.im)return;this.tm=!0,this.Xp=i,this.Zp=r;const h=await this.jp.Rp(this.Up,t,this.Xp,this.Zp,s,e);this.jp&&(this.Wp(),this.sm=h,this.Kp=s,this.Qp=e,this.tm=!1,this.im=!1,this.jp.Fp())}am(){return this.Jp}lm(){return this.Hp}um(){return this.qp}fm(){return this.Kp}dm(){return this.Qp}pm(){return this.Yp}}}{let Ca=function(t){return Aa.get(t)};lookupHtmlEntity=Ca;const Ga=self._s;Ga.gm="\ufeff";const _a=new Set("0123456789");Ga.ym=function(t){return _a.has(t)};const Ia=new Set(" \t\n\r\u2028\u2029");Ga.wm=function(t){return Ia.has(t)},Ga.Sm=function(t){return[...t].filter(t=>!Ga.wm(t)).join("")},Ga.vm=function(t){for(const s of t)if(!Ga.wm(s))return!1;return!0},Ga.bm=function(t){for(const s of t)if(!Ga.wm(s))return!1;return!0},Ga.Mm=function(t){return 1===t.length&&t.charCodeAt(0)<32},Ga.Tm=function(t){return[...t].filter(t=>!Ga.Mm(t)).join("")};let Pa=null;try{Pa=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}Ga.xm=function(t){return!Ga.wm(t)&&Pa&&Pa.test(t)};const Ra=new Set("0123456789.+-e");Ga.Cm=function(t){if(!(t=t.trim()).length)return!1;let s=t.charAt(0);if("-"!==s&&!_a.has(s))return!1;for(let s of t)if(!Ra.has(s))return!1;return!0},Ga.Gm=function(t){let s=t.length;for(;s>0;){let e=t.charAt(s-1);if(!Ga.ym(e))break;--s}return t.substr(0,s)},Ga._m=function(t){let s=Ga.Gm(t),e=t.substr(s.length);return e=e?(parseInt(e,10)+1).toString():"2",s+e};const Aa=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),Ea=/[&<>"']/g;Ga.Im=function(t){return t.replace(Ea,Ca)},Ga.Pm=function(t){let s=Ga.Rm(t,"\\","\\\\");return s=Ga.Rm(s,'"','\\"'),s=Ga.Rm(s,"\t","\\t"),s=Ga.Rm(s,"\r",""),Ga.Rm(s,"\n","\\n")},Ga.Am=function(t){let s=Ga.Rm(t,"&","&amp;");return s=Ga.Rm(s,"<","&lt;"),s=Ga.Rm(s,">","&gt;"),Ga.Rm(s,'"',"&quot;")};const Oa=/[-[\]{}()*+?.,\\^$|#\s]/g;Ga.Je=function(t){return t.replace(Oa,"\\$&")},Ga.Em=function(t,s){let e=0;for(const i of t)i===s&&++e;return e},Ga.Om=function(t,s){let e=0,i=0;for(;e<s;){if(e=t.indexOf("\n",e),-1===e)return i;i++,e++}return i},Ga.Fm=function(t,s,e=!1){if(!s)return[];e||(t=t.toLowerCase(),s=s.toLowerCase());const i=s.length;let r=0,n=0,h=[];for(;(n=t.indexOf(s,r))>-1;)h.push(n),r=n+i;return h},Ga.Rm=function(t,s,e){return t.replaceAll(s,()=>e)},Ga.Dm=function(t,s,e){return t.replace(new RegExp(Ga.Je(s),"gi"),()=>e)},Ga.Lm=function(t,s){"string"==typeof s?t.textContent=s:s.km()?t.textContent=s.toString():(t.innerHTML=s.Nm(),s instanceof Ga.pr&&s.Bm(t))},Ga.$m=function(t,s){return t instanceof Ga.dr||t instanceof Ga.pr?t.equals(s):s instanceof Ga.dr||s instanceof Ga.pr?s.equals(t):t===s},Ga.Wm=function(t,...s){let e=t;for(let i=0,r=s.length;i<r;++i){const r=`{${i}}`;if(!t.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);e=e.replace(r,s[i].toString())}return e},Ga.Vm=function(t,...s){let e=t,i=-1,r=-1;for(let n=0,h=s.length;n<h;++n){const h=`{${n}}`;t.includes(h)?(r=n,e=e.replace(h,s[n].toString())):-1===i&&(i=n)}if(i>=0&&r>=0&&i<r)throw new Error(`missing placeholder '${i}' in string substitution`);return e},Ga.jm=function(t,s){let e=t;for(let[t,i]of Object.entries(s))e=e.replaceAll(t,i.toString());return e},Ga.Um=function(t,s){return t>s?1:t<s?-1:0},Ga.zm=function(t,s){let e=t.toLowerCase(),i=s.toLowerCase();return e>i?1:e<i?-1:0};const Fa=new self.Intl.Segmenter;Ga.Hm=function(t){const s=[];for(const e of Fa.segment(t))s.push(e.segment);return s},Ga.qm=function*(t){for(const s of Fa.segment(t))yield s.segment},Ga.Jm=function(t){let s=0;for(const e of Fa.segment(t))++s;return s};const Da=1024,La=1048576,ka=1073741824,Na=1099511627776;Ga.Ym=function(t,s){let e="common."+(s?"dataRates":"dataSizes")+".";const i=self.Xm;if(t<1024)return i(e+"bytes",t);if(t<1048576){let s=t/1024;return s=s<10?Math.round(10*s)/10:Math.round(s),i(e+"kilobytes",s)}if(t<ka){let s=t/1048576;return s=s<10?Math.round(10*s)/10:Math.round(s),i(e+"megabytes",s)}if(t<Na){let s=t/ka;return s=s<10?Math.round(10*s)/10:Math.round(s),i(e+"gigabytes",s)}{let s=t/Na;return s=s<10?Math.round(10*s)/10:Math.round(s),i(e+"terabytes",s)}};const Ba={Zm:!1,Km:!0,Qm:!0,tg:!0,sg:!0};Ga.eg=function(t,s){s=Object.assign({},Ba,s),Ga.rg.ig("common.time");const e=[],i=self.lang,r=self.ng;if(s.Km){const s=Math.floor(t/86400);s>0&&(t-=24*s*3600,e.push(r(".days",null,s)))}if(s.Qm){const s=Math.floor(t/3600);(s>0||e.length)&&(t-=3600*s,e.push(r(".hours",null,s)))}if(s.tg){const i=Math.floor(t/60);(i>0||e.length||!s.sg)&&(t-=60*i,e.push(r(".minutes",null,i)))}if(s.sg){const s=Math.floor(t%60);e.push(r(".seconds",null,s))}const n=(s.Zm?i(".approx-prefix"):"")+e.join(i(".separator"));return Ga.rg.hg(),n},Ga.og=function(t,s){let e=t<0?"-":"",i=(t=Math.abs(t)).toString(),r=s-i.length;for(let t=0;t<r;++t)e+="0";return e+i},Ga.ag=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},Ga.lg=function(t,s){let e=t.split(".").map(t=>t.trim()),i=s.split(".").map(t=>t.trim());Ga.xh(e,4,"0"),Ga.xh(i,4,"0"),e=e.map(t=>parseInt(t,10)),i=i.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const s=e[t]-i[t];if(0!==s)return s<0?-1:1}return 0},Ga.ug=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random());return("x"===t?s:3&s|8).toString(16)})},Ga.cg=function(t,s){if(t.length!==s.length)throw new Error("strings must be same length");let e=0;for(let i=0,r=t.length;i<r;++i)t.charAt(i)!==s.charAt(i)&&++e;return e},Ga.fg=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let e,i,r,n,h,o;for(t.length>s.length&&(e=t,t=s,s=e),o=Array(t.length+1),i=0;i<=t.length;i++)o[i]=i;for(i=1;i<=s.length;i++){for(n=i,r=1;r<=t.length;r++)h=s[i-1]===t[r-1]?o[r-1]:Math.min(o[r-1]+1,Math.min(n+1,o[r]+1)),o[r-1]=n,n=h;o[t.length]=n}return o[t.length]}}{let $a=function(t,s,e){const i=ja.get(e);if(!i)return"class"===e?s?"</span>":`<span class="bbclass${Ya++}">`:t;if("string"==typeof i){if("a"===i&&0===qa.length||"abbr"===i&&0===Ja.length)return t;if("a"!==i||s){if("abbr"!==i||s)return"<"+s+i+">";{const t=parseInt(e.substring(3),10)-1;if(t<0||t>=Ja.length)throw new Error("invalid bbcode tip substitution");const s=Ja[t];let i="";if("string"==typeof s?i=s:"function"==typeof s&&(i=s()),"string"!=typeof i)throw new TypeError("invalid bbcode tip");return`<abbr title="${Wa.Rm(i,'"',"&quot;")}">`}}{const t=parseInt(e.substring(1),10)-1;if(t<0||t>=qa.length)throw new Error("invalid bbcode link substitution");const s=qa[t];if("string"==typeof s)return`<a href="${qa[t]}">`;if("function"==typeof s)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(i)){let t=i[0],e=i[1];return s?"</"+t+">":`<${t} class="${e}">`}};bbToHtmlReplacerFunc=$a;const Wa=self._s,Va=self.assert,ja=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),Ua=new Set(["icon"]),za=/\[(\/?)([a-zA-Z0-9]+)\]/g,Ha=/\[(\/?)([^\[\n]*?)\]/g;let qa=null,Ja=null,Ya=0;const Xa=/\n/g;Wa.pr=class{constructor(t,s){if(this.dg=s&&s.pg?t:Wa.Im(t),this.mg="",this.gg=!1,this.yg=[],this.wg=[],s){if(this.gg=!!s.Sg,s.links){if(s.links.length>9)throw new Error("too many links");this.yg=s.links}if(s.vg){if(s.vg.length>9)throw new Error("too many tips");this.wg=s.vg}}this.bg=this.dg.includes("["),this.Mg=this.gg&&this.dg.includes("\n"),this.Tg=!this.bg&&!this.Mg&&!this.dg.includes("&"),this.xg=!1,this.Cg=[]}toString(){return this.dg}valueOf(){return this.dg}km(){return this.Tg}Gg(){return this.bg?this.dg.replace(za,""):this.dg}Nm(){if(this.Tg)return this.dg;if(!this.mg&&this.dg){let t=this.dg;this.bg&&(Ya=0,qa=this.yg,Ja=this.wg,t=t.replace(za,$a),qa=null,Ja=null),this.Mg&&(t=t.replace(Xa,"<br>")),this.mg=t}return this.mg}Bm(t){if(this.yg.length)for(let s=0,e=this.yg.length;s<e;++s){const e=this.yg[s];if("function"!=typeof e)continue;const i=t.querySelector(".bblink"+s);if(!i)throw new Error("unable to attach BBString link handler");i.onclick=e}}equals(t){return t instanceof Wa.dr?this.Nm()===t.Nm():t instanceof Wa.pr?this.dg===t.dg:this.dg===t}_g(){if(this.xg)return this.Cg;const t=[],s=this.dg,e=[];Ha.lastIndex=0;let i=0,r=null;for(;null!==(r=Ha.exec(s));){const n=r.index;if(n>0&&"\\"===s.charAt(n-1))continue;const h=r[0],o=r[1],a=r[2],l=s.substring(i,n);if(i=n+h.length,l&&t.push({text:l,Ig:e.slice(0)}),a)if(o){const t=a.toLowerCase();for(let s=e.length-1;s>=0;--s)if(e[s].tag===t){e.splice(s,1);break}}else{let s=a,i=null;const r=a.indexOf("=");if(-1!==r?(s=a.substring(0,r).toLowerCase(),i=a.substring(r+1)):s=s.toLowerCase(),Ua.has(s)){if("icon"!==s)throw new Error(`unknown self-closing tag ${s}`);t.push({icon:i,Ig:e.slice(0)})}else e.push({tag:s,Pg:i})}}i<s.length&&t.push({text:s.substring(i),Ig:e.slice(0)});for(const s of t)s.text&&(s.text=this.Rg(s.text));return this.Cg=t.map(t=>t.icon?Wa.Hr(Wa.Ag,{icon:t.icon,Ig:t.Ig}):Wa.Hr(Wa.Eg,{Og:Wa.Hm(t.text),Ig:t.Ig})),this.xg=!0,this.Cg}Rg(t){return t=Wa.Rm(t,"\\[","["),Wa.Rm(t,"\\\\","\\")}static Fg(t){return Wa.Hr(Wa.pr,t,{pg:!0}).Gg()}static Dg(t){return t.replace(Ha,"")}}}{let Za=function(t){return""!==t&&""!==t&&el.wm(t)},Ka=function(t){return il.has(t)},Qa=function(t){return el.xm(t)&&!Ka(t)},tl=function(t){for(;t.length>0&&Za(t.at(-1));)t.pop()},sl=function(t){return"\n"===t||"\r\n"===t};IsWordBreakWhiteSpace=Za,IsOpeningCJKPunctiationChar=Ka,IsContinuingCJKPunctuationChar=Qa,WordBreakTrimEnd=tl,IsNewline=sl;const el=self._s,il=new Set("");el.Lg=class{constructor(){this.kg=[],this.Ng=null}Bg(){return this.kg}$g(){return this.kg.length}Wg(t){this.Ng=t}Vg(t,s){let e=0,i=0,r=0,n=0,h=0;for(const o of t){if(-1===o.jg()){const t=s(o);o.Ug(t.height),o.zg(t.fontBoundingBoxAscent||0),o.Hg(t.fontBoundingBoxDescent||0),o.qg(t.Jg||0),o.Yg()?o.Xg(t.width):o.Zg()&&o.Kg(this.Ng)}e+=o.jg(),i=Math.max(i,o.Qg()),r=Math.max(r,o.ty()),n=Math.max(n,o.sy()),h=Math.max(h,o.ey())}return{width:e,height:i,fontBoundingBoxAscent:r,fontBoundingBoxDescent:n,Jg:h}}iy(t,s,e,i,r,n){this.kg.push(el.Hr(el.Lg.ny,{hy:t,width:s,height:e,fontBoundingBoxAscent:i,fontBoundingBoxDescent:r,Jg:n}))}Lg(t,s,e,i,r){if("string"==typeof t&&(t=[el.Hr(el.Eg,{Og:el.Hm(t)})]),el.bh(this.kg),!t.length||1===t.length&&t[0].Yg()&&t[0].Au()||e<2)return;if(1===t.length){const i=t[0];if(i.Yg()&&i.oy()<=100&&!i.ly()){let{width:t,height:n,fontBoundingBoxAscent:h,fontBoundingBoxDescent:o,Jg:a}=s(i);if(t+=r,i.Xg(t),i.Ug(n),i.zg(h||0),i.Hg(o||0),i.qg(a||0),t<=e)return void this.iy([i],t,n,h,o,a)}}let n;n="word"===i?this.uy(t):"cjk"===i?this.py(t):this.my(t),this.gy(n,s,e,r)}uy(t){const s=[];let e=[],i=!1;for(const r of t){const t=r.yy();if(r.Zg())e.length>0&&s.push(e),s.push([r]),e=[];else for(const n of r.wy())if(sl(n))e.length>0&&s.push(e),s.push([el.Hr(el.Eg,{Og:["\n"],Ig:t})]),e=[];else if(0===e.length)e.push(el.Hr(el.Eg,{Og:[n],Ig:t})),i=Za(n);else{const r=Za(n);if(r===i){const s=e.at(-1);s.yy()===t?s.Sy(n):e.push(el.Hr(el.Eg,{Og:[n],Ig:t}))}else s.push(e),e=[el.Hr(el.Eg,{Og:[n],Ig:t})],i=r}}return e.length>0&&s.push(e),s}py(t){const s=[];let e=[],i=!1;for(const r of t){const t=r.yy();if(r.Zg())e.length>0&&s.push(e),s.push([r]),e=[];else for(const n of r.wy())if(sl(n))e.length>0&&s.push(e),s.push([el.Hr(el.Eg,{Og:["\n"],Ig:t})]),e=[];else if(0===e.length)e.push(el.Hr(el.Eg,{Og:[n],Ig:t})),i=Ka(n);else if(i||Qa(n)){const s=e.at(-1);s.yy()===t?s.Sy(n):e.push(el.Hr(el.Eg,{Og:[n],Ig:t})),i=Ka(n)}else s.push(e),e=[el.Hr(el.Eg,{Og:[n],Ig:t})],i=Ka(n)}return e.length>0&&s.push(e),s}my(t){const s=[];for(const e of t)if(e.Yg()){const t=e.wy();el.Fr(s,t.map(t=>[el.Hr(el.Eg,{Og:[t],Ig:e.yy()})]))}else s.push([e]);return s}vy(t){return t.map(t=>t.by())}My(t,s){const e=t.length?t.at(-1):null;let i=0;e&&e.Yg()&&s[0].Yg()&&s[0].yy()===e.yy()&&(e.Ty(s[0].wy()),i=1);for(let e=s.length;i<e;++i){const e=s[i];t.push(e.by())}}gy(t,s,e,i){let r=[],n=0,h=0,o=0,a=0,l=0;for(const i of t){if(1===i.length&&i[0].Yg()&&1===i[0].oy()&&sl(i[0].wy()[0])){if(0===h){const t=s(el.Hr(el.Eg,{Og:[" "],Ig:i[0].yy()}));h=t.height,o=t.fontBoundingBoxAscent||0,a=t.fontBoundingBoxDescent||0,l=t.Jg||0}this.iy(r,n,h,o,a,l),r=[],n=0,h=0,o=0,a=0,l=0;continue}const t=this.vy(r);this.My(t,i);const u=this.Vg(t,s),c=u.width;if(c>=e)if(r.length>0&&this.iy(r,n,h,o,a,l),r=[],i[0].Yg()&&el.bm(i[0].wy()))n=0,h=0,o=0,a=0,l=0;else{this.My(r,i);const t=this.Vg(r,s);n=t.width,h=t.height,o=t.fontBoundingBoxAscent,a=t.fontBoundingBoxDescent,l=t.Jg}else r=t,n=c,h=u.height,o=u.fontBoundingBoxAscent,a=u.fontBoundingBoxDescent,l=u.Jg}r.length>0&&this.iy(r,n,h,o,a,l),this.xy(s,i)}xy(t,s){for(const e of this.kg){const i=e.Cy();if(!i.length)continue;let r=i.at(-1);if(r.Yg()){const n=r.wy(),h=n.slice(0);if(tl(h),0===h.length)e.Gy(-r.jg()),i.pop();else if(h.length<n.length){r._y(h);const s=t(r).width,i=r.jg()-s;r.Xg(s),e.Gy(-i)}0!==s&&i.length>0&&(r=i.at(-1),r.Gy(s),e.Gy(s))}}}Ru(){el.bh(this.kg)}Iy(){return this.kg.reduce((t,s)=>Math.max(t,s.jg()),0)}Py(){return this.kg.reduce((t,s)=>t+s.Qg(),0)}}}{const rl=self._s;rl.Lg.ny=class{constructor(t){this.Cg=t.hy||[],this.Ry=t.width||-1,this.Ay=t.height||-1,this.Ey=t.fontBoundingBoxAscent||-1,this.Oy=t.fontBoundingBoxDescent||-1,this.Fy=t.Jg||-1,this.Dy=0,this.Ly=0}hy(){return this.Cg.values()}*ky(){const t=this.Cg;for(let s=t.length-1;s>=0;--s)yield t[s]}Cy(){return this.Cg}Gy(t){this.Ry+=t}jg(){return this.Ry}Qg(){return this.Ay}Ny(){return this.Ey}sy(){return this.Oy}ey(){return this.Fy}By(t){this.Dy=t}$y(){return this.Dy}Wy(t){this.Ly=t}Vy(){return this.Ly}}}{const nl=self._s;nl.jy=class{constructor(t){this.Uy=t.Ig||[],this.Ry=t.width||-1,this.Ay=t.height||-1,this.Ey=t.fontBoundingBoxAscent||-1,this.Oy=t.fontBoundingBoxDescent||-1,this.Fy=t.Jg||-1,this.Dy=0,this.Ly=0}Yg(){return!1}Zg(){return!1}yy(){return this.Uy}zy(t){const s=this.Uy;for(let e=s.length-1;e>=0;--e){const i=s[e];if(i.tag===t)return i}return null}Hy(t){return!!this.zy(t)}qy(){const t=new Map;for(const s of this.Uy)t.set(s.tag,s.Pg);return t}Gy(t){this.Ry+=t}Xg(t){this.Ry=t}jg(){return this.Ry}Ug(t){this.Ay=t}Qg(){return this.Ay}zg(t){this.Ey=t}ty(){return this.Ey}Hg(t){this.Oy=t}sy(){return this.Oy}qg(t){this.Fy=t}ey(){return this.Fy}By(t){this.Dy=t}$y(){return this.Dy}Wy(t){this.Ly=t}Vy(){return this.Ly}}}{const hl=self._s;hl.Eg=class extends hl.jy{constructor(t){super(t),this.Jy=t.Og}Yg(){return!0}Ty(t){hl.Fr(this.Jy,t),this.Ry=-1,this.Ay=-1,this.Ey=-1,this.Oy=-1,this.Fy=-1}Sy(t){this.Jy.push(t)}by(){return hl.Hr(hl.Eg,{Og:this.Jy.slice(0),Ig:this.Uy,width:this.Ry,height:this.Ay,fontBoundingBoxAscent:this.Ey,fontBoundingBoxDescent:this.Oy,Jg:this.Fy})}wy(){return this.Jy}_y(t){this.Jy=t}oy(){return this.Jy.length}Au(){return 0===this.Jy.length}ly(){return this.Jy.includes("\n")}}}{const ol=self._s;ol.Ag=class extends ol.jy{constructor(t){super(t),this.Yy=t.icon}Zg(){return!0}Xy(){return this.Yy}by(){return ol.Hr(ol.Ag,{icon:this.Yy,Ig:this.Uy,width:this.Ry,height:this.Ay,fontBoundingBoxAscent:this.Ey,fontBoundingBoxDescent:this.Oy,Jg:this.Fy})}Zy(t){if(!t)return null;let s=Number(this.Yy);return String(s)===this.Yy?(s=Math.floor(s),t.Ky(s)):t.Qy(this.Yy)}Kg(t){const s=this.Zy(t);this.Ry=s?this.Ay*s.jg()/s.Qg():0}tw(t){const s=this.Zy(t);return s?s.tw():null}oy(){return 1}}}{const al=self._s;al.sw=class{constructor(t){this.ew=new Map,this.iw=t.rw,this.hw=t.ow}qr(){for(const t of this.ew.values())t.qr();this.ew.clear()}aw(t){let s=this.ew.get(t);if(s)return s;const e=this.iw(t);return s=al.Hr(al.lw,this,{source:t,uw:e}),this.ew.set(t,s),s}cw(t){return this.ew.has(t)}fw(t){const s=this.ew.get(t);s&&s.qr(),this.ew.delete(t)}async dw(t){return await this.hw(t)}}}{const ll=self._s;ll.lw=class{constructor(t,s){this.pw=t,this.mw=s.source,this.gw=[],this.yw=new Map,this.ww=!1,this.Sw=!1,this.bw=null;const e=s.uw.Mw;for(let t=0,s=e.length;t<s;++t){const s=e[t],i=ll.Hr(ll.Tw,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this.gw.push(i),s.tag&&this.yw.set(s.tag.toLowerCase(),i)}}qr(){for(const t of this.gw)t.qr();ll.bh(this.gw),this.yw.clear(),this.pw=null,this.mw=null}xw(){return this.ww}Cw(){return this.Sw}Gw(){return this.bw||(this.bw=this._w()),this.bw}async _w(){if(this.ww)return;this.ww=!0,this.Sw=!0;const t=await this.pw.dw(this.mw);if(!this.pw)return;const s=t.Mw;for(let t=0,e=Math.min(s.length,this.gw.length);t<e;++t){const e=s[t].Iw;this.gw[t].Pw(e)}this.Sw=!1}Ky(t){return(t=Math.floor(t))<0||t>=this.gw.length?null:this.gw[t]}Qy(t){return this.yw.get(t.toLowerCase())||null}}}{const ul=self._s;ul.Tw=class{constructor(t,s){this.Rw=t,this.mw=s.source||null,this.Aw=s.index,this.Ew=s.tag,this.Ry=s.width,this.Ay=s.height,this.Ow=null}qr(){this.Ry=0,this.Ay=0,this.Rw=null}Fw(){return this.mw}jg(){return this.Ry}Qg(){return this.Ay}Pw(t){this.Ow=t}tw(){return this.Ow}}}{let cl=function(t,s,e,i){const r=bl;gl.O(Sl,e,s),gl.O(vl,t,s),gl.Gt(r,Sl,vl),gl.normalize(r,r),i.set(r[0],r[1],r[2],gl.Ct(t,r))},fl=function(t,s,e,i,r,n,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.Dw,f=h.Lw,d=h.kw,p=1-c,m=1-f,g=1-d;return o*t*c+o*i*p+a*s*f+a*r*m+l*e*d+l*n*g>=u||o*i*c+o*t*p+a*r*f+a*s*m+l*n*d+l*e*g>u},dl=function(t,s,e,i){return i.x*t+i.y*s+i.z*e>=i.w};PlaneFromPoints=cl,IsInFrontOfPlane=fl,IsPointInFrontOfPlane=dl;const pl=self._s,ml=self.ls,gl=ml.ws,yl=ml.Ss,wl=ml.ds,Sl=gl.create(),vl=gl.create(),bl=gl.create(),Ml=yl.create(),Tl=wl.create(),xl=gl.create(),Cl=gl.create(),Gl=gl.create(),_l=gl.create(),Il=gl.create(),Pl=gl.create(),Rl=gl.create(),Al=gl.create(),El=yl.v(0,0,1,1);pl.Nw={Bw(t,s,e,i,r,n,h){const o=i[0]*t+i[4]*s+i[8]*e+i[12],a=i[1]*t+i[5]*s+i[9]*e+i[13],l=i[2]*t+i[6]*s+i[10]*e+i[14],u=i[3]*t+i[7]*s+i[11]*e+i[15];let c=r[0]*o+r[4]*a+r[8]*l+r[12]*u,f=r[1]*o+r[5]*a+r[9]*l+r[13]*u,d=r[2]*o+r[6]*a+r[10]*l+r[14]*u,p=r[3]*o+r[7]*a+r[11]*l+r[15]*u;return 0!==p&&(p=1/p,c*=p,f*=p,d*=p,h[0]=(.5*c+.5)*n[2]+n[0],h[1]=(.5*f+.5)*n[3]+n[1],h[2]=.5*(1+d),!0)},$w(t,s,e,i,r,n,h){const o=Tl,a=Ml;return wl.multiply(o,r,i),null!==wl.T(o,o)&&(a[0]=(t-n[0])/n[2]*2-1,a[1]=(s-n[1])/n[3]*2-1,a[2]=2*e-1,a[3]=1,yl.At(a,a,o),0!==a[3]&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0))},Ww(t,s,e,i,r,n,h){const o=Sl,a=vl;if(!pl.Nw.$w(t,s,0,i,r,n,o))return!1;if(!pl.Nw.$w(t,s,1,i,r,n,a))return!1;const l=vl;gl.O(l,a,o);const u=bl;gl.set(u,0,0,1);const c=-e,f=gl.Ct(u,l);let d=0;if(0===f){if(0!==gl.Ct(u,o)+c)return!1}else if(d=-(gl.Ct(o,u)+c)/f,d<0)return!1;return gl.vt(h,o,l,d),!0}};class Ol{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Dw=NaN,this.Lw=NaN,this.kw=NaN}set(t,s,e,i){this.x=t,this.y=s,this.z=e,this.w=i,this.Dw=t>0?1:0,this.Lw=s>0?1:0,this.kw=e>0?1:0}}pl.Nw.Vw=class{constructor(){this.jw=new Ol,this.Uw=new Ol,this.zw=new Ol,this.Hw=new Ol,this.qw=new Ol,this.Jw=new Ol}Yw(t,s){const e=El;pl.Nw.$w(0,1,0,t,s,e,xl),pl.Nw.$w(1,1,0,t,s,e,Cl),pl.Nw.$w(0,0,0,t,s,e,Gl),pl.Nw.$w(1,0,0,t,s,e,_l),pl.Nw.$w(0,1,1,t,s,e,Il),pl.Nw.$w(1,1,1,t,s,e,Pl),pl.Nw.$w(0,0,1,t,s,e,Rl),pl.Nw.$w(1,0,1,t,s,e,Al),cl(Gl,xl,Il,this.jw),cl(xl,Cl,Pl,this.Uw),cl(Cl,_l,Al,this.zw),cl(_l,Gl,Rl,this.Hw),cl(Rl,Il,Pl,this.Jw),cl(_l,Cl,xl,this.qw)}Xw(t,s,e,i,r,n){return fl(t,s,e,i,r,n,this.jw)&&fl(t,s,e,i,r,n,this.Uw)&&fl(t,s,e,i,r,n,this.zw)&&fl(t,s,e,i,r,n,this.Hw)&&fl(t,s,e,i,r,n,this.qw)&&fl(t,s,e,i,r,n,this.Jw)}Zw(t,s,e){return!dl(t,s,e,this.qw)}}}{const Fl=self._s,Dl=self.ls,Ll=Dl.ws,kl=Dl.Ss,Nl=Dl.ds,Bl=Nl.create(),$l=Ll.v(0,0,0),Wl=Ll.v(0,0,0),Vl=Ll.v(0,0,0),jl=Ll.v(0,1,0),Ul=kl.v(0,0,0,0),zl=new Fl.Pl,Hl=new Fl.Rect,ql=new Fl.Pl(0,0,1,0,1,1,0,1),Jl={Kw:1,Qw:1e4},Yl=Nl.v(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Fl.Nw.tS=class{constructor(t){t=Object.assign({},Jl,t),this.Ry=0,this.Ay=0,this.sS=Fl.tn(45),this.eS=Math.tan(this.sS/2),this.iS=Nl.create(),this.rS=Nl.create(),this.nS=!1,this.hS=t.Kw,this.oS=t.Qw,this.aS=[],this.lS=new Map,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=null,this.gS=null,this.yS=null,this.wS=null,this.SS=null,this.vS=null,this.bS=null,this.MS=new Map,this.TS=null,this.xS=[],this.CS=new Map,this.GS=0,this._S=0,this.IS=1,this.PS=[this.IS],this.RS=1,this.AS=[this.RS],this.ES=.5,this.OS=[this.ES],this.FS=0,this.DS=!0,this.LS=!1}kS(){this.GS=0,this._S=0,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=null,this.gS=null,this.yS=null,this.wS=null,this.SS=null,this.vS=null,this.bS=null,this.NS()}BS(){this.kS(),this.TS=null}$S(){for(const t of this.aS)t.qr();this.kS()}jg(){return this.Ry}Qg(){return this.Ay}WS(t){return this.VS()?100:t/(2*this.jS())}US(t){return this.VS()?t/(2*this.jS())/this.WS(t):1}zS(t){this.hS=t}HS(){return this.hS}qS(t){this.oS=t}JS(){return this.oS}YS(t){this.sS=t,this.eS=Math.tan(this.sS/2)}XS(){return this.sS}jS(){return this.eS}ZS(){this.nS=!1}KS(){this.nS=!0}VS(){return!this.nS}QS(){return this.nS}tv(t,s,e=.5,i=.5){const r=this.HS(),n=this.JS(),h=this.XS();if(.5===e&&.5===i)this.sv()?Nl.ut(t,h,s,r,n):Nl.perspective(t,h,s,r,n);else{const h=2*(e=1-e)-2,o=2*e,a=2*i-2,l=2*i,u=this.jS()*r,c=u*s;Nl.ot(t,h*c,o*c,a*u,l*u,r,n),this.sv()&&Nl.mul(t,Yl,t)}}ev(t,s,e,i=1){const r=self.devicePixelRatio,n=2*this.WS(e)*r*this.jS()/e,h=s*n/(2*r*i),o=e*n/(2*r*i),a=-h,l=h,u=-o,c=o;this.sv()?Nl.gt(t,a,l,u,c,this.HS(),this.JS()):Nl.dt(t,a,l,u,c,this.HS(),this.JS())}rv(t,s,e,i,r,n=1){let h=1;this.VS()&&(h=200*this.jS()/r);const o=Vl;Ll.set(o,h,-h,1);const a=$l,l=Wl;Ll.multiply(a,s,o),Ll.multiply(l,e,o),Nl.yt(t,a,l,i||jl),o[2]=n,Nl.scale(t,t,o)}nv(t,s,e,i,r,n,h,o){return Ll.set($l,t,s,e),Ll.set(Wl,i,r,n),this.rv(Bl,$l,Wl,jl,h,o),Bl}hv(t){this.aS.push(t),this.lS.set(t.Rc(),t)}ov(t){const s=this.aS.indexOf(t);-1!==s&&this.aS.splice(s,1),this.lS.delete(t.Rc())}NS(){Fl.bh(this.aS),this.lS.clear()}av(t){return this.lS.get(t)||null}lv(){return this.uS}uv(){this.cv(this.uS)}fv(){return this.cS}dv(){this.cv(this.cS)}pv(){this.cv(this.fS)}mv(){this.cv(this.dS)}gv(){this.cv(this.pS)}yv(){this.cv(this.mS)}wv(){this.cv(this.gS)}Sv(){this.cv(this.yS)}vv(){this.cv(this.wS)}bv(){this.cv(this.SS)}Mv(){this.cv(this.vS)}Tv(){this.cv(this.bS)}xv(t){this.TS=t}Cv(){return this.TS}Gv(t,s,e,i,r,n){const h=Fl.Nw.Iv._v(t,s,e,i,r,n);let o=this.MS.get(h);return o||(o=Fl.Hr(Fl.Nw.Iv,this,t,s,e,i,r,n),this.MS.set(h,o)),o.Pv(),o}Rv(t){t.Av(),0===t.Ev()&&(this.TS===t&&(this.TS=null),this.MS.delete(t.Ov()),t.qr())}Fv(t){Fl.bh(this.xS),this.CS.clear();let s=0;for(const e of t){const t=e[0],i=e[1],r=e[2];this.xS.push([i,r]),this.CS.set(t,{number:s,Dv:i,Lv:r}),s++}}kv(t){return this.xS[t]}Nv(t){return this.kv(t)[0]}Bv(t){return this.kv(t)[1]}$v(t){const s=this.CS.get(t);if(void 0===s)throw new Error("invalid blend name");return s}Wv(t){const s=this.CS.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}Vv(t){this.GS=t}jv(){return this.GS}Uv(t){this._S=t,this.TS=null}zv(){return this._S}ny(t,s,e,i){const r=Fl.an(t,s,e,i),n=Math.sin(r),h=Math.cos(r),o=.5*this.IS,a=n*o,l=h*o,u=this.RS;2===u?this.Hv(t,s,0,e,i,0,a,l):1===u?this.qv(t,s,0,e,i,0,a,l):this.Jv(t,s,0,e,i,0,a,l)}Yv(t,s,e,i,r,n){const h=Fl.an(t,s,i,r),o=Math.sin(h),a=Math.cos(h),l=.5*this.IS,u=o*l,c=a*l,f=this.RS;2===f?this.Hv(t,s,e,i,r,n,u,c):1===f?this.qv(t,s,e,i,r,n,u,c):this.Jv(t,s,e,i,r,n,u,c)}Hv(t,s,e,i,r,n,h,o){const a=this.ES,l=t+a-o,u=s+a-h,c=i+a+o,f=r+a+h,d=2*o,p=2*h,m=l+h,g=u-o,y=l-h+d,w=u+o+p,S=c+h,v=f-o,b=c-h-d,M=f+o-p;this.Xv(m,g,e,S,v,n,b,M,n,y,w,e,ql)}qv(t,s,e,i,r,n,h,o){const a=this.ES,l=t+a-o,u=s+a-h,c=i+a+o,f=r+a+h,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,v=f+o;this.Xv(d,p,e,y,w,n,S,v,n,m,g,e,ql)}Jv(t,s,e,i,r,n,h,o){const a=this.ES,l=t+a,u=s+a,c=i+a,f=r+a,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,v=f+o;this.Xv(d,p,e,y,w,n,S,v,n,m,g,e,ql)}Zv(t,s,e,i,r,n){const h=Fl.an(t,s,e,i),o=Math.sin(h),a=Math.cos(h),l=.5*this.IS,u=o*l,c=a*l,f=this.RS;2===f?this.Kv(t,s,e,i,u,c,r,n):1===f?this.Qv(t,s,e,i,u,c,r,n):this.tb(t,s,e,i,u,c,r,n)}Kv(t,s,e,i,r,n,h,o){const a=this.ES,l=t+a-n,u=s+a-r,c=e+a+n,f=i+a+r,d=2*n,p=2*r,m=l+r,g=u-n,y=l-r+d,w=u+n+p,S=c+r,v=f-n,b=c-r-d,M=f+n-p;zl.set(m,g,S,v,b,M,y,w),Hl.set(h,0,o,0),this.sb(zl,Hl)}Qv(t,s,e,i,r,n,h,o){const a=this.ES,l=t+a-n,u=s+a-r,c=e+a+n,f=i+a+r,d=l+r,p=u-n,m=l-r,g=u+n,y=c+r,w=f-n,S=c-r,v=f+n;zl.set(d,p,y,w,S,v,m,g),Hl.set(h,0,o,0),this.sb(zl,Hl)}tb(t,s,e,i,r,n,h,o){const a=this.ES,l=t+a,u=s+a,c=e+a,f=i+a,d=l+r,p=u-n,m=l-r,g=u+n,y=c+r,w=f-n,S=c-r,v=f+n;zl.set(d,p,y,w,S,v,m,g),Hl.set(h,0,o,0),this.sb(zl,Hl)}eb(t,s,e,i){const r=.5*this.IS,n=this.RS;2===n?this.ib(t,s,e,i,r):1===n?this.rb(t,s,e,i,r):this.nb(t,s,e,i,r)}ib(t,s,e,i,r){this.Hv(t,s,0,e,s,0,0,r),this.Hv(e,s,0,e,i,0,r,0),this.Hv(e,i,0,t,i,0,0,-r),this.Hv(t,i,0,t,s,0,-r,0)}rb(t,s,e,i,r){this.qv(t,s,0,e,s,0,0,r),this.qv(e,s,0,e,i,0,r,0),this.qv(e,i,0,t,i,0,0,-r),this.qv(t,i,0,t,s,0,-r,0)}nb(t,s,e,i,r){this.Jv(t,s,0,e,s,0,0,r),this.Jv(e,s,0,e,i,0,r,0),this.Jv(e,i,0,t,i,0,0,-r),this.Jv(t,i,0,t,s,0,-r,0)}hb(t){this.eb(t.Qa(),t.tl(),t.sl(),t.el())}ob(t){const s=Fl.an(t.Bn(),t.$n(),t.Wn(),t.Vn()),e=Math.sin(s),i=Math.cos(s),r=.5*this.IS,n=e*r,h=i*r,o=this.RS;2===o?this.ab(t,n,h):1===o?this.lb(t,n,h):this.ub(t,n,h)}ab(t,s,e){this.Hv(t.Bn(),t.$n(),0,t.Wn(),t.Vn(),0,s,e),this.Hv(t.Wn(),t.Vn(),0,t.jn(),t.Un(),0,e,-s),this.Hv(t.jn(),t.Un(),0,t.zn(),t.Hn(),0,-s,-e),this.Hv(t.zn(),t.Hn(),0,t.Bn(),t.$n(),0,-e,s)}lb(t,s,e){this.qv(t.Bn(),t.$n(),0,t.Wn(),t.Vn(),0,s,e),this.qv(t.Wn(),t.Vn(),0,t.jn(),t.Un(),0,e,-s),this.qv(t.jn(),t.Un(),0,t.zn(),t.Hn(),0,-s,-e),this.qv(t.zn(),t.Hn(),0,t.Bn(),t.$n(),0,-e,s)}ub(t,s,e){this.Jv(t.Bn(),t.$n(),0,t.Wn(),t.Vn(),0,s,e),this.Jv(t.Wn(),t.Vn(),0,t.jn(),t.Un(),0,e,-s),this.Jv(t.jn(),t.Un(),0,t.zn(),t.Hn(),0,-s,-e),this.Jv(t.zn(),t.Hn(),0,t.Bn(),t.$n(),0,-e,s)}cb(t){this.IS=t,this.PS[this.PS.length-1]=t}fb(){return this.IS}pb(t){if(this.PS.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this.PS.push(t),this.IS=t}mb(){if(this.PS.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.PS.pop(),this.IS=this.PS.at(-1)}gb(){this.RS=0,this.AS[this.AS.length-1]=0}yb(){this.RS=1,this.AS[this.AS.length-1]=0}wb(){this.RS=2,this.AS[this.AS.length-1]=0}Sb(t){if("butt"===t)this.bb();else if("square"===t)this.Mb();else{if("zag"!==t)throw new Error("invalid line cap");this.Tb()}}bb(){if(this.AS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.AS.push(0),this.RS=0}Mb(){if(this.AS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.AS.push(1),this.RS=1}Tb(){if(this.AS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.AS.push(2),this.RS=2}xb(){if(this.AS.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.AS.pop(),this.RS=this.AS.at(-1)}Cb(t){this.ES=t,this.OS[this.OS.length-1]=t}Gb(){return this.ES}_b(t){if(this.OS.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this.OS.push(t),this.ES=t}Ib(){if(this.OS.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.OS.pop(),this.ES=this.OS.at(-1)}Pb(){this.Rb(0),this.Ab(0)}Eb(t){const s=t.length/2;if(s<3)throw new Error("need at least 3 points");const e=s-2,i=e-1,r=t[0],n=t[1];for(let s=0;s<e;s+=2){const e=2*s,h=t[e+2],o=t[e+3],a=t[e+4],l=t[e+5];if(s===i)this.Ob(r,n,h,o,a,l,a,l);else{const s=t[e+6],i=t[e+7];this.Ob(r,n,h,o,a,l,s,i)}}}Fb(){this.Db(!0),this.FS++}Lb(){return this.FS}kb(){this.FS++}Nb(t){this.DS=!!t}Bb(){return this.DS}$b(t){this.LS=!!t}Wb(){return this.LS}Vb(){return!1}sv(){return!1}jb(){}Ub(){}zb(){}Hb(){return this.jb()+this.Ub()+this.zb()}qb(){return Fl.Hr(Fl.Nw.Jb,this)}}}{const Xl=self._s;Xl.Nw.Yb=class{constructor(t,s){this.Xr=s.name,this.Xb=t,this.Zb=s.Kb||0,this.Qb=s.tM||0,this.sM=!!s.eM,this.iM=!!s.rM,this.nM=!!s.hM,this.oM=!!s.aM,this.lM=!!s.animated,this.uM=!!s.cM,this.fM=!!s.dM,this.pM=!1,this.mM=this.sM||this.uM||0!==this.Zb||0!==this.Qb}qr(){this.Xb=null}gM(){return this.Xb}Rc(){return this.Xr}yM(){return 0!==this.Zb||0!==this.Qb}wM(){return this.Zb}SM(){return this.Qb}vM(){return this.sM}bM(){return this.iM}MM(){return this.nM}TM(){return this.oM}xM(){return this.lM}CM(){return this.uM}GM(){return this.fM}_M(){return this.pM}IM(){return this.mM}PM(){return!1}}}{const Zl=self._s;Zl.Nw.Iv=class{constructor(t,s,e,i,r,n,h){this.Xb=t,this.zp=0,this.RM=null,this.AM="",this.EM=e,this.OM=Zl.Hr(Zl.xo),this.OM.set(i),this.FM=r,this.DM=n,this.LM=h,"string"==typeof s?this.AM=s:(this.RM=s,this.AM=this.RM.Rc())}qr(){if(this.zp>0)throw new Error("releasing state group still in use");this.Xb=null,this.RM=null,this.AM=""}kM(){const t=this.Xb;t.cv(this.RM),t.NM(this.EM),t.BM(this.OM),t.Uv(this.FM),t.Rb(this.DM),t.Ab(this.LM),t.xv(this)}Ov(){return Zl.Nw.Iv._v(this.AM,this.EM,this.OM,this.FM,this.DM,this.LM)}Pv(){++this.zp}Av(){--this.zp}Ev(){return this.zp}$M(){this.RM=null}WM(t){if(this.RM=t.av(this.AM),!this.RM)throw new Error("failed to restore shader program")}static _v(t,s,e,i,r,n){return("string"==typeof t?t:t.Rc())+","+s+","+e.No()+","+e.Bo()+","+e.$o()+","+e.Wo()+","+i+","+r+","+n}}}{let Kl=function(t,s,e){const i=e.Bn(),r=e.$n(),n=e.Wn()-i,h=e.Vn()-r;return[i+n*t+(e.zn()-i)*s,r+h*t+(e.Hn()-r)*s]};interpolateQuad=Kl;const Ql=globalThis._s,tu=globalThis.assert,su=65535;Ql.Nw.VM=class{constructor(t,s,e){this.jM=t,this.UM=s,this.zM=e,this.Ra=NaN,this.Aa=NaN,this.FM=NaN,this.HM=NaN,this.qM=NaN,this.Ra=0,this.Aa=0,this.FM=0,this.HM=0,this.qM=0}JM(t,s,e,i){this.Ra=t,this.Aa=s,this.HM=e,this.qM=i}YM(){return this.Ra}XM(t){this.Ra!==t&&(this.Ra=t,this.jM.ZM())}KM(){return this.Aa}QM(t){this.Aa!==t&&(this.Aa=t,this.jM.ZM())}tT(){return this.FM}sT(t){this.FM!==t&&(this.FM=Math.max(t,0),this.jM.ZM())}eT(){return this.HM}iT(t){this.HM=t}rT(){return this.qM}nT(t){this.qM=t}hT(t,s,e){[this.Ra,this.Aa]=Kl(t.Ra,t.Aa,s),this.FM=t.FM,this.HM=Ql._t(e.Qa(),e.sl(),t.HM),this.qM=Ql._t(e.tl(),e.el(),t.qM)}oT(t,s,e){[this.Ra,this.Aa]=Kl(t.Ra,t.Aa,s),this.FM=t.FM,[this.HM,this.qM]=Kl(t.HM,t.qM,e)}aT(){return{x:this.YM(),y:this.KM(),z:this.tT(),u:this.eT(),v:this.rT()}}lT(t){this.XM(t.x),this.QM(t.y),t.hasOwnProperty("z")&&this.sT(t.z),this.iT(t.u),this.nT(t.v)}uT(){return this.jM}cT(){return this.UM}fT(){return this.zM}},Ql.Nw.dT=class{constructor(t,s,e){if(t<2||s<2)throw new Error("invalid mesh size");this.pT=t,this.mT=s,this.gT=e||null,this.yT=[],this.wT=0,this.ST=0,this.vT=1,this.bT=1,this.MT=0,this.TT=!1,this.xT=[],this.CT=0,this.GT=!0;const i=t-1,r=s-1;for(let e=0;e<s;++e){const s=[];for(let n=0;n<t;++n){const t=Ql.Hr(Ql.Nw.VM,this,n,e),h=n/i,o=e/r;t.JM(h,o,h,o),s.push(t)}this.yT.push(s)}}qr(){Ql.bh(this.yT),Ql.bh(this.xT)}_T(){return this.pT}IT(){return this.mT}PT(){return this.gT}RT(){return this.yT}ZM(){this.TT=!0,this.GT=!0}AT(){if(!this.TT)return;let t=1/0,s=1/0,e=-1/0,i=-1/0,r=0;for(const n of this.yT)for(const h of n){const n=h.YM(),o=h.KM();t=Math.min(t,n),s=Math.min(s,o),e=Math.max(e,n),i=Math.max(i,o),r=Math.max(r,h.tT())}this.wT=t,this.ST=s,this.vT=e,this.bT=i,this.MT=r,this.TT=!1}ET(){return this.AT(),this.wT}OT(){return this.AT(),this.ST}FT(){return this.AT(),this.vT}DT(){return this.AT(),this.bT}LT(){return this.AT(),this.MT}kT(){return this.LT()>0}NT(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.pT||s<0||s>=this.mT?null:this.yT[s][t]}BT(t,s,e){const i=e instanceof Ql.Rect;if(t._T()!==this._T()||t.IT()!==this.IT())throw new Error("source mesh wrong size");const r=t.yT,n=this.yT;for(let t=0,h=n.length;t<h;++t){const h=r[t],o=n[t];for(let t=0,r=o.length;t<r;++t){const r=h[t],n=o[t];i?n.hT(r,s,e):n.oT(r,s,e)}}this.GT=!0}$T(t){if(!this.GT&&this.CT===t)return;const s=this.pT,e=this.mT,i=this.xT,r=Math.floor(65535/s)-1;if(r<=0)throw new Error("mesh too large");const n=Math.ceil((e-1)/r);n<i.length&&(i.length=n);let h=0;for(let o=0;o<n;++o){const n=Math.min(r,e-h-1),a=(n+1)*s,l=3*a,u=2*a,c=(s-1)*n*6;if(o===i.length)i.push({WT:new Float32Array(l),VT:new Float32Array(u),jT:new Uint16Array(c)});else{const t=i[o];t.WT.length!==l&&(t.WT=new Float32Array(l)),t.VT.length!==u&&(t.VT=new Float32Array(u)),t.jT.length!==c&&(t.jT=new Uint16Array(c))}const{WT:f,VT:d,jT:p}=i[o];this.UT(h,n,t,f,d,p),h+=r}this.CT=t,this.GT=!1}UT(t,s,e,i,r,n){const h=this.yT,o=this.pT;let a=0,l=0,u=0;for(let c=t,f=t+s+1;c<f;++c){const s=h[c],d=c+1,p=c-t,m=p*o,g=(p+1)*o;for(let t=0,h=s.length;t<h;++t){const o=s[t],c=t+1;if(i[a++]=o.YM(),i[a++]=o.KM(),i[a++]=o.tT()+e,r[l++]=o.eT(),r[l++]=o.rT(),c<h&&d<f){const s=t+m,e=c+m,i=c+g,r=t+g;n[u++]=s,n[u++]=e,n[u++]=i,n[u++]=s,n[u++]=i,n[u++]=r}}}}zT(t,s){this.$T(s);for(const{WT:s,VT:e,jT:i}of this.xT)t.HT(s,e,i)}qT(t,s){s||(s=(t,s,e)=>[t,s,e]);const e=this.yT;let i=e[0];for(let r=1,n=e.length;r<n;++r){const h=e[r];let o=i[0],a=h[0];for(let e=1,l=h.length;e<l;++e){const u=i[e],c=h[e],[f,d,p]=s(o.YM(),o.KM(),o.tT()),[m,g,y]=s(u.YM(),u.KM(),u.tT()),[w,S,v]=s(c.YM(),c.KM(),c.tT()),[b,M,T]=s(a.YM(),a.KM(),a.tT());t.Yv(f,d,p,m,g,y),t.Yv(f,d,p,w,S,v),t.Yv(f,d,p,b,M,T),e===l-1&&t.Yv(m,g,y,w,S,v),r===n-1&&t.Yv(b,M,T,w,S,v),o=u,a=c}i=h}}JT(t){const s=.001,e=.99999999,i=t.pu(),r=[],n=this._T()-1,h=this.IT()-1,o=1/n,a=1/h,l=n-1,u=h-1;let c=i[0],f=i[1],d=Ql.Kr(Math.floor(c*n),0,l),p=Ql.Kr(Math.floor(f*h),0,u),m=!0,g=0,y=0,w=0,S=-1;const v=()=>{c=Ql.Kr(Ql._t(c,g,w),0,1),f=Ql.Kr(Ql._t(f,y,w),0,1),r.push(c,f)};for(let t=0,b=i.length;t<b;t+=2){c=i[t],f=i[t+1],r.push(c,f),d=Ql.Kr(Math.floor(c*n),0,l),p=Ql.Kr(Math.floor(f*h),0,u);const M=(t+2)%b;for(g=i[M],y=i[M+1],S=-1;;){if(r.length>1e6)throw new Error("Too many mesh poly points");const t=d*o,i=p*a,n=(d+1)*o,h=(p+1)*a;if(m=Ql.Xn(c,f,t,i,n,i,n,h),0!==S&&(w=Ql.Yn(c,f,g,y,t,i,n,h,-.001),w>=0&&w<=e))v(),m=!m,S=0;else if(p>0&&2!==S&&(w=Ql.Yn(c,f,g,y,t,i,n,i,s),w>=0&&w<=e))v(),p--,m=!1,S=4;else if(d<l&&3!==S&&(w=Ql.Yn(c,f,g,y,n,i,n,h,s),w>=0&&w<=e))v(),d++,m=!1,S=1;else if(d>0&&1!==S&&(w=Ql.Yn(c,f,g,y,t,i,t,h,s),w>=0&&w<=e))v(),d--,m=!0,S=3;else{if(!(p<u&&4!==S&&(w=Ql.Yn(c,f,g,y,t,h,n,h,s),w>=0&&w<=e)))break;v(),p++,m=!0,S=2}}}return Ql.Hr(Ql.lu,r)}YT(t,s){const e=this.XT(t);this.ZT(e),s.gu(e)}XT(t){const s=[],e=t.pu();for(let t=0,i=e.length;t<i;t+=2){const i=e[t],r=e[t+1],[n,h]=this.KT(i,r);s.push(n,h)}return s}KT(t,s){const e=this._T()-1,i=this.IT()-1,r=1/e,n=1/i,h=Ql.Kr(Math.floor(t*e),0,e-1),o=Ql.Kr(Math.floor(s*i),0,i-1),a=h*r,l=o*n,u=(h+1)*r,c=(o+1)*n,f=this.NT(h,o),d=this.NT(h+1,o+1),p=Ql.Xn(t,s,a,l,u,l,u,c),m=p?a+r:a,g=p?l:l+n,y=this.NT(h+(p?1:0),o+(p?0:1)),[w,S,v]=Ql.Zn(t,s,a,l,m,g,u,c);return Ql.Kn(w,S,v,f.YM(),f.KM(),f.tT(),y.YM(),y.KM(),y.tT(),d.YM(),d.KM(),d.tT())}ZT(t){const s=[],e=1e-7;let i=t[0],r=t[1],n=i-t.at(-2),h=r-t.at(-1);for(let o=0,a=t.length;o<a;o+=2){const l=(o+2)%a,u=t[l],c=t[l+1],f=u-i,d=c-r,p=Math.abs(f)<e&&Math.abs(n)<e&&Math.sign(d)===Math.sign(h),m=Math.abs(d)<e&&Math.abs(h)<e&&Math.sign(f)===Math.sign(n);(!p&&!m&&Math.abs(f/n-d/h)>.001||0==f&&0===d)&&s.push(i,r),i=u,r=c,n=f,h=d}s.length>=6&&s.length<t.length&&Ql.Ch(t,s)}aT(){return{cols:this._T(),rows:this.IT(),points:this.yT.map(t=>t.map(t=>t.aT()))}}lT(t){const s=this._T(),e=this.IT();if(t.cols!==s||t.rows!==e)throw new Error("mesh data wrong size");const i=t.points;for(let t=0;t<e;++t){const e=i[t];for(let i=0;i<s;++i)this.NT(i,t).lT(e[i])}}}}{let eu=function(t,s){let e,i,r,n;switch(t){case"rgba8":e=s.RGBA8,i=s.RGBA,r=s.RGBA,n=s.UNSIGNED_BYTE;break;case"rgb8":e=s.RGB8,i=s.RGB,r=s.RGB,n=s.UNSIGNED_BYTE;break;case"rgba4":e=s.RGBA4,i=s.RGBA,r=s.RGBA,n=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":e=s.RGB5_A1,i=s.RGBA,r=s.RGBA,n=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":e=s.RGB565,i=s.RGB,r=s.RGB,n=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{QT:e,tx:i,format:r,type:n}};GetFormatSpecifiers=eu;const iu=self._s,ru=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),nu=new Set(["nearest","bilinear","trilinear"]),hu=new Set(["default","low","high"]),ou=new Set(["clamp-to-edge","repeat","mirror-repeat"]),au={sx:"clamp-to-edge",ix:"clamp-to-edge",nx:"trilinear",hx:0,ox:"rgba8",lx:!0,ux:"default",mx:!0,gx:!1,width:-1,height:-1},lu={mx:!0,flipY:!1},uu=new Set;iu.Nw.yx=class{constructor(t){this.Xb=t,this.wx=null,this.Ry=0,this.Ay=0,this.Sx=!0,this.vx="clamp-to-edge",this.bx="clamp-to-edge",this.Mx="trilinear",this.Tx=0,this.xx="rgba8",this.Cx=!1,this.Gx="default",this.zp=0}_x(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer))throw new Error("invalid texture source");if(s=Object.assign({},au,s),this.wx)throw new Error("already created texture");if(this.vx=s.sx,this.bx=s.ix,this.Mx=s.nx,this.Tx=s.hx,this.xx=s.ox,this.Cx=!!s.lx&&this.Xb.Bb(),this.Gx=s.ux,!ou.has(this.vx)||!ou.has(this.bx))throw new Error("invalid wrap mode");if(!nu.has(this.Mx))throw new Error("invalid sampling");if(!ru.has(this.xx))throw new Error("invalid pixel format");if(!hu.has(this.Gx))throw new Error("invalid mipmap quality");if(this.Sx=!0,t instanceof ArrayBuffer||null===t||s.gx){if(this.Ry=s.width,this.Ay=s.height,t instanceof ArrayBuffer&&t.byteLength!==this.Ry*this.Ay*4)throw new Error("ArrayBuffer wrong size")}else this.Ry=t.width,this.Ay=t.height;if(this.Ry<=0||this.Ay<=0)throw new Error("invalid texture data size");if(s.gx){const s=iu.co(this.Ry,this.Ay);s.getContext("2d").drawImage(t,0,0,this.Ry,this.Ay),t=s}const e=iu.bn(this.Ry)&&iu.bn(this.Ay),i=this.Xb.Ix();if(this.Ry>i||this.Ay>i)throw new Error("texture data exceeds maximum texture size");const r=this.Xb.Px(),n=this.Xb.Rx();this.wx=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.wx),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.mx),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const h=eu(this.xx,r);if(this.Xb.Ax()||e||!this.Ex())if(n>=2){let s;s=this.Cx?Math.floor(Math.log2(Math.max(this.Ry,this.Ay))+1):1,r.texStorage2D(r.TEXTURE_2D,s,h.QT,this.Ry,this.Ay),t instanceof ArrayBuffer?r.texSubImage2D(r.TEXTURE_2D,0,0,0,this.Ry,this.Ay,h.format,h.type,new Uint8Array(t)):null!==t&&r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t)}else t instanceof ArrayBuffer?r.texImage2D(r.TEXTURE_2D,0,h.tx,this.Ry,this.Ay,0,h.format,h.type,new Uint8Array(t)):null===t?r.texImage2D(r.TEXTURE_2D,0,h.tx,this.Ry,this.Ay,0,h.format,h.type,null):r.texImage2D(r.TEXTURE_2D,0,h.tx,h.format,h.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this.Ry,this.Ay)),t instanceof ImageData){const s=iu.co(this.Ry,this.Ay);s.getContext("2d").putImageData(t,0,0),t=s}const s=iu.co(iu.Mn(this.Ry),iu.Mn(this.Ay)),e=s.getContext("2d");e.imageSmoothingEnabled="nearest"!==this.Mx,e.drawImage(t,0,0,this.Ry,this.Ay,0,0,s.width,s.height),r.texImage2D(r.TEXTURE_2D,0,h.tx,h.format,h.type,s)}null!==t&&this.Ox(r),r.bindTexture(r.TEXTURE_2D,null),this.Xb.Fx(),this.zp=1,uu.add(this)}Dx(t,s,e){if(e=Object.assign({},au,e),this.wx)throw new Error("already created texture");if(this.vx=e.sx,this.bx=e.ix,this.Mx=e.nx,this.xx=e.ox,this.Cx=!!e.lx&&this.Xb.Bb(),this.Gx=e.ux,!ou.has(this.vx)||!ou.has(this.bx))throw new Error("invalid wrap mode");if(!nu.has(this.Mx))throw new Error("invalid sampling");if(!ru.has(this.xx))throw new Error("invalid pixel format");if(!hu.has(this.Gx))throw new Error("invalid mipmap quality");this.Sx=!1,this.Ry=Math.floor(t),this.Ay=Math.floor(s);const i=iu.bn(this.Ry)&&iu.bn(this.Ay),r=this.Xb.Ix();if(this.Ry<=0||this.Ay<=0)throw new Error("invalid texture size");if(this.Ry>r||this.Ay>r)throw new Error("texture exceeds maximum texture size");if(!this.Xb.Ax()&&this.Ex()&&!i)throw new Error("non-power-of-two tiled textures not supported");const n=this.Xb.Px(),h=this.Xb.Rx();this.wx=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.wx),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.mx),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const o=eu(this.xx,n),a=h>=2?o.QT:o.tx;n.texImage2D(n.TEXTURE_2D,0,a,this.Ry,this.Ay,0,o.format,o.type,null),this.Ox(n),n.bindTexture(n.TEXTURE_2D,null),this.Xb.Fx(),this.zp=1,uu.add(this)}Lx(t){if("default"===this.Gx)return this.Sx?t.NICEST:t.FASTEST;if("low"===this.Gx)return t.FASTEST;if("high"===this.Gx)return t.NICEST;throw new Error("invalid mipmap quality")}Ex(){return"clamp-to-edge"!==this.vx||"clamp-to-edge"!==this.bx}kx(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}Ox(t){const s=iu.bn(this.Ry)&&iu.bn(this.Ay);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.kx(t,this.vx)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.kx(t,this.bx)),"nearest"===this.Mx)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.Cx=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.Xb.Ax())&&this.Cx){t.hint(t.GENERATE_MIPMAP_HINT,this.Lx(t)),t.generateMipmap(t.TEXTURE_2D);const s="trilinear"===this.Mx&&!this.Xb.Wb();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.Cx=!1;const e=this.Xb.Nx();e&&this.Tx>0&&"nearest"!==this.Mx&&t.texParameterf(t.TEXTURE_2D,e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.Tx,this.Xb.Bx()))}$x(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.wx||this.zp<=0)throw new Error("texture not created");if(this.Sx)throw new Error("cannot update static texture");s=Object.assign({},lu,s);const e=t.width||t.videoWidth,i=t.height||t.videoHeight,r=this.Xb.Rx(),n=this.Xb.Px();n.bindTexture(n.TEXTURE_2D,this.wx),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.mx),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!!s.flipY);const h=eu(this.xx,n),o=r>=2?h.QT:h.tx;try{if(this.Ry===e&&this.Ay===i){const s=iu.bn(this.Ry)&&iu.bn(this.Ay);n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t),(s||this.Xb.Ax())&&this.Cx&&(n.hint(n.GENERATE_MIPMAP_HINT,this.Lx(n)),n.generateMipmap(n.TEXTURE_2D))}else{this.Ry=e,this.Ay=i;const s=iu.bn(this.Ry)&&iu.bn(this.Ay);if(!this.Xb.Ax()&&this.Ex()&&!s)throw new Error("non-power-of-two tiled textures not supported");n.texImage2D(n.TEXTURE_2D,0,o,h.format,h.type,t),(s||this.Xb.Ax())&&this.Cx&&(n.hint(n.GENERATE_MIPMAP_HINT,this.Lx(n)),n.generateMipmap(n.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}n.bindTexture(n.TEXTURE_2D,null),this.Xb.Fx()}Wx(){if(this.zp>0)throw new Error("texture still has references");if(!this.wx)throw new Error("already deleted texture");uu.delete(this),this.Xb.Px().deleteTexture(this.wx),this.wx=null}Vx(){return!!this.wx}jx(){return this.wx}gM(){return this.Xb}Ux(){this.zp++}zx(){if(this.zp<=0)throw new Error("no more references");this.zp--}Hx(){return this.zp}jg(){return this.Ry}Qg(){return this.Ay}qx(){return this.Sx}Jx(){let t=this.Ry*this.Ay;switch(this.xx){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.Cx&&(t+=Math.floor(t/3)),t}static $M(){uu.clear()}static Yx(){return uu.values()}}}{const cu=self._s,fu=self.assert,du=self.ls,pu=du.ws,mu=du.ds,gu=new Set(["nearest","bilinear","trilinear"]),yu={nx:"trilinear",alpha:!0,depth:!1,Xx:!0,Zx:!0,Kx:0},wu=new Set;cu.Nw.Qx=class{constructor(t){this.Xb=t,this.tC=null,this.sC=null,this.wx=null,this.eC=null,this.Ry=0,this.Ay=0,this.iC=!0,this.Mx="trilinear",this.rC=!0,this.nC=!1,this.hC=!0,this.oC=0,this.aC=mu.create(),this.lC=0,this.uC=0,this.cC=0}fC(t,s,e){e=Object.assign({},yu,e);const i=this.Xb.Rx();if(this.wx||this.eC)throw new Error("already created render target");if(this.Mx=e.nx,this.rC=!!e.alpha,this.nC=!!e.depth,this.hC=!!e.Xx,this.iC=!!e.Zx,this.oC=e.Kx,!gu.has(this.Mx))throw new Error("invalid sampling");if(this.oC>0&&(i<2||this.hC))throw new Error("invalid use of multisampling");if(i<2&&(this.hC=!0),this.Ry=t,this.Ay=s,this.Ry<=0||this.Ay<=0)throw new Error("invalid render target size");this.dC();const r=this.Xb.Px();if(this.tC=r.createFramebuffer(),this.nC&&(this.sC=r.createFramebuffer()),this.hC){this.wx=this.Xb.pC(this.Ry,this.Ay,{nx:this.Mx,ox:this.rC?"rgba8":"rgb8",lx:!1});const t=this.wx.jx();r.bindFramebuffer(r.FRAMEBUFFER,this.tC),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),this.nC&&(r.bindFramebuffer(r.FRAMEBUFFER,this.sC),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0))}else{this.eC=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,this.eC);const t=this.rC?r.RGBA8:r.RGB8;if(this.oC>0){const s=r.getInternalformatParameter(r.RENDERBUFFER,t,r.SAMPLES);if(s&&s[0]){const t=s[0];this.oC>t&&(this.oC=t)}else this.oC=0}0===this.oC?r.renderbufferStorage(r.RENDERBUFFER,t,this.Ry,this.Ay):r.renderbufferStorageMultisample(r.RENDERBUFFER,this.oC,t,this.Ry,this.Ay),r.bindFramebuffer(r.FRAMEBUFFER,this.tC),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,this.eC),this.nC&&(r.bindFramebuffer(r.FRAMEBUFFER,this.sC),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,this.eC)),r.bindRenderbuffer(r.RENDERBUFFER,null)}const n=this.Xb.mC();this.nC&&n&&(r.bindFramebuffer(r.FRAMEBUFFER,this.tC),this.Xb.gC()?r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,n,0):r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n)),r.bindFramebuffer(r.FRAMEBUFFER,null),wu.add(this)}yC(t,s){if(this.Ry===t&&this.Ay===s)return;this.Ry=t,this.Ay=s,this.dC();const e=this.Xb.Px();e.bindFramebuffer(e.FRAMEBUFFER,this.tC),this.wx?this.wx.$x(new ImageData(this.Ry,this.Ay)):(e.bindRenderbuffer(e.RENDERBUFFER,this.eC),e.renderbufferStorage(e.RENDERBUFFER,this.rC?e.RGBA8:e.RGB8,this.Ry,this.Ay),e.bindRenderbuffer(e.RENDERBUFFER,null));const i=this.Xb.mC();this.nC&&i&&(this.Xb.gC()?e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0):e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i)),e.bindFramebuffer(e.FRAMEBUFFER,null)}Wx(){if(!this.wx&&!this.eC)throw new Error("already deleted render target");wu.delete(this);const t=this.Xb.Px();this.wx?(t.bindFramebuffer(t.FRAMEBUFFER,this.tC),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.nC&&(t.bindFramebuffer(t.FRAMEBUFFER,this.sC),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.Xb.wC(this.wx),this.wx=null):this.eC&&(t.bindFramebuffer(t.FRAMEBUFFER,this.tC),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.nC&&(t.bindFramebuffer(t.FRAMEBUFFER,this.sC),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.eC),this.eC=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.Xb.Rx()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.tC),this.nC&&t.deleteFramebuffer(this.sC);const s=this.Xb.SC();s.vC=null,s.bC=null,this.tC=null}dC(){this.Xb.tv(this.aC,this.Ry/this.Ay),this.lC=this.Xb.XS(),this.uC=this.Xb.HS(),this.cC=this.Xb.JS()}MC(){return this.tC}TC(){return this.sC}gM(){return this.Xb}xC(){return this.wx}CC(){return this.Xb.XS()===this.lC&&this.Xb.HS()===this.uC&&this.Xb.JS()===this.cC||this.dC(),this.aC}GC(){return"nearest"!==this.Mx}_C(){return this.rC}IC(){return this.hC}PC(){return this.nC}jg(){return this.Ry}Qg(){return this.Ay}RC(){return this.iC}AC(){return this.oC}EC(){const t={nx:this.Mx,alpha:this.rC,Xx:this.hC};return this.iC||(t.width=this.Ry,t.height=this.Ay),t}OC(t){return"nearest"!==(t=Object.assign({},yu,t)).nx===this.GC()&&!!t.alpha===this._C()&&!!t.depth===this.PC()&&!(this.Xb.Rx()>=2&&!!t.Xx!==this.IC())&&("number"==typeof t.width||"number"==typeof t.height?!this.RC()&&this.jg()===Math.floor(t.width)&&this.Qg()===Math.floor(t.height):this.RC())}FC(){return this.wx?this.wx.jx():null}Jx(){return this.wx?this.wx.Jx():this.Ry*this.Ay*(this.rC?4:3)}static async DC(t,s){const e=await t.LC(s,!0);return await cu.po(e)}static $M(){wu.clear()}static kC(){return wu.values()}static NC(t,s){for(const e of wu)e.RC()&&e.yC(t,s)}}}{const Su=self._s,vu=self.ls,bu=vu.ws,Mu=vu.ds,Tu=new Set(["aPos","aTex","aColor","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);Su.Nw.BC=class extends Su.Nw.Yb{static async $C(t,s){const e=t.Px(),i=s.src,r=s.WC,n=s.name,h=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(h,i),e.compileShader(h);const o=e.createShader(e.VERTEX_SHADER);e.shaderSource(o,r),e.compileShader(o);const a=e.createProgram();e.attachShader(a,h),e.attachShader(a,o),e.bindAttribLocation(a,0,"aPos"),e.bindAttribLocation(a,1,"aTex"),e.bindAttribLocation(a,2,"aColor"),e.bindAttribLocation(a,3,"aPoints"),e.linkProgram(a);const l=t.VC();if(l?await t.jC(()=>e.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await Su.ph(5),!e.getShaderParameter(h,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(h);throw e.deleteShader(h),e.deleteShader(o),e.deleteProgram(a),new Error("Error compiling fragment shader: "+t)}if(!e.getShaderParameter(o,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(o);throw e.deleteShader(h),e.deleteShader(o),e.deleteProgram(a),new Error("Error compiling vertex shader: "+t)}if(!e.getProgramParameter(a,e.LINK_STATUS)){const t=e.getProgramInfoLog(a);throw e.deleteShader(h),e.deleteShader(o),e.deleteProgram(a),new Error("Error linking shader program: "+t)}const u=Su.Tm(e.getProgramInfoLog(a)||"").trim();return u&&!Su.vm(u)&&console.info(`[WebGL] Shader program '${n}' compilation log: `,u),e.deleteShader(h),e.deleteShader(o),a}static async UC(t,s){const e=await Su.Nw.BC.$C(t,s);return new Su.Nw.BC(t,e,s)}constructor(t,s,e){super(t,e);const i=t.Px(),r=t.SC();t.Db(),i.useProgram(s),this.zC=i,this.RM=s,this.HC="<default-device-transform>"===e.name;const n=i.getAttribLocation(s,"aPos"),h=i.getAttribLocation(s,"aTex"),o=i.getAttribLocation(s,"aColor");this.qC=i.getAttribLocation(s,"aPoints"),-1!==n&&(i.bindBuffer(i.ARRAY_BUFFER,t.JC),i.vertexAttribPointer(n,3,i.FLOAT,!1,0,0),i.enableVertexAttribArray(n)),-1!==h&&(i.bindBuffer(i.ARRAY_BUFFER,t.YC),i.vertexAttribPointer(h,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(h)),-1!==o&&(i.bindBuffer(i.ARRAY_BUFFER,t.XC),i.vertexAttribPointer(o,4,t.ZC()?i.HALF_FLOAT:i.FLOAT,!1,0,0),i.enableVertexAttribArray(o)),-1!==this.qC&&(i.bindBuffer(i.ARRAY_BUFFER,t.KC),i.vertexAttribPointer(this.qC,4,i.FLOAT,!1,0,0),i.enableVertexAttribArray(this.qC)),i.bindBuffer(i.ARRAY_BUFFER,null),this.QC=new Su.Nw.tG(this,"matP","mat4"),this.sG=new Su.Nw.tG(this,"matMV","mat4"),this.eG=new Su.Nw.tG(this,"color","vec4"),this.iG=new Su.Nw.tG(this,"samplerFront","sampler"),this.rG=new Su.Nw.tG(this,"pointTexStart","vec2"),this.nG=new Su.Nw.tG(this,"pointTexEnd","vec2"),this.hG=new Su.Nw.tG(this,"zElevation","float"),this.oG=new Su.Nw.tG(this,"tileSize","vec2"),this.aG=new Su.Nw.tG(this,"tileSpacing","vec2"),this.lG=new Su.Nw.tG(this,"color2_","vec4"),this.uG=new Su.Nw.tG(this,"outlineThickness","float"),this.cG=new Su.Nw.tG(this,"samplerBack","sampler"),this.fG=new Su.Nw.tG(this,"samplerDepth","sampler"),this.dG=new Su.Nw.tG(this,"destStart","vec2"),this.pG=new Su.Nw.tG(this,"destEnd","vec2"),this.mG=new Su.Nw.tG(this,"srcStart","vec2"),this.gG=new Su.Nw.tG(this,"srcEnd","vec2"),this.yG=new Su.Nw.tG(this,"srcOriginStart","vec2"),this.wG=new Su.Nw.tG(this,"srcOriginEnd","vec2"),this.SG=new Su.Nw.tG(this,"pixelSize","vec2"),this.vG=new Su.Nw.tG(this,"seconds","float"),this.bG=new Su.Nw.tG(this,"devicePixelRatio","float"),this.MG=new Su.Nw.tG(this,"layerScale","float"),this.TG=new Su.Nw.tG(this,"layerAngle","float"),this.xG=new Su.Nw.tG(this,"layoutStart","vec2"),this.CG=new Su.Nw.tG(this,"layoutEnd","vec2"),this.GG=new Su.Nw.tG(this,"zNear","float"),this._G=new Su.Nw.tG(this,"zFar","float"),this.IG=!!(this.SG.PG()||this.vG.PG()||this.cG.PG()||this.dG.PG()||this.pG.PG()||this.mG.PG()||this.gG.PG()||this.yG.PG()||this.wG.PG()||this.bG.PG()||this.MG.PG()||this.TG.PG()||this.xG.PG()||this.CG.PG());const a=e.parameters||[];this.AG=[],this.pM=this.SG.PG()||this.mG.PG()||this.gG.PG()||this.yG.PG()||this.wG.PG(),this.EG=!1,this.OG=!1,this.eG.FG(1,1,1,1),this.lG.FG(1,1,1,1),this.iG.DG(0),this.cG.DG(1),this.fG.DG(2),this.rG.LG(0,0),this.nG.LG(1,1),this.hG.kG(0),this.oG.LG(0,0),this.aG.LG(0,0),this.dG.LG(0,0),this.pG.LG(1,1),this.mG.LG(0,0),this.gG.LG(0,0),this.yG.LG(0,0),this.wG.LG(0,0),this.SG.LG(0,0),this.bG.kG(1),this.GG.kG(t.HS()),this._G.kG(t.JS()),this.MG.kG(1),this.TG.kG(0),this.vG.kG(0),this.xG.LG(0,0),this.CG.LG(0,0),this.uG.kG(1);for(const t of a){const s=t[0],e=t[2],i=new Su.Nw.tG(this,s,e);"color"===e?i.NG(0,0,0):i.kG(0),this.AG.push(i)}this.HC?this.BG(r.$G):(this.WG(r.$G,!0),this.VG(r.jG,!0));const l=r.UG;i.useProgram(l?l.RM:null)}qr(){this.zC.deleteProgram(this.RM),this.RM=null,this.Xb.ov(this),this.zC=null,super.qr()}zG(){return this.zC}HG(){return this.RM}qG(){return this.AG.length}JG(t){return t<0||t>=this.AG.length?null:this.AG[t].YG()}XG(t){for(let s=0,e=t.length;s<e;++s)if(!this.AG[s].ZG(t[s]))return!1;return!0}KG(t){for(let s=0,e=t.length;s<e;++s)this.AG[s].QG(t[s])}t_(t,s,e,i,r,n,h,o,a,l){return!(this.cG.PG()||this.SG.PG()&&!this.SG.s_(r,n)||this.dG.PG()&&!this.dG.s_(t.Qa(),t.tl())||this.pG.PG()&&!this.pG.s_(t.sl(),t.el())||this.bG.PG()&&!this.bG.e_(h)||this.MG.PG()&&!this.MG.e_(o)||this.TG.PG()&&!this.TG.e_(a)||this.mG.PG()&&!this.mG.s_(s.Qa(),s.tl())||this.gG.PG()&&!this.gG.s_(s.sl(),s.el())||this.yG.PG()&&!this.yG.s_(e.Qa(),e.tl())||this.wG.PG()&&!this.wG.s_(e.sl(),e.el())||this.xG.PG()&&!this.xG.s_(i.Qa(),i.tl())||this.CG.PG()&&!this.CG.s_(i.tl(),i.el())||this.vG.PG()&&!this.vG.e_(l))}i_(t,s,e,i,r,n,h,o,a,l){this.cG.PG()||(this.SG.PG()&&this.SG.r_(r,n),this.dG.PG()&&this.dG.r_(t.Qa(),t.tl()),this.pG.PG()&&this.pG.r_(t.sl(),t.el()),this.bG.PG()&&this.bG.n_(h),this.MG.PG()&&this.MG.n_(o),this.TG.PG()&&this.TG.n_(a),this.mG.PG()&&this.mG.r_(s.Qa(),s.tl()),this.gG.PG()&&this.gG.r_(s.sl(),s.el()),this.yG.PG()&&this.yG.r_(e.Qa(),e.tl()),this.wG.PG()&&this.wG.r_(e.sl(),e.el()),this.xG.PG()&&this.xG.r_(i.Qa(),i.tl()),this.CG.PG()&&this.CG.r_(i.tl(),i.el()),this.vG.PG()&&this.vG.n_(l))}WG(t,s){this.EG&&!s||this.HC||(this.QC.PG()&&this.QC.h_(t),this.EG=!0)}o_(){this.EG=!1}VG(t,s){this.OG&&!s||this.HC||(this.sG.PG()&&this.sG.h_(t),this.OG=!0)}a_(){this.OG=!1}BG(t){if(!this.HC)throw new Error("not device transform shader");this.QC.h_(t);const s=this.Xb,e=s.jg()/2,i=s.Qg()/2,r=s.nv(e,i,s.WS(s.Qg()),e,i,0,s.Qg());this.sG.h_(r)}l_(t){this.eG.PG()&&this.eG.u_(t[0],t[1],t[2],t[3])}static c_(){return Tu}static f_(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static d_(t){const s=t?"highp":"mediump";return["attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"attribute lowp vec4 aColor;","varying lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static p_(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"in lowp vec4 aColor;","out lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static m_(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","}"].join("\n")}static g_(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static y_(t){return["#version 300 es",Su.Nw.BC.f_(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static w_(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","}"].join("\n")}static S_(){return["#extension GL_EXT_frag_depth : enable","varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static v_(t){return["#version 300 es",Su.Nw.BC.f_(t),"in highp vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static b_(t,s,e,i){let r="";return t>=2?r="#version 300 es\n"+Su.Nw.BC.f_(i):(s&&(r="#extension GL_EXT_frag_depth : enable\n"),e&&(r+="#extension GL_EXT_shader_texture_lod : enable\n",r+="#extension GL_OES_standard_derivatives : enable\n")),r+`\nprecision highp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\n${t>=2?"in":"varying"} lowp vec4 vColor;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&e?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!e?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||e?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||e?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= vColor;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static M_(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static T_(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static x_(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static C_(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static G_(t){return["#version 300 es",Su.Nw.BC.f_(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static __(){return["varying lowp vec4 vColor;","void main(void) {","\tgl_FragColor = vColor;","}"].join("\n")}static I_(){return["precision lowp float;","varying mediump vec2 vTex;","varying vec4 vColor;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(vColor.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(vColor.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static P_(){return["precision lowp float;","varying highp vec2 vTex;","varying vec4 vColor;","void main(void) {","\thighp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = vColor * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static R_(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = vColor * f;","}"].join("\n")}static A_(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = vColor * f;","}"].join("\n")}static E_(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp float innerF = step(distSq, 0.25);","\thighp vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}static O_(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 innerEdge = halfNorm - pixelSize * norm;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = vColor * f;","}"].join("\n")}static F_(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 pxNorm = pixelSize * norm;","\thighp vec2 innerEdge1 = halfNorm - pxNorm;","\thighp vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\thighp float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\thighp vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\thighp vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\thighp vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\thighp vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\thighp float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}}}{const xu=self._s,Cu=self.ls,Gu=Cu.ds,_u=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);xu.Nw.tG=class{constructor(t,s,e){if(!_u.has(e))throw new Error("invalid uniform type");this.gT=t,this.zC=this.gT.zG(),this.Xr=s,this.qc=e,this.D_="color"===this.qc,this.L_=this.zC.getUniformLocation(this.gT.HG(),s),this.k_=!!this.L_;const i=_u.get(e);this.N_=new Float32Array(i),this.B_=new Float32Array(i)}qr(){this.gT=null,this.zC=null,this.L_=null}PG(){return this.k_}YG(){return this.qc}W_(){return this.D_}kG(t){this.PG()&&(this.N_[0]=t,this.B_.set(this.N_),this.zC.uniform1f(this.L_,t))}DG(t){this.PG()&&(this.N_[0]=t,this.B_.set(this.N_),this.zC.uniform1i(this.L_,t))}LG(t,s){this.PG()&&(this.N_[0]=t,this.N_[1]=s,this.B_.set(this.N_),this.zC.uniform2f(this.L_,t,s))}NG(t,s,e){this.PG()&&(this.N_[0]=t,this.N_[1]=s,this.N_[2]=e,this.B_.set(this.N_),this.zC.uniform3f(this.L_,t,s,e))}FG(t,s,e,i){this.PG()&&(this.N_[0]=t,this.N_[1]=s,this.N_[2]=e,this.N_[3]=i,this.B_.set(this.N_),this.zC.uniform4f(this.L_,t,s,e,i))}V_(t){t=Math.fround(t);const s=this.N_;s[0]!==t&&(s[0]=t,this.zC.uniform1f(this.L_,t))}j_(t){const s=this.N_;s[0]!==t&&(s[0]=t,this.zC.uniform1i(this.L_,t))}U_(t,s){t=Math.fround(t),s=Math.fround(s);const e=this.N_;e[0]===t&&e[1]===s||(e[0]=t,e[1]=s,this.zC.uniform2f(this.L_,t,s))}z_(t,s,e){t=Math.fround(t),s=Math.fround(s),e=Math.fround(e);const i=this.N_;i[0]===t&&i[1]===s&&i[2]===e||(i[0]=t,i[1]=s,i[2]=e,this.zC.uniform3f(this.L_,t,s,e))}u_(t,s,e,i){t=Math.fround(t),s=Math.fround(s),e=Math.fround(e),i=Math.fround(i);const r=this.N_;r[0]===t&&r[1]===s&&r[2]===e&&r[3]===i||(r[0]=t,r[1]=s,r[2]=e,r[3]=i,this.zC.uniform4f(this.L_,t,s,e,i))}h_(t){const s=this.N_;Gu.F(s,t)||(xu.wh(s,t,0),this.zC.uniformMatrix4fv(this.L_,!1,t))}ZG(t){const s=this.B_;return this.W_()?s[0]===Math.fround(t.No())&&s[1]===Math.fround(t.Bo())&&s[2]===Math.fround(t.$o()):s[0]===Math.fround(t)}QG(t){const s=this.B_;this.W_()?(s[0]=t.No(),s[1]=t.Bo(),s[2]=t.$o()):s[0]=t}e_(t){return this.B_[0]===Math.fround(t)}s_(t,s){const e=this.B_;return e[0]===Math.fround(t)&&e[1]===Math.fround(s)}n_(t){this.B_[0]=t}r_(t,s){const e=this.B_;e[0]=t,e[1]=s}}}{const Iu=self._s,Pu=self.ls,Ru=Pu.Ss,Au=Pu.ds,Eu=0,Ou=1,Fu=2,Du=3,Lu=4,ku=5,Nu=6,Bu=7,$u=8,Wu=9,Vu=10,ju=11,Uu=12,zu=13,Hu=14,qu=15,Ju=16,Yu=17,Xu=18,Zu=19,Ku=20,Qu=21,tc=22,sc=23,ec=24,ic=25,rc=26,nc=27,hc=28,oc=29,ac=30;Iu.Nw.H_=class{constructor(t){this.q_=t,this.jG=Au.create(),this.$G=Au.create(),this.vC=null,this.bC=null,this.J_=!1,this.UG=null,this.Y_=new Iu.Rect,this.clearColor=Iu.Hr(Iu.xo,0,0,0,0)}},Iu.Nw.X_=class{constructor(t){const s=new ArrayBuffer(96);this.qc=0,this.Z_=t,this.zC=t.q_.Px(),this.K_=0,this.Q_=0,this.tI=null,this.sI=new Float32Array(s,0,16),this.eI=new Float32Array(s,64,4),this.iI=new Float32Array(s,80,4),this.rI=[]}nI(t,s){this.qc=1,this.K_=t,this.Q_=s}hI(){const t=this.zC;t.drawElements(t.TRIANGLES,this.Q_,t.UNSIGNED_SHORT,this.K_)}oI(t){this.qc=2,this.tI=t}aI(){const t=this.zC,s=this.tI;t.bindTexture(t.TEXTURE_2D,s?s.jx():null)}lI(t){this.qc=20,t.jo(this.eI,0)}uI(){const t=this.eI,s=this.Z_.UG;s.lG.PG()&&s.lG.u_(t[0],t[1],t[2],t[3])}cI(t,s){this.qc=3,this.K_=t,this.Q_=s}fI(){this.zC.blendFunc(this.K_,this.Q_)}dI(t,s,e,i){this.qc=4;const r=this.eI;r[0]=t,r[1]=s,r[2]=e,r[3]=i}pI(){const t=this.eI;this.zC.viewport(t[0],t[1],t[2],t[3])}mI(t){this.qc=5,Au.S(this.sI,t)}gI(){const t=this.Z_,s=t.q_.aS,e=t.UG,i=this.sI;for(let t=0,r=s.length;t<r;++t){const r=s[t];r===e?r.WG(i,!0):r.o_()}Au.S(t.$G,i)}yI(t){this.qc=6,Au.S(this.sI,t)}wI(){const t=this.Z_,s=t.q_.aS,e=t.UG,i=this.sI;for(let t=0,r=s.length;t<r;++t){const r=s[t];r===e?r.VG(i,!0):r.a_()}Au.S(t.jG,i)}SI(t){this.qc=7,this.tI=t}vI(){const t=this.zC,s=this.tI,e=this.Z_;s?(e.vC=s.MC(),e.bC=s.TC(),e.J_&&e.bC?t.bindFramebuffer(t.FRAMEBUFFER,e.bC):t.bindFramebuffer(t.FRAMEBUFFER,e.vC)):(e.vC=null,e.bC=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}bI(t){this.qc=8,t.jo(this.sI,0)}MI(t,s,e,i){this.qc=8;const r=this.sI;r[0]=t,r[1]=s,r[2]=e,r[3]=i}TI(){const t=this.zC,s=this.sI,e=this.Z_.clearColor,i=s[0],r=s[1],n=s[2],h=s[3];e.Jo(i,r,n,h)||(t.clearColor(i,r,n,h),e.Po(i,r,n,h)),t.clear(t.COLOR_BUFFER_BIT)}xI(t){this.qc=14,t.jo(this.sI,0)}CI(){const t=this.sI;this.Z_.Y_.set(t[0],t[1],t[2],t[3])}GI(t,s,e){this.qc=9,this.K_=t,this.Q_=1,this.sI[0]=s,e.jo(this.eI,0)}_I(){const t=this.zC,s=this.Z_,e=s.q_.cS;t.useProgram(e.RM),e.WG(s.$G,!1),e.VG(s.jG,!1);const i=s.Y_;e.rG.PG()&&e.rG.U_(i.Qa(),i.tl()),e.nG.PG()&&e.nG.U_(i.sl(),i.el());const r=this.sI[0];if(e.hG.PG()&&e.hG.V_(r),e.eG.PG()){const t=this.eI;e.eG.u_(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.K_/4,this.Q_),t.useProgram(s.UG.RM)}II(t){this.qc=10,this.tI=t}RI(){const t=this.zC,s=this.Z_,e=this.tI;s.UG=e,t.useProgram(e.RM),e.WG(s.$G,!1),e.VG(s.jG,!1)}AI(){this.qc=11}EI(){const t=this.Z_.UG,s=this.zC,e=this.sI,i=this.eI,r=this.iI;if(t.cG.PG()){const t=this.Z_.q_,e=this.tI;t.OI!==e&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,e?e.jx():null),t.OI=e,s.activeTexture(s.TEXTURE0))}t.SG.PG()&&t.SG.U_(e[0],e[1]),t.dG.PG()&&t.dG.U_(e[2],e[3]),t.pG.PG()&&t.pG.U_(e[4],e[5]),t.bG.PG()&&t.bG.V_(this.Q_),t.MG.PG()&&t.MG.V_(e[6]),t.TG.PG()&&t.TG.V_(e[7]),t.mG.PG()&&t.mG.U_(e[12],e[13]),t.gG.PG()&&t.gG.U_(e[14],e[15]),t.yG.PG()&&t.yG.U_(r[0],r[1]),t.wG.PG()&&t.wG.U_(r[2],r[3]),t.xG.PG()&&t.xG.U_(i[0],i[1]),t.CG.PG()&&t.CG.U_(i[2],i[3]),t.vG.PG()&&t.vG.V_(this.K_)}FI(){this.qc=12}DI(){const t=this.Z_.UG.AG,s=this.rI;for(let e=0,i=t.length;e<i;++e){const i=t[e],r=s[e];i.W_()?i.z_(r.No(),r.Bo(),r.$o()):i.V_(r)}}LI(t){this.qc=13,this.tI=t}kI(){const t=this.zC,s=this.tI,e=this.Z_.vC;s!==e&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==e&&t.bindFramebuffer(t.FRAMEBUFFER,e)}NI(t,s,e){this.qc=16;const i=this.sI,r=this.Z_.q_;i[0]=t.jg(),i[1]=t.Qg(),i[2]=s?s.jg():r.jg(),i[3]=s?s.Qg():r.Qg(),i[4]=t.GC()?1:0,i[5]="stretch"===e;const n=this.rI;Iu.bh(n),n.push(t.MC()),n.push(s?s.MC():null)}BI(){const t=this.sI,s=this.rI,e=this.zC,i=t[0],r=t[1],n=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(e.bindFramebuffer(e.READ_FRAMEBUFFER,l),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,u),a)e.blitFramebuffer(0,0,i,r,0,0,n,h,e.COLOR_BUFFER_BIT,o?e.LINEAR:e.NEAREST);else{const t=Math.min(i,n),s=Math.min(r,h),o=Math.max(r-h,0),a=Math.max(h-r,0);e.blitFramebuffer(0,o,t,s+o,0,a,t,s+a,e.COLOR_BUFFER_BIT,e.NEAREST)}}$I(t){this.qc=17,this.tI=t}WI(){this.tI.VI(),this.tI=null}jI(t){this.qc=18,this.tI=t}UI(){this.tI.zI(),this.tI=null}HI(t,s,e){this.qc=19;const i=this.sI;i[0]=t,i[1]=s,i[2]=e}qI(){const t=this.Z_.UG,s=this.sI;t.SG.PG()&&t.SG.U_(s[0],s[1]),t.uG.PG()&&t.uG.V_(s[2])}JI(t,s,e,i,r,n,h){this.qc=15;const o=this.sI;t.jo(o,0),o[4]=1/s,o[5]=1/e,o[6]=i/s,o[7]=r/e,o[8]=n/s,o[9]=h/e}YI(){const t=this.Z_.UG,s=this.sI;t.mG.PG()&&t.mG.U_(s[0],s[1]),t.SG.PG()&&t.SG.U_(s[4],s[5]),t.oG.PG()&&t.oG.U_(s[6],s[7]),t.aG.PG()&&t.aG.U_(s[8],s[9])}XI(t,s,e,i,r,n,h){this.qc=28;const o=this.sI;o[0]=1/t,o[1]=1/s,o[2]=e,o[3]=i,o[4]=r,o[5]=n,o[6]=h}ZI(){const t=this.Z_.UG,s=this.sI;t.SG.PG()&&t.SG.U_(s[0],s[1]),t.oG.PG()&&t.oG.U_(s[2],s[3]),t.uG.PG()&&t.uG.V_(s[4]),t.aG.PG()&&t.aG.U_(s[5],s[6])}KI(t){this.qc=21,this.K_=t?1:0}QI(){const t=this.zC,s=0!==this.K_;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}tP(t){this.qc=22,this.K_=t?1:0}sP(){const t=this.zC;0===this.K_?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}eP(t){this.qc=23,this.K_=t?1:0}iP(){const t=this.zC,s=this.Z_,e=s.q_,i=0!==this.K_;s.J_=i,t.activeTexture(t.TEXTURE2),i?(s.bC&&t.bindFramebuffer(t.FRAMEBUFFER,s.bC),t.bindTexture(t.TEXTURE_2D,e.mC())):(t.bindTexture(t.TEXTURE_2D,null),s.bC&&t.bindFramebuffer(t.FRAMEBUFFER,s.vC)),t.activeTexture(t.TEXTURE0)}rP(){this.qc=24}nP(){const t=this.zC;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}hP(){this.qc=25}oP(){const t=this.zC;t.enable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}aP(){this.qc=26}lP(){const t=this.zC;t.disable(t.STENCIL_TEST)}uP(t,s,e,i,r){this.qc=27,this.K_=t?1:0;const n=this.sI;n[0]=s,n[1]=e,n[2]=i,n[3]=r}cP(){const t=this.zC,s=this.sI;1===this.K_?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}fP(t){this.qc=29,this.K_=t}dP(){const t=this.zC,s=this.K_;0===s?t.disable(t.CULL_FACE):(t.enable(t.CULL_FACE),1===s?t.cullFace(t.BACK):t.cullFace(t.FRONT))}pP(t){this.qc=30,this.K_=t}mP(){const t=this.zC;t.frontFace(0===this.K_?t.CW:t.CCW)}gP(){switch(this.qc){case 1:return void this.hI();case 2:return void this.aI();case 3:return void this.fI();case 4:return void this.pI();case 5:return void this.gI();case 6:return void this.wI();case 7:return void this.vI();case 8:return void this.TI();case 9:return void this._I();case 10:return void this.RI();case 11:return void this.EI();case 12:return void this.DI();case 13:return void this.kI();case 14:return void this.CI();case 15:return void this.YI();case 16:return void this.BI();case 17:return void this.WI();case 18:return void this.UI();case 19:return void this.qI();case 20:return void this.uI();case 21:return void this.QI();case 22:return void this.sP();case 23:return void this.iP();case 24:return void this.nP();case 25:return void this.oP();case 26:return void this.lP();case 27:return void this.cP();case 28:return void this.ZI();case 29:return void this.dP();case 30:return void this.mP()}}}}{let lc=function(t,s,e,i,r,n){s?t.strokeRect(e,i,r,n):t.fillRect(e,i,r,n)},uc=function(t){return t*(4/3)},cc=function(t,s){t=t.trim();const e=parseFloat(t);return isFinite(e)?t.endsWith("%")?s*e/100:e:0};fillOrStrokeRect=lc,ptToPx=uc,getOffsetParam=cc;const fc=self._s,dc=4096,pc=4,mc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),gc={timeout:60},yc=new fc.xo(0,0,0,1),wc=new Set(["left","center","right"]),Sc=new Set(["top","center","bottom"]),vc=new Set(["word","cjk","character"]),bc=new Set(["ltr","rtl"]),Mc=new Set;fc.yP&&fc.yP.addEventListener("fontload",t=>{const s=t.font.Rc();for(const t of Mc)(t.wP()||fc.Ki(t.SP(),s))&&t.vP()});let Tc=!1,xc=!1;fc.Nw.Jb=class{constructor(t,s){s=Object.assign({},gc,s),this.Xb=t,this.bP="Arial",this.MP=16,this.TP=1,this.xP=0,this.CP=!1,this.GP=!1,this._P="black",this.IP=!1,this.Ng=null,this.PP=!0,this.RP=null,this.AP=new Set,this.EP="left",this.OP="top",this.$c="",this.FP=null,this.DP=fc.Hr(fc.Lg),this.LP="word",this.kP="ltr",this.NP=!1,this.BP=!1,this.$P=!1,this.WP=-1,this.VP=0,this.jP=0,this.UP=0,this.Ry=0,this.Ay=0,this.zP=1,this.HP=null,this.qP=null,this.JP=null,this.YP=null,this.XP=-1,this.ZP=-1,this.KP="",this.QP="",this.tR="",this.sR=1,this.eR=1,this.iR=t=>this.rR(t),this.wx=null,this.nR=new fc.Rect,this.hR=1,this.oR=new fc.Df(()=>{this.aR(),this.lR(8,8)},s.timeout),this.uR=null,this.cR=!1,Mc.add(this)}qr(){this.RP=null,this.AP.clear(),this.Ng=null,this.FP=null,this.HP=null,this.qP=null,this.JP=null,this.YP=null,this.iR=null,this.oR.qr(),this.uR=null,this.aR(),this.DP.Ru(),this.DP=null,this.Xb=null,this.cR=!0,Mc.delete(this)}fR(){this.$P=!0}dR(){this.fR(),this.BP=!0}vP(){this.dR(),this.NP=!0}pR(t){if(t=!!t,this.IP===t)return;this.IP=t;const s=this.IP?"alphabetic":"top";this.qP&&(this.qP.textBaseline=s),this.JP&&(this.JP.textBaseline=s),this.vP()}wP(){return this.IP}Wg(t){this.Ng!==t&&(this.Ng=t,this.DP.Wg(t),this.Ng&&this.Ng.Cw()&&this.Ng.Gw().then(()=>this.fR()),this.vP())}mR(t){t=!!t,this.PP!==t&&(this.PP=t,this.fR())}gR(t){t||(t="serif"),this.bP!==t&&(this.bP=t,this.vP())}SP(){return this.bP}yR(t){t<.1&&(t=.1),this.MP!==t&&(this.MP=t,this.vP())}wR(){return this.MP}SR(t){this.TP!==t&&(this.TP=t,this.vP())}vR(t){this.xP!==t&&(this.xP=t,this.dR())}bR(){return this.xP}MR(t){t=!!t,this.CP!==t&&(this.CP=t,this.vP())}TR(){return this.CP}xR(t){t=!!t,this.GP!==t&&(this.GP=t,this.vP())}CR(){return this.GP}GR(t){t=Math.floor(t),this.WP!==t&&(this.WP=t,this.fR())}_R(){return this.WP}IR(t,s){let e=[];(this.CP||s.Hy("b"))&&e.push("bold"),(this.GP||s.Hy("i"))&&e.push("italic");const i=s.zy("size"),r=(i?parseFloat(i.Pg):this.MP)*this.TP;t?e.push(r+"pt"):e.push(r*this.PR()+"pt");let n=this.bP;const h=s.zy("font");return h&&h.Pg&&(n=h.Pg,this.RP&&!this.AP.has(n)&&(this.RP(n),this.AP.add(n))),n&&(mc.has(n)?e.push(n):e.push('"'+n+'"')),e.join(" ")}BM(t){t instanceof fc.xo&&(t=t.sa()),this._P!==t&&(this._P=t,this.fR())}RR(t,s,e){yc.Ro(t,s,e),this.BM(yc)}AR(t){if(!wc.has(t))throw new Error("invalid horizontal alignment");this.EP!==t&&(this.EP=t,this.dR())}ER(){return this.EP}OR(t){if(!Sc.has(t))throw new Error("invalid vertical alignment");this.OP!==t&&(this.OP=t,this.dR())}FR(){return this.OP}DR(t){if(!vc.has(t))throw new Error("invalid word wrap mode");this.LP!==t&&(this.LP=t,this.vP())}LR(){return this.LP}kR(t){if(!bc.has(t))throw new Error("invalid text direction");this.kP!==t&&(this.kP=t,this.qP&&(this.qP.direction=this.kP),this.JP&&(this.JP.direction=this.kP),this.vP())}NR(){return this.kP}jc(t){this.$c!==t&&(this.$c=t,this.vP())}BR(){return this.$c}PR(){return this.hR*this.zP*self.devicePixelRatio}$R(t,s,e){if(void 0===e&&(e=1),t<=0||t<=0)return;if(this.jP===t&&this.UP===s&&this.zP===e)return;const i=this.jP;this.jP=t,this.UP=s,this.zP=e;const r=self.devicePixelRatio;this.Ry=this.jP*this.zP*r,this.Ay=this.UP*this.zP*r;const n=Math.max(this.Ry,this.Ay),h=Math.min(this.Xb.Ix(),4096);let o=1;n>h&&(o=h/n,this.Ry=Math.min(this.Ry*o,h),this.Ay=Math.min(this.Ay*o,h)),this.hR=o,this.jP!==i?this.vP():this.dR()}jg(){return this.Ry}Qg(){return this.Ay}WR(){return this.zP}VR(){return this.jR(),this.DP.Iy()}UR(){return this.jR(),this.DP.Py()+this.DP.$g()*(this.xP+4)-this.xP}zR(){this.jR();let t=0;for(const s of this.DP.Bg())for(const e of s.hy())t+=e.oy();return t}xC(){return this.oR.$f(),this.HR(),this.wx}qR(t,s){this.jR();const e=this.PR(),i=this.DP.Bg();for(const r of i){const i=r.sy()*e;if(s>=r.Vy()-r.Qg()*e+i&&s<r.Vy()+i)for(const s of r.hy())if(t>=s.$y()&&t<s.$y()+s.jg()*e)return s}return null}*JR(t){this.jR();const s=this.DP.Bg();for(const e of s)for(const s of e.hy()){const e=s.zy("tag");e&&fc.Ki(e.Pg,t)&&(yield s)}}YR(t,s){for(const e of this.JR(t)){if(0===s)return e;--s}return null}XR(t){let s=0;for(const e of this.JR(t))++s;return s}HR(){(!this.wx||this.$P||this.BP||this.NP)&&(this.cR||this.Ry<=0||this.Ay<=0||(this.$P=!1,this.ZR()))}ZR(){this.cR||(this.jR(),this.lR(Math.max(fc.Mn(Math.ceil(this.Ry)),128),Math.max(fc.Mn(Math.ceil(this.Ay)),64)),this.KR(),this.QR(),this.oR.$f())}lR(t,s){this.HP||(this.HP=fc.co(16,16));let e=!1;this.XP===t&&this.ZP===s||(this.XP=t,this.ZP=s,this.HP.width=t,this.HP.height=s,e=!0),this.qP||(this.qP=this.HP.getContext("2d"),e=!0),e?(this.qP.textBaseline=this.IP?"alphabetic":"top",this.qP.direction=this.kP,this.qP.font=this.KP,this.qP.fillStyle=this.tR,this.qP.strokeStyle=this.tR,this.qP.globalAlpha=this.sR,this.qP.lineWidth=this.eR):this.qP.clearRect(0,0,t,s)}tA(){this.JP||(this.JP=fc.co(16,16).getContext("2d"),this.YP=fc.co(16,16).getContext("2d"),this.JP.textBaseline=this.IP?"alphabetic":"top",this.YP.textBaseline="top",this.JP.direction=this.kP,this.YP.direction=this.kP)}sA(t){this.QP!==t&&(this.QP=t,this.JP.font=t,this.YP.font=t)}eA(){if(!Tc){Tc=!0,this.tA();const t=this.JP.measureText("test");xc="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return xc}jR(){this.iA(),this.rA()}iA(){this.NP&&(this.tA(),!this.IP||this.FP&&this.FP.toString()===this.$c||(this.FP=new fc.pr(this.$c,{pg:!0})),this.DP.Lg(this.IP?this.FP._g():this.$c,this.iR,this.jP,this.LP,0),this.NP=!1)}rA(){this.BP&&(this.nA(),this.BP=!1)}rR(t){const s=t.Yg()?t.wy().join(""):" ";this.sA(this.IR(!0,t));const e=t.zy("size"),i=(e?parseFloat(e.Pg):this.MP)*this.TP,r=this.JP.measureText(s);let n=0;if(this.IP&&this.eA()){const t=this.YP.measureText(s);n=r.fontBoundingBoxAscent-t.fontBoundingBoxAscent}return{width:r.width,height:uc(i),fontBoundingBoxAscent:r.fontBoundingBoxAscent||0,fontBoundingBoxDescent:r.fontBoundingBoxDescent||0,Jg:n}}hA(t){this.KP!==t&&(this.KP=t,this.qP.font=t)}oA(t){this.tR!==t&&(this.tR=t,this.qP.fillStyle=t,this.qP.strokeStyle=t)}aA(t){this.sR!==t&&(this.sR=t,this.qP.globalAlpha=t)}lA(t){this.eR!==t&&(this.eR=t,this.qP.lineWidth=t)}nA(){const t=this.PR(),s=(4+this.xP)*t;let e=0;const i=this.DP.Bg();if(0===i.length)return;for(const t of i){t.By(NaN),t.Wy(NaN);for(const s of t.hy())s.By(NaN),s.Wy(NaN)}const r=this.IP&&this.eA();let n=i[0].Qg()*t;if("center"===this.OP){const h=i.reduce((e,i)=>e+i.Qg()*t+s,0)-s;e=Math.max(this.Ay/2-h/2,0),r&&(n=i[0].ey()*t)}else if("bottom"===this.OP){const n=i.reduce((e,i)=>e+i.Qg()*t+s,0)-this.xP*t,h=r?i.at(-1).sy()*t:0;e=this.Ay-n-h-2}for(let r=0,h=i.length;r<h;++r){const h=i[r],o=h.Qg()*t,a=e;if(this.IP){if(e+=0===r?n:o,r>0&&e>this.Ay-4*t)break}else if(r>0&&e>=this.Ay-o)break;a>=0&&this.uA(h,e,t),this.IP||(e+=o),e+=s}}uA(t,s,e){let i=0;"center"===this.EP?i=Math.floor((this.Ry-t.jg()*e)/2):"right"===this.EP&&(i=this.Ry-t.jg()*e),t.By(i),t.Wy(s);for(const r of"ltr"===this.kP?t.hy():t.ky())this.cA(r,i,s,e),i+=r.jg()*e}cA(t,s,e,i){const r=t.zy("offsetx");s+=r?cc(r.Pg,t.Qg())*i:0;const n=t.zy("offsety");if(e+=n?cc(n.Pg,t.Qg())*i:0,t.Zg()){const s=t.zy("iconoffsety");e+=s?cc(s.Pg,t.Qg())*i:.2*t.Qg()*i}t.By(s),t.Wy(e)}KR(){this.qP.imageSmoothingEnabled=this.PP,this.qP.imageSmoothingQuality="high",this.VP=0;const t=this.PR(),s=this.DP.Bg();for(const e of s)this.fA(e,t)}fA(t,s){const e=t.$y(),i=t.Vy();if(Number.isFinite(e)&&Number.isFinite(i))for(const e of"ltr"===this.kP?t.hy():t.ky())this.dA(e,s,t.Qg())}dA(t,s,e){const i=this.qP,r=t.$y(),n=t.Vy();if(!Number.isFinite(r)||!Number.isFinite(n))return;const h=e/16;let o=t.jg()*s;const a=t.Qg()*s,l=t.Qg()/16,u=(4+this.xP)*s;let c=t.Yg()?t.wy():null;if(-1!==this.WP){if(this.VP>=this.WP)return;t.Yg()&&this.VP+c.length>this.WP&&(c=c.slice(0,this.WP-this.VP),o=this.rR(t).width*s),this.VP+=t.oy()}const f=t.zy("background"),d=t.Hy("u"),p=t.Hy("s");if(t.Yg()&&fc.bm(c)&&!f&&!d&&!p||t.Hy("hide"))return;const m=t.zy("color"),g=t.zy("opacity");this.aA(g?parseFloat(g.Pg)/100:1),f&&(this.oA(f.Pg),i.fillRect(r,n-a,o,a+u));const y=t.zy("linethickness"),w=y?parseFloat(y.Pg):1,S=t.Hy("stroke");if(S&&this.lA(.5*l*w*this.PR()),t.Yg()){const s=c.join("");if(this.hA(this.IR(!1,t)),!S){this.lA(.5*l*w*this.PR());const e=t.zy("outlineback");e&&(this.oA(e.Pg),this.pA(!0,s,r,n,o))}if(this.oA(m?m.Pg:this._P),this.pA(S,s,r,n,o),!S){this.lA(.5*l*w*this.PR());const e=t.zy("outline");e&&(this.oA(e.Pg),this.pA(!0,s,r,n,o))}}else if(t.Zg()&&t.jg()>0){const s=t.tw(this.Ng);s&&i.drawImage(s,r,n-a,o,a)}if(this.oA(m?m.Pg:this._P),d&&lc(i,S,r,n+s*h,o,s*h*w),p){const t=s*l,e=n-a/4+t/2;i.fillRect(r,e-t*w/2,o,t*w)}}pA(t,s,e,i,r){"rtl"===this.kP&&(e+=r),t?"Gecko"===fc.Ks.re?this.qP.strokeText(s,e,i,r):this.qP.strokeText(s,e,i):"Gecko"===fc.Ks.re?this.qP.fillText(s,e,i,r):this.qP.fillText(s,e,i)}QR(){this.Xb.mA()||(this.wx||(this.wx=this.Xb.pC(this.HP.width,this.HP.height,{lx:!0,ux:"high"})),this.Xb.gA(this.HP,this.wx),this.nR.set(0,0,this.Ry/this.wx.jg(),this.Ay/this.wx.Qg()),this.uR&&this.uR())}yA(){return this.nR}aR(){this.wx&&(this.Xb.mA()||this.Xb.wC(this.wx),this.wx=null)}static $M(){for(const t of Mc)t.aR()}static wA(){return Mc.values()}}}{const Cc=self._s;class Gc{constructor(t){this.zC=t.Px(),this.SA=t.Rx(),this.vA=t.bA(),this.MA=null,this.Bf=!1,this.TA=!1,this.xA=0,1===this.SA?this.MA=this.vA.createQueryEXT():this.MA=this.zC.createQuery()}qr(){this.CA(),this.zC=null,this.vA=null,this.TA=!1}CA(){this.MA&&(1===this.SA?this.vA.deleteQueryEXT(this.MA):this.zC.deleteQuery(this.MA),this.MA=null)}VI(){if(this.Bf)throw new Error("query already active");1===this.SA?this.vA.beginQueryEXT(this.vA.TIME_ELAPSED_EXT,this.MA):this.zC.beginQuery(this.vA.TIME_ELAPSED_EXT,this.MA),this.Bf=!0}zI(){if(!this.Bf)throw new Error("query not active");1===this.SA?this.vA.endQueryEXT(this.vA.TIME_ELAPSED_EXT):this.zC.endQuery(this.vA.TIME_ELAPSED_EXT),this.Bf=!1}GA(){if(!this.MA||this.TA||this.Bf)return;let t=!1;t=1===this.SA?this.vA.getQueryObjectEXT(this.MA,this.vA.QUERY_RESULT_AVAILABLE_EXT):this.zC.getQueryParameter(this.MA,this.zC.QUERY_RESULT_AVAILABLE);const s=this.zC.getParameter(this.vA.GPU_DISJOINT_EXT);t&&!s&&(1===this.SA?this.xA=this.vA.getQueryObjectEXT(this.MA,this.vA.QUERY_RESULT_EXT):this.xA=this.zC.getQueryParameter(this.MA,this.zC.QUERY_RESULT),this.xA/=1e9,this.TA=!0),(t||s)&&this.CA()}_A(){return this.TA}IA(){if(!this.TA)throw new Error("no result available");return this.xA}}Cc.Nw.PA=class{constructor(t){this.Xb=t,this.FS=t.Lb(),this.Bf=!1,this.RA=null,this.AA=!1,this.EA=null,this.OA=[]}qr(){for(const t of this.OA)t instanceof Gc&&t.qr();Cc.bh(this.OA),this.RA=null,this.EA=null,this.Xb=null}VI(){if(this.Bf)throw new Error("query already active");const t=this.Xb.FA();t.length>0?(this.AA=!0,this.RA=t.at(-1),this.RA.DA(),this.RA.OA.push(this)):(this.AA=!1,this.RA=null),this.Bf=!0,t.push(this),this.LA()}zI(){if(!this.Bf)throw new Error("query not active");if(this.Xb.FA().pop()!==this)throw new Error("can only end most nested query");this.Bf=!1,this.DA(),this.RA&&(this.RA.LA(),this.RA=null)}LA(){this.EA=Cc.Hr(Gc,this.Xb),this.OA.push(this.EA),this.EA.VI()}DA(){this.EA.zI(),this.EA=null}GA(){for(const t of this.OA)t.GA()}kA(){return this.AA}_A(){return this.OA.every(t=>t._A())}IA(){return this.OA.reduce((t,s)=>t+s.IA(),0)}Lb(){return this.FS}}}{const _c=self._s;_c.Nw.NA=class{constructor(t,s=1e3){this.Xb=t,this.BA=s,this.$A=[],this.Xb.WA(this)}qr(){this.Ru(),this.Xb.VA(this),this.Xb=null}Ru(){for(const t of this.$A)t.qr();_c.bh(this.$A)}jA(){const t=new _c.Nw.PA(this.Xb);return this.$A.push(t),this.$A.length>this.BA&&this.$A.shift().qr(),t}UA(t){for(const s of this.$A){if(s.Lb()>=t)return;if(s.kA())return;s.GA()}}zA(t,s){if(s<=t)return NaN;let e=0;for(const i of this.$A){if(i.Lb()>=s)break;if(!(i.Lb()<t)){if(!i._A())return NaN;e+=i.IA()}}return e}HA(t){for(let s=0,e=this.$A.length;s<e;++s){const e=this.$A[s];if(!(e.Lb()<t))return void(s>0&&this.$A.splice(0,s));e.qr()}}}}{let Ic=function(){Jc=-1;for(const t of qc)t.qA()&&(t.resolve(),qc.delete(t));qc.size>0&&(Jc=self.requestAnimationFrame(Ic))};CheckPendingPolls=Ic;const Pc=self._s,Rc=self.assert,Ac=self.ls,Ec=Ac.ws,Oc=Ac.Ss,Fc=Ac.ds,Dc={powerPreference:"default",JA:!0,alpha:!1,depth:!1,YA:!1,XA:2,failIfMajorPerformanceCaveat:!1},Lc=new Set(["default","low-power","high-performance"]),kc=65535,Nc=393210,Bc=8e3,$c=7996,Wc=new Pc.Pl(0,0,1,0,1,1,0,1),Vc=Fc.create(),jc=Fc.create(),Uc=new Pc.Pl,zc=new Pc.Rect;let Hc=null;Pc.Ls&&(self.ZA=function(){Hc?Hc.loseContext():console.warn("WEBGL_lose_context not supported")},self.KA=function(){Hc?Hc.restoreContext():console.warn("WEBGL_lose_context not supported")});const qc=new Set;let Jc=-1;Pc.Nw.QA=class extends Pc.Nw.tS{constructor(t,s){if(super(s),s=Object.assign({},Dc,s),!Lc.has(s.powerPreference))throw new Error("invalid power preference");const e={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat};let i=null,r=0;if(s.XA>=2&&(i=t.getContext("webgl2",e),r=2),i||(i=t.getContext("webgl",e),r=1),!i)throw new Error("renderer-unavailable (could not get WebGL context)");this.zC=i,this.tE=i.getContextAttributes(),this.sE=i.getParameter(i.VERSION),this.SA=r,this.eE=Oc.create(),this.iE=!1,this.rE=Fc.create(),this.nE=!!s.depth,this.hE=!(!s.depth||!s.YA),this.oE=this.nE,this.aE=!1,this.lE=null,this.uE=!0,this.cE=0,this.fE=0,this.JC=null,this.YC=null,this.XC=null,this.dE=null,this.KC=null,this.pE=this.SA>=2&&void 0!==globalThis.Float16Array,this.mE=new Float32Array(196605),this.gE=new Uint16Array(393210),this.yE=new Float32Array(131070),this.wE=this.pE?new globalThis.Float16Array(262140):new Float32Array(262140),this.SE=new Float32Array(32e3),this.vE=0,this.bE=0,this.ME=0,this.TE=null,this.xE=null,this.CE=[],this.GE=0,this._E=0,this.IE=null,this.PE=0,this.Z_=Pc.Hr(Pc.Nw.H_,this),this.RE=Pc.Hr(Pc.xo,1,1,1,1),this.AE=null,this.OI=null,this.EE=0,this.OE=0,this.FE=new Pc.Rect,this.DE=Pc.Hr(Pc.Rect,0,0,-1,-1),this.LE=0,this.kE=0,this.NE=0,this.BE=-1,this.$E=0,this.WE=0,this.VE="(unavailable)",this.jE="(unavailable)",this.UE=[],this.zE=!1,this.HE=null,this.qE=null,this.JE=null,this.YE=null,this.XE=null,this.ZE=null,this.KE=null,this.QE=0,this.tO=!!s.JA,this.vA=null,this.sO=new Set,this.eO=[]}Vb(){return!0}async BS(){super.BS();const t=this.zC;this.RE.Po(1,1,1,1),this.AE=null,this.OI=null,this.vE=0,this.bE=0,this.ME=0,Pc.bh(this.CE),this.GE=0,this._E=0,this.TE=null,this.IE=null,this.FE.set(0,0,1,1),this.PE=0;const s=this.Z_;s.UG=null,s.vC=null,s.bC=null,s.clearColor.Po(0,0,0,0),s.Y_.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.EE=t.ONE,this.OE=t.ONE_MINUS_SRC_ALPHA,this.iO(t),t.cullFace(t.BACK),t.disable(t.CULL_FACE),this.kE=0,t.frontFace(t.CW),this.NE=0,t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.nE?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.oE=this.nE,this.aE=!1,this.KC=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.KC),t.bufferData(t.ARRAY_BUFFER,this.SE.byteLength,t.DYNAMIC_DRAW),this.JC=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.JC),t.bufferData(t.ARRAY_BUFFER,this.mE.byteLength,t.DYNAMIC_DRAW),this.YC=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.YC),t.bufferData(t.ARRAY_BUFFER,this.yE.byteLength,t.DYNAMIC_DRAW),this.XC=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.XC),t.bufferData(t.ARRAY_BUFFER,this.wE.byteLength,t.DYNAMIC_DRAW),this.dE=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.dE),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.gE.byteLength,t.DYNAMIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.BE=t.getParameter(t.MAX_TEXTURE_SIZE);const e=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.$E=e[0],this.WE=e[1],this.WE>2048&&(this.WE=2048),this.UE=t.getSupportedExtensions();const i=t.getExtension("WEBGL_debug_renderer_info");if(i&&(this.VE=t.getParameter(i.UNMASKED_VENDOR_WEBGL),this.jE=t.getParameter(i.UNMASKED_RENDERER_WEBGL)),this.HE=t.getExtension("KHR_parallel_shader_compile"),this.SA>=2&&("Chromium"!==Pc.Ks.re||Pc.Ks.ie>=135)&&(this.JE=t.getExtension("EXT_conservative_depth")),Pc.Ls&&(Hc=t.getExtension("WEBGL_lose_context")),this.tO&&(1===this.Rx()?this.vA=t.getExtension("EXT_disjoint_timer_query"):this.vA=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.qE=t.getExtension("EXT_texture_filter_anisotropic"),this.qE?this.QE=t.getParameter(this.qE.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.QE=0,this.Rx()<2&&this.nE&&this.hE&&(this.YE=t.getExtension("WEBGL_depth_texture"),!this.YE))throw new Error("no depth texture support");this.Rx()<2&&(this.XE=t.getExtension("EXT_frag_depth"),this.ZE=t.getExtension("OES_standard_derivatives"),this.KE=t.getExtension("EXT_shader_texture_lod"));const r=Pc.Nw.BC,n=r.d_(!1);let h=r.m_(),o=n,a=r.x_(),l=r.M_(),u=r.w_(),c=r.d_(!0),f=!1;this.nE&&(this.Rx()<2?this.XE&&(h=r.g_(),a=r.C_(),u=r.S_(),f=!0):(o=r.p_(),h=r.y_(this.rO()),a=r.G_(this.rO()),l=r.T_(),u=r.v_(this.rO()),c=r.p_(!0)));const d=r.b_(this.Rx(),f,this.ZE&&this.KE,this.rO()),p=this.Rx()>=2?r.p_():n,m=[[h,o,"<default>"],[h,o,"<default-device-transform>"],[a,l,"<point>"],[r.__(),n,"<fill>"],[r.I_(),n,"<lineargradient>"],[r.P_(),n,"<penumbra>"],[r.A_(),n,"<hardellipse>"],[r.E_(),n,"<hardellipseoutline>"],[r.O_(),n,"<smoothellipse>"],[r.F_(),n,"<smoothellipseoutline>"],[r.R_(),n,"<smoothline>"],[u,c,"<tilemap>"],[d,p,"<tilerandomization>"]],g=await Promise.all(m.map(t=>this.nO({src:t[0],WC:t[1],name:t[2]})));this.uS=g[0],this.xE=g[1],this.cS=g[2],this.pS=g[3],this.mS=g[4],this.gS=g[5],this.yS=g[6],this.wS=g[7],this.SS=g[8],this.vS=g[9],this.bS=g[10],this.fS=g[11],this.dS=g[12],this.uv()}async nO(t){const s=await Pc.Nw.BC.UC(this,t);return this.hv(s),s}hO(){this.TE=null}$R(t,s,e){if(this.Ry===t&&this.Ay===s&&!e)return;this.Db();const i=this.zC,r=this.Z_;this.Ry=t,this.Ay=s,this.oO(0,0,t,s),this.tv(this.rE,t/s),this.aO(this.rE),this.xE&&(i.useProgram(this.xE.HG()),this.xE.BG(this.iS),this.TE=this.xE,this.Z_.UG=this.xE),i.bindTexture(i.TEXTURE_2D,null),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,null),i.activeTexture(i.TEXTURE0),this.AE=null,this.OI=null,this.nE&&this.uE&&this.lO(this.Ry,this.Ay),this.IE&&this.IE.yC(this.Ry,this.Ay),i.bindFramebuffer(i.FRAMEBUFFER,null),this.IE=null,r.vC=null,r.bC=null}lO(t,s){const e=this.zC;this.lE&&this.cE===t&&this.fE===s||(this.hE?(this.lE&&e.deleteTexture(this.lE),this.lE=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.lE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),this.Rx()>=2?e.texImage2D(e.TEXTURE_2D,0,e.DEPTH24_STENCIL8,t,s,0,e.DEPTH_STENCIL,e.UNSIGNED_INT_24_8,null):this.YE&&e.texImage2D(e.TEXTURE_2D,0,e.DEPTH_STENCIL,t,s,0,e.DEPTH_STENCIL,this.YE.UNSIGNED_INT_24_8_WEBGL,null),e.bindTexture(e.TEXTURE_2D,null)):(this.lE&&e.deleteRenderbuffer(this.lE),this.lE=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.lE),e.renderbufferStorage(e.RENDERBUFFER,this.SA>=2?e.DEPTH24_STENCIL8:e.DEPTH_STENCIL,t,s),e.bindRenderbuffer(e.RENDERBUFFER,null)),this.cE=t,this.fE=s)}uO(t,s){this.nE&&(this.uE=!1,this.lO(t,s))}cO(){this.nE&&(this.uE=!0,this.lO(this.Ry,this.Ay))}oO(t,s,e,i){const r=this.eE;r[0]===t&&r[1]===s&&r[2]===e&&r[3]===i||(this.fO().dI(t,s,e,i),Oc.set(r,t,s,e,i),this._E=0)}YS(t){super.YS(t),this.tv(this.rE,this.Ry/this.Ay)}zS(t){super.zS(t),this.tv(this.rE,this.Ry/this.Ay)}qS(t){super.qS(t),this.tv(this.rE,this.Ry/this.Ay)}aO(t){Fc.F(this.iS,t)||(this.fO().mI(t),Fc.S(this.iS,t),this._E=0,this.iE=!0)}dO(){let t,s,e;const i=this.IE;null===i?(t=this.rE,s=this.jg(),e=this.Qg()):(t=i.CC(),s=i.jg(),e=i.Qg()),this.aO(t),this.oO(0,0,s,e)}pO(t){Fc.F(this.rS,t)||(this.fO().yI(t),Fc.S(this.rS,t),this._E=0,this.iE=!0)}mO(){this.iE=!1}gO(){return this.iE}SC(){return this.Z_}fO(){const t=this.CE;return this.GE===t.length&&t.push(new Pc.Nw.X_(this.Z_)),t[this.GE++]}Db(){0!==this.GE&&(this.mA()||(this.yO(),this.wO(),this.GE=0,this.vE=0,this.bE=0,this.ME=0,this._E=0))}yO(){const t=this.zC;this.vE>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.JC),t.bufferSubData(t.ARRAY_BUFFER,0,this.mE.subarray(0,3*this.vE)),t.bindBuffer(t.ARRAY_BUFFER,this.YC),t.bufferSubData(t.ARRAY_BUFFER,0,this.yE.subarray(0,2*this.vE)),t.bindBuffer(t.ARRAY_BUFFER,this.XC),t.bufferSubData(t.ARRAY_BUFFER,0,this.wE.subarray(0,4*this.vE))),this.bE>0&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.dE),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,this.gE.subarray(0,this.bE))),this.ME>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.KC),t.bufferSubData(t.ARRAY_BUFFER,0,this.SE.subarray(0,this.ME)))}wO(){const t=this.CE;for(let s=0,e=this.GE;s<e;++s)t[s].gP()}SO(){return this.RE.Wo()}vO(t,s,e,i){const r=this.RE;r.Jo(t,s,e,i)||(r.Po(t,s,e,i),this.TS=null,2===this._E&&(this._E=0))}bO(t){const s=this.RE;s.Wo()!==t&&(s.Lo(t),this.TS=null,2===this._E&&(this._E=0))}BM(t){const s=this.RE;s.equals(t)||(s.set(t),this.TS=null,2===this._E&&(this._E=0))}MO(){this.vO(1,1,1,1)}TO(){return this.RE}xO(t){t!==this.AE&&(this.fO().oI(t),this.AE=t,this._E=0)}Fx(){this.AE=null}NM(t){const s=this.kv(t);this.CO(s[0],s[1])}GO(t){const s=this.$v(t);this.CO(s.Dv,s.Lv)}CO(t,s){t===this.EE&&s===this.OE||(this.fO().cI(t,s),this.EE=t,this.OE=s,this._E=0,this.TS=null)}_O(){return this.EE===this.zC.ONE&&this.OE===this.zC.ONE_MINUS_SRC_ALPHA}IO(){this.CO(this.zC.ONE,this.zC.ONE_MINUS_SRC_ALPHA)}PO(){this.CO(this.zC.SRC_ALPHA,this.zC.ONE_MINUS_SRC_ALPHA)}Rb(t){this.kE!==t&&(this.fO().fP(t),this.kE=t,this._E=0,this.TS=null)}RO(){return this.kE}Ab(t){this.NE!==t&&(this.fO().pP(t),this.NE=t,this._E=0,this.TS=null)}AO(){return this.NE}EO(){this.CO(this.zC.ONE,this.zC.ZERO)}Rect(t){this.OO(t.Qa(),t.tl(),t.sl(),t.el())}OO(t,s,e,i){this.Ob(t,s,e,s,e,i,t,i)}FO(t,s){(this.vE+t>65535||this.bE+s>393210)&&this.Db(),1===this._E?this.CE[this.GE-1].Q_+=s:(this.fO().nI(2*this.bE,s),this._E=1)}DO(){const t=this.vE;let s=this.bE;this.bE+=6;const e=this.gE;e[s++]=t,e[s++]=t+1,e[s++]=t+2,e[s++]=t,e[s++]=t+2,e[s]=t+3}Pl(t){this.LO(t,Wc)}Ob(t,s,e,i,r,n,h,o){this.FO(4,6),this.DO();const a=this.mE,l=this.vE;this.vE+=4;let u=3*l;const c=this.GS+this._S;a[u++]=t,a[u++]=s,a[u++]=c,a[u++]=e,a[u++]=i,a[u++]=c,a[u++]=r,a[u++]=n,a[u++]=c,a[u++]=h,a[u++]=o,a[u]=c,Wc.jo(this.yE,2*l),this.RE.Uo(this.wE,4*l)}sb(t,s){this.FO(4,6),this.DO();const e=this.vE;this.vE+=4,t.Yl(this.mE,3*e,this.GS+this._S),s.nl(this.yE,2*e),this.RE.Uo(this.wE,4*e)}LO(t,s){this.FO(4,6),this.DO();const e=this.vE;this.vE+=4,t.Yl(this.mE,3*e,this.GS+this._S),s.jo(this.yE,2*e),this.RE.Uo(this.wE,4*e)}kO(t,s,e){this.FO(4,6),this.DO();const i=this.vE;this.vE+=4,t.Yl(this.mE,3*i,this.GS+this._S),s.jo(this.yE,2*i),this.wE.set(e,4*i)}NO(t,s,e,i,r,n,h,o,a,l,u,c,f){this.FO(4,6),this.DO();const d=this.mE,p=this.vE;this.vE+=4;let m=3*p;const g=this.GS+this._S;d[m++]=t,d[m++]=s,d[m++]=g+e,d[m++]=i,d[m++]=r,d[m++]=g+n,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.nl(this.yE,2*p),this.RE.Uo(this.wE,4*p)}Xv(t,s,e,i,r,n,h,o,a,l,u,c,f){this.FO(4,6),this.DO();const d=this.mE,p=this.vE;this.vE+=4;let m=3*p;const g=this.GS+this._S;d[m++]=t,d[m++]=s,d[m++]=g+e,d[m++]=i,d[m++]=r,d[m++]=g+n,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.jo(this.yE,2*p),this.RE.Uo(this.wE,4*p)}BO(t,s,e,i,r,n,h,o,a,l,u,c,f,d){this.FO(4,6),this.DO();const p=this.mE,m=this.vE;this.vE+=4;let g=3*m;const y=this.GS+this._S;p[g++]=t,p[g++]=s,p[g++]=y+e,p[g++]=i,p[g++]=r,p[g++]=y+n,p[g++]=h,p[g++]=o,p[g++]=y+a,p[g++]=l,p[g++]=u,p[g]=y+c,f.jo(this.yE,2*m),this.wE.set(d,4*m)}HT(t,s,e,i){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(e.length%3!=0)throw new Error("index buffer length not multiple of 3");if(e.length>393210)throw new Error(`too many indices (${e.length}, limit 393210)`);this.FO(t.length,e.length);const r=this.vE;this.mE.set(t,3*r),this.yE.set(s,2*r);const n=this.gE;if(0===r)n.set(e,this.bE);else{let t=this.bE;for(let s=0,i=e.length;s<i;++s)n[t++]=e[s]+r}const h=this.wE;if(void 0!==i)h.set(i,4*r);else{const s=this.RE,e=s.No(),i=s.Bo(),n=s.$o(),o=s.Wo();let a=4*r;for(let s=0,r=t.length;s<r;++s)h[a++]=e,h[a++]=i,h[a++]=n,h[a++]=o}this.vE+=t.length/3,this.bE+=e.length}$O(t,s){this.Uv(0),Fc.S(Vc,this.iS),Fc.S(jc,this.rS),this.dO();const[e,i]=this.WO(this.IE),r=this.nv(0,0,this.WS(i),0,0,0,i);if(this.pO(r),"crop"===t&&this.IE&&s){const t=this.Ry/2,e=this.Ay/2,i=s.jg(),r=s.Qg(),n=this.IE.jg(),h=this.IE.Qg(),o=Math.min(n,i),a=Math.min(h,r),l=Math.max(r-h,0),u=Math.max(h-r,0);zc.set(-t,e-u,-t+o,e-a-u),Uc.Xl(zc),zc.set(0,l,o,a+l),zc.St(i,r),this.sb(Uc,zc)}else{const t=e/2,s=i/2;this.OO(-t,s,t,-s)}this.aO(Vc),this.pO(jc)}VO(t){this.FE.equals(t)||(this.FE.S(t),this.fO().xI(t),this._E=0)}jO(){}UO(t,s,e,i){this.ME>=7996&&this.Db();let r=this.ME;const n=this.GS+this._S;2===this._E&&this.PE===n?this.CE[this.GE-1].Q_++:(this.fO().GI(r,n,this.RE),this._E=2,this.PE=n);const h=this.SE;h[r++]=t,h[r++]=s,h[r++]=e,h[r++]=i,this.ME=r}cv(t){this.TE!==t&&(this.fO().II(t),this.TE=t,this._E=0,this.TS=null)}zO(){return this.TE}HO(){this.cv(this.xE)}qO(t){this.fO().lI(t),this._E=0}JO(t,s,e=1){this.fO().HI(t,s,e),this._E=0}YO(t,s,e,i,r,n,h){if(this.TE!==this.fS)throw new Error("must set tilemap fill mode first");this.fO().JI(t,s,e,i,r,n,h),this._E=0}XO(t,s,e,i,r,n,h){if(this.TE!==this.dS)throw new Error("must set tile randomization mode first");this.fO().XI(t,s,e,i,r,n,h),this._E=0}ZO(t,s,e,i,r,n,h,o,a,l,u){const c=this.TE;if(u%=10800,!c.IG||c.t_(s,e,i,r,n,h,o,a,l,u))return;const f=this.fO();f.AI(),c.i_(s,e,i,r,n,h,o,a,l,u);const d=f.sI;d[0]=n,d[1]=h,s.jo(d,2),d[6]=a,d[7]=l,e.jo(d,12);const p=f.eI;r.jo(p,0);const m=p[1];p[1]=p[3],p[3]=m,i.jo(f.iI,0),f.K_=u,f.Q_=o,c.cG.PG()?f.tI=t?t.xC():null:f.tI=null,this._E=0}KO(t){const s=this.TE;if(0===t.length||s.XG(t))return;const e=this.fO();e.FI(),s.KG(t),Pc.Ch(e.rI,t),this._E=0}QO(t,s,e,i){this.fO().MI(t,s,e,i),this._E=0}Ru(t){this.fO().bI(t),this._E=0}tF(){}Fb(){super.Fb(),this.zC.flush()}sF(){this.nE&&this.IE&&this.IE.PC()&&(this.fO().KI(this.oE),this._E=0)}eF(t){t=!!t,this.oE!==t&&this.nE&&(this.oE=t,this.fO().tP(t),this._E=0)}iF(){return this.oE}mC(){return this.lE}gC(){return this.hE}rF(t){if(t=!!t,this.hE&&this.aE!==t){if(t&&this.iF())throw new Error("depth still enabled");this.aE=t,this.fO().eP(t),this._E=0}}nF(t,s,e,i,r=0){t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),i=Math.floor(i),this.DE.Ka(t,s,e,i)||(this.DE.za(t,s,e,i),s=(r||this.WO(this.hF())[1])-s-i,this.fO().uP(!0,t,s,e,i),this._E=0)}oF(){-1!==this.DE.sl()&&(this.DE.set(0,0,-1,-1),this.fO().uP(!1,0,0,0,0),this._E=0)}aF(){for(const t of this.sO)t.UA(this.FS)}mA(){return!this.zC||this.zC.isContextLost()||this.zE}$M(){super.$S(),Pc.Nw.yx.$M(),Pc.Nw.Qx.$M(),Pc.Nw.Jb.$M();for(const t of this.sO)t.Ru();this.UE=[],this.vA=null,this.HE=null,this.JE=null,this.qE=null,this.YE=null,this.XE=null,this.ZE=null,this.KE=null,this.QE=0,this.VE="(unavailable)",this.jE="(unavailable)",this.TE=null,this.xE=null,this.lE=null;for(const t of this.MS.values())t.$M()}async WM(){this.zE=!0,await this.BS(),this.zE=!1;for(const t of this.MS.values())t.WM(this);this.$R(this.Ry,this.Ay,!0)}lF(t,s){if(this.mA())throw new Error("context lost");this.Db();const e=Pc.Hr(Pc.Nw.yx,this);return e._x(t,s),e}async uF(t,s){if(this.mA())throw new Error("context lost");if(s=Object.assign({},s),Pc.Pe.ImageBitmapOptions){let e=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const i=s.sx&&"clamp-to-edge"!==s.sx||s.ix&&"clamp-to-edge"!==s.ix,r=Pc.bn(e.width)&&Pc.bn(e.height);return this.Ax()||r||!i?s.mx=!1:Pc.Pe.Oe?(e=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:Pc.Mn(e.width),resizeHeight:Pc.Mn(e.height)}),s.mx=!1):e=await createImageBitmap(t,{premultiplyAlpha:"none"}),await Pc.pf(()=>this.lF(e,s))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const s=await Pc.uo(t);t=s}return await Pc.pf(()=>this.lF(t,s))}pC(t,s,e){this.Db();const i=Pc.Hr(Pc.Nw.yx,this);return i.Dx(t,s,e),i}gA(t,s,e){this.Db(),s.$x(t,e)}wC(t){t&&(t.zx(),t.Hx()>0||(this.Db(),t===this.AE&&(this.zC.bindTexture(this.zC.TEXTURE_2D,null),this.AE=null),t===this.OI&&(this.zC.activeTexture(this.zC.TEXTURE1),this.zC.bindTexture(this.zC.TEXTURE_2D,null),this.zC.activeTexture(this.zC.TEXTURE0),this.OI=null),t.Wx()))}cF(t){let s=this.Ry,e=this.Ay,i=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),i=!1),"number"==typeof t.height&&(e=Math.floor(t.height),i=!1)),s<=0||e<=0)throw new Error("invalid size");this.Db();const r=Pc.Hr(Pc.Nw.Qx,this);return r.fC(s,e,Object.assign({Zx:i},t)),this.IE=null,this.Z_.vC=null,this.Z_.bC=null,r}fF(t,s=!0){t!==this.IE&&(t&&t.RC()&&t.yC(this.Ry,this.Ay),this.fO().SI(t),this.IE=t,this._E=0,s&&this.dO())}hF(){return this.IE}WO(t){return t?[t.jg(),t.Qg()]:[this.Ry,this.Ay]}dF(t,s="stretch"){this.SA<2||this.IE&&this.IE.AC()>0?(this.EO(),this.MO(),this.pF(t,s)):(this.fO().NI(t,this.IE,s),this._E=0)}pF(t,s="stretch"){const e=t.xC();if(!e)throw new Error("not a texture-backed render target");this.xO(e),this.$O(s,e)}mF(t){this.SA<2||(this.fO().LI(t.MC()),this._E=0)}gF(t){this.fF(null),this.Db();const s=t.xC();s===this.AE&&(this.zC.bindTexture(this.zC.TEXTURE_2D,null),this.AE=null),s===this.OI&&(this.zC.activeTexture(this.zC.TEXTURE1),this.zC.bindTexture(this.zC.TEXTURE_2D,null),this.zC.activeTexture(this.zC.TEXTURE0),this.OI=null),t.Wx()}async LC(t,s,e){this.Db();const i=this.IE;let r,n,h;t?(r=t.jg(),n=t.Qg(),h=t.MC()):(r=this.jg(),n=this.Qg(),h=null);let o=0,a=0,l=r,u=n;if(e){o=Pc.Kr(Math.floor(e.Qa()),0,r-1),a=Pc.Kr(Math.floor(e.tl()),0,n-1);let t=e.width();t=0===t?r-o:Pc.Kr(Math.floor(t),0,r-o);let s=e.height();s=0===s?n-a:Pc.Kr(Math.floor(s),0,n-a),l=t,u=s,a=n-(a+u)}const c=this.zC;c.bindFramebuffer(c.FRAMEBUFFER,h);const f=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.IE=null,this.Z_.vC=null,this.Z_.bC=null,this.fF(i)};let d;if(!s&&this.Rx()>=2){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const t=c.createBuffer(),s=l*u*4,e=c.PIXEL_PACK_BUFFER;c.bindBuffer(e,t),c.bufferData(e,s,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(e,null),f();const i=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.jC(()=>c.getSyncParameter(i,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(i),d=new ImageData(l,u),c.bindBuffer(e,t),c.getBufferSubData(e,0,new Uint8Array(d.data.buffer),0,s),c.bindBuffer(e,null),c.deleteBuffer(t)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}yF(){this.eF(!0),this.fO().rP(),this._E=0,this.LE=1}wF(){this.eF(!1),this.fO().hP(),this._E=0,this.LE=2}SF(){return 2===this.LE}vF(){this.eF(!0),this.fO().aP(),this._E=0,this.LE=0}bF(t){this.MF()&&(this.fO().$I(t),this._E=0)}TF(t){this.MF()&&(this.fO().jI(t),this._E=0)}jC(t){const s=new Promise(s=>qc.add({resolve:s,qA:t}));return-1===Jc&&(Jc=self.requestAnimationFrame(Ic)),s}jb(){return this.Ry*this.Ay*(this.tE.alpha?4:3)}Ub(){let t=0;for(const s of Pc.Nw.Qx.kC())s.xC()||(t+=s.Jx());return t}zb(){let t=0;for(const s of Pc.Nw.yx.Yx())t+=s.Jx();return t}xF(){return this.sE}Rx(){return this.SA}ZC(){return this.pE}CF(){return"webgl"+this.Rx()}Ax(){return this.Rx()>=2}Ix(){return this.BE}GF(){return this.$E}_F(){return this.WE}IF(){return this.VE}PF(){return this.jE}RF(){if(this.Rx()>=2)return"webgl2";{const t=[];return this.XE&&t.push("EXT_frag_depth"),this.ZE&&t.push("OES_standard_derivatives"),this.KE&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}AF(){return this.UE}MF(){return!!this.vA}bA(){return this.vA}VC(){return this.HE}rO(){return!!this.JE}Nx(){return this.qE}Bx(){return this.QE}WA(t){this.sO.add(t)}VA(t){this.sO.delete(t)}FA(){return this.eO}Px(){return this.zC}iO(t){this.Fv([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}EF(){return this.qb()}}}{const Yc=self._s,Xc={OF:null,FF:null,DF:null,getTime:null,LF:null};Yc.Nw.kF=class{constructor(t){t=Object.assign({},Xc,t),this.NF=t.OF,this.BF=t.FF,this.$F=t.DF,this.WF=t.getTime,this.VF=t.LF,this.jF=null,this.UF=new Set}zF(t){this.UF.add(t)}HF(t){this.UF.delete(t)}$M(){this.jF=null;for(const t of this.UF)t.$M()}qF(t){return this.NF?this.NF(t):[t.jg(),t.Qg()]}hF(t){return this.BF(t)}JF(t,s){this.$F(t,s)}YF(){return this.WF()}Fp(t){this.VF(t)}XF(t,s,e){return s=Math.floor(s),e=Math.floor(e),!this.jF||this.jF.jg()===s&&this.jF.Qg()===e||(t.wC(this.jF),this.jF=null),null===this.jF&&(this.jF=t.lF(null,{width:s,height:e,nx:"nearest",lx:!1})),this.jF}}}{const Zc=self._s,Kc=self.assert,Qc=self.ls,tf=Qc.ds,sf=Zc.Hr(Zc.Rect),ef=Zc.Hr(Zc.Rect),rf=Zc.Hr(Zc.Rect),nf=Zc.Hr(Zc.Rect),hf=tf.create(),of=tf.create(),af={ZF:null,KF:null,QF:null,tD:!1},lf={sD:null,eD:!1,iD:!1,rD:!1,nD:!1,hD:!1,oD:!1};Zc.Nw.aD=class{constructor(t,s){s=Object.assign({},af,s),this.jp=t,this.lD=s.ZF,this.uD=s.KF,this.cD=s.QF,this.fD=null,this.dD=[],this.pD=[],this.mD=[],this.gD=!1,this.EM=0,this.yD=!1,this.wD=!1,this.SD=!1,this.vD=!1,this.bD=!1,this.MD=!1,this.iE=!1,this.TD=!1,this.xD=!1,this.CD=!1,this.GD=!1,this._D=!1,this.ID=0,this.PD=[null,null,null],this.RD=!!s.tD,this.AD=0,this.ED=0,this.OD=0,this.FD=0,this.DD=null,this.LD=null,this.kD=Zc.Hr(Zc.Rect),this.ND=Zc.Hr(Zc.Rect),this.BD=Zc.Hr(Zc.Rect),this.$D=Zc.Hr(Zc.Rect),this.WD=Zc.Hr(Zc.Rect),this.VD=1,this.jD=1,this.UD=0,this.zD=0,this.HD=null,this.qD=null,this.JD=0,this.YD=0,this.XD=0,this.ZD=0,this.KD=!1,this.aC=tf.create(),this.QD=tf.create(),this.jp.zF(this)}qr(){this.jp.HF(this),Zc.bh(this.mD),Zc.bh(this.dD),Zc.bh(this.pD),this.DD=null,this.LD=null,this.lD=null,this.uD=null,this.cD=null}$M(){this.gD=!0,Zc.bh(this.mD),Zc.bh(this.dD),Zc.bh(this.pD)}tL(){return this.gD}sL(t,s){if(s=Object.assign({},lf,s),Zc.bh(this.mD),this.AD=0,this.ED=0,this.yD=!1,this.wD=!1,this.SD=!1,this.vD=!1,this.bD=!1,this.MD=!1,this.ID=0,this._D=!!s.nD,this.GD=!!s.oD,this.gD=!1,Zc.Ch(this.dD,t),0===t.length)return;if(s.sD){if(s.sD.length!==t.length)throw new Error("incorrect indexMap length");Zc.Ch(this.pD,s.sD)}else{Zc.bh(this.pD);for(let s=0,e=t.length;s<e;++s)this.pD.push(s)}for(const s of t)this.AD+=s.wM(),this.ED+=s.SM(),s.xM()&&(this.yD=!0),s.GM()&&(this.wD=!0),s.CM()&&(this.SD=!0),s.vM()&&(this.vD=!0),s.PM()&&(this.bD=!0);this.MD=this.eL(t[0].gM());const e=this.iL(t[0],s),i=this.rL(t.at(-1),s);if(1===t.length&&!e&&!i)return void(this.CD=!0);this.CD=!1;let r=0;e&&(this.ID=1,this.mD.push(Zc.Hr(Zc.Nw.aD.hL.nL,this,-1,1)),r=1);for(let s=0,n=t.length;s<n;++s)if(0!==s||e){let t=1===r?2:1;s!==n-1||i||(t=0),this.ID=Math.max(this.ID,t),this.mD.push(Zc.Hr(Zc.Nw.aD.hL.oL,this,r,t,s)),r=t}else this.ID=1,this.mD.push(Zc.Hr(Zc.Nw.aD.hL.aL,this,-1,1,s)),r=1;i&&this.mD.push(Zc.Hr(Zc.Nw.aD.hL.lL,this,r,0))}iL(t,s){return!!(s.eD||t.bM()||s.rD&&!t.TM()||t.GM()&&!this.GD||0!==this.AD||0!==this.ED)||(t.gM().Vb()?t.CM()&&(s.hD||s.nD)||t._M()&&s.nD:t.CM()&&!this.MD&&s.hD)}rL(t,s){return!!s.iD||(t.gM().Vb()?t.CM()||t.vM():(t.CM()||t.vM())&&this.uL())}eL(t){return t.sv()&&this.SD&&!this.vD}cL(t,s,e){t.sv()&&null===s&&(s=t.fL()),this.HD=s,this.DD=e.dL||null,this.LD=e.pL||null,this.EM=e.mL||0,this.VD=e.devicePixelRatio||1,this.jD=e.gL||1,this.UD=e.yL||0,this.zD="number"==typeof e.time?e.time:this.jp.YF(),this.iE=!1,t.mO(),this.yD&&this.wL();let i=!1;if(this.SL()&&(this.vL(t,e),i=!0,this.qD=this.jp.XF(t,this.OD,this.FD),sf.S(this.ND),sf.bl(),t.sv()&&t.bL(this.HD),t.ML(this.HD.xC(),this.qD,sf.Qa(),sf.tl(),sf.width(),sf.height())),this.CD)this.TL(t,e);else if(i||this.vL(t,e),0!==this.BD.width()||0!==this.BD.height()){t.IO(),t.Pb(),t.MO(),t.Vv(0),t.Uv(0),this.fD=e.xL||null,this.JD=e.CL||0,this.YD=e.GL||0,this.XD=e._L||0,this.ZD=e.IL||0,this.KD=!!e.PL,this.RL(t),this.PD[0]=s,this.PD[1]=this.ID>=1?this.AL():null,this.PD[2]=2===this.ID?this.AL():null;for(const s of this.mD){const e=this.EL(s.OL()),i=this.EL(s.FL());t.sv()?s.DL(t,e,i):s.LL(t,e,i)}t.xO(null),this.PD[1]&&this.kL(this.PD[1]),this.PD[2]&&this.kL(this.PD[2]),this.PD.fill(null),this.NL(t),this.HD=null,this.qD=null,this.DD=null,this.LD=null,this.fD=null}}vL(t,s){const[e,i]=this.jp.qF(t);this.BL(t,e,i),this.$L(s)}BL(t,s,e){if(s<=0||e<=0)throw new Error("invalid draw size");this.OD===s&&this.FD===e||this.WL(t,s,e,0,0,this.aC,this.QD),this.OD=s,this.FD=e}WL(t,s,e,i,r,n,h){const o=s/2+i,a=e/2+r;t.tv(n,s/e);const l=t.nv(o,a,t.WS(e),o,a,0,e);tf.S(h,l)}$L(t){this.kD.S(t.VL),t.jL?this.ND.S(t.jL):this.ND.set(0,0,this.OD,this.FD),this.BD.S(this.ND),this.BD.St(this.OD,this.FD);const s=this.jD*this.VD;this.ND.fl(this.AD*s,this.ED*s),this.WD.S(this.ND),this.WD.St(this.OD,this.FD),this.ND.Ml(0,0,this.OD,this.FD),this.$D.S(this.ND),this.$D.St(this.OD,this.FD)}RL(t){if(this.TD=t.iF(),this.xD=t.SF(),this.GD)t.eF(!1),this.wD&&t.rF(!0);else{if(sf.S(this.ND),t.Vb()){const t=this.jD*this.VD;sf.fl(Math.max(this.AD,1)*t,Math.max(this.ED,1)*t),sf.bl(),sf.Kr(0,0,this.OD,this.FD)}else sf.bl();t.nF(sf.Qa(),sf.tl(),sf.width(),sf.height(),this.FD)}}UL(t){t.MO(),this.GD||(this.xD&&t.vF(),t.eF(!1),this.wD&&t.rF(!0)),t.sv()&&t.zL(!0)}NL(t){t.rF(!1),this.xD&&t.wF(),t.eF(this.TD),this.GD||t.oF(),t.sv()&&t.zL(!1),this.iE=t.gO()}HL(){this.WD.Kr(0,0,1,1)}EL(t){return t<0?null:this.PD[t]}AL(){return this.jp.hF(this)}qL(){return this.HD}kL(t){this.jp.JF(t,this)}JL(t){return this.dD[t]}YL(t){this.fD?this.fD(this,t,()=>this.lD(t,this)):this.lD(t,this),this.CD||this.UL(t)}XL(t){if(this.GD)return!0;if(0!==this.JD||0!==this.YD||0!==this.XD||0!==this.ZD)return!1;const[s,e]=t.WO(t.hF());return s===this.OD&&e===this.FD}ZL(t,s){let e=this.aC,i=this.QD;if(s&&!this.XL(t)){let s,r;e=hf,i=of,0!==this.XD&&0!==this.ZD?[s,r]=[this.XD,this.ZD]:[s,r]=t.WO(t.hF()),this.WL(t,s,r,this.JD,this.YD,e,i),this.GD||t.oF()}t.aO(e),t.pO(i)}wL(){this.jp.Fp(this)}KL(t,s){return this.cD(this.pD[t],s)}QL(t,s){let e=this.WD,i=this.$D,r=this.BD;t.Vb()&&(ef.S(e),ef.ml(1),e=ef,rf.S(i),rf.ml(1),i=rf,nf.S(r),nf.ml(1),r=nf),this.tk(t,s,i,r,e,1/this.OD,1/this.FD)}sk(t,s){let e=this.$D,i=this.BD,r=1/this.OD,n=1/this.FD;if(this.uD){let{ek:t,ik:s,rk:h}=this.uD(this.DD);t||(sf.set(0,0,0,0),t=sf),s||(s=this.OD),h||(h=this.FD),e=t,i=t,r=1/s,n=1/h}else t.Vb()&&(rf.S(e),rf.ml(1),e=rf,nf.S(i),nf.ml(1),i=nf);let h=this.WD;t.Vb()&&(h=ef,h.S(this.WD),h.ml(1)),this.tk(t,s,e,i,h,r,n),t.sv()&&this.bD&&t.nk(this._D)}hk(t){return this.SD?t.sv()?this.SL()?this.qD:this.HD.xC():this.HD:null}tk(t,s,e,i,r,n,h){t.ZO(this.hk(t),r,e,i,this.kD,n,h,this.VD,this.jD,this.UD,this.zD),t.KO(this.KL(s,t))}TL(t,s){const e=this.dD[0],i=t.iF(),r=e.GM();r&&(t.eF(!1),t.rF(!0),this.WD.set(0,0,1,1),this.BD.set(0,0,1,1)),t.cv(e),t.NM(this.EM),t.fF(this.HD),t.Pb();let n=0,h=1;if(this.BD.set(0,0,1,1),e._M()&&this.uD){const{ek:t,ik:s,rk:e}=this.uD(this.DD);t&&this.BD.S(t),n=Number.isFinite(s)?1/s:0,h=Number.isFinite(e)?1/e:0}else{const[s,e]=this.jp.qF(t);n=1/s,h=1/e}s.VL?this.kD.S(s.VL):this.kD.set(0,0,0,0),t.ZO(this.hk(t),this.WD,this.BD,this.BD,this.kD,n,h,this.VD,this.jD,this.UD,this.zD),t.KO(this.KL(0,t)),t.sv()&&this.bD&&t.nk(this._D),t.Vv(0),this.YL(t),r&&(t.rF(!1),t.eF(i))}SL(){return this.MD}uL(){return!this.MD}ak(){return this.SD}lk(){return!!this.CD&&!this.SL()}uk(){return this.GD}ck(){return this.DD}fk(){return this.LD}dk(){return this.EM}pk(){return this.KD}gO(){return this.iE}mk(){return this.ND}gk(){return this.$D}yk(){return this.RD}async wk(t,s,e){}}}{const uf=self._s;uf.Nw.aD.hL=class{constructor(t,s,e,i=-1){this.Sk=t,this.vk=s,this.bk=e,this.Aw=i}Mk(){return this.Sk}OL(){return this.vk}FL(){return this.bk}Tk(){return this.Aw}HG(){return this.Mk().JL(this.Tk())}LL(t,s,e){}DL(t,s,e){}}}{const cf=self._s;cf.Nw.aD.hL.nL=class extends cf.Nw.aD.hL{constructor(t,s,e,i){super(t,s,e,i)}LL(t,s,e){const i=this.Mk();t.IO(),t.Pb(),t.uv(),t.fF(e,i.pk()),t.QO(0,0,0,0),i.YL(t),i.HL()}DL(t,s,e){const i=this.Mk();t.IO(),t.Pb(),t.uv(),t.fF(e,!1),t.QO(0,0,0,0),i.YL(t),i.HL()}}}{const ff=self._s,df=ff.Hr(ff.Rect),pf=ff.Hr(ff.Pl);ff.Nw.aD.hL.lL=class extends ff.Nw.aD.hL{constructor(t,s,e,i){super(t,s,e,i)}LL(t,s,e){const i=this.Mk();t.uv(),t.fF(e),i.ZL(t,!0),t.NM(i.dk()),t.xO(s.xC()),pf.Xl(i.mk()),df.S(i.gk()),df.ml(1),t.sb(pf,df),i.yk()&&t.mF(s)}DL(t,s,e){const i=this.Mk();t.uv(),t.fF(e,!1),i.XL(t)?pf.Xl(i.gk()):(t.zL(!1),i.ZL(t,!0),pf.Xl(i.mk())),t.xk(null),t.NM(i.dk()),t.xO(s.xC()),i.uk()?t.$O():t.sb(pf,i.gk())}}}{const mf=self._s;mf.Nw.aD.hL.aL=class extends mf.Nw.aD.hL{constructor(t,s,e,i){super(t,s,e,i)}LL(t,s,e){const i=this.Mk();t.fF(e,i.pk()),t.QO(0,0,0,0),t.EO(),t.cv(this.HG()),i.sk(t,this.Tk()),i.YL(t),i.HL()}DL(t,s,e){const i=this.Mk();t.fF(e,!1),t.QO(0,0,0,0),t.EO(),t.cv(this.HG()),i.sk(t,this.Tk()),i.YL(t),i.HL()}}}{const gf=self._s,yf=gf.Hr(gf.Rect),wf=gf.Hr(gf.Pl);gf.Nw.aD.hL.oL=class extends gf.Nw.aD.hL{constructor(t,s,e,i){super(t,s,e,i)}LL(t,s,e){const i=this.Mk();t.fF(e);const r=0===this.FL();r?t.NM(i.dk()):(t.QO(0,0,0,0),t.EO()),t.cv(this.HG()),i.QL(t,this.Tk()),t.xO(s.xC()),i.ZL(t,r),wf.Xl(i.mk()),yf.S(i.gk()),yf.ml(1),t.sb(wf,yf),i.yk()&&t.mF(s)}DL(t,s,e){const i=this.Mk();t.fF(e,!1),0===this.FL()?(t.NM(i.dk()),t.xk(null),i.XL(t)?wf.Xl(i.gk()):(t.zL(!1),i.ZL(t,!0),wf.Xl(i.mk()))):(t.QO(0,0,0,0),t.EO(),wf.Xl(i.gk())),t.cv(this.HG()),i.QL(t,this.Tk()),t.xO(s.xC()),i.uk()?t.$O():t.sb(wf,i.gk())}}}{let Sf=function(t,s){const e=t[0]-s[0];return 0!==e?e:t[1]-s[1]};SortZOrderList=Sf;const vf=self._s,bf=self.Ns;let Mf=null;const Tf=new Set,xf=[],Cf=[];let Gf=!1,_f=!1,If=!1;const Pf=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.Ck=class{constructor(t){Mf=t,Object.defineProperties(this,{Gk:{value:Mf.Ik()._k(),writable:!1},Pk:{value:Mf.Ak().Rk(),writable:!1},Ek:{value:{},writable:!1},Ok:{value:{},writable:!1},Fk:{value:Mf.Dk(),writable:!1},Lk:{value:Mf.kk(),writable:!1},Nk:{value:Mf.Bk(),writable:!1},$k:{value:Mf.Wk(),writable:!1},Vk:{value:new Date(Mf.jk()),writable:!1},storage:{value:new self.Uk(Mf),writable:!1},zk:{value:Mf.Hk(),writable:!1},qk:{value:Mf.Jk(),writable:!1},Yk:{value:Mf.Xk(),writable:!1},nx:{value:Mf.Zk(),writable:!1},Kk:{value:Mf.Qk(),writable:!1},tN:{value:new self.sN(t),writable:!1},eN:{value:new self.iN(t),writable:!1}}),Mf.rN().addEventListener("keydown",t=>{Tf.has(t.key)?t.stopPropagation():Tf.add(t.key)}),Mf.rN().addEventListener("keyup",t=>Tf.delete(t.key)),Mf.Sf().addEventListener("window-blur",()=>Tf.clear()),Mf.Hk()&&(self.alert=t=>(Gf||(Gf=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}nN(t){Object.defineProperties(this.Ek,t)}hN(t){Object.defineProperties(this.Ok,t)}addEventListener(t,s){Mf.rN().addEventListener(t,s)}removeEventListener(t,s){Mf.rN().removeEventListener(t,s)}oN(t,...s){bf.oi(t);const e=Mf.aN(),i=e.lN(t);if(!i)throw new Error(`cannot find function name '${t}'`);if(!i._u())return i.uN();if(s.length<i.cN())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${i.cN()} expected)`);const r=i.fN();let n=r.dN();const h=e.pN();if(h){n=n.slice(0);const t=new Set(n);for(const s of h.dN())t.has(s)||(n.push(s),t.add(s));for(const s of e.mN())t.has(s)||(n.push(s),t.add(s))}return r.gN(n,i.yN(),i.wN(),i.uN(),...s)}SN(t){const s=Mf.bN().vN();if(!s)throw new Error("not in a function which returns a value");switch(s.MN()){case 1:"number"==typeof t&&s.TN(t);break;case 2:"string"==typeof t&&s.TN(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.TN(t)}}signal(t){bf.oi(t),Mf.aN().xN(t)}CN(t){return bf.oi(t),Mf.aN().GN(t)}_N(){return[Mf.Jk(),Mf.Xk()]}get IN(){return Mf.PN()}get RN(){return Mf.AN()}get EN(){return Mf.ON()}get FN(){return Mf.DN()}get LN(){return Mf.kN()}get NN(){return Mf.BN()}get $N(){return Mf.WN()}set $N(t){bf.ii(t),Mf.VN(t)}get jN(){return _f||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),_f=!0),Mf.UN()}get framesPerSecond(){return Mf.UN()}get zN(){return Mf.HN()}get qN(){return Mf.JN()}get YN(){return Mf.XN()}get ZN(){return Mf.KN()}set ZN(t){if(!Pf.has(t))throw new Error("invalid framerate mode");Mf.QN(t)}get tB(){return Mf.sB()}set tB(t){bf.ii(t),Mf.eB(t)}get iB(){return Mf.rB()}set iB(t){Mf.nB(t)}get hB(){return Mf.Ik().oB()}get aB(){return Mf.Ik().lB()}random(){return Mf.uB()}get layout(){const t=Mf.cB();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.fB()}dB(t){const s=Mf.pB();let e=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(e=s.mB(t),!e)throw new Error("invalid layout");return e.fB()}gB(){return Mf.pB().yB().map(t=>t.fB())}wB(t){const s=Mf.pB();let e=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(e=s.mB(t),!e)throw new Error("invalid layout");s.SB()||s.vB(e)}get keyboard(){const t=Mf.bB().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get MB(){const t=Mf.bB().MB;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get TB(){const t=Mf.bB().TB;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get xB(){const t=Mf.bB().xB;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}get q_(){return Mf.GB().CB()}_B(t,s){bf.oi(t),bf.oi(s),Mf.IB(t,s)}PB(t){bf.ii(t);const s=Mf.RB(t);return s?s.AB():null}EB(t,s){bf.Ai(s);const e=Mf.OB();for(const s of t){const t=Mf.DB(s),e=t.LB();xf.push([e.kB().Tk(),e.NB()]),Cf.push(t)}if(0===xf.length)return;xf.sort(Sf),Cf.sort((t,e)=>s(t.AB(),e.AB()));let i=!1;for(let t=0,s=xf.length;t<s;++t){const s=Cf[t],r=e.BB(xf[t][0]),n=xf[t][1],h=r.$B();h[n]!==s&&(h[n]=s,s.LB().WB(r,!0),r.VB(s),i=!0)}i&&Mf.jB(),vf.bh(xf),vf.bh(Cf)}async UB(t,s){If||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),If=!0);const e=new MessageChannel,i=e.port1,r=e.port2;return await Mf.zB("runtime","script-create-worker",{url:t,opts:s,port2:r},[r]),i}alert(t){return Mf.zB("runtime","alert",{message:t+(Mf.Hk()?" [via Web Worker]":"")})}HB(t){return bf.ii(t),Mf.qB(t)}JB(t){Mf.YB(t)}async XB(t,s,e){bf.ai(t),bf.Qe(s),bf.Bi(e,DOMRect),e||(e=new DOMRect(0,0,0,0));const i=Mf.GB();if(!i)return;Mf.jB();const r=await i.ZB(t||"image/png",s,e.x,e.y,e.width,e.height);return await Mf.KB(vf.e$.s$.t$.QB,null),r}}}{const Rf=self._s,Af=self.Ns;let Ef=null;self.i$=class{constructor(t){Ef=t,Object.defineProperties(this,{r$:{value:!0,writable:!1}})}n$(t){const s=self.o$.h$(t);if(!s)throw new Error("invalid IImageInfo");s.a$(Ef.l$())}u$(t){return Ef.eo(t)}c$(t){return Ef.io(t)}f$(t){return Ef.ro(t)}d$(t){return Ef.no(t)}p$(t){return Ef.m$(t)}g$(t){return"flat"===Ef.y$()&&Rf.Kh(t)&&(t=t.toLowerCase()),Ef.w$(t)}get S$(){return Ef.v$()}async b$(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}M$(...t){return Ef.T$(...t)}x$(t){return Ef.C$(t)}G$(t){return Ef._$(t)}}}{const Of=self._s,Ff=self.Ns;let Df=null;self.I$=class{constructor(t){Df=t,Object.defineProperties(this,{runtime:{value:Df.l$(),writable:!1}})}P$(t,s){const e=Df.l$(),i=e.DB(t),r=e.DB(s);return Df.R$(i,r)}A$(t,s){const e=Df.l$(),i=e.DB(t);for(const t of s){const s=e.DB(t);if(Df.R$(i,s))return t}return null}E$(t){const s=Df.l$().DB(t),e=Df.O$(s);return e?e.AB():null}F$(t,s){if(Ff.ii(t),Ff.ii(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");Df.D$(t,s)}L$(){return Df.k$()}N$(t,s){const e=Df.l$();let i;i=Array.isArray(t)?t.map(t=>e.B$(t)):[e.B$(t)];const r=Of.Rect.Za(s),n=[];return Df.$$(null,i,r,n),n.map(t=>t.AB())}}}{const Lf=self._s,kf=self.Ns;let Nf=null;const Bf=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),$f=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),Wf=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.sN=class{constructor(t){Nf=t,Object.defineProperties(this,{W$:{value:Lf.Ks.oe,writable:!1},os:{value:Bf.get(Lf.Ks.Qs)||"unknown",writable:!1},V$:{value:Lf.Ks.te,writable:!1},browser:{value:$f.get(Lf.Ks.se)||"unknown",writable:!1},j$:{value:Lf.Ks.ee,writable:!1},U$:{value:Wf.get(Lf.Ks.re)||"unknown",writable:!1}})}get z$(){let t=Nf.H$();return Nf.q$()?t="nwjs":Nf.J$()?t="windows-webview2":"cordova"===t?t="Android"===Lf.Ks.Qs?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get q_(){return Nf.GB().Y$()}get X$(){return Nf.GB().Z$()}get K$(){return Nf.GB().Q$()}get tW(){return Nf.GB().sW()}get eW(){return Nf.GB().iW()}get rW(){return Nf.GB().nW()}get hW(){return Nf.GB().oW()}get aW(){return Nf.GB().lW()}get devicePixelRatio(){return Nf.uW()}}}{const Vf=self._s,jf=self.Ns;self.Uk=class{constructor(t){this.cW=t.fW()}getItem(t){return jf.oi(t),this.cW.getItem(t)}setItem(t,s){return jf.oi(t),this.cW.setItem(t,s)}removeItem(t){return jf.oi(t),this.cW.removeItem(t)}clear(){return this.cW.clear()}keys(){return this.cW.keys()}}}{const Uf=self._s,zf=self.Ns,Hf=Uf.Is();self.dW=class{#t;constructor(){const t=Uf.mW.pW(Hf);this.#t=t,Object.defineProperties(this,{runtime:{value:t.l$().gW(),writable:!1},id:{value:t.yW(),writable:!1},wW:{value:t.SW(),writable:!1},vW:{value:t.bW(),writable:!1},MW:{value:t.TW(),writable:!1},xW:{value:t.GW(),writable:!1},_W:{value:t.IW(),writable:!1},PW:{value:t.RW(),writable:!1},AW:{value:t.EW(),writable:!1},OW:{value:t.FW(),writable:!1}}),t.l$().DW(this,t)}static LW(t){if(!t)return null;const s=Uf.mW.kW(t);return s?s.NW():null}BW(){return this.#t.WW().$W()}VW(){return this.#t.jW().AB()}}}{const qf=globalThis._s,Jf=globalThis.Ns,Yf=qf.Is();globalThis.UW=class{#t;constructor(){const t=qf.mW.pW(Yf);this.#t=t,Object.defineProperties(this,{name:{value:t.Rc(),writable:!1},runtime:{value:t.l$().gW(),writable:!1},zW:{value:t.HW().NW(),writable:!1}}),t.l$().DW(this,t)}addEventListener(t,s){Jf.oi(t),Jf.Ai(s),this.#t.rN().addEventListener(t,s)}removeEventListener(t,s){Jf.oi(t),Jf.Ai(s),this.#t.rN().removeEventListener(t,s)}qW(){return[...this.JW()]}YW(){return qf.$h(this.JW())}XW(){return[...this.ZW()]}KW(){return qf.$h(this.ZW())}QW(t){const s=this.#t,e=s.l$().tV(t),i=s.sV(e);return i?i.AB():null}*JW(){for(const t of this.#t.eV())yield t.AB()}*ZW(){for(const t of this.#t.rV().iV())yield t.AB()}}}{const Xf=globalThis._s,Zf=globalThis.Ns,Kf=Xf.Is();globalThis.nV=class extends globalThis.UW{#t;constructor(){super();const t=Xf.mW.pW(Kf);this.#t=t}hV(t){Zf.Ai(t);const s=this.#t;if(s.oV()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.aV(t)}xe(t,s,e,i,r){if(Zf.Ke(s),Zf.Ke(e),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const n=this.#t,h=n.l$(),o=h.cB().kB(t);if(!o)throw new Error("invalid layer");const a=h.lV(n,o,s,e,i,r);i&&o.uV(a);const l=h.aN();return l.cV(!0),a.fV(),l.cV(!1),l.dV()||h.pB().pV()||h.mV(),a.AB()}gV(){return this.#t.yV().map(t=>t.$W())}*wV(){for(const t of this.#t.yV())yield t.$W()}SV(t){return Zf.Ni(t,globalThis.vV),t.bV(this)}}}{const Qf=globalThis._s,td=globalThis.Ns,sd=globalThis.nV,ed=Qf.Is();globalThis.vV=class extends globalThis.UW{#t;constructor(){super();const t=Qf.mW.pW(ed);this.#t=t}MV(){return this.#t.TV().map(t=>t.$W())}*xV(){for(const t of this.#t.TV())yield t.$W()}bV(t){td.Ni(t,sd);const s=this.#t,e=s.l$().B$(t);return s.CV(e)}}}{const id=self._s,rd=self.Ns,nd=["above","below","top-sublayer","bottom-sublayer"];self.GV=class{#t;constructor(t){this.#t=t;const s=[],e=t._V(),i=e.IV().length;for(let t=0;t<i;++t)s.push(new self.PV(e,t));Object.defineProperties(this,{runtime:{value:t.l$().gW(),writable:!1},name:{value:t.Rc(),writable:!1},index:{value:t.Tk(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){rd.oi(t),rd.Ai(s),this.#t.rN().addEventListener(t,s)}removeEventListener(t,s){rd.oi(t),rd.Ai(s),this.#t.rN().removeEventListener(t,s)}get width(){return this.#t.jg()}set width(t){rd.ii(t),this.#t.Xg(t)}get height(){return this.#t.Qg()}set height(t){rd.ii(t),this.#t.Ug(t)}RV(t,s){rd.ii(t),rd.ii(s);const e=this.#t;e.Xg(t),e.Ug(s)}getSize(){const t=this.#t;return[t.jg(),t.Qg()]}set scale(t){rd.ii(t),this.#t.AV(t)}get scale(){return this.#t.EV()}set angle(t){rd.ii(t),this.#t.OV(t)}get angle(){return this.#t.FV()}set scrollX(t){rd.Ke(t),this.#t.DV(t)}get scrollX(){return this.#t.LV()}set scrollY(t){rd.Ke(t),this.#t.kV(t)}get scrollY(){return this.#t.NV()}scrollTo(t,s){rd.Ke(t),rd.Ke(s);const e=this.#t;e.DV(t),e.kV(s)}BV(){const t=this.#t;return[t.LV(),t.NV()]}get $V(){return this.#t.WV()}VV(t){const s=this.#t;let e=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return e=s.kB(t),e?e.jV():null}UV(){return this.#t.zV().map(t=>t.jV())}*HV(){for(const t of this.#t.HV())yield t.jV()}qV(t,s,e){const i=this.#t,r=self.JV;rd.oi(t),rd.Bi(s,r);const n=s?i.l$().YV(s):null,h=nd.indexOf(e);if(h<0)throw new Error("invalid location");i.XV(t,n,h)}ZV(t,s,e){const i=this.#t,r=i.l$(),n=self.JV;rd.Ni(t,n);const h=r.YV(t);if(!h)throw new Error("invalid layer");rd.Bi(s,n);const o=s?r.YV(s):null,a=nd.indexOf(e);if(a<0)throw new Error("invalid location");i.KV(h,o,a)}QV(t){const s=this.#t,e=self.JV;rd.Ni(t,e);const i=s.l$().YV(t);if(!i)throw new Error("invalid layer");const r=i.l$();s.tj(i),r.aN().dV()||r.mV()}sj(){const t=this.#t,s=t.l$();t.ej(),s.aN().dV()||s.mV()}ij(t,s){rd.ii(t),rd.ii(s),this.#t.rj(t,s)}nj(){return this.#t.hj()}set j(t){rd.oi(t);const s=this.#t;if("perspective"===t)s.oj();else{if("orthographic"!==t)throw new Error("invalid projection");s.aj()}}get j(){return this.#t.lj()?"orthographic":"perspective"}}}{const hd=self._s,od=self.Ns,ad=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ld=new Map([...ad.entries()].map(t=>[t[1],t[0]])),ud=new Set(["2d","3d"]),cd=hd.Hr(hd.xo);self.JV=class{#t;constructor(t){this.#t=t;const s=[],e=t._V(),i=e.IV().length;for(let t=0;t<i;++t)s.push(new self.PV(e,t));Object.defineProperties(this,{runtime:{value:t.l$().gW(),writable:!1},name:{value:t.Rc(),writable:!1},layout:{value:t.mB().fB(),writable:!1},effects:{value:s,writable:!1}}),t.l$().DW(this,t)}addEventListener(t,s){this.#t.rN().addEventListener(t,s)}removeEventListener(t,s){this.#t.rN().removeEventListener(t,s)}get uj(){const t=this.#t.cj();return t?t.jV():null}*fj(){for(const t of this.#t.fj())yield t.jV()}*dj(){for(const t of this.#t.pj())yield t.jV()}*mj(){for(const t of this.#t.pj())for(const s of t.gj())yield s.jV()}get index(){return this.#t.Tk()}get isVisible(){return this.#t.yj()}set isVisible(t){this.#t.wj(t)}get Sj(){return this.#t.vj()}get bj(){return this.#t.Mj()}set bj(t){this.#t.Tj(t)}get xj(){return this.#t.Cj()}set xj(t){this.#t.Gj(!!t)}get _j(){return this.#t.Ij()}get opacity(){return this.#t.SO()}set opacity(t){t=hd.Kr(+t,0,1),isNaN(t)||this.#t.bO(t)}set scale(t){od.ii(t),this.#t.Pj(t)}get scale(){return this.#t.Rj()}set Aj(t){od.ii(t),this.#t.Ej(t)}get Aj(){return this.#t.Oj()}set angle(t){od.ii(t),this.#t.OV(t)}get angle(){return this.#t.Fj()}set Dj(t){od.ii(t),this.#t.Lj(t)}get Dj(){return this.#t.kj()}set Nj(t){od.ii(t),this.#t.Bj(t)}get Nj(){return this.#t.$j()}set Wj(t){od.ii(t),this.#t.sT(t)}get Wj(){return this.#t.tT()}set renderingMode(t){if(!ud.has(t))throw TypeError("invalid rendering mode");this.#t.Vj("3d"===t)}get renderingMode(){return this.#t.jj()?"3d":"2d"}set Uj(t){this.#t.zj(t)}get Uj(){return this.#t.Hj()}set qj(t){this.#t.Jj(t)}get qj(){return this.#t.Yj()}set mL(t){od.oi(t);const s=ad.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");this.#t.NM(s)}get mL(){return ld.get(this.#t.Xj())}set backgroundColor(t){if(od.xi(t),t.length<3)throw new Error("expected 3 elements");cd.Ro(t[0],t[1],t[2]);const s=this.#t,e=s.Zj();e.Ho(cd)||(e.ko(cd),s.l$().jB())}get backgroundColor(){const t=this.#t.Zj();return[t.No(),t.Bo(),t.$o()]}set scrollX(t){od.Ke(t);const s=this.#t;s.Kj(!0),s.DV(t)}get scrollX(){return this.#t.LV()}set scrollY(t){od.Ke(t);const s=this.#t;s.Kj(!0),s.kV(t)}get scrollY(){return this.#t.NV()}scrollTo(t,s){od.Ke(t),od.Ke(s);const e=this.#t;e.Kj(!0),e.DV(t),e.kV(s)}BV(){const t=this.#t;return[t.LV(),t.NV()]}Qj(){this.#t.Kj(!1)}getViewport(){return this.#t.tU().il()}sU(t,s,e=0){od.Ke(t),od.Ke(s),od.Ke(e);const i=this.#t,r=i.l$();return i.eU(t-r.Q$(),s-r.sW(),e)}iU(t,s,e=0){od.Ke(t),od.Ke(s),od.Ke(e);const i=this.#t,r=i.l$(),[n,h]=i.rU(t,s,e);return[n+r.Q$(),h+r.sW()]}nU(t,s,e=0){return od.Ke(t),od.Ke(s),od.Ke(e),this.#t.hU(t,s,e)}oU(t,s,e=0){return od.Ke(t),od.Ke(s),od.Ke(e),this.#t.aU(t,s,e)}get lU(){return this.#t.uU()}}}{let fd=function(t){let s=md.get(t);return s||(s=dd.Hr(dd.Event.Sf),md.set(t,s),s)};GetDispatcher=fd;const dd=self._s,pd=self.Ns,md=new WeakMap,gd=dd.Is();self.cU=class{#t;constructor(){const t=dd.mW.pW(gd);this.#t=t;const s={runtime:{value:t.l$().gW(),writable:!1},objectType:{value:t.fU().$W(),writable:!1},zW:{value:t.HW().NW(),writable:!1}};t.dU(s),t.pU(s),Object.defineProperties(this,s),t.l$().DW(this,t)}static mU(){return dd.mW.gU()}yU(){const t=md.get(this);t&&(t.qr(),md.delete(this))}addEventListener(t,s,e){pd.oi(t),pd.Ai(s),fd(this).addEventListener(t,s,e)}removeEventListener(t,s,e){pd.oi(t),pd.Ai(s),fd(this).removeEventListener(t,s,e)}dispatchEvent(t){fd(this).dispatchEvent(t)}destroy(){const t=this.#t,s=t.l$();s.wU(t),s.aN().dV()||s.pB().pV()||s.aN().SU()||s.mV()}vU(){const t=this.#t.bU();return t?t.map(t=>t.AB()):[]}*MU(){const t=this.#t;if(t.TU())for(const s of t.xU())yield s.AB()}get uid(){return this.#t.CU()}get GU(){return this.#t._U()}get IU(){return this.#t.PU()}set $N(t){pd.ii(t),this.#t.VN(t)}get $N(){return this.#t.RU()}AU(){this.#t.EU()}get RN(){const t=this.#t;return t.l$().AN(t)}OU(...t){pd.xi(t);const s=new Set(t),e=this.#t.FU();return s.isSubsetOf(e)}DU(t){pd.Ni(t,Set),this.#t.LU(t)}kU(){return new Set(this.#t.FU())}signal(t){pd.oi(t);const s=this.#t;s.l$().aN().NU(s,t)}CN(t){pd.oi(t);const s=this.#t;return s.l$().aN().BU(s,t)}}}{const yd=self._s,wd=self.Ns,Sd=yd.Is();self.$U=class extends self.cU{#t;#s=!1;#e=null;#i=!1;#r=null;#n;#h;constructor(t){super(),this.#t=yd.mW.pW(Sd),this.#s=!1,this.#e=null,this.#i=!1,this.#r=null,this.#n=t?.WU,this.#h=t?.VU}yU(){this.jU(!1),this.UU(!1),super.yU()}zU(){return yd.mW.HU()}qU(t){const s=this.#t;s.l$().JU(t,s)}YU(t){const s=this.#t;return s.l$().KB(t,s)}XU(t,s){if(wd.oi(t),wd.Ai(s),!this.#n)throw new Error("no DOM component id set");this.#t.l$().ZU(this.#n,t,s)}KU(t){wd.xi(t);for(const[s,e]of t)this.XU(s,e)}QU(t,s){if(wd.oi(t),!this.#n)throw new Error("no DOM component id set");this.#t.l$().Vc(this.#n,t,s)}tz(t,s){if(wd.oi(t),!this.#n)throw new Error("no DOM component id set");return this.#t.l$().zB(this.#n,t,s)}sz(t,s){if(!this.#t.l$().Hk())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#n,handler:t,data:s,responseId:null});this.QU(t,s)}jU(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=this.#t.l$();if(t){if(!this.#e)if(this.#t.l$().ez()){const t=globalThis.iz,s=this.zW;this.#e=()=>{const e=performance.now();this.rz(),t.nz(s,performance.now()-e)}}else this.#e=()=>this.rz();s.Sf().addEventListener("tick",this.#e)}else s.Sf().removeEventListener("tick",this.#e)}hz(){return this.#s}rz(){}UU(t){if(t=!!t,this.#i===t)return;this.#i=t;const s=this.#t.l$();if(t){if(!this.#r)if(this.#t.l$().ez()){const t=globalThis.iz,s=this.zW;this.#r=()=>{const e=performance.now();this.oz(),t.nz(s,performance.now()-e)}}else this.#r=()=>this.oz();s.Sf().addEventListener("tick2",this.#r)}else s.Sf().removeEventListener("tick2",this.#r)}az(){return this.#i}oz(){}lz(){return[]}uz(){return null}cz(t){}fz(){if(!this.#h)throw new Error("no wrapper component id set");return this.#t.l$().dz(this.#h)}pz(t,s){if(wd.oi(t),wd.Ai(s),!this.#h)throw new Error("no wrapper component id set");this.#t.l$().mz(this.#h,t,s)}gz(t){wd.xi(t);for(const[s,e]of t)this.pz(s,e)}yz(t,s){if(!this.#h)throw new Error("no wrapper component id set");this.runtime.eN.wz(this.#h,t,s)}Sz(t,s){if(!this.#h)throw new Error("no wrapper component id set");return this.runtime.eN.vz(this.#h,t,s)}}}{let vd=function(t){return class s extends t{#t;#s;constructor(t){super(t);const s=bd.mW.pW(Id),e=s.LB();this.#t=s,this.#s=e,_d.set(this,s);const i=[],r=e.bz();if(r){const t=e.fU()._V().IV().length;for(let s=0;s<t;++s)i.push(new self.PV(r,s))}const n={effects:{value:i,writable:!1}};Object.defineProperties(this,n)}get layout(){return this.#s.mB().fB()}get Mz(){return this.#s.kB().jV()}get x(){return this.#s.YM()}set x(t){t=+t;const s=this.#s;isNaN(t)||s.YM()===t||(s.XM(t),s.Tz())}get y(){return this.#s.KM()}set y(t){t=+t;const s=this.#s;isNaN(t)||s.KM()===t||(s.QM(t),s.Tz())}setPosition(t,s){t=+t,s=+s;const e=this.#s;isNaN(t)||isNaN(s)||e.YM()===t&&e.KM()===s||(e.xz(t,s),e.Tz())}Cz(){const t=this.#s;return[t.YM(),t.KM()]}offsetPosition(t,s){if(t=+t,s=+s,isNaN(t)||isNaN(s)||0===t&&0===s)return;const e=this.#s;e.Gz(t,s),e.Tz()}set _z(t){t=+t;const s=this.#s;isNaN(t)||s.Iz()===t||(s.Pz(t),s.Tz())}get _z(){return this.#s.Iz()}set Rz(t){t=+t;const s=this.#s;isNaN(t)||s.Az()===t||(s.Ez(t),s.Tz())}get Rz(){return this.#s.Az()}Oz(t,s){t=+t,s=+s;const e=this.#s;isNaN(t)||isNaN(s)||e.Iz()===t&&e.Az()===s||(e.Pz(t),e.Ez(s),e.Tz())}Fz(){const t=this.#s;return[t.Iz(),t.Az()]}get Wj(){return this.#s.tT()}set Wj(t){t=+t;const s=this.#t,e=this.#s;isNaN(t)||e.tT()===t||(e.sT(t),s.l$().jB())}get Dz(){return this.#s.Lz()}get width(){return this.#s.jg()}set width(t){t=+t;const s=this.#s;isNaN(t)||s.jg()===t||(s.Xg(t),s.Tz())}get height(){return this.#s.Qg()}set height(t){t=+t;const s=this.#s;isNaN(t)||s.Qg()===t||(s.Ug(t),s.Tz())}RV(t,s){t=+t,s=+s;const e=this.#s;isNaN(t)||isNaN(s)||e.jg()===t&&e.Qg()===s||(e.$R(t,s),e.Tz())}getSize(){const t=this.#s;return[t.jg(),t.Qg()]}get angle(){return this.#s.FV()}set angle(t){t=bd.Qr(+t);const s=this.#s;isNaN(t)||s.FV()===t||(s.OV(t),s.Tz())}get kz(){return bd.sn(this.angle)}set kz(t){this.angle=bd.tn(t)}Ql(t){return t?(this.#s.Nz(Cd,Gd,!1),Cd.il()):this.#s.Bz().il()}$z(t){return t?(this.#s.Nz(Cd,Gd,!1),Gd.ql()):this.#s.Wz().ql()}Vz(){return this.#s.jz()}get isVisible(){return this.#s.vj()}set isVisible(t){t=!!t;const s=this.#t,e=this.#s;e.vj()!==t&&(e.wj(t),s.l$().jB())}get opacity(){return this.#s.SO()}set opacity(t){t=bd.Kr(+t,0,1);const s=this.#t,e=this.#s;isNaN(t)||e.SO()===t||(e.bO(t),s.l$().jB())}set Uz(t){if(Md.xi(t),t.length<3)throw new Error("expected 3 elements");Ad.Ro(t[0],t[1],t[2]);const s=this.#t,e=this.#s;e.zz().Ho(Ad)||(e.qz(Ad),s.l$().jB())}get Uz(){const t=this.#s.zz();return[t.No(),t.Bo(),t.$o()]}set mL(t){Md.oi(t);const s=Pd.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const e=this.#t;this.#s.NM(s),e.l$().jB()}get mL(){return Rd.get(this.#s.Xj())}Jz(){this.#s.Yz()}Xz(){this.#s.Zz()}Kz(t){Md.Ni(t,xd);const s=this.#t,e=s.l$().YV(t);if(!e)throw new Error("invalid layer");s.LB().Qz(e)}tH(t,e){Md.Ni(t,s),this.#s.sH(_d.get(t),e)}get zIndex(){return this.#s.NB()}get eH(){return this.#s.iH()}set eH(t){this.#s.rH(!!t)}Cl(t,s){return Md.Ke(t),Md.Ke(s),this.#s.nH(+t,+s)}P$(t){Md.Ni(t,s);const e=this.#t,i=_d.get(t);return e.l$().Ak().R$(e,i)}E$(){const t=this.#t,s=t.l$().Ak().O$(t);return s?s.AB():null}getParent(){const t=this.#t.hH();return t?t.AB():null}oH(){const t=this.#t.aH();return t?t.AB():null}*lH(){for(const t of this.#t.lH())yield t.AB()}uH(){return this.#t.cH()}fH(t){const s=this.#t.dH(t);return s?s.AB():null}*children(){for(const t of this.#t.children())yield t.AB()}*pH(){for(const t of this.#t.pH())yield t.AB()}mH(t,e){Md.Ni(t,s),Md.gi(e),e||(e={});const i=this.#t,r=_d.get(t);i.gH(r,e)}removeChild(t){Md.Ni(t,s);const e=this.#t,i=_d.get(t);e.yH(i)}wH(){const t=this.#t;t.SH()&&t.hH().yH(t)}vH(){const t=this.#s;return{bH:t.MH(),TH:t.xH(),CH:t.GH(),_H:t.IH(),PH:t.RH(),AH:t.EH(),OH:t.FH(),DH:t.LH(),kH:t.NH()}}BH(t,s){Md.ii(t),Md.ii(s),this.#s.$H(t,s)}WH(){const t=this.#s;t.VH(),t.Tz()}jH(t,s,e){Md.ii(t),Md.ii(s),Md.mi(e);const i=this.#s;i.UH(t,s,e)&&i.Tz()}zH(t,s){let e=NaN,i=NaN,r=NaN,n=NaN,h=NaN;const o=this.#s;if(o.HH()){const a=o.qH().NT(t,s);null!==a&&(e=a.YM(),i=a.KM(),r=a.tT(),n=a.eT(),h=a.rT())}return{x:e,y:i,Wj:r,JH:n,YH:h}}XH(){const t=this.#s;if(!t.HH())return[0,0];const s=t.qH();return[s._T(),s.IT()]}}};MakeIWorldInstanceClass=vd;const bd=self._s,Md=self.Ns,Td=self.cU,xd=self.JV,Cd=bd.Hr(bd.Rect),Gd=bd.Hr(bd.Pl),_d=new WeakMap,Id=bd.Is(),Pd=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Rd=new Map([...Pd.entries()].map(t=>[t[1],t[0]])),Ad=bd.Hr(bd.xo);self.ZH=vd(self.cU),self.KH=vd(self.$U)}{const Ed=self._s,Od=self.Ns;self.QH=class extends self.ZH{#t;constructor(){super(),this.#t=self.cU.mU()}tq(){return this.#t.eq().sq()}focus(){this.#t.eq().iq()}blur(){this.#t.eq().rq()}nq(t,s){Od.oi(t),this.#t.eq().hq(t,s)}}}{let Fd=function(t){let s=kd.get(t);return s||(s=Dd.Hr(Dd.Event.Sf),kd.set(t,s),s)};GetDispatcher=Fd;const Dd=self._s,Ld=self.Ns,kd=new WeakMap,Nd=Dd.Is();self.oq=class{#t;constructor(){const t=Dd.mW.pW(Nd);this.#t=t;const s={runtime:{value:t.l$().gW(),writable:!1},behavior:{value:t.lq().aq(),writable:!1},uq:{value:t.fq().cq(),writable:!1}};Object.defineProperties(this,s),t.l$().DW(this,t)}static mU(){return Dd.mW.gU()}get pq(){return this.#t.mq().AB()}yU(){const t=kd.get(this);t&&(t.qr(),kd.delete(this))}addEventListener(t,s,e){Ld.oi(t),Ld.Ai(s),Fd(this).addEventListener(t,s,e)}removeEventListener(t,s,e){Ld.oi(t),Ld.Ai(s),Fd(this).removeEventListener(t,s,e)}dispatchEvent(t){Fd(this).dispatchEvent(t)}}}{const Bd=self._s,$d=self.Ns,Wd=Bd.Is();self.gq=class{constructor(){const t=Bd.mW.pW(Wd),s={runtime:{value:t.l$().gW(),writable:!1},behavior:{value:t.lq().aq(),writable:!1},name:{value:t.Rc(),writable:!1}};Object.defineProperties(this,s)}}}{const Vd=self._s,jd=self.Ns,Ud=Vd.Is();self.yq=class{#s;constructor(){const t=Vd.mW.pW(Ud);this.#s=t;const s={runtime:{value:t.l$().gW(),writable:!1},id:{value:t.yW(),writable:!1}};Object.defineProperties(this,s),t.l$().DW(this,t)}qW(){return this.#s.iV().map(t=>t.AB())}static LW(t){if(!t)return null;const s=Vd.mW.wq(t);return s?s.aq():null}}}{const zd=self._s,Hd=self.Ns,qd=zd.Hr(zd.xo);self.PV=class{#t;constructor(t,s){this.#t=t;const e={index:{value:s,writable:!1}};Object.defineProperties(this,e)}get name(){return this.#t.IV()[this.index].Rc()}get isActive(){return this.#t.Sq(this.index)}set isActive(t){t=!!t;const s=this.#t;s.Sq(this.index)!==t&&(s.vq(this.index,t),s.bq(),s.l$().jB())}setParameter(t,s){Hd.ii(t),t=Math.floor(+t);const e=this.#t,i=e.Mq(this.index,t);if(null===i)throw new RangeError("invalid index");if(i instanceof zd.xo){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");qd.Ro(s[0],s[1],s[2]),s=qd}else if("number"!=typeof s)throw new TypeError("expected number");e.Tq(this.index,t,s)&&e.Sq(this.index)&&e.l$().jB()}getParameter(t){Hd.ii(t),t=Math.floor(+t);const s=this.#t.Mq(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof zd.xo?[s.No(),s.Bo(),s.$o()]:s}}}{const Jd=self._s,Yd=self.Ns;self.xq=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t.Rc(),writable:!1}})}get speed(){return this.#t.Cq()}get Gq(){return this.#t._q()}get Iq(){return this.#t.Pq()}get Rq(){return this.#t.Aq()}get Eq(){return this.#t.Oq()}get frameCount(){return this.#t.Fq()}Dq(){return this.#t.Lq().map(t=>t.kq())}*frames(){for(const t of this.#t.Lq())yield t.kq()}}}{const Xd=self._s,Zd=self.Ns;self.o$=class{#s;constructor(t){this.#s=t}static h$(t){return t.#s}get width(){return this.#s.jg()}get height(){return this.#s.Qg()}getSize(){const t=this.#s;return[t.jg(),t.Qg()]}Nq(t){return t.Bq(this)}$q(){return this.#s.yA().il()}}}{const Kd=self._s,Qd=self.Ns;self.Wq=class extends self.o${#s;constructor(t){super(t.Vq()),this.#s=t,Object.defineProperties(this,{duration:{value:t.jq(),writable:!1},_z:{value:t.Iz(),writable:!1},Rz:{value:t.Az(),writable:!1}})}Fz(){const t=this.#s;return[t.Iz(),t.Az()]}Uq(){return this.#s.zq()}Hq(t){return this.qq(t)[0]}Jq(t){return this.qq(t)[1]}qq(t){const s=this.#s;let e=null;if("number"==typeof t)e=s.Yq(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");e=s.Xq(t)}return e?[e.YM(),e.KM()]:this.Fz()}Zq(){const t=this.#s.Kq();return t?t.mu():0}Qq(t){return this.tJ(t)[0]}sJ(t){return this.tJ(t)[1]}tJ(t){Qd.ii(t),t=Math.floor(t);const s=this.#s.Kq();if(!s||t<0||t>=s.mu())return[0,0];const e=s.pu();return[e[2*t],e[2*t+1]]}get tag(){return this.#s.eJ()}}}{let tp=function(t){const s=ip.get(t);if(s.iJ())throw new Error("timeline/tween was released and is no longer valid");return s};GetTimelineState=tp;const sp=self._s,ep=self.Ns,ip=new WeakMap;self.rJ=class{constructor(t){ip.set(this,t),t.l$().DW(this,t)}pause(){tp(this).nJ()}resume(){tp(this).hJ()}stop(){tp(this).$f()}OU(t){return tp(this).oJ(t)}set time(t){ep.ii(t),tp(this).aJ(t)}get time(){return tp(this).YF()}set totalTime(t){ep.ii(t),tp(this).lJ(t)}get totalTime(){return tp(this).uJ()}set Gq(t){tp(this).cJ(!!t)}get Gq(){return tp(this).fJ()}set Eq(t){tp(this).dJ(!!t)}get Eq(){return tp(this).pJ()}set playbackRate(t){ep.ii(t),tp(this).mJ(t)}get playbackRate(){return tp(this).gJ()}get progress(){const t=tp(this);return t.YF()/t.uJ()}get tags(){return tp(this).yJ()}get finished(){return tp(this).wJ()}get SJ(){return tp(this).IsPlaying()}get vJ(){return tp(this).bJ()}get MJ(){return ip.get(this).iJ()}}}{let rp=function(t){const s=op.get(t);if(s.iJ())throw new Error("timeline was released and is no longer valid");return s};GetTimelineState=rp;const np=self._s,hp=self.Ns,op=new WeakMap;let ap=null;self.TJ=class extends self.rJ{constructor(t){super(t),op.set(this,t);const s={name:{value:t.Rc(),writable:!1}};Object.defineProperties(this,s)}}}{let lp=function(t){const s=fp.get(t);if(s.iJ())throw new Error("tween was released and is no longer valid");return s};GetTweenState=lp;const up=self._s,cp=self.Ns,fp=new WeakMap,dp=new WeakMap;let pp=null;self.xJ=class extends self.rJ{constructor(t,s,e){super(t),pp||(pp=e.CJ),fp.set(this,t),s&&dp.set(this,s)}stop(){const t=lp(this);dp.get(this).GJ(t)}_J(t){cp.oi(t);const s=self.ju.ac(pp(t));lp(this).IJ(s)}get pq(){const t=lp(this).PJ();return t?t.AB():null}get RJ(){return lp(this).AJ()}set RJ(t){lp(this).EJ(!!t)}get value(){const t=lp(this);if("value"!==t.OJ())throw new Error("not a value tween");return t.DJ("value").FJ()}}}{const mp=self._s,gp=self.Ns;self.LJ=class extends self.dW{constructor(){super()}}}{const yp=self._s,wp=self.Ns,Sp=yp.Is();self.kJ=class extends self.LJ{#t;#e;#s=0;#n=new Map;constructor(t){if(super(),this.#t=yp.mW.pW(Sp),!t?.WU)throw new Error("no DOM component ID specified");this.#e=t.WU,this.NJ("elem-focused",t=>t.BJ()),this.NJ("elem-blurred",t=>{t&&t.$J()})}WJ(t){const s=this.#s++;return this.#n.set(s,t),s}VJ(t){this.#n.delete(t)}NJ(t,s){this.#t.l$().ZU(this.#e,t,t=>{const e=this.#n.get(t.elementId);s(e,t)})}jJ(t){wp.xi(t);for(const[s,e]of t)this.jJ(s,e)}}}{const vp=self._s,bp=self.Ns,Mp=new WeakMap,Tp=vp.Is();self.UJ=class extends self.nV{#t;constructor(){super(),this.#t=vp.mW.pW(Tp)}zJ(){}HJ(){return this.#t.Vq().qJ()}JJ(t){}YJ(t){}XJ(){}ZJ(t){}}}{const xp=self._s,Cp=self.Ns,Gp=new WeakMap,_p=xp.Is();self.KJ=class extends self.KH{#t;#r=null;#s=null;constructor(t){super(t),this.#t=xp.mW.pW(_p)}yU(){if(super.yU(),this.#r){const t=this.#t.l$().Sf();t.removeEventListener("renderercontextlost",this.#r),t.removeEventListener("renderercontextrestored",this.#s),this.#r=null,this.#s=null}}QJ(){if(this.#r)return;this.#r=()=>this.tY(),this.#s=()=>this.sY();const t=this.#t.l$().Sf();t.addEventListener("renderercontextlost",this.#r),t.addEventListener("renderercontextrestored",this.#s)}tY(){}sY(){}eY(t){}iY(){return!0}iM(){return!1}}}{const Ip=self._s,Pp=self.Ns,Rp=Ip.Hr(Ip.Rect),Ap=new WeakMap,Ep=Ip.Is();self.rY=class extends self.KJ{#t=-1;#s=!0;#n=!1;#i=!1;#e=-.2;#h=Ip.Hr(Ip.Rect,0,0,-1,-1);#o=0;#a=0;#l=-1;#u=-1;#c=!1;constructor(t){if(!t?.WU)throw new Error("no DOM component ID specified");super(t);const s=Ip.mW.pW(Ep);Ap.set(this,s),this.#t=this.zW.WJ(this);const e=s.l$().GB();this.#o=e.nY(),this.#a=e.hY(),this.jU(!0)}yU(){super.yU(),this.zW.VJ(this.#t),this.oY("destroy"),this.#t=-1,Ap.delete(this)}aY(){if(Ap.get(this).l$().Hk())throw new Error("not valid in worker mode");return this.lY("get-element")}oY(t,s){s||(s={}),s.elementId=this.#t,this.QU(t,s)}lY(t,s){return s||(s={}),s.elementId=this.#t,this.sz(t,s)}uY(t,s){return s||(s={}),s.elementId=this.#t,this.tz(t,s)}cY(t){t||(t={});const s=Ap.get(this).LB();t.elementId=this.#t,t.isVisible=s.vj(),t.htmlIndex=s.kB().fY(),t.htmlZIndex=s.dY(),Object.assign(t,this.pY()),this.#s=!!t.isVisible,this.sz("create",t),this.mY(!0)}gY(t){t=!!t,this.#s!==t&&(this.#s=t,this.oY("set-visible",{isVisible:t}))}rz(){this.mY(!1)}yY(){const t=Ap.get(this).l$().GB().wY();return"Android"===Ip.Ks.Qs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}mY(t){const s=Ap.get(this);if(s.SY())return;const e=s.LB(),i=e.kB(),r=e.Bz();let[n,h]=i.rU(r.Qa(),r.tl()),[o,a]=i.rU(r.sl(),r.el());const l=s.l$().GB(),u=l.iW(),c=l.nW();if(!e.vj()||!i.vj())return void this.gY(!1);if(!this.yY()&&(o<=0||a<=0||n>=u||h>=c))return void this.gY(!1);Rp.set(n,h,o,a);const f=l.nY(),d=l.hY(),p=i.fY(),m=e.dY();if(!t&&Rp.equals(this.#h)&&this.#o===f&&this.#a===d&&this.#l===p&&this.#u===m)return void this.gY(!0);this.#h.S(Rp),this.#o=f,this.#a=d,this.#l=p,this.#u=m,this.gY(!0);let g=null;this.#i&&(g=i.vY()+this.#e),this.oY("update-position",{left:Math.round(this.#h.Qa()),top:Math.round(this.#h.tl()),width:Math.round(this.#h.width()),height:Math.round(this.#h.height()),htmlIndex:p,htmlZIndex:m,fontSize:g})}bY(){this.lY("focus",{focus:!0})}MY(){this.lY("focus",{focus:!1})}BJ(){this.#n=!0}$J(){this.#n=!1}TY(){return this.#n}xY(t,s){this.CY("set-css-style",{prop:Ip.bo(t),val:s})}GY(t,s){this.CY("set-attribute",{name:t,val:s})}_Y(t){this.CY("remove-attribute",{name:t})}IY(){this.#c||(this.#c=!0,Promise.resolve().then(()=>{this.#c=!1,this.oY("update-state",this.pY())}))}pY(){}PY(){return this.#t}}}{const Op=self._s,Fp=self.Ns;self.RY=class extends self.yq{constructor(){super()}}}{const Dp=self._s,Lp=self.Ns;self.AY=class extends globalThis.gq{constructor(){super()}zJ(){}}}{const kp=self._s,Np=self.Ns,Bp=new WeakMap,$p=kp.Is();self.EY=class extends self.oq{#i=!1;#s=!1;#t=!1;constructor(){super(),Bp.set(this,kp.mW.pW($p))}yU(){super.yU(),this.jU(!1),this.UU(!1),this.OY(!1),Bp.delete(this)}zU(){return kp.mW.HU()}FY(){}qU(t){const s=Bp.get(this);s.l$().JU(t,s.mq(),s.fq())}YU(t){const s=Bp.get(this);return s.l$().KB(t,s.mq(),s.fq())}jU(t){if(t=!!t,this.#i===t)return;this.#i=t;const s=Bp.get(this).l$();t?s.DY(this):s.LY(this)}hz(){return this.#i}rz(){}UU(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=Bp.get(this).l$();t?s.kY(this):s.NY(this)}az(){return this.#s}oz(){}OY(t){if(t=!!t,this.#t===t)return;this.#t=t;const s=Bp.get(this).l$();t?s.BY(this):s.$Y(this)}WY(){return this.#t}VY(){}lz(){return[]}uz(){return null}cz(t){}}}{const Wp=self._s,Vp=self.Ns;let jp=null;self.iN=class{constructor(t){jp=t}JB(t){jp.YB(t)}wz(t,s,e){Vp.oi(t),Vp.oi(s),Vp.Ci(e),jp.jY(t,s,e)}vz(t,s,e){return Vp.oi(t),Vp.oi(s),Vp.Ci(e),jp.UY(t,s,e)}zY(t){return Vp.ai(t),new self.HY(jp,t)}set qY(t){jp.JY(!!t)}get qY(){return jp.YY()}XY(t){jp.ZY(!!t)}KY(t){Vp.Ke(t);const s=jp.QY(t);return s?s.$W():null}}}{const Up=self._s,zp=self.Ns;self.HY=class{#t;#s;#h;#e;#n;#r;constructor(t,s){this.#t=t;const e=t.aN(),i=t.pN();this.#s=i,this.#h=i.tX();const r=t.bN();this.#e=r.sX(),this.#n=r.eX(i);const n=e.iX().eX();this.#r=n,s&&n.rX(s),t.nX(!1)}hX(){const t=this.#t.aN(),s=this.#h,e=this.#r;t.oX(s),this.#s.aX(this.#e,this.#n),t.lX(s),e.uX(e.Tk()+1)}get cX(){return this.#r.fX()}release(){const t=this.#t,s=t.bN(),e=t.aN().iX();t.nX(!0),e.dX(),s.dX()}}}{let Hp=function(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas};IsStaticTextureDataType=Hp;const qp=self._s,Jp=self.Ns;let Yp=null,Xp=null;const Zp=["none","back","front"],Kp=["cw","ccw"];self.pX=class{constructor(t,s){Xp=t,Yp=s}mX(){Yp.IO()}gX(t){Yp.GO(t)}yX(){Yp.gv()}wX(){Yp.uv()}SX(){Yp.Tv()}setColor(t){Yp.vO(t[0],t[1],t[2],t[3])}vX(t,s,e,i){Yp.vO(t,s,e,i)}bX(){Yp.MO()}MX(t){Yp.bO(t)}TX(t){Yp.Uv(t)}xX(){return Yp.zv()}CX(t){const s=Zp.indexOf(t);if(-1===s)throw new Error("invalid cull mode");Yp.Rb(s)}GX(){return Zp[Yp.RO()]}_X(t){const s=Kp.indexOf(t);if(-1===s)throw new Error("invalid front face winding");Yp.Ab(s)}IX(){return Yp.AO()}rect(t){Yp.OO(t.left,t.top,t.right,t.bottom)}PX(t,s,e,i){Yp.OO(t,s,e,i)}RX(t){Yp.Pl(qp.Pl.Jl(t))}AX(t,s,e,i,r,n,h,o){Yp.Ob(t,s,e,i,r,n,h,o)}EX(t,s){Yp.sb(qp.Pl.Jl(t),qp.Rect.rl(s))}OX(t,s){Yp.LO(qp.Pl.Jl(t),qp.Pl.Jl(s))}FX(t,s,e){Yp.kO(qp.Pl.Jl(t),qp.Pl.Jl(s),e)}DX(t,s,e,i,r,n,h,o,a,l,u,c,f){Yp.NO(t,s,e,i,r,n,h,o,a,l,u,c,qp.Rect.rl(f))}LX(t,s,e,i,r,n,h,o,a,l,u,c,f){Yp.Xv(t,s,e,i,r,n,h,o,a,l,u,c,qp.Pl.Jl(f))}kX(t,s,e,i,r,n,h,o,a,l,u,c,f,d){Yp.BO(t,s,e,i,r,n,h,o,a,l,u,c,qp.Pl.Jl(f),d)}NX(t,s,e,i){Yp.HT(t,s,e,i)}BX(t){Yp.Eb(t)}line(t,s,e,i){Yp.ny(t,s,e,i)}$X(t,s,e,i,r,n){Yp.Zv(t,s,e,i,r,n)}WX(t,s,e,i){Yp.eb(t,s,e,i)}VX(t){Yp.hb(qp.Rect.rl(t))}jX(t){Yp.ob(qp.Pl.Jl(t))}UX(t){Yp.pb(t)}zX(){Yp.mb()}HX(t){Yp.Sb(t)}qX(){Yp.xb()}JX(t){Jp.Bi(t,self.YX);const s=t?Xp.YV(t):null;Yp.xO(s)}XX(t,s){const e=self.o$.h$(t);if(!e)throw new Error("invalid IImageInfo");return e.ZX(Yp,{sx:s?.sx??"clamp-to-edge",ix:s?.ix??"clamp-to-edge",nx:s?.nx??"trilinear",lx:s?.lx??!0})}KX(t){const s=self.o$.h$(t);if(!s)throw new Error("invalid IImageInfo");s.aR()}Bq(t){const s=self.o$.h$(t);if(!s)throw new Error("invalid IImageInfo");const e=s.xC();return self.YX.QX(Xp,e)}tZ(t,s){if(!Hp(t))throw new TypeError("invalid texture data");const e=Yp.lF(t,{sx:s?.sx??"clamp-to-edge",ix:s?.ix??"clamp-to-edge",nx:s?.nx??"trilinear",lx:s?.lx??!0});return self.YX.QX(Xp,e)}sZ(t,s,e){Jp.ii(t),Jp.ii(s);const i=Yp.pC(t,s,{sx:e?.sx??"clamp-to-edge",ix:e?.ix??"clamp-to-edge",nx:e?.nx??"trilinear",lx:e?.lx??!0});return self.YX.QX(Xp,i)}eZ(t,s,e){Jp.Ni(s,self.YX);const i=Xp.YV(s);Yp.gA(t,i,{mx:e?.mx??!0})}deleteTexture(t){Jp.Ni(t,self.YX);const s=Xp.YV(t);Yp.wC(s)}iZ(){const t=Yp.qb();return new self.rZ(Xp,t)}nZ(){Xp.GB().hZ(Yp)}oZ(t){Jp.Ni(t,globalThis.JV),Xp.YV(t).aZ(Yp)}}}{const Qp=self._s,tm=self.Ns,sm=new WeakMap,em=new WeakMap;self.YX=class{constructor(t,s){sm.set(this,{runtime:t,texture:s}),em.set(s,this),t.DW(this,s),Object.defineProperties(this,{width:{value:s.jg(),writable:!1},height:{value:s.Qg(),writable:!1}})}static QX(t,s){if(!s)return null;return em.get(s)||new self.YX(t,s)}}}{let im=function(t){return hm.get(t).lZ};getActual=im;const rm=self._s,nm=self.Ns,hm=new WeakMap;self.rZ=class{constructor(t,s){hm.set(this,{runtime:t,lZ:s}),t.DW(this,s)}release(){im(this).qr()}set uZ(t){nm.oi(t),im(this).gR(t)}get uZ(){return im(this).SP()}set cZ(t){nm.ii(t),im(this).yR(t)}get cZ(){return im(this).wR()}set lineHeight(t){nm.ii(t),im(this).vR(t)}get lineHeight(){return im(this).bR()}set fZ(t){im(this).MR(t)}get fZ(){return im(this).TR()}set dZ(t){im(this).xR(t)}get dZ(){return im(this).CR()}setColor(t){nm.xi(t),this.pZ(t[0],t[1],t[2])}pZ(t,s,e){im(this).RR(t,s,e)}mZ(t){nm.oi(t),im(this).BM(t)}set gZ(t){im(this).AR(t)}get gZ(){return im(this).ER()}set verticalAlign(t){im(this).OR(t)}get verticalAlign(){return im(this).FR()}set yZ(t){im(this).DR(t)}get yZ(){return im(this).LR()}set wZ(t){im(this).kR(t)}get wZ(){return im(this).NR()}set text(t){nm.oi(t),im(this).jc(t)}get text(){return im(this).BR()}RV(t,s,e){nm.ii(t),nm.ii(s),nm.ii(e),im(this).$R(t,s,e)}Nq(){const{runtime:t,lZ:s}=hm.get(this),e=s.xC();return self.YX.QX(t,e)}$q(){return im(this).yA().il()}SZ(t){nm.Ai(t),im(this).uR=t}vZ(){im(this).aR()}get bZ(){return im(this).VR()}get MZ(){return im(this).UR()}}}{let om=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const e=s.at(-1).toLowerCase();return cm.get(e)||""},am=function(t){return new Promise((s,e)=>{const i=document.createElement("script");i.onload=s,i.onerror=e,i.async=!1,i.type="module",i.src=t,document.head.appendChild(i)})};GetTypeFromFileExtension=om,AddScript=am;const lm=self._s,um=new Set(["local","remote"]),cm=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);lm.TZ=class extends lm.Ur{constructor(t,s){super();const e=s.exportType;this.Bc=t,this.xZ="folders",this.CZ=new Map,this.GZ="cordova"===e,this._Z=!!s.isiOSCordova,this.IZ=!!s.isFileProtocol,this.PZ=s.swClientId,this.RZ=s.supportedAudioFormats||{},this.AZ=new Map,this.EZ=!1,this.OZ=s.scriptFolder,this.FZ="",this.DZ="",this.LZ="",this.kZ=s.fileMap||new Map,this.NZ=new Map;const i="html5"===e||"scirra-arcade"===e||"instant-games"===e;this.BZ=i?"remote":"local",this.$Z=new Map,this.WZ=[],this.VZ=[],this.jZ=!1,this.UZ=0,this.zZ=0,this.HZ=0,this.qZ=!1,this.JZ=lm.Hr(lm.tp,()=>this.YZ(),50),this.XZ=lm.Hr(lm.zd,Math.max(lm.hardwareConcurrency,8)),this.ZZ=lm.Hr(lm.zd,20),this.KZ=new self.i$(this)}qr(){for(const t of this.$Z.values())t.qr();this.$Z.clear(),lm.bh(this.VZ),this.Bc=null}l$(){return this.Bc}QZ(t){this.xZ=t}y$(){return this.xZ}tK(){return this.OZ}sK(t){this.FZ=t}v$(){return this.FZ}eK(t){this.DZ=t}iK(){return this.DZ}rK(t){this.LZ=t}nK(){return this.LZ}hK(){return this.IZ}ro(t,s){return s=s||this.BZ,lm.Kh(t)?("flat"===this.xZ&&(t=t.toLowerCase()),this.GZ&&this.IZ?this.oK(t):"playable-ad-single-file"===this.Bc.H$()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===s?this.XZ.$u(()=>lm.ro(t)):this.ZZ.$u(()=>lm.ro(t))):lm.ro(t)}no(t){return lm.Kh(t)?("flat"===this.xZ&&(t=t.toLowerCase()),this.GZ&&this.IZ?this.aK(t):"playable-ad-single-file"===this.Bc.H$()?lm.oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.BZ?this.XZ.$u(()=>lm.no(t)):this.ZZ.$u(()=>lm.no(t))):lm.no(t)}eo(t){return lm.Kh(t)?("flat"===this.xZ&&(t=t.toLowerCase()),this.GZ&&this.IZ?this.lK(t):"playable-ad-single-file"===this.Bc.H$()?lm.ao(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.BZ?this.XZ.$u(()=>lm.eo(t)):this.ZZ.$u(()=>lm.eo(t))):lm.eo(t)}async io(t){const s=await this.eo(t);return JSON.parse(s)}uK(t,s){return"flat"===this.xZ&&(t=t.toLowerCase()),this.Bc.zB("runtime","cordova-fetch-local-file",{filename:t,as:s})}lK(t){return this.uK(t,"text")}async oK(t){const s=await this.uK(t,"buffer"),e=om(t);return new Blob([s],{type:e})}async cK(t){"flat"===this.xZ&&(t=t.toLowerCase());let s=this.CZ.get(t);if(s)return s;const e=await this.oK(t);return s=URL.createObjectURL(e),this.CZ.set(t,s),s}aK(t){return this.uK(t,"buffer")}w$(t){"flat"===this.xZ&&(t=t.toLowerCase());let s=this.FZ+t;return"Gecko"===lm.Ks.re&&"preview"===this.Bc.H$()&&(s=this.fK(s)),s}m$(t){return lm.Zh(t)?Promise.resolve(t):this.GZ&&this.IZ?this.cK(t):"playable-ad-single-file"===this.Bc.H$()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.xZ&&(t=t.toLowerCase()),Promise.resolve(t))}dK(t){if(lm.Zh(t)||"preview"!==this.Bc.H$()||!this.PZ||!t)return t;try{const s=new URL(t,location.href);return s.searchParams.set("__c3_client_id",this.PZ),s.toString()}catch(s){return console.warn("Invalid iframe URL: "+t),t}}pK(t){return this.m$(t)}mK(t,s){return(s?"true":"false")+"|"+t}gK(t){const s=!!t.yK;if(t.wK&&!um.has(t.wK))throw new Error("invalid load policy");const e=this.mK(t.url,s);let i=this.$Z.get(e);return i||(i=lm.Hr(lm.SK,this,{url:t.url,size:t.size||0,wK:t.wK||this.BZ,yK:s}),this.$Z.set(e,i),this.jZ||(this.UZ+=i.Fu(),this.VZ.push(i.vK().then(()=>this.bK(i.Fu())))),i)}MK(t){const s=this.mK(t.TK(),t.xK());this.$Z.delete(s)}async CK(){try{await Promise.all(this.VZ),this.HZ=1}catch(t){console.error("Error loading: ",t),this.qZ=!0,this.YZ()}}GK(){this.jZ=!0}_K(){return this.qZ}bK(t){this.zZ+=t,this.JZ.mp()}YZ(){const t=lm.Hr(lm.Event,"loadingprogress");this.HZ=lm.Kr(this.zZ/this.UZ,0,1),t.progress=this.HZ,this.Bc.Sf().dispatchEvent(t),this.Bc.IK(lm.Hr(lm.Event,"loadingprogress"))}oB(){return this.HZ}lB(){return this.Bc.RK().PK()}AK(t){lm.Ch(this.WZ,t),this.WZ.length&&this.VZ.push(this.EK())}async EK(){const t=[],s=[];for(const[e,i,r]of this.WZ)this.UZ+=r,t.push(this.FK(e,i,s).then(()=>this.bK(r)));await Promise.all(t),this.Bc.Hk()&&s.length>0&&await this.Bc.zB("runtime","load-webfonts",{webfonts:s})}async FK(t,s,e){try{let i=await this.m$(s);"Gecko"===lm.Ks.re&&(t=`'${t}'`),("Gecko"===lm.Ks.re&&"preview"===this.Bc.H$()||"playable-ad-single-file"===this.Bc.H$())&&(i=this.fK(i));const r=new FontFace(t,`url('${i}')`);this.Bc.Hk()?self.fonts.add(r):document.fonts.add(r),await r.load(),this.Bc.Hk()&&e.push({name:t,url:i})}catch(s){console.warn(`[C3 runtime] Failed to load web font '${t}': `,s)}}DK(t){return!!this.RZ[t]}LK(t,s){this.EZ=!!s;for(const[s,e,i]of t)this.AZ.set(s,{fileName:s,kK:e.map(t=>({type:t[0],NK:t[1],fullName:s+t[1],fileSize:t[2]})),BK:i})}$K(t){"flat"===this.xZ&&(t=t.toLowerCase());const s=this.AZ.get(t);if(!s)return null;let e=null;for(const t of s.kK)if(e||"audio/webm; codecs=opus"!==t.type||(e=t),this.DK(t.type))return t;return e}WK(t){const s=this.$K(t);return s?{url:this.w$(s.fullName),type:s.type}:null}VK(){if(this.EZ){const t=[];for(const s of this.AZ.values()){if(s.BK)continue;const e=this.$K(s.fileName);e&&t.push({jK:s.fileName,url:this.w$(e.fullName),type:e.type,fileSize:e.fileSize})}return t}return[]}UK(t){return"preview"===this.Bc.H$()&&(t=new URL(t,location.href).toString()),this.kZ.get(t)||null}fK(t){let s=this.NZ.get(t);if(s)return s;const e=this.UK(t);return e?(s=URL.createObjectURL(e),this.NZ.set(t,s),s):t}_k(){return this.KZ}async T$(...t){const s=await Promise.all(t.map(t=>this.m$(t)));if(this.Bc.Hk())if(1===t.length){const s=t[0];await import((lm.Kh(s)?"./":"")+s)}else{const s=t.map(t=>`import "${lm.Kh(t)?"./":""}${t}";`).join("\n"),e=URL.createObjectURL(new Blob([s],{type:"application/javascript"}));await import(e)}else await Promise.all(s.map(t=>am(t)))}async C$(t){if(WebAssembly.compileStreaming){const s=await this.m$(t);return await WebAssembly.compileStreaming(fetch(s))}{const s=await lm.no(t);return await WebAssembly.compile(s)}}async _$(t){const s=await this.m$(t);return await this.Bc.zB("runtime","add-stylesheet",{url:s})}}}{const fm=self._s;fm.zK=class extends fm.Ur{constructor(t,s){super(),this.HK=t,this.Bc=t.l$(),this.qK=s.url||"",this.JK=s.size,this.YK=s.wK,this.XK=s.blob||null,this.ZK=!!this.XK,this.bw=null}qr(){this.bw=null,this.HK=null,this.Bc=null,this.XK=null}TK(){return this.qK}Fu(){return this.JK}vK(){return"local"===this.YK||this.XK?(this.ZK=!0,Promise.resolve()):(this.bw||(this.bw=this.HK.ro(this.qK,this.YK).then(t=>(this.ZK=!0,this.bw=null,this.XK=t,t)).catch(t=>{console.error("Error loading resource: ",t),this.bw=null})),this.bw)}KK(){return this.ZK}QK(){return this.XK?Promise.resolve(this.XK):this.bw?this.bw:this.HK.ro(this.qK,this.YK)}}}{const dm=self._s,pm=new dm.zd,mm=new Set;dm.SK=class extends dm.zK{constructor(t,s){super(t,s),this.tQ=null,this.sQ=null,this.zp=0,this.eQ=-1,this.iQ=-1,this.rQ=!!s.yK,mm.add(this)}qr(){if(0!==this.zp)throw new Error("released image asset which still has texture references");this.HK.MK(this),this.tQ=null,mm.delete(this),super.qr()}static nQ(){for(const t of mm)t.tQ=null,t.sQ=null,t.zp=0}ZX(t,s){return s=s||{},this.zp++,this.sQ?Promise.resolve(this.sQ):(this.tQ||(s.hx=this.Bc.GB().hQ(),this.tQ=this.oQ(t,s)),this.tQ)}async oQ(t,s){try{const e=await this.QK();return 0===this.zp?(this.tQ=null,null):await pm.$u(async()=>{const i=await t.uF(e,s);return this.tQ=null,0===this.zp?(t.wC(i),null):(this.sQ=i,this.eQ=i.jg(),this.iQ=i.Qg(),this.sQ)})}catch(t){throw console.error("Failed to load texture: ",t),t}}aR(){if(this.zp<=0)throw new Error("texture released too many times");this.zp--,0===this.zp&&this.sQ&&(this.sQ.gM().wC(this.sQ),this.sQ=null)}aQ(){return this.zp}xC(){return this.sQ}jg(){return this.eQ}Qg(){return this.iQ}xK(){return this.rQ}async lQ(){const t=await this.QK();return dm.Pe.ImageBitmap?await createImageBitmap(t):await dm.uo(t)}}}{let gm=function(t,s){return t.LB().uQ()-s.LB().uQ()};SortByInstLastCachedZIndex=gm;const ym=self._s,wm=self.assert;ym.cQ=class extends ym.Ur{constructor(t,s,e){super(),this.fQ=t,this.Ra=s,this.Aa=e,this.dQ=[],this.pQ=!0,this.mQ=new Set,this.gQ=!1}qr(){ym.bh(this.dQ),this.mQ.clear(),this.fQ=null}$f(){ym.bh(this.dQ),this.pQ=!0,this.mQ.clear(),this.gQ=!1}yQ(){this.pQ=!1}Au(){return!this.dQ.length||!(this.dQ.length>this.mQ.size)&&(this.wQ(),!0)}SQ(t){if(this.mQ.has(t))return this.mQ.delete(t),void(0===this.mQ.size&&(this.gQ=!1));this.dQ.push(t),this.pQ=1===this.dQ.length}Kf(t){this.mQ.add(t),this.gQ=!0,this.mQ.size>=50&&this.wQ()}wQ(){this.gQ&&(this.dQ.length!==this.mQ.size?(ym.Rh(this.dQ,this.mQ),this.mQ.clear(),this.gQ=!1):this.$f())}vQ(){this.pQ||(this.dQ.sort(gm),this.pQ=!0)}bQ(t){this.wQ(),this.vQ(),this.dQ.length&&t.push(this.dQ)}}}{const Sm=self._s;Sm.MQ=class extends Sm.Ur{constructor(t,s){super(),this.TQ=t,this.xQ=s,this.CQ=Sm.Hr(Sm.Iu)}qr(){this.CQ.qr(),this.CQ=null}GQ(t,s,e){let i=this.CQ.Hs(t,s);return i||(e?(i=Sm.Hr(Sm.cQ,this,t,s),this.CQ.Set(t,s,i),i):null)}_Q(t){return Math.floor(t/this.TQ)}IQ(t){return Math.floor(t/this.xQ)}PQ(t,s,e){if(s)for(let i=s.Qa(),r=s.sl();i<=r;++i)for(let r=s.tl(),n=s.el();r<=n;++r){if(e&&e.Cl(i,r))continue;const s=this.GQ(i,r,!1);s&&(s.Kf(t),s.Au()&&this.CQ.Eu(i,r))}if(e)for(let i=e.Qa(),r=e.sl();i<=r;++i)for(let r=e.tl(),n=e.el();r<=n;++r)s&&s.Cl(i,r)||this.GQ(i,r,!0).SQ(t)}RQ(t,s){let e=this._Q(t.Qa());const i=this.IQ(t.tl()),r=this._Q(t.sl()),n=this.IQ(t.el());for(;e<=r;++e)for(let t=i;t<=n;++t){const i=this.GQ(e,t,!1);i&&i.bQ(s)}}AQ(t){let s=t.Qa();const e=t.tl(),i=t.sl(),r=t.el();for(;s<=i;++s)for(let t=e;t<=r;++t){const e=this.GQ(s,t,!1);e&&e.yQ()}}}}{let vm=function(t,s){return t.LB().uQ()-s.LB().uQ()},bm=function(t,s){return t.LB().tT()-s.LB().tT()};SortByInstLastCachedZIndex=vm,SortByInstZElevation=bm;const Mm=self._s,Tm=self.assert,xm=new Mm.Rect,Cm=new Mm.Pl,Gm=[],_m=new Mm.Rect,Im=new Mm.Rect,Pm=self.ls,Rm=Pm.ws,Am=Pm.Ss,Em=Pm.ds,Om=Em.create(),Fm=Rm.create(),Dm=Am.create(),Lm=Rm.create(),km=Rm.create(),Nm=Rm.create(),Bm=Mm.Hr(Mm.Pa),$m=Mm.Hr(Mm.Rect),Wm=[],Vm=[],jm=[],Um={name:"",EQ:-1,OQ:!1,isVisible:!0,bj:!0,xj:!1,backgroundColor:[1,1,1,1],Uj:!0,FQ:[1,1],opacity:1,qj:!1,DQ:!1,LQ:!1,kQ:!1,Aj:1,mL:0,Wj:0,NQ:[],BQ:[],$Q:[]},zm=new Map,Hm=t=>{if(!t.pq.fU().WQ())return;const s=t.pq.CU();zm.has(s)&&(zm.delete(s),zm.size||t.pq.l$().Sf().removeEventListener("instancedestroy",Hm))};Mm.VQ=class extends Mm.Ur{constructor(t,s,e){super(),e=Object.assign({},Um,e),this.jQ=t,this.Bc=t.l$(),this.UQ=s,this.Xr=e.name,this.Aw=-1,this.zQ=!!e.xj,this.HQ=-1,this.qQ=e.EQ,this.JQ=!!e.OQ,this.YQ=!!e.isVisible,this.XQ=!!e.bj,this.ZQ=Mm.Hr(Mm.xo),this.ZQ.Sa(e.backgroundColor),this.KQ=!!e.Uj,this.QQ=e.FQ[0],this.t0=e.FQ[1],this.OM=Mm.Hr(Mm.xo,1,1,1,e.opacity),this.s0=Mm.Hr(Mm.xo),this.e0=!!e.qj,this.i0=!!e.DQ,this.r0=!!e.LQ,this.n0=!!e.kQ,this.h0=e.Aj,this.EM=e.mL,this.o0=null,this.a0=1,this.FM=e.Wj,this.l0=0,this.u0=0,this.c0=0,this.f0=!1,this.eE=Mm.Hr(Mm.Rect),this.d0=Mm.Hr(Mm.Rect),this.p0=Mm.Hr(Mm.Rect),this.m0=!0,this.aC=Em.create(),this.g0=!0,this.QD=Em.create(),this.y0=!0,this.w0=Mm.Hr(Mm.Nw.Vw),this.S0=!0,this.v0=[],this.b0=e.NQ,this.M0=[],this.T0=[],this.x0=new Map,this.dQ=[],this.C0=!1,this.G0=!1,this._0=!1;const i=this.Bc.GB();this.I0=Mm.Hr(Mm.P0,this,e.BQ),this.Sk=Mm.Hr(Mm.Nw.aD,i.R0(),{ZF:(t,s)=>{const e=s.ck(),r=e.hF();t.BM(e.A0()),t.pF(r),t.mF(r),i.E0(r)},QF:t=>this._V().O0(t)}),this.F0=!0,this.D0=!0,this.L0=null,this.k0=[],this.N0=!1,this.B0=Mm.Hr(Mm.Rect,0,0,-1,-1),this.$0=Mm.Hr(Mm.Rect,0,0,-1,-1),this.W0=new self.JV(this),this.V0=Mm.Hr(Mm.Event.Sf),this.j0(),this.U0()&&(this.L0=Mm.Hr(Mm.MQ,this.Bc.Jk(),this.Bc.Xk())),this.z0=e.$Q.map(t=>Mm.VQ.H0(this.jQ,this,t))}q0(){for(const t of this.b0){const s=this.Bc.J0(t[1]);this.jQ.Y0(s),s.X0()||(s.Z0(t),s.K0(this.Aw)),this.M0.push(t),this.x0.set(t[2],t)}Mm.Ch(this.v0,this.M0),this.b0=null}static H0(t,s,e){return Mm.Hr(Mm.VQ,t,s,{name:e[0],EQ:e[2],isVisible:e[3],bj:e[13],xj:e[19],backgroundColor:e[4].map(t=>t/255),Uj:e[5],FQ:[e[6],e[7]],opacity:e[8],qj:e[9],DQ:e[17],LQ:e[18],kQ:e[10],Aj:e[11],mL:e[12],Wj:e[16],NQ:e[14],BQ:e[15],$Q:e[20]})}qr(){for(const t of this.z0)t.qr();Mm.bh(this.z0);for(const t of this.dQ)this.Bc.wU(t);Mm.bh(this.dQ),this.I0.qr(),this.I0=null,this.Sk.qr(),this.Sk=null,this.W0=null,this.UQ=null,this.jQ=null,this.Bc=null}Jr(){return!this.jQ}Q0(t){return this.x0.get(t)}t1(t){const s=this.jQ.s1(),e=this.M0;let i=0;for(let r=0,n=e.length;r<n;++r){const n=e[r],h=this.Bc.J0(n[1]);let o=!0;if(!h.e1()||s)if(h.WQ()&&zm.has(n[2]))o=!1;else{const s=this.Bc.i1(n,this,!0);t.push(s),h.WQ()&&(zm.size||this.Bc.Sf().addEventListener("instancedestroy",Hm),zm.set(s.CU(),s),o=!1,this.T0.push(s.CU()))}o&&(e[i]=e[r],++i)}Mm.Sh(e,i),this.Bc.mV(),this.VB()}n1(t,s){if(!t.HW().bW())throw new Error("instance is not of world type");const e=t.LB();if(e.kB()!==this)throw new Error("instance added to wrong layer");this.dQ.push(t),0!==e.tT()&&(this._0=!0),s&&this.U0()&&t.LB().Tz(),this.VB(t)}h1(t){this.dQ.includes(t)||(this.dQ.push(t),0!==t.LB().tT()&&(this._0=!0),this.VB(t))}o1(t,s){const e=t.LB();if(e.kB()!==this)throw new Error("instance added to wrong layer");this.dQ.unshift(t),0!==e.tT()&&(this._0=!0),this.VB(t),s&&this.U0()&&t.LB().Tz()}a1(t,s){const e=this.dQ.indexOf(t);e<0||(s&&this.U0()&&t.LB().l1(),this.dQ.splice(e,1),this.VB(t),this.u1())}c1(){this._0=!0}u1(){0===this.dQ.length&&(this._0=!1)}f1(t){if(t){const t=new Set;for(const s of this.dQ){const e=s.LB().uQ();e>=0&&t.add(e)}let s=-1;for(const e of this.dQ){const i=e.LB();if(!(i.uQ()>=0)){for(++s;t.has(s);)++s;i.d1(s)}}}this.dQ.sort(vm)}m1(){}g1(){for(const t of this.dQ)t.fU().WQ()||this.Bc.wU(t);this.Bc.mV(),Mm.bh(this.dQ),this._0=!1,this.VB()}w1(t,s,e,i,r,n){const h=this.Bc.aN(),o=this.Bc.S1(),a=t.v1(),l=[];for(const u of this.M0){const c=u[0],f=c[0],d=c[1];if(!s.Cl(f,d))continue;const p=o[u[1]];if(p!==t){if(!a)continue;if(!t.CV(p))continue}let m=r;if(!m){const t=this.Bc.OB();this.mB()===t?m=this:(m=t.b1(this.Rc()),m||(m=t.BB(this.Tk())))}const g=this.Bc.i1(u,m,!1,void 0,void 0,!1,n,void 0,n);n&&m.uV(g);const y=g.LB();y.Gz(e,i),y.Tz(),h.cV(!0),g.fV(),h.cV(!1),l.push(g)}return l}oV(){return this.dQ.length}mB(){return this.jQ}Rc(){return this.Xr}M1(t){this.Aw=t}Tk(){return this.Aw}T1(t){this.HQ=t}fY(){return this.HQ}Cj(){return this.zQ}Gj(t){t=!!t,this.zQ!==t&&(this.zQ=t,this.jQ.C1(),this.Bc.jB())}G1(){let t=-1;const s=this.cj();return t=s?s.pj().indexOf(this):this.mB()._1().indexOf(this),t}I1(){return this.qQ}l$(){return this.Bc}P1(){return this.JQ}R1(){for(const t of this.fj())if(t.P1())return!0;return!1}uW(){return this.Bc.uW()}_V(){return this.I0}Mk(){return this.A1(),this.Sk}A1(){const t=this.E1();if(!this.F0&&t===this.D0&&!this.Sk.tL())return;const s=this._V().O1();this.Sk.sL(s.map(t=>t.HG()),{sD:s.map(t=>t.Tk()),eD:!t,oD:!0}),this.F0=!1,this.D0=t}bq(){this._V().bq(),this.F0=!0}U0(){return this.n0&&!this.r0}F1(){return this.L0}D1(){this.N0=!1}vj(){for(const t of this.L1())if(!t.yj())return!1;return!0}yj(){return this.YQ}wj(t){t=!!t,this.YQ!==t&&(this.YQ=t,this.Bc.jB())}Tj(t){this.XQ=!!t}Mj(){return this.XQ}Ij(){for(const t of this.L1())if(!t.Mj())return!1;return!0}Kj(t){if(t=!!t,this.f0!==t){if(this.f0=t,t){const t=this.mB();this.u0=t.LV(),this.c0=t.NV()}this.N1(),this.Bc.jB()}}B1(){return this.f0}DV(t){const s=this.mB(),e=s.W1(),i=s.V1();t>i&&(t=i),t<e&&(t=e),this.u0!==t&&(this.u0=t,this.B1()&&(this.N1(),this.Bc.jB()))}kV(t){const s=this.mB(),e=s.j1(),i=s.U1();t>i&&(t=i),t<e&&(t=e),this.c0!==t&&(this.c0=t,this.B1()&&(this.N1(),this.Bc.jB()))}LV(){return this.B1()?this.u0:this.mB().LV()}NV(){return this.B1()?this.c0:this.mB().NV()}tU(){return this.z1(),this.eE}H1(){return this.z1(),this.d0}q1(){return this.z1(),this.p0}J1(){return this.mB().hj()}WS(t){return this.Bc.WS(t)}Y1(t,s){const e=this.H1();if(0===t)s.S(e);else{let i=e.ol(),r=e.al();const n=this.X1(t),h=e.width()/n,o=e.height()/n,[a,l]=this.J1();if(.5!==a||.5!==l){const s=this.Z1(),e=this.Bc,n=this.WS()/s;let h=(a-.5)*e.K1()/n,o=(l-.5)*e.Q1()/n;const u=this.FV();0!==u&&(Bm.set(h,o),Bm.rotate(u),h=Bm.Fa(),o=Bm.La());const c=Mm.gn(s,0,t);i+=Mm._t(h,0,c),r+=Mm._t(o,0,c)}s.set(i-h/2,r-o/2,i+h/2,r+o/2)}}SO(){return this.OM.Wo()}bO(t){t=Mm.Kr(t,0,1),this.OM.Wo()!==t&&(this.OM.Lo(t),this.j0(),this.Bc.jB())}j0(){this.s0.S(this.OM),this.s0.Ko()}A0(){return this.s0}E1(){return this.OM.Jo(1,1,1,1)}Oj(){return this.h0}Ej(t){this.h0!==t&&(this.h0=t,this.N1(),this.Bc.jB())}kj(){return this.QQ}$j(){return this.t0}t2(t,s){this.QQ===t&&this.t0===s||(this.QQ=t,this.t0=s,this.N1(),this.Bc.jB())}Lj(t){this.t2(t,this.$j())}Bj(t){this.t2(this.kj(),t)}sT(t){this.FM!==t&&(this.FM=t,this.Bc.jB())}tT(){return this.FM}OV(t){t=Mm.Qr(t),this.l0!==t&&(this.l0=t,this.N1(),this.Bc.jB())}FV(){return Mm.Qr(this.jQ.FV()+this.l0)}Fj(){return this.l0}s2(){return this.dQ.length>0}$B(){return this.dQ}e2(){return this.i2()&&this.r0?(Mm.Ch(jm,this.$B()),jm.sort((t,s)=>this.n2(t,s)),jm):this.$B()}h2(t){Mm.Fr(t,this.e2());for(const s of this.z0)s.vj()&&s.SO()>0&&s.h2(t)}n2(t,s){const e=this.mB().o2(),i=e[0],r=e[1],n=e[2],h=t.LB(),o=s.LB(),a=h.YM()-i,l=h.KM()-r,u=h.tT()-n,c=o.YM()-i,f=o.KM()-r,d=o.tT()-n;return c*c+f*f+d*d-(a*a+l*l+u*u)}Zj(){return this.ZQ}Hj(){return this.KQ}zj(t){t=!!t,this.KQ!==t&&(this.KQ=t,this.Bc.jB())}Yj(){return this.e0}Jj(t){t=!!t,this.e0!==t&&(this.e0=t,this.Bc.jB())}Vj(t){t=!!t,this.i0!==t&&(this.i0=t,this.N1(),this.Bc.jB())}jj(){return this.i0}a2(){return!this.l$().l2()||!this.i0}i2(){return!this.a2()}u2(){return this.i2()&&this.mB().c2()}f2(){if(!this.u2())return!1;for(const t of this.z0)if(!t.f2())return!1;return!0}NM(t){this.EM!==t&&(this.EM=t,this.Bc.jB())}Xj(){return this.EM}d2(){return!this.UQ}cj(){return this.UQ}m2(t){this.UQ=t}pj(){return this.z0}g2(){return this.z0.length>0}w2(t,s=!0){s?this.z0.push(t):this.z0.unshift(t)}S2(t,s,e){let i=this.z0.indexOf(s);if(-1===i)throw new Error("cannot find layer to insert by");e&&++i,this.z0.splice(i,0,t)}v2(t){const s=this.z0.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.z0.splice(s,1)}b2(){for(const t of this.z0)if(t.M2())return!0;return!1}*gj(){for(const t of this.z0)yield*t.gj();yield this}*fj(){let t=this.cj();for(;t;)yield t,t=t.cj()}*L1(){yield this,yield*this.fj()}T2(t){for(const s of this.fj())if(s===t)return!0;return!1}C2(t){return this===t||this.QQ===t.QQ&&this.t0===t.t0&&this.a0===t.a0&&this.h0===t.h0&&this.l0===t.l0&&this.LV()===t.LV()&&this.NV()===t.NV()}G2(){return{parallaxX:this.kj(),parallaxY:this.$j(),scale:this.Rj(),scaleRate:this.Oj(),angle:this.Fj(),hasOwnScroll:this.B1(),scrollX:this.LV(),scrollY:this.NV()}}_2(t){this.t2(t.parallaxX,t.parallaxY),this.Pj(t.scale),this.Ej(t.scaleRate),this.OV(t.angle),this.Kj(t.hasOwnScroll),this.DV(t.scrollX),this.kV(t.scrollY),this.z1()}I2(t){0!==t.size&&Mm.Rh(this.dQ,t)>0&&(this.u1(),this.VB())}VB(t){this.C0=!1,this.N0=!1,t&&!t.fU().HW().TW()||(this.G0=!1)}P2(){if(!this.C0){if(this.dQ.sort(bm),this.U0())for(let t=0,s=this.dQ.length;t<s;++t){const s=this.dQ[t].LB();s.d1(t),this.L0.AQ(s.R2())}else for(let t=0,s=this.dQ.length;t<s;++t)this.dQ[t].LB().d1(t);this.C0=!0}}A2(){if(this.G0)return;const t=this.jQ.E2(this.fY()).map(t=>[...t.gj()]).flat();let s=0;for(const e of t){for(const t of e.$B())t.fU().HW().TW()&&t.LB().O2(s++);e.F2()}}F2(){this.G0=!0}D2(){return{isVisible:this.vj(),opacity:this.SO(),isInteractive:this.Mj()}}L2(t,s,e){const i=t.LB(),r=s.LB();if(i.kB()!==this||r.kB()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const n=i.NB();let h=r.NB();return n!==h+(e?1:-1)&&(Mm.Gh(this.dQ,n),n<h&&h--,e&&h++,h===this.dQ.length?this.dQ.push(t):this.dQ.splice(h,0,t),this.VB(t),!0)}N2(t,s){const e=[];let i=0,r=0,n=t.length,h=s.length;for(;i<n&&r<h;){const n=t[i],h=s[r];n.LB().uQ()<h.LB().uQ()?(e.push(n),++i):(e.push(h),++r)}for(;i<n;++i)e.push(t[i]);for(;r<h;++r)e.push(s[r]);return e}B2(t){const s=[],e=t.length;for(let i=0;i<e-1;i+=2){const e=t[i],r=t[i+1];s.push(this.N2(e,r))}return e%2==1&&s.push(t[e-1]),s}W2(t){for(;t.length>1;)t=this.B2(t);return t[0]}V2(){return this.P2(),Mm.bh(Gm),this.L0.RQ(this.tU(),Gm),Gm.length?1===Gm.length?Gm[0]:this.W2(Gm):[]}M2(){return this.vj()&&this.SO()>0&&this.j2()}j2(){if(this.s2()||!this.Hj()||this.V0.xf("beforedraw")||this.V0.xf("afterdraw"))return!0;for(const t of this.z0)if(t.j2())return!0;return!1}U2(){return this.Yj()||!this.E1()||0!==this.Xj()||this.I0.z2()}H2(){if(this.U2())return!0;for(const t of this.z0)if(t.H2())return!0;return!1}hF(){return this.o0}X1(t){if(this.jQ.lj())return 1;{const s=this.q2();return s/(s-t)}}J2(t){const s=this.Bc.uU();if(this.jQ.lj())return s;{const e=this.q2();return this.WS()/Math.abs(e-t)*s}}N1(){this.y0=!0,this.S0=!0,this.m0=!0}Y2(t){return this.y0&&(this.X2(t,this.QD,0,0,null),this.y0=!1),this.QD}Z1(t){return this.WS(t)/this.Z2()}q2(){return this.u2()?this.mB().o2()[2]:this.Z1()}K2(){if(this.u2()){const t=this.mB().o2();return[t[0],t[1],t[2]]}return this.Q2()}Q2(t=0,s=0,e=0){const i=this.Bc,r=this.mB(),n=i.t3(),h=i.s3();let o=(this.LV()-n)*this.QQ+n,a=(this.NV()-h)*this.t0+h;i.Qk()&&(o=Math.round(o),a=Math.round(a));let l=o+t,u=a+s;const c=r.lj()?this.WS(e):this.Z1(e),[f,d]=this.J1();if(.5!==f||.5!==d){const t=this.WS(e)/c;let s=(f-.5)*i.K1()/t,r=(d-.5)*i.Q1()/t;const n=this.FV();0!==n&&(Bm.set(s,r),Bm.rotate(n),s=Bm.Fa(),r=Bm.La()),l+=s,u+=r}return[l,u,c]}X2(t,s,e,i,r){const n=this.Bc,h=this.mB();if(this.u2()){Rm.S(Lm,h.o2()),Rm.S(km,h.e3()),Rm.S(Nm,h.i3());const t=n.t3(),s=n.s3(),e=km[0]-Lm[0],i=km[1]-Lm[1],r=km[2]-Lm[2];Lm[0]=(Lm[0]-t)*this.QQ+t,Lm[1]=(Lm[1]-s)*this.t0+s,Lm[2]*=Math.max(this.QQ,this.t0),km[0]=Lm[0]+e,km[1]=Lm[1]+i,km[2]=Lm[2]+r}else{const[t,s,n]=this.Q2(e,i,r);Rm.set(Lm,t,s,n),Rm.set(km,t,s,n-100);const h=this.FV();0===h?Rm.set(Nm,0,1,0):Rm.set(Nm,Math.sin(h),Math.cos(h),0)}t.rv(s,Lm,km,Nm,r||n.Q1())}r3(){this.g0=!0,this.S0=!0,this.m0=!0}n3(t){return this.g0&&(this.h3(t),this.g0=!1),this.aC}h3(t){const s=this.Bc.GB(),[e,i]=this.J1();if(this.jQ.lj())t.ev(this.aC,s.o3(),s.a3());else if(.5===e&&.5===i)Em.S(this.aC,s.l3());else{const r=s.o3(),n=s.a3();t.tv(this.aC,r/n,e,i)}}aZ(t,s=!0,e=0,i=0,r=0){s&&t.aO(this.n3(t));let n=null;0===e&&0===i&&0===r?n=this.Y2(t):(this.X2(t,Om,e,i,r),n=Om),t.pO(n)}u3(t){this.aZ(t),t.Vv(this.tT())}c3(t){let s=null;if(t.Vb()&&this.Bc.f3()){const e=this.Bc.GB().d3(this);e&&(s=e.jA(),t.bF(s))}return s}m3(t){if(t.sv()&&this.Bc.f3()){const s=2*(this.Tk()+1);t.g3(s,s+1)}}y3(t,s){if(this.V0.xf(s)){t.uv(),t.xO(null),t.IO(),t.Pb(),t.vO(1,1,1,1),t.Vv(this.tT()),t.Uv(0);const e=new Mm.Event(s);e.q_=this.Bc.GB().CB(),this.IK(e)}}zT(t,s,e){const i=this.Bc.GB(),r=this.U2();let n=null;const h=this.c3(t);if(this.m3(t),r){const s={nx:this.Bc.Zk(),Xx:!0,w3:!!t.sv()&&this.Bc.S3()};"low"===i.v3()&&(s.width=i.o3(),s.height=i.a3()),n=this.Bc.b3(s),this.o0=n,t.fF(n),this.Hj()&&t.QO(0,0,0,0)}else this.o0=s,t.fF(s);if(this.Hj()||t.Ru(this.ZQ),this.jQ.M3(t,this.o0,this.z0,r&&this.Hj()),this.m3(t),this.aZ(t),t.Vv(this.tT()),t.eF(this.i2()),this.y3(t,"beforedraw"),this.Z2()>Number.EPSILON){this.P2();const s=this.U0()&&0===this.tT()&&!this._0;this.u2()?this.T3(t):s?this.x3(t):this.C3(t,this.e2())}this.y3(t,"afterdraw"),t.Vv(0),t.Uv(0),r&&(t.eF(!1),this.G3(t,n,s,e)),h&&t.TF(h),this.o0=null}C3(t,s){const e=this.tU(),i=this.o0,r=this.mB().lj(),n=this.mB()._3();let h=null;for(let o=0,a=s.length;o<a;++o){const a=s[o];if(a===h)continue;h=a;const l=a.LB();l.vj()&&l.I3(e,n,r)&&this.P3(a,l,t,i)}}T3(t){const s=this.o0,e=this.R3(),i=Wm,r=Vm,n=this.e2();for(let h=0,o=n.length;h<o;){const a=n[h],l=a.LB();if(!l.vj()||!l.A3(e)){++h;continue}(!a.E3()||l.O3()>0)&&r.push(a);const u=a.LB().Lz();i.push(a);let c=h+1;for(;c<o;++c){const t=n[c],s=t.LB();if(s.vj()&&s.A3(e)){if(s.Lz()!==u)break;t.E3()?(s.O3()>0&&r.push(t),i.push(t)):r.push(t)}}if(1!==i.length||i[0].F3()){this.D3(t,i);for(let e=0,i=r.length;e<i;++e){const i=r[e],n=i.LB();n.L3(!0),this.P3(i,n,t,s),n.L3(!1)}}else{this.P3(a,l,t,s);for(let e=0,i=r.length;e<i;++e){const i=r[e];if(i===a)continue;const n=i.LB();n.kB().P3(i,n,t,s)}}h=c,Mm.bh(i),Mm.bh(r)}}D3(t,s){const e=this.o0;t.yF();for(let e=0,i=s.length;e<i;++e){const i=s[e],r=i.LB();r.N3(!0),this.B3(i,r,t)}t.wF();for(let i=0,r=s.length;i<r;++i){const r=s[i],n=r.LB();this.P3(r,n,t,e),n.N3(!1)}t.vF()}x3(t){const s=this.L0,e=this.$0,i=this.B0,r=this.tU();let n;e.set(s._Q(r.Qa()),s.IQ(r.tl()),s._Q(r.sl()),s.IQ(r.el())),this.N0&&e.equals(i)?n=this.k0:(n=this.V2(),this.N0=!0,i.S(e)),this.C3(t,n),n!==this.k0&&Mm.Ch(this.k0,n)}P3(t,s,e,i){s.z2()?this.W3(t,s,e,i):this.B3(t,s,e)}B3(t,s,e){const i=s.V3();e.Cv()!==i&&i.kM(),t.zT(e)}W3(t,s,e,i){this.j3(t,s,e,i,null)&&this.aZ(e)}j3(t,s,e,i,r){const n=s.bz().Mk();return n.cL(e,i,{dL:t,mL:s.Xj(),devicePixelRatio:this.Bc.U3(),time:t.z3(),gL:this.Bc.H3()*this.Z2(),yL:this.FV(),VL:s.Bz(),jL:n.lk()?null:this.q3(s),xL:r&&r.xL,CL:r&&r.CL,GL:r&&r.GL,_L:r&&r._L,IL:r&&r.IL,PL:r&&r.PL}),e.Vv(this.tT()),n.gO()}G3(t,s,e,i){const r=this.I0.O1(),n=this.Bc;0===r.length?(t.fF(e),t.uv(),i&&0===this.EM&&this.E1()?t.dF(s):(t.NM(this.EM),t.BM(this.s0),t.pF(s)),t.mF(s),n.E0(s)):this.Mk().cL(t,e,{dL:this,mL:this.Xj(),devicePixelRatio:n.U3(),gL:n.H3()*this.Z2(),yL:this.FV(),VL:this.tU(),jL:null,tD:!0})}Rj(){return this.a0}Pj(t){this.a0!==t&&(this.a0=t,this.jQ.J3(),this.N1(),this.Bc.jB())}uU(){return this.Z2()*this.Bc.uU()}vY(){return this.Z2()*this.Bc.vY()}Z2(){return(this.a0*this.jQ.EV()-1)*this.h0+1}z1(){if(!this.m0)return;this.m0=!1;const t=this.Bc.t3(),s=this.Bc.s3(),e=(this.LV()-t)*this.QQ+t,i=(this.NV()-s)*this.t0+s,r=this.Z2(),n=this.Bc.K1()/r,h=this.Bc.Q1()/r;let o=e-n/2,a=i-h/2;this.Bc.Qk()&&(o=Math.round(o),a=Math.round(a));const l=this.d0;l.set(o,a,o+n,a+h);const u=this.FV();0!==u&&(xm.S(l),xm.offset(-l.ol(),-l.al()),Cm.Zl(xm,u),Cm.Ql(xm),xm.offset(l.ol(),l.al()),l.S(xm));const c=this.FM;this.Y1(c,this.eE),this.u2()?this.Y3(c,this.p0):this.p0.S(this.eE)}Y3(t,s){const e=this.Bc.GB(),i=e.iW(),r=e.nW(),[n,h]=this.eU(0,0,t),[o,a]=this.eU(i,0,t),[l,u]=this.eU(i,r,t),[c,f]=this.eU(0,r,t);let d=Math.min(n,o,l,c),p=Math.min(h,a,u,f),m=Math.max(n,o,l,c),g=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}eU(t,s,e=0){return this.X3(t,s,e,this.vY())}hU(t,s,e=0){return this.X3(t,s,e,this.uU()*this.uW())}X3(t,s,e,i){const r=this.Bc,n=r.gM(),h=this.Z2(),o=r.K1()/h,a=r.Q1()/h,l=Dm;Am.set(l,0,0,o,a),t/=i,s=l[3]-s/i;const u=this.n3(n),c=this.Y2(n),f=Fm;return Mm.Nw.Ww(t,s,e,c,u,l,f)?[f[0],f[1]]:[NaN,NaN]}Z3(t,s){const e=this.a0,i=this.h0,r=this.QQ,n=this.t0,h=this.l0,o=this.u2();o&&this.mB().K3(!1),this.a0=1,this.h0=1,this.QQ=1,this.t0=1,this.l0=0,this.N1();const a=this.eU(t,s);return this.a0=e,this.h0=i,this.QQ=r,this.t0=n,this.l0=h,this.N1(),o&&this.mB().K3(!0),a}rU(t,s,e=0){return this.Q3(t,s,e,this.vY())}aU(t,s,e=0){return this.Q3(t,s,e,this.uU()*this.uW())}Q3(t,s,e,i){const r=this.Bc,n=r.gM(),h=this.Z2(),o=r.K1()/h,a=r.Q1()/h,l=Dm;Am.set(l,0,0,o,a);const u=this.n3(n),c=this.Y2(n),f=Fm;return Mm.Nw.Bw(t,s,e,c,u,l,f)?[f[0]*i,(l[3]-f[1])*i]:[NaN,NaN]}t4(t,s){return t*=this.uU()*this.uW(),0!==s&&(t*=this.X1(s)),t}q3(t){const s=t.Bz(),e=t.Lz(),i=t.O3(),r=e+i,n=s.Qa(),h=s.tl(),o=s.sl(),a=s.el();if(this.u2()){if(this.s4(n,h,e)||this.s4(o,h,e)||this.s4(o,a,e)||this.s4(n,a,e))return null;if(i>0&&(this.s4(n,h,r)||this.s4(o,h,r)||this.s4(o,a,r)||this.s4(n,a,r)))return null}else if(r>=this.Z1())return null;let[l,u]=this.aU(n,h,e),[c,f]=this.aU(o,a,e);if(0!==this.FV()||i>0||this.u2()){const[t,s]=this.aU(o,h,e),[d,p]=this.aU(n,a,e);if(i>0){const[e,i]=this.aU(n,h,r),[m,g]=this.aU(o,h,r),[y,w]=this.aU(o,a,r),[S,v]=this.aU(n,a,r);let b=Math.min(l,c,t,d,e,m,y,S);c=Math.max(l,c,t,d,e,m,y,S),l=b,b=Math.min(u,f,s,p,i,g,w,v),f=Math.max(u,f,s,p,i,g,w,v),u=b}else{let e=Math.min(l,c,t,d);c=Math.max(l,c,t,d),l=e,e=Math.min(u,f,s,p),f=Math.max(u,f,s,p),u=e}}return xm.set(l,u,c,f),xm}R3(){return this.S0&&(this.e4(),this.S0=!1),this.w0}e4(){const t=this.Bc.gM(),s=this.n3(t),e=this.Y2(t);this.w0.Yw(e,s)}s4(t,s,e){return this.R3().Zw(t,s,e)}i4(){return{d:this.P1(),s:this.Rj(),a:this.Fj(),v:this.yj(),i:this.Mj(),html:this.Cj(),bc:this.ZQ.toJSON(),t:this.Hj(),sx:this.u0,sy:this.c0,hosp:this.f0,px:this.kj(),py:this.$j(),c:this.OM.toJSON(),sr:this.Oj(),fx:this.I0.aT(),cg:this.T0}}r4(t){this.JQ=!!t.d,this.a0=t.s,this.l0=t.a,this.YQ=!!t.v,this.XQ=!t.hasOwnProperty("i")||t.i,this.zQ=!!t.html,this.ZQ.Sa(t.bc),this.KQ=!!t.t,t.hasOwnProperty("sx")&&(this.u0=t.sx),t.hasOwnProperty("sy")&&(this.c0=t.sy),t.hasOwnProperty("hosp")&&(this.f0=!!t.hosp),this.QQ=t.px,this.t0=t.py,this.OM.Sa(t.c),this.j0(),this.h0=t.sr,Mm.Ch(this.T0,t.cg),Mm.Ch(this.M0,this.v0);const s=new Set(this.T0);let e=0;for(let t=0,i=this.M0.length;t<i;++t)s.has(this.M0[t][2])||(this.M0[e]=this.M0[t],++e);Mm.Sh(this.M0,e),this.I0.lT(t.fx),this.F0=!0}n4(){this.f1(!1),this.VB(),this.N1(),this.r3()}jV(){return this.W0}rN(){return this.V0}IK(t){t.Mz=this.jV(),this.V0.dispatchEvent(t)}uV(t,s=!1,e=!1){if(this.dQ.includes(t))return s&&this.dQ.sort((t,s)=>(t.LB().h4()??0)-(s.LB().h4()??0)),void(e&&this.dQ.forEach((t,s)=>t.LB().d1(s)));if(t.o4()){const s=[...t.pH()];s.push(t),s.sort((t,s)=>(t.LB().h4()??0)-(s.LB().h4()??0));for(const t of s)if(t.TU())for(const e of t.xU()){if(s.includes(e))continue;const t=[...e.pH()];t.push(e),t.sort((t,s)=>(t.LB().h4()??0)-(s.LB().h4()??0)),t&&t.length&&s.splice(s.length,0,...t)}for(const t of s)t.HW().bW()&&this.n1(t,!0);e&&this.dQ.forEach((t,s)=>t.LB().d1(s))}else{if(t.HW().bW()&&this.n1(t,!0),!t.TU())return void(e&&this.dQ.forEach((t,s)=>t.LB().d1(s)));for(const s of t.xU()){const t=[...s.pH()];if(t.push(s),t.sort((t,s)=>(t.LB().h4()??0)-(s.LB().h4()??0)),t&&t.length)for(const s of t)s.HW().bW()&&this.n1(s,!0)}e&&this.dQ.forEach((t,s)=>t.LB().d1(s))}}}}{let qm=function(t,s,e,i){return t[0]===Math.fround(s)&&t[1]===Math.fround(e)&&t[2]===Math.fround(i)},Jm=function(t,s){ag!==t&&(t.u3(s),ag=t)};vec3EqualsXYZ=qm,MaybePrepareLayerDraw=Jm;const Ym=self._s,Xm=self.iz,Zm=self.assert,Km=Ym.Hr(Ym.Rect),Qm=Ym.Hr(Ym.Rect),tg=Ym.Hr(Ym.Rect),sg=Ym.Hr(Ym.xo),eg=self.ls,ig=eg.ws,rg=[],ng=[],hg=[],og=[];let ag=null;Ym.a4=class extends Ym.Ur{constructor(t,s,e){super(),this.l4=t,this.Bc=t.l$(),this.Xr=e[0],this.u4=e[1],this.c4=e[2],this.Ry=e[1],this.Ay=e[2],this.f4=!!e[3],this.d4=!!e[4],this.m4=e[5],this.g4=e[6],this.y4=e[7],this.w4=null,this.qQ=e[8],this.Aw=s,this.u0=0,this.c0=0,this.a0=1,this.l0=0,this.S4=new Set,this.v4=new Set,this.b4=new Set,this.M4=[],this.T4=[],this.x4=new Map,this.C4=new Map,this.G4=[],this._4=!1,this.I4=ig.create(),this.P4=ig.create(),this.R4=ig.create(),this.A4=[],this.E4=[],this.O4=new Map,this.F4=new Map,this.D4=-1;const i=this.Bc.GB();this.I0=Ym.Hr(Ym.P0,this,e[11]),this.Sk=Ym.Hr(Ym.Nw.aD,i.R0(),{ZF:(t,s)=>{const e=s.ck().hF();t.MO(),t.pF(e),t.mF(e),i.E0(e)},QF:t=>this._V().O0(t)}),this.F0=!0,this.L4=!1,this.o0=null,this.N4={},this.B4=new Map,this.W4=!0,this.V4=new self.GV(this),this.V0=Ym.Hr(Ym.Event.Sf);for(const t of e[9])this.A4.push(Ym.VQ.H0(this,null,t));this.j4();for(const t of this.HV())t.q0();for(const t of e[10]){const s=this.Bc.J0(t[1]);if(!s)throw new Error("missing nonworld object class");s.X0()||s.Z0(t),this.G4.push(t),this.Y0(s)}}qr(){for(const t of this.E4)t.qr();Ym.bh(this.E4),this.b4.clear(),this.w4=null,this.l4=null,this.Bc=null}l$(){return this.Bc}Rc(){return this.Xr}I1(){return this.qQ}Tk(){return this.Aw}_V(){return this.I0}Mk(){return this.A1(),this.Sk}A1(){const t="low"===this.Bc.GB().v3();if(!this.F0&&this.L4===t&&!this.Sk.tL())return;const s=this._V().O1();this.Sk.sL(s.map(t=>t.HG()),{sD:s.map(t=>t.Tk()),iD:t,oD:!0}),this.F0=!1,this.L4=t}bq(){this._V().bq(),this.F0=!0}U4(){let t=this.E4[0].Z2();for(let s=1,e=this.E4.length;s<e;++s){const e=this.E4[s];0===e.kj()&&0===e.$j()||(t=Math.min(t,e.Z2()))}return t}z4(){return.5*this.Bc.K1()/this.U4()}H4(){return.5*this.Bc.Q1()/this.U4()}W1(){return this.WV()?-1/0:this.z4()}V1(){return this.WV()?1/0:this.jg()-this.z4()}j1(){return this.WV()?-1/0:this.H4()}U1(){return this.WV()?1/0:this.Qg()-this.H4()}DV(t){const s=this.W1(),e=this.V1();t>e&&(t=e),t<s&&(t=s),this.u0!==t&&(this.u0=t,this.q4(),this.Bc.jB())}LV(){return this.u0}kV(t){const s=this.j1(),e=this.U1();t>e&&(t=e),t<s&&(t=s),this.c0!==t&&(this.c0=t,this.q4(),this.Bc.jB())}NV(){return this.c0}WV(){return this.f4}J3(){this.DV(this.LV()),this.kV(this.NV());for(const t of this.E4)t.B1()&&(t.DV(t.LV()),t.kV(t.NV()))}rj(t,s){this.m4===t&&this.g4===s||(this.m4=t,this.g4=s,this.J4()&&(this.Y4(),this.q4(),this.Bc.jB()))}X4(){return this.lj()?.5:this.m4}Z4(){return this.lj()?.5:this.g4}hj(){return[this.X4(),this.Z4()]}_3(){const t=this.X4(),s=this.Z4();return t<0||t>1||s<0||s>1}oj(){this.d4&&(this.d4=!1,this.Y4(),this.q4(),this.Bc.jB())}aj(){this.d4||(this.d4=!0,this.Y4(),this.q4(),this.Bc.jB())}lj(){return this.d4}J4(){return!this.lj()}K3(t){t=!!t,this._4!==t&&(this._4=t,this.q4(),this.Bc.jB())}c2(){return this._4}K4(t,s,e,i,r,n,h,o,a){qm(this.I4,t,s,e)&&qm(this.P4,i,r,n)&&qm(this.R4,h,o,a)||(ig.set(this.I4,t,s,e),ig.set(this.P4,i,r,n),ig.set(this.R4,h,o,a),this.Q4())}Q4(){this.q4(),this.Bc.jB()}o2(){return this.I4}e3(){return this.P4}i3(){return this.R4}EV(){return this.a0}AV(t){this.a0!==t&&(this.a0=t,this.q4(),this.J3(),this.Bc.jB())}OV(t){t=Ym.Qr(t),this.l0!==t&&(this.l0=t,this.q4(),this.Bc.jB())}FV(){return this.l0}jg(){return this.Ry}Xg(t){!isFinite(t)||t<1||(this.Ry=t)}Qg(){return this.Ay}Ug(t){!isFinite(t)||t<1||(this.Ay=t)}t5(){return this.w4}_1(){return this.A4}*HV(){for(const t of this.A4)yield*t.gj()}zV(){return this.E4}s5(){return this.E4.length}kB(t){return"number"==typeof t?this.BB(t):this.b1(t.toString())}BB(t){return t=Ym.Kr(Math.floor(t),0,this.E4.length-1),this.E4[t]}b1(t){return this.O4.get(t.toLowerCase())||null}e5(t){return!!this.b1(t)}i5(t){return this.F4.get(t)||null}Y4(){for(const t of this.E4)t.r3()}q4(){for(const t of this.E4)t.N1()}XV(t,s,e){if(this.e5(t))throw new Error(`layer name '${t}' already in use`);if(!s&&e<2)throw new Error("invalid insert position");const i=e>=2?s:s.cj(),r=Ym.Hr(Ym.VQ,this,i,{name:t,EQ:Math.floor(1e15*Math.random()),OQ:!0});this.r5(r,s,e),this.l$().jB(),this.C1()}KV(t,s,e){if(!s&&e<2)throw new Error("invalid insert position");t===s&&e<2||(this.n5(t),this.r5(t,s,e),this.l$().jB(),this.C1())}tj(t){if(this.n5(t)){const s=this.Bc.aN();s.cV(!0),t.qr(),s.cV(!1),this.l$().jB(),this.C1()}}ej(){const t=new Set;for(const s of this.HV())s.P1()&&!s.R1()&&t.add(s);if(0===t.size)return;const s=this.Bc.aN();s.cV(!0);for(const s of t)this.n5(s),s.qr();s.cV(!1),this.l$().jB(),this.C1()}r5(t,s,e){if(e>=2)if(s){if(s===t||s.T2(t))throw new Error(`cannot move layer '${t.Rc()}' to sub-layer of itself`);s.w2(t,2===e),t.m2(s)}else 2===e?this.A4.push(t):this.A4.unshift(t),t.m2(null);else{const i=s.cj();if(i){if(s.T2(t))throw new Error(`cannot move layer '${t.Rc()}' to sub-layer of itself`);i.S2(t,s,0===e),t.m2(i)}else{let i=this.A4.indexOf(s);if(-1===i)throw new Error("cannot find layer to insert by");0===e&&++i,this.A4.splice(i,0,t),t.m2(null)}}}n5(t){const s=t.cj();if(s)return s.v2(t),!0;if(this.A4.length>1){const s=this.A4.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.A4.splice(s,1),!0}return!1}j4(){this.E4=[...this.HV()],this.O4.clear(),this.F4.clear();for(let t=0,s=this.E4.length;t<s;++t){const s=this.E4[t];s.M1(t),this.O4.set(s.Rc().toLowerCase(),s),this.F4.set(s.I1(),s)}}h5(){let t=0;for(const s of this.A4){for(const e of s.gj())e.T1(t);s.Cj()&&t++}}o5(){return this.A4.at(-1).fY()+1}async C1(){this.j4(),this.h5(),this.D4=this.o5()}a5(){return this.D4}l5(){this.D4=-1}E2(t){const s=[];for(const e of this.A4){const i=e.fY();if(i===t)s.push(e);else if(i>t)break}return s}G2(){return{scrollX:this.LV(),scrollY:this.NV(),scale:this.EV(),angle:this.FV(),vpX:this.X4(),vpY:this.Z4()}}_2(t){this.DV(t.scrollX),this.kV(t.scrollY),this.AV(t.scale),this.OV(t.angle),this.rj(t.vpX,t.vpY)}u5(){let t=this.A4.filter(t=>t.M2())[0];for(;t;){if(!t.Hj())return sg.ko(t.Zj()),sg.Lo(1),sg;if(t.U2())return sg.Po(0,0,0,0),sg;t=t.pj().filter(t=>t.M2())[0]}return sg.Po(0,0,0,0),sg}s1(){return this.W4}c5(){return[...this.S4]}Y0(t){if(t.TU())for(const s of t.d5().f5())this.S4.add(s);else this.S4.add(t)}p5(){return[...this.v4]}m5(t,s){if(t===this||!s)return Promise.resolve();t&&(Ym.mo(this.v4,t.v4),t.v4.clear());const e=[];for(const t of this.S4)this.v4.has(t)||(e.push(t.g5(s)),this.v4.add(t));return Promise.all(e)}async y5(t){if(t.v1())throw new Error("cannot load textures for family");const s=this.Bc.gM();if(!s||s.mA()||this.v4.has(t))return;this.v4.add(t);const e=t.g5(s);this.w5(e),await e,t.S5(),this.Bc.jB()}w5(t){this.b4.add(t),t.then(()=>this.b4.delete(t)).catch(()=>this.b4.delete(t))}v5(){return Promise.all([...this.b4])}b5(t){if(t.v1()||t.oV()>0)throw new Error("cannot unload textures");const s=this.Bc.gM();s&&this.v4.has(t)&&(this.v4.delete(t),t.M5(s))}T5(t,s){if(t!==this&&s)for(const s of this.v4)s.WQ()||t.S4.has(s)||(s.M5(),this.v4.delete(s))}x5(){this.v4.clear()}async C5(t){const s=this.Bc,e=this.l4,i=s.aN();this.y4&&(this.w4=i.G5(this.y4),this.w4._5()),e.I5(this),this.Ry=this.u4,this.Ay=this.c4,this.u0=s.Jk()/2,this.c0=s.Xk()/2,this.J3(),this.Y4(),this.q4(),this.h5(),await this.Bc.GB().P5(this.o5(),!0),this.R5(t),this.Bc.A5(!0),this.E5(),this.W4||this.O5(),this.F5(this.M4),this.F5(this.T4),this.D5(),e.L5(),s.mV(),this.Bc.A5(!1);const r=this.Bc.k5();if(await Promise.all(r),Ym.bh(r),!s.N5()){for(const t of this.M4)t.B5();for(const t of this.T4)t.W5(this.x4,this.C4);for(const[t,s]of Object.entries(this.N4)){const e=this.Bc.QY(parseInt(t,10));e&&!e.v1()&&e.e1()&&Ym.bh(s)}for(const t of this.M4)t.V5();for(const t of this.T4)t.V5();for(const t of this.M4)t.SH()||t.j5();for(const t of this.T4)t.SH()||t.j5()}Ym.bh(this.M4),Ym.bh(this.T4),this.x4.clear(),this.C4.clear(),await Promise.all([...this.S4].map(t=>t.U5(this.Bc.gM()))),t&&(s.Sf().dispatchEvent(new Ym.Event("beforefirstlayoutstart")),await s.z5(new Ym.Event("beforeprojectstart"))),await this.H5(new Ym.Event("beforeanylayoutstart")),s.Sf().dispatchEvent(new Ym.Event("beforelayoutstart")),await this.z5(new Ym.Event("beforelayoutstart")),s.N5()||await s.KB(Ym.e$.s$.t$.q5,null,null),s.Sf().dispatchEvent(new Ym.Event("afterlayoutstart")),await this.z5(new Ym.Event("afterlayoutstart")),await this.H5(new Ym.Event("afteranylayoutstart")),t&&(s.Sf().dispatchEvent(new Ym.Event("afterfirstlayoutstart")),await s.z5(new Ym.Event("afterprojectstart"))),i.J5(e),await this.v5(),this.W4=!1}R5(t){for(const t of this.Bc.S1())if(!t.v1()&&t.bW())for(const s of t.iV()){const t=s.LB(),e=t.kB(),i=Ym.Kr(e.Tk(),0,this.E4.length-1),r=this.E4[i];t.WB(r,!0),r.h1(s)}if(!t)for(const t of this.E4)t.f1(!1)}E5(){for(const t of this.E4)t.t1(this.M4),t.m1()}O5(){let t=!1;for(const[s,e]of Object.entries(this.N4)){const i=this.Bc.QY(parseInt(s,10));if(i&&!i.v1()&&i.e1())for(const s of e){let e=null;if(i.bW()&&(e=s.hasOwnProperty("instJson")?this.i5(s.instJson.w.l):this.i5(s.w.l),!e))continue;const r=this.Bc.i1(i,e,!1,0,0,!0);s.hasOwnProperty("instJson")?r.lT(s.instJson):r.lT(s),t=!0,this.T4.push(r),s.hasOwnProperty("instJson")&&(this.x4.set(r,s),this.C4.set(s.index,r))}}for(const t of this.E4)t.f1(!0),t.VB();t&&(this.Bc.mV(),this.Bc.Y5())}F5(t){for(const s of t){if(!s.TU())continue;const e=s.LB(),i=s._U();for(const r of s.fU().d5().xV()){if(r===s.fU())continue;const n=r.iV();if(n.length>i)s.X5(n[i]);else{let i;i=e?this.Bc.i1(r,e.kB(),!0,e.YM(),e.KM(),!0):this.Bc.i1(r,null,!0,0,0,!0),this.Bc.mV(),r.Z5(),s.X5(i),t.push(i)}}}}D5(){for(const t of this.G4)this.Bc.J0(t[1]).TU()||this.Bc.i1(t,null,!0)}K5(){const t=[],s=this.G4;let e=0;for(let i=0,r=s.length;i<r;++i){const r=s[i],n=this.Bc.J0(r[1]);n.WQ()?n.TU()&&n.d5().Q5()||t.push(this.Bc.i1(r,null,!0)):(s[e]=r,++e)}Ym.Sh(s,e),this.Bc.mV(),this.F5(t)}w1(t,s,e,i,r,n,h){if(e)return e.w1(t,s,r,n,i,h);{const e=[];for(const o of this.E4)e.push(o.w1(t,s,r,n,i,h));return e.flat()}}async t6(){const t=this.l4;this.Bc.N5()||(await this.H5(new Ym.Event("beforeanylayoutend")),await this.z5(new Ym.Event("beforelayoutend")),await this.Bc.KB(Ym.e$.s$.t$.s6,null,null),await this.z5(new Ym.Event("afterlayoutend")),await this.H5(new Ym.Event("afteranylayoutend"))),t.e6(!0),this.Bc.aN().i6(),this.W4||this.r6();for(const t of this.E4)t.g1();for(const t of this.Bc.S1())if(!(t.WQ()||t.bW()||t.HW().SW()||t.v1())){for(const s of t.iV())this.Bc.wU(s);this.Bc.mV()}t.e6(!1),t.cB()===this&&t.I5(null)}n6(t,s){const e=t.fU().I1().toString();this.N4.hasOwnProperty(e)||(this.N4[e]=[]);const i=this.N4[e],r={index:s,instJson:t.aT(),sceneGraphJson:{children:[]}};i.push(r),this.B4.set(t,r)}h6(t){const s=this.B4.get(t);for(const e of t.o6()){const t=this.B4.get(e);t&&s.sceneGraphJson.children.push({index:t.index,flags:Ym.l6.a6(e.LB())})}}r6(){this.B4.clear();let t=0;for(const s of this.E4){s.P2();for(const e of s.$B()){const s=e.fU();!s.WQ()&&s.e1()&&(this.n6(e,t),t++)}}for(const t of this.E4)for(const s of t.$B()){const t=s.fU();!t.WQ()&&t.e1()&&this.h6(s)}this.B4.clear()}u6(){this.N4={},this.W4=!0}hF(){return this.o0}U2(){const t=this.Bc,s=t.gM().Vb();return"low"===t.GB().v3()||s&&t.S3()||this.I0.z2()||s&&t.l2()}c6(t){const s=this.Bc.GB();if(this.U2()){t.fF(null),t.QO(0,0,0,0);const e={nx:this.Bc.Zk(),Xx:t.sv()||this.Bc.S3()||this.I0.z2(),w3:!!t.sv()&&this.Bc.S3()};"low"===s.v3()&&(e.width=s.o3(),e.height=s.a3()),this.o0=this.Bc.b3(e)}else this.o0=null}f6(t){this.Bc.d6(t)&&(t.eF(!1),t.fF(null),t.uv(),t.dF(this.o0))}p6(t){this.U2()&&(t.eF(!1),this.m6(t,this.o0))}g6(t){t.fF(this.o0),t.Ru(this.u5()),this.Bc.l2()&&t.sF();const s=this.E2(0);this.M3(t,this.o0,s,!0),t.sv()&&t.g3(0,1),this.p6(t),this.o0=null}y6(t,s){let e=null;this.Bc.d6(t)&&(e=this.o0),t.fF(e),t.QO(0,0,0,0),this.Bc.l2()&&t.sF();const i=this.E2(s);this.M3(t,e,i,!0),this.f6(t),t.Db(),this.Bc.GB().w6(s)}M3(t,s,e,i){const r=e.filter(t=>t.M2());for(let e=0,n=r.length;e<n;){const h=r[e];if(h.f2()&&!h.H2()){rg.push(h);for(let t=e+1;t<n;++t){const s=r[t];if(!s.f2()||s.H2())break;rg.push(r[t])}if(rg.length>=2||1===rg.length&&rg[0].b2()){this.S6(t,s,rg),e+=rg.length,Ym.bh(rg);continue}Ym.bh(rg)}h.zT(t,s,i&&0===e),++e}}m6(t,s){const e=this.I0.O1(),i=this.Bc;0===e.length?(t.fF(null),t.uv(),t.dF(s),t.mF(s),i.E0(s)):(tg.set(0,0,i.K1(),i.Q1()),this.Mk().cL(t,null,{dL:this,mL:3,devicePixelRatio:this.Bc.U3(),gL:this.Bc.H3()*this.EV(),yL:this.FV(),VL:tg,jL:null,tD:!0}))}S6(t,s,e){const i=e[0],r=i.c3(t);i.m3(t),e[0].Hj()||(sg.ko(e[0].Zj()),sg.Lo(1),t.Ru(sg)),t.eF(!0);const n=ng,h=hg,o=og;for(const s of e)s.P2(),s.h2(n),s.y3(t,"beforedraw");for(let e=0,i=n.length;e<i;){const r=n[e],a=r.LB(),l=a.kB();if(!a.vj()||!a.A3(l.R3())){++e;continue}(!r.E3()||a.O3()>0)&&o.push(r);const u=r.LB().Lz();h.push(r);let c=e+1;for(;c<i;++c){const t=n[c],s=t.LB();if(s.vj()&&s.A3(s.kB().R3())){if(s.Lz()!==u)break;t.E3()?(s.O3()>0&&o.push(t),h.push(t)):o.push(t)}}if(1!==h.length||h[0].F3()){this.v6(t,s,h);for(let e=0,i=o.length;e<i;++e){const i=o[e],r=i.LB(),n=r.kB();r.L3(!0),Jm(n,t),n.P3(i,r,t,s),r.L3(!1)}}else{Jm(l,t),l.P3(r,a,t,s);for(let e=0,i=o.length;e<i;++e){const i=o[e];if(i===r)continue;const n=i.LB(),h=n.kB();Jm(h,t),h.P3(i,n,t,s)}}e=c,Ym.bh(h),Ym.bh(o)}for(const s of e)s.y3(t,"afterdraw");r&&t.TF(r),Ym.bh(n),ag=null}v6(t,s,e){t.yF();for(let s=0,i=e.length;s<i;++s){const i=e[s],r=i.LB(),n=r.kB();r.N3(!0),Jm(n,t),n.B3(i,r,t)}t.wF();for(let i=0,r=e.length;i<r;++i){const r=e[i],n=r.LB(),h=n.kB();Jm(h,t),h.P3(r,n,t,s),n.N3(!1)}t.vF()}i4(){const t={sx:this.LV(),sy:this.NV(),s:this.EV(),a:this.FV(),w:this.jg(),h:this.Qg(),ortho:this.lj(),vpX:this.X4(),vpY:this.Z4(),fv:this.W4,persist:this.N4,fx:this.I0.aT(),layers:{},dynamicLayers:[]};for(const s of this.E4)if(s.P1()){const e=s.cj();t.dynamicLayers.push({sid:s.I1(),name:s.Rc(),parentSid:e?e.I1():null,siblingIndex:s.G1(),data:s.i4()})}else t.layers[s.I1().toString()]=s.i4();return t}r4(t){this.u0=t.sx,this.c0=t.sy,this.a0=t.s,this.l0=t.a,this.Ry=t.w,this.Ay=t.h,this.d4=!!t.ortho,t.hasOwnProperty("vpX")&&(this.m4=t.vpX),t.hasOwnProperty("vpY")&&(this.g4=t.vpY),this.W4=!!t.fv,this.N4=t.persist,this.I0.lT(t.fx),this.F0=!0;for(const[s,e]of Object.entries(t.layers)){const t=parseInt(s,10),i=this.i5(t);i&&i.r4(e)}if(t.hasOwnProperty("dynamicLayers")){this.ej(),this.Bc.mV();const s=new Map,e=t.dynamicLayers;for(let t=e.length-1;t>=0;--t){const i=e[t],r=i.sid,n=i.name,h=i.parentSid,o=i.siblingIndex,a=i.data;if(this.j4(),this.e5(n)||this.i5(r))continue;let l,u;if(null===h)l=null,u=this.A4;else{if(l=this.i5(h),!l)continue;u=l.pj()}const c=Ym.Hr(Ym.VQ,this,l,{name:n,EQ:r,OQ:!0});u.push(c);let f=s.get(u);f||(f=[],s.set(u,f)),f.push({Mz:c,b6:o}),c.r4(a)}for(const[t,e]of s){e.sort((t,s)=>t.b6-s.b6);for(const s of e){const e=s.Mz,i=s.b6;let r=t.indexOf(e);t.splice(r,1),t.splice(i,0,e)}}}this.C1(),this.Y4(),this.q4()}fB(){return this.V4}rN(){return this.V0}IK(t){t.layout=this.fB();const s=this.Bc,e=s.ez()&&!s.aN().dV();e&&Xm.M6(),this.V0.dispatchEvent(t),e&&Xm.T6()}z5(t){return t.layout=this.fB(),this.V0._f(t)}H5(t){return t.layout=this.fB(),this.Bc.z5(t)}x6(){this.C6(this.A4)}C6(t,s=0){const e=t.slice(0);e.reverse();for(const t of e)console.log(`${"\t".repeat(s)}- ${t.Rc()}`),this.C6(t.pj(),s+1)}}}{const lg=self._s;lg.G6=class extends lg.Ur{#s;#e=[];#f=new Map;#a=new Map;#i=null;#t=[];#n=null;#h=0;#d=null;constructor(t){super(),this.#s=t}qr(){this.#s=null,this.#i=null,this.#n=null,this.#d=null,lg.bh(this.#e),this.#f.clear(),this.#a.clear(),lg.bh(this.#t)}UC(t){const s=lg.Hr(lg.a4,this,this.#e.length,t);this.#e.push(s),this.#f.set(s.Rc().toLowerCase(),s),this.#a.set(s.I1(),s)}l$(){return this.#s}_6(t){this.#n=t}I6(){if(this.#n)return this.#n;if(this.#e.length)return this.#e[0];throw new Error("no first layout")}P6(t){return this.#f.get(t.toLowerCase())||null}R6(t){return this.#a.get(t)||null}A6(t){return t=lg.Kr(Math.floor(t),0,this.#e.length-1),this.#e[t]}mB(t){return"number"==typeof t?this.A6(t):this.P6(t.toString())}yB(){return this.#e}I5(t){this.#i=t}cB(){return this.#i}E6(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}O6(t){const s=this.#t.indexOf(t);if(-1===s)throw new Error("layout not running");this.#t.splice(s,1)}*F6(){this.#i&&(yield this.#i),this.#t.length&&(yield*this.#t)}D6(t){return this.#i===t||this.#t.includes(t)}e6(t){if(t)this.#h++;else{if(this.#h<=0)throw new Error("already unset");this.#h--}}pV(){return this.#h>0}vB(t){this.#d=t}L5(){this.#d=null}SB(){return!!this.#d}L6(){return this.#d}k6(){const t=this.cB();t&&t.Y4()}N6(){const t=this.cB();t&&t.q4()}}}{const ug=self._s,cg=new RegExp("<(.+?)>","g");ug.B6=class extends ug.Ur{constructor(t){super(),this.Bc=t,this.W6=ug.Hr(ug.V6),this.j6=null,this.U6=[],this.z6=new Map,this.H6=new Map,this.q6=new Map,this.J6=[],this.Y6=[],this.X6=[],this.Z6=!1,this.K6=!1,this.Q6=!1,this.t8=()=>this.s8(),this.e8=()=>this.i8(),this.r8=()=>this.n8(),this.h8=()=>this.o8(),this.a8=t=>this.l8(t.pq),this.u8=t=>this.c8(),this.f8=t=>this.d8(),this.p8=t=>this.m8(),this.g8=[],this.y8=0}qr(){this.w8(),this.t8=null,this.e8=null,this.r8=null,this.h8=null,this.a8=null,this.f8=null;for(const t of this.U6)t.nJ(),t.qr();ug.bh(this.U6),this.U6=null,this.W6.qr(),this.W6=null,ug.bh(this.J6),this.J6=null,ug.bh(this.Y6),this.Y6=null,ug.bh(this.X6),this.X6=null,this.z6.clear(),this.z6=null,this.H6.clear(),this.H6=null,this.q6.clear(),this.q6=null,ug.bh(this.g8),this.g8=null,this.Bc=null}S8(){const t=this.Bc.Sf();t.addEventListener("pretick",this.t8),t.addEventListener("tick2",this.e8),t.addEventListener("beforelayoutchange",this.r8),t.addEventListener("layoutchange",this.h8),t.addEventListener("instancedestroy",this.a8),t.addEventListener("beforeload",this.u8),t.addEventListener("afterload",this.f8),t.addEventListener("afterlayoutstart",this.p8)}w8(){const t=this.Bc.Sf();t.removeEventListener("pretick",this.t8),t.removeEventListener("tick2",this.e8),t.removeEventListener("beforelayoutchange",this.r8),t.removeEventListener("layoutchange",this.h8),t.removeEventListener("instancedestroy",this.a8),t.removeEventListener("beforeload",this.u8),t.removeEventListener("afterload",this.f8),t.removeEventListener("afterlayoutstart",this.p8)}UC(t){this.W6.$u(t);const s=ug.b8.v8(t,this);this.$u(s),this.M8(s),this.q6.set(s.Rc(),0)}T8(t){const s=this.x8(),e=t.PU(),i=s.Hs(e),r=ug.b8.T8(`${e}:${this.q6.get(e)}`,i,this);return this.C8(e),this.$u(r),r}C8(t){this.q6.set(t,this.q6.get(t)+1)}G8(){for(const t of this.U6){if(t._8())continue;const s=t.PU();this.C8(s)}}I8(){for(const t of this.q6.keys())this.q6.set(t,0)}$u(t){this.U6.push(t),this.z6.set(t.Rc().toLowerCase(),t)}Kf(t){t.P8(),t._8()||(ug._h(this.U6,t),ug._h(this.J6,t),ug._h(this.Y6,t),ug._h(this.X6,t),this.z6.delete(t.Rc().toLowerCase()),this.A8(t),t.iJ()||t.qr())}JU(t){this.Bc.JU(t,this.j6,null)}l$(){return this.Bc}x8(){return this.W6}E8(t){this.j6=t}O8(){return this.j6}*F8(){for(const t of this.U6)yield t}*D8(){for(const t of this.Y6)yield t}L8(t,s){this.H6.has(t)||this.H6.set(t,new Set),this.H6.get(t).add(s)}M8(t){for(const s of t.k8())this.L8(s,t)}A8(t){for(const[s,e]of this.H6.entries())e.has(t)&&(e.delete(t),0===e.size&&this.H6.delete(s))}N8(t){if(this.H6.has(t))return this.H6.get(t)}B8(t,s){if(s)for(const e of this.U6)if(s.every(t=>e.W8(t.pq,t.trackId))&&e.Rc().includes(t.Rc()))return e}V8(t){return this.z6.get(t.toLowerCase())||null}j8(t){for(const s of this.J6)if(s.Rc()===t)return s;for(const s of this.Y6)if(s.Rc()===t)return s;return null}*U8(t){if(cg.test(t)){let s;cg.lastIndex=0;const e=new Set;do{if(s=cg.exec(t),s){const t=s[1].split(",");for(const s of t)e.add(s)}}while(s);for(const t of e.values()){const s=this.V8(t);s&&(yield s)}e.clear()}else{const s=this.V8(t);s&&(yield s)}}*z8(t){for(const s of this.U6)s.oJ(t)&&(yield s)}H8(t){this.J6.includes(t)||this.J6.push(t),this.q8()}J8(t){ug._h(this.Y6,t),this.Y8()}X8(t){this.Y6.includes(t)?(t.Z8(!0),t.K8(!1),t.Q8(!1)):(t.Z8(!1),t.K8(!0),t.Q8(!1),this.J6.includes(t)||this.J6.push(t)),this.q8()}t7(t){t.Z8(!1),t.K8(!1),t.s7(),ug._h(this.J6,t),this.Y8()}e7(t){t.Z8(!1),t.K8(!1),this.Y6.includes(t)&&(t.Q8(!0),this.X6.push(t),ug._h(this.Y6,t)),this.J6.includes(t)&&t.Q8(!0)}i7(t){t.Z8(!1),t.K8(!1),t.Q8(!1),t.mJ(1),ug._h(this.Y6,t)}r7(t){this.e7(t),t.s7()}s8(){const t=this.l$();if(t.N5())return;if(!this.Z6)return;if(this.K6)return;let s=0;for(t.ez()&&(s=performance.now()),this.Q6=!0;this.J6.length;){const t=this.J6.pop();t.n7()?(t.h7(),this.X6.push(t)):(t.o7(),this.Y6.push(t)),0!==t.a7()&&(this.y8=1)}const e=this.Bc.l7(),i=this.Bc.u7(),r=this.Bc.WN();for(let t=this.Y6.length-1;t>=0;t--){const s=this.Y6[t];s&&s.c7(e,r,i)}this.Q6=!1,t.ez()&&globalThis.iz.f7(performance.now()-s),0!==this.y8&&t.jB()}i8(){const t=this.l$();if(t.N5())return;if(!this.Z6)return;if(this.K6)return;let s,e=0;t.ez()&&(e=performance.now());for(let t=0,e=this.X6.length;t<e;t++){const e=this.X6[t];s||(s=new Set),e.P8(),this.d7(e),s.add(e)}if(s){ug.Rh(this.X6,s),this.y8=0;for(let t=0,s=this.Y6.length;t<s;t++)if(0!==this.Y6[t].a7()){this.y8=1;break}}this.Y8(),t.ez()&&globalThis.iz.f7(performance.now()-e)}d7(t){t.iJ()||t.p7()&&t.m7()&&t.g7()&&t.y7()}q8(){this.Z6||(this.Z6=!0)}Y8(){this.X6.length||this.Y6.length||this.J6.length||this.Q6||(this.Z6=!1)}n8(){for(this.K6=!0;this.J6.length;)this.t7(this.J6.pop());const t=new Set;for(const s of this.Y6)s.n8()&&(s.P8(),t.add(s));ug.Rh(this.Y6,t),t.clear();for(const s of this.X6)s.n8()&&(s.P8(),t.add(s));ug.Rh(this.X6,t),this.Y8();for(const t of this.U6)t.w7()}o8(){this.K6=!1}l8(t){const s=t.fU(),e=this.N8(s);if(e)if(this.Bc.N5())this.g8.push(t);else for(const t of e)t._8()||(t.iJ()?this.Kf(t):t.p7()||(this.d7(t),this.Kf(t)))}c8(){for(const t of this.J6.map(t=>t))this.d7(t),this.Kf(t);for(const t of this.Y6.map(t=>t))this.d7(t),this.Kf(t)}d8(){for(const t of this.g8)this.l8(t);ug.bh(this.g8);for(const t of this.U6)t.d8()}m8(){const t=this.Bc.pB().cB();if(t)for(const s of this.U6){const e=s.S7();e&&t.Rc()===e&&this.X8(s)}}i4(){return{timelinesJson:this.v7(),scheduledTimelinesJson:this.b7(),playingTimelinesJson:this.M7(),markedForRemovalTimelinesJson:this.T7(),hasRuntimeListeners:this.Z6,changingLayout:this.K6,isTickingTimelines:this.Q6}}r4(t){t&&(this.I8(),this.x7(t.timelinesJson),this.C7(t.scheduledTimelinesJson),this.G7(t.playingTimelinesJson),this._7(t.markedForRemovalTimelinesJson),this.Z6=!t.hasRuntimeListeners,this.K6=!!t.changingLayout,this.Q6=!!t.isTickingTimelines,this.G8(),this.q8(),this.Y8())}v7(){return this.U6.map(t=>t.i4())}x7(t){for(const s of t){let t=this.V8(s.name);if(t)t.r4(s);else{const e=this.I7(s);if(!e)continue;const i=this.V8(e);t=this.T8(i),t.r4(s)}t.P7()||this.Kf(t)}}I7(t){const s=t.name.split(":");return s&&2===s.length?s[0]:null}b7(){return this.R7(this.J6)}C7(t){this.A7(t,this.J6)}M7(){return this.R7(this.Y6)}G7(t){this.A7(t,this.Y6)}T7(){return this.R7(this.X6)}_7(t){this.A7(t,this.X6)}E7(t,s){if(!s)return!1;for(const e of s)if(e===t.Rc())return!0;return!1}R7(t){return t.map(t=>t.Rc())}A7(t,s){const e=new Set;for(const i of s)this.E7(i,t)||e.add(i);if(ug.Rh(s,e),t){const e=t=>s=>s.Rc()===t;for(const i of t){const t=this.V8(i);t&&(s.find(e(i))||s.push(t))}}}}}{const fg=self._s,dg=100,pg=.01,mg=25,gg=20,yg=5,wg=[0,0],Sg=[0,0],vg=[0,0],bg=[0,0,0,0,0],Mg=new Array(4),Tg=[{x:0,y:0,t:0,bt:0},{x:0,y:0,t:0,bt:0},{x:0,y:0,t:0,bt:0}],xg={x:0,y:0,t:0,bt:0};fg.O7=class{constructor(t,s){this.F7=!1,this.D7=t,this.L7=[];let e=null;if(e=s?this.D7.k7(s):fg.$h(this.D7.N7()),!e)return;const i=e.DJ("offsetX"),r=e.DJ("offsetY");if(!i||!r)return;this.B7=i,this.W7=r;const n=i.V7(),h=r.V7();for(let t=1,s=Math.min(n.length,h.length);t<s;++t){const s=n[t],e=(s.j7(),s.U7()),i=h[t],r=(i.j7(),i.U7());e&&"cubic-bezier"===e.z7()&&r&&"cubic-bezier"===r.z7()?this.L7.push(fg.Hr(fg.H7,e,r,s,i,this.L7.length)):(e&&"line"===e.z7()&&r&&r.z7(),this.L7.push(fg.Hr(fg.q7,s,i,this.L7.length)))}this.F7=!0}qr(){for(const t of this.L7)t.qr();fg.bh(this.L7),this.L7=null,this.D7=null,this.B7=null,this.W7=null}J7(){return this.F7}Y7(){return this.L7}X7(t){const s="relative"===this.B7.Z7()?t.YM():0,e="relative"===this.W7.Z7()?t.KM():0;for(const t of this.L7)t.X7(s,e)}Bw(t,s,e){let i=NaN,r=this.L7.length;for(let e=0;e<r;e++){const r=this.L7[e];if("cubic-bezier"===r.YG()){const e=r.Bw(t,s);(isNaN(i)||e[3]<i)&&(i=e[3],vg[0]=e[2],vg[1]=r.Tk())}}return vg}K7(t,s,e){const i=e.Q7;fg.Ze(i[0])||(i[0]=0),fg.Ze(i[1])||(i[1]=1);let r=NaN,n=this.L7.length;for(let e=0;e<n;e++){const n=this.L7[e];if("cubic-bezier"===n.YG()){const e=n.t9(t,s,i);(isNaN(r)||e[3]<r)&&(r=e[3],vg[0]=e[2],vg[1]=n.Tk())}}return vg}s9(t,s){return this.L7[s].s9(t)}e9(t,s){return this.L7[s].e9(t)}},fg.H7=class{constructor(t,s,e,i,r){this.Aw=r;const n=t.i9("cubic-bezier"),h=e.i9("cubic-bezier"),o=s.i9("cubic-bezier"),a=i.i9("cubic-bezier");this.r9=t.n9(),this.h9=s.n9(),this.o9=t.n9()+n.a9(),this.l9=s.n9()+o.a9(),this.u9=e.n9()+h.c9(),this.f9=i.n9()+a.c9(),this.d9=e.n9(),this.p9=i.n9(),this.m9=0,this.g9=0,this.y9=0,this.w9=0,this.S9=0,this.v9=0,this.b9=0,this.M9=0,this.T9=0,this.x9=0,this.C9=0,this.G9=0,this._9=0,this.I9=0,this.P9=0,this.R9=0,this.A9=0,this.E9=0,this.O9=0,this.F9=0,this.D9=NaN,this.F7=!1,this.L9=100,this.k9=new Array(this.L9+1),this.k9[0]=0,this.N9=0,this.B9=[],this.W9=[];for(let t=0;t<100;t++)this.W9.push({x:0,y:0,t:0,bt:0});this.V9()}qr(){fg.bh(this.k9),this.k9=null,fg.bh(this.B9),this.B9=null,fg.bh(this.W9),this.W9=null}YG(){return"cubic-bezier"}Tk(){return this.Aw}j9(){return Math.floor(this.N9/25)}U9(){return 1/this.j9()}X7(t,s){this.z9=t,this.H9=s,this.k9=new Array(this.L9+1),this.k9[0]=0,this.V9(),this.m9=this.r9+this.z9,this.g9=this.h9+this.H9,this.y9=this.o9+this.z9,this.w9=this.l9+this.H9,this.S9=this.u9+this.z9,this.v9=this.f9+this.H9,this.b9=this.d9+this.z9,this.M9=this.p9+this.H9,this.T9=3*(this.y9-this.m9),this.x9=3*(this.w9-this.g9),this.C9=3*(this.S9-this.y9),this.G9=3*(this.v9-this.w9),this._9=3*(this.b9-this.S9),this.I9=3*(this.M9-this.v9),this.P9=3*(this.y9-this.m9),this.R9=3*(this.m9+this.S9-2*this.y9),this.A9=this.b9-this.m9+3*(this.y9-this.S9),this.E9=3*(this.w9-this.g9),this.O9=3*(this.g9+this.v9-2*this.w9),this.F9=this.M9-this.g9+3*(this.w9-this.v9)}Map(t){if(!this.F7)return NaN;const s=this.q9(t);return Sg[0]=this.J9(s),Sg[1]=this.Y9(s),Sg}Bw(t,s){const e=this.X9(100),i=this.Z9(t,s,e),r=this.K9(t,s,e,i);return bg[0]=r.x,bg[1]=r.y,bg[2]=r.t,bg[3]=r.bt,bg}t9(t,s,e){const i=this.X9(100),r=this.Q9(t,s,i,e),n=this.K9(t,s,i,r);return bg[0]=n.x,bg[1]=n.y,bg[2]=n.t,bg[3]=n.bt,bg}s9(t){const s=1-t,e=s*s,i=2*s*t,r=t*t,n=e*this.T9+i*this.C9+r*this._9,h=e*this.x9+i*this.G9+r*this.I9,o=fg.en(n,h);return wg[0]=n/o,wg[1]=h/o,wg}e9(t){const s=1-t,e=s*s,i=2*s*t,r=t*t,n=e*this.T9+i*this.C9+r*this._9,h=e*this.x9+i*this.G9+r*this.I9;return Math.atan2(h,n)}q9(t){if(!this.F7)return;let s=t*this.k9[this.L9],e=0,i=this.L9,r=0;for(;e<i;)r=e+((i-e)/2|0),this.k9[r]<s?e=r+1:i=r;this.k9[r]>s&&r--;const n=this.k9[r];return n===s?r/this.L9:(r+(s-n)/(this.k9[r+1]-n))/this.L9}J9(t){return this.F7?self.ju.hc("cubicbezier")(t,this.r9+this.z9,this.o9+this.z9,this.u9+this.z9,this.d9+this.z9):NaN}Y9(t){return this.F7?self.ju.hc("cubicbezier")(t,this.h9+this.H9,this.l9+this.H9,this.f9+this.H9,this.p9+this.H9):NaN}X9(t){if(t=t||100,this.B9.length>=t)return this.B9;this.B9=new Array(t),t++;for(let s=0;s<t-1;s++){const e=s/(t-1),i=e**2,r=e**3,n=this.P9*e,h=this.R9*i,o=this.A9*r,a=this.E9*e,l=this.O9*i,u=this.F9*r,c=this.m9+n+h+o,f=this.g9+a+l+u;this.W9[s].x=c,this.W9[s].y=f,this.W9[s].t=e,this.W9[s].bt=0,this.B9[s]=this.W9[s]}return this.B9}Z9(t,s,e,i=null,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.D9))for(let i=0;i<100;i++){const h=e[i],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<r&&(r=h.bt,n=i)}else{for(let i=this.D9;i<this.D9+5&&!(i>=e.length);i++){const h=e[i],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<r&&(r=h.bt,n=i)}for(let i=this.D9;i>this.D9-5&&!(i<0);i--){const h=e[i],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<r&&(r=h.bt,n=i)}}return this.D9=n,n}Q9(t,s,e,i,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.D9))for(let h=0;h<100;h++){const o=e[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=i[0]&&o.t<=i[1]&&o.bt<r&&(r=o.bt,n=h)}else{for(let h=this.D9;h<this.D9+5&&!(h>=e.length);h++){const o=e[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=i[0]&&o.t<=i[1]&&o.bt<r&&(r=o.bt,n=h)}for(let h=this.D9;h>this.D9-5&&!(h<0);h--){const o=e[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=i[0]&&o.t<=i[1]&&o.bt<r&&(r=o.bt,n=h)}}return this.D9=n,n}K9(t,s,e,i){let r=e[i],n=1,h=Number.MAX_SAFE_INTEGER;t:do{const n=e.length;let o=0===i?0:i-1,a=i===n-1?n-1:i+1,l=e[o].t,u=(e[a].t-l)/4;if(u<.001)break;Mg[0]=e[o];for(let e=1;e<=2;e++){const n=l+e*u,o=n**2,a=n**3,c=this.P9*n,f=this.R9*o,d=this.A9*a,p=this.E9*n,m=this.O9*o,g=this.F9*a,y=this.m9+c+f+d,w=this.g9+p+m+g,S=y-t,v=w-s,b=S*S+v*v;if(b<h){h=b,i=e,xg.x=y,xg.y=w,xg.t=n,xg.bt=b,r=xg;break t}const M=Tg[e-1];M.x=y,M.y=w,M.t=n,M.bt=b,Mg[e]=M}Mg[3]=e[a],e=Mg}while(n++<20);return r}V9(){this.F7=!0;let t=this.J9(0),s=this.Y9(0),e=0;for(let i=1;i<=this.L9;i++){const r=this.J9(.01*i),n=this.Y9(.01*i),h=t-r,o=s-n;e+=fg.en(h,o),this.k9[i]=e,t=r,s=n}this.N9=e}},fg.q7=class{constructor(t,s,e){this.Aw=e,this.ttt=t.n9(),this.stt=s.n9(),this.z9=0,this.H9=0}qr(){}YG(){return"line"}Tk(){return this.Aw}X7(t,s){this.z9=t,this.H9=s}YM(){return this.ttt+this.z9}KM(){return this.stt+this.H9}}}{const Cg=self._s,Gg=0,_g=1;Cg.b8=class extends Cg.Ur{constructor(t,s,e){super(),this.Bc=e.l$(),this.ett=e,this.itt=s,this.Xr=t,this.ntt=[],this.htt=0,this.ott=null,this.att=0,this.ltt(),this.utt=null,this.ctt=null,this.ftt=0,this.dtt=0,this.ptt=1,this.mtt=0,this.gtt=-1,this.ytt=1,this.wtt=!1,this.Stt=!1,this.vtt=!1,this.btt=!0,this.Mtt=!1,this.Ttt=!1,this.xtt=-1,this.Ctt=!1,this.Gtt=!1,this._tt=!1,this.Itt=!1,this.Ptt=NaN,this.Rtt=[""],this.Att="",this.Ett=!1,this.y8=0,this.Ott=0,this.Ftt=null,this.Dtt=null}static v8(t,s){const e=s.x8(),i=e.Ltt(),r=e.Hs(t[i]),n=Cg.Hr(Cg.b8,t[i],r,s);return n.ktt(!0),n}static T8(t,s,e){return Cg.Hr(Cg.b8,t,s,e)}qr(){if(this.iJ())return;const t=this.Bc.Sf();this.ett.t7(this),this.ett.r7(this);for(const t of this.ntt)t.qr();Cg.bh(this.ntt),this.ntt=null,this.Bc=null,this.ett=null,this.itt=null,this.Mtt=!0,this.utt=null,this.ctt=null,this.Ntt(t)}Ntt(t){const s=Cg.Hr(Cg.Event,"timelinestatereleased");s.Btt=this,t.dispatchEvent(s)}YG(){return 0}ltt(){for(const t of this.itt.Wtt().$tt())this.htt=this.ntt.push(Cg.Vtt.UC(this,t))}jtt(){return this.ett}l$(){return this.Bc}N7(){return this.ntt}Utt(t,s,e,i){if(!this.Ott)return;let r;for(let n=0;n<this.ntt.length;n++){let h=this.ntt[n];if(t!==h.PJ())continue;const o=h.DJ(e);o&&s.constructor===o.ztt().constructor&&o.Z7()===i.Z7()&&(r||(r=[]),r.push(o))}return r}P7(){return!!this.ntt.length}k7(t){for(const s of this.ntt)if(Cg.Ki(s.OJ(),t))return s;return null}Htt(t){for(const s of this.ntt)if(!s.qtt()&&Cg.Ki(s.Rc(),t))return s;return null}rX(t){this.Xr=t}Rc(){return this.Xr}Jtt(){return this.itt}PU(){return this.itt.Rc()}uJ(){return this.itt.uJ()}lJ(t){this.itt.lJ(t)}Ytt(){return this.itt.Ytt()}Xtt(t){this.itt.Xtt(t)}Ztt(){return this.itt.Ztt()}Ktt(t){this.itt.Ktt(t)}Z7(){return this.itt.Z7()}Qtt(t){this.itt.Z7(t)}IJ(t){for(const s of this.N7())s.IJ(t)}fJ(){return this.itt.fJ()}cJ(t){return this.itt.cJ(t)}pJ(){return this.itt.pJ()}dJ(t){return this.itt.dJ(t)}Pq(){return this.itt.Pq()}tst(t){return this.itt.tst(t)}mJ(t){return this.ptt=t}gJ(){return this.ptt}S7(){return this.itt.S7()}sst(){return this.itt.sst()}est(){return this.itt.est()}ist(){return this.mtt}rst(){return!this.IsPlaying()||this.ptt>0}wJ(){return this.utt||(this.utt=new Promise(t=>{this.ctt=t})),this.utt}s7(){this.utt&&(this.ctt(),this.utt=null,this.ctt=null)}nst(t){this.Rtt=Cg.b8.hst(t),this.Ett=!0}yJ(){return this.Rtt}ost(){return this.Ett&&(this.Att=this.Rtt.join(" ")),this.Ett=!1,this.Att}oJ(t){if(!this.Rtt)return!1;if(!this.Rtt.length)return!1;const s=Cg.b8.hst(t);return!!s&&!!s.length&&s.every(Cg.b8.ast,this)}lst(){Cg.e$.ust&&this.constructor===Cg.b8&&(Cg.e$.ust.t$.cst(this),this.ett.JU(Cg.e$.ust.t$.fst),this.ett.JU(Cg.e$.ust.t$.dst),this.ett.JU(Cg.e$.ust.t$.pst),this.ett.JU(Cg.e$.ust.t$.mst),Cg.e$.ust.t$.gst())}yst(){this.xtt=this.Bc.kN()}y7(){this._tt||(this._tt=!0,Cg.e$.ust&&this.constructor===Cg.b8&&(Cg.e$.ust.t$.cst(this),this.ett.JU(Cg.e$.ust.t$.wst),this.ett.JU(Cg.e$.ust.t$.Sst),this.ett.JU(Cg.e$.ust.t$.vst),this.ett.JU(Cg.e$.ust.t$.bst),Cg.e$.ust.t$.gst()))}Z8(t){this.wtt=t}Mst(){return this.xtt===this.Bc.kN()}IsPlaying(t=!1){return!!this.Mst()||!(!this.Tst()||t)||this.wtt}xst(){return this.IsPlaying(!0)}bJ(){return this.Cst()}Cst(){return!(this.iJ()||this.Tst()||this.xst()||this.m7())}K8(t){this.Stt=t}Tst(){return this.Stt}Gst(t){this.btt=t;const s=this.fJ(),e=this.pJ();if(s||e){if(s&&!e);else if(!s&&e){const t=this.YF();1===this.mtt&&(t<=0||t>=this.uJ())&&(this.btt=!0)}}else{const t=this.YF();(t<=0||t>=this.uJ())&&(this.btt=!0)}}m7(){return this.btt}iJ(){return this.Mtt}Q8(t){this.Ttt=t}n7(){return this.Ttt}_st(t){this.Ctt=t}Ist(){return this.Ctt}ktt(t){this.Gtt=!!t}_8(){return this.Gtt}g7(){return this.vtt}YF(){return this.ftt}aJ(t){const s=this.YF();this.Pst(t),this.Gst(!1),this.m7()||this._st(!0),(this.xst()||this.Tst()||!this.vtt)&&(this.xst()||this.Tst()||this.vtt?this.xst()?this.nJ():this.Tst()&&(this.ett.t7(this),this.Rst()):this.Rst()),this.Ast(),this.Est(this.YF(),!1,!0,!0,s),this.Ost(),this.y8&&this.l$().jB(),this.Fst()}Pst(t){Cg.Ze(t)||(t=this.uJ()),t<0?this.ftt=0:t>=this.uJ()?this.ftt=this.uJ():this.ftt=t}Dst(t){Cg.Ze(t)||(t=this.uJ()),t<0?this.ftt=0:t>=this.uJ()?this.ftt=this.uJ():this.ftt=t;for(const t of this.ntt)t.Lst()}Fst(){Cg.e$.ust&&this.constructor===Cg.b8&&(Cg.e$.ust.t$.cst(this),this.ett.JU(Cg.e$.ust.t$.kst),this.ett.JU(Cg.e$.ust.t$.Nst),this.ett.JU(Cg.e$.ust.t$.Bst),Cg.e$.ust.t$.gst())}$st(){if(this.fJ())return!0;if(this.pJ()&&1===this.mtt){if(this.rst()){if(this.YF()>=this.uJ())return!1}else if(this.YF()<=0)return!1}else if(!this.fJ()&&!this.pJ())if(this.rst()){if(this.YF()>=this.uJ())return!1}else if(this.YF()<=0)return!1;return!0}hJ(){this.iJ()||this.$st()&&this.Play(!0)}Play(t=!1){return!this.iJ()&&!this.Tst()&&(this.xst()&&this.Mst()?this.Wst():!this.xst()&&!!(this.m7()||t||this.Ist())&&this.Vst())}Wst(){return this._st(!1),this.ett.J8(this),this.ett.X8(this),this.wJ(),!0}Vst(){return this._st(!1),this.ett.X8(this),this.wJ(),!0}nJ(t=!1){this.iJ()||(this.Gst(t),this.ett.e7(this),this.m7()&&this.s7())}$f(t=!0,s=!1){if(this.iJ())return;if(!this.xst()&&this.Tst())return this.ett.t7(this);if(this.m7())return;this.nJ(!0),this.rst()?this.Pst(0):this.Pst(this.uJ());const e=this.YF();this.Ast(),s?this.jst(e):this.Est(e,!1,!1,!0),t&&this.Fst(),this.Ost(),this.y8&&t&&this.l$().jB()}Ust(){this.$f(!1,!0)}jst(t){this.Est(t,!1,!1,!0,NaN,!1,!0)}n8(){return!!this.iJ()||!(!this.l$().N5()&&this.zst())&&(this.ett.i7(this),this.l$().N5()||this.Ust(),!0)}Rst(){this.o7(!0)}h7(){this.o7(!1,!0),this.Z8(!1),this.K8(!1)}o7(t=!1,s=!1){if(!this.n7()||s)if(t){this._tt=!1,this.vtt=!0,this.Itt=!0,this.Ast();for(const t of this.ntt)t.o7();this.Ost()}else if(this.Z8(!0),this.K8(!1),this.lst(),this.m7()){this.xtt=-1,0!==this.mtt&&(this.ptt=Math.abs(this.ptt)),this.mtt=0,this.gtt=-1,this.ytt=1,this.btt=!1,this._tt=!1,this.vtt=!0,this.Itt=!0,this.rst()?this.Pst(0):this.Pst(this.uJ()),this.Ast();for(const t of this.ntt)t.o7();this.Ost()}else{-1!==this.gtt&&(this.mtt=this.gtt),this.Itt=!0,this._tt=!1,this.Ast();for(const t of this.ntt)t.Hst();this.Ost()}}a7(){return this.y8}Ast(){this.Ott=0;for(const t of this.ntt)t.kA()&&(this.Ott=1)}Ost(){this.y8=0;for(const t of this.ntt)t.qst(),0===this.y8&&1===t.a7()&&(this.y8=1),this.ott||1!==t.Jst()||(this.ott||(this.ott=[]),this.att=this.ott.push(t))}c7(t,s,e){if(this.est()){if(0===t&&0===this.Ptt)return;this.Ptt=t,t=e}else{if(0===e&&0===this.Ptt)return;this.Ptt=e,t=e,s=1}const i=this.ftt+this.dtt,r=i+t*s*this.ptt,n=this.itt.Yst;r<0?(this.ftt=0,this.dtt=-r):r>=n?(this.ftt=n,this.dtt=this.ftt-r):(this.ftt=r,this.dtt=0);let h=!1,o=!1;const a=this.fJ(),l=this.pJ();let u;a||l?a&&!l?this.ptt>0?this.ftt>=n&&(this.Dst(0),o=!0):this.ftt<=0&&(this.Dst(n),o=!0):!a&&l?this.ptt>0?this.ftt>=n&&(this.Pst(n),this.mJ(-1*this.gJ()),o=!0,1===this.mtt?this.ytt<this.Pq()?(this.ytt++,this.mtt=0):h=!0:0===this.mtt&&(this.mtt=1)):this.ftt<=0&&(this.Pst(0),this.mJ(-1*this.gJ()),o=!0,1===this.mtt?this.ytt<this.Pq()?(this.ytt++,this.mtt=0):h=!0:0===this.mtt&&(this.mtt=1)):a&&l&&(this.ptt>0?this.ftt>=n&&(this.Pst(n),this.mJ(-1*this.gJ()),o=!0,this.mtt++,Cg.wrap(this.mtt,0,2)):this.ftt<=0&&(this.Pst(0),this.mJ(-1*this.gJ()),o=!0,this.mtt++,Cg.wrap(this.mtt,0,2))):this.ptt>0?this.ftt>=n&&(this.ytt<this.Pq()?(this.ytt++,this.Dst(0),o=!0):(this.Pst(n),h=!0)):this.ftt<=0&&(this.ytt<this.Pq()?(this.ytt++,this.Dst(n),o=!0):(this.Pst(0),h=!0));const c=this.htt;if(h){for(u=0;u<c;u++)this.ntt[u].Xst();return this.nJ(!0),void this.yst()}const f=this.att;for(u=0;u<f;u++)this.ott[u].Zst();if(1===this.Ott)for(u=0;u<c;u++){const t=this.ntt[u],s=t.Kst();this.ftt-s<0&&i-s>0?(this.ftt=s<0?0:s>=n?n:s,t.vc(s,!0,!1,o,this.Itt,!1)):t.vc(this.ftt,!0,!1,o,this.Itt,!1)}else for(u=0;u<c;u++)this.ntt[u].vc(this.ftt,!0,!1,o,this.Itt,!1);if(!this.IsPlaying()&&this.Ftt){const t=this.Ftt.YF()+this.Ftt.tet().Qst().Kst(),s=this.ftt-t;this.ftt-=s,0!==this.dtt&&(this.dtt-=s),this.Ftt=null}for(u=0;u<f;u++)this.ott[u].eet();this.Itt&&(this.Itt=!1)}iet(t){this.Ftt=t}ret(){return this.Ftt}Est(t,s=!1,e=!1,i=!1,r=NaN,n=!1,h=!1){for(const t of this.ntt)t.Zst();for(const n of this.ntt){let o=t;if("number"==typeof r&&!isNaN(r)){const t=this.YF()-n.Kst(),s=r-n.Kst();t<0&&s>0&&(o=n.Kst(),this.Pst(o))}n.vc(o,s,e,i,this.Itt,h)}for(const t of this.ntt)t.eet();this.Itt&&n&&(this.Itt=!1)}net(){const t=this.itt.Wtt().het(),s=Cg.Vtt.UC(this,t);return this.htt=this.ntt.push(s),s}P8(){if(!this.iJ())for(const t of this.ntt)t.oet()}w7(){for(const t of this.ntt)t.w7()}aet(){for(const t of this.ntt)t.let()}uet(t,s,e){if(s){if("number"==typeof e&&e>=0){const t=this.ntt[e];if(!t)return;return t.cet(s),void this.ett.L8(s.fU(),this)}for(const e of this.ntt)if(e.qtt()){if(t){if(e.OJ()!==t)continue;e.cet(s),this.ett.L8(s.fU(),this);break}if(!e.fet()){e.cet(s),this.ett.L8(s.fU(),this);break}}}}W8(t,s){for(const e of this.ntt)if(e.qtt())if(s){if(s===e.OJ()&&t===e.PJ())return!0}else if(t===e.PJ())return!0;return!1}p7(){return this.ntt.some(t=>!t.qtt()||t.det())}zst(){return this.ntt.some(t=>{if(t.qtt()){if(!t.det())return!1;const s=t.fU();return!!s&&s.WQ()}return!1})}DJ(t){for(const s of this.N7())for(const e of s.pet())if(e.met()===t)return e}yet(t){for(const s of this.ntt)if(t===s.PJ())return s;return null}wet(t){let s=t?t.split(" "):[];const e=new Set(s.map(t=>t.toLowerCase().trim()));s=[...e.values()];for(const t of this.N7())for(const e of t.vet())if(s.every(t=>e.bet(t)))return e}k8(){const t=[];for(const s of this.N7())t.push(s.fU());return t.filter(t=>t)}d8(){for(const t of this.N7())t.d8()}i4(){return{tracksJson:this.Met(),name:this.Xr,playheadTime:this.YF(),playbackRate:this.ptt,pingPongState:this.mtt,resumePingPongState:this.gtt,currentRepeatCount:this.ytt,isPlaying:this.wtt,isScheduled:this.Stt,initialStateSet:this.vtt,finishedTriggers:this._tt,complete:this.btt,released:this.Mtt,markedForRemoval:this.Ttt,completedTick:this.xtt,implicitPause:this.Ctt,isTemplate:this.Gtt,tags:this.Rtt.join(" "),stringTags:this.Att,tagsChanged:this.Ett,firstTick:this.Itt}}r4(t){t&&(this.Tet(t.tracksJson),this.Xr=t.name,this.ftt=t.playheadTime,this.ptt=t.playbackRate,this.mtt=t.pingPongState,this.gtt=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this.ytt=t.currentRepeatCount,this.wtt=!!t.isPlaying,this.Stt=!!t.isScheduled,this.vtt=!!t.initialStateSet,this._tt=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.btt=!!t.complete,this.Mtt=!!t.released,this.Ttt=!!t.markedForRemoval,this.xtt=t.completedTick,this.Ctt=!!t.implicitPause,this.Gtt=!!t.isTemplate,this.Rtt=t.tags.split(" "),this.Att=t.stringTags,this.Ett=!!t.tagsChanged,this.Itt=!!t.firstTick)}Met(){return this.ntt.map(t=>t.i4())}Tet(t){this.aet(),t.forEach((t,s)=>{this.ntt[s].r4(t)}),this.ntt.filter(t=>t.det())}static ast(t){const s=this.yJ();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static hst(t){if(Cg.Ti(t))return t.slice(0);if(Cg.hi(t))return t.split(" ");throw new Error("invalid tags")}xet(){return this.Dtt||(this.Dtt=Cg.Hr(self.TJ,this)),this.Dtt}}}{const Ig=self._s,Pg=0,Rg=1,Ag=2;Ig.Vtt=class extends Ig.Ur{constructor(t,s){super(),this.D7=t,this.Cet=s,this.Get=s.Wtt(),this._et=NaN,this.Iet=NaN,this.Pet=null,this.Ret=null,this.Aet=!1,this.AA=s.Kst()>0,this.Eet=!1,this.Oet=!1,this.Fet=NaN,this.Det=null,this.Let=this.Cet.tet().ket(),this.Net=[],this.Bet(),this.$et=0,this.y8=0,this.Wet=0}static UC(t,s){return Ig.Hr(Ig.Vtt,t,s)}qr(){this.Let=null;for(const t of this.Net)t.qr();Ig.bh(this.Net),this.Net=null,this.D7=null,this.Pet=null,this.Ret=null,this.Cet=null,this.Det=null}Bet(){for(const t of this.Cet.jet().Vet())this.Net.push(Ig.Uet.UC(this,t))}oet(){for(const t of this.Net)t.oet()}w7(){for(const t of this.Net)t.w7();this.Pet=null,this.Ret=null}zet(){return this.D7}l$(){return this.D7.l$()}vet(){return this.Let||(this.Let=this.Cet.tet().ket()),this.Let}pet(){return this.Net}DJ(t){for(let s=0;s<this.Net.length;s++){const e=this.Net[s];if(e.met()===t)return e}}Het(){this.Pet||this.PJ()}qet(){return!!this.Pet&&!this.Pet.SY()}det(){if(!this.qtt())return!1;const t=this.Jet(),s=this.l$().RB(t);return!!s&&!s.SY()}fU(){if(!this.qtt())return;const t=this.Yet();return-1!==t?this.l$().J0(t):void 0}Xet(){return this.D7.N7().indexOf(this)}let(){this.Pet=null,this._et=NaN,this.Ret=null,this.Iet=NaN,this.Aet=!0}fet(){return!!this.Pet}PJ(){if(this.Aet)return;if(this.Pet&&this.qet())return this.Pet;const t=this.Jet();return this.Pet=this.l$().RB(t),this.Pet}cet(t){if(this.Aet=!1,this.Pet!==t){this.w7(),this.Pet=t,this.Iet=t.fU().Tk(),this._et=t.CU(),this.Ret=t.LB();for(const s of this.Zet()){const e=s.Ket,i=s.Qet;switch(e.tit()){case"instance-variable":{i.sit();const e=t.fU(),r=e.eit(s.name),n=e.iit(r),h=e.rit(r);n===s.name&&h===s.type&&i.nit(r);break}case"behavior":{const e=s.uq,r=this.fU(),n=t.fU(),h=i.fq(n);if(e&&h){const t=e.Rc();r.hit(t),n.hit(t),i.sit(),i.oit(h.I1())}break}}}}}*Zet(){for(const t of this.Net){const s=t.ztt(),e=this.fU(),i={Ket:t,Qet:s};switch(t.tit()){case"world-instance":i.ait=t.met();break;case"instance-variable":{const t=s.sit();i.name=e.iit(t),i.type=e.rit(t);break}case"effect":{const t=e._V(),r=s.lit(t);i.uit=r;break}case"behavior":{const t=s.fq(e);i.uq=t;break}case"plugin":i.zW=e.HW()}yield i}}LB(){if(this.Ret&&this.qet())return this.Ret;const t=this.PJ();return t&&(this.Ret=t.LB()),this.Ret}Qst(){return this.Cet}Jet(){return isNaN(this._et)?this.Cet.Jet():this._et}cit(t){this.Cet.cit(t)}Ztt(){return this.Cet.Ztt()}Ktt(t){this.Cet.Ktt(t)}Z7(){return this.Cet.Z7()}OJ(){return this.Cet.OJ()}Kst(){return this.Cet.Kst()}fit(){return this.Cet.fit()}dit(t){this.Cet.dit(t)}Qtt(t){this.Cet.Qtt(t)}IJ(t){for(const s of this.vet())s.IJ(t);for(const s of this.pet())s.IJ(t)}pit(){return this.Cet.pit()}mit(t){this.Cet.mit(t)}Yet(){return isNaN(this.Iet)?this.Cet.Yet():this.Iet}git(t){this.Cet.git(t)}yit(t){this.Cet.yit(t)}wit(){const t=this.PJ();return t&&t.eq().Sit()?t.eq().wit():this.Cet.wit()}vit(t){this.Cet.vit(t)}bit(){const t=this.PJ();return t&&t.eq().Sit()?t.eq().bit():this.Cet.bit()}YG(){return this.Cet.YG()}Rc(){return this.Cet.Rc()}qtt(){return 0===this.YG()}Mit(){return 1===this.YG()}Tit(){return 2===this.YG()}xit(){return this.$et}a7(){return this.y8}Jst(){return this.Wet}kA(){return this.AA}Lst(){for(const t of this.Net)t.Lst()}o7(){if(this.Het(),!this.qet()&&this.qtt())return;const t=this.zet().rst(),s=t?0:this.fit();for(const t of this.Net)t.o7(s),0===this.$et&&1===t.xit()&&(this.$et=1),0===this.y8&&1===t.a7()&&(this.y8=1);this.Wet=0,this.Net.some(t=>t.Jst())&&(this.Wet=1),this.Det=t?this.Cit(s):this.Git(s),this.Eet=!1,this.Oet=!1,this.vc(s),this._it(this.Det)}Hst(){if(this.Het(),!this.qet()&&this.qtt())return;const t=this.D7.rst(),s=this.D7.YF()-this.Kst();this.Det=t?this.Cit(s):this.Git(s);for(const t of this.Net)t.Hst(s)}Xst(){if(!this.zet().m7()&&(this.Het(),(this.qet()||!this.qtt())&&!this.AA)){const t=this.D7.YF();t>=this.Kst()+this.fit()?this.vc(this.fit(),!0,!1,!0,!1,!1,!0):t<=0&&this.vc(0,!0,!1,!0,!1,!1,!0)}}qst(){for(let t=0,s=this.Net.length;t<s;t++){const s=this.Net[t];s.qst(),0===this.$et&&1===s.xit()&&(this.$et=1),0===this.y8&&1===s.a7()&&(this.y8=1)}}Zst(){const t=this.Net.length;for(let s=0;s<t;s++)this.Net[s].Zst()}vc(t,s=!1,e=!1,i=!1,r=!1,n=!1,h=!1){this.Pet||this.PJ();const o=this.Pet&&!this.Pet.SY(),a=0===this.Cet.qc;if((o||!a)&&!(n&&a&&this.fU().WQ()||(t-=this.Kst())<0)){this.Iit(t,s),this.Pit(t,s,r),!this.zet().IsPlaying()&&this.zet().ret()&&(t=this.zet().ret().YF());for(let s=0,r=this.Net.length;s<r;s++)this.Net[s].vc(t,e,i,h);this.Rit(t,s),0!==this.$et&&(this.Ret||(this.Ret=this.Pet.LB()),this.Ret&&this.Ret.Tz())}}eet(){const t=this.Net.length;for(let s=0;s<t;s++)this.Net[s].eet()}Iit(t,s){if(s&&this.AA&&!this.Eet){if(this.zet().rst()){if(t<0)return}else if(t>this.fit())return;for(const t of this.Net)t.o7();this.Eet=!0}}Rit(t,s){if(s&&this.AA&&!this.Oet)if(this.zet().rst()){if(t>=this.fit()){for(const t of this.Net)t.vc(this.fit(),!1,!0);this.Oet=!0}}else if(t<=0){for(const t of this.Net)t.vc(0,!1,!0);this.Oet=!0}}Pit(t,s,e){if(e)return;if(!s)return;if(!Ig.e$.ust)return;const i=this.zet();if(i.rst()){const s=this.Det.j7(),e=this.Det.YF(),r=s?s.YF():i.uJ();(t<=e||t>=r)&&(this.Det=this.Get.Ait(t,this.Cet),s&&this.Eit(this.Det))}else{if(!this.Get.Oit(t,this.Cet))return;this.Det||(this.Det=this.Get.Oit(t,this.Cet));const s=this.Det.Fit(),e=this.Det.YF(),i=s?s.YF():0;(t>=e||t<=i)&&(this.Det=this.Get.Oit(t,this.Cet),this.Det&&this.Eit(this.Det))}}Cit(t){return this.Get.Dit(t,this.Cet)||this.Get.Ait(t,this.Cet)}Git(t){return this.Get.Dit(t,this.Cet)||this.Get.Oit(t,this.Cet)}Eit(t,s=!1){if(!Ig.e$.ust)return;const e=this.zet(),i=e.jtt();Ig.e$.ust.t$.cst(e),Ig.e$.ust.t$.Lit(t),i.JU(Ig.e$.ust.t$.kit),i.JU(Ig.e$.ust.t$.Eit),e.IsPlaying()||s||e.iet(t),Ig.e$.ust.t$.gst(e),Ig.e$.ust.t$.Nit(t)}_it(t){this.Eit(t,!0)}Bit(){return this.Cet.tet().$it()}Wit(){const t=this.Cet.jet().Vit(),s=Ig.Uet.UC(this,t);return this.Net.push(s),s}jit(t){this.Cet.tet().Uit(t)}zit(t){for(const s of this.Net)s.zit(t)}Hit(){for(const t of this.Net)t.Hit()}qit(){if(this.Het(),this.qet()||!this.qtt())for(const t of this.Net)t.qit()}Jit(){if(this.Het(),!this.qet()&&this.qtt())return;let t=!1;for(const s of this.Net){const e=s.Jit();!t&&e&&(t=!0)}if(t){const t=this.Bit();t.aJ(this.zet().YF()),t.IJ("noease"),t.mit(!0),t.nst("")}}d8(){isNaN(this.Fet)||this.Yit(this.Fet),this.Fet=NaN}i4(){const t=this.PJ(),s=t?t.CU():this.Jet();return{propertyTracksJson:this.Xit(),lastKeyframeDataItemJson:this.Zit(),initialStateOfNestedSet:this.Eet,endStateOfNestedSet:this.Oet,instanceUid:s,cleared:this.Aet}}r4(t){if(t){this.Kit(t.propertyTracksJson),this.Qit(t.lastKeyframeDataItemJson),this.Fet=t.instanceUid,this.Eet=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Eet=t.initialStateOfNestedSet),this.Oet=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Oet=t.endStateOfNestedSet),this.Aet=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.Net)0===this.$et&&1===t.xit()&&(this.$et=1),0===this.y8&&1===t.a7()&&(this.y8=1);this.Wet=0,this.Net.some(t=>t.Jst())&&(this.Wet=1)}}Zit(){return this.Cet.tet().trt(this.Det)}Xit(){return this.Net.map(t=>t.i4())}Kit(t){t.forEach((t,s)=>{this.Net[s].r4(t)})}Yit(t){if(!Ig.Ze(t))return;const s=this.l$().RB(t);s&&this.zet().uet(this.Cet.OJ(),s,this.Xet())}Qit(t){const s=this.Cet.tet();this.Det=s.srt(t)}}}{const Eg=self._s;Eg.Uet=class extends Eg.Ur{constructor(t,s){super(),this.ert=t,this.irt=s,this.rrt=s.jet(),this.$et=0,this.y8=0,this.Wet=0,this.nrt=this.ztt(),this.hrt=this.irt.art().ort(),this.lrt=null,this.urt=null}static UC(t,s){return Eg.Hr(Eg.Uet,t,s)}qr(){this.ert=null,this.nrt&&(this.nrt.qr(),this.nrt=null),this.hrt=null,this.irt=null,this.rrt=null}xit(){return this.$et}a7(){return this.y8}Jst(){return this.Wet}crt(){return!!this.urt}frt(t){this.urt=t}drt(){return this.urt}prt(){return this.ert}mrt(){return this.irt}jet(){return this.rrt}zet(){return this.ert.zet()}l$(){return this.ert.l$()}PJ(){return this.ert.PJ()}ztt(){if(this.nrt)return this.nrt;let t;switch(this.irt.tit()){case"behavior":t=new Eg.Uet.grt(this);break;case"effect":t=new Eg.Uet.yrt(this),this.y8=1;break;case"instance-variable":t=new Eg.Uet.wrt(this);break;case"plugin":t=new Eg.Uet.Srt(this),this.y8=1;break;case"world-instance":t=new Eg.Uet.vrt(this),this.y8=1,this.$et=1;break;case"value":t=new Eg.Uet.brt(this);break;case"audio":t=new Eg.Uet.Mrt(this)}return this.nrt=t,this.nrt}tit(){return this.irt.tit()}Trt(t){this.irt.Trt(t)}xrt(){return this.irt.Crt()}Grt(t){this.irt._rt(t)}FJ(){return this.ztt().Irt()}met(){return this.irt.Prt()}Rrt(t){this.irt.Art(t)}Ert(){return this.irt.YG()}Ort(t){this.irt.Frt(t)}Drt(){return this.jet().Lrt(this.irt).YG()}krt(){return this.irt.krt()}Nrt(t){this.irt.Nrt(t)}Brt(){return this.irt.Brt()}$rt(t){this.irt.$rt(t)}pit(){return this.irt.pit()}mit(t){this.irt.mit(t)}Ztt(){return this.irt.Ztt()}Ktt(t){this.irt.Ktt(t)}Z7(){return this.irt.Z7()}Qtt(t){this.irt.Qtt(t)}IJ(t){for(const s of this.Wrt())s.IJ(t)}Vrt(){return this.irt.Vrt()}Wrt(){return this.hrt||(this.hrt=this.irt.art().ort()),this.hrt}V7(){return this.irt.art().V7()}jrt(t){return this.rrt.jrt(t,this.irt)}Urt(t){return this.rrt.Urt(t,this.irt)}zrt(t){let s,e=this.rrt.jrt(t,this.irt);return e?s=this.rrt.Hrt(t,this.irt):(e=this.rrt.Urt(t,this.irt),s=this.rrt.qrt(t,this.irt)),{start:e,end:s}}*Jrt(){for(const t of this.Wrt())yield t.n9()}*Yrt(){for(const t of this.Wrt())yield t.YF()}oet(){this.ztt().oet()}w7(){this.ztt().w7()}Xrt(){return this.ztt().Xrt()}Lst(){this.ztt().Lst()}o7(t){this.ztt().o7(),this.lrt=this.Zrt(t),this.qst()}Hst(t){this.ztt().Hst(),this.lrt=this.Zrt(t)}qst(){const t=this.prt();if(this.Wet=0,t.qtt()){const s=this.zet(),e=t.PJ(),i=this.ztt(),r=this.met();if(i.Krt()){const t=s.Utt(e,i,r,this);t&&t.length&&(this.Wet=1)}else this.Wet=0}}Zrt(t){const s=this.zet();return this.rrt.jrt(t,this.irt)||(s.rst()?this.rrt.Urt(t,this.irt):this.rrt.qrt(t,this.irt))}Zst(){this.nrt.Zst()}vc(t,s=!1,e=!1,i=!1){let r,n,h=!1;if(s)r=this.rrt.Urt(t,this.irt);else{if(this.lrt){const s=this.zet(),e=this.lrt.j7(),i=this.lrt.YF(),r=e?e.YF():s.uJ();(t<=i||t>=r)&&(this.lrt=this.rrt.Urt(t,this.irt),h=!0)}else this.lrt=this.rrt.Urt(t,this.irt),h=!0;r=this.lrt}r&&(n=r.j7()),this.nrt.vc(t,r,n,s,e,i,h)}Qrt(t){if(this.lrt){const s=this.zet(),e=this.lrt.j7(),i=this.lrt.YF(),r=e?e.YF():s.uJ();(t<=i||t>=r)&&(this.lrt=this.rrt.Urt(t,this.irt))}else this.lrt=this.rrt.Urt(t,this.irt);const s=this.lrt,e=s.j7();return this.nrt.Qrt(t,s,e)}tnt(t,s,e){return this.nrt.Qrt(t,s,e)}eet(){this.nrt.eet()}static snt(t,s){const e=s.mrt();return s.rrt.Urt(t,e)}static ent(t,s){const e=s.mrt();return s.rrt.qrt(t,e)}int(){const t=this.irt.art().rnt();return this.lrt=null,t}zit(t){this.lrt=null,this.irt.art().nnt(t)}Hit(){this.ztt().Hit()}qit(){if(this.ztt().qit()){const t=this.rrt.Lrt(this.irt),s=this.ztt().Xrt();t.hnt(s)}}Jit(){const t=this.ztt().Jit();return t&&this.ont(),this.ztt().ant(),t}ont(){const t=this.zet().YF(),s=this.ztt(),e=Eg.Uet.snt(t,this),i=this.int();i.Frt(e.YG()),i.aJ(t),i.IJ(e.lnt()),i.mit(!0),i.unt(s.cnt()),i.hnt(s.Xrt())}i4(){return{sourceAdapterJson:this.ztt().i4()}}r4(t){t&&this.ztt().r4(t.sourceAdapterJson)}}}{const Og=self._s,Fg=Og.Uet;Fg.vrt=class{constructor(t){this.fnt=t,this.dnt=null,this.pnt()}qr(){this.dnt&&(this.dnt.qr(),this.dnt=null),this.fnt=null}Krt(){return this.dnt.Krt()}DJ(){return this.fnt}oet(){this.dnt&&this.dnt.oet()}w7(){this.dnt&&this.dnt.w7()}pnt(){return this.dnt||(this.dnt=this.mnt()),this.dnt}sit(){}Tk(){return this.sit()}gnt(){}Lst(){this.pnt().Lst()}o7(){this.pnt().o7()}Hst(){this.pnt().Hst()}Zst(){this.dnt.ynt()}vc(t,s,e,i,r,n,h){let o;switch(this.fnt.Drt()){case"numeric":o=Fg.wnt.vc(t,s,e,this.fnt);break;case"angle":o=Fg.Snt.vc(t,s,e,this.fnt);break;case"boolean":o=Fg.vnt.vc(t,s,e,this.fnt);break;case"color":o=Fg.bnt.vc(t,s,e,this.fnt);break;case"text":o=Fg.Mnt.vc(t,s,e,this.fnt)}this.dnt.Tnt(t,o,s,e,i,r,n,h)}Qrt(t,s,e){switch(this.fnt.Drt()){case"numeric":return Fg.wnt.vc(t,s,e,this.fnt);case"angle":return Fg.Snt.vc(t,s,e,this.fnt);case"boolean":return Fg.vnt.vc(t,s,e,this.fnt);case"color":return Fg.bnt.vc(t,s,e,this.fnt);case"text":return Fg.Mnt.vc(t,s,e,this.fnt)}}eet(){this.dnt.xnt()}Hit(){this.pnt().Cnt()}ant(){this.pnt().ant()}Xrt(){return this.pnt().Xrt()}qit(){return this.pnt().qit()}Jit(){return this.pnt().Jit()}cnt(){const t=this.fnt,s=t.prt().zet().YF(),e=Fg.snt(s,t),i=e.j7();switch(t.Drt()){case"numeric":return Fg.wnt.vc(s,e,i,t);case"angle":return Fg.Snt.vc(s,e,i,t);case"boolean":return Fg.vnt.vc(s,e,i,t);case"color":return Fg.bnt.vc(s,e,i,t);case"text":return Fg.Mnt.vc(s,e,i,t)}}mnt(){const t=this.fnt;switch(t.Vrt()?t.Drt():""){case"combo":case"boolean":case"text":case"string":return new Fg._nt.Gnt(this);case"numeric":case"number":case"angle":return"combo"===this.fnt.Ert()?new Fg._nt.Gnt(this):new Fg._nt.Int(this);case"color":case"offsetColor":return new Fg._nt.Pnt(this);default:return new Fg._nt.Int(this)}}i4(){return{propertyAdapterJson:this.pnt().i4()}}r4(t){t&&this.pnt().r4(t.propertyAdapterJson)}}}{const Dg=self._s,Lg=0;class kg extends Dg.Uet.vrt{constructor(t){super(t),this.Rnt=NaN}sit(){return this.fnt.mrt().Crt()[0]}Tk(){return this.Rnt?this.Rnt:super.Tk()}gnt(){return this.fnt.prt().PJ()}nit(t){this.fnt.mrt().Crt()[0]!==t&&(this.Rnt=t)}vc(t,s,e,i,r,n,h){this.pnt().Ant(s.Irt())&&super.vc(t,s,e,i,r,n,h)}Qrt(t,s,e){if(this.pnt().Ant(s.Irt()))return super.Qrt(t,s,e)}i4(){return Object.assign(super.i4(),{index:this.Rnt})}r4(t){t&&(super.r4(t),this.Rnt=t.index)}}Dg.Uet.wrt=kg}{const Ng=self._s,Bg=0,$g=1,Wg=2;class Vg extends Ng.Uet.vrt{constructor(t){super(t),this.qQ=NaN}sit(){return this.fnt.mrt().Crt()[1]}gnt(){const t=this.fnt.mrt(),s=this.fnt.prt(),e=this.qQ?this.qQ:t.Crt()[0],i=s.PJ(),r=i.Ent(e);return i.Ont()[r].eq()}fq(t){const s=this.fnt.mrt().Crt()[2];return t.Fnt(s)}oit(t){this.fnt.mrt().Crt()[0]!==t&&(this.qQ=t)}vc(t,s,e,i,r,n,h){const o=this.fnt.prt().PJ();this.fq(o.fU())&&super.vc(t,s,e,i,r,n,h)}Qrt(t,s,e){const i=this.fnt.prt().PJ();if(this.fq(i.fU()))return super.Qrt(t,s,e)}i4(){return Object.assign(super.i4(),{sid:this.qQ})}r4(t){t&&(super.r4(t),this.qQ=t.sid)}}Ng.Uet.grt=Vg}{const jg=self._s,Ug=0,zg=1;class Hg extends jg.Uet.vrt{constructor(t){super(t)}sit(){return this.fnt.mrt().Crt()[1]}gnt(){const t=this.fnt.prt().LB().bz(),s=t._V(),e=this.lit(s).Tk();return t.Sq(e)?t.Dnt(e):null}lit(t){const s=this.fnt.mrt().Crt()[0];return t.Lnt(s)}vc(t,s,e,i,r,n,h){this.knt()&&super.vc(t,s,e,i,r,n,h)}Qrt(t,s,e){if(this.knt())return super.Qrt(t,s,e)}knt(){const t=this.fnt.prt().LB().bz(),s=t._V(),e=this.lit(s);if(!e)return;const i=e.Tk();return t.Sq(i)}}jg.Uet.yrt=Hg}{const qg=self._s,Jg=0;class Yg extends qg.Uet.vrt{constructor(t){super(t)}sit(){return this.fnt.mrt().Crt()[0]}gnt(){return this.fnt.prt().PJ().eq()}vc(t,s,e,i,r,n,h){const o=this.fnt.prt();o.fU().HW()===o.PJ().fU().HW()&&super.vc(t,s,e,i,r,n,h)}Qrt(t,s,e){const i=this.fnt.prt();if(i.fU().HW()===i.PJ().fU().HW())return super.Qrt(t,s,e)}Nnt(){const t=this.fnt.prt(),s=t.fU().HW();if(qg.e$.Bnt&&s instanceof qg.e$.Bnt&&("initial-frame"===this.fnt.met()||"initial-animation"===this.fnt.met()))switch(this.fnt.Z7()){case"relative":return{$nt:(s,e,i,r,n)=>{if(e!==r){const i=r/e,n=t.DJ("offsetWidth"),h=t.DJ("offsetScaleX");if(n||h){const o=n?.ztt()?.pnt(),a=h?.ztt()?.pnt();if(s.SH()&&s.GH())a&&a.Wnt(r),s.Xg(this.Vnt(r,e,s,t,o,a));else{const e=r*((s.Unt()?.jnt()??this.znt(s,t))/this.znt(s,t));a&&a.Wnt(r);const n=o?.Hnt()??0,h=a?.Hnt()??0;s.Xg(e+(n+h*i))}}else s.Xg(s.jg()*i)}if(i!==n){const e=n/i,r=t.DJ("offsetHeight"),h=t.DJ("offsetScaleY");if(r||h){const o=r?.ztt()?.pnt(),a=h?.ztt()?.pnt();if(s.SH()&&s.IH())a&&a.Wnt(n),s.Ug(this.qnt(n,i,s,t,o,a));else{const i=n*((s.Unt()?.Jnt()??this.Ynt(s,t))/this.Ynt(s,t));a&&a.Wnt(n);const r=o?.Hnt()??0,h=a?.Hnt()??0;s.Ug(i+(r+h*e))}}else s.Ug(s.Qg()*e)}}};case"absolute":return null}}Xnt(t,s,e,i=0){const r=s.zet().yet(t.PJ());if(!r)return i;const n=r.DJ(e);if(!n)return i;const h=n.mrt().art();if(!h)return i;const o=h.Znt();return o?o.Irt():i}znt(t,s){const e=s.zet().yet(t.PJ());if(e)return e.wit();const i=t.PJ().eq();return i.Sit()?i.wit():t.Unt().jnt()}Ynt(t,s){const e=s.zet().yet(t.PJ());if(e)return e.bit();const i=t.PJ().eq();return i.Sit()?i.bit():t.Unt().Jnt()}Vnt(t,s,e,i,r,n){const h=e.Unt().jnt(),o=h/e.hH().Unt().jnt();let a=1;const l=n?.Knt()??0;if(0!==l){const t=h/this.znt(e,i);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=r?.Qnt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return e.hH().jg()*o*a*f}qnt(t,s,e,i,r,n){const h=e.Unt().Jnt(),o=h/e.hH().Unt().Jnt();let a=1;const l=n?.tht()??0;if(0!==l){const t=h/this.Ynt(e,i);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=r?.sht()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return e.hH().Qg()*o*a*f}}qg.Uet.Srt=Yg}{const Xg=self._s;class Zg extends Xg.Uet.vrt{constructor(t){super(t),this.eht=0,this.iht=!1}Krt(){return!1}o7(){const t=this.fnt.jet();let s=this.fnt.mrt();s=t.Lrt(s),this.eht=s.n9()}Hst(){}Irt(){return this.iht||this.fnt.vc(0),this.eht}vc(t,s,e,i,r,n,h){this.eht=Xg.Uet.wnt.vc(t,s,e,this.fnt),this.iht=!0}Hit(){}ant(){}Xrt(){return this.eht}qit(){return!1}Jit(){return!1}i4(){return{value:this.eht,init:this.iht}}r4(t){t&&(this.eht=t.value,this.iht=!t.hasOwnProperty("init")||t.init)}}Xg.Uet.brt=Zg}{const Kg=self._s,Qg=0,ty=0,sy=1,ey=1,iy=2,ry=3;class ny extends Kg.Uet.vrt{constructor(t){super(t),this.rht=!1,this.nht=null,this.hht=null,this.oht=null,this.D7=this.fnt.zet(),this.ert=this.fnt.prt(),this.aht=this.fnt.xrt(),this.lht=this.aht[0],this.uht=this.aht[1],this.aht[3]?this.cht=this.aht[3]:this.cht=Math.random().toString(36).slice(2),this.fht=NaN,this.dht=NaN,this.pht=NaN,this.mht=null,this.ght()}qr(){super.qr(),this.nht=null,this.hht=null,this.oht=null,this.D7=null,this.ert=null,this.aht=null,this.lht=null,this.mht=null}ght(){if(!self._s.e$.Audio)return;const t=this.fnt.l$().yht(self._s.e$.Audio);t&&(this.nht=t.jW().eq()),this.hht=self._s.e$.Audio.wht,this.oht=self._s.e$.Audio.Sht}vht(){if(this.mht)return;const t=this.fnt.prt().DJ("audioSource");t&&(this.mht=t.ztt())}bht(){const t=this.fnt.prt().DJ("volume");return t?t.ztt().dht:this.dht}oet(){super.oet(),this.rht=!1,this.nht&&(this.oht&&(this.fht=this.oht.Mht.call(this.nht,this.cht),this.dht=this.oht.Tht.call(this.nht,this.cht)),this.hht&&this.hht.nJ.call(this.nht,this.cht))}xht(){return this.cht}Cht(){return this.pht}Ght(t){this.pht=t}o7(){super.o7(),this.fht=NaN,this.rht=!1}Hst(){super.Hst();const t=this.fnt.zet().YF();switch(this.fht=t-this.uht,this.fnt.met()){case"audioSource":break;case"volume":this.dht=this.fnt.Qrt(t)}this.rht=!1}vc(t,s,e,i,r,n,h){if(this.nht)switch(this.fnt.met()){case"audioSource":{if(!this.D7.rst())return;if(i)return void(this.hht&&this.hht.nJ.call(this.nht,this.cht));if(t<this.uht)return void(this.rht=!1);const s=this.oht._ht.call(this.nht,this.cht),e=this.D7.gJ();if(e!==s&&this.hht.mJ.call(this.nht,this.cht,e),this.rht)return;if(!this.fnt.zet().IsPlaying())return;if(this.rht=!0,isNaN(this.fht)){const s=self.performance.now(),e=t-this.uht;if("suspended"===this.nht.Iht())return void(this.rht=!1);const i=e+(self.performance.now()-s)/1e3;if(this.hht){let t=this.Cht();isNaN(t)?(this.Ght(0),t=0):this.Ght(t),this.hht.Pht.call(this.nht,this.lht,t,this.cht,i)}}else{const t=this.fht;this.fht=NaN;const s=this.bht();if(this.dht=NaN,"suspended"===this.nht.Iht())return void(this.rht=!1);this.hht&&(this.Ght(s),this.hht.Pht.call(this.nht,this.lht,s,this.cht,t))}break}case"volume":this.vht(),super.vc(t,s,e,i,r,n,h)}}Qrt(t,s,e){if(this.nht)switch(this.fnt.met()){case"audioSource":return;case"volume":return this.vht(),super.Qrt(t,s,e)}}Rht(t,s){return this.mht?this.mht.Cht():0}Aht(t,s,e,i){this.mht&&this.mht.Ght(this.Rht()+s),this.hht&&this.mht&&this.hht.Ght.call(this.nht,this.mht.xht(),this.mht.Cht())}Eht(t,s,e){this.mht&&this.mht.Ght(s),this.hht&&this.mht&&this.hht.Ght.call(this.nht,this.mht.xht(),this.mht.Cht())}Oht(){return!0}i4(){return{audioPlaybackStarted:this.rht,audioTag:this.cht,pauseTime:this.fht,pauseVolume:this.dht,volume:this.pht}}r4(t){t&&(this.rht=t.audioPlaybackStarted,this.cht=t.audioTag,this.fht=t.pauseTime,this.dht=t.pauseVolume,this.pht=t.volume,this.ght())}}Kg.Uet.Mrt=ny}{const hy=self._s;hy.Uet._nt=class{constructor(t){this.nrt=t,this.fnt=t.DJ(),this.Ret=this.fnt.prt().LB(),this.Fht=this.fnt.met(),this.Dht=!1,this.Lht=null,this.kht=null}qr(){this.nrt=null,this.fnt=null,this.Ret=null,this.Lht=null,this.kht=null}Krt(){return!1}oet(){}w7(){this.Ret=null,this.Lht=null,this.kht=null}ztt(){return this.nrt}DJ(){return this.fnt}LB(){return this.Ret||(this.Ret=this.fnt.prt().LB()),this.Ret}Nht(t){this.Dht=!!t}Bht(){return this.Dht}Lst(){}o7(){}Hst(){}Cnt(){this.Lht=this.Xrt()}ant(){this.Lht=null}Xrt(){}qit(){}Jit(){}Ant(t){return typeof this.$ht()==typeof t}ynt(){}Tnt(t,s,e,i,r,n,h,o){}xnt(){}Wht(){return this.jht(()=>{const t=this.fnt.mrt();return this.fnt.jet().Lrt(t)},()=>{const t=this.fnt.mrt();return this.fnt.jet().Znt(t)}).Vht()}Uht(){const t=this.fnt.zet().YF()-this.fnt.prt().Kst();return this.jht(()=>{const s=this.fnt.mrt();return this.fnt.jet().Urt(t,s)},()=>{const s=this.fnt.mrt(),e=this.fnt.jet();return e.qrt(t,s)||e.Znt(s)}).Vht()}jht(t,s){return this.fnt.zet().rst()?t():s()}zht(t,s){return"relative"===this.fnt.Z7()?t():s()}Hht(t,s){return this.Bht()?(this.Nht(!1),t()):s()}qht(t){}Jht(){return this.nrt.Tk()}Yht(){return this.kht||(this.kht=this.nrt.gnt()),this.kht}Xht(t,s,e,i,r,n){switch(this.fnt.tit()){case"behavior":return t();case"effect":return s();case"instance-variable":return e();case"plugin":return i();case"world-instance":return r();case"audio":return n()}}i4(){return{firstAbsoluteUpdate:this.Dht,saveState:this.Lht}}r4(t){t&&(this.Dht=t.firstAbsoluteUpdate,this.Lht=t.saveState)}Zht(t,s=!1){const e=[];for(const i of t){const t=i.prt().Kst();for(const r of i.Wrt())s&&0===r.YF()?e.push({time:t+r.YF(),value:r.Vht()}):s||e.push({time:t+r.YF(),value:r.Vht()})}return e.sort((t,s)=>t.time-s.time)}Kht(t,s,e){return this.Qht(s,e)}Qht(t,s){for(let e=s.length-1;e>=0;e--)if(s[e].time<=t)return s[e];return null}}}{const oy=self._s,ay=new Map,ly=[0,0,0];class uy extends oy.Uet._nt{constructor(t){super(t)}Lst(){}o7(){}Hst(){}Xrt(){const t=this.fnt.tit(),s=this.Yht(),e=this.Jht();switch(t){case"behavior":case"plugin":return this.tot(s.sot(e));case"effect":return this.tot(s[e]);case"world-instance":return this.tot(this.$ht())}}qit(){const t=this.Wht();return!this.eot(t,this.$ht())}Jit(){return!oy.ti(this.Lht)&&!this.eot(this.Lht,this.$ht())}eot(t,s){return t=this.iot(t),s=this.iot(s),t.Ho(s)}Wht(){const t=super.Wht();return this.iot(t)}Uht(){const t=super.Uht();return this.iot(t)}qht(t){}tot(t){return oy.Li(t,oy.xo)?t.toArray().slice(0,3):t.slice(0,3)}iot(t){return oy.Li(t,oy.xo)?t:new oy.xo(t[0],t[1],t[2],1)}Ant(t){return!0}Krt(){return!0}ynt(){const t=this.fnt.zet(),s=this.fnt.PJ(),e=this.fnt.ztt(),i=t.Utt(s,e,this.Fht,this.fnt);if(i&&i.length>1){ay.has(s)||ay.set(s,new Map);const t=ay.get(s),e=this.fnt.tit();t.has(e)||t.set(e,new Map);const i=t.get(e);i.has(this.Fht)||i.set(this.Fht,{rot:!1,color:new oy.xo(0,0,0,1)})}}not(t,s,e){const i=ay.get(t).get(s).get(e);return i.rot=!0,i.color}Tnt(t,s,e,i,r,n,h,o){const a=this.fnt.zet(),l=this.fnt.prt(),u=this.fnt.PJ(),c=this.fnt.ztt(),f=this.fnt.tit(),d=this.Fht,p=a.Utt(u,c,d,this.fnt);if(p&&p.length>1){const t=this.Zht(p,!0),e=this.Kht(a,a.YF(),t);if(e){const t=l.Kst(),i=e.time-t;if(0===i)this.not(u,f,this.Fht).Ao(s[0],s[1],s[2]);else{if(i<0)return;const t=s[0],e=s[1],r=s[2],n=this.fnt.vc(i,!1,!0),h=oy.xo.Ta(t,n[0]),o=oy.xo.Ta(e,n[1]),a=oy.xo.Ta(r,n[2]);this.not(u,f,this.Fht).Ao(h,o,a)}}}else this.hot(s[0],s[1],s[2])}xnt(){const t=this.fnt.PJ();if(!ay.has(t))return;const s=ay.get(t),e=this.fnt.tit();if(!s.has(e))return;const i=s.get(e);if(!i.has(this.Fht))return;const r=i.get(this.Fht),n=r.rot,h=r.color;n&&this.hot(h.No(),h.Bo(),h.$o()),0===i.size&&s.delete(e),0===s.size&&ay.delete(t)}$ht(){const t=this.fnt.tit(),s=this.Yht(),e=this.Jht();switch(t){case"behavior":case"plugin":return this.iot(s.sot(e));case"effect":return s[e].clone();case"world-instance":return this.LB().zz().clone()}}hot(t,s,e){const i=this.fnt.tit(),r=this.Yht(),n=this.Jht();switch(i){case"behavior":case"plugin":ly[0]=t,ly[1]=s,ly[2]=e,r.oot(n,ly);break;case"effect":r[n].Ro(t,s,e);break;case"world-instance":this.LB().aot(t,s,e)}}i4(){}r4(t){}}oy.Uet._nt.Pnt=uy}{const cy=self._s,fy=cy.Uet;class dy extends cy.Uet._nt{constructor(t){super(t)}Lst(){}o7(){}Hst(){}Xrt(){return this.$ht()}qit(){return this.Wht()!==this.Xrt()}Jit(){return!cy.ti(this.Lht)&&this.Lht!==this.Xrt()}Krt(){return!1}Tnt(t,s,e,i,r,n,h,o){const a=this.fnt,l=a.prt(),u=a.tit(),c=a.zet(),f=l.PJ(),d=a.ztt(),p=this.Fht,m=c.Utt(f,d,p,a);if(m&&m.length>1){const e=this.Zht(m),i=t+l.Kst(),r=this.Kht(c,i,e);r&&(s=r.value)}switch(a.Drt()){case"numeric":if(!fy.wnt.lot(this.Jht(),this.Yht(),s,u))return;break;case"angle":if(!fy.Snt.lot(this.Jht(),this.Yht(),s,u))return;break;case"boolean":if(!fy.vnt.lot(this.Jht(),this.Yht(),s,u))return;break;case"color":if(!fy.bnt.lot(this.Jht(),this.Yht(),s,u))return;break;case"text":if(!fy.Mnt.lot(this.Jht(),this.Yht(),s,u))return}this.hot(s)}$ht(){const t=this.fnt.tit(),s=this.Yht(),e=this.Jht();switch(t){case"behavior":case"plugin":return s.sot(e);case"effect":return s[e];case"instance-variable":return s.uot(e)}}hot(t){const s=this.fnt.tit(),e=this.Yht(),i=this.Jht();switch(s){case"behavior":case"plugin":e.oot(i,t);break;case"effect":e[i]=t;break;case"instance-variable":e.cot(i,t)}}}cy.Uet._nt.Gnt=dy}{const py=self._s,my=py.Uet._nt,gy=new Map,yy=(t,s,e,i,r,n=!1,h=null,o=null)=>{gy.set(t,{fot:s,dot:e,pot:i,round:r,mot:n,init:h,reset:o})},wy=(t,s)=>{const e=s.zet().yet(t.PJ());if(e)return e.wit();const i=t.PJ().eq();return i.Sit()?i.wit():t.Unt().jnt()},Sy=(t,s,e,i=0)=>{const r=s.zet().yet(t.PJ());if(!r)return i;const n=r.DJ(e);if(!n)return i;const h=n.mrt().art();if(!h)return i;const o=h.Znt();return o?o.Irt():i},vy=t=>{const s=[];let e=t.hH();for(;e;)s.push(e),e=e.hH();return s.reverse(),s};yy("offsetX",(t,s,e,i)=>{"relative"===i.fnt.Z7()?t.got(s,e.zet().sst()):t.got(s)},(t,s)=>t.XM(s),t=>t.YM(),!0),yy("offsetY",(t,s,e,i)=>{"relative"===i.fnt.Z7()?t.yot(s,e.zet().sst()):t.yot(s)},(t,s)=>t.QM(s),t=>t.KM(),!0),yy("offsetWidth",(t,s,e,i,r=!1,n=!0)=>{if(0===s)return;const h="relative"===i.fnt.Z7(),o=1===i.wot.YG();if((h||o)&&t.SH()&&t.GH()){if(isNaN(i.Sot)){const s=vy(t);let e;e=o?s[s.length-1].jg():s[s.length-1].Unt().jnt(),i.Sot=0===e?Number.EPSILON:e}if(r)return;i.vot+=s;const e=s/i.Sot;t.Gy(e,n),i.bot+=e}else t.Gy(s),i.bot+=s},(t,s)=>t.Xg(s),t=>t.jg(),!0,!1,null,t=>{t.bot=0,t.vot=0}),yy("offsetHeight",(t,s,e,i,r=!1,n=!0)=>{if(0===s)return;const h="relative"===i.fnt.Z7(),o=1===i.wot.YG();if((h||o)&&t.SH()&&t.IH()){if(isNaN(i.Sot)){const s=vy(t);let e;e=o?s[s.length-1].Qg():s[s.length-1].Unt().Jnt(),i.Sot=0===e?Number.EPSILON:e}if(r)return;i.Mot+=s;const e=s/i.Sot;t.Tot(e,n),i.bot+=e}else t.Tot(s),i.bot+=s},(t,s)=>t.Ug(s),t=>t.Qg(),!0,!1,null,t=>{t.bot=0,t.Mot=0}),yy("offsetAngle",(t,s,e,i,r)=>{t.xot(s)},(t,s)=>t.OV(s),t=>t.FV(),!1,!0),yy("offsetOpacity",(t,s,e,i,r)=>{s/=i.Cot?i.Cot:1;const n=t.SO()+s;if(0===i.Got)n>1?i.Got+=n-1:n<0&&(i.Got+=n),t._ot(s);else{const e=t.SO()+s;s>0&&i.Got>0?e>1&&(i.Got+=e-1):s>0&&i.Got<0?(i.Got+=s,i.Got>0&&(t._ot(i.Got),i.Got=0)):s<0&&i.Got>0?(i.Got+=s,i.Got<0&&(t._ot(i.Got),i.Got=0)):s<0&&i.Got<0&&e<0&&(i.Got+=e)}},(t,s)=>{t.bO(s)},t=>t.SO(),!1,!0,(t,s,e)=>{switch(t.Got=0,t.fnt.Z7()){case"relative":{t.fnt.jet();const s=t.fnt.mrt().art().ort();let e=t.LB().SO(),i=e;for(const r of s){const s=r.YF();i=e+t.fnt.Qrt(s),i=py.Kr(i,0,1)}t.Iot=e-i,t.Iot=Math.round(100*(t.Iot+Number.EPSILON))/100,i=e;for(let e=s.length-1;e>=0;e--){const r=s[e].YF();i-=t.fnt.Qrt(r),i=py.Kr(i,0,1)}t.Pot=i,t.Pot=Math.round(100*(t.Pot+Number.EPSILON))/100;break}}const i="relative"===t.fnt.Z7(),r=1===t.wot.YG();if((i||r)&&s.SH()&&s.FH()){const i=vy(s);let r=i[0].Unt().Rot();r+=Sy(i[0],e,"offsetOpacity");for(let t=1;t<i.length;t++)r+=Sy(i[t],e,"offsetOpacity");t.Cot=0===r?1:r}},t=>{switch(t.fnt.Z7()){case"relative":{t.Got=0;const s=t.LB();let e=s.SO();e=Math.round(100*(e+Number.EPSILON))/100,t.fnt.zet().rst()?(s.bO(e+t.Iot),t.N_=0):(s.bO(e-t.Pot),t.N_=t.ztt().cnt());break}}}),yy("offsetOriginX",(t,s)=>t.Aot(s),(t,s)=>t.Pz(s),t=>t.Iz(),!1),yy("offsetOriginY",(t,s)=>t.Eot(s),(t,s)=>t.Ez(s),t=>t.Az(),!1),yy("offsetZElevation",(t,s)=>t.Oot(s),(t,s)=>t.sT(s),t=>t.tT(),!0),yy("offsetScaleX",(t,s,e,i)=>{if(0===s)return;const r=t.jg()<0?-1:1;if(i.Fot+=s,"relative"===i.fnt.Z7()&&t.SH()&&t.GH()){const n=Sy(t,e,"offsetWidth"),h=isNaN(i.Dot)?e.wit():i.Dot,o=(h+n/(t.Unt().jnt()/h))*r*s;isNaN(i.Sot)&&gy.get("offsetWidth").fot(t,1,e,i,!0);const a=o/i.Sot;t.Gy(a,!0),i.bot+=a}else{const n=(isNaN(i.Dot)?e.wit():i.Dot)*r*s;t.Gy(n),i.bot+=n}},(t,s,e)=>{t.Xg(e.wit()*s)},(t,s)=>{const e=t.jg()<0?-1:1;if(t.GH()){const i=t.hH(),r=s.zet().yet(i.PJ());let n=NaN;if(r)n=i.jg()/r.wit();else{const t=i.PJ().eq();n=t.Sit()?i.jg()/t.wit():1}return t.jg()*e/(s.wit()*n)}return t.jg()*e/s.wit()},!1,!1,null,t=>{t.bot=0,t.Dot=NaN,t.Fot=0}),yy("offsetScaleY",(t,s,e,i)=>{if(0===s)return;const r=t.Qg()<0?-1:1;if(i.Lot+=s,"relative"===i.fnt.Z7()&&t.SH()&&t.IH()){const n=Sy(t,e,"offsetHeight"),h=isNaN(i.Dot)?e.bit():i.Dot,o=(h+n/(t.Unt().Jnt()/h))*r*s;isNaN(i.Sot)&&gy.get("offsetHeight").fot(t,1,e,i,!0);const a=o/i.Sot;t.Tot(a,!0),i.bot+=a}else{const n=(isNaN(i.Dot)?e.bit():i.Dot)*r*s;t.Tot(n),i.bot+=n}},(t,s,e)=>{t.Ug(e.bit()*s)},(t,s)=>{const e=t.Qg()<0?-1:1;if(t.IH()){const i=t.hH(),r=s.zet().yet(i.PJ());let n=NaN;if(r)n=i.Qg()/r.bit();else{const t=i.PJ().eq();n=t.Sit()?i.Qg()/t.bit():1}return t.Qg()*e/(s.bit()*n)}return t.Qg()*e/s.bit()},!1,!1,null,t=>{t.bot=0,t.Dot=NaN,t.Lot=0});class by extends py.Uet._nt{constructor(t){super(t),this.N_=0,this.Got=0,this.Iot=0,this.Pot=0,this.Cot=NaN,this.Sot=NaN,this.bot=0,this.Dot=NaN,this.vot=0,this.Fot=0,this.Mot=0,this.Lot=0,this.kot=void 0,this.Not=void 0,this.Bot=null,this.$ot=null,this.Wot=null,this.Vot=null,this.jot=null,this.Uot=null,this.zot=null,this.Hot=null,this.qot=!1,this.Jot=!1,py.Li(this.fnt.zet(),py.Yot)?this.wot=new py.Uet._nt.Xot(this):this.wot=new py.Uet._nt.Zot(this);const s=this.fnt.met();switch(this.fnt.tit()){case"world-instance":{const t=gy.get(s);this.Bot=t.pot,this.$ot=t.fot,this.Wot=t.dot,this.qot=t.round,this.Jot=t.mot,this.jot=t.init,this.Vot=t.reset;break}case"audio":this.Uot=t.Rht,this.zot=t.Aht,this.Hot=t.Eht,this.qot=!!t.Oht(),this.Jot=!1}}qr(){this.wot=null,this.Bot=null,this.$ot=null,this.Wot=null,this.Vot=null,this.jot=null,this.Uot=null,this.zot=null,this.Hot=null,super.qr()}Krt(){return this.wot.Krt()}Kot(){return this.N_}Qot(t){this.N_=t}Lst(){this.Vot&&this.Vot(this)}o7(){const t=this.wot.o7();if("number"==typeof t&&(this.N_=t),this.jot){const t=this.LB(),s=this.fnt.prt();this.jot(this,t,s)}}Hst(){const t=this.wot.Hst();"number"==typeof t&&(this.N_=t)}Xrt(){return this.$ht()}qit(){return this.Wht()!==this.Xrt()}Jit(){return!py.ti(this.Lht)&&this.Lht!==this.Xrt()}ynt(){this.wot.ynt()}Tnt(t,s,e,i,r,n,h,o){return this.wot.Tnt(t,s,e,i,r,n,h,o)}xnt(){this.wot.xnt()}$ht(){const t=this.Yht(),s=this.Jht(),e=this.LB(),i=this.fnt.prt();switch(this.fnt.tit()){case"behavior":case"plugin":return t.sot(s);case"effect":return t[s];case"instance-variable":return t.uot(s);case"world-instance":return this.Bot(e,i);case"audio":return this.Uot.call(this.ztt(),e,i)}}hot(t,s,e,i=!0){const r=this.Yht(),n=this.Jht(),h=this.LB(),o=this.fnt.prt();switch(this.fnt.tit()){case"behavior":r.tat(n,t);break;case"effect":r[n]+=t;break;case"instance-variable":r.sat(n,t);break;case"plugin":r.tat(n,t,this.ztt().Nnt());break;case"world-instance":this.$ot(h,t,o,this,!1,i);break;case"audio":this.zot.call(this.ztt(),h,t,o,this)}}eat(t,s,e){let i=this.fnt.Ztt();if(i="default"===i?"continuous":i,"discrete"===i&&!s)return;if("discrete"===i&&e){const t=this.fnt.zet().YF();if(!this.fnt.jrt(t))return}const r=this.Yht(),n=this.Jht(),h=this.LB(),o=this.fnt.prt();switch(this.fnt.tit()){case"behavior":r.oot(n,t);break;case"effect":r[n]=t;break;case"instance-variable":r.cot(n,t);break;case"plugin":r.oot(n,t,this.ztt().Nnt());break;case"world-instance":this.Wot(h,t,o);break;case"audio":this.Hot.call(this.ztt(),h,t,o)}}iat(t,s,e,i,r,n,h,o){this.wot.iat(t,s,e,i,r,n,h,o)}rat(t,s,e,i,r){"angle"===this.fnt.Ert()&&(t=py.sn(t));const n=(t.toString().split(".")[1]||"").length,h=this.$ht();let o;switch(o=0===n?this.qot?Math.round(h):this.Jot?"angle"===this.fnt.Ert()?py.tn(Math.round(py.sn(h))):Number(py.toFixed(h,2)):h:this.qot?Number(py.toFixed(h,n)):(this.Jot,h),this.hot(o-h,s,e,!1),this.fnt.met()){case"offsetWidth":case"offsetScaleX":{const t=this.LB(),s=t.jg(),e=Number(py.toFixed(s,2));t.Gy(e-s);break}case"offsetHeight":case"offsetScaleY":{const t=this.LB(),s=t.Qg(),e=Number(py.toFixed(s,2));t.Tot(e-s);break}}}i4(){return Object.assign(super.i4(),{v:this.N_,a:this.Got,fod:this.Iot,bod:this.Pot,of:this.Cot,sf:this.Sot,armorf:this.kot,armandf:this.Not,ca:this.bot,os:this.Dot,awo:this.vot,aho:this.Mot,asxo:this.Fot,asyo:this.Lot})}r4(t){t&&(super.r4(t),this.N_=t.v,this.Got=t.a,this.Iot=py.Ze(t.fod)?t.fod:0,this.Pot=py.Ze(t.bod)?t.bod:0,this.Cot=py.Ze(t.of)?t.of:NaN,this.Sot=py.Ze(t.sf)?t.sf:NaN,this.kot=py.Ze(t.armorf)?t.armorf:void 0,this.Not=py.Ze(t.armandf)?t.armandf:void 0,this.bot=py.Ze(t.ca)?t.ca:0,this.Dot=py.Ze(t.os)?t.os:NaN,this.vot=py.Ze(t.awo)?t.awo:0,this.Mot=py.Ze(t.aho)?t.aho:0,this.Fot=py.Ze(t.asxo)?t.asxo:0,this.Lot=py.Ze(t.asyo)?t.asyo:0)}Wnt(t){this.Dot=t}Hnt(){return this.bot}Qnt(){return this.vot}sht(){return this.Mot}Knt(){return this.Fot}tht(){return this.Lot}}py.Uet._nt.Int=by}{const My=self._s;class Ty{constructor(t){this.nat=!1,this.eht=0,this.hat=!1,this.oat=!1,this.Net=t;for(let t=0,s=this.Net.length;t<s;t++)this.Net[t].frt(this)}pet(){return this.Net}aat(){this.nat=!0}lat(){return this.nat}unt(t){this.eht=t}Irt(){return this.eht}uat(t){this.hat=t}cat(){return this.hat}Xst(t){this.oat=t}fat(){return this.oat}$f(){this.nat=!1,this.eht=0,this.hat=!1,this.oat=!1}}class xy{constructor(t){this.dat=t}qr(){this.dat=null}YG(){return 0}o7(){const t=this.dat;return this.dat.DJ(),t.zht(()=>t.jht(()=>0,()=>t.ztt().cnt()),()=>{})}Hst(){}Krt(){switch(this.dat,this.dat.DJ().Z7()){case"relative":return!1;case"absolute":return!0}}ynt(){this.dat;const t=this.dat.DJ(),s=t.met();switch(t.Z7()){case"relative":break;case"absolute":if(t.crt())t.drt().$f();else{const e=t.zet(),i=t.PJ(),r=t.ztt(),n=e.Utt(i,r,s,t);n&&n.length>1&&new Ty(n)}}}Tnt(t,s,e,i,r,n,h,o){const a=this.dat,l=this.dat.DJ();switch(l.Z7()){case"relative":{const h=a.Kot();a.hot(s-h,e,i),n&&this.iat(t,e,i,r,h,s),a.Qot(s);break}case"absolute":{const t=l.zet(),e=l.prt();if(l.PJ(),l.ztt(),l.crt()){const i=l.drt(),r=i.pet(),n=a.Zht(r,!0),u=a.Kht(t,t.YF(),n);if(u){const t=e.Kst(),r=u.time-t;if(0===r)i.Xst(h),i.uat(o),i.aat(),i.unt(i.Irt()+s);else{if(r<0)return;const t=l.Qrt(r);i.Xst(h),i.uat(o),i.aat(),i.unt(i.Irt()+(s-t))}}}else a.eat(s,o,h);break}}}xnt(){const t=this.dat,s=this.dat.DJ();switch(s.Z7()){case"relative":break;case"absolute":if(s.crt()){const e=s.drt();e.lat()&&t.eat(e.Irt(),e.cat(),e.fat())}}}iat(t,s,e,i,r,n){const h=this.dat;i||(s&&t===s.YF()?h.rat(s.n9(),s,e):e&&t===e.YF()?h.rat(e.n9(),s,e):n-r===0&&h.rat(s.n9(),s,e))}}My.Uet._nt.Zot=xy}{const Cy=self._s;class Gy{constructor(t){this.dat=t}qr(){this.dat=null}YG(){return 1}o7(){const t=this.dat;return t.Nht(!0),this.qht(t.Wht())}Hst(){const t=this.dat;if(t.Wht()!==t.Uht())return t.Nht(!0),this.qht(t.Uht())}Krt(){return!1}ynt(){}Tnt(t,s,e,i,r,n,h,o){const a=this.dat,l=a.Kot();switch(a.DJ().Z7()){case"relative":a.hot(s-l,e,i),n&&this.iat(t,e,i,r,l,s,!1,h);break;case"absolute":a.Bht()?(a.Nht(!1),a.hot(l,e,i)):0===t&&0===a.DJ().zet().uJ()?a.eat(s,!0,!1):(a.hot(s-l,e,i),n&&this.iat(t,e,i,r,l,s,this.pat(),h))}a.Qot(s)}xnt(){}qht(t){return t-this.dat.Xrt()}pat(){const t=this.dat,s=t.LB().PJ(),e=t.DJ().l$().jtt();let i=0;for(const t of e.D8())0===t.YG()?t.W8(s)&&i++:1===t.YG()&&t.PJ()===s&&i++;return i<=1}iat(t,s,e,i,r,n,h,o){const a=this.dat;i?s&&t===s.YF()?a.rat(s.n9(),s,e,h,o):e&&t===e.YF()?a.rat(e.n9(),s,e,h,o):e||a.rat(s.n9(),s,e,h,o):s&&t===s.YF()?a.rat(s.n9(),s,e,h,o):e&&t===e.YF()?a.rat(e.n9(),s,e,h,o):n-r===0&&a.rat(s.n9(),s,e,h,o)}}Cy.Uet._nt.Xot=Gy}{const _y=self._s,Iy=self.ju;_y.Uet.wnt=class{constructor(){}static lot(t,s,e,i){let r;switch(i){case"behavior":case"plugin":r=s.sot(t);break;case"effect":r=s[t];break;case"instance-variable":r=s.uot(t)}return r!==e}static vc(t,s,e,i){if(!e){let t=i.mrt();return t=i.jet().Znt(t),t.n9()}let r=i.Ztt();if("default"===r&&(r="continuous"),"combo"===i.Ert()&&(r="discrete"),"discrete"===r)return s.n9();if("continuous"===r||"step"===r){const n=i.zet().Ytt();if("step"===r&&0!==n){const s=1/n;t=Math.floor(t*s)/s}const h=s.n9(),o=e.n9(),a=s.i9("cubic-bezier"),l=e.i9("cubic-bezier"),u=a&&a.mat()&&l&&l.gat();if(!u&&h===o)return h;const c=s.YF(),f=e.YF();"step"===r&&0!==n&&(t=_y.Kr(t,c,f));const d=_y.normalize(t,c,f),p=s.lnt();let m;if(u){const t=f-c;m=Iy.hc(p)(t*d,0,1,t),m=Iy.hc("cubicbezier")(m,h,h+a.a9(),o+l.c9(),o)}else m=Iy.hc(p)((f-c)*d,h,o-h,f-c);return"integer"===i.Ert()?Math.floor(m):m}}}}{const Py=self._s;Py.Uet.Snt=class{constructor(){}static lot(t,s,e,i){let r;switch(i){case"behavior":case"plugin":r=s.sot(t);break;case"effect":r=s[t];break;case"instance-variable":r=s.uot(t)}return r!==e}static vc(t,s,e,i){if(!e){let t=i.mrt();return t=i.jet().Znt(t),t.n9()}let r=i.Ztt();if("default"===r&&(r="continuous"),"combo"===i.Ert()&&(r="discrete"),"discrete"===r)return s.n9();if("continuous"===r||"step"===r){const n=i.zet().Ytt();if("step"===r&&0!==n){const s=1/n;t=Math.floor(t*s)/s}const h=s.YF(),o=e.YF(),a=s.n9(),l=e.n9();"step"===r&&0!==n&&(t=Py.Kr(t,h,o));const u=s.i9("angle");if(!u){if(a===l)return a;const e=Py.normalize(t,h,o),i=self.ju.hc(s.lnt());return Py.fn(a,l,i(e,0,1,1))}{const e=u.yat();if(a===l&&0===e)return a;const i=Py.normalize(t,h,o),r=self.ju.hc(s.lnt())(i,0,1,1);switch(u.wat()){case"closest":return Py.fn(a,l,r,e);case"clockwise":return Py.dn(a,l,r,e);case"anti-clockwise":return Py.pn(a,l,r,e)}}}}}}{const Ry=self._s;Ry.Uet.vnt=class{constructor(){}static lot(t,s,e,i){let r;switch(i){case"behavior":case"plugin":r=s.sot(t);break;case"effect":r=s[t];break;case"instance-variable":r=s.uot(t)}return!!r!=!!e}static vc(t,s,e,i){if(!e){let t=i.mrt();return t=i.jet().Znt(t),t.n9()?1:0}return s.n9()?1:0}}}{const Ay=self._s,Ey=[0,0,0],Oy=[0,0,0],Fy=[0,0,0];Ay.Uet.bnt=class{constructor(){}static lot(t,s,e,i){let r;switch(i){case"behavior":case"plugin":r=s.sot(t);break;case"effect":r=s[t];break;case"instance-variable":r=s.uot(t)}return Array.isArray(e)?(Ey[0]=e[0],Ey[1]=e[1],Ey[2]=e[2]):(Fy.oa(e),Ey[0]=Math.floor(255*Fy.No()),Ey[1]=Math.floor(255*Fy.Bo()),Ey[2]=Math.floor(255*Fy.$o())),Array.isArray(r)?(Oy[0]=r[0],Oy[1]=r[1],Oy[2]=r[2]):(Fy.oa(r),Oy[0]=Math.floor(255*Fy.No()),Oy[1]=Math.floor(255*Fy.Bo()),Oy[2]=Math.floor(255*Fy.$o())),Ey[0]!==Oy[0]||Ey[1]!==Oy[1]||Ey[2]!==Oy[2]}static vc(t,s,e,i){if(!e){let t=i.mrt();t=i.jet().Znt(t);const s=t.n9();return Ey[0]=s[0],Ey[1]=s[1],Ey[2]=s[2],Ey}let r=i.Ztt();if("default"===r&&(r="continuous"),"discrete"===r){const t=s.n9();return Ey[0]=t[0],Ey[1]=t[1],Ey[2]=t[2],Ey}if("continuous"===r||"step"===r){const n=i.zet().Ytt();if("step"===r&&0!==n){const s=1/n;t=Math.floor(t*s)/s}const h=s.YF(),o=e.YF(),a=s.n9(),l=e.n9();"step"===r&&0!==n&&(t=Ay.Kr(t,h,o));const u=Ay.normalize(t,h,o),c=s.lnt(),f=a[0],d=a[1],p=a[2],m=l[0],g=l[1],y=l[2],w=self.ju.hc(c),S=o-h,v=S*u;return Ey[0]=f===m?f:w(v,f,m-f,S),Ey[1]=d===g?d:w(v,d,g-d,S),Ey[2]=p===y?p:w(v,p,y-p,S),Ey}}}}{const Dy=self._s;Dy.Uet.Mnt=class{constructor(){}static lot(t,s,e,i){let r;switch(i){case"behavior":case"plugin":r=s.sot(t);break;case"effect":r=s[t];break;case"instance-variable":r=s.uot(t)}return r!==e}static vc(t,s,e,i){if(!e){let t=i.mrt();return t=i.jet().Znt(t),t.n9()}return s.n9()}}}{const Ly=self._s;Ly.V6=class{constructor(){this.Sat=new Map}qr(){for(const t of this.Sat.values())t.qr();this.Sat.clear(),this.Sat=null}$u(t){const s=new Ly.vat(t),e=s.Rc();this.Sat.set(e,s)}Hs(t){return this.Sat.get(t)}Ltt(){return 0}static bat(t,s,e,i){if(s)for(const r of s)Ly.V6.Mat("create",r,t,e,i)}static Tat(t,s,e,i){if(s)for(const r of s)Ly.V6.Mat("create-including-disabled",r,t,e,i)}static xat(t,s,e,i){t.length?s.forEach((s,e)=>{t[e].r4(s)}):s.forEach(s=>{Ly.V6.Mat("load",s,t,e,i)})}static Mat(t,s,e,i,r){let n;if("function"==typeof i)switch(t){case"load":n=new i(null,r);break;case"create":case"create-including-disabled":n=new i(s,r)}else if("object"==typeof i){const e=s[i.Cat],h=i.map.get(e);switch(t){case"load":n=new h(null,r);break;case"create":case"create-including-disabled":n=new h(s,r)}}switch(t){case"load":n.r4(s),e.push(n);break;case"create":if("function"==typeof n.pit&&!n.pit())return n.qr();e.push(n);break;case"create-including-disabled":e.push(n)}}}}{const ky=self._s,Ny=0,By=1,$y=2,Wy=3,Vy=4,jy=5,Uy=6,zy=7,Hy=8,qy=9,Jy=10,Yy=11;ky.vat=class{constructor(t){this.Xr="",this.Yst=NaN,this.Gat=0,this._at="default",this.Iat="default",this.Pat=!1,this.Rat=!1,this.Aat=1,this.Get=null,this.Eat="",this.Oat=!1,this.Fat=!0,t&&(this.Xr=t[0],this.Yst=t[1],this.Gat=t[2],this._at=t[3],this.Iat=t[4],this.Pat=!!t[6],this.Rat=!!t[7],this.Aat=t[8],this.Eat=t[9],this.Oat=!!t[10],this.Fat=!!t[11],this.Get=new ky.Dat(t[5],this))}qr(){this.Get.qr(),this.Get=null}Wtt(){return this.Get||(this.Get=new ky.Dat(null,this)),this.Get}Rc(){return this.Xr}rX(t){this.Xr=t}uJ(){return this.Yst}lJ(t){this.Yst=t}Ytt(){return this.Gat}Xtt(t){this.Gat=t}Ztt(){return this._at}Ktt(t){this._at=t}Z7(){return this.Iat}Qtt(t){this.Iat=t}fJ(){return this.Pat}cJ(t){this.Pat=t}pJ(){return this.Rat}dJ(t){this.Rat=t}Pq(){return this.Aat}tst(t){this.Aat=t}S7(){return this.Eat}sst(){return this.Oat}est(){return this.Fat}i4(){return{trackDataJson:this.Get.i4(),name:this.Xr,totalTime:this.Yst,step:this.Gat,interpolationMode:this._at,resultMode:this.Iat,loop:this.Pat,pingPong:this.Rat,repeatCount:this.Aat,startOnLayout:this.Eat,transformWithSceneGraph:!!this.Oat,useSystemTimescale:this.Fat}}r4(t){t&&(this.Wtt().r4(t.trackDataJson),this.Xr=t.name,this.Yst=t.totalTime,this.Gat=t.step,this._at=t.interpolationMode,this.Iat=t.resultMode,this.Pat=t.loop,this.Rat=t.pingPong,this.Aat=t.repeatCount,this.Eat=t.startOnLayout,this.Oat=!!t.transformWithSceneGraph,this.Fat=!!t.useSystemTimescale)}}}{const Xy=self._s,Zy=0,Ky=1,Qy=2,tw=1,sw=2,ew=3,iw=4,rw=5,nw=6,hw=7,ow=0,aw=1,lw=8,uw=0,cw=1,fw=9,dw=10;class pw{constructor(t,s){this.Get=s,this.Lat=null,this.kat=null,this._et=NaN,this.Iet=NaN,this._at="default",this.Iat="default",this.du=!1,this.Nat=null,this.rrt=null,this.Wc="",this.Bat=null,this.$at=0,this.Wat=this.Get.Jtt().uJ(),this.qc=0,this.Xr="",t&&(t[0]&&(this.Lat=t[0],this._et=t[0][2],this.Iet=t[0][1]),this._at=t[1],this.Iat=t[2],this.du=!!t[3],t[6]&&(this.Wc=t[6]),t[7]&&(this.Bat=t[7],this.$at=t[7][0],this.Wat=t[7][1]),t[8]&&(this.kat=t[8]),t[8]&&(this.kat=t[8]),t[9]&&(this.qc=t[9]),t[10]&&(this.Xr=t[10]),this.Nat=new Xy.Vat(t[4],this),this.rrt=new Xy.jat(t[5],this))}qr(){this.Lat=null,this.Get=null,this.Nat&&(this.Nat.qr(),this.Nat=null),this.rrt&&(this.rrt.qr(),this.rrt=null),this.Bat=null}Wtt(){return this.Get}tet(){return this.Nat||(this.Nat=new Xy.Vat(null,this)),this.Nat}jet(){return this.rrt||(this.rrt=new Xy.jat(null,this)),this.rrt}Uat(){return this.Lat}Yet(){return this.Iet}git(t){this.Iet=t}Jet(){return this._et}cit(t){this._et=t}Ztt(){return this._at}Ktt(t){this._at=t}Z7(){return this.Iat}Qtt(t){this.Iat=t}pit(){return this.du}mit(t){this.du=!!t}OJ(){return this.Wc}Kst(){return this.$at}fit(){return this.Wat}dit(t){this.Wat=t}wit(){return this.kat[0]}yit(t){this.kat||(this.kat=[]),this.kat[0]=t}bit(){return this.kat||(this.kat=[]),this.kat[1]}vit(t){this.kat||(this.kat=[]),this.kat[1]=t}YG(){return this.qc}Rc(){return this.Xr}i4(){return{keyframeDataJson:this.Nat.i4(),propertyTrackDataJson:this.rrt.i4(),instanceData:this.Lat,additionalInstanceData:this.kat,instanceUid:this._et,objectClassIndex:this.Iet,interpolationMode:this._at,resultMode:this.Iat,enabled:this.du,id:this.Wc,nestedData:this.Bat,type:this.qc,name:this.Xr}}r4(t){t&&(this.Lat=t.instanceData,this._et=t.instanceUid,this.Iet=t.objectClassIndex,this._at=t.interpolationMode,this.Iat=t.resultMode,this.du=t.enabled,this.Wc=t.id,this.qc=t.type?t.type:0,this.Xr=t.name?t.name:"",this.Wat=this.Get.Jtt().uJ(),t.nestedData&&(this.Bat=t.nestedData,this.$at=this.Bat[0],this.Wat=this.Bat[1]),t.additionalInstanceData&&(this.kat=t.additionalInstanceData),this.tet().r4(t.keyframeDataJson),this.jet().r4(t.propertyTrackDataJson))}}Xy.Dat=class{constructor(t,s){this.itt=s,this.zat=[],Xy.V6.bat(this.zat,t,pw,this)}qr(){this.itt=null;for(const t of this.zat)t.qr();Xy.bh(this.zat),this.zat=null}Jtt(){return this.itt}het(){const t=new pw(null,this);return this.zat.push(t),t}Hat(t){return t.tet().ket()[0]}qat(t){return t.tet().ket().at(-1)}Dit(t,s){const e=s.tet().ket(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.YF()===t)return i}}Jat(t,s){const e=s.tet().ket(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.YF()>t)return i}}Oit(t,s){const e=s.tet().ket(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.YF()>=t)return i}}Ait(t,s){const e=s.tet().ket();for(let s=e.length-1;s>=0;s--){const i=e[s];if(i.YF()<=t)return i}}*$tt(){for(const t of this.zat)yield t}i4(){return{trackDataItemsJson:this.zat.map(t=>t.i4())}}r4(t){t&&Xy.V6.xat(this.zat,t.trackDataItemsJson,pw,this)}}}{const mw=self._s,gw=0,yw=0,ww=1,Sw=2,vw=3,bw=4,Mw=5,Tw=6,xw=7,Cw=8,Gw=9;class _w{constructor(t,s){this.rrt=s,this.Yat="",this.Xat=null,this.Fht=null,this.qc=null,this.Zat=NaN,this.Kat=NaN,this._at="default",this.Iat="default",this.du=!1,this.Qat=null,this.tlt=!0,t&&(this.Yat=t[0][0],this.Xat=t[0].slice(1),this.Fht=t[1],this.qc=t[2],this.Zat=t[3],this.Kat=t[4],this._at=t[5],this.Iat=t[6],this.du=!!t[7],this.Qat=new mw.slt(t[8],this),this.tlt=t[9])}qr(){this.Qat.qr(),this.Qat=null,this.rrt=null,this.Xat=null}jet(){return this.rrt}art(){return this.Qat||(this.Qat=new mw.slt(null,this)),this.Qat}tit(){return this.Yat}Trt(t){this.Yat=t}Crt(){return this.Xat}_rt(t){this.Xat=t}Prt(){return this.Fht}Art(t){this.Fht=t}YG(){return this.qc}Frt(t){this.qc=t}krt(){return this.Zat}Nrt(t){this.Zat=t}Brt(){return this.Kat}$rt(t){this.Kat=t}Ztt(){return this._at}Ktt(t){this._at=t}Z7(){return this.Iat}Qtt(t){this.Iat=t}pit(){return this.du}mit(t){this.du=!!t}Vrt(){return!!this.tlt}i4(){return{propertyKeyframeDataJson:this.Qat.i4(),sourceAdapterId:this.Yat,sourceAdapterArguments:this.Xat,property:this.Fht,type:this.qc,min:this.Zat,max:this.Kat,interpolationMode:this._at,resultMode:this.Iat,enabled:this.du,canHavePropertyKeyframes:this.tlt}}r4(t){t&&(this.Yat=t.sourceAdapterId,this.Xat=t.sourceAdapterArguments,this.Fht=t.property,this.qc=t.type,this.Zat=t.min,this.Kat=t.max,this._at=t.interpolationMode,this.Iat=t.resultMode,this.du=t.enabled,this.tlt=t.canHavePropertyKeyframes,this.art().r4(t.propertyKeyframeDataJson))}}mw.jat=class{constructor(t,s){this.Cet=s,this.elt=[],mw.V6.bat(this.elt,t,_w,this)}qr(){this.Cet=null;for(const t of this.elt)t.qr();mw.bh(this.elt),this.elt=null}Qst(){return this.Cet}Vit(){const t=new _w(null,this);return this.elt.push(t),t}Lrt(t){return t.art().ort()[0]}Znt(t){return t.art().ort().at(-1)}jrt(t,s){const e=s.art().ort(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.YF()===t)return i}}Hrt(t,s){const e=s.art().ort(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.YF()>t)return i}}qrt(t,s){const e=s.art().ort(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.YF()>=t)return i}}Urt(t,s){const e=s.art().ort();for(let s=e.length-1;s>=0;s--){const i=e[s];if(i.YF()<=t)return i}}*Vet(){for(const t of this.elt)yield t}i4(){return{propertyTrackDataItemsJson:this.elt.map(t=>t.i4())}}r4(t){t&&mw.V6.xat(this.elt,t.propertyTrackDataItemsJson,_w,this)}}}{const Iw=self._s,Pw=0,Rw=1,Aw=2,Ew=3;class Ow{constructor(t,s){if(this.Nat=s,this.zD=-1,this.ilt="noease",this.rlt=!1,this.Rtt=null,this.nlt=null,!t)return;this.zD=t[0],this.ilt=t[1],this.rlt=!!t[2];const e=t[3];this.Rtt=e?e.split(" "):[],this.nlt=new Set(this.Rtt.map(t=>t.toLowerCase())),this.hlt=null,this.olt=null}qr(){this.Nat=null,Iw.bh(this.Rtt),this.Rtt=null,this.nlt.clear(),this.nlt=null,this.hlt=null}tet(){return this.Nat}j7(){return this.hlt}llt(t){this.hlt=t}Fit(){return this.olt}ult(t){this.olt=t}YF(){return this.zD}aJ(t){this.zD=t,this.Nat.clt()}lnt(){return this.ilt}IJ(t){this.ilt=t}pit(){return this.rlt}mit(t){this.rlt=!!t}yJ(){return this.Rtt}nst(t){this.Rtt=t?t.split(" "):[],this.nlt=new Set(this.Rtt.map(t=>t.toLowerCase()))}flt(){return this.nlt}bet(t){return this.nlt.has(t.toLowerCase())}i4(){return{time:this.zD,ease:this.ilt,enable:this.rlt,tags:this.Rtt}}r4(t){t&&(this.zD=t.time,this.ilt=t.ease,this.rlt=t.enable,this.Rtt=t.tags,this.nlt=new Set(this.Rtt.map(t=>t.toLowerCase())))}}Iw.Vat=class{constructor(t,s){this.Cet=s,this.Let=[],Iw.V6.bat(this.Let,t,Ow,this),this.clt()}qr(){this.Cet=null;for(const t of this.Let)t.qr();Iw.bh(this.Let),this.Let=null}clt(){this.Let.sort((t,s)=>t.YF()-s.YF());for(let t=0;t<this.Let.length;t++){const s=this.Let[t];s.llt(this.Let[t+1]),s.ult(this.Let[t-1])}}Qst(){return this.Cet}dlt(){return this.Let.length}ket(){return this.Let}$it(){const t=new Ow(null,this);return this.Let.push(t),this.clt(),t}Uit(t){for(const s of this.Let){if(!t(s))continue;const e=this.Let.indexOf(s);-1!==e&&(s.qr(),this.Let.splice(e,1))}this.plt(),this.clt()}plt(){this.Let.sort((t,s)=>t.YF()-s.YF())}trt(t){return this.Let.indexOf(t)}srt(t){return this.Let[t]}*mlt(){for(const t of this.Let)yield t}*glt(){for(let t=this.Let.length-1;t>=0;t--)yield this.Let[t]}i4(){return{keyframeDataItemsJson:this.Let.map(t=>t.i4())}}r4(t){t&&(Iw.V6.xat(this.Let,t.keyframeDataItemsJson,Ow,this),this.clt())}}}{const Fw=self._s,Dw=0,Lw=0,kw=1,Nw=2,Bw=1,$w=2,Ww=3,Vw=4,jw=5;class Uw{constructor(t,s){this.Qat=s,this.eht=null,this.ylt=null,this.qc="",this.zD=NaN,this.ilt="noease",this.rlt=!1,this.wlt=null,this.Slt=void 0,this.vlt="line",t&&(this.eht=t[0][0],this.ylt=t[0][1],this.qc=t[0][2],this.zD=t[1],this.ilt=t[2],this.rlt=!!t[3],this.vlt=t[5],this.wlt=null,t[4]&&(this.wlt=new Fw.blt(t[4],this)),this.hlt=null,this.Mlt=null)}qr(){this.Qat=null,this.wlt&&(this.wlt.qr(),this.wlt=null),this.hlt=null,this.Mlt=null}Tlt(){return this.wlt}llt(t){this.hlt=t}j7(){return this.hlt}xlt(t){this.Mlt=t}U7(){return this.Mlt}Irt(){return this.eht}unt(t){"color"===this.qc&&Fw.Ze(t)?(this.eht[0]=Fw.Rn(t),this.eht[1]=Fw.An(t),this.eht[2]=Fw.En(t)):this.eht=t}Vht(){return this.ylt}hnt(t){"color"===this.qc&&Fw.Ze(t)?(this.ylt[0]=Fw.Rn(t),this.ylt[1]=Fw.An(t),this.ylt[2]=Fw.En(t)):this.ylt=t}n9(){const t=this.Qat.mrt().Z7();return"relative"===t?this.Irt():"absolute"===t?this.Vht():void 0}YG(){return this.qc}Frt(t){this.qc=t}YF(){return this.zD}aJ(t){this.zD=t,this.Qat.Clt()}lnt(){return this.ilt}IJ(t){this.ilt=t}pit(){return this.rlt}mit(t){this.rlt=!!t}z7(){return this.vlt}i9(t){if(!this.wlt)return;if(this.Slt||null===this.Slt)return this.Slt;const s=this.wlt.Glt();if(!s)return this.Slt=null,this.Slt;const e=s.length;for(let i=0;i<e;i++){const e=s[i];if(e.OJ()===t)return this.Slt=e,this.Slt}return this.Slt=null,this.Slt}i4(){const t=this.wlt;return{addonDataJson:t?t.i4():t,value:this.eht,aValue:this.ylt,type:this.qc,time:this.zD,ease:this.ilt,enable:this.rlt}}r4(t){t&&(t.addonDataJson&&this.wlt._lt(t.addonDataJson),this.eht=t.value,this.ylt=t.aValue,this.qc=t.type,this.zD=t.time,this.ilt=t.ease,this.rlt=t.enable)}}Fw.slt=class{constructor(t,s){this.irt=s,this.hrt=[],this.Ilt=[],Fw.V6.bat(this.hrt,t,Uw,this),Fw.V6.Tat(this.Ilt,t,Uw,this),this.Clt()}qr(){this.irt=null;for(const t of this.hrt)t.qr();Fw.bh(this.hrt),this.hrt=null;for(const t of this.Ilt)t.qr();Fw.bh(this.Ilt),this.Ilt=null}Clt(){let t=this.hrt;t.sort((t,s)=>t.YF()-s.YF());for(let s=0;s<t.length;s++){const e=t[s];s+1<t.length&&e.llt(t[s+1]),s-1>=0&&e.xlt(t[s-1])}t=this.Ilt,t.sort((t,s)=>t.YF()-s.YF());for(let s=0;s<t.length;s++){const e=t[s];s+1<t.length&&e.llt(t[s+1]),s-1>=0&&e.xlt(t[s-1])}}rnt(){const t=new Uw(null,this);return this.hrt.push(t),this.Clt(),t}nnt(t){for(const s of this.hrt){if(!t(s))continue;const e=this.hrt.indexOf(s);-1!==e&&(s.qr(),this.hrt.splice(e,1))}this.Plt(),this.Clt()}Plt(){this.hrt.sort((t,s)=>t.YF()-s.YF())}mrt(){return this.irt}Rlt(){return this.hrt.length}Znt(){return this.hrt[this.hrt.length-1]}ort(){return this.hrt}V7(){return this.Ilt}*Alt(){for(const t of this.hrt)yield t}*Elt(){for(let t=this.hrt.length-1;t>=0;t--)yield this.hrt[t]}i4(){const t=this.hrt,s=this.Ilt;return{propertyKeyframeDataItemsJson:t.map(t=>t.i4()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.i4())}}r4(t){t&&(Fw.V6.xat(this.hrt,t.propertyKeyframeDataItemsJson,Uw,this),Fw.V6.xat(this.Ilt,t.propertyKeyframeDataItemsIncludingDisabledJson,Uw,this),this.Clt())}}}{const zw=self._s,Hw=0,qw=1;class Jw{constructor(t,s){this.wlt=s,this.Wc=t[0],this.Olt=t[1]}qr(){this.wlt=null,this.Olt=null}Tlt(){return this.wlt}OJ(){return this.Wc}i4(){return{id:this.Wc,data:this.Olt}}r4(t){t&&(this.Wc=t.id,this.Olt=t.data)}}const Yw=0,Xw=1,Zw=2,Kw=3;class Qw extends Jw{constructor(t,s){super(t,s),this.Flt=this.Olt[0],this.Dlt=!!this.Olt[1],this.Llt=this.Olt[2],this.klt=!!this.Olt[3]}qr(){super.qr()}a9(){return this.Flt}mat(){return this.Dlt}c9(){return this.Llt}gat(){return this.klt}i4(){return Object.assign(super.i4(),{startAnchor:this.Flt,startEnable:!!this.Dlt,endAnchor:this.Llt,endEnable:!!this.klt})}r4(t){t&&(super.r4(t),this.Flt=t.startAnchor,this.Dlt=!!t.startEnable,this.Llt=t.endAnchor,this.klt=!!t.endEnable)}}const tS=0,sS=1;class eS extends Jw{constructor(t,s){super(t,s),this.Nlt=this.Olt[0],this.Blt=this.Olt[1]}qr(){super.qr()}wat(){return this.Nlt}yat(){return this.Blt}i4(){return Object.assign(super.i4(),{direction:this.Nlt,revolutions:this.Blt})}r4(t){t&&(super.r4(t),this.Nlt=t.direction,this.Blt=t.revolutions)}}zw.blt=class{constructor(t,s){this.$lt=s,this.Wlt=[],zw.V6.bat(this.Wlt,t,{Cat:0,map:new Map([["cubic-bezier",Qw],["angle",eS]])},this)}qr(){this.$lt=null;for(const t of this.Wlt)t.qr();zw.bh(this.Wlt),this.Wlt=null}Vlt(){return this.$lt}Glt(){return this.Wlt}*jlt(){for(const t of this.Wlt)yield t}i4(){return{addonDataItemsJson:this.Wlt.map(t=>t.i4())}}r4(t){t&&zw.V6.xat(this.Wlt,t.addonDataItemsJson,{Cat:"id",map:new Map([["cubic-bezier",Qw],["angle",eS]])},this)}}}{const iS=self._s,rS="start-value",nS="current-state",hS=0,oS=1;let aS=0;iS.Yot=class extends iS.b8{constructor(t,s){super("tween-"+aS++,t,s),this.Wc="",this.Ult=!1,this.zlt="start-value",this.Pet=null,this.Hlt=null,this.qlt=null,this.Jlt=null,this.ert=null,this.Ylt=null}Ntt(t){const s=iS.Hr(iS.Event,"tweenstatereleased");s.Xlt=this,t.dispatchEvent(s)}YG(){return 1}ltt(){for(const t of this.itt.Wtt().$tt())this.ntt.push(iS.Zlt.UC(this,t));this.ert=this.ntt[0]}net(){const t=this.itt.Wtt().het(),s=iS.Zlt.UC(this,t);return this.ntt.push(s),this.Klt(),s}Klt(){this.ert=this.ntt[0]}DJ(t){return this.ert.pet()[0]}Ort(t){this.Qlt=t}PJ(){const t=this.N7();if(!t||!t.length)return;const s=t[0];if(this.ert=s,!s)return;const e=s.PJ();return s.qet()?e:void 0}tut(t){this.Jlt=t}sut(t){this.qlt||(this.qlt=[]),this.qlt.push(t)}eut(t){this.Hlt||(this.Hlt=[]),this.Hlt.push(t)}iut(t){if(!this.qlt)return;const s=this.qlt.indexOf(t);-1!==s&&this.qlt.splice(s,1)}rut(t){if(!this.Hlt)return;const s=this.Hlt.indexOf(t);-1!==s&&this.Hlt.splice(s,1)}nut(t,s){for(const e of this.ntt)for(const i of e.Net){if(i.met()!==s)continue;const e=i.jet(),r=i.mrt(),n=e.Lrt(r);n.unt(t),n.hnt(t)}}hut(t){for(const s of this.ntt)for(const e of s.Net)if(e.met()===t)return e}out(t){let s=!1;for(const e of t){const t=this.hut(e);t&&(this.nut(t.Xrt(),e),s=!0)}if(s){if(this.rst()){const t=this.uJ()-this.YF();this.lJ(t);for(const s of this.ntt)s.dit(t);this.Pst(0)}else{const t=this.YF();this.lJ(t);for(const s of this.ntt)s.dit(t);this.Pst(t)}this.Rst()}}aut(t,s){const e=this.hut(s);if(!e)return;const i=e.jet(),r=e.mrt(),n=i.Znt(r);n.aJ(this.uJ()),n.unt(t),n.hnt(t)}lut(t){this.Wc=t}OJ(){return this.Wc}uut(t){this.zlt=t}cut(){return this.zlt}EJ(t){this.Ult=t}AJ(){return this.Ult}lst(){if(this.qlt)for(const t of this.qlt)t(this);if(!this.m7())for(const t of this.ntt)t.Jit()}yst(){this.xtt=this.Bc.kN()}y7(){if(!this._tt&&(this._tt=!0,this.Hlt))for(const t of this.Hlt)t(this)}aJ(t){this.fut(),super.aJ(t)}Dst(t){iS.Ze(t)||(t=this.uJ()),t<0?this.ftt=0:t>=this.uJ()?this.ftt=this.uJ():this.ftt=t,this.ert.Lst()}o7(t){if(!this.g7()&&"current-state"===this.cut())for(const t of this.ntt)t.qit();super.o7(t)}nJ(t=!1){if(super.nJ(t),!this.m7())for(const t of this.ntt)t.Hit()}$f(t=!0,s=!1){this.fut(),super.$f(t,s)}fut(){for(const t of this.ntt){const s=t=>{const s=t.YF(),e=this.uJ();return 0!==s&&s!==e};t.jit(s),t.zit(s)}}n8(){if(this.iJ())return!0;const t=this.PJ();return!(t&&t.fU().WQ()||(this.ett.i7(this),this.Ust(),0))}c7(t,s,e){if(this.Pet||(this.Pet=this.PJ()),!this.Pet||this.Pet.SY())return this.nJ(!0),void this.yst();const i=this.Pet.WN();if(-1!==i&&(t=e*i),0===t&&0===this.Ptt)return;this.Ptt=t;const r=this.ftt+this.dtt+t*this.ptt,n=this.itt.Yst;r<0?(this.ftt=0,this.dtt=-r):r>=n?(this.ftt=n,this.dtt=this.ftt-r):(this.ftt=r,this.dtt=0);let h=!1,o=!1;const a=this.fJ(),l=this.pJ();if(a||l?a&&!l?this.ptt>0?this.ftt>=n&&(this.Dst(0),this.dut(iS.yut.gut.t$.mut),this.dut(iS.yut.gut.t$.wut),o=!0):this.ftt<=0&&(this.Dst(n),this.dut(iS.yut.gut.t$.mut),this.dut(iS.yut.gut.t$.wut),o=!0):!a&&l?this.ptt>0?this.ftt>=n&&(this.Pst(n),this.mJ(-1*this.gJ()),o=!0,1===this.mtt?this.ytt<this.Pq()?(this.ytt++,this.dut(iS.yut.gut.t$.mut),this.dut(iS.yut.gut.t$.wut),this.dut(iS.yut.gut.t$.Sut),this.dut(iS.yut.gut.t$.vut),this.IsPlaying()?this.mtt=0:this.gtt=0):(this.dut(iS.yut.gut.t$.Sut),this.dut(iS.yut.gut.t$.vut),h=!0):0===this.mtt&&(this.dut(iS.yut.gut.t$.Sut),this.dut(iS.yut.gut.t$.vut),this.IsPlaying()?this.mtt=1:this.gtt=1)):this.ftt<=0&&(this.Pst(0),this.mJ(-1*this.gJ()),o=!0,1===this.mtt?this.ytt<this.Pq()?(this.ytt++,this.dut(iS.yut.gut.t$.mut),this.dut(iS.yut.gut.t$.wut),this.dut(iS.yut.gut.t$.Sut),this.dut(iS.yut.gut.t$.vut),this.IsPlaying()?this.mtt=0:this.gtt=0):(h=!0,this.dut(iS.yut.gut.t$.Sut),this.dut(iS.yut.gut.t$.vut)):0===this.mtt&&(this.dut(iS.yut.gut.t$.Sut),this.dut(iS.yut.gut.t$.vut),this.IsPlaying()?this.mtt=1:this.gtt=1)):a&&l&&(this.ptt>0?this.ftt>=n&&(this.Pst(n),this.mJ(-1*this.gJ()),o=!0,0===this.mtt&&(this.dut(iS.yut.gut.t$.Sut),this.dut(iS.yut.gut.t$.vut)),1===this.mtt&&(this.dut(iS.yut.gut.t$.mut),this.dut(iS.yut.gut.t$.wut),this.dut(iS.yut.gut.t$.Sut),this.dut(iS.yut.gut.t$.vut)),this.IsPlaying()?(this.mtt++,this.mtt=iS.wrap(this.mtt,0,2)):(this.gtt=this.mtt+1,this.gtt=iS.wrap(this.gtt,0,2))):this.ftt<=0&&(this.Pst(0),this.mJ(-1*this.gJ()),o=!0,0===this.mtt&&(this.dut(iS.yut.gut.t$.Sut),this.dut(iS.yut.gut.t$.vut)),1===this.mtt&&(this.dut(iS.yut.gut.t$.mut),this.dut(iS.yut.gut.t$.wut),this.dut(iS.yut.gut.t$.Sut),this.dut(iS.yut.gut.t$.vut)),this.IsPlaying()?(this.mtt++,this.mtt=iS.wrap(this.mtt,0,2)):(this.gtt=this.mtt+1,this.gtt=iS.wrap(this.gtt,0,2)))):this.ptt>0?this.ftt>=n&&(this.ytt<this.Pq()?(this.ytt++,this.Dst(0),this.dut(iS.yut.gut.t$.mut),this.dut(iS.yut.gut.t$.wut),o=!0):(this.Pst(n),h=!0)):this.ftt<=0&&(this.ytt<this.Pq()?(this.ytt++,this.Dst(n),this.dut(iS.yut.gut.t$.mut),this.dut(iS.yut.gut.t$.wut),o=!0):(this.Pst(0),h=!0)),!this.iJ()&&this.IsPlaying()){if(h)return this.ert.Xst(),this.nJ(!0),void this.yst();this.ert.vc(this.ftt,!0,!1,o,this.Itt,!1),this.Itt&&(this.Itt=!1)}}dut(t){const s=this.PJ();this.Jlt.but(this),this.Bc.JU(t,s,this.Jlt.fq()),this.Jlt.Mut()}i4(){const t=super.i4(),s=this.Jtt();return Object.assign(t,{tweenDataItemJson:s.i4(),id:this.Wc,destroyInstanceOnComplete:this.Ult,initialValueMode:this.zlt})}r4(t){t&&(this.Jtt().r4(t.tweenDataItemJson),super.r4(t),this.Wc=t.id,this.Ult=t.destroyInstanceOnComplete,this.zlt=t.initialValueMode,this.Klt())}static IsPlaying(t){return t.IsPlaying()}static bJ(t){return t.bJ()}static Tut(t){return!!t.pJ()&&0===t.ist()}static xut(t){return!!t.pJ()&&1===t.ist()}static Cut(t){const s=t.runtime.jtt(),e=new iS.vat;if(t.json){e.r4(t.json.tweenDataItemJson);const i=new iS.Yot(e,s);return i.r4(t.json),i}{const i=new iS.Yot(e,s);iS.Ti(t.Gut)||(t.Gut=[t.Gut]),i.lut(t.id),i.nst(t.tags),i.uut(t._ut),i.EJ(t.Iut),i.cJ(t.loop),i.dJ(t.Put),i.lJ(t.time),i.Xtt(0),i.Ktt("default"),i.Qtt(t.Gut[0].Rut),i.tst(t.Iq);const r=i.net();r.cit(t.pq.CU()),r.Ktt("default"),r.Qtt(t.Gut[0].Rut),r.mit(!0),r.git(t.pq.fU().Tk());const n=t.pq.eq(),h=n.Sit()?n.wit():t.pq.LB().jg(),o=n.Sit()?n.bit():t.pq.LB().Qg();r.yit(h),r.vit(o);const a=r.Bit();a.aJ(0),a.IJ("noease"),a.mit(!0),a.nst("");const l=r.Bit();l.aJ(t.time),l.IJ("noease"),l.mit(!0),l.nst("");for(const s of t.Gut){const e=r.Wit();e.Trt(s.Aut),e.Grt(s.Eut),e.Rrt(s.ait),e.Ort(s.type),e.Nrt(NaN),e.$rt(NaN),e.Ktt("default"),e.Qtt(s.Rut),e.mit(!0);const i=e.int();i.Frt(s.valueType),i.aJ(0),i.IJ(s.Out),i.mit(!0),i.unt(s.Fut),i.hnt(s.Fut);const n=e.int();n.Frt(s.valueType),n.aJ(t.time),n.IJ(s.Out),n.mit(!0),n.unt(s.Dut),n.hnt(s.Dut),e.ztt()}return i}}static cit(t,s){if(!isNaN(s))for(const e of t.N7())e.cit(s)}static tut(t,s){t.tut(s)}Lut(t,s){return this.Ylt||(this.Ylt=iS.Hr(self.xJ,this,t,s)),this.Ylt}}}{const lS=self._s;lS.Zlt=class extends lS.Vtt{constructor(t,s){super(t,s),this.kut=null,this.Nut=null}static UC(t,s){return lS.Hr(lS.Zlt,t,s)}But(){1===this.Net.length?this.kut=this.Net[0]:(this.kut=this.Net[0],this.Nut=this.Net[1])}Bet(){for(const t of this.Cet.jet().Vet())this.Net.push(lS.$ut.UC(this,t));this.But()}Wit(){const t=this.Cet.jet().Vit(),s=lS.$ut.UC(this,t);return this.Net.push(s),this.But(),s}o7(){if(this.Het(),!this.qet()&&this.qtt())return;const t=this.zet().rst()?0:this.fit();for(const s of this.Net)s.o7(t),0===this.$et&&1===s.xit()&&(this.$et=1),0===this.y8&&1===s.a7()&&(this.y8=1);this.Wet=0,this.Net.some(t=>t.Jst())&&(this.Wet=1),this.Det=this.Cit(t),this.Eet=!1,this.Oet=!1,this.vc(t)}Zst(){}vc(t,s=!1,e=!1,i=!1,r=!1,n=!1,h=!1){if(this.Pet||this.PJ(),this.Pet)return!this.Pet.SY()&&(!n||!this.fU().WQ())&&(this.Nut?(this.kut.vc(t,e,i,h),this.Nut.vc(t,e,i,h)):this.kut.vc(t,e,i,h),void(0!==this.kut.xit()&&(this.Ret||(this.Ret=this.Pet.LB()),this.Ret&&this.Ret.Tz())))}eet(){}r4(t){super.r4(t),this.But()}}}{const uS=self._s;uS.$ut=class extends uS.Uet{constructor(t,s){super(t,s),this.Wut=!1}static UC(t,s){return uS.Hr(uS.$ut,t,s)}vc(t,s=!1,e=!1,i=!1){let r,n;if(this.Wut)r=this.hrt[0],n=this.hrt[1];else if(s)r=this.rrt.Urt(t,this.irt),n=r.j7();else{if(this.lrt){const s=this.zet(),e=this.lrt.j7(),i=this.lrt.YF(),r=e?e.YF():s.uJ();(t<=i||t>=r)&&(this.lrt=this.rrt.Urt(t,this.irt))}else this.lrt=this.rrt.Urt(t,this.irt);r=this.lrt,n=r.j7()}this.nrt.vc(t,r,n,s,e,i)}int(){const t=this.irt.art().rnt();return this.lrt=null,this.Wut=this.Wrt().length<=2,t}zit(t){this.lrt=null,this.irt.art().nnt(t),this.Wut=this.Wrt().length<=2}i4(){return{sourceAdapterJson:this.ztt().i4(),basic:this.Wut}}r4(t){t&&(this.ztt().r4(t.sourceAdapterJson),this.Wut=t.basic)}}}{const cS=self._s,fS=self.ju,dS=0,pS=1,mS=2;cS.bc=class extends cS.Ur{constructor(t,s=!0){super(),this.Xr=t[0],this.Vut=t[2],this.jut=[];for(const s of t[1]){const t=cS.Uut.UC(this,s);this.jut.push(t)}for(let t=0;t<this.jut.length;t++){const s=this.jut[t],e=this.jut[t+1],i=this.jut[t-1];s.llt(e),s.xlt(i)}this.zut=new Map,this.Hut=new Map,this.qut(),s&&fS.Tc(this.Xr,(t,s,e,i)=>this.vc(t,s,e,i),null,{transition:this})}static UC(t){return cS.Hr(cS.bc,t)}qr(){for(const t of this.jut)t.qr();cS.bh(this.jut),this.jut=null,this.zut.clear(),this.zut=null,this.Hut.clear(),this.Hut=null}Mc(t){this.Vut=!!t}Jut(t){const s=this.Hut.get(t);if(s)return s;for(const s of this.jut)if(s.Yut()===t)return this.Hut.set(t,s),s}Xut(t){for(let s=this.jut.length-1;s>=0;s--){const e=this.jut[s],i=e.Yut();if(i<=t){let s=e;if(i<t)return s;if(i===t){for(;s;){const t=s.U7();if(!t)break;if(t.Yut()!==s.Yut())break;s=t}return s}}}}vc(t,s,e,i){let r=t/i;if(this.Vut){const r=this.Jut(0),n=this.Jut(1),h=s+(s+e)*r.Zut(),o=(s+e)*n.Zut()-h;return 0===i?h+o:fS.Cc(t,h,o,i)}0===i&&(r=1);let n=this.Xut(r),h=n.j7();if(!h){const t=n.U7(),s=n;n=t,h=s}const o=h.Yut()-n.Yut(),a=cS.Zr(r,n.Yut(),h.Yut(),0,o);if(n.Kut()||0===o){const t=s+(s+e)*n.Zut(),i=(s+e)*h.Zut()-t;return 0===o?1===a?t+i:t:fS.Cc(a,t,i,o)}const l=n.Yut(),u=n.Zut(),c=n.Yut()+n.Qut(),f=n.Zut()+n.tct(),d=h.Yut()+h.sct(),p=h.Zut()+h.ect(),m=h.Yut(),g=h.Zut();let y=fS.hc("spline")(a,l,u,c,f,d,p,m,g,this.zut.get(n));return y+=n.Zut(),(1-y)*s+y*(s+e)}qut(){this.zut.clear();for(let t=0;t<this.jut.length-1;t++){const s=this.jut[t];if(!s.mat())continue;const e=s,i=this.jut[t+1];if(!i.gat())continue;const r=e.Yut(),n=e.Yut()+e.Qut(),h=i.Yut()+i.sct(),o=i.Yut();this.zut.set(e,fS.Gc(r,n,h,o))}}}}{const gS=self._s,yS=0,wS=1,SS=2,vS=3,bS=4,MS=5,TS=6,xS=7,CS=8;gS.Uut=class extends gS.Ur{constructor(t,s){super(),this.ict=t,this.rct=s[0],this.nct=s[1],this.hct=s[2],this.oct=s[3],this.act=s[4],this.lct=s[5],this.Dlt=s[6],this.klt=s[7],this.uct=s[8],this.hlt=null,this.Mlt=null}qr(){this.ict=null}static UC(t,s){return gS.Hr(gS.Uut,t,s)}llt(t){this.hlt=t}j7(){return this.hlt}xlt(t){this.Mlt=t}U7(){return this.Mlt}Yut(){return this.rct}Zut(){return this.nct}Qut(){return this.hct}tct(){return this.oct}sct(){return this.act}ect(){return this.lct}mat(){return this.Dlt}gat(){return this.klt}Kut(){return"linear"===this.uct}cct(){return"cubic"===this.uct}}}{const GS=self._s;GS.fct=class extends GS.Ur{constructor(t){super(),this.Bc=t,this.dct=[]}qr(){for(const t of this.dct)t.qr();GS.bh(this.dct),this.dct=null}UC(t){this.dct.push(GS.bc.UC(t))}}}{const _S=self._s;_S.pct=class extends _S.Ur{constructor(t){super(),this.Bc=t,this.mct=null,this.gct=null,this.a8=t=>this.l8(t.pq)}qr(){if(this.w8(),this.mct){for(const t of this.mct.values())t.clear();this.mct.clear()}this.mct=null,this.Bc=null}UC(t){if(this.mct||(this.mct=new Map),!t)return;const s=t[0][16][0],e=t[1];this.mct.has(e)||this.mct.set(e,new Map),this.mct.get(e).set(s,t)}S8(){const t=this.Bc.Sf();t&&t.addEventListener("instancedestroy",this.a8)}w8(){const t=this.Bc.Sf();t&&t.removeEventListener("instancedestroy",this.a8)}yct(){return!!this.mct&&0!==this.mct.size}wct(t,s){let e=0;if(e=t instanceof _S.Sct?t.Tk():t,!this.mct.has(e))return;const i=this.mct.get(e).get(s);return i?JSON.parse(JSON.stringify(i)):void 0}vct(t,s){this.gct||(this.gct=new WeakMap),this.gct.has(t)||this.gct.set(t,s)}bct(t){if(!this.gct)return"";return this.gct.get(t)||""}l8(t){this.gct&&this.gct.has(t)&&this.gct.delete(t)}}}{const IS=self._s;IS.Mct=class{constructor(t){this.Bc=t,this.Tct=new IS.xct}qr(){this.Tct.qr(),this.Tct=null,this.Bc=null}l$(){return this.Bc}UC(t){this.Tct.$u(t)}Cct(t){return this.Tct.Hs(t)}Gct(){return this.Tct.Gct()}}}{const PS=self._s;PS._ct=class{constructor(t,s,e,i,r,n,h){this.Bc=r.l$(),this.Ict=r,this.Pct=t,this.Rct=e,this.Act=i,this.Ew=s,this.j6=n,this.Ect=h??n.PJ().CU(),this.Oct(),this.Fct=this.Lct?.Dct()??-1,this.kct=[],this.Nct=null,this.Bct=NaN,this.$ct=null,this.Wct=null,this.Vct=null,this.jct="",this.Uct=null,this.zct="",this.Hct="",this.qct=0,this.Jct=!1,this.Mtt=!1}qr(){this.Mtt||(PS.bh(this.kct),this.kct=null,this.Bc=null,this.Ict=null,this.Act=null,this.j6=null,this.Nct=null,this.Bct=NaN,this.$ct&&this.$ct.clear(),this.$ct=null,this.Wct=null,this.Vct=null,this.jct="",this.Uct=null,this.zct="",this.Hct="",this.Mtt=!0)}Jr(){return this.Mtt}Yct(){return this.Ict}l$(){return this.Bc}Rc(){return this.Pct}Xct(){return this.Act}eJ(){return this.Ew}O8(){return this.j6||(this.j6=this.Bc.RB(this.Ect).eq()),this.j6}Zct(){return this.Kct(this.Fct)}Qct(){const t=this.Zct();return t?t.eJ():""}tft(){const t=this.Zct();return t?t.yJ():[]}sft(t){const s=this.tft();if(!s)return!1;if(!s.length)return!1;const e=PS._ct.hst(t);return!(!e||!e.length)&&e.every(PS._ct.ast,s)}eft(t,s){const e=this.tft();if(!e)return!1;if(!e.length)return!1;const i=PS._ct.hst(t);return!(!i||!i.length)&&i.every(t=>PS._ct.ift.call(e,t,s))}static ast(t){const s=this;return""===t?1===s.length&&""===s[0]:s.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static hst(t){return t.trim().split(" ")}static ift(t,s){const e=this;return""===t?1===e.length&&""===e[0]:e.some(e=>PS.compare(e.trim(),s,t.trim()))}rft(t){const s=this.Zct();if(s){if(PS.Ze(t)){const e=s.nft(),i=e?e[t]:void 0;if(PS.Ze(i))return this.Kct(i)}if("string"==typeof t)for(const e of s.nft()){const s=this.Kct(e);if(s.oJ(t))return this.Kct(s.Dct())}}}hft(t){const s=this.rft(t);return s?s.eJ():""}oft(t){const s=this.rft(t);return s?s.yJ():""}aft(t){const s=this.Zct();if(!s)return-1;const e=s.nft();if(!e)return-1;const i=this.rft(t);return i?e.indexOf(i.Dct()):-1}lft(){const t=this.Zct();if(!t)return 0;const s=t.nft();return s?s.length:0}Kct(t){return this.Act.Kct(t)}$f(){this.cft().uft(!0)}uft(t){if(this.fft()){for(const[t,s]of this.fft().entries())s.uft(!1);this.fft().clear()}if(this.$ct=null,this.Nct=null,this.dft=null,this.Wct=null,this.jct="",this.Uct=null,this.zct="",this.Hct="",this.kct=[],t){this.Ict.pft(this);const t=this.Lct.Dct();t!==this.Fct&&this.mft(t)}else this.Fct=this.Lct.Dct()}gft(){const t=this.Act.Kct(this.Fct);return t?t.wft().yft():0}Sft(t){return!(t<0)&&t===this.vft()}vft(){const t=this.Act.Kct(this.Fct);if(!t)return-1;let s=t.wft().bft();return s?t.wft().Mft().indexOf(s):-1}Tft(t){const s=this.xft(t);return s?s.Rc():""}Cft(t){let s;return PS.Ze(t)&&(s=this.xft(t)),"string"==typeof t&&(s=this.Gft(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Irt():""}_ft(t,s){if(t.pit())return t.Dct();{const e=t.wft().bft();if(!e)return s.Dct();const i=e.Ift();if(!PS.Ze(i))return s.Dct();const r=this.Kct(i);return r?this._ft(r,s):s.Dct()}}Pft(t,s){if(t.pit()){if("reference"===t.YG()){const s=t.Rft(),e=t.Aft(),i=this.Ict.Cct(s);if(!i)return[-1,null];const r=i.Eft(e);return r?this.Pft(r,i):this.Pft(i.Oft(),i)}return[t.Dct(),s]}{const e=t.wft().bft();if(!e)return[-1,null];const i=e.Ift();if(!PS.Ze(i))return[-1,null];const r=s.Kct(i);return r?this.Pft(r,s):[-1,null]}}Fft(t,s){let e=this.Kct(t);if(e){if(!e.pit()){const s=this.Kct(this.Fct);t=this._ft(e,s)}if(PS.Ze(t)&&t!==this.Fct)if(e=this.Kct(t),"reference"===e.YG()){const i=e.Rft(),r=e.Aft(),n=this.Ict.Cct(i);let h=n.Eft(r);if(h){const e=this.Pft(h,n);if(-1===e[0])return;s(this.Fct,t,e[1],e[0])}else s(this.Fct,t)}else s(this.Fct,t)}}Dft(t){let s;if(PS.Ze(t)&&(s=this.xft(t)),"string"==typeof t&&(s=this.Gft(t)),!s)return;let e=s.Ift();PS.Ze(e)&&this.Fft(e,(t,s,e,i)=>{this.kct.push(t),this.mft(s,e,i)})}Lft(){const t=this.kft();if(!t)return;const s=t.Ift();PS.Ze(s)&&this.Fft(s,(t,s,e,i)=>{this.kct.push(t),this.mft(s,e,i)})}Nft(t){const s=this.Act.Eft(t);if(!s)return;const e=s.Dct();PS.Ze(e)&&this.Fft(e,(t,s,e,i)=>{this.kct.push(t),this.mft(s,e,i)})}Bft(){const t=this.kct.pop();PS.Ze(t)?this.mft(t):this.$ft()&&(this.Ict.pft(this.$ft(),!0,!1,!1),this.$ft().mft(this.Wft()),this.cft().Vft(this.$ft()))}jft(t){if(!this.Zct())return;const s=this.rft(t);if(s){if(!s.pit())return;const t=s.Dct();if(!PS.Ze(t))return;this.kct.push(this.Fct),this.mft(s.Dct())}}Uft(t){if(PS.Ze(t))return!!this.Act.Kct(this.Fct).wft().Mft()[t];if("string"==typeof t){const s=this.Act.Kct(this.Fct).wft().Mft();for(let e=0;e<s.length;e++)if(s[e].Rc()===t)return!0;return!1}return!1}zft(){this.Jct=!0}Hft(){return this.qct>0}qft(){this.qct++}Jft(){this.qct--,0===this.qct&&this.Jct&&this.Ict.Yft(this)}mft(t,s,e){const i=this.Fct,r=this.O8().PJ();this.qft(),this.Ict.Xft(this),this.Bc.JU(PS.e$.Kft.t$.Zft,r),this.Bc.JU(PS.e$.Kft.t$.Qft,r),this.Bc.JU(PS.e$.Kft.t$.tdt,r),this.Bc.JU(PS.e$.Kft.t$.sdt,r),this.Fct=t;let n=this.Kct(this.Fct);if("dictionary"===n.YG()&&(this.Bc.JU(PS.e$.Kft.t$.edt,r),this.Bc.JU(PS.e$.Kft.t$.idt,r),this.Bc.JU(PS.e$.Kft.t$.rdt,r),this.Bc.JU(PS.e$.Kft.t$.ndt,r)),this.Ict.hdt(),this.Jft(),!this.Jr()&&(n=this.Kct(this.Fct),"reference"===n.YG())){const t=s?s.Rc():n.Rft();if(this.odt(n)){this.kct.pop();const t=this.adt(n);this.Ict.pft(t,!0,!0,!1),t.ldt(this,i),this.cft().Vft(t)}else{const s="number"==typeof e?e:n.Aft();if(t){this.kct.pop();let e=n.udt();if(e){let t=this.Ict.cdt(e);for(;t;)e=PS._m(e),t=this.Ict.cdt(e)}else{e=`${t}-ref`;let s=this.Ict.cdt(e);for(;s;)e=PS._m(e),s=this.Ict.cdt(e)}const r=this.Ict.fdt(t,s,e,this.j6,!0);r.ldt(this,i),this.ddt(n,r);const h=this.cft();r.pdt(h),h.Vft(r)}}}}kft(){const t=this.Act.Kct(this.Fct);return t?t.wft().bft():null}xft(t){const s=this.Act.Kct(this.Fct);if(!s)return null;const e=s.wft().Mft();if(!e)return null;return e[t]||null}Gft(t){const s=this.Act.Kct(this.Fct);if(!s)return null;return s.wft().mdt(t)||null}Oct(t){if("number"==typeof t){let s=this.Kct(t);s||(s=this.Act.Oft()),this.Lct=s}else if("number"==typeof this.Rct){let t=this.Kct(this.Rct);t||(t=this.Act.Oft()),this.Lct=t}else{let t=this.Act.Eft(this.Rct);t||(t=this.Act.Oft()),this.Lct=t}}i4(){return this.Jct?null:{flowchartName:this.Pct,flowchartTag:this.Ew,startNodeTag:this.Rct,currentNodeId:this.Fct,previousNodeIds:this.kct,pluginUID:this.j6.PJ().CU(),reference:{previousFlowchartTag:this.$ft()?this.$ft().eJ():"",previousStartNodeId:PS.Ze(this.Wft())?this.Wft():NaN,referencesJson:this.gdt(),currentReferenceFlowchartTag:this.ydt()?this.ydt().eJ():"",rootFlowchartTag:this.cft()?this.cft().eJ():""}}}gdt(){if(!this.wdt())return null;const t=[];for(const[s,e]of this.fft().entries())t.push({flowchartElementId:s.Dct(),flowchartStateTag:e.eJ()});return t.length?t:null}r4(t){if(t){if(this.Pct=t.flowchartName,this.Ew=t.flowchartTag,this.Rct=t.startNodeTag,this.Fct=t.currentNodeId,this.kct=t.previousNodeIds,this.Ect=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.jct=s.previousFlowchartTag,this.Bct=s.previousStartNodeId,this.Uct=s.referencesJson,this.zct=s.currentReferenceFlowchartTag,this.Hct=s.rootFlowchartTag}this.Oct()}}$ft(){return"string"==typeof this.jct&&this.jct&&(this.Nct=this.Ict.cdt(this.jct),this.jct=""),this.Nct}Wft(){return this.Bct}ldt(t,s){this.Nct=t,this.Bct=s}ydt(){return"string"==typeof this.zct&&this.zct&&(this.Wct=this.Ict.cdt(this.zct),this.zct=""),this.Wct}Vft(t){this.Wct=t,this.Wct===this&&(this.Wct=null)}cft(){return"string"==typeof this.Hct&&this.Hct&&(this.Vct=this.Ict.cdt(this.Hct),this.Hct=""),this.Vct?this.Vct:this}pdt(t){this.Vct=t}wdt(){return this.Sdt(),!!this.$ct}odt(t){return this.Sdt(),this.$ct&&this.$ct.has(t)}Sdt(){if(this.Uct){this.$ct&&this.$ct.clear(),this.$ct||(this.$ct=new Map);for(const t of this.Uct){const s=this.Ict.cdt(t.flowchartStateTag),e=s.Kct(t.flowchartElementId);this.$ct.set(e,s)}this.Uct=null}}fft(){return this.Sdt(),this.$ct}adt(t){return this.Sdt(),this.$ct.get(t)}ddt(t,s){this.$ct||(this.$ct=new Map),this.$ct.set(t,s)}}}{const RS=self._s;RS.vdt=class{constructor(t){this.Bc=t,this.bdt=new Map,this.Mdt=null,this.Tdt=[],this.xdt=()=>this.d8(),this.Cdt=null}qr(){RS.bh(this.Tdt),this.Tdt=null,this.bdt.clear(),this.bdt=null,this.Mdt=null,this.Bc=null,this.Cdt=null}l$(){return this.Bc}Cct(t){return this.Bc.Yct().Cct(t)}fdt(t,s,e,i,r,n){const h=this.Bc.Yct().Cct(t);if(!h)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.bdt.has(e)){const t=this.bdt.get(e);t&&this.Yft(t)}const o=new RS._ct(t,e,s,h,this,i,n);return this.bdt.set(e,o),r&&this.pft(o,!0),o}Yft(t){if(t.zft(),t.Hft())return;const s=t.eJ();this.bdt.delete(s),t.qr(),this.Mdt===t&&(this.Mdt=null)}Gdt(t){t.$f()}cdt(t){return this.bdt.get(t)}Xft(t){this.Tdt.push(t)}hdt(){this.Tdt.pop()}pft(t,s=!1,e=!1,i=!0){if(i){const s=t.ydt();t=s||t}t!==this.Mdt&&(this._dt(),this.Idt(t,s,e))}Pdt(t){return"string"==typeof t?this.cdt(t):this.Tdt.length?this.Tdt[this.Tdt.length-1]:this.Mdt}_dt(){if(!this.Mdt)return;if(this.Mdt.Jr())return;const t=this.Mdt.O8().PJ();this.Mdt.qft(),this.Xft(this.Mdt),this.Bc.JU(RS.e$.Kft.t$.Rdt,t),this.hdt(),this.Mdt.Jft()}Idt(t,s=!1,e=!1){if(this.Mdt=t,!this.Mdt)return;if(this.Mdt.Jr())return;const i=this.Mdt.O8().PJ();this.Mdt.qft(),this.Xft(this.Mdt),this.Bc.JU(RS.e$.Kft.t$.Adt,i),!0!==e&&"number"!=typeof e||this.Mdt.Oct(e),s&&(this.Bc.JU(RS.e$.Kft.t$.edt,i),this.Bc.JU(RS.e$.Kft.t$.idt,i),this.Bc.JU(RS.e$.Kft.t$.rdt,i),this.Bc.JU(RS.e$.Kft.t$.ndt,i)),this.hdt(),this.Mdt.Jft()}i4(){return{flowchartJsonObjects:[...this.bdt.values()].map(t=>t.i4()),currentFlowchartTag:this.Mdt?this.Mdt.eJ():null}}r4(t){if(!t)return;this.Cdt=t;const s=new Map;for(const t of this.Cdt.flowchartJsonObjects){const e=t.flowchartTag;if(this.bdt.has(e)){const i=this.bdt.get(e);i.r4(t),s.set(e,i)}else{const e=this.fdt(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);e.r4(t),s.set(t.flowchartTag,e)}}for(const[t,e]of this.bdt.entries())s.has(t)||e.qr();this.bdt.clear(),this.bdt=s,this.Bc.N5()?this.Bc.Sf().addEventListener("afterload",this.xdt):this.d8()}d8(){this.Bc.Sf().removeEventListener("afterload",this.xdt);const t=this.bdt.get(this.Cdt.currentFlowchartTag);t&&this.pft(t,!0),this.Cdt=null}}}{const AS=self._s;AS.xct=class{constructor(){this.Edt=new Map}qr(){for(const t of this.Edt.values())t.qr();this.Edt.clear(),this.Edt=null}$u(t){const s=new AS.Odt(t),e=s.Rc();this.Edt.set(e,s)}Hs(t){return this.Edt.get(t)}Gct(){return!!this.Edt.size}static Fdt(t,s,e,i){if(s)for(const r of s){const s=new e(r,i);t.push(s)}}}}{const ES=self._s,OS=0,FS=1;ES.Odt=class{constructor(t){this.Xr=t[0],this.Ddt=new ES.Ldt(t[1],this)}qr(){this.Ddt.qr(),this.Ddt=null}kdt(){return this.Ddt}Kct(t){return this.Ddt.Kct(t)}Eft(t){return this.Ddt.Eft(t)}Oft(){return this.Ddt.Oft()}Rc(){return this.Xr}}}{const DS=self._s,LS=0,kS=1,NS=2,BS=3,$S=4,WS=5,VS=6,jS=7,US=8,zS=8,HS=9,qS=10,JS=11;class YS{constructor(t,s){this.Ddt=s,this.qc=t[7],this.Ndt=t[0],this.Ew=t[1],this.Ew?this.Rtt=this.Ew.trim().split(" ").map(t=>t.trim()):this.Rtt=[],this.Bdt=t[2],this.$dt=null,this.Wdt=null,this.rlt=!1,"dictionary"===this.qc&&(this.$dt=t[3],this.Wdt=t[4],this.rlt=t[8]),this.Vdt=t[6],this.jdt=null,this.Udt=null,this.zdt=null,"reference"===this.qc&&(this.jdt=t[8],this.Udt=t[9],this.zdt=t[10],this.rlt=t[11]),this.Hdt=new DS.qdt(t[5],this)}qr(){this.Ddt=null}kdt(){return this.Ddt}wft(){return this.Hdt}Dct(){return this.Ndt}eJ(){return this.Ew}yJ(){return this.Rtt}oJ(t){if(!this.Rtt)return!1;if(!this.Rtt.length)return!1;const s=DS._ct.hst(t);return!(!s||!s.length)&&s.every(DS._ct.ast,this.Rtt)}Jdt(){return this.Vdt}Ydt(t){this.Vdt=!!t}Xdt(){if("dictionary"===this.qc)return!0;if("reference"===this.qc)return!1;throw new Error(`unexpected flowchart node type: ${this.qc}`)}nft(){return this.Bdt}Zdt(){return this.$dt}Kdt(){return this.Wdt}YG(){return this.qc}pit(){return this.rlt}Rft(){return this.jdt}Aft(){return this.Udt}udt(){return this.zdt}}DS.Ldt=class{constructor(t,s){this.Act=s,this.Qdt=[],this.tpt=new Map,this.spt=new Map,this.ept=null,DS.xct.Fdt(this.Qdt,t,YS,this);for(const t of this.Qdt){const s=t.Dct(),e=t.eJ(),i=t.yJ(),r=t.Jdt();if(this.tpt.set(s,t),e)for(const s of i)this.spt.has(s)||this.spt.set(s,new Set),this.spt.get(s).add(t);r&&(this.ept=t);const n=t.wft();for(const t of n.ipt()){const s=t.Dct();this.tpt.set(s,t)}}this.ept||this.rpt()}qr(){this.Act=null;for(const t of this.Qdt)t.qr();DS.bh(this.Qdt),this.Qdt=null}Xct(){return this.Act}Kct(t){return this.tpt.get(t)}Eft(t){if(!t||!t.length)return null;const s=[];for(const e of t.trim().split(" ")){let t=this.spt.get(e.trim())??new Set;if(0===t.size)return null;s.push(t)}return[...s.reduce((t,s)=>s.size<t.size?s:t)].filter(t=>s.every(s=>s.has(t)))[0]}Oft(){return this.ept}*npt(){for(const t of this.Qdt)yield t}rpt(){let t=0;for(const s of this.npt())s.Jdt()&&t++;if(0===t){for(const t of this.npt())if(t.Xdt()&&!t.Jdt())return void t.Ydt(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const s of this.npt())s.Xdt()&&(s.Jdt()&&t?t=!1:s.Jdt()&&!t&&s.Ydt(!1))}}for(const t of this.npt())if(t.Xdt()&&t.Jdt())return void(this.ept=t)}}}{const XS=self._s,ZS=0,KS=1,QS=2,tv=3,sv=4,ev=5;class iv{constructor(t,s){this.Hdt=s,this.Ndt=t[0],this.Xr=t[1],this.eht=t[2],this.hpt=t[3],this.rlt=t[4],this.opt=t[5]}qr(){this.Hdt=null}wft(){return this.Hdt}Dct(){return this.Ndt}Rc(){return this.Xr}Irt(){return this.eht}Ift(){return this.hpt}pit(){return this.rlt}apt(){return this.opt}}XS.qdt=class{constructor(t,s){this.lpt=s,this.upt=[],this.cpt=new Map,XS.xct.Fdt(this.upt,t,iv,this),this.fpt=this.upt.filter(t=>t.pit());for(const t of this.fpt)this.cpt.set(t.Rc(),t)}qr(){this.lpt=null;for(const t of this.upt)t.qr();XS.bh(this.upt),this.upt=null,XS.bh(this.fpt),this.fpt=null}dpt(){return this.lpt}yft(){return this.fpt.length}Mft(){return this.fpt}mdt(t){return this.cpt.get(t)}bft(){for(const t of this.fpt)if(t.apt())return t}*ipt(){for(const t of this.fpt)yield t}}}{const rv=self._s;rv.ppt=class extends rv.Ur{constructor(t){super(),this.mpt=t,this.gpt=[],this.gpt.push(rv.Hr(rv.ypt,this)),this.Aw=0,this.wpt=this.gpt[0]}qr(){for(const t of this.gpt)t.qr();rv.bh(this.gpt),this.wpt=null,this.mpt=null}fU(){return this.mpt}rV(){return this.wpt}Spt(){return this.gpt[this.Aw-1]}Ru(){this.rV().Ru()}vpt(){const t=this.gpt,s=++this.Aw;if(s===t.length){const s=rv.Hr(rv.ypt,this);t.push(s),this.wpt=s}else{const e=t[s];e.$f(),this.wpt=e}}bpt(){const t=this.gpt,s=++this.Aw;s===t.length&&t.push(rv.Hr(rv.ypt,this));const e=t[s];e.hd(t[s-1]),this.wpt=e}dX(){this.wpt=this.gpt[--this.Aw]}Mpt(t){const s=this.gpt;for(let e=0,i=s.length;e<i;++e)s[e].Mpt(t)}}}{const nv=self._s;nv.ypt=class extends nv.Ur{constructor(t){super(),this.gpt=t,this.mpt=this.gpt.fU(),this.Tpt=this.mpt.l$().bN(),this.xpt=!0,this.dQ=[],this.Cpt=[]}qr(){this.Gpt(),this.gpt=null,this.mpt=null,this.Tpt=null}Gpt(){nv.bh(this.dQ),nv.bh(this.Cpt)}fU(){return this.mpt}_pt(){return this.xpt}Ipt(){return this.xpt?!!this.mpt.oV():!!this.dQ.length}iV(){return this.xpt?this.mpt.iV():this.dQ}Ppt(){return!!this.Cpt.length}Rpt(){return this.Cpt}Apt(){const t=this.iV();return t.length?t:this.Cpt}$f(){this.xpt=!0,nv.bh(this.Cpt)}Ru(){this.xpt=!0}hd(t){t._pt()?this.$f():(this.xpt=!1,nv.Ch(this.dQ,t.dQ),nv.bh(this.Cpt))}Ept(t){this.dQ.push(t)}Opt(t){this.Cpt.push(t)}Fpt(t){this.xpt=!!t}Dpt(){return this.dQ}Lpt(){return this.Cpt}kpt(t){this.xpt=!1,nv.bh(this.dQ),this.dQ.push(t)}Npt(t){this.xpt=!1,nv.Ch(this.dQ,t)}Bpt(t){this.xpt=!1,nv.bh(this.dQ);for(const s of t)this.dQ.push(s)}$pt(t,s){for(const e of s)t.has(e)||this.Cpt.push(e)}Wpt(t){for(const s of t)this.dQ.push(s);nv.Rh(this.Cpt,t)}Vpt(){nv.bh(this.Cpt)}jpt(t){if(t)if(this.Tpt.sX().pN().Upt()){this._pt()&&(nv.bh(this.dQ),nv.Ch(this.Cpt,t.fU().iV()),this.xpt=!1);const s=this.Cpt.indexOf(t);-1!==s&&(this.dQ.push(this.Cpt[s]),this.Cpt.splice(s,1))}else this.kpt(t)}Mpt(t){nv.Rh(this.dQ,t),nv.Rh(this.Cpt,t)}}}{const hv=self._s;hv.zpt=class extends hv.Ur{constructor(t){super(),this.Hpt=t,this.Bc=this.Hpt.l$(),this.gpt=[],this.gpt.push(hv.Hr(hv.qpt,this,null)),this.Aw=0,this.Jpt=[]}qr(){for(const t of this.gpt)t.qr();hv.bh(this.gpt),hv.bh(this.Jpt),this.Hpt=null,this.Bc=null}aN(){return this.Hpt}l$(){return this.Bc}sX(){return this.gpt[this.Aw]}Ypt(){return this.gpt}Xpt(){return this.Aw}eX(t){const s=this.gpt,e=++this.Aw;if(e===s.length){const e=hv.Hr(hv.qpt,this,t);return s.push(e),e}{const i=s[e];return i.$f(t),i}}dX(){--this.Aw}Zpt(t){this.Jpt.push(t)}Kpt(){this.Jpt.pop()}vN(){const t=this.Jpt;return 0===t.length?null:t.at(-1)}}}{const ov=self._s;ov.qpt=class extends ov.Ur{constructor(t,s){super(),this.gpt=t,this.Bc=this.gpt.l$(),this.Qpt=s,this.tmt=0,this.smt=0,this.emt=!1,this.imt=!1,this.rmt=null,this.nmt=0,this.hmt=0,this.omt=null}qr(){this.$f(null),this.gpt=null,this.Bc=null}$f(t){this.Qpt=t,this.tmt=0,this.smt=0,this.emt=!1,this.imt=!1,this.omt=null}amt(t,s){this.Qpt=t,this.tmt=0,this.smt=s}lmt(){this.tmt=0,this.smt=0}pN(){return this.Qpt}umt(t){this.Qpt=t}cmt(){return this.tmt}fmt(t){this.tmt=t}dmt(){return this.smt}pmt(t){this.smt=t}mmt(t){this.emt=!!t}gmt(){return this.emt}ymt(t){this.imt=!!t}wmt(){return this.imt}Smt(t){this.rmt=t}vmt(){return this.rmt}bmt(t,s){this.nmt=t,this.hmt=s}MN(){return this.nmt}TN(t){this.hmt=t}Mmt(){return this.hmt}Tmt(){const t=this.Qpt;return!!t.xmt()||this.tmt<t.Cmt()-1&&!!t.tX().length}Gmt(t){this.omt=t}_mt(){return this.omt}}}{const av=self._s;av.Imt=class extends av.Ur{constructor(t){super(),this.Hpt=t,this.Bc=this.Hpt.l$(),this.gpt=[],this.Aw=-1,this.wpt=null,this.Pmt=[]}qr(){av.bh(this.gpt),this.Hpt=null,this.Bc=null}Rmt(t){this.Pmt=t;const s=this.Pmt.slice(0);this.gpt.push(s),this.Aw=0,this.wpt=s}aN(){return this.Hpt}l$(){return this.Bc}Amt(){return this.wpt}eX(){const t=++this.Aw,s=this.gpt;t===s.length?s.push(this.Pmt.slice(0)):av.Ch(s[t],this.Pmt),this.wpt=s[t]}dX(){this.wpt=this.gpt[--this.Aw]}}}{const lv=self._s;lv.Emt=class extends lv.Ur{constructor(t){super(),this.Hpt=t,this.Bc=this.Hpt.l$(),this.gpt=[],this.Aw=-1}qr(){lv.bh(this.gpt),this.Hpt=null,this.Bc=null}aN(){return this.Hpt}l$(){return this.Bc}Omt(){return this.Aw>=0}Amt(){return this.gpt[this.Aw]}eX(){if(++this.Aw,this.Aw===this.gpt.length){const t=lv.Hr(lv.Fmt,this);return this.gpt.push(t),t}{const t=this.gpt[this.Aw];return t.$f(),t}}dX(){--this.Aw}Dmt(t){const s=this.gpt;for(let e=this.Aw;e>=0;--e){const i=s[e];if(i.Rc()===t)return i}return null}Lmt(){return this.gpt.slice(0,this.Aw+1)}}}{const uv=self._s;uv.Fmt=class extends uv.Ur{constructor(t){super(),this.kmt=t,this.Xr="",this.Aw=0,this.Nmt=!1,this.Bmt=NaN}$f(){this.Xr="",this.Aw=0,this.Nmt=!1,this.Bmt=NaN}rX(t){this.Xr=t}Rc(){return this.Xr}uX(t){this.Aw=t}Tk(){return this.Aw}nJ(){this.Nmt=!0}fX(){return this.Nmt}$mt(t){this.Bmt=t}Wmt(){return this.Bmt}}}{const cv=self._s;cv.Vmt=class extends cv.Ur{constructor(){super(),this.gpt=[],this.Aw=-1}qr(){cv.bh(this.gpt)}Amt(){return this.gpt[this.Aw]}eX(){if(++this.Aw,this.Aw===this.gpt.length){const t=[];return this.gpt.push(t),t}return this.gpt[this.Aw]}dX(){--this.Aw}}}{let fv=function(t,s){return t.Tk()-s.Tk()},dv=function(t,s){for(let e=0,i=t.length;e<i;++e)if(t[e]!==s[e])return!1;return!0};SortSolArray=fv,IsSolArrayIdentical=dv;const pv=self._s,mv=self.assert;pv.jmt=class extends pv.Ur{constructor(t){super(),this.Bc=t,this.Umt=[],this.zmt=new Map,this.Hmt=[],this.qmt=new Map,this.Jmt=new Map,this.Ymt=new Map,this.Xmt=new Map,this.Zmt=new Map,this.Kmt=new Map,this.Qmt=0,this.tgt=[],this.sgt=[],this.egt=[],this.igt=new Map,this.rgt=new Map,this.Tpt=pv.Hr(pv.zpt,this),this.ngt=pv.Hr(pv.Imt,this),this.kmt=pv.Hr(pv.Emt,this),this.hgt=[],this.ogt=[],this.agt=[],this.lgt=0,this.ugt=0,this.cgt=0,this.fgt=[],this.dgt=[],this.pgt=[],this.mgt=new Map,this.ggt=new Map,self.c3_callFunction=(t,s)=>this.ygt(t,s)}qr(){this.i6(),this.Tpt.qr(),this.Tpt=null,this.ngt.qr(),this.ngt=null,pv.bh(this.ogt),pv.bh(this.agt),this.Bc=null,pv.bh(this.Umt),this.zmt.clear()}UC(t){const s=pv.Hr(pv.wgt,this,t);this.Umt.push(s),this.zmt.set(s.Rc().toLowerCase(),s)}Sgt(t){this.hgt.push(t)}vgt(){for(const t of this.rgt.values())t.bgt();for(const t of this.igt.values())t.vgt();for(const t of this.rgt.values())t.vgt();for(const t of this.Umt)t.vgt();for(const t of this.Umt)t._5();for(const t of this.hgt)t.vgt(!1);pv.bh(this.hgt),this.ngt.Rmt(this.egt)}l$(){return this.Bc}G5(t){return this.zmt.get(t.toLowerCase())||null}Mgt(t){this.Hmt.push(t),this.qmt.set(t.Tgt(),t)}xgt(t){this.Jmt.set(t.I1(),t)}Cgt(t){this.Ymt.set(t.I1(),t)}Ggt(t){this.Xmt.set(t.I1(),t)}_gt(t){switch(t.Igt()){case 0:this.igt.set(t.Pgt().toLowerCase(),t);break;case 1:this.rgt.set(t.Pgt().toLowerCase(),t)}}Rgt(t){this.Kmt.set(t.I1(),t),t.WQ()?this.tgt.push(t):this.sgt.push(t)}Agt(t){t.length>=2&&t.sort(fv);let s=this.Zmt.get(t.length);s||(s=[],this.Zmt.set(t.length,s));for(let e=0,i=s.length;e<i;++e){const i=s[e];if(dv(t,i))return i}return s.push(t),t}Egt(t){return this.egt.push(t.Ogt()),this.Qmt++}bN(){return this.Tpt}Fgt(){return this.bN().sX()}pN(){return this.Fgt().pN()}Dgt(){const t=this.Fgt();return t.pN().Lgt(t.cmt())}kgt(){const t=this.Fgt();return t.pN().Ngt(t.dmt())}Bgt(){return this.ngt}iX(){return this.kmt}$gt(t){const s=[];for(t=t.Wgt();t;)pv.Fr(s,t.Vgt()),t=t.Wgt();return s}jgt(t){const s={};for(const e of this.$gt(t))s[e.Ugt()]=e.zgt();return Object.create(Object.prototype,s)}Hgt(t){return this.Kmt.get(t)||null}qgt(t){return this.Jmt.get(t)||null}Jgt(t){return this.Ymt.get(t)||null}Ygt(t){return this.Xmt.get(t)||null}lN(t){return this.igt.get(t.toLowerCase())||null}Xgt(t,s){let e=this.rgt.get((t.Rc()+"."+s).toLowerCase());if(e)return e;if(!t.v1())for(const i of t.yV())if(e=this.rgt.get((i.Rc()+"."+s).toLowerCase()),e)return e;return null}Zgt(){return this.tgt}Kgt(){return this.sgt}Qgt(t){for(const t of this.tgt)t.tyt();if(t)for(const t of this.sgt)t.qx()&&t.tyt()}syt(t){return this.qmt.get(t.toLowerCase())||null}eyt(t){const s=this.Jmt.get(t);return s&&s.iyt()?s:null}ryt(){return this.Hmt}nyt(){for(const t of this.Hmt)t.hyt()}oyt(){for(const t of this.Umt)t.ayt()}lyt(t){this.oyt(),this.lgt++;for(const s of t.F6()){const t=s.t5();t&&(this.Bc.uyt(s),t.gP(),this.Bc.cyt())}this.lgt--}async fyt(t){this.oyt(),this.lgt++;for(const s of this.dyt(t))await this.Bc.pyt(s);this.lgt--}*dyt(t){for(const s of t.F6()){const t=s.t5();t&&(this.Bc.uyt(s),yield*t.myt(),this.Bc.cyt())}}gyt(t,s,e,i){let r=!1;if(!t.cB())return this.yyt(s,e,i);this.ugt++;for(const n of t.F6()){const t=n.t5();if(!t)continue;this.Bc.uyt(n);for(const n of t.wyt()){const t=n.gyt(s,e,i);r=r||t}const h=t.gyt(s,e,i);r=r||h,this.Bc.cyt()}return this.ugt--,r}*Syt(t,s,e,i){let r=!1;if(!t.cB())return this.yyt(s,e,i);this.ugt++;for(const n of t.F6()){const t=n.t5();if(!t)continue;this.Bc.uyt(n);for(const n of t.wyt()){const t=yield*n.Syt(s,e,i);r=r||t}const h=yield*t.Syt(s,e,i);r=r||h,this.Bc.cyt()}return this.ugt--,r}yyt(t,s,e){return this.ogt.push([t,s,e]),!1}vyt(t,s,e){let i=null;const r=new Promise(t=>i=t);return this.agt.push([t,s,e,i]),r}*byt(){if(this.Bc.Myt())throw new Error("should not be in breakpoint");const t=this.Bc.pB();for(;this.agt.length;){const[s,e,i,r]=this.agt.shift();r(yield*this.Syt(t,s,e,i))}}async Tyt(){for(const t of this.byt())await this.Bc.pyt(t)}xyt(t,s,e,i){let r=!1;const n=t.cB(),h=n.t5();if(!h)return;this.ugt++,this.Bc.uyt(n);const o=h.wyt();for(let t=0,n=o.length;t<n;++t){const n=o[t].xyt(s,e,i);r=r||n}const a=h.xyt(s,e,i);return r=r||a,this.Bc.cyt(),this.ugt--,r}*Cyt(t,s,e,i){let r=!1;const n=t.cB(),h=n.t5();if(!h)return;this.ugt++,this.Bc.uyt(n);const o=h.wyt();for(let t=0,n=o.length;t<n;++t){const n=yield*o[t].Cyt(s,e,i);r=r||n}const a=yield*h.Cyt(s,e,i);return r=r||a,this.Bc.cyt(),this.ugt--,r}Gyt(){return this.ugt}_yt(){return this.Gyt()>0}Iyt(){return++this.ugt}Pyt(){--this.ugt}Ryt(){return this.lgt>0}dV(){return this.Ryt()||this._yt()}J5(t){for(const[s,e,i]of this.ogt)this.gyt(t,s,e,i);pv.bh(this.ogt)}cV(t){t?this.cgt++:this.cgt--}SU(){return this.cgt>0}Ayt(t){for(let s=0,e=t.length;s<e;++s)t[s].Eyt().Ru()}Oyt(t){for(let s=0,e=t.length;s<e;++s)t[s].Eyt().vpt()}oX(t){for(let s=0,e=t.length;s<e;++s)t[s].Eyt().bpt()}lX(t){for(let s=0,e=t.length;s<e;++s)t[s].Eyt().dX()}mN(t){const s=new Set,e=this.Tpt.Ypt(),i=this.Tpt.Xpt();for(let r=0;r<=i;++r){const i=e[r]._mt();if(i)for(const e of i)t&&t.has(e)||s.add(e)}return s}Fyt(t){const s=new Set([...t]),e=this.mN(s);if(e.size>0){for(const t of e)t.Eyt().vpt();return[...e]}return null}Dyt(){const t=pv.Hr(pv.Lyt,this);return this.fgt.push(t),t}kyt(){return this.fgt}Nyt(){if(!this.fgt.length)return;const t=this.Fgt();let s=!1;this.lgt++;for(let e=0,i=this.fgt.length;e<i;++e){const i=this.fgt[e];i.Byt()&&i.$yt(t),i.Wyt()&&(s=!0)}s&&(this.Vyt(),t.$f(null)),this.lgt--}async jyt(){if(!this.fgt.length)return;const t=this.Fgt();let s=!1;this.lgt++;for(let e=0,i=this.fgt.length;e<i;++e){const i=this.fgt[e];i.Byt()&&await i.Uyt(t),i.Wyt()&&(s=!0)}s&&(this.Vyt(),t.$f(null)),this.lgt--}Vyt(){const t=pv.Ph(this.fgt,t=>t.Wyt());for(const s of t)s.qr()}i6(){for(const t of this.fgt)t.qr();pv.bh(this.fgt)}zyt(t){for(const s of this.fgt)s.Mpt(t);for(const s of t){const t=this.ggt.get(s);if(this.ggt.delete(s),t)for(const{resolve:s}of t.Hyt.values())s(!0)}}qyt(t){this.dgt.push({promise:t,Jyt:this.Gyt()})}Yyt(){pv.bh(this.dgt)}Xyt(){const t=this.Gyt(),s=Promise.all(this.dgt.filter(s=>s.Jyt===t).map(t=>t.promise));return this.dgt=this.dgt.filter(s=>s.Jyt<t),s}xN(t){const s=t.toLowerCase();this.pgt.push(s),this.Bc.JU(pv.e$.s$.t$.Zyt,null),this.pgt.pop();for(const t of this.Bc.aN().kyt())t.Kyt()&&t.Qyt()===s&&t.twt();const e=this.mgt.get(s);e&&(e.resolve(),this.mgt.delete(s))}GN(t){const s=t.toLowerCase(),e=this.mgt.get(s);if(e)return e.promise;{let t=null;const e=new Promise(s=>t=s);return this.mgt.set(s,{promise:e,resolve:t}),e}}swt(){if(0===this.pgt.length)throw new Error("not in a signal");return this.pgt.at(-1)}ewt(t){let s=this.ggt.get(t);return s||(s={iwt:[],Hyt:new Map},this.ggt.set(t,s)),s}NU(t,s){const e=this.ewt(t),i=s.toLowerCase();e.iwt.push(i),this.Bc.JU(t.HW().nwt().t$.rwt,t),e.iwt.pop();for(const s of this.Bc.aN().kyt())s.hwt()&&s.Qyt()===i&&s.owt(t);const r=e.Hyt.get(i);r&&(r.resolve(!1),e.Hyt.delete(i)),0===e.iwt.length&&0===e.Hyt.size&&this.ggt.delete(t)}BU(t,s){const e=this.ewt(t),i=s.toLowerCase(),r=e.Hyt.get(i);if(r)return r.promise;{let t=null;const s=new Promise(s=>t=s);return e.Hyt.set(i,{promise:s,resolve:t}),s}}awt(t){const s=this.ewt(t);if(!s||0===s.iwt.length)throw new Error("not in a signal");return s.iwt.at(-1)}i4(){return{groups:this.lwt(),cnds:this.uwt(),acts:this.cwt(),vars:this.fwt(),waits:this.dwt()}}r4(t){this.pwt(t.groups),this.mwt(t.cnds),this.gwt(t.acts),this.ywt(t.vars),this.wwt(t.waits)}lwt(){const t={};for(const s of this.ryt())t[s.I1().toString()]=s.Swt();return t}pwt(t){for(const[s,e]of Object.entries(t)){const t=parseInt(s,10),i=this.eyt(t);i&&i.vwt(e)}}uwt(){const t={};for(const[s,e]of this.Ymt){const i=e.i4();i&&(t[s.toString()]=i)}return t}mwt(t){const s=new Map;for(const[e,i]of Object.entries(t))s.set(parseInt(e,10),i);for(const[t,e]of this.Ymt)e.r4(s.get(t)||null)}cwt(){const t={};for(const[s,e]of this.Xmt){const i=e.i4();i&&(t[s.toString()]=i)}return t}gwt(t){const s=new Map;for(const[e,i]of Object.entries(t))s.set(parseInt(e,10),i);for(const[t,e]of this.Xmt)e.r4(s.get(t)||null)}fwt(){const t={};for(const[s,e]of this.Kmt)e.bwt()||!e.WQ()&&!e.qx()||(t[s.toString()]=e.Irt());return t}ywt(t){for(const[s,e]of Object.entries(t)){const t=parseInt(s,10),i=this.Hgt(t);i&&i.unt(e)}}dwt(){return this.fgt.filter(t=>!t.Mwt()).map(t=>t.i4())}wwt(t){this.i6();for(const s of t){const t=pv.Lyt.Twt(this,s);t&&this.fgt.push(t)}}xwt(){return[...this.Bc.pB().F6()].map(t=>t.t5()).filter(t=>t).map(t=>t.Cwt())}Gwt(t){for(;t;){const s=t.Wgt();if(s instanceof pv._wt)return s;t=s}return null}ygt(t,s){Array.isArray(s)||(s=[]);const e=this.lN(t.toLowerCase());if(!e)return null;if(!e._u())return e.uN();const i=e.Iwt();if(s.length<i.length){s=s.slice(0);do{s.push(i[s.length].Ogt())}while(s.length<i.length)}const r=e.fN();return r.gN(r.dN(),!1,e.wN(),e.uN(),...s)}}}{const gv=self._s;gv.wgt=class extends gv.Ur{constructor(t,s){super(),this.Hpt=t,this.Bc=t.l$(),this.Xr=s[0],this.Pwt=[],this.Rwt=new Map,this.Awt=new Map,this.Ewt=new Map,this.Owt=!1,this.Fwt=[],this.Dwt=[],this.Lwt=new Set;for(const t of s[1])this.kwt(t,null,this.Pwt);this.Nwt=this.Bc.ez()?{type:"sheet",name:this.Xr,Bwt:0,children:[]}:null}qr(){this.Hpt=null,this.Bc=null}kwt(t,s,e){switch(t[0]){case 0:case 3:this.$wt(t,s,e);break;case 1:this.Wwt(t,s,e);break;case 2:this.Vwt(t,s,e);break;case 4:this.jwt(t,s);break;case 5:this.Uwt(t,s,e);break;case 6:this.zwt(t,s);break;default:throw new Error("invalid event type")}}$wt(t,s,e){const i=gv.Hwt.UC(this,s,t);if(i.Upt()){e.push(i);const t=i.qwt();for(let s=0,e=t.length;s<e;++s)t[s].Jwt()&&this.Ywt(i,s)}else i.Jwt()?this.Ywt(i,0):e.push(i)}jwt(t,s){const e=gv._wt.Xwt(this,s,t);this.Hpt._gt(e)}zwt(t,s){const e=gv._wt.Zwt(this,s,t);this.Hpt._gt(e)}Wwt(t,s,e){const i=gv.Kwt.UC(this,s,t);e.push(i)}Vwt(t,s,e){const i=gv.Qwt.UC(this,s,t);e.push(i)}Uwt(t,s,e){const i=gv.tSt.UC(this,s,t);e.push(i)}Ywt(t,s){t.Upt()||this.Hpt.Sgt(t);const e=t.Lgt(s),i=e.sSt(),r=e.fU();if(e.eSt()){let n=this.Awt.get(r);n||(n=new Map,this.Awt.set(r,n));const h=e.iSt().toLowerCase();let o=n.get(i);o||(o=new Map,n.set(i,o));let a=o.get(h);a||(a=[],o.set(h,a)),a.push([t,s])}else{let n=this.Rwt.get(r);n||(n={rSt:new Map,nSt:new Map},this.Rwt.set(r,n));const h=e.fq();let o;h?(o=n.nSt.get(h),o||(o=new Map,n.nSt.set(h,o))):o=n.rSt;let a=o.get(i);a||(a=[],o.set(i,a)),a.push([t,s])}}vgt(){const t=this.Pwt;for(let s=0,e=t.length;s<e;++s){const i=s<e-1&&t[s+1]instanceof gv.Hwt&&t[s+1].hSt();t[s].vgt(i)}}oSt(t){this.Fwt.push(t)}_5(){gv.bh(this.Dwt),this.aSt(this),this.Lwt.clear()}aSt(t){const s=t.Dwt,e=t.Lwt;for(const i of this.Fwt){const r=i.lSt();i.uSt()&&t!==r&&!e.has(r)&&(e.add(r),r.aSt(t),s.push(r))}}wyt(){return this.Dwt}aN(){return this.Hpt}l$(){return this.Bc}Rc(){return this.Xr}cSt(t,s){this.Ewt.set(s,t)}fSt(t){return this.Ewt.get(t)||null}ayt(){this.Owt=!1}gP(){if(this.Owt)return;const t=this.Bc,s=t.dSt(),e=s?performance.now():0;this.Owt=!0;const i=this.aN(),r=i.Fgt();for(const s of this.Pwt)s.gP(r),i.Ayt(s.tX()),i.Yyt(),t.mV();r.$f(null),s&&(this.Nwt.Bwt+=performance.now()-e)}*myt(){if(this.Owt)return;this.Owt=!0;const t=this.Bc,s=this.aN(),e=s.Fgt();for(const i of this.Pwt)yield*i.myt(e),s.Ayt(i.tX()),s.Yyt(),t.mV();e.$f(null)}gyt(t,s,e){if(!s)return this.pSt(t,s,null,null);{const i=s.fU();let r=!1,n=this.pSt(t,s,i,e);r=r||n;for(const h of i.yV())n=this.pSt(t,s,h,e),r=r||n}}pSt(t,s,e,i){const r=this.Rwt.get(e);if(!r)return!1;const n=i?r.nSt.get(i):r.rSt;if(!n)return!1;const h=n.get(t);if(!h)return!1;let o=!1;for(const[t,e]of h){const i=this.mSt(s,t,e);o=o||i}return o}*Syt(t,s,e){if(!s)return yield*this.gSt(t,s,null,null);{const i=s.fU();let r=!1,n=yield*this.gSt(t,s,i,e);r=r||n;for(const h of i.yV())n=yield*this.gSt(t,s,h,e),r=r||n}}*gSt(t,s,e,i){const r=this.Rwt.get(e);if(!r)return!1;const n=i?r.nSt.get(i):r.rSt;if(!n)return!1;const h=n.get(t);if(!h)return!1;let o=!1;for(const[t,e]of h){let i;i=t.ySt()?this.mSt(s,t,e):yield*this.wSt(s,t,e),o=o||i}return o}xyt(t,s,e){const i=s.fU(),r=this.Awt.get(i);if(!r)return!1;const n=r.get(t);if(!n)return!1;const h=n.get(e);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],e=this.mSt(null,s[0],s[1]);o=o||e}return o}*Cyt(t,s,e){const i=s.fU(),r=this.Awt.get(i);if(!r)return!1;const n=r.get(t);if(!n)return!1;const h=n.get(e);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],e=s[0],i=s[1];let r;r=e.ySt()?this.mSt(null,e,i):yield*this.wSt(null,e,i),o=o||r}return o}mSt(t,s,e){const i=this.Bc,r=this.Hpt,n=r.pN(),h=r.bN(),o=r.Gyt();let a=!1;n&&r.Oyt(n.dN()),r.Oyt(s.dN());const l=o>1;l&&r.Bgt().eX();const u=h.eX(s);t&&(s.qwt()[e].fU().rV().kpt(t),t.TU()&&t.SSt());let c=!0;if(s.hH()){const t=s.vSt();for(let s=0,e=t.length;s<e;++s)if(!t[s].bSt(u)){c=!1;break}}return c&&(s.Upt()?s.MSt(u,e):s.gP(u),a=u.gmt()),h.dX(),l&&r.Bgt().dX(),r.lX(s.dN()),n&&r.lX(n.dN()),n||1!==o||(r.Yyt(),r.SU()||i.mV()),a}*wSt(t,s,e){const i=this.Bc,r=this.Hpt,n=r.pN(),h=r.bN(),o=r.Gyt();let a=!1;n&&r.Oyt(n.dN()),r.Oyt(s.dN());const l=o>1;l&&r.Bgt().eX();const u=h.eX(s);t&&(s.qwt()[e].fU().rV().kpt(t),t.TU()&&t.SSt());let c=!0;if(s.hH()){const t=s.vSt();for(let s=0,e=t.length;s<e;++s)if(!(yield*t[s].TSt(u))){c=!1;break}}return c&&(s.Upt()?yield*s.xSt(u,e):yield*s.myt(u),a=u.gmt()),h.dX(),l&&r.Bgt().dX(),r.lX(s.dN()),n&&r.lX(n.dN()),n||1!==o||(r.Yyt(),r.SU()||i.mV()),a}Cwt(){return this.Nwt}}}{let yv=function(t,s){return!0};NoActions=yv;const wv=self._s,Sv=[];function*vv(t,s){return!0}wv.Hwt=class extends wv.Ur{constructor(t,s,e){super(),this.w4=t,this.Bc=t.l$(),this.CSt=s,this.GSt=null,this.Tpt=this.Bc.aN().bN(),this._St=[],this.ISt=[],this.PSt=!1,this.RSt=!1,this.ASt=!1,this.ESt=!1,this.OSt=!!e[2],this.FSt=!1,this.DSt=null,this.LSt=[],this.hht=[],this.kSt=[],this.NSt=yv,this.BSt=vv,this.$St=!1,this.WSt=!1,this.VSt="",this.jSt=!1,this.USt=null,this.Nwt=null,this.qQ=e[4],this.zSt=e[5],this.w4.cSt(this,this.zSt),this.HSt=this.Bc.ez()?{qSt:e[3][0],JSt:e[3][1],YSt:!1,XSt:!1,ZSt:!1,KSt:!1}:null,this.aN().xgt(this),3===e[0]&&this.QSt(e[1]);let i=0;for(const t of e[6]){const s=wv.tvt.UC(this,t,i++);this.LSt.push(s),this.svt(s.fU())}i=0;for(const t of e[7]){const s=wv.evt.UC(this,t,i++);this.hht.push(s)}if(9===e.length){const t=e[8];for(const s of t)this.w4.kwt(s,this,this.kSt)}this.LSt.length&&(this.FSt=null===this.LSt[0].fU()&&this.LSt[0].sSt()===wv.e$.s$.t$.ivt),0===this.LSt.length&&(this.LSt=Sv),0===this.hht.length&&(this.hht=Sv),0===this.kSt.length&&(this.kSt=Sv)}static UC(t,s,e){return wv.Hr(wv.Hwt,t,s,e)}QSt(t){this.$St=!0,this.WSt=!!t[0],this.jSt=this.WSt,this.VSt=t[1].toLowerCase(),this.USt=[],this.aN().Mgt(this),this.Bc.ez()&&(this.Nwt={type:"group",name:t[1],Bwt:0,children:[]})}rvt(t){this.USt.push(t)}nvt(t,s){for(const e of t.d5().xV())s.includes(e)||s.push(e)}hvt(t,s){if(t)if(s.includes(t)||s.push(t),t.v1())for(const e of t.TV())e.TU()&&this.nvt(e,s);else t.TU()&&this.nvt(t,s)}svt(t){this.hvt(t,this._St)}ovt(t){this.hvt(t,this.ISt)}avt(){this._St=this.Bc.S1()}vgt(t){this.ESt=!!t,this.lvt(),this.uvt();for(const t of this.LSt)t.vgt();if(this.hht.length>0){let t=!1;for(const s of this.hht)s.vgt(),s.cvt()&&(t=!0);t?(this.NSt=this.fvt,this.BSt=this.dvt):(this.NSt=this.pvt,this.BSt=this.mvt)}const s=this.kSt;for(let t=0,e=s.length;t<e;++t){const i=t<e-1&&s[t+1]instanceof wv.Hwt&&s[t+1].hSt();s[t].vgt(i)}this.HSt&&this.gvt(),this.Nwt&&this.yvt().Cwt().children.push(this.Nwt)}Cwt(){return this.Nwt}yvt(){let t=this.hH();for(;t;){if(t.iyt())return t;t=t.hH()}return this.w4}gvt(){const t=this.HSt;t.YSt=this.LSt.every(t=>t.ySt()),t.XSt=this.hht.every(t=>t.ySt()),t.ZSt=this.kSt.every(t=>t.ySt()),t.KSt=t.YSt&&t.XSt&&t.ZSt}wvt(){let t=this;do{t.gvt(),t=t.hH()}while(t)}lvt(){if(!this.iyt())return;let t=this.hH();for(this.ASt=!0;t;){if(!t.iyt()){this.ASt=!1;break}t=t.hH()}}Svt(){const t=this.Bc.S1();if(this._St===t)this.ISt=t;else{this.ISt=wv.Oh(this._St);let t=this.hH();for(;t;){for(const s of t._St)this.ovt(s);t=t.hH()}const s=this.aN();this._St=s.Agt(this._St),this.ISt=s.Agt(this.ISt)}}uvt(){if(!this.vvt())return;this.DSt=[];let t=this.hH();for(;t;)this.DSt.push(t),t=t.hH();this.DSt.reverse()}bvt(){this.RSt=!0,this.CSt&&this.CSt.bvt()}xmt(){return this.RSt}tX(){return this._St}dN(){return this.PSt||(this.PSt=!0,this.Svt()),this.ISt}Mvt(t){return this._St.includes(t)}vSt(){return this.DSt}t5(){return this.w4}aN(){return this.w4.aN()}l$(){return this.Bc}hH(){return this.CSt}Tvt(t){this.GSt=t}Wgt(){return this.GSt||this.CSt}xvt(){return this.zSt}Cvt(){return this.HSt&&this.HSt.JSt}Gvt(){return this.Cvt()&&this.HSt.qSt}_vt(t){this.HSt.qSt=!!t,this.wvt()}iyt(){return this.$St}Ivt(){return this.ASt}hSt(){return this.FSt}Pvt(){return this.ESt}Tgt(){return this.VSt}Swt(){return this.jSt}hyt(){this.vwt(this.WSt)}vwt(t){if(t=!!t,!this.$St)throw new Error("not a group");if(this.jSt!==t){this.jSt=t;for(const t of this.USt)t.Rvt();if(this.USt.length){const t=this.Bc.OB().t5();t&&t._5()}}}I1(){return this.qQ}Upt(){return this.OSt}Jwt(){return this.LSt.length&&this.LSt[0].Jwt()}Avt(){return this.GSt&&this.GSt instanceof wv._wt}vvt(){return this.Avt()||this.LSt.some(t=>t.Jwt())}qwt(){return this.LSt}Cmt(){return this.LSt.length}Lgt(t){if((t=Math.floor(t))<0||t>=this.LSt.length)throw new RangeError("invalid condition index");return this.LSt[t]}Evt(t){return this.Lgt(t)}Ovt(t){let s=t.Tk();if(0===s)return!0;--s;const e=t.Fvt()?t.Dvt():t.fU();for(;s>=0;--s){const t=this.LSt[s];if(e===t.fU()||t.Fvt()&&t.Dvt()===e)return!1}return!0}Lvt(){return this.hht}kvt(){return this.hht.length}Ngt(t){if((t=Math.floor(t))<0||t>=this.hht.length)throw new RangeError("invalid action index");return this.hht[t]}Nvt(t){t=Math.floor(t);const s=this.hht.find(s=>s.Bvt()===t);if(!s)throw new RangeError("invalid action debug index");return s}$vt(t){return(t=Math.floor(t))>=0&&t<this.hht.length}Wvt(){return this.kSt}Vgt(){return this.kSt.filter(t=>t instanceof wv.Kwt)}bSt(t){t.umt(this);const s=this.LSt;let e=0===s.length;for(let i=0,r=s.length;i<r;++i){const r=s[i];if(t.fmt(i),r._q())throw new Error("trigger cannot be used as sub-event to a loop");if(r.gP())e=!0;else if(!this.OSt)return!1}return!this.OSt||e}MSt(t,s){t.umt(this),t.fmt(s),this.LSt[s].gP()&&(this.NSt(t,0)&&this.Vvt(t),t.mmt(!0))}*TSt(t){t.umt(this);const s=this.LSt;let e=0===s.length;for(let i=0,r=s.length;i<r;++i){const r=s[i];if(t.fmt(i),r._q())throw new Error("trigger cannot be used as sub-event to a loop");let n;if(n=r.ySt()?r.gP():yield*r.myt(),n)e=!0;else if(!this.OSt)return!1}return!this.OSt||e}*xSt(t,s){t.umt(this),t.fmt(s);const e=this.LSt[s];let i;if(i=e.ySt()?e.gP():yield*e.myt(),i){let s;s=this.jvt()?this.NSt(t,0):yield*this.BSt(t,0),s&&(this.Uvt()?this.Vvt():yield*this.zvt()),t.mmt(!0)}}gP(t){t.umt(this),this.FSt||t.ymt(!1),this.OSt?this.Hvt(t):this.qvt(t)}*myt(t){(this.Gvt()||this.Bc.Jvt())&&(yield this),t.umt(this),this.FSt||t.ymt(!1),this.OSt?yield*this.Yvt(t):yield*this.Xvt(t)}Hvt(t){const s=this.LSt;let e=0===s.length;for(let i=0,r=s.length;i<r;++i){const r=s[i];if(r.Jwt())continue;t.fmt(i);const n=r.gP();e=e||n}t.mmt(e),e&&(this.NSt(t,0)&&this.Vvt(t),this.ESt&&t.ymt(!0))}*Yvt(t){const s=this.LSt;let e=0===s.length;for(let i=0,r=s.length;i<r;++i){const r=s[i];if(r.Jwt())continue;let n;t.fmt(i),n=r.ySt()?r.gP():yield*r.myt(),e=e||n}if(t.mmt(e),e){let s;s=this.jvt()?this.NSt(t,0):yield*this.BSt(t,0),s&&(this.Uvt()?this.Vvt():yield*this.zvt()),this.ESt&&t.ymt(!0)}}qvt(t){const s=this.LSt;for(let e=0,i=s.length;e<i;++e){const i=s[e];if(t.fmt(e),!i.gP())return void t.mmt(!1)}t.mmt(!0),this.NSt(t,0)&&this.Vvt(t),t.gmt()&&this.ESt&&t.ymt(!0)}*Xvt(t){const s=this.LSt;for(let e=0,i=s.length;e<i;++e){const i=s[e];let r;if(t.fmt(e),r=i.ySt()?i.gP():yield*i.myt(),!r)return void t.mmt(!1)}let e;t.mmt(!0),e=this.jvt()?this.NSt(t,0):yield*this.BSt(t,0),e&&(this.Uvt()?this.Vvt():yield*this.zvt()),t.gmt()&&this.ESt&&t.ymt(!0)}pvt(t,s){const e=this.hht;for(let i=s,r=e.length;i<r;++i){const s=e[i];t.pmt(i),s.gP()}return!0}*mvt(t,s){const e=this.hht;for(let i=s,r=e.length;i<r;++i){const s=e[i];t.pmt(i),s.ySt()?s.gP():yield*s.myt()}return!0}fvt(t,s){const e=this.aN(),i=this.hht;for(let r=s,n=i.length;r<n;++r){const s=i[r];t.pmt(r);const n=s.gP();if(s.Zvt()&&!0===n)return!1;s.Kvt()&&n instanceof Promise&&e.qyt(n)}return!0}*dvt(t,s){const e=this.aN(),i=this.hht;for(let r=s,n=i.length;r<n;++r){const s=i[r];let n;if(t.pmt(r),n=s.ySt()?s.gP():yield*s.myt(),s.Zvt()&&!0===n)return!1;s.Kvt()&&n instanceof Promise&&e.qyt(n)}return!0}Qvt(t){this.NSt(t,t.dmt())&&this.Vvt()}*tbt(t){(yield*this.BSt(t,t.dmt()))&&(yield*this.zvt())}Vvt(){if(!this.kSt.length)return;const t=this.iyt()&&this.Bc.dSt(),s=t?performance.now():0,e=this.Tpt,i=e.eX(this);this.RSt?this.sbt(i):this.ebt(i),e.dX(),t&&(this.Nwt.Bwt+=performance.now()-s)}sbt(t){const s=this.$St,e=this.ASt,i=this.aN(),r=this.kSt;for(let n=0,h=r.length,o=h-1;n<h;++n){const h=r[n],a=h.tX(),l=!e||!s&&n<o;l&&i.oX(a),h.gP(t),l?i.lX(a):i.Ayt(a)}}ebt(t){const s=this.kSt;for(let e=0,i=s.length;e<i;++e)s[e].gP(t)}*zvt(){if(!this.kSt.length)return;const t=this.Tpt,s=t.eX(this);this.RSt?yield*this.ibt(s):yield*this.rbt(s),t.dX()}*ibt(t){const s=this.$St,e=this.ASt,i=this.aN(),r=this.kSt;for(let n=0,h=r.length,o=h-1;n<h;++n){const h=r[n],a=h.tX(),l=!e||!s&&n<o;l&&i.oX(a),yield*h.myt(t),l?i.lX(a):i.Ayt(a)}}*rbt(t){const s=this.kSt;for(let e=0,i=s.length;e<i;++e)yield*s[e].myt(t)}aX(t,s){s.lmt();const e=this.LSt;if(!this.Upt())for(let i=t.cmt()+1,r=e.length;i<r;++i){const t=e[i];if(s.fmt(i),!t.gP())return!1}return this.NSt(s,0)&&this.Vvt(s),!0}*nbt(t,s){s.lmt();const e=this.LSt;if(!this.Upt())for(let i=t.cmt()+1,r=e.length;i<r;++i){const t=e[i];let r;if(s.fmt(i),r=t.ySt()?t.gP():yield*t.myt(),!r)return!1}let i;return i=this.jvt()?this.NSt(s,0):yield*this.BSt(s,0),i&&(this.Uvt()?this.Vvt():yield*this.zvt()),!0}ySt(){return!this.Gvt()&&!this.Bc.Jvt()&&this.HSt.KSt}jvt(){return!this.Bc.Jvt()&&this.HSt.XSt}Uvt(){return!this.Bc.Jvt()&&this.HSt.ZSt}hbt(t){if(this.hH()){const s=this.vSt();for(let e=0,i=s.length;e<i;++e)if(!s[e].bSt(t))return!1}return!0}*obt(t){if(this.hH()){const s=this.vSt();for(let e=0,i=s.length;e<i;++e)if(!(yield*s[e].TSt(t)))return!1}return!0}abt(t,s,e){if(s.length>0)if(e){const e=s.map(t=>t.Hs(0));t.Bgt().eX(),this.GSt.lbt(e)}else this.GSt.ubt(s);else e&&t.Bgt().eX()}cbt(t,s,e,i){let r,n;const h=t.length>0;let o=null;const a=this.Bc,l=this.Tpt,u=a.aN(),c=this.GSt,f=c.Kvt(),d=u.Iyt()>1;if(this.abt(u,s,d),h&&(e?u.oX(t):u.Oyt(t)),null!==i){if(i.fbt){const t=e?i.fbt.rV():i.fbt.Eyt().Spt(),s=i.dbt.rV();s.Npt(t.iV()),s.Vpt(),e||i.dbt.pbt()}else if(i.mbt){const t=i.mbt.rV();t.Npt(i.gbt),t.Vpt()}i.ybt&&(o=u.Fyt(t))}const p=l.eX(this);return e&&p.Gmt(t),this.hbt(p)&&(p.umt(this),f&&([n,r]=c.wbt()),this.qvt(p),f&&c.Sbt(n)),l.dX(),d&&u.Bgt().dX(),null!==o&&u.lX(o),h&&u.lX(t),u.Pyt(),r}*vbt(t,s,e,i){let r,n;(this.Gvt()||this.Bc.Jvt())&&(yield this);const h=t.length>0;let o=null;const a=this.Bc,l=this.Tpt,u=a.aN(),c=this.GSt,f=c.Kvt(),d=u.Iyt()>1;if(this.abt(u,s,d),h&&(e?u.oX(t):u.Oyt(t)),null!==i){if(i.fbt){const t=e?i.fbt.rV():i.fbt.Eyt().Spt(),s=i.dbt.rV();s.Npt(t.iV()),s.Vpt(),e||i.dbt.pbt()}else if(i.mbt){const t=i.mbt.rV();t.Npt(i.gbt),t.Vpt()}i.ybt&&(o=u.Fyt(t))}const p=l.eX(this);return e&&p.Gmt(t),(yield*this.obt(p))&&(p.umt(this),f&&([n,r]=c.wbt()),yield*this.Xvt(p),f&&c.Sbt(n)),l.dX(),d&&u.Bgt().dX(),null!==o&&u.lX(o),h&&u.lX(t),u.Pyt(),r}bbt(t,s){const e=this.dN(),i=e.length>0,r=this.Bc,n=this.Tpt,h=r.aN(),o=h.Iyt()>1;o&&h.Bgt().eX(),this.GSt.lbt(t),i&&(s?h.oX(e):h.Oyt(e));const a=n.eX(this);this.hbt(a)&&(a.umt(this),this.qvt(a)),n.dX(),o&&h.Bgt().dX(),i&&h.lX(e),h.Pyt()}*Mbt(t,s){(this.Gvt()||this.Bc.Jvt())&&(yield this);const e=this.dN(),i=e.length>0,r=this.Bc,n=this.Tpt,h=r.aN(),o=h.Iyt()>1;o&&h.Bgt().eX(),this.GSt.lbt(t),i&&(s?h.oX(e):h.Oyt(e));const a=n.eX(this);(yield*this.obt(a))&&(a.umt(this),yield*this.Xvt(a)),n.dX(),o&&h.Bgt().dX(),i&&h.lX(e),h.Pyt()}gN(t,s,e,i,...r){let n,h;const o=t.length>0,a=this.Bc,l=this.Tpt,u=a.aN(),c=this.GSt,f=c.Kvt(),d=u.Iyt()>1;d&&u.Bgt().eX(),r.length>0&&this.GSt.lbt(r),o&&(s?u.oX(t):u.Oyt(t));const p=l.eX(this);return p.bmt(e,i),l.Zpt(p),a.nX(!1),this.hbt(p)&&(p.umt(this),f&&([h,n]=c.wbt()),this.qvt(p),f&&c.Sbt(h)),a.nX(!0),l.dX(),l.Kpt(),d&&u.Bgt().dX(),o&&u.lX(t),u.Pyt(),n||p.Mmt()}}}{const bv=self._s,Mv=[];let Tv=!1;bv.tSt=class extends bv.Ur{constructor(t,s,e){super();const i=t.l$(),r=t.aN();this.w4=t,this.Hpt=r,this.Bc=t.l$(),this.CSt=s;const n=i.Tbt(e[1]);this.xbt=n,this.zSt=e[2],this.w4.cSt(this,this.zSt),this.HSt=i.ez()?{qSt:e[3][0],JSt:e[3][1]}:null}static UC(t,s,e){return bv.Hr(bv.tSt,t,s,e)}vgt(){const t=this.xbt,s=this.Bc.aN().jgt(this);this.xbt=t.bind(null,this.Bc.gW(),s)}hH(){return this.CSt}Wgt(){return this.CSt}t5(){return this.w4}xvt(){return this.zSt}Cvt(){return this.HSt&&this.HSt.JSt}Gvt(){return this.Cvt()&&this.HSt.qSt}_vt(t){this.HSt.qSt=!!t}hSt(){return!1}tX(){return Mv}dN(){return this.CSt?this.CSt.dN():Mv}gP(t){t.umt(this),this.Hpt.qyt(this.Cbt())}async Cbt(){try{await this.xbt()}catch(t){console.error(`Unhandled exception running script %c${this.t5().Rc()}, event ${this.xvt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.iz&&self.iz.Gbt(this),Tv||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Tv=!0)}}*myt(t){t.umt(this),(this.Gvt()||this.Bc.Jvt())&&(yield this),this.gP(t)}ySt(){return!this.Gvt()&&!this.Bc.Jvt()}static _bt(){return Tv}static Ibt(){Tv=!0}}}{const xv=self._s,Cv=self.assert;xv._wt=class extends xv.Ur{constructor(t,s,e){super(),this.w4=t,this.Bc=t.l$(),this.CSt=s,this.Pbt=0,this.Rbt="",this.Abt=0,this.Ebt=[],this.Obt=!0,this.Fbt="",this.mpt=null,this.Dbt=!1,this.Lbt=[],this.kbt=!1,this.Nbt=!1,this.Bbt=0,this.$bt=-1,this.Wbt=new Map,this.Vbt=xv.Hwt.UC(t,s,e),this.Vbt.Tvt(this)}jbt(t){this.Pbt=0,this.Rbt=t[0],this.Abt=t[1],this.Ebt=t[2].map(t=>xv.Kwt.UC(this.w4,this,t)),this.Obt=t[3],this.Nbt=t[4],this.kbt=t[5]}Ubt(t){this.Pbt=1,this.Fbt=t[1],this.mpt=this.Bc.J0(t[2]),this.Vbt.svt(this.mpt),this.Rbt=this.mpt.Rc()+"."+this.Fbt,this.Abt=t[3],this.Ebt=t[4].map(t=>xv.Kwt.UC(this.w4,this,t)),this.Obt=t[5],this.Nbt=t[6],this.kbt=t[7],this.mpt.zbt(this)}static Xwt(t,s,e){const i=xv.Hr(xv._wt,t,s,e),r=e[1];return i.jbt(r),i}static Zwt(t,s,e){const i=xv.Hr(xv._wt,t,s,e),r=e[1];return i.Ubt(r),i}bgt(){if(this.mpt&&this.mpt.v1())for(const t of this.mpt.TV())if(t.Hbt(this.Fbt)){this.Dbt=!0;break}}vgt(){for(const t of this.Ebt)t.vgt();this.Vbt.vgt(!1)}Igt(){return this.Pbt}Vgt(){return this.Ebt}Iwt(){return this.Ebt}cN(){return this.Ebt.length}qbt(t){this.Lbt.push(t)}Jbt(){return this.Lbt}ubt(t){const s=this.Ebt;for(let e=0,i=s.length;e<i;++e)s[e].unt(t[e].Hs(0))}lbt(t){const s=this.Ebt;for(let e=0,i=s.length;e<i;++e)s[e].unt(t[e])}Ybt(){return this.Ebt.map(t=>t.Irt())}hH(){return this.CSt}Wgt(){return this.CSt}Pgt(){return this.Rbt}Xbt(){return this.Fbt}Zbt(){return this.Dbt}wN(){return this.Abt}fU(){return this.mpt}_u(){return this.Obt}uN(){switch(this.Abt){case 0:return null;case 2:return"";default:return 0}}fN(){return this.Vbt}yN(){return this.kbt}Kvt(){return this.Nbt}wbt(){const t=this.Bbt++;let s;this.$bt=t;const e=new Promise(t=>s=t);return this.Wbt.set(t,{resolve:s,Kbt:0}),[t,e]}Sbt(t){const s=this.Wbt.get(t);0===s.Kbt&&(s.resolve(),this.Wbt.delete(t)),this.$bt=-1}Qbt(){return this.Wbt.get(this.$bt).Kbt++,this.$bt}tMt(t){this.$bt=t,this.Wbt.get(t).Kbt--}sMt(t,s){const e=new Map,i=[];for(const t of this.mpt.rV().iV()){const s=t.fU();if(s.Hbt(this.Fbt)){const i=e.get(s);Array.isArray(i)?i.push(t):e.set(s,[t])}else i.push(t)}if(i.length>0&&this.Vbt.cbt(t,s,this.kbt,{mbt:this.mpt,gbt:i}),e.size>0)for(const[i,r]of e){const e=i.eMt(this.Fbt).fN(),n=[...new Set([...t,...e.tX()])];e.cbt(n,s,this.kbt,{mbt:i,gbt:r})}}*iMt(t,s){const e=new Map,i=[];for(const t of this.mpt.rV().iV()){const s=t.fU();if(s.Hbt(this.Fbt)){const i=e.get(s);Array.isArray(i)?i.push(t):e.set(s,[t])}else i.push(t)}if(i.length>0&&(yield*this.Vbt.vbt(t,s,this.kbt,{mbt:this.mpt,gbt:i})),e.size>0)for(const[i,r]of e){const e=i.eMt(this.Fbt).fN(),n=[...new Set([...t,...e.tX()])];yield*e.vbt(n,s,this.kbt,{mbt:i,gbt:r})}}}}{const Gv=self._s,_v=[];Gv.Kwt=class extends Gv.Ur{constructor(t,s,e){super();const i=t.aN();this.w4=t,this.Hpt=i,this.Bc=t.l$(),this.CSt=s,this.ngt=i.Bgt(),this.Xr=e[1],this.qc=e[2],this.rMt=e[3],this.Sx=!!e[4],this.nMt=!!e[5],this.hMt=s instanceof Gv._wt,this.qQ=e[6],this.oMt=this.Bc.Ugt(e[8]),this.aMt=t=>this.unt(t),this.lMt=()=>this.Irt(),this.uMt=!this.CSt||this.Sx||this.nMt,this.eht=this.rMt,this.cMt=-1,this.fMt()&&(this.eht=this.eht?1:0),!this.dMt()||this.qx()||this.bwt()||(this.cMt=i.Egt(this)),i.Rgt(this)}static UC(t,s,e){return Gv.Hr(Gv.Kwt,t,s,e)}vgt(){if(this.dMt()&&!this.qx()&&!this.bwt()&&!this.pMt()){const t=this.Hpt.Gwt(this);t&&t.qbt(this)}}Rc(){return this.Xr}Ugt(){return this.oMt}hH(){return this.CSt}Wgt(){return this.hH()}WQ(){return!this.hH()}dMt(){return!this.WQ()}pMt(){return this.hMt}qx(){return this.Sx}bwt(){return this.nMt}Xe(){return 0===this.qc}hi(){return 1===this.qc}fMt(){return 2===this.qc}hSt(){return!1}I1(){return this.qQ}Ogt(){return this.rMt}tX(){return _v}gP(t){!this.dMt()||this.qx()||this.bwt()||this.unt(this.Ogt())}ySt(){return!0}*myt(t){this.gP(t)}unt(t){this.Xe()?"number"!=typeof t&&(t=parseFloat(t)):this.hi()?"string"!=typeof t&&(t=t.toString()):this.fMt()&&(t=t?1:0),this.uMt?this.eht=t:this.ngt.Amt()[this.cMt]=t}Irt(){return this.uMt?this.eht:this.ngt.Amt()[this.cMt]}mMt(){let t=this.Irt();return this.fMt()&&(t=!!t),t}tyt(){this.eht=this.rMt}zgt(){return{configurable:!1,enumerable:!0,get:this.lMt,set:this.aMt}}}}{const Iv=self._s,Pv=self.assert,Rv=[];Iv.Qwt=class extends Iv.Ur{constructor(t,s,e){super();const i=t.aN();this.w4=t,this.Hpt=i,this.Bc=t.l$(),this.CSt=s,this.gMt=null,this.yMt=e[1],this.Bf=!0}static UC(t,s,e){return Iv.Hr(Iv.Qwt,t,s,e)}vgt(){this.gMt=this.Hpt.G5(this.yMt),this.w4.oSt(this);let t=this.hH();for(;t;)t instanceof Iv.Hwt&&t.iyt()&&t.rvt(this),t=t.hH();this.Rvt(),this.Bc.ez()&&this.w4.Cwt().children.push(this.gMt.Cwt())}hH(){return this.CSt}tX(){return Rv}lSt(){return this.gMt}gP(t){const s=!!this.hH(),e=this.Bc.S1();s&&this.Hpt.Oyt(e),this.gMt.gP(),s&&this.Hpt.lX(e)}*myt(t){const s=!!this.hH(),e=this.Bc.S1();s&&this.Hpt.Oyt(e),yield*this.gMt.myt(),s&&this.Hpt.lX(e)}ySt(){return!1}uSt(){return this.Bf}Rvt(){let t=this.hH();for(;t;){if(t instanceof Iv.Hwt&&t.iyt()&&!t.Swt())return void(this.Bf=!1);t=t.hH()}this.Bf=!0}}}{let Av=function(t,s){return t>=s?t%s:t<0?(t<=-s&&(t%=s),t<0&&(t+=s),t):t};WrapIndex=Av;const Ev=self._s,Ov=self.assert;Ev.wMt=class extends Ev.Ur{constructor(t){super(),this.gT=t,this.Bc=t.l$()}vgt(){}static SMt(t,s){const e=s[0],i=[Nv,Lv,kv,Bv,Fv,Dv];return Ev.Hr(i[e],t,s)}};class Fv extends Ev.wMt{constructor(t,s){super(t),this.vMt=this.Bc.RK(),this.xbt=this.Bc.Tbt(s[1]),this.xbt!==Ev.e$.s$.Sht.random&&this.xbt!==Ev.e$.s$.Sht.bMt||this.gT.MMt()}TMt(){return this.vMt.xMt(this.xbt,this.vMt)}}class Dv extends Ev.wMt{constructor(t,s){super(t),this.CMt=null,this.Rbt=s[1],this.gT.MMt()}vgt(){const t=this.Bc.aN();this.CMt=t.lN(this.Rbt),this.Rbt=null;const s=this.gT.fN(),e=this.CMt.fN();this.GMt=[...new Set([...s.dN(),...e.dN()])],this.GMt=t.Agt(this.GMt)}TMt(){const t=this.CMt;if(t._u()){const s=t.fN();return Ev.Hwt.prototype.gN.bind(s,this.GMt,t.yN(),t.wN(),t.uN())}{const s=t.uN();return()=>s}}}class Lv extends Ev.wMt{constructor(t,s){super(t),this.mpt=this.Bc.J0(s[1]),this.xbt=this.Bc.Tbt(s[2]),this._Mt=!!s[3],this.Tpt=this.Bc.aN().bN(),this.gT.IMt(this.mpt)}TMt(){return this.mpt.HW().xMt(this.xbt,this.mpt.jW().eq())}PMt(...t){const s=this.mpt,e=s.rV().Apt(),i=e.length;if(0===i)return this._Mt?"":0;const r=Av(this.gT.RMt(),i);return this.Tpt.sX().Smt(s),this.xbt.apply(e[r].eq(),t)}AMt(t,...s){const e=this.mpt,i=e.iV(),r=i.length;if(0===r||"number"!=typeof t)return this._Mt?"":0;const n=Av(t,r);return this.Tpt.sX().Smt(e),this.xbt.apply(i[n].eq(),s)}}class kv extends Ev.wMt{constructor(t,s){super(t),this.mpt=this.Bc.J0(s[1]),this.EMt=s[3],this._Mt=!!s[2],this.gT.IMt(this.mpt)}OMt(){const t=this.mpt.rV().Apt(),s=t.length;return 0===s?this._Mt?"":0:t[Av(this.gT.RMt(),s)].FMt(this.EMt)}DMt(){const t=this.mpt,s=t.rV().Apt(),e=s.length;if(0===e)return this._Mt?"":0;const i=s[Av(this.gT.RMt(),e)],r=i.fU().LMt(t.kMt());return i.FMt(this.EMt+r)}NMt(t){const s=this.mpt,e=s.iV(),i=e.length;if(0===i||"number"!=typeof t)return this._Mt?"":0;const r=e[Av(t,i)];let n=0;return s.v1()&&(n=r.fU().LMt(s.kMt())),r.FMt(this.EMt+n)}}class Nv extends Ev.wMt{constructor(t,s){super(t),this.mpt=this.Bc.J0(s[1]),this.BMt=this.mpt.Fnt(s[2]),this.$Mt=this.mpt.hit(s[2]),this.xbt=this.Bc.Tbt(s[3]),this._Mt=!!s[4],this.Tpt=this.Bc.aN().bN(),this.gT.IMt(this.mpt)}WMt(...t){const s=this.mpt,e=s.rV().Apt(),i=e.length;if(0===i)return this._Mt?"":0;const r=Av(this.gT.RMt(),i);this.Tpt.sX().Smt(s);const n=e[r];let h=0;return s.v1()&&(h=n.fU().VMt(s.kMt())),this.xbt.apply(n.Ont()[this.$Mt+h].eq(),t)}jMt(t,...s){const e=this.mpt,i=e.iV(),r=i.length;if(0===r||"number"!=typeof t)return this._Mt?"":0;const n=Av(t,r);this.Tpt.sX().Smt(e);const h=i[n];let o=0;return e.v1()&&(o=h.fU().VMt(e.kMt())),this.xbt.apply(h.Ont()[this.$Mt+o].eq(),s)}}class Bv extends Ev.wMt{constructor(t,s){super(t),this.UMt=null,this.zMt=s[1]}vgt(){this.UMt=this.Bc.aN().Hgt(this.zMt)}HMt(){return this.UMt}}}{let $v=function(t){const s=self.qMt[t];if(!s)throw new Error("invalid expression number");return s};GetExpressionFunc=$v;const Wv=self._s,Vv=self.assert;Wv.JMt=class extends Wv.Ur{constructor(t,s,e){super(),this.gT=t,this.Aw=e,this.qc=s,this.Hs=null,this.YMt=!1,this.nMt=!1}static UC(t,s,e){const i=s[0],r=[jv,Uv,Zv,Hv,Jv,zv,Yv,jv,Hv,Hv,Kv,Qv,Zv,sb,Uv,Xv,qv,tb,eb,ib,rb,nb];return Wv.Hr(r[i],t,i,e,s)}vgt(){}MMt(){this.YMt=!0}IMt(t){this.YMt||t&&(t.HW().SW()||(this.YMt=!0))}XMt(){return this.YMt}Tk(){return this.Aw}l$(){return this.gT.l$()}fN(){return this.gT.fN()}bwt(){return this.nMt}ZMt(){return 4===this.qc}};class jv extends Wv.JMt{constructor(t,s,e,i){super(t,s,e),this.KMt=0;const r=i[1];this.QMt=r[0],this.tTt=[],this.sTt=null;for(let t=1,s=r.length;t<s;++t)this.tTt.push(Wv.wMt.SMt(this,r[t]));this.tTt.length?this.Hs=this.eTt:(this.Hs=$v(this.QMt),this.nMt=!0)}iTt(t){if(t<0||t>=this.tTt.length)throw new RangeError("invalid numbered node");return this.tTt[t]}vgt(){for(const t of this.tTt)t.vgt();const t=$v(this.QMt);this.tTt.length?this.sTt=t(this):this.sTt=t}RMt(){return this.KMt}eTt(t){return this.KMt=t,this.sTt()}}class Uv extends jv{constructor(t,s,e,i){super(t,s,e,i),this.Hs=this.rTt,14===s&&(this.fN().avt(),this.gT instanceof Wv.evt&&this.fN().bvt())}rTt(t){this.KMt=t;const s=this.sTt();return"string"==typeof s?s:""}nTt(){return $v(this.QMt)()}}class zv extends jv{constructor(t,s,e,i){super(t,s,e,i),t.hTt()>=2?this.Hs=this.jV:this.Hs=this.kB,this.nMt=!1}kB(t){this.KMt=t;const s=this.sTt();return this.l$().OB().kB(s)}jV(t){const s=this.kB(t);return s?s.jV():null}}class Hv extends Wv.JMt{constructor(t,s,e,i){super(t,s,e),this.oTt=i[1],this.Hs=this.aTt,this.nMt=!0}aTt(){return this.oTt}}class qv extends Wv.JMt{constructor(t,s,e,i){super(t,s,e),this.lTt=i[1],this.Hs=this.uTt,this.nMt=!0}uTt(){return this.lTt}}class Jv extends Wv.JMt{constructor(t,s,e,i){super(t,s,e),this.mpt=this.l$().J0(i[1]),t.hTt()>=2?this.Hs=this.$W:this.Hs=this.fU;const r=this.fN();r.svt(this.mpt),this.gT instanceof Wv.evt?r.bvt():r.hH()&&r.hH().bvt(),this.nMt=!0}fU(){return this.mpt}$W(){return this.mpt?this.mpt.$W():null}}class Yv extends Wv.JMt{constructor(t,s,e,i){super(t,s,e),this.jQ=this.l$().pB().P6(i[1]),t.hTt()>=2?this.Hs=this.fB:this.Hs=this.mB,this.nMt=!0}mB(){return this.jQ}fB(){return this.jQ?this.jQ.fB():null}}class Xv extends Wv.JMt{constructor(t,s,e,i){super(t,s,e),this.D7=this.l$().jtt().V8(i[1]),t.hTt()>=2?this.Hs=this.xet:this.Hs=this.zet,this.nMt=!0}zet(){return this.D7}xet(){return this.D7?this.D7.xet():null}}class Zv extends Wv.JMt{constructor(t,s,e,i){super(t,s,e),this.cTt=i[1],this.Hs=this.fTt,this.nMt=!0}fTt(){return this.cTt}}class Kv extends Wv.JMt{constructor(t,s,e,i){super(t,s,e),this.dTt=i[1];const r=this.gT.fU();this.gT instanceof Wv.tvt&&this.gT.qx()?(this.Hs=this.pTt,this.nMt=!0):r&&r.v1()?(this.Hs=this.mTt,this.MMt()):(this.Hs=this.pTt,this.nMt=!0)}pTt(){return this.dTt}mTt(t){t=t||0;const s=this.gT.fU(),e=s.rV(),i=e.iV();let r=null;if(i.length)r=i[t%i.length].fU();else if(e.Ppt()){const s=e.Rpt();r=s[t%s.length].fU()}else{if(!(s.oV()>0))return 0;{const e=s.iV();r=e[t%e.length].fU()}}return this.dTt+r.LMt(s.kMt())}}class Qv extends Wv.JMt{constructor(t,s,e,i){super(t,s,e),this.zMt=i[1],this.UMt=null,t.hTt()>=2?this.Hs=this.gTt:this.Hs=this.yTt,this.nMt=!0}vgt(){this.UMt=this.l$().aN().Hgt(this.zMt)}yTt(){return this.UMt}gTt(){return null}}class tb extends Wv.JMt{constructor(t,s,e,i){super(t,s,e),this.wTt=i[1],this.CMt=null,t.hTt()>=2?this.Hs=this.STt:this.Hs=this.vTt,this.nMt=!0}vgt(){this.CMt=this.l$().aN().lN(this.wTt),this.wTt=null}vTt(){return this.CMt}STt(){return null}}class sb extends Wv.JMt{constructor(t,s,e,i){super(t,s,e),this.bTt=[],this.MTt=[],this.nMt=!0;for(let t=1,s=i.length;t<s;++t){const s=Wv.JMt.UC(this.gT,i[t],0);this.bTt.push(s),this.MTt.push(0),s.bwt()||(this.nMt=!1)}this.Hs=this.TTt}vgt(){for(const t of this.bTt)t.vgt()}TTt(){const t=this.bTt,s=this.MTt;for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(0);return s}}class eb extends Wv.JMt{constructor(t,s,e,i){super(t,s,e),this.xTt=i[1],this.Hs=this.lnt,this.nMt=!0}lnt(){return this.xTt}}class ib extends Wv.JMt{constructor(t,s,e,i){super(t,s,e),this.CTt=i[1],this.Hs=this.GTt,this.nMt=!0}GTt(){return this.CTt}}class rb extends jv{constructor(t,s,e,i){super(t,s,e,i),this.Hs=this.PU,this.nMt=!1}PU(){return this.sTt()}}class nb extends Wv.JMt{constructor(t,s,e,i){super(t,s,e),this.Act=this.l$().Yct().Cct(i[1]),this.Hs=this._Tt,this.nMt=!0}_Tt(){return this.Act.Rc()}}}{let hb=function(t,s){for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(0)};EvalParams=hb;const ob=self._s,ab=self.assert,lb=[],ub=function(){};ob.tvt=class extends ob.Ur{constructor(t,s,e){if(super(),this.Vbt=t,this.Bc=t.l$(),this.Aw=e,this.xbt=this.Bc.Tbt(s[1]),this.ITt=s[3]>0,this.PTt=2===s[3],this.RTt=!!s[4],this.ATt=!!s[5],this.Sx=!!s[6],this.qQ=s[7],this.ETt=this.Vbt.Upt(),this.mpt=null,this.BMt=null,this.$Mt=-1,this.vMt=null,this.gP=ub,this.myt=ub,this.Ws=[],this.OTt=[],this.FTt=!1,this.DTt=null,this.LTt=null,this.HSt=this.Bc.ez()?{qSt:s[8][0],kTt:s[8][1]}:null,-1===s[0]?this.vMt=this.Bc.RK():(this.mpt=this.Bc.J0(s[0]),s[2]&&(this.BMt=this.mpt.Fnt(s[2]),this.$Mt=this.mpt.hit(s[2])),this.Vbt.hH()&&this.Vbt.hH().bvt()),10===s.length){let t=s[9];for(let s of t)this.Ws.push(ob.JMt.UC(this,s,this.Ws.length)),this.OTt.push(0)}0===this.Ws.length&&(this.Ws=lb,this.OTt=lb),this.Vbt.aN().Cgt(this)}static UC(t,s,e){return ob.Hr(ob.tvt,t,s,e)}vgt(){for(const t of this.Ws)t.vgt(),t.XMt()&&(this.FTt=!0);this.PTt?(this.gP=this.NTt,this.myt=this.BTt):this.vMt?(this.$Tt(),this.myt=this.WTt):this.mpt.HW().SW()?(this.VTt(),this.myt=this.jTt):this.Sx?(this.gP=this.UTt,this.myt=this.zTt):(this.gP=this.HTt,this.myt=this.qTt)}$Tt(){const t=this.vMt,s=this.vMt;this.JTt(t,s,this.YTt)}VTt(){const t=this.mpt.HW(),s=this.mpt.jW().eq();this.JTt(t,s,this.XTt)}JTt(t,s,e){const i=this.xbt,r=this.ATt,n=this.Ws;if(0===n.length){const e=t.xMt(i,s);this.gP=r?function(){return ob.xor(e(),r)}:e}else if(1===n.length){const e=n[0];if(!r&&e.bwt())this.gP=t.ZTt(i,s,e.Hs(0));else{const n=t.xMt(i,s);this.gP=function(){return ob.xor(n(e.Hs(0)),r)}}}else if(2===n.length){const e=n[0],h=n[1];if(!r&&e.bwt()&&h.bwt())this.gP=t.KTt(i,s,e.Hs(0),h.Hs(0));else{const n=t.xMt(i,s);this.gP=function(){return ob.xor(n(e.Hs(0),h.Hs(0)),r)}}}else if(3===n.length){const e=n[0],h=n[1],o=n[2];if(!r&&e.bwt()&&h.bwt()&&o.bwt())this.gP=t.QTt(i,s,e.Hs(0),h.Hs(0),o.Hs(0));else{const n=t.xMt(i,s);this.gP=function(){return ob.xor(n(e.Hs(0),h.Hs(0),o.Hs(0)),r)}}}else this.gP=e}I1(){return this.qQ}sSt(){return this.xbt}fU(){return this.mpt}fq(){return this.BMt}txt(){return this.BMt?this.BMt.lq():this.mpt?this.mpt.HW():null}hTt(){const t=this.txt();return t?t.sxt():1}fN(){return this.Vbt}l$(){return this.Bc}Tk(){return this.Aw}Bvt(){return this.Tk()}Jwt(){return this.ITt}eSt(){return this.PTt}ixt(){return this.ATt}_q(){return this.RTt}qx(){return this.Sx}rxt(){return this.HSt.qSt}nxt(){return!!this.vMt}Fvt(){return this.nxt()||this.mpt.HW().SW()}Dvt(){for(const t of this.Ws)if(t.ZMt())return t.fU();return null}hxt(t){this.HSt.qSt=!!t,this.Vbt.wvt()}oxt(){return this.HSt.kTt}ySt(){return!this.rxt()&&!this.Bc.Jvt()&&!this.oxt()}axt(){return this.DTt||(this.DTt=new Map),this.DTt}lxt(){return this.LTt||(this.LTt=new Map),this.LTt}YTt(){const t=this.OTt;return hb(this.Ws,t),ob.xor(this.xbt.apply(this.vMt,t),this.ATt)}*WTt(){if((this.rxt()||this.Bc.Jvt())&&(yield this),this.oxt()){const t=this.OTt;hb(this.Ws,t);let s=this.xbt.apply(this.vMt,t);return ob.Mo(s)&&(s=yield*s),ob.xor(s,this.ATt)}return this.gP()}XTt(){const t=this.OTt;hb(this.Ws,t);const s=this.mpt.jW().eq();return ob.xor(this.xbt.apply(s,t),this.ATt)}*jTt(){if((this.rxt()||this.Bc.Jvt())&&(yield this),this.oxt()){const t=this.OTt;hb(this.Ws,t);const s=this.mpt.jW().eq();let e=this.xbt.apply(s,t);return ob.Mo(e)&&(e=yield*e),ob.xor(e,this.ATt)}return this.gP()}NTt(){return!0}*BTt(){return(this.rxt()||this.Bc.Jvt())&&(yield this),!0}uxt(){return this.BMt?this.BMt.lq().sxt()>=2?this.BMt.cq():this.BMt:this.mpt.HW().sxt()>=2?this.mpt.$W():this.mpt}UTt(){const t=this.OTt;hb(this.Ws,t);const s=this.xbt.apply(this.uxt(),t);return this.mpt.pbt(),s}*zTt(){if((this.rxt()||this.Bc.Jvt())&&(yield this),this.oxt()){const t=this.OTt;hb(this.Ws,t);let s=this.xbt.apply(this.uxt(),t);return ob.Mo(s)&&(s=yield*s),this.mpt.pbt(),s}return this.gP()}HTt(){const t=this.Ws,s=this.OTt,e=this.mpt.rV();for(let e=0,i=t.length;e<i;++e){const i=t[e];i.XMt()||(s[e]=i.Hs(0))}return e._pt()?this.cxt(e):this.fxt(e)}*qTt(){return(this.rxt()||this.Bc.Jvt())&&(yield this),this.HTt()}dxt(t){const s=this.Ws,e=this.OTt;for(let i=0,r=s.length;i<r;++i){const r=s[i];r.XMt()&&(e[i]=r.Hs(t))}}cxt(t){const s=this.mpt,e=s.v1(),i=s.kMt(),r=this.$Mt,n=r>=0,h=s.iV(),o=this.FTt,a=this.OTt,l=this.xbt,u=this.ATt,c=this.ETt&&!this.ITt;t.Gpt();for(let s=0,f=h.length;s<f;++s){const f=h[s];let d;if(o&&this.dxt(s),n){const t=e?f.fU().VMt(i):0;d=l.apply(f.Ont()[r+t].eq(),a)}else d=l.apply(f.eq(),a);ob.xor(d,u)?t.Ept(f):c&&t.Opt(f)}return s.pxt(!0),t.Fpt(!1),s.pbt(),t.Ipt()}fxt(t){const s=this.mpt,e=s.v1(),i=s.kMt(),r=s.TU(),n=this.$Mt,h=n>=0,o=this.FTt,a=this.OTt,l=this.xbt,u=this.ATt,c=this.ETt&&!this.ITt,f=t.Dpt(),d=t.Lpt(),p=c&&!this.Vbt.Ovt(this),m=p?d:f;let g=0,y=!1;for(let t=0,s=m.length;t<s;++t){const s=m[t];let w;if(o&&this.dxt(t),h){const t=e?s.fU().VMt(i):0;w=l.apply(s.Ont()[n+t].eq(),a)}else w=l.apply(s.eq(),a);ob.xor(w,u)?(y=!0,p?(f.push(s),r&&s.mxt()):(m[g]=s,r&&s.gxt(g),++g)):p?(m[g]=s,r&&s.yxt(g),++g):c&&(d.push(s),r&&s.wxt())}ob.Sh(m,g),r&&s.Sxt(p,g);const w=y;return p&&!y&&(y=this.vxt(f)),s.pxt(w||c),c?y:t.Ipt()}vxt(t){const s=this.mpt,e=s.v1(),i=s.kMt(),r=this.FTt,n=this.$Mt,h=n>=0,o=this.OTt,a=this.xbt,l=this.ATt;for(let s=0,u=t.length;s<u;++s){const u=t[s];let c;if(r&&this.dxt(s),h){const t=e?u.fU().VMt(i):0;c=a.apply(u.Ont()[n+t].eq(),o)}else c=a.apply(u.eq(),o);if(ob.xor(c,l))return!0}return!1}bxt(t,s){return this.Ws[t].Hs(s)}iSt(){const t=this.Ws;if(!t.length)throw new Error("no parameters");return t[0].nTt()}i4(){if(!this.DTt||!this.DTt.size)return null;const t={};for(const[s,e]of this.DTt.entries()){let i=e;"collmemory"===s&&(i=[...e.entries()].map(t=>[t[0].CU(),t[1].CU(),t[2]])),t[s]=i}return{ex:t}}r4(t){if(this.DTt&&(this.DTt.clear(),this.DTt=null),!t)return;const s=this.Bc,e=t.ex;if(e){const t=this.axt();t.clear();for(const[i,r]of Object.entries(e)){let e=r;"collmemory"===i&&(e=ob.Hr(ob.Iu,r.map(t=>[s.RB(t[0]),s.RB(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),t.set(i,e)}}}}}{let cb=function(t,s){for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(0)};EvalParams=cb;const fb=self._s,db=self.assert,pb=[],mb=function(){},gb=function*(){},yb=1,wb=2,Sb=4,vb=8,bb=16;fb.evt=class extends fb.Ur{constructor(t,s,e){super(),this.Vbt=t;const i=t.l$();this.Bc=i,this.Aw=e,this.qQ=s.length>=4?s[3]:-1,this.Mxt=s.length>=5?255&s[4]:0,this.Txt=s.length>=5?s[4]>>8:0,this.xbt=null,this.mpt=null,this.BMt=null,this.$Mt=-1,this.vMt=null,this.xxt="",this.Cxt=null,this.Gxt=null,this.gP=mb,this.myt=mb,this.Ws=[],this.OTt=[],this.FTt=!1,this.DTt=null,this.LTt=null;const r=-3===s[0],n=r?s[2]:s[5];if(this.HSt=i.ez()||r?{qSt:n[0],kTt:n[1],index:n[2]}:null,-1===s[0])this.vMt=i.RK(),this.xbt=i.Tbt(s[1]);else if(-2===s[0])this.xxt=s[1];else if(r){const t=i.Tbt(s[1]);this.xbt=t,this.gP=this._xt,this.myt=this.Ixt,this.Txt|=8}else this.mpt=i.J0(s[0]),4&this.Txt?(this.xxt=s[1],this.Cxt=i.J0(s[2])):(s[2]&&(this.BMt=this.mpt.Fnt(s[2]),this.$Mt=this.mpt.hit(s[2])),this.xbt=i.Tbt(s[1]));if(7===s.length){const t=s[6];for(const s of t)this.Ws.push(fb.JMt.UC(this,s,this.Ws.length)),this.OTt.push(0)}0===this.Ws.length&&(this.Ws=pb,this.OTt=pb),this.Pxt()&&(this.Vbt.avt(),this.Vbt.bvt()),this.Vbt.aN().Ggt(this)}static UC(t,s,e){return fb.Hr(fb.evt,t,s,e)}vgt(){for(const t of this.Ws)t.vgt(),t.XMt()&&(this.FTt=!0);if(this.vMt)this.$Tt(),this.myt=this.WTt;else if(this.xxt)4&this.Txt?this.Rxt():this.Axt(),this.xxt="",this.Cxt=null;else if(this.gP===this._xt){const t=this.xbt,s=this.Bc.aN().jgt(this.Vbt);this.xbt=t.bind(null,this.Bc.gW(),s)}else this.BMt?this.Kvt()?(this.gP=this.Ext,this.myt=this.Oxt):(this.gP=this.Fxt,this.myt=this.Dxt):this.mpt.HW().SW()?(this.VTt(),this.myt=this.jTt):this.qx()?(this.gP=this.Lxt,this.myt=this.kxt):this.Kvt()?(this.gP=this.Nxt,this.myt=this.Bxt):this.$xt()?(this.gP=this.Wxt,this.myt=this.Vxt):this.Ws.length?this.Ws.every(t=>t.XMt())?(this.gP=this.jxt,this.myt=this.Uxt):this.FTt?(this.gP=this.zxt,this.myt=this.Hxt):this.Ws.every(t=>t.bwt())?(cb(this.Ws,this.OTt),this.gP=this.qxt,this.myt=this.Jxt):(this.gP=this.Yxt,this.myt=this.Xxt):(this.gP=this.qxt,this.myt=this.Jxt)}$Tt(){const t=this.vMt,s=this.vMt;this.JTt(t,s,this.YTt)}VTt(){const t=this.mpt.HW(),s=this.mpt.jW().eq();this.JTt(t,s,this.XTt)}Axt(){const t=this.Vbt.aN(),s=t.lN(this.xxt);if(s._u()){const e=!!(2&this.Txt);this.Gxt=s.fN();let i=[...new Set([...this.Vbt.dN(),...this.Gxt.dN()])];i=t.Agt(i);const r=!s.yN()&&this.Zxt()?{ybt:!0}:null;if(this.gP=fb.Hwt.prototype.cbt.bind(this.Gxt,i,this.Ws,e,r),this.Bc.ez()){const t=this;this.myt=function*(){return(t.rxt()||t.Bc.Jvt())&&(yield t),yield*t.Gxt.vbt(i,t.Ws,e,r)}}else this.myt=gb}else this.gP=mb,this.myt=gb}Rxt(){const t=this.Vbt.aN(),s=t.Xgt(this.Cxt,this.xxt);if(s._u()){const e=!!(2&this.Txt);this.Gxt=s.fN();let i=[...new Set([...this.Vbt.dN(),...this.Gxt.dN(),this.mpt,s.fU()])];i=t.Agt(i);const r=!this.mpt.v1()&&!s.fU().v1(),n=!this.mpt.v1()&&s.fU().v1(),h=this.mpt.v1();let o=null;if(!s.yN()&&this.Zxt()&&(o=o||{},o.ybt=!0),!n&&e||(o=o||{},o.fbt=this.mpt,o.dbt=s.fU()),r||n||h&&!s.Zbt()?this.gP=fb.Hwt.prototype.cbt.bind(this.Gxt,i,this.Ws,e,o):h&&(this.gP=fb._wt.prototype.sMt.bind(s,i,this.Ws)),this.Bc.ez()){const t=this;r||n||h&&!s.Zbt()?this.myt=function*(){return(t.rxt()||t.Bc.Jvt())&&(yield t),yield*t.Gxt.vbt(i,t.Ws,e,o)}:h&&(this.myt=function*(){return(t.rxt()||t.Bc.Jvt())&&(yield t),yield*s.iMt(i,t.Ws)})}else this.myt=gb}else this.gP=mb,this.myt=gb}JTt(t,s,e){const i=this.xbt,r=this.Ws;if(0===r.length)this.gP=t.xMt(i,s);else if(1===r.length){const e=r[0];if(e.bwt())this.gP=t.ZTt(i,s,e.Hs(0));else{const r=t.xMt(i,s);this.gP=function(){return r(e.Hs(0))}}}else if(2===r.length){const e=r[0],n=r[1];if(e.bwt()&&n.bwt())this.gP=t.KTt(i,s,e.Hs(0),n.Hs(0));else{const r=t.xMt(i,s);this.gP=function(){return r(e.Hs(0),n.Hs(0))}}}else if(3===r.length){const e=r[0],n=r[1],h=r[2];if(e.bwt()&&n.bwt()&&h.bwt())this.gP=t.QTt(i,s,e.Hs(0),n.Hs(0),h.Hs(0));else{const r=t.xMt(i,s);this.gP=function(){return r(e.Hs(0),n.Hs(0),h.Hs(0))}}}else this.gP=e}I1(){return this.qQ}Kvt(){return!!(8&this.Txt)}Zvt(){return!!(16&this.Txt)}$xt(){return 1===this.Mxt}qx(){return 2===this.Mxt}Pxt(){return!!(1&this.Txt)}cvt(){return this.Kvt()||this.Zvt()}fU(){return this.mpt}txt(){return this.BMt?this.BMt.lq():this.mpt?this.mpt.HW():null}hTt(){const t=this.txt();return t?t.sxt():1}fN(){return this.Vbt}Zxt(){let t=this.Vbt;do{if(t instanceof fb._wt&&t.yN())return!0;t=t.Wgt()}while(t);return!1}l$(){return this.Bc}Tk(){return this.Aw}Bvt(){return this.HSt.index}rxt(){return this.HSt.qSt}hxt(t){this.HSt.qSt=!!t,this.Vbt.wvt()}oxt(){return this.HSt.kTt}ySt(){return!this.rxt()&&!this.Bc.Jvt()&&!this.oxt()}axt(){return this.DTt||(this.DTt=new Map),this.DTt}lxt(){return this.LTt||(this.LTt=new Map),this.LTt}YTt(){const t=this.OTt;return cb(this.Ws,t),this.xbt.apply(this.vMt,t)}*WTt(){if((this.rxt()||this.Bc.Jvt())&&(yield this),this.oxt()){const t=this.OTt;return cb(this.Ws,t),yield*this.xbt.apply(this.vMt,t)}return this.gP()}XTt(){const t=this.OTt;return cb(this.Ws,t),this.xbt.apply(this.mpt.jW().eq(),t)}*jTt(){if((this.rxt()||this.Bc.Jvt())&&(yield this),this.oxt()){const t=this.OTt;return cb(this.Ws,t),yield*this.xbt.apply(this.mpt.jW().eq(),t)}return this.gP()}qxt(){const t=this.OTt,s=this.mpt.rV().iV();for(let e=0,i=s.length;e<i;++e)this.xbt.apply(s[e].eq(),t)}*Jxt(){if((this.rxt()||this.Bc.Jvt())&&(yield this),this.oxt()){const t=this.OTt,s=this.mpt.rV().iV();for(let e=0,i=s.length;e<i;++e)yield*this.xbt.apply(s[e].eq(),t)}else this.qxt()}Yxt(){const t=this.OTt;cb(this.Ws,t);const s=this.mpt.rV().iV();for(let e=0,i=s.length;e<i;++e)this.xbt.apply(s[e].eq(),t)}*Xxt(){if((this.rxt()||this.Bc.Jvt())&&(yield this),this.oxt()){const t=this.OTt;cb(this.Ws,t);const s=this.mpt.rV().iV();for(let e=0,i=s.length;e<i;++e)yield*this.xbt.apply(s[e].eq(),t)}else this.Yxt()}jxt(){const t=this.Ws,s=this.OTt,e=this.xbt,i=this.mpt.rV().iV();for(let r=0,n=i.length;r<n;++r){const n=i[r];for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(r);e.apply(n.eq(),s)}}*Uxt(){if((this.rxt()||this.Bc.Jvt())&&(yield this),this.oxt()){const t=this.Ws,s=this.OTt,e=this.xbt,i=this.mpt.rV().iV();for(let r=0,n=i.length;r<n;++r){const n=i[r];for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(r);yield*e.apply(n.eq(),s)}}else this.jxt()}zxt(){const t=this.Ws,s=this.OTt,e=this.xbt,i=this.mpt.rV().iV();for(let e=0,i=t.length;e<i;++e){const i=t[e];i.XMt()||(s[e]=i.Hs(0))}for(let r=0,n=i.length;r<n;++r){const n=i[r];for(let e=0,i=t.length;e<i;++e){const i=t[e];i.XMt()&&(s[e]=i.Hs(r))}e.apply(n.eq(),s)}}*Hxt(){if((this.rxt()||this.Bc.Jvt())&&(yield this),this.oxt()){const t=this.Ws,s=this.OTt,e=this.xbt,i=this.mpt.rV().iV();for(let e=0,i=t.length;e<i;++e){const i=t[e];i.XMt()||(s[e]=i.Hs(0))}for(let r=0,n=i.length;r<n;++r){const n=i[r];for(let e=0,i=t.length;e<i;++e){const i=t[e];i.XMt()&&(s[e]=i.Hs(r))}yield*e.apply(n.eq(),s)}}else this.zxt()}Wxt(){const t=this.Ws,s=this.OTt,e=this.xbt,i=this.mpt,r=i.Kxt(),n=i.rV().iV();r.Qxt(e);for(let i=0,r=n.length;i<r;++i){const r=n[i];for(let e=0,r=t.length;e<r;++e)s[e]=t[e].Hs(i);e.apply(r.eq(),s)}r.tCt(e)}*Vxt(){if((this.rxt()||this.Bc.Jvt())&&(yield this),this.oxt()){const t=this.Ws,s=this.OTt,e=this.xbt,i=this.mpt,r=i.Kxt(),n=i.rV().iV();r.Qxt(e);for(let i=0,r=n.length;i<r;++i){const r=n[i];for(let e=0,r=t.length;e<r;++e)s[e]=t[e].Hs(i);yield*e.apply(r.eq(),s)}r.tCt(e)}else this.Wxt()}sCt(){return this.BMt?this.BMt.lq().sxt()>=2?this.BMt.cq():this.BMt:this.mpt.HW().sxt()>=2?this.mpt.$W():this.mpt}Lxt(){const t=this.OTt;return cb(this.Ws,t),this.xbt.apply(this.sCt(),t)}*kxt(){if((this.rxt()||this.Bc.Jvt())&&(yield this),this.oxt()){const t=this.OTt;cb(this.Ws,t);let s=this.xbt.apply(this.sCt(),t);return fb.Mo(s)&&(s=yield*s),s}return this.Lxt()}Fxt(){const t=this.mpt,s=t.v1(),e=t.kMt(),i=this.Ws,r=this.FTt,n=this.OTt,h=this.xbt,o=this.$Mt,a=t.rV().iV();for(let t=0,s=i.length;t<s;++t){const s=i[t];s.XMt()||(n[t]=s.Hs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(r)for(let s=0,e=i.length;s<e;++s){const e=i[s];e.XMt()&&(n[s]=e.Hs(t))}const u=s?l.fU().VMt(e):0;h.apply(l.Ont()[o+u].eq(),n)}}*Dxt(){if((this.rxt()||this.Bc.Jvt())&&(yield this),this.oxt()){const t=this.mpt,s=t.v1(),e=t.kMt(),i=this.Ws,r=this.FTt,n=this.OTt,h=this.xbt,o=this.$Mt,a=t.rV().iV();for(let t=0,s=i.length;t<s;++t){const s=i[t];s.XMt()||(n[t]=s.Hs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(r)for(let s=0,e=i.length;s<e;++s){const e=i[s];e.XMt()&&(n[s]=e.Hs(t))}const u=s?l.fU().VMt(e):0;yield*h.apply(l.Ont()[o+u].eq(),n)}}else this.Fxt()}Nxt(){const t=this.Ws,s=this.OTt,e=this.xbt,i=this.mpt.rV().iV(),r=[];for(let n=0,h=i.length;n<h;++n){const h=i[n];for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(n);r.push(e.apply(h.eq(),s))}return Promise.all(r)}*Bxt(){if((this.rxt()||this.Bc.Jvt())&&(yield this),this.oxt()){const t=this.Ws,s=this.OTt,e=this.xbt,i=this.mpt.rV().iV(),r=[];for(let n=0,h=i.length;n<h;++n){const h=i[n];for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(n);r.push(yield*e.apply(h.eq(),s))}return Promise.all(r)}return this.Nxt()}Ext(){const t=this.mpt,s=t.v1(),e=t.kMt(),i=this.Ws,r=this.OTt,n=this.xbt,h=this.$Mt,o=t.rV().iV(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,e=i.length;s<e;++s)r[s]=i[s].Hs(t);const u=s?l.fU().VMt(e):0;a.push(n.apply(l.Ont()[h+u].eq(),r))}return Promise.all(a)}*Oxt(){if((this.rxt()||this.Bc.Jvt())&&(yield this),this.oxt()){const t=this.mpt,s=t.v1(),e=t.kMt(),i=this.Ws,r=this.OTt,n=this.xbt,h=this.$Mt,o=t.rV().iV(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,e=i.length;s<e;++s)r[s]=i[s].Hs(t);const u=s?l.fU().VMt(e):0;a.push(yield*n.apply(l.Ont()[h+u].eq(),r))}return Promise.all(a)}return this.Ext()}async _xt(){try{await this.xbt()}catch(t){console.error(`Unhandled exception running script %c${this.Vbt.t5().Rc()}, event ${this.Vbt.xvt()}, action ${this.Bvt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.iz&&self.iz.Gbt(this),fb.tSt._bt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),fb.tSt.Ibt())}}*Ixt(){return(this.rxt()||this.Bc.Jvt())&&(yield this),this._xt()}i4(){return this.DTt&&this.DTt.size?{ex:fb.So(this.DTt)}:null}r4(t){if(this.DTt&&(this.DTt.clear(),this.DTt=null),!t)return;const s=t.ex;s&&(this.DTt=fb.vo(s))}}}{let Mb=function(t){return t instanceof jb?Vb.YV(t):t.PJ()},Tb=function(t){return Mb(t).LB()},xb=function(t){return Vb.YV(t)},Cb=function(t){return xb(t).LB()},Gb=function(t){return t instanceof Ub?Vb.YV(t):t},_b=function(t){return t instanceof zb?Vb.YV(t):t},Ib=function(t,s,e,i){s.CU()<e.CU()?t.Set(s,e,i):t.Set(e,s,i)},Pb=function(t,s,e){s.CU()<e.CU()?t.Eu(s,e):t.Eu(e,s)},Rb=function(t,s){t.Ou(s)},Ab=function(t,s,e){return s.CU()<e.CU()?t.Hs(s,e):t.Hs(e,s)},Eb=function(t,s,e,i){if(!s)return!1;const r=0!==e||0!==i,n=t.LB(),h=Vb.Ak(),o=Vb.Dgt(),a=o.fN().Upt(),l=o.fU(),u=o.ixt(),c=s.rV(),f=l!==s;let d;Xb=s,Yb=f&&!u,Zb=!1;let p=0,m=0,g=!1;c._pt()?(Hb.S(n.Bz()),Hb.offset(e,i),h.eCt(n.kB(),s,Hb,Jb),d=Jb):a?Vb.iCt()&&!c.Lpt().length&&c.Dpt().length?d=c.Dpt():(d=c.Lpt(),Zb=!0):d=c.Dpt(),r&&(p=n.YM(),m=n.KM(),n.Gz(e,i),n.Tz());for(const s of d)if(h.R$(t,s)){if(g=!0,u)break;f&&Kb.add(s)}return r&&(n.xz(p,m),n.Tz()),kb.bh(Jb),g},Ob=function(t){const s=Vb.pN().Upt(),e=Xb.rV(),i=e.Dpt(),r=e.Lpt();e._pt()?(e.Bpt(Kb),s&&(kb.bh(r),e.$pt(Kb,Xb.iV()))):s?Zb?e.Wpt(Kb):(e.$pt(Kb,i),e.Bpt(Kb)):e.Bpt(Kb),Xb.pbt()},Fb=function(t,s){Yb&&(s&&Ob(t),Kb.clear(),Xb=null,Yb=!1)},Db=function(t,s){const e=Vb.RB(s);if(!e)return!1;const i=t.rV();if(!i._pt()&&!i.Dpt().includes(e))return!1;if(t.v1()){if(e.fU().rCt(t))return i.jpt(e),t.pbt(),!0}else if(e.fU()===t)return i.jpt(e),t.pbt(),!0;return!1},Lb=function(t,s){const e=t.rV();if(e._pt()){e.Fpt(!1),e.Gpt();const i=t.iV();for(let t=0,r=i.length;t<r;++t){const r=i[t];r.CU()===s?e.Opt(r):e.Ept(r)}return t.pbt(),!!e.Dpt().length}{const i=e.Dpt();let r=0;for(let t=0,n=i.length;t<n;++t){const n=i[t];i[r]=n,n.CU()===s?e.Opt(n):++r}return kb.Sh(i,r),t.pbt(),!!i.length}};GetInst=Mb,GetWorldInfo=Tb,GetInst_SDKv2=xb,GetWorldInfo_SDKv2=Cb,GetObjectClass=Gb,GetLayer=_b,CollMemory_Add=Ib,CollMemory_Remove=Pb,CollMemory_RemoveInstance=Rb,CollMemory_Get=Ab,DoOverlapCondition=Eb,FinishCollisionConditionPicking=Ob,FinishCollisionCondition=Fb,PickByUID_Normal=Db,PickByUID_Inverted=Lb;const kb=self._s,Nb=new kb.xo,Bb={},$b={},Wb={};let Vb=null;kb.nCt=function(t){Vb=t};const jb=self.cU,Ub=self.UW,zb=self.JV;$b.hCt=function(t,s){return kb.compare(this.LB().YM(),t,s)},Wb.hCt=function(t,s){return kb.compare(this.x,t,s)},$b.oCt=function(t,s){return kb.compare(this.LB().KM(),t,s)},Wb.oCt=function(t,s){return kb.compare(this.y,t,s)},$b.aCt=function(){return this.LB().jz()},Wb.aCt=function(){return this.Vz()},Bb.lCt=function(){const t=Tb(this),s=t.mB(),e=t.Bz();return e.sl()<0||e.el()<0||e.Qa()>s.jg()||e.tl()>s.Qg()},Bb.uCt=function(t,s,e){const i=Gb(this).rV(),r=i.iV();if(!r.length)return!1;let n=r[0],h=n.LB(),o=n,a=kb.hn(h.YM(),h.KM(),s,e);for(let i=1,l=r.length;i<l;++i){n=r[i],h=n.LB();const l=kb.hn(h.YM(),h.KM(),s,e);(0===t&&l<a||1===t&&l>a)&&(a=l,o=n)}return i.jpt(o),!0},$b.XM=function(t){const s=this.LB();s.YM()!==t&&(s.XM(t),s.Tz())},Wb.XM=function(t){this.x=+t},$b.QM=function(t){const s=this.LB();s.KM()!==t&&(s.QM(t),s.Tz())},Wb.QM=function(t){this.y=+t},$b.cCt=function(t,s){const e=this.LB();e.fCt(t,s)||(e.xz(t,s),e.Tz())},Wb.cCt=function(t,s){this.setPosition(t,s)},Bb.dCt=function(t,s){if(!(t=Gb(t)))return;const e=Mb(this),i=t.sV(e);if(!i)return;const[r,n]=i.pCt(s),h=e.LB();h.YM()===r&&h.KM()===n||(h.xz(r,n),h.Tz())},Bb.mCt=function(t){if(0===t)return;const s=Tb(this);s.Gz(s.gCt()*t,s.yCt()*t),s.Tz()},$b.wCt=function(t,s){if(0===s)return;const e=this.LB();t=kb.tn(t),e.Gz(Math.cos(t)*s,Math.sin(t)*s),e.Tz()},Wb.wCt=function(t,s){0!==s&&(t=kb.tn(t),this.offsetPosition(Math.cos(t)*s,Math.sin(t)*s))},$b.YM=function(){return this.LB().YM()},Wb.YM=function(){return this.x},$b.KM=function(){return this.LB().KM()},Wb.KM=function(){return this.y},Bb.AN=function(){return Vb.AN(Mb(this))},$b.SCt=function(t,s){return kb.compare(this.LB().jg(),t,s)},Wb.SCt=function(t,s){return kb.compare(this.width,t,s)},$b.vCt=function(t,s){return kb.compare(this.LB().Qg(),t,s)},Wb.vCt=function(t,s){return kb.compare(this.height,t,s)},$b.Xg=function(t){const s=this.LB();s.jg()!==t&&(s.Xg(t),s.Tz())},Wb.Xg=function(t){this.width=t},$b.Ug=function(t){const s=this.LB();s.Qg()!==t&&(s.Ug(t),s.Tz())},Wb.Ug=function(t){this.height=t},$b.$R=function(t,s){const e=Tb(this);e.jg()===t&&e.Qg()===s||(e.$R(t,s),e.Tz())},Wb.$R=function(t,s){this.RV(t,s)},$b.jg=function(){return this.LB().jg()},Wb.jg=function(){return this.width},$b.Qg=function(){return this.LB().Qg()},Wb.Qg=function(){return this.height},Bb.bCt=function(){return Tb(this).Bz().Qa()},Bb.MCt=function(){return Tb(this).Bz().tl()},Bb.TCt=function(){return Tb(this).Bz().sl()},Bb.xCt=function(){return Tb(this).Bz().el()},Bb.CCt=function(){const t=Tb(this).Bz();return(t.Qa()+t.sl())/2},Bb.GCt=function(){const t=Tb(this).Bz();return(t.tl()+t.el())/2},Bb._Ct=function(t,s){return kb.ln(Tb(this).FV(),kb.tn(s))<=kb.tn(t)},Bb.ICt=function(t){return kb.cn(Tb(this).FV(),kb.tn(t))},Bb.PCt=function(t,s){const e=kb.tn(t),i=kb.tn(s),r=Tb(this).FV();return kb.cn(i,e)?kb.cn(r,e)&&!kb.cn(r,i):!(!kb.cn(r,e)&&kb.cn(r,i))},$b.OV=function(t){const s=this.LB(),e=kb.Qr(kb.tn(t));isNaN(e)||s.FV()===e||(s.OV(e),s.Tz())},Wb.OV=function(t){this.kz=t},Bb.RCt=function(t){if(isNaN(t)||0===t)return;const s=Tb(this);s.OV(s.FV()+kb.tn(t)),s.Tz()},Bb.ACt=function(t){if(isNaN(t)||0===t)return;const s=Tb(this);s.OV(s.FV()-kb.tn(t)),s.Tz()},Bb.ECt=function(t,s){const e=Tb(this),i=e.FV(),r=kb.un(i,kb.tn(s),kb.tn(t));isNaN(r)||i===r||(e.OV(r),e.Tz())},Bb.OCt=function(t,s,e){const i=Tb(this),r=i.FV(),n=s-i.YM(),h=e-i.KM(),o=Math.atan2(h,n),a=kb.un(r,o,kb.tn(t));isNaN(a)||r===a||(i.OV(a),i.Tz())},Bb.FCt=function(t,s){const e=Tb(this),i=e.FV(),r=t-e.YM(),n=s-e.KM(),h=Math.atan2(n,r);isNaN(h)||i===h||(e.OV(h),e.Tz())},$b.FV=function(){return kb.sn(this.LB().FV())},Wb.FV=function(){return this.kz},Bb.DCt=function(t,s){return kb.compare(kb.Cn(100*Tb(this).SO(),6),t,s)},$b.vj=function(){return this.LB().vj()},Wb.vj=function(){return this.isVisible},Bb.wj=function(t){const s=Tb(this);t=2===t?!s.vj():0!==t,s.vj()!==t&&(s.wj(t),Vb.jB())},Bb.bO=function(t){const s=kb.Kr(t/100,0,1),e=Tb(this);if(e.FH()){if(e.Unt().LCt()===s)return}else if(e.SO()===s)return;e.bO(s),Vb.jB()},Bb.kCt=function(t){Nb.ta(t);const s=Tb(this);s.zz().Ho(Nb)||(s.qz(Nb),Vb.jB())},Bb.TO=function(){const t=Tb(this).zz();return kb.In(t.No(),t.Bo(),t.$o(),t.Wo())},Bb.SO=function(){return kb.Cn(100*Tb(this).SO(),6)},Bb.NCt=function(t){return!!(t=_b(t))&&Tb(this).kB()===t},Bb.BCt=function(t){const s=Gb(this).rV(),e=s.iV();if(!e.length)return!1;let i=e[0];for(let s=1,r=e.length;s<r;++s){const r=e[s],n=r.LB(),h=i.LB(),o=n.kB().Tk(),a=h.kB().Tk();0===t?(o>a||o===a&&n.NB()>h.NB())&&(i=r):(o<a||o===a&&n.NB()<h.NB())&&(i=r)}return s.jpt(i),!0},$b.$Ct=function(t,s,e){const i=this.LB(),r=0===t?i.tT():i.Lz();return kb.compare(r,s,e)},Wb.$Ct=function(t,s,e){const i=0===t?this.Wj:this.Dz;return kb.compare(i,s,e)},$b.WCt=function(){this.LB().Yz()},Wb.WCt=function(){this.Jz()},$b.VCt=function(){this.LB().Zz()},Wb.VCt=function(){this.Xz()},Bb.jCt=function(t){(t=_b(t))&&Tb(this).Qz(t)},Bb.UCt=function(t,s){const e=0===t;if(!(s=Gb(s)))return;const i=Mb(this),r=s.zCt(i);r&&i.LB().sH(r,e)},$b.sT=function(t){const s=this.LB();s.tT()!==t&&(s.sT(t),Vb.jB())},Wb.sT=function(t){this.Wj=t},Bb.HCt=function(){return Tb(this).kB().Tk()},Bb.qCt=function(){return Tb(this).kB().Rc()},$b.JCt=function(){return this.LB().NB()},Wb.JCt=function(){return this.zIndex},$b.YCt=function(){return this.LB().tT()},Wb.YCt=function(){return this.Wj},$b.XCt=function(){return this.LB().Lz()},Wb.XCt=function(){return this.Dz},Bb.ZCt=function(t){const s=Mb(this),e=s.fU()._V().Lnt(t);if(!e)return;const i=e.Tk();return s.LB().bz().Sq(i)},Bb.KCt=function(t,s){const e=Mb(this),i=e.fU()._V().Lnt(s);if(!i)return;const r=i.Tk(),n=1===t,h=e.LB().bz();h.Sq(r)!==n&&(h.vq(r,n),h.bq(),Vb.jB())},Bb.QCt=function(t,s,e){const i=Mb(this),r=i.fU()._V().Lnt(t);if(!r)return;s=Math.floor(s);const n=r.HG().JG(s);if(!n)return;"color"===n?(Nb.ta(e),e=Nb):"percent"===n&&(e/=100);const h=r.Tk(),o=i.LB().bz();o.Tq(h,s,e)&&o.Sq(h)&&Vb.jB()};const Hb=kb.Hr(kb.Rect),qb=[],Jb=[];let Yb=!1,Xb=null,Zb=!1;const Kb=new Set;function*Qb(t){if(!t)return!1;const s=this.l$(),e=s.Ak(),i=s.aN(),r=i.bN(),n=i.Dgt(),h=n.fU(),o=n.axt(),a=n.lxt(),l=r.sX(),u=s.kN(),c=u-1,f=l.pN(),d=r.eX(f);let p=o.get("collmemory");p||(p=kb.Hr(kb.Iu),o.set("collmemory",p)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),s.Sf().addEventListener("instancedestroy",t=>Rb(p,t.pq)));const m=h.rV(),g=t.rV(),y=m.iV();let w=null;for(let s=0;s<y.length;++s){const r=y[s];g._pt()?(e.eCt(r.LB().kB(),t,r.LB().Bz(),qb),w=qb,e.tGt(r,t,w)):w=g.iV();for(let s=0;s<w.length;++s){const n=w[s];if(e.R$(r,n)||e.sGt(r,n)){const s=Ab(p,r,n);let e=!1,o=-2;"number"==typeof s&&(e=!0,o=s);const a=!e||o<c;if(Ib(p,r,n,u),a){const s=f.tX();i.oX(s);const e=h.rV(),o=t.rV();if(e.Fpt(!1),o.Fpt(!1),h===t){const t=e.Dpt();kb.bh(t),t.push(r),t.push(n),h.pbt()}else{const s=e.Dpt(),i=o.Dpt();kb.bh(s),kb.bh(i),s.push(r),i.push(n),h.pbt(),t.pbt()}yield*f.nbt(l,d),i.lX(s)}}else Pb(p,r,n)}kb.bh(qb)}return r.dX(),!1}Bb.eGt=function(t){const s=Gb(this);t=Gb(t);const e=s.l$();if(e.iGt())return Qb.call(s,t);if(!t)return!1;const i=e.Ak(),r=e.aN(),n=r.bN(),h=r.Dgt(),o=h.fU(),a=h.axt(),l=h.lxt(),u=n.sX(),c=e.kN(),f=c-1,d=u.pN(),p=n.eX(d);let m=a.get("collmemory");m||(m=kb.Hr(kb.Iu),a.set("collmemory",m)),l.get("collisionCreatedDestroyCallback")||(l.set("collisionCreatedDestroyCallback",!0),e.Sf().addEventListener("instancedestroy",t=>Rb(m,t.pq)));const g=o.rV(),y=t.rV(),w=g.iV();let S=null;for(let s=0;s<w.length;++s){const e=w[s];y._pt()?(i.eCt(e.LB().kB(),t,e.LB().Bz(),qb),S=qb,i.tGt(e,t,S)):S=y.iV();for(let s=0;s<S.length;++s){const n=S[s];if(i.R$(e,n)||i.sGt(e,n)){const s=Ab(m,e,n);let i=!1,h=-2;"number"==typeof s&&(i=!0,h=s);const a=!i||h<f;if(Ib(m,e,n,c),a){const s=d.tX();r.oX(s);const i=o.rV(),h=t.rV();if(i.Fpt(!1),h.Fpt(!1),o===t){const t=i.Dpt();kb.bh(t),t.push(e),t.push(n),o.pbt()}else{const s=i.Dpt(),r=h.Dpt();kb.bh(s),kb.bh(r),s.push(e),r.push(n),o.pbt(),t.pbt()}d.aX(u,p),r.lX(s)}}else Pb(m,e,n)}kb.bh(qb)}return n.dX(),!1},Bb.rGt=function(t){return t=Gb(t),Eb(Mb(this),t,0,0)},Bb.nGt=function(t,s,e){return t=Gb(t),Eb(Mb(this),t,s,e)},Bb.hGt=function(){return!0},Bb.SH=function(){return Tb(this).SH()},Bb.o4=function(){return Tb(this).o4()},Bb.oGt=function(t,s){const e=Gb(this);t=Gb(t);const i=e.l$(),r=this.rV().iV();if(0===r.length)return!1;const n=t.rV();let h=n.iV();if(n._pt()){const s=[...i.aGt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=n._pt()?null:new Set(h),a=new Set;for(let e=0,i=r.length;e<i;++e){const i=r[e];if(1===s)for(const s of i.lH())s.lGt(t)&&(null===o||o.has(s))&&a.add(s);else{let e;if(0===s){if(e=i.hH(),null===e)continue}else e=i.aH();e.lGt(t)&&(null===o||o.has(e))&&a.add(e)}}return 0!==a.size&&(n.Bpt(a),t.pbt(),!0)},Bb.uGt=function(t,s){const e=Gb(this);t=Gb(t);const i=e.l$(),r=e.rV().iV();if(0===r.length)return!1;const n=t.rV();let h=n.iV();if(n._pt()){const s=[...i.aGt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=n._pt()?null:new Set(h),a=new Set;for(let e=0,i=r.length;e<i;++e){const i=r[e];2!==s||i.o4()||!i.lGt(t)||null!==o&&!o.has(i)||a.add(i);for(const e of 0===s?i.children():i.pH())2===s&&e.o4()||e.lGt(t)&&(null===o||o.has(e))&&a.add(e)}return 0!==a.size&&(n.Bpt(a),t.pbt(),!0)},Bb.cGt=function(t,s,e){const i=Gb(this);t=Gb(t);const r=i.l$(),n=i.rV().iV();if(0===n.length)return!1;const h=t.rV();let o=h.iV();if(h._pt()){const s=[...r.aGt(t)];s.length>0&&(o=o.concat(s))}if(0===o.length)return!1;const a=h._pt()?null:new Set(o),l=[];for(let i=0,r=n.length;i<r;++i){const r=n[i];if(0===s){const s=r.dH(e);null!==s&&s.lGt(t)&&(null===a||a.has(s))&&l.push(s)}else if(1===s)for(const s of r.children())if(s.lGt(t)){if(0===e){(null===a||a.has(s))&&l.push(s);break}--e}}return 0!==l.length&&(h.Npt(l),t.pbt(),!0)},Bb.fGt=function(t,s,e){const i=Mb(this);switch(t){case 0:default:return kb.compare(i.cH(),s,e);case 1:return kb.compare(i.dGt(),s,e)}},Bb.gH=function(t,s,e,i,r,n,h,o,a,l){t=Gb(t);const u=Mb(this),c=Vb.kgt().fU();for(const f of t.pGt(u,c)){if(!f.HW().EW())return;u.gH(f,{bH:s,TH:e,CH:i,_H:r,PH:n,OH:h,AH:o,DH:a,kH:l})}},Bb.yH=function(t){t=Gb(t);const s=Mb(this),e=Vb.kgt().fU();for(const i of t.pGt(s,e))s.yH(i)},Bb.mGt=function(){const t=Mb(this);t.SH()&&t.hH().yH(t)},Bb.gGt=function(){const t=Mb(this).hH();return t?t.CU():-1},Bb.yGt=function(){return Mb(this).cH()},Bb.wGt=function(){return Mb(this).dGt()},Bb.SGt=function(t,s){t=Math.floor(t),s=Math.floor(s);const e=Tb(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(e.VH(),e.Tz()):e.$H(t,s)},Bb.UH=function(t,s,e,i,r,n,h,o){const a=Tb(this);a.UH(t,s,{mode:0===e?"absolute":"relative",x:i,y:r,Wj:n,JH:h,YH:o})&&a.Tz()},Bb.vGt=function(){const t=Tb(this);return t.HH()?t.qH()._T():0},Bb.bGt=function(){const t=Tb(this);return t.HH()?t.qH().IT():0},Bb.MGt=function(t){const s=Tb(this);t=2===t?!s.vj():0!==t,s.vj()!==t&&s.wj(t)},Bb.hq=function(t,s){this instanceof self.cU?this.xY(t,s):this.hq(t,s)},Bb.TGt=function(t,s){this instanceof self.cU?this.GY(t,""+s):this.TGt(t,""+s)},Bb.xGt=function(t){this instanceof self.cU?this._Y(t):this.xGt(t)},Bb.CGt=function(){this instanceof self.cU?this.bY():this.iq()},Bb.GGt=function(){this instanceof self.cU?this.MY():this.rq()},Bb._Gt=function(){return this instanceof self.cU?this.TY():this._Gt()},Bb.IGt=function(t){this instanceof self.cU?this.PGt(0!==t):this.RGt(0!==t)},Bb.AGt=function(){return this instanceof self.cU?this.Obt():this.EGt()},$b.OGt=function(t,s,e){return kb.compare(this.PJ().uot(t),s,e)},Wb.OGt=function(t,s,e){return kb.compare(xb(this).uot(t),s,e)},$b.FGt=function(t){return!!this.PJ().uot(t)},Wb.FGt=function(t){return!!xb(this).uot(t)},Bb.DGt=function(t,s){const e=Gb(this),i=e.rV(),r=i.iV();if(!r.length)return!1;const n=e.v1();let h=null,o=0;for(let i=0,a=r.length;i<a;++i){const a=r[i],l=n?a.fU().LMt(e.kMt()):0,u=a.uot(l+s);(null===h||0===t&&u<o||1===t&&u>o)&&(o=u,h=a)}return i.jpt(h),!0},Bb.LGt=function(t){const s=Gb(this);return s.l$().Dgt().ixt()?Lb(s,t):Db(s,t)},Bb.oJ=function(t){const s=new Set(kb.Lh(t)),e=Mb(this).FU();return s.isSubsetOf(e)},Bb.kGt=function(){return Mb(this).NGt()},Bb.BGt=function(){return Mb(this).FU().size},Bb.$Gt=function(t){return Mb(this).WGt(t)},Bb.VGt=function(t,s){const e=kb.Lh(s);if(0===e.length)return;const i=Mb(this),r=new Set(i.FU());if(0===t)for(const t of e)r.add(t);else if(1===t)for(const t of e)r.delete(t);i.LU(r)},Bb.jGt=function(){Vb.wU(Mb(this))},Bb.UGt=function(){return!0},Bb.zGt=function(){return!0},$b.HGt=function(t,s){this.PJ().cot(t,s)},Wb.HGt=function(t,s){xb(this).cot(t,s)},$b.qGt=function(t,s){const e=this.PJ(),i=e.uot(t);"number"==typeof i&&"number"!=typeof s?s=parseFloat(s):"string"==typeof i&&"string"!=typeof s&&(s=s.toString()),e.cot(t,i+s)},Wb.qGt=function(t,s){const e=xb(this),i=e.uot(t);"number"==typeof i&&"number"!=typeof s?s=parseFloat(s):"string"==typeof i&&"string"!=typeof s&&(s=s.toString()),e.cot(t,i+s)},$b.JGt=function(t,s){const e=this.PJ(),i=e.uot(t);"number"==typeof i&&("number"!=typeof s&&(s=parseFloat(s)),e.cot(t,i-s))},Wb.JGt=function(t,s){const e=xb(this),i=e.uot(t);"number"==typeof i&&("number"!=typeof s&&(s=parseFloat(s)),e.cot(t,i-s))},$b.YGt=function(t,s){this.PJ().cot(t,s?1:0)},Wb.YGt=function(t,s){xb(this).cot(t,s?1:0)},$b.XGt=function(t){const s=this.PJ();s.cot(t,0===s.uot(t)?1:0)},Wb.XGt=function(t){const s=xb(this);s.cot(t,0===s.uot(t)?1:0)},Bb.ZGt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const e=Mb(this),i="state";Vb.KGt(),e.c8(i),e.lT(s,i),Vb.QGt(i,{t_t:!0})},Bb.s_t=function(){return JSON.stringify(Mb(this).aT("state"))},Bb.e_t=function(){return Mb(this).fU().Rc()},Bb.i_t=function(){const t=Vb.Fgt().vmt();let s=t.oV();for(const e of Vb.aGt(t))++s;return s},Bb.r_t=function(){return Vb.Fgt().vmt().rV().iV().length},$b._U=function(){return this.PJ()._U()},Wb._U=function(){return xb(this)._U()},$b.CU=function(){return this.PJ().CU()},Wb.CU=function(){return xb(this).CU()},Bb.rwt=function(t){const s=Mb(this);return t.toLowerCase()===Vb.aN().awt(s)},Bb.NU=function(t){const s=Mb(this);Vb.aN().NU(s,t)},Bb.n_t=function(t){const s=Gb(this);return Vb.aN().Dyt().h_t(s.rV().iV(),t),!0},Bb.o_t=function(){return Mb(this).PU()},kb.a_t=function(t,s,e){const i=t[1],r=t[3],n=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.t$,w=s.wht,S=s.Sht,v=Object.assign({},Bb,e>=2?Wb:$b);r&&(y.hCt=v.hCt,y.oCt=v.oCt,y.aCt=v.aCt,y.lCt=v.lCt,y.uCt=v.uCt,w.XM=v.XM,w.QM=v.QM,w.cCt=v.cCt,w.dCt=v.dCt,w.mCt=v.mCt,w.wCt=v.wCt,S.l_t=v.YM,S.u_t=v.KM,S.RN=v.AN),n&&(y.SCt=v.SCt,y.vCt=v.vCt,w.Xg=v.Xg,w.Ug=v.Ug,w.$R=v.$R,S.c_t=v.jg,S.f_t=v.Qg,S.d_t=v.bCt,S.p_t=v.MCt,S.m_t=v.TCt,S.g_t=v.xCt,S.y_t=v.CCt,S.w_t=v.GCt),h&&(y.S_t=v._Ct,y.v_t=v.ICt,y.PCt=v.PCt,w.OV=v.OV,w.RCt=v.RCt,w.ACt=v.ACt,w.ECt=v.ECt,w.OCt=v.OCt,w.FCt=v.FCt,S.b_t=v.FV),o&&(y.vj=v.vj,y.DCt=v.DCt,w.wj=v.wj,w.bO=v.bO,w.kCt=v.kCt,S.Opacity=v.SO,S.ColorValue=v.TO),a&&(y.NCt=v.NCt,y.BCt=v.BCt,y.$Ct=v.$Ct,w.WCt=v.WCt,w.VCt=v.VCt,w.jCt=v.jCt,w.UCt=v.UCt,w.sT=v.sT,S.HCt=v.HCt,S.qCt=v.qCt,S.JCt=v.JCt,S.YCt=v.YCt,S.XCt=v.XCt),l&&(y.ZCt=v.ZCt,w.KCt=v.KCt,w.QCt=v.QCt),d&&(y.hGt=v.hGt,y.SH=v.SH,y.o4=v.o4,y.oGt=v.oGt,y.uGt=v.uGt,y.cGt=v.cGt,y.fGt=v.fGt,w.gH=v.gH,w.yH=v.yH,w.mGt=v.mGt,S.gGt=v.gGt,S.yGt=v.yGt,S.wGt=v.wGt),p&&(w.SGt=v.SGt,w.UH=v.UH,S.vGt=v.vGt,S.bGt=v.bGt),u&&(y.vj=v.vj,w.wj=v.MGt,w.M_t=v.hq,w.T_t=v.TGt,w.x_t=v.xGt),c&&(y.C_t=v._Gt,w.G_t=v.CGt,w.__t=v.GGt),f&&(y._u=v.AGt,w.I_t=v.IGt),m&&(y.eGt=v.eGt,y.rGt=v.rGt,y.nGt=v.nGt,s.P_t=Fb),i||(y.OGt=v.OGt,y.FGt=v.FGt,y.DGt=v.DGt,y.LGt=v.LGt,y.oJ=v.oJ,w.HGt=v.HGt,w.qGt=v.qGt,w.JGt=v.JGt,w.YGt=v.YGt,w.XGt=v.XGt,w.VGt=v.VGt,y.UGt=v.UGt,y.zGt=v.zGt,w.jGt=v.jGt,w.ZGt||(w.ZGt=v.ZGt),S.s_t||(S.s_t=v.s_t),S.i_t=v.i_t,S.r_t=v.r_t,S.R_t=v._U,S.A_t=v.CU,S.e_t=v.e_t,S.kGt=v.kGt,S.BGt=v.BGt,S.$Gt=v.$Gt,y.rwt=v.rwt,w.NU=v.NU,w.n_t=v.n_t),g&&(S.o_t=v.o_t)}}{const tM=self._s;tM.Lyt=class extends tM.Ur{constructor(t){super(),this.Hpt=t,this.qc="",this.zD=-1,this.E_t="",this.O_t=!1,this.F_t=null,this.smt=0,this._St=[],this.omt=null,this.D_t=new Map,this.L_t=null,this.k_t=null,this.N_t=-1,this.Ebt=null,this.B_t=null,this.$_t=!1}qr(){this.qc="",this.zD=-1,this.E_t="",this.F_t=null,this.k_t=null,this.Ebt=null,this.B_t=null,this.N_t=-1,tM.bh(this._St),this.omt&&(this.omt.clear(),this.omt=null);for(const t of this.D_t.values())t.qr();this.D_t.clear(),this.L_t=null}JM(){const t=this.Hpt,s=t.l$().S1(),e=t.Fgt();this.F_t=e.pN(),this.smt=e.dmt()+1;const i=t.Gwt(this.F_t);i&&(this.k_t=i,this.Ebt=i.Ybt(),this.B_t=i.Jbt().map(t=>t.Irt()),i.Kvt()&&(this.N_t=i.Qbt()));for(const t of s){const s=t.rV();s._pt()&&!this.F_t.Mvt(t)||(this._St.push(t),this.D_t.set(t,tM.Hr(tM.W_t,s)))}const r=t.mN();this.omt=r.size>0?r:null}V_t(t){this.qc="timer",this.JM(),this.zD=this.Hpt.l$().DN()+t}j_t(t){this.qc="walltimer",this.JM(),this.zD=this.Hpt.l$().BN()+t}U_t(t){this.qc="signal",this.JM(),this.E_t=t.toLowerCase()}h_t(t,s){this.qc="instance-signals",this.JM(),this.E_t=s.toLowerCase(),this.L_t=new Set(t)}z_t(t){this.qc="promise",this.JM(),t.then(()=>this.twt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.twt()})}H_t(){return"timer"===this.qc}q_t(){return"walltimer"===this.qc}Kyt(){return"signal"===this.qc}hwt(){return"instance-signals"===this.qc}Mwt(){return"promise"===this.qc}Qyt(){return this.E_t}J_t(){return this.O_t}twt(){this.O_t=!0}owt(t){this.L_t.delete(t),0===this.L_t.size&&this.twt()}Byt(){return this.H_t()?this.zD<=this.Hpt.l$().DN():this.q_t()?this.zD<=this.Hpt.l$().BN():this.J_t()}Y_t(t){t.amt(this.F_t,this.smt);for(const[t,s]of this.D_t.entries()){const e=t.rV();s.amt(e)}this.omt&&t.Gmt([...this.omt]);const s=this.k_t;s&&(s.lbt(this.Ebt),s.Jbt().map((t,s)=>t.unt(this.B_t[s])),s.Kvt()&&s.tMt(this.N_t))}$yt(t){this.Y_t(t),this.F_t.Qvt(t),this.k_t&&this.k_t.Kvt()&&this.k_t.Sbt(this.N_t),this.Hpt.Ayt(this._St),this.$_t=!0}async Uyt(t){this.Y_t(t);for(const s of this.F_t.tbt(t))await this.Hpt.l$().pyt(s);this.k_t&&this.k_t.Kvt()&&this.k_t.Sbt(this.N_t),this.Hpt.Ayt(this._St),this.$_t=!0}Wyt(){return this.$_t}Mpt(t){for(const s of this.D_t.values())s.Mpt(t);if("instance-signals"===this.qc){for(const s of t)this.L_t.delete(s);0===this.L_t.size&&this.twt()}}i4(){const t={},s={wt:this.qc,t:this.zD,st:this.E_t,s:this.O_t,ev:this.F_t.I1(),sm:this._St.map(t=>t.I1()),dsm:this.omt?[...this.omt].map(t=>t.I1()):null,sols:t};this.F_t.$vt(this.smt)&&(s.act=this.F_t.Ngt(this.smt).I1());for(const[s,e]of this.D_t)t[s.I1().toString()]=e.i4();return"instance-signals"===this.qc&&(s.pi=[...this.L_t].map(t=>t.CU())),s}static Twt(t,s){const e=t.l$(),i=t.qgt(s.ev);if(!i)return null;let r=0;if(s.hasOwnProperty("act")){const e=t.Ygt(s.act);if(!e)return null;r=e.Tk()}const n=tM.Hr(tM.Lyt,t);n.zD=s.t,s.hasOwnProperty("wt")?n.qc=s.wt:n.qc=-1===n.zD?"signal":"timer",n.E_t=s.st,n.O_t=s.s,n.F_t=i,n.smt=r;for(const t of s.sm){const s=e.QY(t);s&&n._St.push(s)}if(Array.isArray(s.dsm))for(const t of s.dsm){const s=e.QY(t);s&&(n.omt||(n.omt=new Set),n.omt.add(s))}for(const[i,r]of Object.entries(s.sols)){const s=parseInt(i,10),h=e.QY(s);if(!h)continue;const o=tM.Hr(tM.W_t,null);o.r4(t,r),n.D_t.set(h,o)}if("instance-signals"===n.qc){n.L_t=new Set;for(const t of s.pi){const s=e.RB(t);s&&n.L_t.add(s)}}return n}}}{const sM=self._s;sM.W_t=class extends sM.Ur{constructor(t){super(),this.mpt=null,this.X_t=!0,this.dQ=[],t&&(this.mpt=t.fU(),this.X_t=t._pt(),sM.Ch(this.dQ,t.Dpt()))}qr(){this.mpt=null,sM.bh(this.dQ)}amt(t){t.Fpt(this.X_t),sM.Ch(t.Dpt(),this.dQ)}Mpt(t){sM.Rh(this.dQ,t)}i4(){return{sa:this.X_t,insts:this.dQ.map(t=>t.CU())}}r4(t,s){const e=t.l$();this.X_t=!!s.sa,sM.bh(this.dQ);for(const t of s.insts){const s=e.RB(t);s&&this.dQ.push(s)}}}}{let eM=function(t,s){let e=t.get(s);return e||(e=new Map,t.set(s,e)),e};GetNextParamMap=eM;const iM=self._s;iM.Z_t=class extends iM.Ur{constructor(t){super(),this.Bc=t.runtime,this.Wc=t.id,this.Xr=t.name??"",this.K_t=!!t.wW,this.Q_t=!!t.tIt,this.sIt=!!t.xW,this.eIt=!!t.iIt,this.rIt=!!t._W,this.nIt=!!t.hIt,this.oIt=!!t.OW,this.aIt=!!t.MW,this.lIt=!!t.PW,this.uIt=t.cIt,this.fIt=null,this.dIt=new Map,this.pIt=new Map,this.mIt=new Map,this.gIt=new Map,this.yIt=t.wIt,this.SIt=null}qr(){this.Bc=null}l$(){return this.Bc}yW(){return this.Wc}Rc(){return this.Xr}vIt(){}nwt(){return this.sxt()>=2?this.SIt.constructor:this.constructor}sxt(){return this.uIt}bIt(t=!1){let s=this.yIt;return t&&"function"!=typeof s&&this.sxt()>=2&&(s=globalThis.LJ),s}SW(){return this.K_t}bW(){return this.Q_t}TW(){return this.aIt}RW(){return this.lIt}GW(){return this.sIt}bM(){return this.eIt}IW(){return this.rIt}EW(){return this.nIt}FW(){return this.oIt}xMt(t,s){if(!s)throw new Error("missing 'this' binding");let e=this.dIt.get(t);return e||(e=t.bind(s),this.dIt.set(t,e),e)}ZTt(t,s,e){if(!s)throw new Error("missing 'this' binding");const i=eM(this.pIt,t);let r=i.get(e);return r||(r=t.bind(s,e),i.set(e,r),r)}KTt(t,s,e,i){if(!s)throw new Error("missing 'this' binding");const r=eM(this.mIt,t),n=eM(r,e);let h=n.get(i);return h||(h=t.bind(s,e,i),n.set(i,h),h)}QTt(t,s,e,i,r){if(!s)throw new Error("missing 'this' binding");const n=eM(this.gIt,t),h=eM(n,e),o=eM(h,i);let a=o.get(r);return a||(a=t.bind(s,e,i,r),o.set(r,a),a)}MIt(t){if(!this.SW())throw new Error("must be single-global plugin");this.fIt=t}WW(){if(!this.SW())throw new Error("must be single-global plugin");return this.fIt}jW(){if(!this.SW())throw new Error("must be single-global plugin");return this.fIt.jW()}TIt(){const t=this.sxt();iM.mW.xIt(this,t);const s=this.bIt(!0);if(s){if(this.SIt=new s,!(this.SIt instanceof self.dW))throw new TypeError("plugin class must derive from IPlugin")}else this.SIt=new self.dW;iM.mW.CIt(t)}NW(){return this.SIt}}}{const rM=self._s;rM.GIt=class extends rM.Z_t{constructor(t,s){super(t),this._It=s,this.IIt=0,this.PIt=new Map,this.RIt("elem-focused",t=>t.AIt()),this.RIt("elem-blurred",t=>{t&&t.EIt()})}qr(){super.qr()}OIt(t){const s=this.IIt++;return this.PIt.set(s,t),s}FIt(t){this.PIt.delete(t)}RIt(t,s){this.Bc.ZU(this._It,t,t=>{const e=this.PIt.get(t.elementId);s(e,t)})}}}{const nM=self._s;nM.DIt=class extends nM.Ur{constructor(t){super(),this.mpt=t,this.Bc=t.l$(),this.LIt=t.HW()}qr(){this.mpt=null,this.Bc=null,this.LIt=null}fU(){return this.mpt}l$(){return this.Bc}HW(){return this.LIt}Vq(){return this.mpt.Vq()}vIt(){}pxt(t){}Qxt(t){}tCt(t){}g5(t){}M5(){}S5(){}U5(t){}kIt(){}bIt(){return null}NIt(t,s,e){const i=nM.Hr(nM.Event,t,s);i.BIt=this,e&&Object.assign(i,e),this.fU().IK(i)}}}{const hM=self._s;hM.$It=class extends hM.Ur{constructor(t,s){super(),this.fe=t,this._It=s,this.WIt=null,this.Bc=t.l$(),this.mpt=this.fe.fU(),this.VIt=this.mpt.Kxt(),this.t8=null,this.e8=null,this.hz=!1,this.az=!1,this.Zf=null,this.cR=!1}qr(){this.cR=!0,this.jIt(),this.UIt(),this.t8=null,this.e8=null,this.Zf&&(this.Zf.qr(),this.Zf=null),this.fe=null,this.Bc=null,this.mpt=null,this.VIt=null}Jr(){return this.cR}PJ(){return this.fe}l$(){return this.Bc}fU(){return this.mpt}HW(){return this.VIt.HW()}Kxt(){return this.VIt}zIt(){return this.fe.AB()}JU(t){return this.Bc.JU(t,this.fe,null)}HIt(t){return this.Bc.HIt(t,this.fe,null)}KB(t){return this.Bc.KB(t,this.fe,null)}qIt(t,s){return this.Bc.qIt(t,this.fe,s)}JIt(t,s){return this.Bc.JIt(t,this.fe,s)}YIt(t){return this.Bc.YIt(t)}XIt(t,s){this.Bc.ZU(this._It,t,s)}ZIt(t){for(const[s,e]of t)this.XIt(s,e)}KIt(t,s){this.Bc.Vc(this._It,t,s)}QIt(t,s){return this.Bc.zB(this._It,t,s)}tPt(t,s){if(!this.Bc.Hk())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this._It,handler:t,data:s,responseId:null});this.KIt(t,s)}sPt(t){if(!t)throw new Error("cannot set empty component id");this.WIt=t}ePt(){if(!this.WIt)throw new Error("wrapper extension component id not set");return this.Bc.dz(this.WIt)}mz(t,s){if(!this.WIt)throw new Error("wrapper extension component id not set");this.Bc.mz(this.WIt,t,s)}iPt(t){for(const[s,e]of t)this.mz(s,e)}jY(t,s){if(!this.WIt)throw new Error("wrapper extension component id not set");this.Bc.jY(this.WIt,t,s)}UY(t,s){if(!this.WIt)throw new Error("wrapper extension component id not set");return this.Bc.UY(this.WIt,t,s)}c7(){}rPt(){}nPt(){if(!this.hz){if(!this.t8)if(this.Bc.ez()){const t=globalThis.iz,s=this.HW();this.t8=()=>{const e=performance.now();this.c7(),t.nz(s,performance.now()-e)}}else this.t8=()=>this.c7();this.Bc.Sf().addEventListener("tick",this.t8),this.hz=!0}}jIt(){this.hz&&(this.Bc.Sf().removeEventListener("tick",this.t8),this.hz=!1)}hPt(){return this.hz}oPt(){if(!this.az){if(!this.e8)if(this.Bc.ez()){const t=globalThis.iz,s=this.HW();this.e8=()=>{const e=performance.now();this.rPt(),t.nz(s,performance.now()-e)}}else this.e8=()=>this.rPt();this.Bc.Sf().addEventListener("tick2",this.e8),this.az=!0}}UIt(){this.az&&(this.Bc.Sf().removeEventListener("tick2",this.e8),this.az=!1)}aPt(){return this.az}lPt(){return[]}aT(){return null}lT(t){}sot(t){}oot(t,s){}tat(t,s,e){if(0===s)return;const i=this.sot(t);if("number"!=typeof i)throw new Error("expected number");this.oot(t,i+s,e)}uPt(t,s,e,i){}cPt(t,...s){t.call(this,...s)}fPt(t,...s){return t.call(this,...s)}bIt(){return null}NIt(t,s,e){if(!this.fe.dPt())return;const i=this.zIt(),r=hM.Hr(hM.Event,t,s);r.pq=i,e&&Object.assign(r,e),i.dispatchEvent(r)}bM(){return!1}}}{const oM=self._s;oM.pPt=class extends oM.$It{constructor(t,s){super(t,s),this.Ret=t.LB(),this.mPt=null,this.gPt=null}qr(){if(this.mPt){const t=this.Bc.Sf();t.removeEventListener("renderercontextlost",this.mPt),t.removeEventListener("renderercontextrestored",this.gPt),this.mPt=null,this.gPt=null}this.Ret=null,super.qr()}yPt(){this.wPt()}SPt(){}vPt(){}wPt(){if(this.mPt)return;this.mPt=()=>this.nQ(),this.gPt=()=>this.bPt();const t=this.Bc.Sf();t.addEventListener("renderercontextlost",this.mPt),t.addEventListener("renderercontextrestored",this.gPt)}nQ(){this.SPt()}bPt(){this.vPt()}LB(){return this.Ret}Sit(){return!1}wit(){if(!this.Sit())throw new Error("original size not known");const t=this.MPt();if(t)return t.jg()}bit(){if(!this.Sit())throw new Error("original size not known");const t=this.MPt();if(t)return t.Qg()}MPt(){return null}TPt(){const t=this.MPt();if(t){const s=t.xC();if(s)return[s.jg(),s.Qg()]}return[100,100]}xPt(){const t=this.MPt();return t?t.yA():null}CPt(){const t=this.MPt();return t?t.GPt():null}_Pt(){const t=this.MPt();return!!t&&t.IPt()}pCt(t){const s=this.fe.LB();return[s.YM(),s.KM(),s.Lz()]}kIt(t,s,e){}PPt(t,s){}E3(){return!0}}}{const aM=self._s,lM=aM.Hr(aM.Rect);aM.RPt=class extends aM.pPt{constructor(t,s){super(t,s),this.APt=this.HW().OIt(this),this.EPt=!0,this.OPt=!1,this.FPt=!1,this.DPt=-.2,this.LPt=aM.Hr(aM.Rect,0,0,-1,-1);const e=this.Bc.GB();this.kPt=e.nY(),this.NPt=e.hY(),this.BPt=-1,this.$Pt=-1,this.WPt=!1,this.nPt()}qr(){this.HW().FIt(this.APt),this.VPt("destroy"),this.APt=-1,super.qr()}sq(){if(this.Bc.Hk())throw new Error("not valid in worker mode");return this.jPt("get-element")}VPt(t,s){s||(s={}),s.elementId=this.APt,this.KIt(t,s)}jPt(t,s){return s||(s={}),s.elementId=this.APt,this.tPt(t,s)}UPt(t,s){return s||(s={}),s.elementId=this.APt,this.QIt(t,s)}zPt(t){t||(t={});const s=this.LB();t.elementId=this.APt,t.isVisible=s.vj(),t.htmlIndex=s.kB().fY(),t.htmlZIndex=s.dY(),Object.assign(t,this.HPt()),this.EPt=!!t.isVisible,this.tPt("create",t),this.qPt(!0)}MGt(t){t=!!t,this.EPt!==t&&(this.EPt=t,this.VPt("set-visible",{isVisible:t}))}c7(){this.qPt(!1)}JPt(){const t=this.Bc.GB().wY();return"Android"===aM.Ks.Qs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}qPt(t){if(this.PJ().SY())return;const s=this.LB(),e=s.kB(),i=s.Bz();let[r,n]=e.rU(i.Qa(),i.tl()),[h,o]=e.rU(i.sl(),i.el());const a=this.Bc.GB(),l=a.iW(),u=a.nW();if(!s.vj()||!e.vj())return void this.MGt(!1);if(!this.JPt()&&(h<=0||o<=0||r>=l||n>=u))return void this.MGt(!1);lM.set(r,n,h,o);const c=a.nY(),f=a.hY(),d=e.fY(),p=s.dY();if(!t&&lM.equals(this.LPt)&&this.kPt===c&&this.NPt===f&&this.BPt===d&&this.$Pt===p)return void this.MGt(!0);this.LPt.S(lM),this.kPt=c,this.NPt=f,this.BPt=d,this.$Pt=p,this.MGt(!0);let m=null;this.FPt&&(m=e.vY()+this.DPt),this.jPt("update-position",{left:Math.round(this.LPt.Qa()),top:Math.round(this.LPt.tl()),width:Math.round(this.LPt.width()),height:Math.round(this.LPt.height()),htmlIndex:d,htmlZIndex:p,fontSize:m})}iq(){this.jPt("focus",{focus:!0})}rq(){this.jPt("focus",{focus:!1})}AIt(){this.OPt=!0}EIt(){this.OPt=!1}_Gt(){return this.OPt}hq(t,s){this.VPt("set-css-style",{prop:aM.bo(t),val:s})}TGt(t,s){this.VPt("set-attribute",{name:t,val:s})}xGt(t){this.VPt("remove-attribute",{name:t})}YPt(){this.WPt||(this.WPt=!0,Promise.resolve().then(()=>{this.WPt=!1,this.VPt("update-state",this.HPt())}))}HPt(){}XPt(){return this.APt}}}{const uM=self._s,cM=self.yq;uM.ZPt=class extends uM.Ur{constructor(t){super(),this.Bc=t.runtime,this.Wc=t.id,this.Xr=t.name??"",this.KPt=uM.Hr(uM.Lu),this.QPt=uM.Hr(uM.Lu),this.uIt=t.cIt,this.yIt=t.wIt,this.tRt=null}qr(){this.QPt.qr(),this.KPt.qr(),this.Bc=null}l$(){return this.Bc}yW(){return this.Wc}Rc(){return this.Xr}vIt(){}sxt(){return this.uIt}bIt(t=!1){let s=this.yIt;return t&&"function"!=typeof s&&this.sxt()>=2&&(s=globalThis.RY),s}sRt(t){this.KPt.$u(t)}k8(){return this.KPt.Wu()}n1(t){this.QPt.$u(t)}a1(t){this.QPt.Eu(t)}iV(){return this.QPt.Wu()}TIt(){const t=this.sxt();uM.mW.xIt(this,t);const s=this.bIt(!0);if(s){if(this.tRt=new s,!(this.tRt instanceof cM))throw new TypeError("behavior class must derive from IBehavior")}else this.tRt=new cM;uM.mW.CIt(t)}aq(){return this.tRt}}}{const fM=self._s;fM.eRt=class extends fM.Ur{constructor(t){super(),this.Bc=t.l$(),this.BMt=t,this.mpt=t.fU(),this.iRt=t.lq(),this.iRt.sRt(this.mpt)}qr(){this.Bc=null,this.BMt=null,this.mpt=null,this.iRt=null}vIt(){}fq(){return this.BMt}fU(){return this.mpt}l$(){return this.Bc}lq(){return this.iRt}}}{const dM=self._s;dM.rRt=class extends dM.Ur{constructor(t,s){super(),this.Jlt=t,this._It=s,this.fe=t.mq(),this.Bc=t.l$(),this.BMt=t.fq(),this.VIt=this.BMt.Kxt(),this.hz=!1,this.az=!1,this.WY=!1,this.Zf=null}qr(){this.jIt(),this.UIt(),this.nRt(),this.Zf&&(this.Zf.qr(),this.Zf=null),this.Jlt=null,this.fe=null,this.Bc=null,this.BMt=null,this.VIt=null}lq(){return this.BMt.lq()}hRt(){return this.Jlt}mq(){return this.fe}fU(){return this.fe.fU()}LB(){return this.fe.LB()}l$(){return this.Bc}fq(){return this.BMt}Kxt(){return this.VIt}zIt(){return this.Jlt.zIt()}JU(t){return this.Bc.JU(t,this.fe,this.BMt)}HIt(t){return this.Bc.HIt(t,this.fe,this.BMt)}KB(t){return this.Bc.KB(t,this.fe,this.BMt)}oRt(){}c7(){}rPt(){}aRt(){}nPt(){this.hz||(this.Bc.DY(this),this.hz=!0)}jIt(){this.hz&&(this.Bc.LY(this),this.hz=!1)}hPt(){return this.hz}oPt(){this.az||(this.Bc.kY(this),this.az=!0)}UIt(){this.az&&(this.Bc.NY(this),this.az=!1)}aPt(){return this.az}lRt(){this.WY||(this.Bc.BY(this),this.WY=!0)}nRt(){this.WY&&(this.Bc.$Y(this),this.WY=!1)}uRt(){return this.WY}lPt(){return[]}XIt(t,s){this.Bc.ZU(this._It,t,s)}cRt(t,s){}aT(){return null}lT(t){}sot(t){}oot(t,s){}tat(t,s){if(0===s)return;const e=this.sot(t);if("number"!=typeof e)throw new Error("expected number");this.oot(t,e+s)}uPt(t,s,e,i){}cPt(t,...s){t.call(this,...s)}fPt(t,...s){return t.call(this,...s)}bIt(){return null}NIt(t,s,e){if(!this.Jlt.dPt())return;const i=this.zIt(),r=dM.Hr(dM.Event,t,s);r.fRt=i,r.pq=i.pq,e&&Object.assign(r,e),i.dispatchEvent(r)}}}{let pM=function(t){if(t!==gM)throw new Error("invalid internal API token")};ValidateInternalAPIToken=pM;const mM=self._s;mM.e$={},mM.yut={};const gM=mM.Is();let yM=[],wM=[],SM=[],vM=null,bM=null,MM=null,TM=null;const xM=new Map,CM=new Map;mM.mW=class extends mM.Ur{constructor(t,s){super(),this.Bc=t,this.dRt=[],this.vMt=null,this.pRt=[],this.mRt=new Map,this.gRt=null,this.yRt=null,this.wRt=new Set(s)}SRt(t){const s=t[19],e=this.Bc.Tbt(t[0]);if(!e)throw new Error("missing plugin");mM.a_t(t,e,s);const i=s>=2?mM.Z_t:e,r=mM.Hr(i,{runtime:this.Bc,wW:t[1],tIt:t[2],xW:t[5],_W:t[8],iIt:t[9],hIt:t[13],OW:t[14],MW:t[17],PW:t[18],cIt:s,id:t[20],name:t[21],wIt:s>=2?e:null});r.vIt(),this.dRt.push(r),xM.set(e,r)}vRt(){this.vMt=mM.Hr(mM.e$.s$,{runtime:this.Bc,wW:!0}),this.vMt.vIt()}bRt(t){const s=t[1],e=t[2],i=t[3],r=this.Bc.Tbt(t[0]);if(!r)throw new Error("missing behavior");this.mRt.set(r,()=>{const t=s>=2?mM.ZPt:r,n=mM.Hr(t,{runtime:this.Bc,id:e,name:i,cIt:s,wIt:s>=2?r:null});n.vIt(),this.pRt.push(n),CM.set(r,n),!this.gRt&&mM.yut.MRt&&n instanceof mM.yut.MRt?this.gRt=n:!this.yRt&&mM.yut.TRt&&n instanceof mM.yut.TRt&&(this.yRt=n),n.TIt()})}xRt(t){const s=this.mRt.get(t);s&&(s(),this.mRt.delete(t))}static xIt(t,s=1){if(mM.mW.xIt!==vM)throw new Error("invalid method");1===s&&yM.push(t),wM.push(t)}static CIt(t=1){if(mM.mW.CIt!==bM)throw new Error("invalid method");1===t&&yM.pop(),wM.pop()}static gU(){if(mM.mW.gU!==MM)throw new Error("invalid method");if(0===yM.length)throw new Error("no init object set");return yM.at(-1)}static pW(t){if(mM.mW.pW!==TM)throw new Error("invalid method");if(pM(t),0===wM.length)throw new Error("no init object set");return wM.at(-1)}static CRt(t){SM.push(t)}static GRt(){SM.pop()}static HU(){if(0===SM.length)throw new Error("no init properties set");return SM.at(-1)}_Rt(){for(const t of this.dRt)t.TIt()}static kW(t){return xM.get(t)||null}static wq(t){return CM.get(t)||null}RK(){return this.vMt}IRt(){return this.gRt}PRt(){return this.yRt}dz(t){return this.wRt.has(t)}},vM=mM.mW.xIt,bM=mM.mW.CIt,MM=mM.mW.gU,TM=mM.mW.pW}{const GM=self._s,_M=new Set;GM.RRt=class extends GM.Ur{constructor(){super(),this.ARt=0,this.qK="",this.JK=0,this.ERt=0,this.ORt=0,this.Ry=0,this.Ay=0,this.FRt=!1,this.DRt=!1,this.LRt=null,this.kRt="",this.nR=GM.Hr(GM.Rect),this.NRt=GM.Hr(GM.Pl),this.BRt="",this.$Rt=new self.o$(this),_M.add(this)}qr(){this.aR(),this.LRt&&0===this.LRt.aQ()&&this.LRt.qr(),this.LRt=null,_M.delete(this),this.WRt()}static nQ(){for(const t of _M)t.kRt="",t.nR.set(0,0,0,0),t.NRt.Xl(t.nR)}VRt(t){this.qK=t[0],this.JK=t[1],this.ERt=t[2],this.ORt=t[3],this.Ry=t[4],this.Ay=t[5],this.FRt=t[6],this.DRt=!0}jRt(t,s,e){if(e=!!e,this.LRt)throw new Error("already loaded asset");this.qK=s;const i={yK:e};return GM.Zh(s)&&(i.wK="remote"),this.a$(t,i),this.LRt.vK()}URt(t,s){if(this.LRt)throw new Error("already loaded asset");this.qK="",this.JK=s.size,this.LRt=GM.Hr(GM.SK,t.Ik(),{blob:s,size:this.JK,wK:"local"})}zRt(t){if(t===this)throw new Error("cannot replace with self");this.ARt++,this.aR(),this.qK=t.qK,this.JK=t.JK,this.ERt=t.ERt,this.ORt=t.ORt,this.Ry=t.Ry,this.Ay=t.Ay,this.FRt=t.FRt,this.DRt=t.DRt,this.LRt=t.LRt,this.kRt=t.kRt,this.nR=t.nR,this.NRt=t.NRt,this.WRt()}TK(){return this.qK}Fu(){return this.JK}HRt(){return this.ERt}qRt(){return this.ORt}IPt(){return this.FRt}jg(){return this.Ry}Qg(){return this.Ay}JRt(){return this.LRt.jg()}YRt(){return this.LRt.Qg()}a$(t,s){if(this.LRt)throw new Error("already got asset");s=Object.assign({},s,{url:this.TK(),size:this.Fu()}),this.LRt=t.gK(s)}KK(){return this.LRt&&this.LRt.KK()}async ZX(t,s){if(!this.LRt)throw new Error("no asset");if(this.kRt)throw new Error("already loaded texture");const e=this.ARt;this.kRt="loading";const i=await this.LRt.ZX(t,s);if(this.ARt!==e)return null;if(!i)return this.kRt="",null;this.kRt="loaded",this.DRt||(this.Ry=i.jg(),this.Ay=i.Qg(),this.DRt=!0);const r=this.FRt?this.Ay:this.Ry,n=this.FRt?this.Ry:this.Ay;return this.nR.set(this.ERt,this.ORt,this.ERt+r,this.ORt+n),this.nR.St(i.jg(),i.Qg()),this.NRt.Xl(this.nR),this.FRt&&this.NRt.eu(),i}aR(){this.kRt&&(this.LRt&&this.LRt.aR(),this.kRt="",this.nR.set(0,0,0,0),this.NRt.Xl(this.nR))}xC(){return this.LRt&&"loaded"===this.kRt?this.LRt.xC():null}yA(){return this.nR}GPt(){return this.NRt}qJ(){return this.$Rt}XRt(){return this.LRt}async ZRt(t){t||(t=await this.LRt.lQ());const s=GM.co(this.Ry,this.Ay),e=s.getContext("2d");return this.FRt?(e.rotate(Math.PI/-2),e.translate(-this.Ay,0),e.drawImage(t,this.ERt,this.ORt,this.Ay,this.Ry,0,0,this.Ay,this.Ry)):e.drawImage(t,this.ERt,this.ORt,this.Ry,this.Ay,0,0,this.Ry,this.Ay),s}async KRt(t){if(this.BRt)return this.BRt;const s=await this.ZRt(t),e=await GM.fo(s);return this.BRt=URL.createObjectURL(e),this.BRt}WRt(){this.BRt&&(URL.revokeObjectURL(this.BRt),this.BRt="")}}}{const IM=self._s;IM.QRt=class extends IM.Ur{constructor(t){super(),this.Xr=t[0],this.tAt=t[1],this.RTt=!!t[2],this.Aat=t[3],this.sAt=t[4],this.eAt=!!t[5],this.qQ=t[6],this.iAt=t[7].map(t=>IM.Hr(IM.rAt,t)),this.nAt=new self.xq(this)}static hAt(t,s){const e=IM.Hr(IM.QRt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return e.iAt.push(IM.rAt.hAt(t)),e}qr(){for(const t of this.iAt)t.qr();IM.bh(this.iAt)}oAt(t){for(const s of this.iAt)s.Vq().a$(t)}aAt(t,s){return Promise.all(this.iAt.map(e=>e.Vq().ZX(t,s)))}lAt(){for(const t of this.iAt)t.Vq().aR()}Rc(){return this.Xr}I1(){return this.qQ}Fq(){return this.iAt.length}Lq(){return this.iAt}uAt(t){if((t=Math.floor(t))<0||t>=this.iAt.length)throw new RangeError("invalid frame");return this.iAt[t]}cAt(t,s){(s=Math.floor(s))<0?this.iAt.unshift(t):s>=this.iAt.length?this.iAt.push(t):this.iAt.splice(s,0,t)}fAt(t){if((t=Math.floor(t))<0||t>=this.iAt.length)throw new RangeError("invalid frame");this.iAt[t].qr(),this.iAt.splice(t,1)}dAt(t){for(let s=0,e=this.iAt.length;s<e;++s)if(IM.Ki(this.iAt[s].eJ(),t))return s;return-1}pAt(t){if("string"==typeof t){const s=this.dAt(t);if(-1===s)throw new Error(`cannot find animation frame with tag ${t}`);return s}return t}Cq(){return this.tAt}_q(){return this.RTt}Pq(){return this.Aat}Aq(){return this.sAt}Oq(){return this.eAt}mAt(){return this.nAt}}}{const PM=self._s,RM=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(t.length);for(let e=0,i=t.length;e<i;++e)s[e]=t.charCodeAt(e);return new Blob([s],{type:"image/png"})})();PM.rAt=class extends PM.Ur{constructor(t){super(),this.gAt=PM.Hr(PM.RRt),this.gAt.VRt(t),this.yAt=t[7],this.wAt=PM.Hr(PM.Pa,t[8],t[9]),this.SAt=t[10].map(t=>PM.Hr(PM.vAt,this,t)),this.bAt=new Map;for(const t of this.SAt)this.bAt.set(t.Rc().toLowerCase(),t);this.MAt=null;const s=t[11];s.length>=6&&(this.MAt=PM.Hr(PM.lu,s)),this.Ew=t[12]?t[12]:"",this.TAt=new self.Wq(this)}static hAt(t){const s=PM.Hr(PM.rAt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.gAt.URt(t,RM),s}qr(){this.MAt&&(this.MAt.qr(),this.MAt=null),this.gAt.qr(),this.gAt=null}Vq(){return this.gAt}jq(){return this.yAt}Iz(){return this.wAt.Fa()}Az(){return this.wAt.La()}Kq(){return this.MAt}Xq(t){return this.bAt.get(t.toLowerCase())||null}Yq(t){return(t=Math.floor(t))<0||t>=this.SAt.length?null:this.SAt[t]}zq(){return this.SAt.length}eJ(){return this.Ew}kq(){return this.TAt}}}{const AM=self._s;AM.vAt=class extends AM.Ur{constructor(t,s){super(),this.xAt=t,this.Xr=s[0],this.CAt=AM.Hr(AM.Pa,s[1],s[2])}qr(){}Rc(){return this.Xr}YM(){return this.CAt.Fa()}KM(){return this.CAt.La()}GAt(){return this.CAt}}}{const EM=globalThis._s,OM=globalThis.iz,FM=globalThis.UW,DM=globalThis.nV,LM=globalThis.vV,kM=globalThis.assert;EM.Sct=class extends EM.Ur{constructor(t,s,e){super();const i=t.Tbt(e[1]);this.Bc=t,this.LIt=EM.mW.kW(i),this.VIt=null,this._At=i.Instance,this.Aw=s,this.qQ=e[11],this.Xr=e[0],this.oMt=this.Bc.Ugt(e[14]),this.IAt=!!e[9],this.PAt=!!e[2],this.RAt=!!e[10],this.AAt=e[3].map(s=>({EQ:s[0],type:s[1],name:s[2],EAt:t.Ugt(s[3])})),this.OAt=e[4],this.FAt=e[5],this.Q_t=this.LIt.bW(),this.DAt=EM.Hr(EM.Event.Sf),this.I0=null;const[r,n]=t.Ak().k$();if(this.LAt=EM.Hr(EM.kAt,r,n),this.NAt=!0,this.BAt=null,this.$At=null,this.WAt=-1,this.VAt=null,this.jAt=null,this.UAt=null,this.zAt=null,this.HAt=null,this.qAt=!1,this.JAt=null,this.YAt=e[8].map(t=>EM.XAt.UC(this,t)),this.ZAt=[],this.KAt=new Map,this.QAt=new Map,this.tEt=new Set,this.sEt=new Map,this.eEt=EM.Hr(EM.ppt,this),this.iEt=null,this.rEt=0,this.nEt=!1,this.JAt=null,this.gAt=null,this.hEt=null,this.oEt=null,this.aEt=null,this.lEt=0,this.DTt=new Map,this.LTt=new Map,this.dQ=[],this.uEt=new Map,this.cEt=!0,this.LIt.IW()&&(this.I0=EM.Hr(EM.P0,this,e[12])),e[6]&&(this.gAt=EM.Hr(EM.RRt),this.gAt.VRt(e[6])),e[7]){this.hEt=e[7].map(t=>EM.Hr(EM.QRt,t)),this.oEt=new Map,this.aEt=new Map;for(const t of this.hEt)this.oEt.set(t.Rc().toLowerCase(),t),this.aEt.set(t.I1(),t)}this.PAt?(this.BAt=[],this.$At=new Set,this.WAt=this.Bc.fEt()):(this.VAt=[],this.jAt=new Set,this.UAt=[],this.zAt=[],this.HAt=[]);const h=this.LIt.sxt();if(h<2&&(this.VIt=EM.Hr(i.dEt,this,e[15]),!(this.VIt instanceof EM.DIt)))throw new Error("v1 sdk type must derive from SDKTypeBase");let o;if(this.pEt=null,this.mEt=null,this.V0=EM.Hr(EM.Event.Sf),EM.mW.xIt(this,h),h>=2?(o=i.dEt,o||(o=globalThis.UJ)):o=this.VIt.bIt(),o&&!this.PAt){if(this.pEt=new o(h<2?this:null),h<2&&!(this.pEt instanceof DM))throw new TypeError("script interface class must derive from IObjectType");if(h>=2&&!(this.pEt instanceof globalThis.UJ))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else{const t=this.PAt?LM:DM;this.pEt=new t}if(EM.mW.CIt(h),e[13]){const t=e[13];if(t){const s=t[0],e=t[1],i=t[2];this.VIt.kIt(s,e,i)}}this.Bc.gEt()&&!this.PAt&&!this.RAt&&this.Q_t||this.vIt(),this.LIt.SW()&&(this.LIt.MIt(this),this.yEt(e)),this.wEt=null}static UC(t,s,e){return EM.Hr(EM.Sct,t,s,e)}qr(){if(this.DAt.qr(),this.DAt=null,this.gAt&&(this.gAt.qr(),this.gAt=null),this.hEt){for(const t of this.hEt)t.qr();EM.bh(this.hEt),this.oEt.clear(),this.aEt.clear()}this.wEt=null,this.eEt.qr(),this.eEt=null,this.DTt.clear(),this.LTt.clear(),this.JAt=null,this.Bc=null}SEt(t){for(let s=1,e=t.length;s<e;++s){const e=this.Bc.J0(t[s]);this.BAt.push(e),this.$At.add(e),e.VAt.push(this),e.jAt.add(this)}}vEt(t){this.qAt=!0,this.JAt=t}TU(){return this.qAt}d5(){return this.JAt}bEt(){let t=0;if(!this.PAt)for(const s of this.VAt)for(const e of s.MEt()){const s=e.Rc().toLowerCase();this.KAt.set(s,e),this.QAt.set(s,t),this.ZAt.push(e),++t}for(const s of this.MEt()){const e=s.Rc().toLowerCase();this.KAt.set(e,s),this.QAt.set(e,t),this.ZAt.push(s),++t}for(const t of this.ZAt)this.tEt.add(t.lq().constructor);if(!this.PAt&&this.VAt.length){const t=this.Bc.TEt();EM.Th(this.UAt,t,0),EM.Th(this.zAt,t,0),EM.Th(this.HAt,t,0);const s=[];let e=0,i=0,r=0;for(const t of this.VAt){const n=t.kMt();this.UAt[n]=e,e+=t.xEt(),this.zAt[n]=i,i+=t.CEt(),this.HAt[n]=r,r+=t.GEt();const h=t._V();if(h&&this.I0)for(const t of h.IV())s.push(t._Et(this.I0))}this.I0&&this.I0.IEt(s)}}yEt(t){const s=EM.Ze(t[17])?t[17]:this.Bc.PEt(),e=EM.Hr(EM.Instance,{runtime:this.Bc,objectType:this,uid:s});e.REt(t[16],[]),this.Bc.AEt(s,e),this.dQ.push(e)}Kxt(){return this.VIt}EEt(){return this.RAt}Sf(){return this.DAt}vIt(){this.PAt||(this.VIt?this.VIt.vIt():this.pEt.zJ())}OEt(){return this.lEt>0}async g5(t){this.PAt||(this.lEt++,1===this.lEt&&(this.VIt?await this.VIt.g5(t):await this.pEt.JJ(this.Bc.GB().CB())))}M5(){if(!this.PAt){if(this.lEt--,this.lEt<0)throw new Error("released textures too many times");0===this.lEt&&(this.VIt?this.VIt.M5():this.pEt.YJ(this.Bc.GB().CB()))}}S5(){if(this.PAt)throw new Error("not applicable to family");this.VIt?this.VIt.S5():this.pEt.XJ()}async U5(t){this.PAt||(this.VIt?await this.VIt.U5(t):await this.pEt.ZJ(this.Bc.GB().CB()))}l$(){return this.Bc}HW(){return this.LIt}FEt(){return this._At}Rc(){return this.Xr}Ugt(){return this.oMt}Tk(){return this.Aw}I1(){return this.qQ}v1(){return this.PAt}WQ(){return this.IAt}bW(){return this.Q_t}kMt(){return this.WAt}MEt(){return this.YAt}CEt(){return this.OAt}DEt(t){return t&&this.tEt.has(t)}xEt(){return this.AAt.length}LEt(){return this.AAt.map(t=>t.EQ)}kEt(t){return this.AAt.findIndex(s=>s.EQ===t)}eit(t){return this.AAt.findIndex(s=>s.name===t)}NEt(){return this.AAt.map(t=>t.name)}BEt(){return this.AAt.map(t=>t.EAt)}rit(t){if((t=Math.floor(t))<0||t>=this.AAt.length)throw new RangeError("invalid instance variable index");return this.AAt[t].type}iit(t){if((t=Math.floor(t))<0||t>=this.AAt.length)throw new RangeError("invalid instance variable index");return this.AAt[t].name}GEt(){return this.FAt}$Et(){return this.ZAt}Fnt(t){return this.KAt.get(t.toLowerCase())||null}hit(t){const s=this.QAt.get(t.toLowerCase());return void 0===s?-1:s}_V(){return this.I0}IW(){return this.LIt.IW()}WEt(){return this.I0&&this.I0.VEt()}Eyt(){return this.eEt}rV(){return this.eEt.rV()}Vq(){return this.gAt}Z0(t){this.iEt=t}X0(){return this.iEt}K0(t){this.rEt=t}jEt(){return this.rEt}UEt(){return this.hEt}zEt(){return this.hEt.length}yV(){return this.VAt}rCt(t){return this.jAt.has(t)}TV(){return this.BAt}CV(t){return this.$At.has(t)}VMt(t){return this.zAt[t]}LMt(t){return this.UAt[t]}zbt(t){this.sEt.set(t.Xbt().toLowerCase(),t)}Hbt(t){return!!this.eMt(t)}eMt(t){const s=this.sEt.get(t.toLowerCase());return s&&s._u()?s:null}HEt(){return this.hEt}qEt(t){if(!this.hEt)throw new Error("no animations");return this.oEt.get(t.toLowerCase())||null}JEt(t){if(!this.hEt)throw new Error("no animations");return this.aEt.get(t)||null}YEt(t){if(this.qEt(t))throw new Error(`animation name '${t}' already exists`);const s=EM.QRt.hAt(this.l$(),t);return this.hEt.push(s),this.oEt.set(s.Rc().toLowerCase(),s),this.aEt.set(s.I1(),s),s}XEt(t){const s=this.qEt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.hEt.length)throw new Error("cannot remove last animation");const e=this.hEt.indexOf(s);this.hEt.splice(e,1),this.oEt.delete(s.Rc().toLowerCase()),this.aEt.delete(s.I1()),s.qr()}ZEt(){if(!this.hEt)throw new Error("no animations");return this.hEt[0]}KEt(){return this.ZEt().uAt(0)}QEt(){if(this.hEt){const t=this.KEt().Vq();return[t.jg(),t.Qg()]}return this.gAt?[this.gAt.jg(),this.gAt.Qg()]:[100,100]}jW(){if(!this.LIt.SW())throw new Error("not a single-global plugin");return this.dQ[0]}iV(){return this.dQ}*JW(){yield*this.dQ}*eV(){yield*this.dQ,yield*this.Bc.aGt(this)}oV(){return this.dQ.length}n1(t){this.dQ.push(t)}tOt(){this.cEt=!0}Z5(){if(!this.cEt||this.PAt)return;const t=this.dQ;let s=0;for(let e=t.length;s<e;++s)t[s].sOt(s);const e=this.Bc.eOt();for(const t of e)t.fU()===this&&t.sOt(s++);this.cEt=!1}iOt(t){const s=this.dQ;if(t<s.length)return s[t];t-=s.length;const e=this.Bc.eOt();for(const s of e)if(s.fU()===this){if(0===t)return s;--t}return null}zCt(t){if(t&&t.TU()&&t.fU()!==this)for(const s of t.xU())if(s.fU()===this)return s;const s=this.rV().iV();return s.length?s[0]:null}sV(t){const s=this.rV().iV();return s.length>0?s[t._U()%s.length]:null}*pGt(t,s){const e=this.rV().iV(),i=e.length,r=s.rV(),n=s.rV().iV(),h=n.length;let o=t._U();!s.v1()&&r._pt()||(o=n.indexOf(t));const a=Math.ceil(i/h),l=i%h;let u=0,c=0;0===l||o<l?(u=o*a,c=a):(u=l*a+(o-l)*(a-1),c=a-1);for(let t=u,s=u+c;t<s;++t)yield e[t]}pxt(t){this.VIt?.pxt(t)}pbt(){if(!this.qAt||this.PAt)return;this.Z5();const t=this.rV(),s=t.Dpt(),e=t._pt(),i=this.Bc.Fgt(),r=i&&i.pN()&&i.pN().Upt();for(const i of this.JAt.xV()){if(i===this)continue;i.Z5();const n=i.rV();if(n.Fpt(e),!e){const e=n.Dpt();EM.bh(e);for(const t of s)e.push(i.iOt(t._U()));if(r){const s=t.Lpt(),e=n.Lpt();EM.bh(e);for(const t of s)e.push(i.iOt(t._U()))}}}}Sxt(t,s){for(const e of this.d5().xV()){const i=e.rV();t?EM.Sh(i.Lpt(),s):EM.Sh(i.Dpt(),s)}}rOt(){return this.LAt}nOt(t){this.NAt=!!t}hOt(){if(this.NAt&&this.Q_t){for(const t of this.dQ)t.LB().oOt();for(const t of this.Bc.eOt())t.fU()===this&&t.LB().oOt();this.NAt=!1}}aOt(t,s,e){if(s){const e=this.uEt.get(s);e&&(e.delete(t),0===e.size&&this.uEt.delete(s))}if(e){let s=this.uEt.get(e);s||(s=new Set,this.uEt.set(e,s)),s.add(t)}}*lOt(){if(this.v1()){const t=new Set;for(const s of this.BAt)for(const e of s.lOt())t.add(e);yield*t.values()}else for(const t of this.uEt.keys())t.Jr()||(yield t)}axt(){return this.DTt||(this.DTt=new Map),this.DTt}lxt(){return this.LTt||(this.LTt=new Map),this.LTt}uOt(){return this.DEt(EM.yut.MRt)}cOt(){return this.DEt(EM.yut.TRt)}fOt(){return this.DEt(EM.yut.dOt)}e1(){return this.DEt(EM.yut.pOt)}i4(){const t={instances:this.dQ.map(t=>t.aT())};return this.DTt&&this.DTt.size&&(t.ex=EM.So(this.DTt)),t}r4(t,s){this.DTt&&(this.DTt.clear(),this.DTt=null);const e=t.ex;e&&(this.DTt=EM.vo(e));const i=this.dQ,r=t.instances;for(let t=0,s=Math.min(i.length,r.length);t<s;++t)i[t].lT(r[t]);for(let t=r.length,s=i.length;t<s;++t)this.Bc.wU(i[t]);for(let t=i.length,e=r.length;t<e;++t){const e=r[t];let i=null;if(this.bW()&&(i=this.Bc.cB().i5(e.w.l),!i))continue;const n=this.Bc.i1(this.iEt||this,i,!1,0,0,!0);n.lT(e),s&&s.add(n)}this.wEt=r,this.tOt()}mOt(){return this.wEt}gOt(){this.wEt=null}yOt(){for(let t=0,s=this.dQ;t<s;++t)this.dQ[t].yOt()}$W(){return this.pEt}rN(){return this.V0}wOt(){return this.mEt}aV(t){this.mEt=t}IK(t){const s=this.Bc,e=s.ez()&&!s.aN().dV();e&&OM.M6(),this.V0.dispatchEvent(t),e&&OM.T6()}}}{const NM=self._s;NM.SOt=class extends NM.Ur{constructor(t,s){super(),this.Bc=t,this.vOt=s;for(const t of this.vOt)t.vEt(this)}qr(){this.Bc=null}l$(){return this.Bc}f5(){return this.vOt}xV(){return this.vOt}Q5(){return this.vOt.some(t=>t.bW())}}}{const BM=self._s,$M=self.iz,WM=self.cU,VM=BM.mW,jM=[];let UM=0;const zM=new WeakMap,HM=new WeakMap,qM=1,JM=2,YM=4,XM=8,ZM=16,KM=32,QM=64;BM.Instance=class extends BM.Ur{constructor(t){if(BM.mW!==VM)throw new Error("invalid addon manager");super(),this.Bc=t.runtime,this.bOt=t.objectType,this.Ret=null,this.MOt=null,this.TOt=null,this.xOt=0,this.COt=t.uid,this.GOt=UM++,this.Txt=0,this._Ot=null;const s=BM.Lh(t.tags);s.length>0&&(this._Ot=new Set(s)),this.IOt=jM,this.POt=jM;const e=this.bOt.$Et();e.length>0&&(this.POt=e.map((t,s)=>BM.Hr(BM.ROt,{runtime:this.Bc,uq:t,pq:this,index:s}))),this.AOt=this.bOt.TU()?[]:null,this.EOt=-1,this.DAt=null;const i=this.HW();if(i.bM()&&(this.Txt|=4),i.bW())if(this.Ret=BM.Hr(BM.OOt,this,t.Mz),t.FOt)this.Ret.DOt(t.FOt);else{this.Ret.LOt();const[t,s]=this.bOt.QEt();this.Ret.$R(t,s),this.fU().WEt()&&this.Ret.bz().kOt()}t.NOt?this.BOt(t.NOt):this.$Ot()}qr(){if(this.TOt&&(this.TOt.yU(),this.TOt=null),this.POt.length>0){for(const t of this.POt)t.qr();BM.bh(this.POt)}this.MOt&&(this.MOt.qr(),this.MOt=null);const t=zM.get(this);t&&(t.clear(),zM.delete(this));const s=HM.get(this);s&&(s.clear(),HM.delete(this)),this.AOt&&BM.bh(this.AOt),this.DAt&&(this.DAt.qr(),this.DAt=null),this._Ot&&this._Ot.clear(),this._Ot=null,this.Bc=null,this.bOt=null,this.IOt.length>0&&BM.bh(this.IOt),this.Ret&&(this.Ret.qr(),this.Ret=null)}BOt(t){t.length>0&&(this.IOt=[],BM.Ch(this.IOt,t))}$Ot(){const t=this.bOt.xEt();if(0===t)return;this.IOt=[];const s=[0,0,""];for(let e=0;e<t;++e)this.IOt.push(s[this.bOt.rit(e)])}REt(t,s){if(this.MOt)throw new Error("already got sdk instance");for(let t=0,e=this.POt.length;t<e;++t)this.POt[t].REt(s?s[t]:null);if(this.HW().sxt()<2){if(this.MOt=BM.Hr(this.bOt.FEt(),this,t),!(this.MOt instanceof BM.$It))throw new Error("sdk type must derive from SDKInstanceBase");!this.HW().bW()&&this.bOt.wOt()&&this.AB()}else{const s=this.HW().bIt();this.WOt(s.Instance,t)}}eq(){return this.MOt??this.TOt}LB(){return this.Ret}l$(){return this.Bc}WN(){return this.EOt}RU(){const t=this.EOt;return-1===t?this.l$().WN():t}VN(t){((t=+t)<0||!isFinite(t))&&(t=0),this.EOt=t,this.fU().WEt()&&this.Bc.VOt(this,!0)}EU(){this.EOt=-1,this.fU().WEt()&&this.Bc.VOt(this,!1)}z3(){return this.Bc.jOt(this)}Sf(){return this.DAt||(this.DAt=BM.Hr(BM.Event.Sf)),this.DAt}zT(t){this.MOt?this.MOt.zT(t):this.TOt.eY(this.Bc.GB().CB())}vIt(t){this.MOt.vIt(t)}UOt(){this.Txt|=2}zOt(){return!!(2&this.Txt)}HOt(){this.Txt|=1}SY(){return!!(1&this.Txt)}bM(){return!!(4&this.Txt)||(this.MOt?this.MOt.bM():this.TOt.iM())}qOt(){this.Txt|=32}F3(){return!!(32&this.Txt)}JOt(){return!!(8&this.Txt)}YOt(t){t?this.Txt|=8:this.Txt&=-9}XOt(){return!!(16&this.Txt)}ZOt(t){t?this.Txt|=16:this.Txt&=-17}KOt(){return!!(64&this.Txt)}QOt(t){t?this.Txt|=64:this.Txt&=-65}tFt(t,s){t<<=16,s?this.Txt|=t:this.Txt&=~t}sFt(t){return!!(this.Txt&t<<16)}MPt(){return this.MOt?this.MOt.MPt():null}TPt(){return this.MOt?this.MOt.TPt():null}xPt(){return this.MOt?this.MOt.xPt():null}CPt(){return this.MOt?this.MOt.CPt():null}_Pt(){return!!this.MOt&&this.MOt._Pt()}pCt(t){return this.MOt?this.MOt.pCt(t):[this.TOt.x,this.TOt.y,this.TOt.Dz]}fU(){return this.bOt}E3(){return this.MOt?this.MOt.E3():this.TOt.iY()}lGt(t){return t.v1()?t.CV(this.fU()):this.fU()===t}eFt(t,s,e){const i=(s,e)=>{const i=e||s.fU(),r=t.get(i);r?r.add(s):t.set(i,new Set([s]))};if(i(this,s),this.TU())for(const t of this.xU())i(t);if(e)for(const t of this.pH())i(t)}iFt(){if(!this.HW().EW())throw new Error("object does not support scene graph")}SH(){return null!==this.hH()}hH(){const t=this.LB();if(!t)return null;const s=t.hH();return s?s.PJ():null}aH(){const t=this.LB();if(!t)return null;const s=t.aH();return s?s.PJ():null}*lH(){const t=this.LB();if(t)for(const s of t.lH())yield s.PJ()}rFt(t){if(!t)return!1;for(const s of this.children())if(s===t)return!0;return!1}o4(){const t=this.LB();return!!t&&t.o4()}nFt(t){const s=this.LB();if(!s)return[];const e=t.Rc();return s.o6().map(t=>t.PJ()).filter(t=>t.fU().Rc()===e)}o6(){const t=this.LB();return t?t.o6().map(t=>t.PJ()):[]}*children(){const t=this.LB();if(t)for(const s of t.children())yield s.PJ()}*pH(){const t=this.LB();if(t)for(const s of t.pH())yield s.PJ()}cH(){const t=this.LB();return t?t.cH():0}hFt(){return[...this.lH()].length}dGt(){const t=this.LB();return t?t.dGt():0}dH(t){const s=this.LB();if(!s)return null;const e=s.dH(t);return e?e.PJ():null}oFt(){const t=this.LB();if(!t)return NaN;const s=t.hH();return s?s.aFt(t):NaN}lFt(t){for(const s of this.LB().o6())if(s.PJ().CU()===t)return!0;return!1}gH(t,s){this.iFt(),t.iFt(),this.LB().gH(t.LB(),s||{})}yH(t){const s=this.LB();s&&s.yH(t.LB())}NH(){const t=this.LB();return!!t&&t.NH()}B5(){const t=this.LB();if(!t)return;const s=t.uFt();if(s)for(const t of s){const s=this.Bc.RB(t[2]);if(s){const e=t[3];this.gH(s,{bH:!!(1&e),TH:!!(e>>1&1),CH:!!(e>>2&1),_H:!!(e>>3&1),PH:!!(e>>4&1),kH:!!(e>>5&1),AH:!!(e>>6&1),OH:!!(e>>7&1),DH:!!(e>>8&1)})}}}W5(t,s){const e=t.get(this);if(e)for(const t of e.sceneGraphJson.children){const e=s.get(t.index);if(!e)continue;const i=t.flags;this.gH(e,{bH:!!(1&i),TH:!!(i>>1&1),CH:!!(i>>2&1),_H:!!(i>>3&1),PH:!!(i>>4&1),kH:!!(i>>5&1),AH:!!(i>>6&1),OH:!!(i>>7&1),DH:!!(i>>8&1)})}}PU(){const t=this.Bc.cFt();return t?t.bct(this):""}TU(){return null!==this.AOt}fFt(){BM.bh(this.AOt)}X5(t){this.AOt.push(t)}bU(){return this.AOt}dFt(t){return!!this.pFt(t)}pFt(t){const s=this.xU();if(null===s||0===s.length)return!1;for(const e of s)if(e.fU()===t)return e;return null}xU(){return this.AOt}SSt(){for(const t of this.xU())t.fU().rV().kpt(t)}mxt(){for(const t of this.xU())t.fU().rV().Ept(t)}gxt(t){for(const s of this.xU())s.fU().rV().Dpt()[t]=s}wxt(){for(const t of this.xU())t.fU().rV().Opt(t)}yxt(t){for(const s of this.xU())s.fU().rV().Lpt()[t]=s}HW(){return this.bOt.HW()}sOt(t){this.xOt=t}_U(){return this.bOt.Z5(),this.xOt}CU(){return this.COt}mFt(t){this.COt=t}gFt(){return this.GOt}yFt(t){t?this.LU(new Set(t)):this._Ot=null}LU(t){if(0===t.size)this._Ot=null;else{this._Ot?this._Ot.clear():this._Ot=new Set;for(const s of t)this._Ot.add(s)}}FU(){return this._Ot??new Set}NGt(){return Array.from(this.FU()).join(" ")}WGt(t){t=Math.floor(t);for(const s of this.FU()){if(0===t)return s;--t}return""}Ont(){return this.POt}wFt(t){if(!t)return null;for(const s of this.POt)if(s.lq()instanceof t)return s;return null}SFt(t){if(!t)return null;const s=this.wFt(t);return s?s.eq():null}Ent(t){const s=this.POt;for(let e=0,i=s.length;e<i;++e)if(s[e].fq().I1()===t)return e;return-1}vFt(){return this.IOt}NEt(){return this.bOt.NEt()}bFt(){return this.IOt.length}uot(t){t|=0;const s=this.IOt;if(t<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}FMt(t){return this.IOt[t]}MFt(t){const s=this.IOt[t];return 0===this.bOt.rit(t)?!!s:s}cot(t,s){t|=0;const e=this.IOt;if(t<0||t>=e.length)throw new RangeError("invalid instance variable");switch(this.bOt.rit(t)){case 0:e[t]=s?1:0;break;case 1:e[t]="number"==typeof s?s:parseFloat(s);break;case 2:e[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}sat(t,s){if(0===s)return;t|=0;const e=this.IOt;if(t<0||t>=e.length)throw new RangeError("invalid instance variable");const i=e[t];if("number"!=typeof i)throw"boolean"==typeof i?new Error("can not set offset of boolean variable"):"string"==typeof i?new Error("can not set offset of string variable"):new Error("unknown instance variable type");e[t]+="number"==typeof s?s:parseFloat(s)}axt(){let t=zM.get(this);return t||(t=new Map,zM.set(this,t),t)}lxt(){let t=HM.get(this);return t||(t=new Map,HM.set(this,t),t)}TFt(t){const s=this.fU();if(s.rN().xf(t))return!0;for(const e of s.yV())if(e.rN().xf(t))return!0;return!!this.Bc.rN().xf(t)}fV(t=void 0){const s=t??new Set;if(s.has(this))return;s.add(this);const e=this.LB();if(e&&e.o4())for(const t of this.pH())if(s.add(t),t.TU())for(const e of t.xU())s.add(e);if(this.TU())for(const t of this.xU())t.fV(s);if(!t){for(const t of s.values())t.V5();this.j5()}}xFt(){this.bOt.wOt()&&this.AB();for(const t of this.POt)t.oRt()}CFt(){this.xFt()}V5(){if(this.xFt(),this.TFt("instancecreate")){const t=this.fU(),s=new BM.Event("instancecreate");s.pq=this.AB(),t.IK(s);for(const e of t.yV())e.IK(s);this.Bc.IK(s)}this.Bc.JU(this.HW().nwt().t$.UGt,this,null)}j5(){if(this.HW().EW()){if(this.IK(new BM.Event("hierarchyready")),this.TFt("hierarchyready")){const t=this.fU(),s=new BM.Event("hierarchyready");s.pq=this.AB(),t.IK(s);for(const e of t.yV())e.IK(s);this.Bc.IK(s)}this.Bc.JU(this.HW().nwt().t$.hGt,this,null)}}GFt(){this.Bc.JU(this.HW().nwt().t$.zGt,this,null)}_Ft(t){if(this.TOt){const s=new BM.Event("destroy");s.IFt=t,this.IK(s)}if(!this.TFt("instancedestroy"))return;const s=this.fU(),e=new BM.Event("instancedestroy");e.pq=this.AB(),e.IFt=t,s.IK(e);for(const t of s.yV())t.IK(e);this.Bc.IK(e)}PFt(){return this.MOt?this.MOt.lPt():this.TOt.lz()}aT(t="full",s=null){const e={};"full"===t?e.uid=this.CU():e.c3=!0;const i=this.FU();if(i.size>0&&(e.tags=Array.from(i)),"visual-state"!==t){const s=zM.get(this);if(s&&s.size&&(e.ex=BM.So(s)),-1!==this.WN()&&(e.mts=this.WN()),this.bOt.xEt()>0){const t={},s=this.bOt.LEt();for(let e=0,i=this.IOt.length;e<i;++e)t[s[e].toString()]=this.IOt[e];e.ivs=t}if(this.POt.length){const s={};for(const e of this.POt){const i=e.aT(t);i&&(s[e.fq().I1().toString()]=i)}e.behs=s}}this.Ret&&(e.w=this.Ret.i4(t,s));const r=this.MOt?this.MOt.aT():this.TOt.uz();return r&&(e.data=r),e}c8(t="full",s=null){this.Ret&&this.Ret.c8(t)}d8(t,s="full",e=null){this.Ret&&this.Ret.d8(t,s,e)}RFt(t,s="full",e=null){this.Ret&&this.Ret.RFt(t,s,e)}yOt(){this.HW().bW()&&this.Ret.yOt()}lT(t,s="full",e=null){if("full"===s)this.COt=t.uid;else if(!t.c3)return;if(this.yFt(t.tags),"visual-state"!==s){let s=zM.get(this);s&&(s.clear(),zM.delete(this));const e=t.ex;e&&(s=BM.vo(e),zM.set(this,s)),this.EOt=t.hasOwnProperty("mts")?t.mts:-1;const i=t.ivs;if(i)for(const[t,s]of Object.entries(i)){const e=parseInt(t,10),i=this.bOt.kEt(e);if(i<0||i>=this.IOt.length)continue;let r=s;null===r&&(r=NaN),this.IOt[i]=r}}if(this.HW().bW()){const i=t.w;if(i){const t=i.l;if(this.Ret.kB().I1()!==t){const e=this.Ret.kB(),i=e.mB().i5(t);i?(this.Ret.WB(i),e.a1(this,!0),i.n1(this,!0),i.VB(this),this.Ret.Tz()):"full"===s&&this.Bc.wU(this)}this.Ret.r4(i,s,e)}}if("visual-state"!==s){const e=t.behs;if(e)for(const[t,i]of Object.entries(e)){const e=parseInt(t,10),r=this.Ent(e);r<0||r>=this.POt.length||this.POt[r].lT(i,s)}}const i=t.data;i&&(this.MOt?this.MOt.lT(i,s):this.TOt.cz(i))}AFt(t){if(this.Ret.kB().I1()===t)return;const s=this.Ret.kB(),e=s.mB().i5(t);e&&(this.Ret.WB(e),s.a1(this,!0),e.n1(this,!0),e.VB(this),this.Ret.Tz())}AB(){return this.TOt||this.WOt()}dPt(){return!!this.TOt}WOt(t,s){const e=this.Ret?t?self.KJ:self.ZH:t?self.$U:self.cU,i=t||this.MOt.bIt(),r=this.bOt.wOt(),n=r||i||e,h=this.HW().sxt();if(BM.mW.xIt(this,h),BM.mW.CRt(s),this.TOt=new n,BM.mW.GRt(),BM.mW.CIt(h),i&&!(this.TOt instanceof e))throw new TypeError(`script interface class '${i.name}' does not extend the right base class '${e.name}'`);if(r){const t=i||e;if(!(this.TOt instanceof t))throw new TypeError(`setInstanceClass(): class '${r.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.TOt}dU(t){if(0===this.IOt.length)return;const s={},e=this.bOt.BEt();for(let t=0,i=e.length;t<i;++t)s[e[t]]={configurable:!1,enumerable:!0,get:BM.Instance.prototype.MFt.bind(this,t),set:BM.Instance.prototype.cot.bind(this,t)};const i=Object.create(Object.prototype,s);t.EFt={value:i,writable:!1}}pU(t){const s=this.POt;if(0===s.length)return;const e={};for(const t of s)e[t.fq().Ugt()]={value:t.zIt(),writable:!1};const i=Object.create(Object.prototype,e);t.nSt={value:i,writable:!1}}IK(t){if(!this.dPt())return;const s=this.AB();t.pq=s;const e=this.Bc,i=e.ez()&&!e.aN().dV();i&&$M.M6(),s.dispatchEvent(t),i&&$M.T6()}}}{const tT=self._s,sT=new Map;tT.l6=class extends tT.Ur{constructor(t){super(),this.gT=t,this.CSt=null,this.OFt=[],this.FFt=t.jg(),this.DFt=t.Qg(),this.LFt=1,this.kFt=1,this.NFt=0,this.BFt=1,this.$Ft=t.SO(),this.WFt=null,this.VFt=null,this.jFt=NaN,this.UFt=!1,this.u4=NaN,this.c4=NaN,this.zFt=s=>{if(s.pq!==this.CSt.PJ())return;t.l$().Sf().removeEventListener("instancecreate",this.zFt);const e=this.CSt.PJ().eq();this.UFt=!!e.Sit(),this.u4=this.UFt?e.wit():NaN,this.c4=this.UFt?e.bit():NaN}}qr(){this.CSt=null,this.WFt=null,this.VFt=null,this.jFt=NaN,this.UFt=!1,this.u4=NaN,this.c4=NaN,tT.bh(this.OFt)}HFt(t){if(this.BFt=this.gT.SO(),this.$Ft=this.BFt,this.CSt=t,this.NFt=t?t.FV():0,this.CSt){const t=this.gT.l$();if(this.CSt.PJ().HW().sxt()<2){const s=this.CSt.PJ().eq();s?(this.UFt=!!s.Sit(),this.u4=this.UFt?s.wit():NaN,this.c4=this.UFt?s.bit():NaN):this.CSt.PJ().SY()||t.Sf().addEventListener("instancecreate",this.zFt)}else this.UFt=!1,this.u4=NaN,this.c4=NaN}else this.UFt=!1,this.u4=NaN,this.c4=NaN}hH(){return this.CSt}o4(){return this.OFt.length>0}o6(){return this.OFt}qFt(){this.o4()&&1!==this.OFt.length&&(this.VFt?this.OFt.sort((t,s)=>{const e=this.VFt.get(t.PJ()),i=this.VFt.get(s.PJ());return tT.Ze(e)&&tT.Ze(i)?e-i:0}):this.OFt.sort((t,s)=>{const e=t.Unt().JFt(),i=s.Unt().JFt();return tT.Ze(e)&&tT.Ze(i)?e-i:0}))}JFt(){return this.jFt}YFt(){return this.LFt}XFt(t){this.LFt=t}ZFt(){return this.kFt}KFt(t){this.kFt=t}Rot(){return this.$Ft}LCt(){return this.BFt}QFt(t){this.BFt=t}jnt(){return 0===this.FFt?Number.EPSILON:this.FFt}Jnt(){return 0===this.DFt?Number.EPSILON:this.DFt}tDt(){if(this.gT.GH()){const t=this.CSt;let s=t.jg(),e=t.Unt().jnt();return 0===s&&(s=Number.EPSILON),e===Number.EPSILON&&s===Number.EPSILON?1:e===Number.EPSILON&&s!==Number.EPSILON&&this.UFt?1+s/this.u4:s/e}return 1}sDt(){if(this.gT.IH()){const t=this.CSt;let s=t.Qg(),e=t.Unt().Jnt();return 0===s&&(s=Number.EPSILON),e===Number.EPSILON&&s===Number.EPSILON?1:e===Number.EPSILON&&s!==Number.EPSILON&&this.UFt?1+s/this.c4:s/e}return 1}eDt(){return 0}iDt(){return{sw:this.FFt,sh:this.DFt,sx:this.LFt,sy:this.kFt,psa:this.NFt,oo:this.BFt,so:this.$Ft,pi:this.gT.PJ().oFt()}}i4(t,s=null){const e=this.iDt();return s&&s.selfOnly?Object.assign(e,{p:null,c:[]}):Object.assign(e,{p:this.rDt(t),c:this.nDt(t)})}hDt(t){let s="";return t.MH()&&(s+="x"),t.xH()&&(s+="y"),t.GH()&&(s+="w"),t.IH()&&(s+="h"),t.RH()&&(s+="a"),t.EH()&&(s+="z"),t.NH()&&(s+="d"),t.FH()&&(s+="o"),t.LH()&&(s+="v"),s}rDt(t){return this.CSt?!this.CSt.PJ()||this.CSt.PJ().SY()?null:this.oDt(this.CSt,this.gT,t):null}nDt(t){return this.OFt.map(s=>this.oDt(s,s,t)).filter(t=>t)}oDt(t,s,e){const i=t.PJ();if(i&&i.SY())return null;const r={};return r.uid=i.CU(),r.f=this.hDt(s),r.offsets=s.aDt(),r.data=tT.l6.lDt(i),r.oci=i.fU().Tk(),"state"===e?(r.inst=i.aT("full",{selfOnly:!0}),r.instIndex=NaN):(r.instIndex=i.fU().iV().indexOf(i),r.inst=null),r}r4(t){this.FFt=t.sw,this.DFt=t.sh,this.LFt=t.sx,this.kFt=t.sy,this.NFt=t.psa,this.BFt=t.oo,this.$Ft=t.so,this.jFt=tT.Ze(t.pi)?t.pi:NaN}uDt(t,s,e,i){if(!t&&!s)if(i?.t_t){if(this.WFt)for(const t of this.WFt)t.SY()||t.SH()||t.l$().wU(t)}else if(this.WFt)for(const t of this.WFt)if(e.c&&e.c.length){if(!e.c.some(s=>s.uid===t.CU()))continue;t.SY()||t.SH()||t.l$().wU(t)}this.WFt=t,this.VFt=s}cDt(t){const s=this.gT.l$();return sT.has(t)?sT.get(t):s.RB(t)}d8(t,s){const e=this.gT,i=e.l$(),r=s?.fDt??new Set;if(t.p&&!this.CSt){const n=t.p.uid,h=this.cDt(n);if(h){const n=h.LB();h.rFt(e.PJ())?this.CSt=n:(h.lFt(e.PJ().CU())?(i.wU(e.PJ()),i.dDt(e.PJ().CU()),sT.delete(e.PJ().CU())):h.gH(e.PJ(),this.pDt(t.p.f)),r.has(e)||(e.mDt(t.p.offsets),this.gDt(h,t.p,s),this.yDt(h,h.CU(),e.l$(),s)),r.add(e),h.LB().Unt().qFt())}else if(tT.Ze(t.p.oci)){const r=i.lV(i.J0(t.p.oci),e.kB(),0,0,!0);if(r){const n=this.wDt(t.p,i);n&&r.lT(n);const h=r.LB(),o=!!s?.t_t;h.kB().uV(r,!1,o),r.gH(e.PJ(),this.pDt(t.p.f)),sT.set(r.CU(),r),this.yDt(r,r.CU(),i,s),r.LB().Unt().qFt()}}}const n=[];for(const s of t.c){const t=s.uid,e=this.cDt(t);e&&n.push(e)}let h=0;for(const o of t.c){const a=o.uid,l=this.cDt(a);if(l){if(this.WFt){if(this.WFt.includes(l)){const i=l;if(i.fU()!==l.fU()){h++;continue}if(i.SY()){h++;continue}const o=t.c[h];if(!s?.t_t&&this.SDt(i,n,e)){if(e.PJ().dH(h)){const n=i.fU().Tk(),a=o.oci,l=e.PJ().dH(h).fU().Tk();if(n!==a||a!==l){this.vDt(t.c,e,r,s);break}this.bDt(h,o,e,r,s)}else this.bDt(h,o,e,r,s);h++;continue}if(i.SH()&&i.hH()!==e.PJ()){const t=this.MDt(o,s);this.TDt(t,o,r,s),h++;continue}this.TDt(i.LB(),o,r,s,!0),h++;continue}if(this.WFt[h]){const i=this.WFt[h];if(i.fU()!==l.fU()){h++;continue}if(i.SY()){h++;continue}const o=t.c[h];if(!s?.t_t&&this.SDt(i,n,e)){if(e.PJ().dH(h)){const n=i.fU().Tk(),a=o.oci,l=e.PJ().dH(h).fU().Tk();if(n!==a||a!==l){this.vDt(t.c,e,r,s);break}this.bDt(h,o,e,r,s)}else this.bDt(h,o,e,r,s);h++;continue}if(i.SH()&&i.hH()!==e.PJ()){const t=this.MDt(o,s);this.TDt(t,o,r,s),h++;continue}this.TDt(i.LB(),o,r,s,!0),h++;continue}}const i=l.fU();if(this.xDt(n,i)===e.PJ().nFt(i).length){for(const t of e.PJ().o6()){if(t.fU()!==i)continue;const e=t.LB();if(e&&!r.has(e)){r.add(e),e.mDt(o.offsets),this.gDt(t,o,s);break}}h++;continue}if(l.SH()&&l.hH()!==e.PJ()){const t=this.MDt(o,s);this.TDt(t,o,r,s),h++;continue}this.TDt(l.LB(),o,r,s)}else if(this.WFt&&this.WFt[h]){const a=this.WFt[h],l=i.J0(this.CDt(o));if(a.fU()!==l){h++;continue}if(a.SY()){h++;continue}const u=t.c[h];if(!s?.t_t&&this.SDt(a,n,e)){if(e.PJ().dH(h)){const i=a.fU().Tk(),n=u.oci,o=e.PJ().dH(h).fU().Tk();if(i!==n||n!==o){this.vDt(t.c,e,r,s);break}this.bDt(h,u,e,r,s)}else this.bDt(h,u,e,r,s);h++;continue}if(a.SH()&&a.hH()!==e.PJ()){const t=this.MDt(u,s);this.TDt(t,u,r,s),h++;continue}this.TDt(a.LB(),u,r,s)}else{const t=this.MDt(o,s);this.TDt(t,o,r,s)}h++}}vDt(t,s,e,i){const r=s.l$();for(const t of s.PJ().children())t&&!t.SY()&&(r.wU(t),r.dDt(t.CU()),sT.delete(t.CU()));this.WFt&&(this.WFt=[]),this.VFt&&(this.VFt=new WeakMap),Object.assign({},i,{assignZIndex:!1});for(const s of t){const t=this.MDt(s,i);this.TDt(t,s,e,i),this.WFt.push(t.PJ()),this.VFt.set(t.PJ(),this.WFt.length-1)}s.Unt().qFt()}SDt(t,s,e){const i=t.fU();return this.xDt(s,i)===e.PJ().nFt(i).length}bDt(t,s,e,i,r){const n=e.PJ().dH(t);if(!n)return;const h=n.LB();h&&(i.has(h)||(h.mDt(s.offsets),this.gDt(n,s,r)),i.add(h))}pDt(t){const s={};return s.bH=t.includes("x"),s.TH=t.includes("y"),s.CH=t.includes("w"),s._H=t.includes("h"),s.PH=t.includes("a"),s.AH=t.includes("z"),s.kH=t.includes("d"),s.OH=t.includes("o"),s.DH=t.includes("v"),s}CDt(t){return tT.Ze(t.oci)?t.oci:t[1]}MDt(t,s){if(!tT.Ze(t.oci))return;const e=this.gT,i=e.l$();let r;const n=!s.hasOwnProperty("createHierarchy")||s.createHierarchy;if(r=t.data?i.i1(t.data,e.kB(),!1,0,0,!1,n):i.lV(i.J0(t.oci),e.kB(),0,0,n),!r)return;const h=this.wDt(t,i);h&&r.lT(h);const o=r.LB(),a=!!s?.t_t;return o.kB().uV(r,!0,a),o}yDt(t,s,e,i){if(this.cDt(s)&&!i?.t_t){const i=this.cDt(s);i!==t&&e.wU(i)}e.dDt(s),e.AEt(s,t)}TDt(t,s,e,i,r=!0){const n=this.gT,h=n.gH(t,this.pDt(s.f));h&&r?(e.has(t)||(t.mDt(s.offsets),this.gDt(t.PJ(),s,i)),e.add(t)):h&&(sT.set(t.PJ().CU(),t.PJ()),this.yDt(t.PJ(),s.uid,n.l$(),i)),this.qFt()}gDt(t,s,e){let i=this.wDt(s,this.gT.l$());if(!i)return;const r=!e.hasOwnProperty("clearChildren")||e.clearChildren,n=!e.hasOwnProperty("assignZIndex")||e.assignZIndex,h=t.l$();if(sT.set(t.CU(),t),i=JSON.parse(JSON.stringify(i)),r&&t.CU()!==i.uid){for(const s of t.children())s&&!s.SY()&&(h.wU(s),h.dDt(s.CU()),sT.delete(s.CU()));if(i.w?.sgi&&i.w.sgi.c?.length)for(const s of i.w.sgi.c){const i=Object.assign({},e,{clearChildren:!1,createHierarchy:!1}),r=this.MDt(s,i);sT.set(r.PJ().CU(),r.PJ()),t.gH(r.PJ(),this.pDt(s.f)),r.mDt(s.offsets),this.gDt(r.PJ(),s,i)}}const o=i.w?.zi,a=i.w?.l;i.w=null,t.lT(i),e?.t_t||(tT.Ze(o)&&n&&t.LB().d1(o),tT.Ze(a)&&t.AFt(a)),this.yDt(t,i.uid,h,e)}xDt(t,s){return t.filter(t=>t.fU().Rc()===s.Rc()).length}wDt(t,s){if(tT.Ze(t.instIndex)){const e=s.J0(t.oci).mOt();return e?e[t.instIndex]:null}return tT.hi(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static lDt(t){let s=t.LB().kB().Q0(t.CU());if(!s)return null;s=JSON.parse(JSON.stringify(s));const e=[];for(const s of[...t.o6()]){const t=s.LB();e.push([t.mB().I1(),t.kB().Tk(),s.CU(),tT.l6.a6(t),s.fU().TU()?1:0,t.NB(),tT.l6.lDt(s)])}return tT.Ti(s[0][14])?s[0][14][1]=e:(s[0][14]=[],s[0][14][0]=tT.l6.GDt(),s[0][14][1]=e,s[0][14][2]=t.LB().NB()),s}static a6(t){let s=0;return s|=Number(t.LH())<<8,s|=Number(t.FH())<<7,s|=Number(t.EH())<<6,s|=Number(t.NH())<<5,s|=Number(t.RH())<<4,s|=Number(t.IH())<<3,s|=Number(t.GH())<<2,s|=Number(t.xH())<<1,s|=0|Number(t.MH()),s}static GDt(t){let s=0;return s|=256,s|=128,s|=64,s|=32,s|=16,s|=8,s|=4,s|=2,s|=1,511}static _Dt(){sT.clear()}}}{const eT=self._s,iT=self.ls,rT=iT.ws,nT=iT.Ss,hT=eT.Hr(eT.Rect),oT=eT.Hr(eT.Pl),aT=eT.Hr(eT.Event,"bboxchange",!1),lT=eT.Hr(eT.xo,0,0,0,0),uT=eT.Hr(eT.lu),cT=eT.Hr(eT.xo,1,1,1,1),fT=eT.Hr(eT.Rect,0,0,-1,-1),dT=eT.Hr(eT.Rect,0,0,-1,-1),pT=new Set(["absolute","relative"]),mT=[];let gT=!0;const yT=1,wT=2,ST=4,vT=8,bT=16,MT=32,TT=64,xT=128,CT=256,GT=512,_T=1024,IT=2048,PT=4096,RT=8192,AT=16384,ET=32768,OT=1<<22,FT=1<<23,DT=12647936,LT=65536,kT=1<<17,NT=1<<18,BT=1<<19,$T=1<<20,WT=1<<21,VT=1<<24,jT=26,UT=31<<26,zT=new WeakMap,HT=new WeakMap;eT.OOt=class extends eT.Ur{constructor(t,s){super(),this.fe=t,this.mpt=t.fU(),this.Bc=t.l$(),this.IDt=s,this.mpt.aOt(this,null,s),this.PDt=-1,this.RDt=-1,this.Txt=196635,this.mpt.HW().GW()&&(this.Txt|=128),this.Ra=NaN,this.Aa=NaN,this.FM=NaN,this.ADt=NaN,this.EDt=NaN,this.nC=NaN,this.Io=NaN,this.ODt=NaN,this.FDt=NaN,this.DDt=NaN,this.LDt=NaN,this.kDt=eT.Hr(eT.Rect),this.NDt=eT.Hr(eT.Pl),this.BDt=dT,this.$Dt=fT,this.WDt=null,this.VDt=null,this.jDt=null,this.OM=cT,this.UDt=cT,this.zDt=null,this.HDt=null,this.fe.fU().WEt()&&(this.HDt=eT.Hr(eT.qDt,this.fe,this)),this.JDt=null,this.WFt=null,this.VFt=null,this.YDt=-1,this.XDt=null}HOt(){this.Txt|=256}qr(){if(this.mpt.aOt(this,this.IDt,null),this.zDt&&(this.Bc.gM().Rv(this.zDt),this.zDt=null),this.WDt=null,this.VDt&&(this.VDt.ZDt.qr(),this.VDt=null),this.jDt&&(this.jDt.clear(),this.jDt=null),this.VH(),this.HDt&&this.HDt.qr(),this.SH()&&this.hH().yH(this),this.o4()){const t=[...this.o6()];for(const s of t)this.yH(s)}this.KDt(),this.QDt(),zT.delete(this),HT.delete(this),this.fe=null,this.mpt=null,this.Bc=null,this.IDt=null}DOt(t){if(gT=!1,this.xz(t[0],t[1]),this.sT(t[2]),this.$R(t[3],t[4]),this.nC=0,this.GW()?this.OV(t[6]):this.Io=0,lT.Sa(t[7]),this.tLt(lT),this.Pz(t[8]),this.Ez(t[9]),this.NM(t[10]),this.HDt&&this.HDt.sLt(t[12]),t[14]&&zT.set(this,{eLt:t[14][1],iLt:t[14][2]}),t[15]){const s=t[15];this.$H(s[0],s[1]);const e=this.qH(),i=s[2];for(let t=0,s=i.length;t<s;++t){const s=i[t];for(let i=0,r=s.length;i<r;++i){const r=s[i],n=e.NT(i,t);n.XM(r[0]),n.QM(r[1]),n.sT(r[2]),n.iT(r[3]),n.nT(r[4])}}}if(t[16]){const s=t[16][0],e=t[16][1],i=!!e,r=!i,n=this.Bc.cFt();i&&n&&n.vct(this.PJ(),e),r&&n&&n.vct(this.PJ(),s)}gT=!0,this.rLt()}LOt(){this.Ra=0,this.Aa=0,this.FM=0,this.ADt=0,this.EDt=0,this.nC=0,this.Io=0,this.ODt=0,this.FDt=1,this.DDt=0,this.LDt=0,this.rLt()}l$(){return this.Bc}fU(){return this.mpt}PJ(){return this.fe}nLt(){return this.RH()?this.hLt(this.hH().oLt()-this.JDt.eDt()):0}XM(t){if(t=+t,this.MH()){const s=this.JDt,e=t-this.YM(),i=-this.nLt();0===i?this.Ra+=e/s.tDt():(this.Ra+=Math.cos(i)*e/s.tDt(),this.xH()&&(this.Aa+=Math.sin(i)*e/s.sDt()))}else this.Ra=t}got(t,s=!1){t=+t,s?this.Ra+=t:this.MH()?this.XM(this.YM()+t):this.Ra+=t}YM(){if(this.MH()){let t=this.Ra;const s=this.JDt,e=this.hH(),i=this.nLt();return 0===i?t*=s.tDt():(t=t*s.tDt()*Math.cos(i),this.xH()&&(t-=this.Aa*s.sDt()*Math.sin(i))),e.YM()+t}return this.Ra}QM(t){if(t=+t,this.xH()){const s=this.JDt,e=t-this.KM(),i=-this.nLt();0===i?this.Aa+=e/s.sDt():(this.MH()&&(this.Ra-=Math.sin(i)*e/s.tDt()),this.Aa+=Math.cos(i)*e/s.sDt())}else this.Aa=t}yot(t,s=!1){t=+t,s?this.Aa+=t:this.xH()?this.QM(this.KM()+t):this.Aa+=t}KM(){if(this.xH()){let t=this.Aa;const s=this.JDt,e=this.hH(),i=this.nLt();return 0===i?t*=s.sDt():(t=t*s.sDt()*Math.cos(i),this.MH()&&(t+=this.Ra*s.tDt()*Math.sin(i))),e.KM()+t}return this.Aa}xz(t,s){if(t=+t,s=+s,this.aLt()){const e=this.MH(),i=this.xH(),r=this.JDt,n=t-this.YM(),h=s-this.KM(),o=-this.nLt();if(0===o)e?this.Ra+=n/r.tDt():this.Ra=t,i?this.Aa+=h/r.sDt():this.Aa=s;else{const a=Math.sin(o),l=Math.cos(o);e?this.Ra+=i?(l*n-a*h)/r.tDt():l*n/r.tDt():this.Ra=t,i?this.Aa+=e?(a*n+l*h)/r.sDt():l*h/r.sDt():this.Aa=s}}else this.Ra=t,this.Aa=s}lLt(){return[this.YM(),this.KM()]}Gz(t,s){t=+t,s=+s,this.aLt()?this.xz(this.YM()+t,this.KM()+s):(this.Ra+=t,this.Aa+=s)}fCt(t,s){return this.YM()===t&&this.KM()===s}sT(t){if(t=+t,this.EH()&&(t-=this.hH().tT()),this.FM===t)return;this.FM=t,this.uLt();const s=this.kB();0!==this.FM&&s.c1(),s.VB(this)}uLt(){if(this.rLt(),this.o4()){const t=this.o6();for(let s=0,e=t.length;s<e;s++){const e=t[s];e.EH()&&e.uLt()}}}Oot(t){this.sT(this.tT()+t)}tT(){return this.EH()?this.hH().tT()+this.FM:this.FM}Lz(){return this.kB().tT()+this.tT()}Sit(){return this.PJ().HW().sxt()<2&&this.PJ().eq().Sit()}Xg(t){if(t=+t,this.GH()){const s=this.jg();0===s?this.ADt=Number.EPSILON:this.ADt*=t/s}else this.ADt=t;this.cLt()}Gy(t,s){t=+t,s?this.ADt+=t:this.GH()?this.Xg(this.jg()+t):this.ADt+=t,this.cLt()}jg(){if(this.GH()){const t=this.hH(),s=t.jg();return t.Unt().jnt()===Number.EPSILON?(this.Unt().jnt()+s)*this.ADt:s*this.ADt}return this.ADt}Ug(t){if(t=+t,this.IH()){const s=this.Qg();0===s?this.EDt=Number.EPSILON:this.EDt*=t/s}else this.EDt=t;this.cLt()}Tot(t,s){t=+t,s?this.EDt+=t:this.IH()?this.Ug(this.Qg()+t):this.EDt+=t,this.cLt()}Qg(){if(this.IH()){const t=this.hH(),s=t.Qg();return t.Unt().Jnt()===Number.EPSILON?(this.Unt().Jnt()+s)*this.EDt:s*this.EDt}return this.EDt}$R(t,s){if(t=+t,s=+s,this.GH()){const s=this.jg();0===s?this.ADt=Number.EPSILON:this.ADt*=t/s}else this.ADt=t;if(this.IH()){const t=this.Qg();0===t?this.EDt=Number.EPSILON:this.EDt*=s/t}else this.EDt=s;this.cLt()}Fu(){return[this.jg(),this.Qg()]}O3(){return this.nC}fLt(t){if(t<0)throw new RangeError("invalid depth");this.nC=t}dLt(){if(this.SH()){const t=this.JDt;return Math.min(t.tDt(),t.sDt())}return 1}GW(){return!!(128&this.Txt)}OV(t){t=+t,this.GW()&&(this.RH()&&(t-=this.hH().FV()),t=eT.Qr(t),this.Io!==t&&(this.Io=t,this.cLt()))}xot(t){0!==(t=+t)&&this.GW()&&(this.Io=eT.Qr(this.Io+t),this.cLt())}cLt(){if(this.Txt|=262144,this.o4()){const t=this.o6();for(let s=0,e=t.length;s<e;s++)t[s].cLt()}}FV(){return this.RH()&&this.GW()?this.hLt(eT.Qr(this.hH().oLt()+this.Io)):this.Io}oLt(){return this.RH()&&this.GW()?eT.Qr(this.hH().oLt()+this.Io):this.Io}hLt(t){return this.GH()&&this.aH().jg()<0&&(t=eT.Qr(eT.mn(t,this.aH().FV()+Math.PI))),this.IH()&&this.aH().Qg()<0&&(t=eT.mn(t,this.aH().FV())),t}pLt(){const t=this.hH();return!!(this.GH()&&t.jg()<0)||!!(this.IH()&&t.Qg()<0)}mLt(){const t=this.hH();return!!(this.GH()&&t.jg()<0&&this.IH()&&t.Qg()<0)}gLt(){const t=this.Txt;if(!(262144&t))return;const s=this.FV();this.ODt=Math.sin(s),this.FDt=Math.cos(s),this.Txt=-262145&t}yCt(){return this.gLt(),this.ODt}gCt(){return this.gLt(),this.FDt}Pz(t){this.DDt=+t}Aot(t){this.DDt+=+t}Iz(){return this.DDt}Ez(t){this.LDt=+t}Eot(t){this.LDt+=+t}Az(){return this.LDt}tLt(t){this.OM.equals(t)||(this.OM===cT?(this.OM=eT.Hr(eT.xo,t),this.UDt=eT.Hr(eT.xo,t),this.UDt.Ko()):t.Jo(1,1,1,1)?(this.OM=cT,this.UDt=cT):(this.OM.set(t),this.UDt.set(t),this.UDt.Ko()),this.rLt())}bO(t){if(t=eT.Kr(+t,0,1),this.FH()){if(this.Unt().LCt()===t)return;this.Unt().QFt(t),t=this.SO()}else if(this.OM.a===t)return;this.yLt(t)}wLt(){if(!this.o4())return;const t=this.o6();for(let s=0,e=t.length;s<e;s++){const e=t[s];e.yLt(e.SO())}}yLt(t){lT.ko(this.OM),lT.a=t,this.tLt(lT),this.wLt()}_ot(t){this.FH()?this.bO(this.Unt().LCt()+t):this.bO(this.SO()+t)}SO(){return this.FH()?this.hH().SO()*this.Unt().LCt():this.OM.a}qz(t){this.OM.Ho(t)||(lT.ko(t),lT.a=this.SO(),this.tLt(lT))}aot(t,s,e){lT.Ro(t,s,e),this.qz(lT)}SLt(t,s,e){0===t&&0===s&&0===e||(lT.ko(this.OM),lT.r+=t,lT.g+=s,lT.b+=e,this.qz(lT))}zz(){return this.OM}A0(){return this.UDt}NH(){return!!(512&this.Txt)}vLt(t){this.bLt(512,t)}MH(){return!!(1024&this.Txt)}MLt(t){this.bLt(1024,t)}xH(){return!!(2048&this.Txt)}aLt(){return!!(3072&this.Txt)}TLt(t){this.bLt(2048,t)}GH(){return!!(4096&this.Txt)}xLt(t){this.bLt(4096,t)}IH(){return!!(8192&this.Txt)}CLt(t){this.bLt(8192,t)}RH(){return!!(16384&this.Txt)}GLt(t){this.bLt(16384,t)}EH(){return!!(32768&this.Txt)}_Lt(t){this.bLt(32768,t)}FH(){return!!(4194304&this.Txt)}ILt(t){this.bLt(4194304,t)}LH(){return!!(8388608&this.Txt)}PLt(t){this.bLt(8388608,t)}RLt(){this.Txt&=-12647937}gH(t,s){if(t===this)return!1;if(t.SH())return!1;if(this.ALt(t))return!1;if(this.ELt(t))return!1;const e=t.YM(),i=t.KM(),r=t.jg(),n=t.Qg(),h=t.FV(),o=t.tT(),a=t.SO();t.OLt(this),t.MLt(s.bH),t.TLt(s.TH),t.xLt(s.CH),t.CLt(s._H),t.GLt(s.PH),t._Lt(s.AH),t.ILt(s.OH),t.PLt(s.DH),t.vLt(s.kH);const l=e-this.YM(),u=i-this.KM(),c=-this.FV(),f=Math.cos(c),d=Math.sin(c);if(s.bH&&(s.PH?t.Ra=l*f-u*d:t.Ra=l,s.CH)){const s=this.jg()/this.JDt.jnt();0!==s&&(t.Ra/=s)}if(s.TH&&(s.PH?t.Aa=l*d+u*f:t.Aa=u,s._H)){const s=this.Qg()/this.JDt.Jnt();0!==s&&(t.Aa/=s)}if(s.CH){const s=this.jg();0===s||s===Number.EPSILON?(t.ADt=1,t.JDt.XFt(1)):(t.ADt=r/this.jg(),t.JDt.XFt(t.ADt))}if(s._H){const s=this.Qg();0===s||s===Number.EPSILON?(t.EDt=1,t.JDt.KFt(1)):(t.EDt=n/this.Qg(),t.JDt.KFt(t.EDt))}return s.PH&&(t.Io=h-this.FV()),s.AH&&(t.FM=o-this.tT()),s.OH&&t.JDt.QFt(a),s.DH&&t.wj(this.vj()),this.FLt(t),this.Tz(),this.wLt(),!0}yH(t){if(t.hH()!==this)return;const s=t.YM(),e=t.KM(),i=t.jg(),r=t.Qg(),n=t.FV(),h=t.tT(),o=t.SO();t.OLt(null),t.RLt(),t.xz(s,e),t.$R(i,r),t.OV(n),t.sT(h),t.bO(o),this.DLt(t),this.Tz()}LLt(){return this.YDt}kLt(){this.NLt();const t=[...this.children()];for(const s of t)this.yH(s);const s=this.hH();s&&s.yH(this),this.RLt()}NLt(){if(this.BLt(),!this.WFt){const t=[...this.children()];t.length&&(this.WFt=[],this.VFt=new WeakMap);let s=0;for(const e of t){const t=e.PJ();this.WFt.push(t),this.VFt.set(t,s),s++}}const t=this.hH();t&&t.NLt()}BLt(){if(-1!==this.YDt)return;const t=[...this.lH()];this.YDt=t.length;for(const s of t)s.BLt();const s=[...this.children()];for(const t of s)t.BLt()}QDt(){this.WFt&&(this.WFt.length=0),this.WFt=null,this.VFt=null;const t=this.hH();t&&t.QDt(),this.YDt=-1}SH(){return null!==this.hH()}hH(){const t=this.JDt;return null!==t?t.hH():null}aH(){let t=this;for(;t.SH();)t=t.hH();return t}*lH(){let t=this.hH();for(;t;)yield t,t=t.hH()}rFt(t){return this.o6().includes(t)}o4(){const t=this.JDt;return null!==t&&t.o4()}o6(){const t=this.JDt;return null!==t?t.o6():mT}children(){return this.o6()}*pH(){for(const t of this.children())yield t,yield*t.pH()}cH(){return this.o6().length}dGt(){return[...this.pH()].length}dH(t){const s=this.o6();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}aFt(t){if(!t)return NaN;const s=this.o6();if(!s)return NaN;for(let e=0;e<s.length;e++)if(t===s[e])return e;return NaN}$Lt(t){this.JDt||(this.JDt=eT.Hr(eT.l6,this)),t&&this.JDt.HFt(t)}Unt(){return this.JDt}KDt(){this.JDt&&(this.JDt.qr(),this.JDt=null)}OLt(t){t?(t.$Lt(null),this.$Lt(t)):(this.JDt&&this.JDt.HFt(null),this.o4()||this.KDt())}ELt(t){if(!this.SH())return!1;const s=this.hH();return s===t||s.ELt(t)}ALt(t){if(this.rFt(t))return!0;for(const s of this.o6())if(s.ALt(t))return!0;return!1}FLt(t){this.JDt.o6().push(t)}DLt(t){const s=this.JDt.o6(),e=s.indexOf(t);-1!==e&&s.splice(e,1),0!==s.length||this.SH()||this.KDt(),t.o4()||t.KDt()}uFt(){const t=zT.get(this);return t?t.eLt:null}WLt(){const t=zT.get(this);return t?t.iLt:NaN}h4(){const t=HT.get(this);return eT.Ze(t)?t:NaN}VLt(t){HT.set(this,t)}jLt(){this.bLt(524288,!0),this.rLt()}rLt(){if(!gT)return;const t=this.Bc.gM();let s;this.zDt&&t.Rv(this.zDt),s=524288&this.Txt?t.fv()||"<point>":t.lv()||"<default>",this.zDt=t.Gv(s,this.Xj(),this.UDt,this.tT(),this.ULt()?1:0,0)}V3(){return this.zDt}E1(){return this.OM===cT}NM(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.Xj()!==t&&(this.Txt=-2080374785&this.Txt|t<<26,this.rLt())}Xj(){return(2080374784&this.Txt)>>26}WB(t,s){const e=s&&this.IDt!==t;e&&this.l1(),this.mpt.aOt(this,this.IDt,t),this.IDt=t,e&&this.zLt(),0!==this.tT()&&this.IDt.c1()}kB(){return this.IDt}mB(){return this.kB().mB()}d1(t){this.PDt=0|t}NB(){return this.IDt.P2(),this.PDt}O2(t){this.RDt=0|t}dY(){return this.IDt.A2(),this.RDt}uQ(){return this.PDt}bLt(t,s){s?this.Txt|=t:this.Txt&=~t}vj(){return!!(1&this.Txt)}wj(t){if(this.bLt(1,t),this.o4())for(const s of this.o6())s.LH()&&s.wj(t)}iH(){return!!(8&this.Txt)}rH(t){t=!!t,this.iH()!==t&&(this.bLt(8,t),t?this.Tz():this.HLt())}qLt(t,s){if(this.bLt(32,t),this.jDt&&this.jDt.clear(),s.trim()){this.jDt||(this.jDt=new Set);for(const t of s.split(" "))t&&this.jDt.add(t.toLowerCase())}else this.jDt=null}JLt(t){const s=!!(32&this.Txt),e=this.jDt;if(!t||!e)return!s;for(const i of e)if(t.has(i))return s;return!s}Tz(){if(this.Txt|=65554,this.mpt.nOt(!0),this.Bc.jB(),this.IDt.U0()&&(this.Nz(this.kDt,this.NDt,!0),this.Txt&=-3,this.zLt()),4&this.Txt&&this.fe.Sf().dispatchEvent(aT),null!==this.JDt){const t=this.JDt.o6();for(let s=0,e=t.length;s<e;++s)t[s].Tz()}}Nz(t,s,e){const i=this.YM(),r=this.KM(),n=this.jg(),h=this.Qg(),o=this.FV();t.za(i-this.DDt*n,r-this.LDt*h,n,h),e&&this.HH()&&this.YLt(t),0===o?s.Xl(t):(t.offset(-i,-r),s.Kl(t,this.yCt(),this.gCt()),s.offset(i,r),s.Ql(t)),t.normalize()}XLt(){const t=this.Txt;2&t&&(this.Nz(this.kDt,this.NDt,!0),this.Txt=-3&t)}Bz(){return this.XLt(),this.kDt}Wz(){return this.XLt(),this.NDt}ZLt(t){const s=this.YM(),e=this.KM(),i=Math.round(s)-s,r=Math.round(e)-e;return 0===i&&0===r?t:(oT.S(t),oT.offset(i,r),oT)}KLt(t){this.kDt.S(t),this.NDt.Xl(this.kDt),this.Txt&=-3,this.oOt(),this.zLt()}QLt(t){this.bLt(4,t)}tkt(){return!!(4&this.Txt)}I3(t,s,e){return s&&0!==this.O3()?this.A3(this.kB().R3()):0===this.tT()||e?t.Tl(this.Bz()):this.skt()}skt(){const t=this.kB(),s=this.Lz();return!(s>=t.Z1())&&(t.Y1(s,hT),hT.Tl(this.Bz()))}A3(t){const s=this.Bz(),e=s.Qa(),i=s.sl(),r=s.tl(),n=s.el(),h=this.Lz(),o=h+this.O3();return t.Xw(e,r,h,i,n,o)}jz(){const t=this.kB();if(t.u2())return this.A3(t.R3());{const s=t.mB();return this.I3(t.tU(),s._3(),s.lj())}}N3(t){this.bLt(1048576,t)}L3(t){this.bLt(2097152,t)}ekt(){return!!(1048576&this.Txt)}ikt(){return!!(2097152&this.Txt)}rkt(t){(t=!!t)!==this.ULt()&&(this.bLt(16777216,t),this.rLt())}ULt(){return!!(16777216&this.Txt)}nkt(t){this.WDt=t,this.hkt(),this.HH()&&(this.XDt.okt=null)}akt(){return this.WDt}lkt(){return null!==this.WDt||this.HH()}ukt(){return this.ckt(this.jg(),this.Qg(),this.FV(),this.yCt(),this.gCt())}fkt(t,s,e){let i=0,r=1;return 0!==e&&(i=Math.sin(e),r=Math.cos(e)),this.ckt(t,s,e,i,r)}ckt(t,s,e,i,r){let n=this.VDt;null===n&&(n={ZDt:eT.Hr(eT.lu),width:NaN,height:NaN,angle:NaN},this.VDt=n);const h=n.ZDt;if(n.width===t&&n.height===s&&n.angle===e)return h;const o=this.WDt;if(this.HH()){const e=this.Iz(),n=this.Az(),a=this.qH();let l=this.XDt.okt;l||(o?(uT.S(o),uT.offset(e,n)):uT.yu(),l=a.JT(uT),this.XDt.okt=l),a.YT(l,h),h.offset(-e,-n),h.bu(t,s,i,r)}else o?(h.S(o),h.bu(t,s,i,r)):h.vu(this.Wz(),-this.YM(),-this.KM());return n.width=t,n.height=s,n.angle=e,h}hkt(){this.dkt(!0);const t=this.VDt;null!==t&&(t.width=NaN)}$H(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.PJ().HW().FW())throw new Error("object does not support mesh");this.VH(),this.XDt={pkt:eT.Hr(eT.Nw.dT,t,s),mkt:eT.Hr(eT.Nw.dT,t,s),okt:null}}HH(){return null!==this.XDt}qH(){if(!this.HH())throw new Error("no mesh");return this.XDt.pkt}gkt(){if(!this.HH())throw new Error("no mesh");return this.XDt.mkt}ykt(t){this.bLt(65536,t)}wkt(){return!!(65536&this.Txt)}dkt(t){this.bLt(131072,t)}Skt(){return!!(131072&this.Txt)}YLt(t){const s=this.XDt.pkt,e=Math.min(s.ET(),0),i=Math.min(s.OT(),0),r=Math.max(s.FT(),1),n=Math.max(s.DT(),1),h=t.width(),o=t.height();t.offsetLeft(e*h),t.offsetTop(i*o),t.ll((r-1)*h),t.ul((n-1)*o),this.nC=s.LT()}VH(){this.XDt&&(this.XDt.pkt.qr(),this.XDt.mkt.qr(),this.XDt=null,this.hkt())}UH(t,s,e){t=Math.floor(t),s=Math.floor(s);const i=e.mode||"absolute";if(!pT.has(i))throw new Error("invalid mode");const r="relative"===i;let n=e.x,h=e.y;const o=e.Wj;let a="number"==typeof e.JH?e.JH:r?0:-1,l="number"==typeof e.YH?e.YH:r?0:-1;if(!this.HH())return!1;const u=this.qH(),c=u.NT(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.tT()!==o&&(c.sT(o),f=!0),r&&(n+=t/(u._T()-1),h+=s/(u.IT()-1)),-1!==a||r?(r&&(a+=t/(u._T()-1)),a=eT.Kr(a,0,1)):a=c.eT(),-1!==l||r?(r&&(l+=s/(u.IT()-1)),l=eT.Kr(l,0,1)):l=c.rT(),c.YM()===n&&c.KM()===h&&c.eT()===a&&c.rT()===l?f:(c.XM(n),c.QM(h),c.iT(a),c.nT(l),this.hkt(),!0)}zOt(){return this.fe.zOt()}nH(t,s){return!!this.Bz().Cl(t,s)&&!!this.Wz().Cl(t,s)&&(this.zOt()?this.fe.eq().PPt(t,s):!this.lkt()||this.ukt().Cl(t-this.YM(),s-this.KM()))}vkt(){return!!(16&this.Txt)}oOt(){if(!this.vkt()||!this.iH()||256&this.Txt)return;const t=this.Bz(),s=this.mpt.rOt(),e=this.BDt;if(hT.set(s._Q(t.Qa()),s.IQ(t.tl()),s._Q(t.sl()),s.IQ(t.el())),e.equals(hT))return;const i=this.fe;e===dT?(s.PQ(i,null,hT),this.BDt=eT.Hr(eT.Rect,hT)):(s.PQ(i,e,hT),e.S(hT)),this.Txt&=-17}bkt(){this.Txt|=16}HLt(){const t=this.BDt;t!==dT&&(this.mpt.rOt().PQ(this.fe,t,null),this.BDt=dT)}zLt(){const t=this.kB();if(!t.U0()||256&this.Txt)return;const s=t.F1(),e=this.Bz(),i=this.$Dt;if(hT.set(s._Q(e.Qa()),s.IQ(e.tl()),s._Q(e.sl()),s.IQ(e.el())),i.equals(hT))return;const r=this.fe;i===fT?(s.PQ(r,null,hT),this.$Dt=eT.Hr(eT.Rect,hT)):(s.PQ(r,i,hT),i.S(hT)),t.D1()}l1(){const t=this.$Dt;t!==fT&&(this.kB().F1().PQ(this.fe,t,null),this.$Dt=fT)}R2(){return this.$Dt}Yz(){const t=this.fe,s=this.IDt,e=s.$B();e.length&&e.at(-1)===t||(s.a1(t,!1),s.n1(t,!1),this.Bc.jB())}Zz(){const t=this.fe,s=this.IDt,e=s.$B();e.length&&e[0]===t||(s.a1(t,!1),s.o1(t,!1),this.Bc.jB())}Qz(t){const s=this.fe,e=this.IDt;if(e.mB()!==t.mB())throw new Error("layer from different layout");t!==e&&(e.a1(s,!0),this.WB(t),t.n1(s,!0),this.Bc.jB())}sH(t,s){const e=this.fe;let i=!1;const r=this.IDt;if(t.CU()===e.CU())return;const n=t.LB();if(!n)throw new Error("expected world instance");const h=n.kB();r.Tk()!==h.Tk()&&(r.a1(e,!0),this.WB(h),h.n1(e,!0),i=!0);const o=h.L2(e,t,!!s);(i||o)&&this.Bc.jB()}bz(){return this.HDt}Mkt(t){this.bLt(64,t)}z2(){return!!(64&this.Txt)}i4(t,s=null){const e={x:this.YM(),y:this.KM(),w:this.jg(),h:this.Qg(),l:this.kB().I1(),zi:this.NB()};0!==this.tT()&&(e.ze=this.tT()),0!==this.FV()&&(e.a=this.oLt()),this.E1()||(e.c=this.OM.toJSON()),.5!==this.Iz()&&(e.oX=this.Iz()),.5!==this.Az()&&(e.oY=this.Az()),0!==this.Xj()&&(e.bm=this.Xj()),this.vj()||(e.v=this.vj()),this.iH()||(e.ce=this.iH()),this.tkt()&&(e.be=this.tkt()),this.HDt&&(e.fx=this.HDt.i4());const i=!!(32&this.Txt);return i&&(e.sfi=i),this.jDt&&(e.sft=[...this.jDt].join(" ")),this.JDt&&"visual-state"!==t&&(e.sgi=this.JDt.i4(t,s),zT.has(this)&&(e.sgcd=zT.get(this).eLt,e.sgzid=zT.get(this).iLt)),this.HH()&&(e.mesh=this.qH().aT()),e}aDt(){return{x:this.Ra,y:this.Aa,z:this.FM,w:this.ADt,h:this.EDt,a:this.Io,sgi:this.Unt()?this.Unt().iDt():null}}mDt(t){t&&(this.Ra=t.x,this.Aa=t.y,this.FM=t.z,this.ADt=t.w,this.EDt=t.h,this.Io=t.a,t.sgi&&this.Unt()&&this.Unt().r4(t.sgi),this.cLt(),this.Tz())}yOt(){this.QDt(),this.kLt(),this.$Lt(null),this.JDt&&this.JDt.uDt(this.WFt,this.VFt)}c8(t){"visual-state"!==t&&this.kLt()}d8(t,s="full",e=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==s){if(256&this.Txt)return;this.JDt.d8(t.sgi,e)}}RFt(t,s="full",e=null){if("visual-state"!==s)if(256&this.Txt)this.QDt();else{if(t.hasOwnProperty("sgi"))this.JDt.uDt(null,null,t.sgi,e);else if(e?.t_t&&this.WFt)for(const t of this.WFt)t.SY()||this.Bc.wU(t);this.QDt(),this.Tz()}}r4(t,s,e=null){if(gT=!1,this.XM(t.x),this.QM(t.y),this.Xg(t.w),this.Ug(t.h),this.d1(t.zi),this.sT(t.hasOwnProperty("ze")?t.ze:0),this.OV(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?lT.Sa(t.c):t.hasOwnProperty("o")?(lT.ko(this.OM),lT.a=t.o):lT.Po(1,1,1,1),this.tLt(lT),this.Pz(t.hasOwnProperty("oX")?t.oX:.5),this.Ez(t.hasOwnProperty("oY")?t.oY:.5),this.NM(t.hasOwnProperty("bm")?t.bm:0),this.wj(!t.hasOwnProperty("v")||t.v),this.rH(!t.hasOwnProperty("ce")||t.ce),this.QLt(!!t.hasOwnProperty("be")&&t.be),this.qLt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.HDt&&t.hasOwnProperty("fx")&&this.HDt.r4(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==s){this.$Lt(null);const s=this.JDt,e=t.sgi;s.r4(e),s.uDt(this.WFt,this.VFt),this.Tkt(t.sgcd,t.sgzid)}if(t.hasOwnProperty("mesh")){const s=t.mesh;this.$H(s.cols,s.rows),this.qH().lT(s)}else this.VH();this.Tz(),gT=!0,this.rLt(),"visual-state"!==s&&this.Bc.xkt(this.PJ(),t)}Tkt(t,s){t&&eT.Ze(s)&&zT.set(this,{eLt:t,iLt:s})}}}{const qT=self._s;qT.XAt=class extends qT.Ur{constructor(t,s){super();const e=t.l$(),i=e.Tbt(s[1]);e.Ckt().xRt(i),this.Bc=e,this.mpt=t,this.iRt=qT.mW.wq(i),this.VIt=null,this.Gkt=null,this._At=i.Instance,this.qQ=s[2],this.Xr=s[0],this.oMt=this.Bc.Ugt(s[3]);const r=this.iRt.sxt();if(r<2&&(this.VIt=qT.Hr(i.dEt,this),!(this.VIt instanceof qT.eRt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(qT.mW.xIt(this,r),r>=2){const t=i.dEt??globalThis.AY;if(this.Gkt=new t,!(this.Gkt instanceof globalThis.AY))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.Gkt=new globalThis.gq;qT.mW.CIt(r),this.vIt()}static UC(t,s){return qT.Hr(qT.XAt,t,s)}qr(){this.Bc=null,this.iRt=null,this.VIt&&(this.VIt.qr(),this.VIt=null),this._At=null}Kxt(){return this.VIt}vIt(){this.VIt?this.VIt.vIt():this.Gkt&&this.Gkt.zJ()}l$(){return this.Bc}fU(){return this.mpt}lq(){return this.iRt}FEt(){return this._At}Rc(){return this.Xr}I1(){return this.qQ}cq(){return this.Gkt}Ugt(){return this.oMt}}}{const JT=self._s,YT=self.oq;JT.ROt=class extends JT.Ur{constructor(t){super(),this.Bc=t.runtime,this.BMt=t.uq,this.iRt=this.BMt.lq(),this.fe=t.pq,this.Aw=t.index,this.MOt=null,this.TOt=null,this.iRt.n1(this.fe)}qr(){this.TOt&&(this.TOt.yU(),this.TOt=null),this.iRt.a1(this.fe),this.MOt&&(this.MOt.qr(),this.MOt=null),this.Bc=null,this.BMt=null,this.iRt=null,this.fe=null}REt(t){if(this.MOt)throw new Error("already got sdk instance");if(this.lq().sxt()<2){if(this.MOt=JT.Hr(this.BMt.FEt(),this,t),!(this.MOt instanceof JT.rRt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.lq().bIt();this.TIt(s.Instance,t)}}eq(){return this.MOt??this.TOt}mq(){return this.fe}l$(){return this.Bc}fq(){return this.BMt}lq(){return this.iRt}Jht(){return this.Aw}oRt(){this.MOt?this.MOt.oRt():this.TOt.FY()}cRt(t,s){this.MOt&&this.MOt.cRt(t,s)}PFt(){return this.MOt?this.MOt.lPt():this.TOt.lz()}aT(t="full"){return this.MOt?this.MOt.aT(t):this.TOt.uz(t)}lT(t,s="full"){if(this.MOt)return this.MOt.lT(t,s);this.TOt.cz(t,s)}static _kt(t,s,e){const i=globalThis.EY;let r,n;r=s instanceof i?t.YV(s):s.hRt(),n=e instanceof i?t.YV(e):e.hRt();const h=r.mq(),o=n.mq(),a=h.fU().Tk(),l=o.fU().Tk();if(a!==l)return a-l;const u=h.gFt(),c=o.gFt();return u!==c?u-c:r.Jht()-n.Jht()}TIt(t,s){const e=YT,i=t??this.MOt.bIt(),r=i||e,n=this.lq().sxt();if(JT.mW.xIt(this,n),JT.mW.CRt(s),this.TOt=new r,JT.mW.GRt(),JT.mW.CIt(n),i&&!(this.TOt instanceof e))throw new TypeError(`script interface class '${i.name}' does not extend the right base class '${e.name}'`);return this.TOt}zIt(){return this.TOt||this.TIt()}dPt(){return!!this.TOt}}}{const XT=self._s;XT.P0=class extends XT.Ur{constructor(t,s){super(),this.gT=t,this.Ikt=[],this.Pkt=[],this.Rkt=new Map,this.Akt=[],this.Ekt=[],this.Okt=new Set,this.nM=!0;for(const t of s){const s=XT.Hr(XT.Fkt,this,t,this.Ikt.length);this.Ikt.push(s),this.Rkt.set(s.Rc().toLowerCase(),s),t.length>=3&&this.Akt.push(this.Dkt(s,t[2]))}this.l$().Lkt(this)}qr(){this.l$().kkt(this);for(const t of this.Ekt)t.qr();XT.bh(this.Ekt),XT.bh(this.Ikt),XT.bh(this.Pkt),this.Rkt.clear(),XT.bh(this.Akt),this.gT=null}Nkt(t){this.Okt.add(t)}Bkt(t){this.Okt.delete(t)}$kt(t){t.sv()&&(this.Ekt=this.Ikt.map(t=>{const s=t.HG();return s.Wkt()>0?XT.Hr(XT.Nw.Vkt,s):null}),this.jkt());for(const s of this.Okt)s.$kt(t)}IEt(t){if(t.length){this.Ikt=t.concat(this.Ikt);for(const s of t)this.Rkt.set(s.Rc().toLowerCase(),s);for(let t=0,s=this.Ikt.length;t<s;++t)this.Ikt[t].M1(t)}}Dkt(t,s){t.Ukt(s[0]);const e=s.slice(1);for(let t=0,s=e.length;t<s;++t){const s=e[t];if(Array.isArray(s)){const i=XT.Hr(XT.xo);i.Sa(s),e[t]=i}}return e}PT(){return this.gT}l$(){return this.gT.l$()}bq(){XT.bh(this.Pkt);let t=!0;for(const s of this.Ikt)s.uSt()&&(this.Pkt.push(s),s.HG().MM()||(t=!1));this.nM=t}IV(){return this.Ikt}VEt(){return this.Ikt.length>0}Lnt(t){return this.Rkt.get(t.toLowerCase())||null}zkt(t){if((t=Math.floor(+t))<0||t>=this.Ikt.length)throw new RangeError("invalid effect type index");return this.Ikt[t]}Sq(t){return this.zkt(t).uSt()}vq(t,s){this.zkt(t).Ukt(s)}O1(){return this.Pkt}z2(){return this.Pkt.length>0}MM(){return this.nM}Dnt(t){return this.Akt[t]}O0(t){return t<this.Ekt.length?this.Ekt[t]:this.Akt[t]}Mq(t,s){if(t<0||t>=this.Akt.length)return null;const e=this.Akt[t];return s<0||s>=e.length?null:e[s]}Tq(t,s,e){if(t<0||t>=this.Akt.length)return!1;const i=this.Akt[t];if(s<0||s>=i.length)return!1;const r=i[s];if(r instanceof XT.xo){if(r.Ho(e))return!1;r.ko(e)}else{if(r===e)return!1;i[s]=e}return t<this.Ekt.length&&this.Ekt[t].Hkt(s,e),!0}jkt(){const t=this.Akt,s=this.Ekt;for(let e=0,i=Math.min(t.length,s.length);e<i;++e){const i=s[e],r=t[e];for(let t=0,s=r.length;t<s;++t)i.Hkt(t,r[t])}}static qkt(t){return t&&t instanceof XT.xo?{t:"color",v:t.toJSON()}:t}static Jkt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const s=XT.Hr(XT.xo);return s.Sa(t.v),s}throw new Error("invalid effect parameter type")}return t}static Ykt(t){return t.map(XT.P0.qkt)}static Xkt(t){return t.map(XT.P0.Jkt)}aT(){return this.Ikt.map(t=>({name:t.Rc(),active:t.uSt(),params:XT.P0.Ykt(this.Akt[t.Tk()])}))}lT(t){for(const s of t){const t=this.Lnt(s.name);t&&(t.Ukt(s.active),this.Akt[t.Tk()]=XT.P0.Xkt(s.params))}this.bq(),this.jkt()}}}{const ZT=self._s;ZT.Fkt=class extends ZT.Ur{constructor(t,s,e){super(),this.I0=t,this.Wc=s[0],this.Xr=s[1],this.Aw=e,this.RM=null,this.Bf=!0}qr(){this.I0=null,this.RM=null}_Et(t){const s=ZT.Hr(ZT.Fkt,t,[this.Wc,this.Xr],-1);return s.RM=this.RM,s.Bf=this.Bf,s}$kt(t){const s=t.av(this.Wc);if(!s)throw new Error("failed to find shader program '"+this.Wc+"'");this.RM=s}_V(){return this.I0}Rc(){return this.Xr}M1(t){this.Aw=t}Tk(){return this.Aw}PT(){return this.I0.PT()}l$(){return this.I0.l$()}Ukt(t){this.Bf=!!t}uSt(){return this.Bf}HG(){return this.RM}Zkt(){const t=[];for(let s=0,e=this.RM.qG();s<e;++s){const e=this.RM.JG(s);if("float"===e||"percent"===e)t.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");t.push(ZT.Hr(ZT.xo,1,1,1,1))}}return t}}}{const KT=self._s;KT.qDt=class extends KT.Ur{constructor(t,s){super(),this.fe=t,this.Kkt=s,this.I0=t.fU()._V(),this.Qkt=!0,this.D0=!0,this.tNt=!1,this.sNt=!1,this.eNt=!1,this.iNt=!1,this.Sk=KT.Hr(KT.Nw.aD,t.l$().GB().R0(),{ZF:(t,s)=>{const e=s.ck(),i=e.LB();t.BM(i.A0()),t.Uv(i.Lz()),e.zT(t),t.Uv(0)},KF:t=>{const s=t.xPt(),[e,i]=t.TPt();return{ek:s,ik:e,rk:i}},QF:t=>this.O0(t)}),this.rNt=[],this.Pkt=[],this.nM=!0,this.Akt=[],this.Ekt=[],this.$kt(t.l$().gM());for(let t=0,s=this.I0.IV().length;t<s;++t)this.rNt.push(!0);this.bq(),this.I0.Nkt(this)}qr(){this.I0.Bkt(this);for(const t of this.Ekt)t&&t.qr();KT.bh(this.Ekt),this.Sk.qr(),this.Sk=null,KT.bh(this.rNt),KT.bh(this.Pkt),KT.bh(this.Akt),this.fe=null,this.I0=null}$kt(t){t.sv()&&(this.Ekt=this.I0.IV().map(t=>{const s=t.HG();return s.Wkt()>0?KT.Hr(KT.Nw.Vkt,s):null}))}sLt(t){let s=0;for(const e of t)this.Akt.push(this.Dkt(s,e)),++s;this.jkt(),this.bq()}Dkt(t,s){this.rNt[t]=s[0];const e=s.slice(1);for(let t=0,s=e.length;t<s;++t){const s=e[t];if(Array.isArray(s)){const i=KT.Hr(KT.xo);i.Sa(s),e[t]=i}}return e}kOt(){for(const t of this.I0.IV())this.Akt.push(t.Zkt());this.jkt()}PT(){return this.gT}_V(){return this.I0}Mk(){return this.A1(),this.Sk}l$(){return this.fe.l$()}bq(){KT.bh(this.Pkt);const t=this.Kkt,s=this.I0.IV(),e=this.Pkt,i=this.rNt;let r=!0;for(let t=0,n=s.length;t<n;++t)if(i[t]){const i=s[t];e.push(i),i.HG().MM()||(r=!1)}this.nM=r,t.Mkt(!!e.length),this.Qkt=!0}A1(){const t=this.fe,s=this.Kkt,e=s.E1(),i=t.HW().RW(),r=0!==s.FV()||0!==s.kB().FV()||s.jg()<0||s.Qg()<0,n=t._Pt(),h=t.bM();(this.Qkt||e!==this.D0||i!==this.tNt||r!==this.sNt||n!==this.eNt||h!==this.iNt||this.Sk.tL())&&(this.Sk.sL(this.Pkt.map(t=>t.HG()),{sD:this.Pkt.map(t=>t.Tk()),eD:!e||h,rD:i,nD:n,hD:r}),this.Qkt=!1,this.D0=e,this.tNt=i,this.sNt=r,this.eNt=n,this.iNt=h)}O1(){return this.Pkt}Dnt(t){return this.Akt[t]}O0(t){return t<this.Ekt.length?this.Ekt[t]:this.Akt[t]}Mq(t,s){if(t<0||t>=this.Akt.length)return null;const e=this.Akt[t];return s<0||s>=e.length?null:e[s]}Tq(t,s,e){if(t<0||t>=this.Akt.length)return!1;const i=this.Akt[t];if(s<0||s>=i.length)return!1;const r=i[s];if(r instanceof KT.xo){if(r.Ho(e))return!1;r.ko(e)}else{if(r===e)return!1;i[s]=e}return t<this.Ekt.length&&this.Ekt[t].Hkt(s,e),!0}jkt(){const t=this.Akt,s=this.Ekt;for(let e=0,i=s.length;e<i;++e){const i=s[e],r=t[e];for(let t=0,s=r.length;t<s;++t)i.Hkt(t,r[t])}}MM(){return this.nM}nNt(){return this.Pkt.some(t=>t.HG().CM())}Sq(t){return this.rNt[t]}vq(t,s){this.rNt[t]=!!s}IV(){return this.I0.IV()}i4(){return this.I0.IV().map(t=>({name:t.Rc(),active:this.rNt[t.Tk()],params:KT.P0.Ykt(this.Akt[t.Tk()])}))}r4(t){for(const s of t){const t=this.I0.Lnt(s.name);t&&(this.rNt[t.Tk()]=s.active,this.Akt[t.Tk()]=KT.P0.Xkt(s.params))}this.bq(),this.jkt()}}}{const QT=self._s,tx=[],sx=[],ex=[],ix=QT.Hr(QT.lu),rx=QT.Hr(QT.lu),nx=QT.Hr(QT.Pl),hx=QT.Hr(QT.Rect),ox=QT.Hr(QT.Rect);let ax=null,lx=null,ux=null;QT.hNt=class extends QT.Ur{constructor(t){super(),this.Bc=t,this.oNt=0,this.aNt=0,this.lNt=[],this.uNt=0,this.cNt=0,this.fNt=0,this.dNt=0,this.pNt=new self.I$(this)}qr(){this.Bc=null}l$(){return this.Bc}Rk(){return this.pNt}mNt(){this.cNt=this.uNt,this.uNt=0,this.dNt=this.fNt,this.fNt=0}gNt(){return this.cNt}yNt(){return this.dNt}wNt(t,s){const e=t.LB(),i=s.LB();e&&i&&e.iH()&&i.iH()&&this.lNt.push([t,s])}tGt(t,s,e){for(const[i,r]of this.lNt){let n=null;if(t===i)n=r;else{if(t!==r)continue;n=i}n.lGt(s)&&(e.includes(n)||e.push(n))}}sGt(t,s){if(!this.lNt.length)return!1;for(const[e,i]of this.lNt)if(t===e&&s===i||t===i&&s===e)return!0;return!1}SNt(){QT.bh(this.lNt)}R$(t,s){if(!t||!s||t===s)return!1;const e=t.LB(),i=s.LB();if(!e.iH()||!i.iH())return!1;this.uNt++;const r=e.kB(),n=i.kB();return r.C2(n)?this.vNt(e,i):this.bNt(e,i)}vNt(t,s){if(!t.Bz().Tl(s.Bz()))return!1;if(this.fNt++,!t.Wz().su(s.Wz()))return!1;if(t.zOt()&&s.zOt())return!1;if(t.zOt())return this.MNt(t,s);if(s.zOt())return this.MNt(s,t);if(!t.lkt()&&!s.lkt())return!0;const e=t.ukt(),i=s.ukt();return e.Mu(i,s.YM()-t.YM(),s.KM()-t.KM())}bNt(t,s){const e=t.zOt(),i=s.zOt();if(e&&!i)return this.TNt(t,s);if(i&&!e)return this.TNt(s,t);if(i||e)return!1;{const e=t.kB(),i=s.kB();ix.S(t.ukt()),rx.S(s.ukt());const r=ix.pu();for(let s=0,i=r.length;s<i;s+=2){const i=s+1,n=r[s],h=r[i],[o,a]=e.rU(n+t.YM(),h+t.KM());r[s]=o,r[i]=a}const n=rx.pu();for(let t=0,e=n.length;t<e;t+=2){const e=t+1,r=n[t],h=n[e],[o,a]=i.rU(r+s.YM(),h+s.KM());n[t]=o,n[e]=a}return ix.wu(),rx.wu(),this.fNt++,ix.Mu(rx,0,0)}}TNt(t,s){const e=t.kB(),i=s.kB();ax||(ax=QT.Hr(QT.lu)),lx||(lx=QT.Hr(QT.Rect)),ux||(ux=QT.Hr(QT.Pl));const r=s.YM(),n=s.KM(),[h,o]=i.rU(r,n),[a,l]=e.eU(h,o),u=a-r,c=l-n;if(lx.S(s.Bz()),lx.offset(u,c),!t.Bz().Tl(lx))return!1;if(ux.S(s.Wz()),ux.offset(u,c),this.fNt++,!t.Wz().su(ux))return!1;ax.S(s.ukt());const f=ax.pu();for(let t=0,s=f.length;t<s;t+=2){const s=t+1;f[t]+=u,f[s]+=c}return ax.wu(),this.MNt(t,s,a,l,ax,lx,ux)}MNt(t,s,e,i,r,n,h){const o=void 0!==n?n:s.Bz(),a=t.YM(),l=t.KM(),u=t.PJ().eq(),c=void 0!==e?e:s.YM(),f=void 0!==i?i:s.KM(),d=s.lkt(),p=void 0!==h?h:s.Wz(),m=sx;u.xNt(o,m);for(let t=0,e=m.length;t<e;++t){const e=m[t],i=e.CNt();if(this.uNt++,o.xl(i,a,l)&&(nx.Xl(i),nx.offset(a,l),nx.su(p)))if(d){const t=void 0!==r?r:s.ukt();let n=c,h=f;void 0!==r&&(n=s.YM(),h=s.KM());const o=e.GNt();if(o){if(this.fNt++,o.Mu(t,n-(a+i.Qa()),h-(l+i.tl())))return QT.bh(m),!0}else if(ix.vu(nx,0,0),ix.Mu(t,n,h))return QT.bh(m),!0}else{const t=e.GNt();if(!t)return QT.bh(m),!0;if(ix.vu(p,0,0),t.Mu(ix,-(a+i.Qa()),-(l+i.tl())))return QT.bh(m),!0}}return QT.bh(m),!1}_Nt(t,s,e){const i=t.rV(),r=this.Bc.pN();if(!r)throw new Error("cannot call outside event");const n=r.Upt(),h=new QT.INt;if(i._pt()){e||(i.Fpt(!1),QT.bh(i.Dpt())),n&&QT.bh(i.Lpt());for(const r of t.iV()){const t=r.LB(),o=t.kB();let a=!1;if(h.Mj(o)&&t.jz()&&(a=s.some(([s,e])=>{const[i,r]=h.eU(o,s,e,t.Lz());return t.nH(i,r)})),a){if(e)return!1;i.Ept(r)}else n&&i.Opt(r)}}else{let t,o=!1;n&&!r.Ovt(this.Bc.Dgt())?this.Bc.iCt()&&!i.Lpt().length&&i.Dpt().length?t=i.Dpt():(t=i.Lpt(),o=!0):t=i.Dpt();let a=0;for(let r=0,l=t.length;r<l;++r){const l=t[r],u=l.LB(),c=u.kB();let f=!1;if(h.Mj(c)&&u.jz()&&(f=s.some(([t,s])=>{const[e,i]=h.eU(c,t,s,u.Lz());return u.nH(e,i)})),f){if(e)return!1;o?i.Ept(l):t[a++]=l}else o?t[a++]=l:n&&i.Opt(l)}e||(t.length=a)}return t.pbt(),h.qr(),!!e||i.Ipt()}PNt(t,s){if(!t)return!0;for(const e of s.lOt())if(!t.C2(e))return!1;return!0}eCt(t,s,e,i){if(s.v1())for(const r of s.TV())this.PNt(t,r)?(r.hOt(),r.rOt().RQ(e,i)):QT.Fr(i,r.iV());else this.PNt(t,s)?(s.hOt(),s.rOt().RQ(e,i)):QT.Fr(i,s.iV())}$$(t,s,e,i){for(const r of s)this.eCt(t,r,e,i)}RNt(t,s,e){const i=this.Bc.IRt();i&&this.$$(t,i.k8(),s,e)}ANt(t,s,e){const i=this.Bc.PRt();i&&this.$$(t,i.k8(),s,e)}JLt(t,s){return t.JOt()&&(!s||s.LB().JLt(t.axt().get("solidTags")))}O$(t){const s=t.LB();this.RNt(s.kB(),s.Bz(),tx);for(const s of tx)if(this.JLt(s,t)&&this.R$(t,s))return QT.bh(tx),s;return QT.bh(tx),null}ENt(t,s){this.RNt(null,t,tx);for(const e of tx)if(this.JLt(e,s)&&this.ONt(t,e))return QT.bh(tx),e;return QT.bh(tx),null}FNt(t,s){let e=null;s&&(e=ex,QT.bh(e));const i=t.LB();this.ANt(i.kB(),i.Bz(),tx);for(const i of tx)if(i.XOt()&&this.R$(t,i)){if(!s)return QT.bh(tx),i;e.push(i)}return QT.bh(tx),e}DNt(t,s,e,i,r){i=i||50;const n=t.LB(),h=n.YM(),o=n.KM();for(let a=0;a<i;++a)if(n.xz(h+s*a,o+e*a),n.Tz(),!this.R$(t,r))return!0;return n.xz(h,o),n.Tz(),!1}LNt(t,s,e,i,r,n){i=i||50;const h=t.LB(),o=h.YM(),a=h.KM();let l=null,u=null;for(let c=0;c<i;++c)if(h.xz(o+s*c,a+e*c),h.Tz(),!this.R$(t,l))if(l=this.O$(t),l)u=l;else if(r&&(l=n?this.R$(t,n)?n:null:this.FNt(t),l&&(u=l)),!l)return u&&this.kNt(t,s,e,u,16,!0),!0;return h.xz(o,a),h.Tz(),!1}NNt(t,s,e,i){i=i||50;const r=t.LB(),n=r.YM(),h=r.KM();let o=null,a=null;for(let l=0;l<i;++l)for(let i=0;i<2;++i){const u=2*i-1;if(r.xz(n+s*l*u,h+e*l*u),r.Tz(),!this.R$(t,o)){if(o=this.O$(t),!o)return a&&this.kNt(t,s*u,e*u,a,16,!0),!0;a=o}}return r.xz(n,h),r.Tz(),!1}kNt(t,s,e,i,r,n){let h=2,o=!1,a=!1;const l=t.LB();let u=l.YM(),c=l.KM();for(;h<=r;){const r=1/h;h*=2,l.Gz(s*r*(o?1:-1),e*r*(o?1:-1)),l.Tz(),this.R$(t,i)||n&&this.O$(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.YM(),c=l.KM())}a&&(l.xz(u,c),l.Tz())}BNt(t,s=100){let e=0;const i=t.LB(),r=i.YM(),n=i.KM();let h=0,o=this.O$(t);if(!o)return!0;for(;e<=s;){let s=0,a=0;switch(h){case 0:s=0,a=-1,e++;break;case 1:s=1,a=-1;break;case 2:s=1,a=0;break;case 3:s=1,a=1;break;case 4:s=0,a=1;break;case 5:s=-1,a=1;break;case 6:s=-1,a=0;break;case 7:s=-1,a=-1}if(h=(h+1)%8,i.xz(Math.floor(r+s*e),Math.floor(n+a*e)),i.Tz(),!this.R$(t,o)&&(o=this.O$(t),!o))return!0}return i.xz(r,n),i.Tz(),!1}$Nt(t,s,e,i){const r=t.LB(),n=r.YM(),h=r.KM(),o=Math.max(10,QT.nn(s,e,n,h)),a=QT.an(s,e,n,h),l=i||this.O$(t);if(!l)return QT.Qr(a+Math.PI);let u=l,c=0,f=0;const d=QT.tn(5);let p;for(p=1;p<36;++p){const n=a-p*d;if(r.xz(s+Math.cos(n)*o,e+Math.sin(n)*o),r.Tz(),!this.R$(t,u)&&(u=i?null:this.O$(t),!u)){c=n;break}}for(36===p&&(c=QT.Qr(a+Math.PI)),u=l,p=1;p<36;++p){const n=a+p*d;if(r.xz(s+Math.cos(n)*o,e+Math.sin(n)*o),r.Tz(),!this.R$(t,u)&&(u=i?null:this.O$(t),!u)){f=n;break}}if(36===p&&(f=QT.Qr(a+Math.PI)),r.xz(n,h),r.Tz(),f===c)return f;const m=QT.ln(f,c)/2;let g;g=QT.cn(f,c)?QT.Qr(c+m+Math.PI):QT.Qr(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),v=Math.sin(g),b=y*S+w*v,M=y-2*b*S,T=w-2*b*v;return QT.an(0,0,M,T)}WNt(t,s,e,i,r){if(!r)return!1;const n=r.LB();return!!n.iH()&&(this.uNt++,hx.set(Math.min(t,e),Math.min(s,i),Math.max(t,e),Math.max(s,i)),!!n.Bz().Tl(hx)&&(r.zOt()?this.VNt(t,s,e,i,r,n):(this.fNt++,!!n.Wz().tu(t,s,e,i)&&(!n.lkt()||n.ukt().tu(n.YM(),n.KM(),t,s,e,i)))))}VNt(t,s,e,i,r,n){const h=n.YM(),o=n.KM(),a=r.eq(),l=sx;ox.set(t,s,e,i),ox.normalize(),a.xNt(ox,l);for(let r=0,n=l.length;r<n;++r){const n=l[r],a=n.CNt();if(this.uNt++,hx.xl(a,h,o)&&(nx.Xl(a),nx.offset(h,o),nx.tu(t,s,e,i))){const r=n.GNt();if(!r)return QT.bh(l),!0;if(this.fNt++,r.tu(h+a.Qa(),o+a.tl(),t,s,e,i))return QT.bh(l),!0}}return QT.bh(l),!1}ONt(t,s){if(!s)return!1;const e=s.LB();if(!e.iH())return!1;if(this.uNt++,!e.Bz().Tl(t))return!1;if(s.zOt())return this.jNt(t,s,e);if(this.fNt++,nx.Xl(t),!e.Wz().su(nx))return!1;if(!e.lkt())return!0;const i=ix;i.Xl(t,e.YM(),e.KM());const r=e.ukt();return i.Mu(r,0,0)}jNt(t,s,e){const i=e.YM(),r=e.KM(),n=s.eq(),h=sx;n.xNt(t,h);for(let s=0,e=h.length;s<e;++s){const e=h[s],n=e.CNt();if(this.uNt++,t.xl(n,i,r)){const s=e.GNt();if(!s)return QT.bh(h),!0;if(this.fNt++,ix.Xl(t,0,0),s.Mu(ix,-(i+n.Qa()),-(r+n.tl())))return QT.bh(h),!0}}return QT.bh(h),!1}UNt(t,s){if(!t)return;const e=t.LB();e.iH()&&(this.uNt++,e.Bz().Tl(s.rect)&&(t.zOt()?this.zNt(t,e,s):(this.fNt++,e.lkt()?s.HNt(t,e.YM(),e.KM(),e.ukt()):s.qNt(t,e.Wz()))))}zNt(t,s,e){const i=s.YM(),r=s.KM(),n=sx;t.eq().xNt(e.rect,n);for(let h=0,o=n.length;h<o;h++){const o=n[h],a=o.CNt();if(this.uNt++,e.rect.xl(a,i,r)){const n=o.GNt();this.fNt++,n?e.HNt(t,i+a.Qa(),r+a.tl(),n):e.JNt(t,s.YM(),s.KM(),a)}}QT.bh(n)}D$(t,s){if(t===this.oNt&&s===this.aNt)return;this.oNt=t,this.aNt=s;const e=this.Bc.S1();for(const i of e)if(i.bW()){for(const t of i.eV())t.LB().HLt();i.rOt().YNt(t,s),i.nOt();for(const t of i.eV()){const s=t.LB();s.bkt(),s.oOt()}}}k$(){return[this.oNt,this.aNt]}XNt(t,s){this.oNt=t,this.aNt=s}}}{const cx=self._s;cx.kAt=class extends cx.Ur{constructor(t,s){super(),this.TQ=t,this.xQ=s,this.CQ=cx.Hr(cx.Iu)}qr(){this.CQ.qr(),this.CQ=null}YNt(t,s){if(!this.CQ.Au())throw new Error("grid not empty");this.TQ=t,this.xQ=s}GQ(t,s,e){let i=this.CQ.Hs(t,s);return i||(e?(i=cx.Hr(cx.ZNt,this,t,s),this.CQ.Set(t,s,i),i):null)}_Q(t){const s=Math.floor(t/this.TQ);return isFinite(s)?s:0}IQ(t){const s=Math.floor(t/this.xQ);return isFinite(s)?s:0}PQ(t,s,e){if(s)for(let i=s.Qa(),r=s.sl();i<=r;++i)for(let r=s.tl(),n=s.el();r<=n;++r){if(e&&e.Cl(i,r))continue;const s=this.GQ(i,r,!1);s&&(s.Kf(t),s.Au()&&this.CQ.Eu(i,r))}if(e)for(let i=e.Qa(),r=e.sl();i<=r;++i)for(let r=e.tl(),n=e.el();r<=n;++r)s&&s.Cl(i,r)||this.GQ(i,r,!0).SQ(t)}RQ(t,s){let e=this._Q(t.Qa());const i=this.IQ(t.tl()),r=this._Q(t.sl()),n=this.IQ(t.el());if(isFinite(r)&&isFinite(n))for(;e<=r;++e)for(let t=i;t<=n;++t){const i=this.GQ(e,t,!1);i&&i.bQ(s)}}}}{const fx=self._s;fx.ZNt=class extends fx.Ur{constructor(t,s,e){super(),this.fQ=t,this.Ra=s,this.Aa=e,this.dQ=fx.Hr(fx.Lu)}qr(){this.dQ.qr(),this.dQ=null,this.fQ=null}Au(){return this.dQ.Au()}SQ(t){this.dQ.$u(t)}Kf(t){this.dQ.Eu(t)}bQ(t){fx.Fr(t,this.dQ.Wu())}}}{const dx=self._s,px=1e-6,mx=2;dx.KNt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new dx.Rect,this.QNt=2,this.tBt=null,this.sBt=0,this.eBt=0,this.iBt=0,this.rBt=0,this.nBt=0,this.bt=0,this.hBt=1,this.oBt=0,this.aBt=1,this.lBt=0}uBt(){return this.QNt<1.000001}$f(){this.QNt=2}Set(t,s,e,i){return this.x1=t,this.y1=s,this.x2=e,this.y2=i,this.dx=e-t,this.dy=i-s,this.rect.set(t,s,e,i),this.rect.normalize(),this.QNt=2,this.tBt=null,this.sBt=0,this.eBt=0,this.iBt=0,this.rBt=0,this.nBt=0,this.bt=0,this.hBt=1,this.oBt=0,this.aBt=1,this.lBt=0,this}cBt(){if(!1===this.uBt())return;const t=this.dx*this.QNt,s=this.dy*this.QNt,e=dx.en(t,s),i=t/e,r=s/e;this.bt=e-px,this.rBt=this.x1+i*this.bt,this.nBt=this.y1+r*this.bt,this.sBt=Math.atan2(this.iBt,this.eBt)+Math.PI/2,this.hBt=Math.cos(this.sBt),this.oBt=Math.sin(this.sBt);const n=i*this.hBt+r*this.oBt;if(this.aBt=i-2*this.hBt*n,this.lBt=r-2*this.oBt*n,n>0){const t=Math.PI;this.sBt=dx.Qr(this.sBt+t),this.hBt=-this.hBt,this.oBt=-this.oBt}}fBt(t,s,e,i,r){const n=dx.Jn(this.x1,this.y1,this.x2,this.y2,s,e,i,r);n>=0&&n<this.QNt&&(this.QNt=n,this.tBt=t.CU(),this.eBt=s-i,this.iBt=e-r)}JNt(t,s,e,i){const r=s+i.Qa(),n=s+i.sl(),h=e+i.tl(),o=e+i.el();this.fBt(t,r,h,n,h),this.fBt(t,n,h,n,o),this.fBt(t,n,o,r,o),this.fBt(t,r,o,r,h)}qNt(t,s){const e=s.Bn(),i=s.$n(),r=s.Wn(),n=s.Vn(),h=s.jn(),o=s.Un(),a=s.zn(),l=s.Hn();this.fBt(t,e,i,r,n),this.fBt(t,r,n,h,o),this.fBt(t,h,o,a,l),this.fBt(t,a,l,e,i)}HNt(t,s,e,i){const r=i.pu();for(let i=0,n=r.length;i<n;i+=2){const h=(i+2)%n,o=r[i]+s,a=r[i+1]+e,l=r[h]+s,u=r[h+1]+e;this.fBt(t,o,a,l,u)}}}}{const gx=self._s;gx.INt=class{constructor(){this.dBt=new Map}qr(){for(const t of this.dBt.values())t.pBt.Ru();this.dBt.clear()}mBt(t){let s=this.dBt.get(t);return void 0===s&&(s={bj:null,pBt:new gx.Iu},this.dBt.set(t,s)),s}Mj(t){const s=this.mBt(t);return null===s.bj&&(s.bj=t.Ij()),s.bj}eU(t,s,e,i){if(0!==i)return t.eU(s,e,i);const r=this.mBt(t);let n=r.pBt.Hs(s,e);return void 0===n&&(n=t.eU(s,e,i),r.pBt.Set(s,e,n)),n}}}{const yx=self._s,wx=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Sx=new Set(["high","low"]),vx=self.ls,bx=vx.ds,Mx=vx.ws,Tx=bx.create(),xx=300,Cx=200,Gx=120,_x=8,Ix=yx.Hr(yx.Pl),Px=yx.Hr(yx.Rect),Rx=3e3,Ax=200,Ex=300;yx.gBt=class extends yx.Ur{constructor(t){super(),this.Bc=t,this.yBt=[],this.wBt=!1,this.SBt=null,this.vBt=null,this.bBt=null,this.MBt="high-performance",this.TBt=!1,this.xBt="auto",this.CBt=0,this.GBt=0,this._Bt="",this.IBt=0,this.PBt=0,this.RBt=0,this.ABt=0,this.EBt=0,this.OBt=0,this.nS="normalized",this.FBt=0,this.DBt=1,this.LBt=1e4,this.DS=!0,this.kBt=0,this.OD=0,this.FD=0,this.NBt="letterbox-scale",this.BBt="letterbox-scale",this.$Bt=0,this.WBt=0,this.VBt=bx.create(),this.jBt="high",this.UBt=this.jBt,this.zBt=!1,this.HBt=[],this.qBt=new Set,this.JBt=self.C3_Shaders,this.YBt=yx.Hr(yx.Nw.kF,{OF:()=>[this.o3(),this.a3()],FF:()=>this.XBt(),DF:t=>this.ZBt(t),getTime:()=>this.l$().DN(),LF:()=>this.l$().jB()}),this.KBt=0,this.QBt=0,this.t$t=NaN,this.s$t=null,this.e$t=new Map,this.i$t=NaN,this.r$t=new Map,this.n$t="",this.h$t=1,this.o$t=yx.Hr(yx.Rect),this.a$t="",this.l$t=null,this.u$t=null,this.c$t=0,this.f$t=0,this.d$t=-1,this.p$t=0,this.m$t=t=>this.p$t=t.progress,this.g$t=null,this.y$t={w$t:null,S$t:null,v$t:null},this.b$t=0,this.M$t=0,this.T$t=0,this.x$t="fade-in",this.C$t=null,this.G$t=new Promise(t=>this.C$t=t)}_$t(t){this.MBt=t}I$t(t){this.wBt=!!t}P$t(t){this.nS=t}R$t(){return this.nS}A$t(t){this.FBt=t}E$t(t,s){this.DBt=t,this.LBt=s}O$t(t){this.TBt=!!t}F$t(t){this.xBt=t}async co(t){let s=t.canvas;this.yBt.push({canvas:s,D$t:null}),this.Bc.ZU("runtime","window-resize",t=>this.L$t(t)),this.Bc.ZU("runtime","fullscreenchange",t=>this.k$t(t)),this.Bc.ZU("runtime","fullscreenerror",t=>this.N$t(t)),s.addEventListener("webglcontextlost",t=>this.B$t(t)),s.addEventListener("webglcontextrestored",t=>this.$$t(t)),this.zBt=!!t.isFullscreen,this._Bt=t.cssDisplayMode;const e=navigator.gpu&&this.wBt;let i=!1;if(e)try{await this.W$t(!0)}catch(t){this.V$t("WebGPU",t),this.vBt=null}if(!this.gM())try{await this.j$t(!0)}catch(t){this.V$t("WebGL",t),this.SBt=null}if(this.gM()||(i=!0),!this.gM()&&e)try{await this.W$t(!1)}catch(t){this.V$t("WebGPU",t),this.vBt=null}if(!this.gM())try{await this.j$t(!1)}catch(t){this.V$t("WebGL",t),this.SBt=null}const r=this.gM();if(!r)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");r.$b(i),this.vBt&&(this.vBt.U$t=()=>this.z$t(),this.vBt.H$t=()=>this.q$t()),"normalized"===this.nS?r.ZS():(r.KS(),r.YS(this.FBt)),this.$R(t.windowInnerWidth,t.windowInnerHeight,!0),await this.$kt()}V$t(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async W$t(t){const s={Kw:this.DBt,Qw:this.LBt};let e=!0;"no"===this.xBt?e=!1:"auto"===this.xBt&&(e=yx.Ks.he);const i={powerPreference:this.MBt,depth:this.Bc.l2(),failIfMajorPerformanceCaveat:t,J$t:this.Bc.S3(),Y$t:this.Bc.X$t(),YA:this.Bc.Z$t(),K$t:e};this.vBt=yx.Hr(yx.Nw.Q$t,s),await this.vBt.UC(this.yBt[0].canvas,i)}async j$t(t){const s={alpha:!0,powerPreference:this.MBt,JA:"xbox-uwp-webview2"!==this.Bc.H$(),depth:this.Bc.l2(),YA:this.Bc.Z$t(),failIfMajorPerformanceCaveat:t,Kw:this.DBt,Qw:this.LBt};this.TBt&&(s.XA=1),this.SBt=yx.Hr(yx.Nw.QA,this.yBt[0].canvas,s),await this.SBt.BS()}async tWt(){if(this.JBt){const t=[];for(const[s,e]of Object.entries(this.JBt)){e.src=e.sWt;const i=yx.Nw.eWt.d_(this.vBt.ZC());t.push(this.vBt.nO(Object.assign({WC:i,name:s},e)))}await Promise.all(t)}}async iWt(){if(this.JBt){const t=[];for(const[s,e]of Object.entries(this.JBt)){let i;if(e.rWt&&this.SBt.Rx()>=2)e.src=e.rWt,i=yx.Nw.BC.p_();else{if(!e.nWt)throw new Error(`shader '${s}' does not support WebGL 1`);e.src=e.nWt,i=yx.Nw.BC.d_()}t.push(this.SBt.nO(Object.assign({WC:i,name:s},e)))}await Promise.all(t),this.SBt.hO(),this.SBt.uv()}this.SBt.MF()&&(this.s$t=yx.Hr(yx.Nw.NA,this.SBt))}async $kt(){this.vBt?await this.tWt():this.SBt&&await this.iWt();const t=this.gM();t.Nb(this.DS),t.MF()&&(this.t$t=0);for(const s of this.Bc.hWt()){for(const e of s.IV())e.$kt(t);s.$kt(t),s.bq()}this.bBt=new self.pX(this.Bc,t)}qr(){this.Bc=null,this.SBt=null,this.yBt.length=0}Hk(){return this.Bc.Hk()}L$t(t){const s=this.Bc;if(s.oWt())return;const e=t.devicePixelRatio;this.Hk()&&(self.devicePixelRatio=e),s.aWt(e),this.zBt=!!t.isFullscreen,this._Bt=t.cssDisplayMode,this.$R(t.innerWidth,t.innerHeight),s.jB();const i=new yx.Event("window-resize");i.data=t,s.Sf().Pf(i);const r=new yx.Event("resize");r.lWt=this.iW(),r.uWt=this.nW(),r.cWt=this.oW(),r.fWt=this.lW(),s.IK(r),this.Bc.OB()?.J3(),s.ez()&&(s.Myt()||self.iz.dWt())&&s.cL()}k$t(t){this.zBt=!!t.isFullscreen,this.$R(t.innerWidth,t.innerHeight,!0),this.Bc.jB()}N$t(t){this.zBt=!!t.isFullscreen,this.$R(t.innerWidth,t.innerHeight,!0),this.Bc.jB()}$R(t,s,e=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.CBt===t&&this.GBt===s&&!e)return;this.CBt=t,this.GBt=s;const i=this.pWt();"letterbox-scale"===i?this.mWt(t,s):"letterbox-integer-scale"===i?this.gWt(t,s):"off"===i?this.yWt(t,s):this.wWt(t,s),this.SWt(i);for(const{canvas:t}of this.yBt)t.width=this.RBt,t.height=this.ABt;this.Bc.Vc("canvas","update-size",{marginLeft:this.EBt,marginTop:this.OBt,styleWidth:this.IBt,styleHeight:this.PBt,displayScale:this.vY()});const r=this.gM();r.$R(this.RBt,this.ABt,!0);for(const t of this.HBt)r.gF(t);yx.bh(this.HBt),this.vWt();const n=this.Bc.pB();n.k6(),n.N6()}vWt(){this.gM().tv(this.VBt,this.o3()/this.a3())}l3(){return this.VBt}mWt(t,s){const e=this.Bc.uW(),i=this.Bc.Jk(),r=this.Bc.Xk(),n=i/r;if(t/s>n){const e=s*n;this.IBt=Math.round(e),this.PBt=s,this.EBt=Math.floor((t-this.IBt)/2),this.OBt=0}else{const e=t/n;this.IBt=t,this.PBt=Math.round(e),this.EBt=0,this.OBt=Math.floor((s-this.PBt)/2)}this.RBt=Math.round(this.IBt*e),this.ABt=Math.round(this.PBt*e),this.Bc.bWt(i,r)}gWt(t,s){const e=this.Bc.uW();1!==e&&(t+=1,s+=1);const i=this.Bc.Jk(),r=this.Bc.Xk(),n=i/r;let h;h=t/s>n?s*n*e/i:t/n*e/r,h>1?h=Math.floor(h):h<1&&(h=1/Math.ceil(1/h)),this.RBt=Math.round(i*h),this.ABt=Math.round(r*h),this.IBt=this.RBt/e,this.PBt=this.ABt/e,this.EBt=Math.max(Math.floor((t-this.IBt)/2),0),this.OBt=Math.max(Math.floor((s-this.PBt)/2),0),this.Bc.bWt(i,r)}wWt(t,s){const e=this.Bc.uW();this.IBt=t,this.PBt=s,this.RBt=Math.round(this.IBt*e),this.ABt=Math.round(this.PBt*e),this.EBt=0,this.OBt=0;const i=this.vY();this.Bc.bWt(this.IBt/i,this.PBt/i)}yWt(t,s){const e=this.Bc.uW();this.IBt=this.Bc.K1(),this.PBt=this.Bc.Q1(),this.RBt=Math.round(this.IBt*e),this.ABt=Math.round(this.PBt*e),this.MWt()?(this.EBt=Math.floor((t-this.IBt)/2),this.OBt=Math.floor((s-this.PBt)/2)):(this.EBt=0,this.OBt=0),this.Bc.bWt(this.Bc.K1(),this.Bc.Q1())}SWt(t){if("high"===this.jBt)this.OD=this.RBt,this.FD=this.ABt,this.UBt="high";else{let s,e;if("off"===this.pWt()?(s=this.Bc.K1(),e=this.Bc.Q1()):(s=this.Bc.Jk(),e=this.Bc.Xk()),this.RBt<s||this.ABt<e)this.OD=this.RBt,this.FD=this.ABt,this.UBt="high";else if(this.OD=s,this.FD=e,this.UBt="low","scale-inner"===t){const t=s/e,i=this.CBt/this.GBt;i<t?this.OD=this.FD*i:i>t&&(this.FD=this.OD/i)}else if("scale-outer"===t){const t=s/e,i=this.CBt/this.GBt;i>t?this.OD=this.FD*i:i<t&&(this.FD=this.OD/i)}}}l$(){return this.Bc}TWt(){return this.yBt[0].canvas}R0(){return this.YBt}MWt(){return this.zBt}xWt(){return this._Bt}CWt(t){if(!wx.has(t))throw new Error("invalid fullscreen mode");this.NBt=t;const s=this.Bc.pB();s.k6(),s.N6()}wY(){return this.NBt}GWt(t){if(!wx.has(t))throw new Error("invalid fullscreen mode");this.BBt=t;const s=this.Bc.pB();s.k6(),s.N6()}_Wt(){return this.BBt}pWt(){return this.MWt()?this._Wt():this.wY()}IWt(t){if(!Sx.has(t))throw new Error("invalid fullscreen scaling quality");this.jBt=t,this.Bc.pB().k6()}PWt(){return this.jBt}v3(){return this.UBt}static RWt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}nY(){return this.CBt}hY(){return this.GBt}o3(){return this.OD}a3(){return this.FD}Nb(t){this.DS=!!t}AWt(t){this.kBt=t}hQ(){return this.kBt}EWt(){return this.gM().mA()}B$t(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.HBt=[],this.qBt.clear(),this.YBt.$M(),this.SBt.$M(),this.Bc.x5()}z$t(){console.log("[Construct] WebGPU device lost"),this.HBt=[],this.qBt.clear(),this.YBt.$M(),this.Bc.x5()}async $$t(t){await this.SBt.WM(),await this.$kt(),await this.Bc.OWt(),console.log("[Construct] WebGL context restored")}async q$t(){await this.$kt(),await this.Bc.OWt(),console.log("[Construct] WebGPU device restored")}FWt(){return this.SBt}DWt(){return this.vBt}gM(){return this.vBt||this.SBt}CB(){return this.bBt}Y$(){let t="";return t=this.Bc.DWt()?"webgpu":"webgl"+this.Bc.FWt().Rx(),this.Bc.gM().Wb()&&(t+="-software"),t}Z$(){return this.Bc.DWt()?this.Bc.DWt().LWt():this.Bc.FWt().PF()}uU(){return"low"===this.UBt?1/this.Bc.uW():this.vY()}vY(){const t=this.pWt();if("off"===t||"crop"===t)return 1;const s=this.Bc.Jk(),e=this.Bc.Xk(),i=s/e,r=this.RBt/this.ABt;return"scale-inner"!==t&&r>i||"scale-inner"===t&&r<i?this.PBt/e:this.IBt/s}H3(){return"low"===this.v3()?1:this.vY()}U3(){return"low"===this.v3()?1:this.Bc.uW()}kWt(t,s){this.$Bt=t,this.WBt=s}hZ(t,s,e,i=!0){s=s||this.OD,e=e||this.FD;const r=s/2+this.$Bt,n=e/2+this.WBt;if(i){let i=this.l3();s===this.OD&&e===this.FD||(t.tv(Tx,s/e),i=Tx),t.aO(i)}const h=t.nv(r,n,t.WS(e),r,n,0,e);t.pO(h)}NWt(t,s=!0){const e=this.iW(),i=this.nW(),r=e/2,n=i/2;s&&t.aO(this.l3());const h=t.nv(r,n,t.WS(i),r,n,0,i);t.pO(h)}oW(){return this.RBt}lW(){return this.ABt}iW(){return this.IBt}nW(){return this.PBt}Q$(){return this.EBt}sW(){return this.OBt}o5(){return this.yBt.length}BWt(){return"undefined"!=typeof OffscreenCanvas&&this.TWt()instanceof OffscreenCanvas&&("Chromium"!==yx.Ks.re||yx.Ks.ie>=124)}async P5(t,s=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.yBt.length===t)return;const e={count:t,layersDomState:this.Bc.pB().cB()._1().filter(t=>t.Cj()).map(t=>t.D2()),immediate:s,marginLeft:this.EBt,marginTop:this.OBt,styleWidth:this.IBt,styleHeight:this.PBt};let i;if(i=this.Hk()?await this.Bc.zB("canvas","set-html-layer-count",e):self.c3_runtimeInterface._OnSetHTMLLayerCount(e),t<this.yBt.length)this.yBt.length=t;else for(const t of i.addedCanvases){t.width=this.RBt,t.height=this.ABt;const s=this.BWt()?"bitmaprenderer":"2d",e=t.getContext(s);if(!e)throw new Error(`failed to acquire '${s}' canvas context`);this.yBt.push({canvas:t,D$t:e})}this.Bc.jB()}w6(t){if(t>=this.yBt.length)return;const s=this.TWt(),e=this.yBt[t].D$t;this.BWt()?e.transferFromImageBitmap(s.transferToImageBitmap()):(e.globalCompositeOperation="copy",e.drawImage(s,0,0))}b3(t){t.depth=this.Bc.l2();const s=this.HBt,e=s.findIndex(s=>s.OC(t));let i;return-1!==e?(i=s[e],s.splice(e,1)):i=this.gM().cF(t),this.qBt.add(i),i}E0(t){if(!this.qBt.has(t))throw new Error("render target not in use");this.qBt.delete(t),this.HBt.push(t)}XBt(){const t={nx:this.Bc.Zk()};return"low"===this.v3()&&(t.width=this.o3(),t.height=this.a3()),this.b3(t)}ZBt(t){this.E0(t)}*$Wt(){for(const t of this.Bc.pB().F6())for(const s of t.zV()){const t=this.e$t.get(s);t&&(yield t)}}d3(t){if(!this.gM().MF())return null;let s=this.e$t.get(t);return s||(s={Mz:t,name:t.Rc(),WWt:yx.Hr(yx.Nw.NA,this.SBt),VWt:0,jWt:0,UWt:0},this.e$t.set(t,s)),s.WWt}zWt(){const t=this.gM();if(t.MF()&&0===this.QBt){this.QBt=t.Lb(),this.i$t=NaN;for(const t of this.$Wt())t.VWt=NaN}}HWt(){this.SBt&&this.SBt.MF()&&this.qWt(),this.vBt&&this.vBt.MF()&&this.JWt()}qWt(){if(isNaN(this.i$t)&&(this.i$t=this.s$t.zA(this.KBt,this.QBt),!isNaN(this.i$t))){if(this.Bc.ez())for(const t of this.$Wt())if(t.VWt=t.WWt.zA(this.KBt,this.QBt),isNaN(t.VWt))return;if(this.s$t.HA(this.QBt),this.t$t=Math.min(this.i$t,1),this.Bc.ez()){const t=new Map;for(const s of this.$Wt())s.WWt.HA(this.QBt),s.jWt=Math.min(s.VWt,1),t.set(s.Mz,s.jWt);for(const s of this.$Wt()){const e=s.Mz,i=(t.get(e)||0)-e.pj().reduce((s,e)=>s+(t.get(e)||0),0);s.UWt=yx.Kr(i,0,1)}const s=this.Bc.cB(),e=this.t$t-s._1().reduce((s,e)=>s+(t.get(e)||0),0);self.iz.YWt(yx.Kr(e,0,1),this.t$t,[...this.$Wt()])}this.KBt=this.QBt,this.QBt=0}}XWt(){return this.s$t}JWt(){if(0===this.QBt)return;for(let t=this.KBt;t<this.QBt;++t){const s=this.r$t.get(t);if(s&&!s._A())return}const t=this.Bc.cB(),s=yx.To(t.s5()+1,0);let e=0;for(let t=this.KBt;t<this.QBt;++t){const i=this.r$t.get(t);if(!i)continue;const r=i.IA();let n=BigInt(0),h=BigInt(0);const o=BigInt(0);for(let t=0,e=Math.min(s.length,r.length/2);t<e;++t){const e=r[2*t],i=r[2*t+1];e!==o&&(n===o||e<n)&&(n=e),i>h&&(h=i);const a=Number(i-e)/1e9;s[t]+=a}e+=Number(h-n)/1e9}if(this.t$t=yx.Kr(e,0,1),this.Bc.ez()){const e=t.zV(),i=new Map;for(let t=0,r=Math.min(e.length,s.length-1);t<r;++t){const r=s[t+1];i.set(e[t],r)}const r=[],n=new Map;for(const[t,s]of i){const e=[...t.gj()].reduce((t,s)=>t+(i.get(s)||0),0);n.set(t,e),r.push({name:t.Rc(),UWt:yx.Kr(s,0,1),jWt:yx.Kr(e,0,1)})}const h=this.t$t-t._1().reduce((t,s)=>t+(n.get(s)||0),0);self.iz.YWt(yx.Kr(h,0,1),this.t$t,r)}for(let t=this.KBt;t<this.QBt;++t)this.r$t.delete(t);this.KBt=this.QBt,this.QBt=0}ZWt(t){this.r$t.set(this.vBt.Lb(),t)}XN(){return this.t$t}ZB(t,s,e,i,r,n){return this.n$t=t,this.h$t=s,this.o$t.za(e,i,r,n),this.l$t||(this.l$t=new Promise(t=>{this.u$t=t})),this.l$t}KWt(){if(!this.n$t)return;let t=this.TWt();const s=this.o$t,e=yx.Kr(Math.floor(s.Qa()),0,t.width),i=yx.Kr(Math.floor(s.tl()),0,t.height);let r=s.width();r=0===r?t.width-e:yx.Kr(Math.floor(r),0,t.width-e);let n=s.height();if(n=0===n?t.height-i:yx.Kr(Math.floor(n),0,t.height-i),(0!==e||0!==i||r!==t.width||n!==t.height)&&r>0&&n>0){const s=yx.co(r,n);s.getContext("2d").drawImage(t,e,i,r,n,0,0,r,n),t=s}yx.fo(t,this.n$t,this.h$t).then(t=>{this.a$t&&URL.revokeObjectURL(this.a$t),this.a$t=URL.createObjectURL(t),this.l$t=null,this.u$t(t)}),this.n$t="",this.h$t=1}QWt(){return this.a$t}tVt(t){t?this.c$t++:this.c$t--}sVt(){return this.c$t>0}eVt(t){const s=this.gM();if(2===t)this.g$t=yx.Hr(yx.Nw.Jb,this.gM()),this.g$t.gR("Arial"),this.g$t.yR(16),this.g$t.AR("center"),this.g$t.OR("center"),this.g$t.$R(300,200);else if(0===t){const t=this.Bc.iVt();t&&t.ZX(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.rVt("splash-images/splash-logo.svg").then(t=>{"done"===this.x$t?s.wC(t):this.y$t.w$t=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.nVt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.x$t?s.wC(t):this.y$t.S$t=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.nVt("splash-images/splash-website-512.png").then(t=>{"done"===this.x$t?s.wC(t):this.y$t.v$t=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async rVt(t){t=new URL(t,this.Bc.hVt()).toString();const s=await yx.ro(t),e=await this.Bc.oVt(s,2048,2048);return await this.gM().uF(e,{ux:"high"})}async nVt(t){t=new URL(t,this.Bc.hVt()).toString();const s=await yx.ro(t);return await this.gM().uF(s,{ux:"high"})}aVt(){this.Bc.Vc("runtime","hide-cordova-splash")}lVt(){this.f$t=Date.now(),this.Bc.Sf().addEventListener("loadingprogress",this.m$t),this.d$t=requestAnimationFrame(()=>this.uVt()),3!==this.Bc.cVt()&&this.aVt()}async fVt(){const t=this.gM();this.p$t=1;const s=this.Bc.cVt();4===s&&await this.G$t,this.C$t=null,this.G$t=null,-1!==this.d$t&&(cancelAnimationFrame(this.d$t),this.d$t=-1),this.Bc.Sf().removeEventListener("loadingprogress",this.m$t),this.m$t=null,this.g$t&&(this.g$t.qr(),this.g$t=null),this.Bc.dVt(),t.tF(),this.y$t.w$t&&(t.wC(this.y$t.w$t),this.y$t.w$t=null),this.y$t.S$t&&(t.wC(this.y$t.S$t),this.y$t.S$t=null),this.y$t.v$t&&(t.wC(this.y$t.v$t),this.y$t.v$t=null),t.QO(0,0,0,0),t.Fb(),this.x$t="done",this.KBt=t.Lb(),3===s&&this.aVt()}uVt(){if(-1===this.d$t)return;const t=this.gM();t.tF(),this.d$t=-1;const s=this.Bc.Ik()._K(),e=this.Bc.cVt();if(3!==e&&(this.NWt(t),t.QO(0,0,0,0),t.MO(),t.uv(),t.xO(null)),0===e)this.pVt(s);else if(1===e)this.mVt(s,120,0);else if(2===e)this.gVt(s);else if(3===e)yx.gh();else{if(4!==e)throw new Error("invalid loader style");this.yVt(s)}t.Fb(),this.d$t=requestAnimationFrame(()=>this.uVt())}gVt(t){t?this.g$t.RR(1,0,0):this.g$t.RR(.6,.6,.6),this.g$t.jc(Math.round(100*this.p$t)+"%");const s=this.IBt/2,e=this.PBt/2;Ix.Nl(s-150,e-100,s+150,e+100);const i=this.gM();i.xO(this.g$t.xC()),i.sb(Ix,this.g$t.yA())}mVt(t,s,e){const i=this.gM();i.gv(),t?i.vO(1,0,0,1):i.vO(.118,.565,1,1);const r=this.IBt/2,n=this.PBt/2,h=s/2;Px.za(r-h,n-4+e,Math.floor(s*this.p$t),8),i.Rect(Px),Px.za(r-h,n-4+e,s,8),Px.offset(-.5,-.5),Px.fl(.5,.5),i.vO(0,0,0,1),i.hb(Px),Px.fl(1,1),i.vO(1,1,1,1),i.hb(Px)}pVt(t){const s=this.gM(),e=this.Bc.iVt();if(!e)return void this.mVt(t,120,0);const i=e.xC();if(!i)return void this.mVt(t,120,0);const r=i.jg(),n=i.Qg(),h=this.IBt/2,o=this.PBt/2,a=r/2,l=n/2;Ix.Nl(h-a,o-l,h+a,o+l),s.xO(i),s.Pl(Ix),this.mVt(t,r,l+16)}yVt(t){const s=this.gM(),e=this.y$t.w$t,i=this.y$t.S$t,r=this.y$t.v$t,n=Date.now();0===this.b$t&&(this.f$t=n);const h=this.Bc.wVt()||this.Bc.SVt()&&!this.Bc.vVt(),o=h?0:200,a=h?0:3e3;let l=1;"fade-in"===this.x$t?l=Math.min((n-this.f$t)/300,1):"fade-out"===this.x$t&&(l=Math.max(1-(n-this.T$t)/300,0)),s.gv(),s.vO(.231*l,.251*l,.271*l,l),Px.set(0,0,this.IBt,this.PBt),s.Rect(Px);const u=Math.ceil(this.IBt),c=Math.ceil(this.PBt);let f,d;this.PBt>256?(s.vO(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),Px.za(0,.8*c-d/2,f,d),s.Rect(Px),t?s.vO(l,0,0,l):s.vO(.161*l,.953*l,.816*l,l),f=u*this.p$t,Px.za(.5*u-f/2,.8*c-d/2,f,d),s.Rect(Px),s.vO(l,l,l,l),s.uv(),i&&(f=1.5*yx.Kr(.22*c,105,.6*u),d=f/8,Px.za(.5*u-f/2,.2*c-d/2,f,d),s.xO(i),s.Rect(Px)),e&&(f=Math.min(.395*c,.95*u),d=f,Px.za(.5*u-f/2,.485*c-d/2,f,d),s.xO(e),s.Rect(Px)),r&&(f=1.5*yx.Kr(.22*c,105,.6*u),d=f/8,Px.za(.5*u-f/2,.868*c-d/2,f,d),s.xO(r),s.Rect(Px))):(s.vO(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),Px.za(0,.85*c-d/2,f,d),s.Rect(Px),t?s.vO(l,0,0,l):s.vO(.161*l,.953*l,.816*l,l),f=u*this.p$t,Px.za(.5*u-f/2,.85*c-d/2,f,d),s.Rect(Px),s.vO(l,l,l,l),s.uv(),e&&(f=.55*c,d=f,Px.za(.5*u-f/2,.45*c-d/2,f,d),s.xO(e),s.Rect(Px))),this.b$t++,"fade-in"===this.x$t&&n-this.f$t>=300&&this.b$t>=2&&(this.x$t="wait",this.M$t=n),"wait"===this.x$t&&n-this.M$t>=a&&this.p$t>=1&&(this.x$t="fade-out",this.T$t=n),("fade-out"===this.x$t&&n-this.T$t>=300+o||h&&this.p$t>=1&&n-this.f$t<500)&&this.C$t()}}}{const Ox=self._s,Fx=self.iz,Dx=self.assert,Lx=self.EY,kx={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let Nx=!0;Ox.bVt=class extends Ox.Ur{constructor(t){t=Object.assign({},kx,t),super(),this.MVt=t.messagePort,this.TVt=t.runtimeBaseUrl,this.xVt=t.previewUrl,this.CVt=!!t.headless,this.GVt=!!t.hasDom,this._Vt=!!t.isInWorker,Nx=t.ife,this.IVt=!!t.useAudio,this.PVt=t.exportType,this.RVt=t.isNWjs,this._Z=!!t.isiOSCordova,this.AVt=!!t.isiOSWebView,this.EVt=!!t.isWindowsWebView2,this.OVt=!!t.isAnyWebView2Wrapper,this.FVt=!!t.isFBInstantAvailable,this.DVt=!("preview"!==this.PVt||!t.isDebug),this.LVt=this.DVt,this.kVt=this.DVt,this.NVt=0,this.BVt=[],this.$Vt=[],this.WVt=!1,this.VVt="",this.jVt="",this.UVt="",this.zVt="",this.HVt=0,this.qVt=0,this.JVt=0,this.VD=self.devicePixelRatio,this.YVt=0,this.XVt=0,this.ZVt=0,this.KVt=0,this.QVt=0,this.tjt=!1,this.Sw=!0,this.sjt=!1,this.ejt=!1,this.ijt=!1,this.rjt=null,this.HK=Ox.Hr(Ox.TZ,this,t),this.l4=Ox.Hr(Ox.G6,this),this.Hpt=Ox.Hr(Ox.jmt,this),this.njt=Ox.Hr(Ox.mW,this,t.wrapperComponentIds),this.hjt=Ox.Hr(Ox.hNt,this),this.ett=Ox.Hr(Ox.B6,this),this.ojt=Ox.Hr(Ox.fct,this),this.ajt=Ox.Hr(Ox.pct,this),this.Ict=Ox.Hr(Ox.Mct,this),this.pw=Ox.Hr(Ox.sw,{rw:t=>this.ljt(t),ow:t=>this.ujt(t)}),this.cjt=new Map,this.fjt=[],this.djt=new Map,this.pjt=new Map,this.mjt=0,this.gjt=[],this.yjt=new Set,this.wjt=[],this.Sjt=[],this.vjt=new Map,this.bjt=!1,this.Mjt=!1,this.Tjt=0,this.xjt=0,this.Cjt=new Map,this.Gjt=new Set,this._jt=new Set,this.Ijt=[],this.Pjt=[],this.Rjt=null,this.Ajt=!1,this.Ejt="vsync",this.Mx="trilinear",this.Ojt=!1,this.Fjt=!0,this.Djt=!1,this.Ljt=!1,this.kjt=null,this.Njt={Bjt:t=>{this.d$t=-1,this.$jt=-1,this.c7(t)},Wjt:t=>{this.$jt=-1,this.c7(t,!1,"skip-render")},Vjt:()=>{this.d$t=-1,this.cL()}},this.d$t=-1,this.$jt=-1,this.jjt=0,this.Ujt=0,this.zjt=!1,this.Hjt=!1,this.qjt=!1,this.Jjt=!0,this.Yjt=!0,this.Xjt=!1,this.Zjt=0,this.Kjt=new Ox.zd(1),this.Qjt=()=>Math.random(),this.tUt=0,this.sUt=0,this.eUt=0,this.iUt=0,this.rUt=0,this.EOt=1,this.nUt=1/30,this.hUt=0,this.oUt=Ox.Hr(Ox.td),this.aUt=Ox.Hr(Ox.td),this.lUt=Ox.Hr(Ox.td),this.uUt=new Map,this.cUt=-1,this.fUt=0,this.dUt=0,this.pUt=-1,this.mUt=0,this.gUt=0,this.yUt=0,this.wUt=!1,this.SUt="",this.vUt=!1,this.bUt="",this.cz=null,this.MUt="",this.TUt=null,this.xUt=null,this.DAt=Ox.Hr(Ox.Event.Sf),this.CUt=new Map,this.GUt=new Map,this._Ut=0,this.IUt=!1,this.PUt=!1,this.RUt=!1,this.AUt=[],this.EUt={pretick:Ox.Hr(Ox.Event,"pretick",!1),tick:Ox.Hr(Ox.Event,"tick",!1),tick2:Ox.Hr(Ox.Event,"tick2",!1),instancecreate:Ox.Hr(Ox.Event,"instancecreate",!1),instancedestroy:Ox.Hr(Ox.Event,"instancedestroy",!1),beforelayoutchange:Ox.Hr(Ox.Event,"beforelayoutchange",!1),layoutchange:Ox.Hr(Ox.Event,"layoutchange",!1)},this.EUt.instancecreate.pq=null,this.EUt.instancedestroy.pq=null,this.V0=Ox.Hr(Ox.Event.Sf),this.OUt=null;const s=(t,s)=>Ox.ROt._kt(this,t,s);this.FUt=Ox.Hr(Ox.ud,s),this.DUt=Ox.Hr(Ox.ud,s),this.LUt=Ox.Hr(Ox.ud,s),this.kUt=Ox.Hr(Ox.NUt,this,t.jobScheduler),t.canvas&&(this.Rjt=Ox.Hr(Ox.gBt,this)),this.MVt.onmessage=t=>this._OnMessageFromDOM(t.data),this.ZU("runtime","visibilitychange",t=>this.BUt(t)),this.ZU("runtime","wrapper-extension-message",t=>this.$Ut(t)),this.ZU("runtime","get-remote-preview-status-info",()=>this.WUt()),this.ZU("runtime","js-invoke-function",t=>this.ygt(t)),this.ZU("runtime","go-to-last-error-script",self.goToLastErrorScript),this.ZU("runtime","offline-audio-render-completed",t=>this.VUt(t)),this.DAt.addEventListener("window-blur",t=>this.jUt(t)),this.DAt.addEventListener("window-focus",()=>this.UUt()),this.ett.S8(),this.ajt.S8(),this.zUt=null,this.HUt=new WeakMap,this.qUt={keyboard:null,MB:null,TB:null,xB:null},this.JUt=new WeakMap,this.YUt=[]}static UC(t){return Ox.Hr(Ox.bVt,t)}qr(){Ox.bh(this.fjt),this.djt.clear(),this.pjt.clear(),this.l4.qr(),this.l4=null,this.Hpt.qr(),this.Hpt=null,this.njt.qr(),this.njt=null,this.HK.qr(),this.HK=null,this.hjt.qr(),this.hjt=null,this.ett.qr(),this.ett=null,this.ojt.qr(),this.ojt=null,this.ajt.qr(),this.ajt=null,this.Ict.qr(),this.Ict=null,this.pw.qr(),this.pw=null,this.Rjt&&(this.Rjt.qr(),this.Rjt=null),this.DAt.qr(),this.DAt=null,this.XUt=null}_OnMessageFromDOM(t){const s=t.type;if("event"===s)this.ZUt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.KUt(t)}}ZUt(t){if(!this.RUt)return void this.AUt.push(t);const s=t.component,e=t.handler,i=t.data,r=t.dispatchOpts,n=!(!r||!r.dispatchRuntimeEvent),h=!(!r||!r.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(n){const t=new Ox.Event(e);t.data=i,this.DAt.Pf(t)}if(h){const t=new Ox.Event(e,!0);for(const[s,e]of Object.entries(i))t[s]=e;this.IK(t)}}const a=this.CUt.get(s);if(!a)return void(n||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`));const l=a.get(e);if(!l)return void(n||h||console.warn(`[Runtime] No DOM handler '${e}' for component '${s}'`));let u=null;try{u=l(i)}catch(t){return console.error(`Exception in '${s}' handler '${e}':`,t),void(null!==o&&this.QUt(o,!1,""+t))}null!==o&&(u&&u.then?u.then(t=>this.QUt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${e}':`,t),this.QUt(o,!1,""+t)}):this.QUt(o,!0,u))}QUt(t,s,e){this.MVt.postMessage({type:"result",responseId:t,isOk:s,result:e})}KUt(t){const s=t.responseId,e=t.isOk,i=t.result,r=this.GUt.get(s);e?r.resolve(i):r.reject(i),this.GUt.delete(s)}ZU(t,s,e){let i=this.CUt.get(t);if(i||(i=new Map,this.CUt.set(t,i)),i.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);i.set(s,e)}Vc(t,s,e,i){this.MVt.postMessage({type:"event",component:t,handler:s,data:e,responseId:null},i)}zB(t,s,e,i){const r=this._Ut++,n=new Promise((t,s)=>{this.GUt.set(r,{resolve:t,reject:s})});return this.MVt.postMessage({type:"event",component:t,handler:s,data:e,responseId:r},i),n}jY(t,s,e,i=-1){this.Vc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:e,asyncId:i})}UY(t,s,e){const i=this._Ut++,r=new Promise((t,s)=>{this.GUt.set(i,{resolve:t,reject:s})});return this.jY(t,s,e,i),r}$Ut(t){if(-1!==t.asyncId){const s=t.asyncId;this.GUt.get(s).resolve(t.params),this.GUt.delete(s)}else this.ZUt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}mz(t,s,e){this.ZU("wrapper-extension:"+t,s,e)}dz(t){return this.njt.dz(t)}tzt(t){if(!this.ez())throw new Error("not in debug mode");this.Vc("runtime","post-to-debugger",t)}async DOt(t){Ox.nCt(this),this.ez()?await Fx.DOt(this):self.iz&&self.iz.szt(this);const s=await this.HK.io("data.json");if(await this.ezt(s),await this.izt(t),this.wVt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.FWt()){const t=this.FWt();console.info(`[C3 runtime] Hosted in ${this.Hk()?"worker":"DOM"}, rendering with WebGL ${t.Rx()} [${t.PF()}]`)}else this.DWt()&&console.info(`[C3 runtime] Hosted in ${this.Hk()?"worker":"DOM"}, rendering with WebGPU [${this.DWt().LWt()}]`);this.gM().Wb()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.RUt=!0;for(const t of this.AUt)this.ZUt(t);Ox.bh(this.AUt),this.Rjt&&this.Rjt.lVt();for(const s of t.runOnStartupFunctions)this.BVt.push(this.rzt(s));if(await Promise.all([this.HK.CK(),...this.BVt]),Ox.bh(this.BVt),!this.HK._K())return this.Rjt&&await this.Rjt.fVt(),await this.DAt._f(new Ox.Event("beforeruntimestart")),await this.tF(),this.MVt.postMessage({type:"runtime-ready"}),this;this.Rjt&&this.Rjt.aVt()}async rzt(t){try{await t(this.zUt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async ezt(t){const s=t.project;this.VVt=s[0],this.jVt=s[16],this.UVt=s[31],this.zVt=s[38],this.HVt=s[36];const e=s[39]||"loading-logo.png";this.Ojt=!!s[9],this.qVt=this.ZVt=s[10],this.JVt=this.KVt=s[11],this.hjt.XNt(this.qVt,this.JVt),this.YVt=this.qVt/2,this.XVt=this.JVt/2,this.Ejt=s[37],this.Ajt=!!s[40],this.Mx=s[14],this.sjt=s[15],this.ejt=s[42],this.ijt=s[17],this.tjt=!!s[18],this.QVt=s[19],this.xjt=s[21],this.Djt=s[22];const i=this.HK;if(i.QZ(s[45]),i.LK(s[7],s[25]),i.sK(s[8]),i.eK(s[32]),i.rK(s[28]),i.AK(s[29]),0===this.QVt){let t="";t="flat"===i.y$()?i.nK()+e:e,t&&(this.rjt=i.gK({url:t}))}this.Rjt&&(this.Rjt.CWt(Ox.gBt.RWt(s[12])),this.Rjt.IWt(s[23]?"high":"low"),this.Rjt.Nb(0!==s[24]),this.Rjt._$t(s[34]),this.Rjt.AWt(s[41]),this.Rjt.I$t(s[13]),this.Rjt.P$t(s[30]),this.Rjt.E$t(s[46],s[47]),this.Rjt.A$t(s[26]),this.Rjt.O$t(s[48]),this.Rjt.F$t(s[50]));const r=s[43];r&&await this.nzt(r),this.hzt(),this.njt.vRt(),this.Ijt=self.ozt();const n=s[2];for(const t of n[1])this.njt.bRt(t);for(const t of n[0])this.njt.SRt(t);this.Ijt=self.ozt(),this.azt(),this.njt._Rt();for(const t of s[3]){const s=Ox.Sct.UC(this,this.fjt.length,t);this.fjt.push(s),this.djt.set(s.Rc().toLowerCase(),s),this.pjt.set(s.I1(),s)}for(const t of s[4])this.fjt[t[0]].SEt(t);for(const t of s[27]){const s=t.map(t=>this.fjt[t]);this.gjt.push(Ox.Hr(Ox.SOt,this,s))}this.lzt();for(const t of this.fjt)t.bEt();for(const t of s[5])this.l4.UC(t);const h=s[1];if(h){const t=this.l4.P6(h);t&&this.l4._6(t)}for(const t of s[35])this.ojt.UC(t);for(const t of s[33])this.ett.UC(t);for(const t of s[44])this.ajt.UC(t);this.ajt.yct()||(this.ajt.qr(),this.ajt=null);for(const t of s[49])this.Ict.UC(t);this.Ict.Gct()||(this.Ict.qr(),this.Ict=null);for(const t of s[6])this.Hpt.UC(t);this.Hpt.vgt(),this.uzt(),Ox.bh(this.Ijt),this.mV();let o="any";const a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Vc("runtime","set-target-orientation",{targetOrientation:o})}async nzt(t){const s=t.format;"image-sequence"===s?this.kjt=new self.czt(this,t):"image-sequence-gif"===s?this.kjt=new self.fzt(this,t):"webm"===s?this.kjt=new self.dzt(this,t):"mp4"===s&&(this.kjt=new self.pzt(this,t)),this.Ejt="unlimited-frame",this.Rjt.CWt("off"),this.VD=1,self.devicePixelRatio=1,await this.zB("runtime","set-exporting-to-video",{message:this.kjt.mzt(0),duration:this.kjt.jq()})}cVt(){return this.QVt}oWt(){return null!==this.kjt}gzt(){return this.kjt.jq()}yzt(){return this.kjt.wzt()}Szt(){return this.kjt.DOt({width:this.Rjt.oW(),height:this.Rjt.lW()})}vzt(){const t=this.jjt/this.yzt();return this.kjt.bzt(this.Rjt.TWt(),t)}Mzt(){this.kjt&&this.kjt.Bit()}VUt(t){this.kjt.Tzt(t)}xzt(){return this.kjt.Fb()}SVt(){return this.FVt}Cw(){return this.Sw}YB(t){this.BVt.push(t)}A5(t){this.WVt=!!t}Czt(t){this.WVt&&this.$Vt.push(t)}k5(){return this.$Vt}fEt(){return this.mjt++}TEt(){return this.mjt}Lkt(t){this.yjt.add(t)}kkt(t){this.yjt.delete(t)}hWt(){return this.yjt}async izt(t){this.Rjt&&(await this.Rjt.co(t),this.Rjt.eVt(this.QVt))}async tF(){this.zjt=!0,this.tUt=Date.now();let t=null;const s=new Promise(s=>t=s);if(this.tjt){for(const t of this.fjt)t.v1()||t.EEt()||!t.bW()||t.vIt();(async()=>{await this.HK.CK(),await s,this.Sw=!1,this.Gzt()})()}else this.Sw=!1;this.HK.GK(),this.ez()&&Fx._zt(Nx);for(const t of this.l4.yB())t.K5();this.oWt()&&await this.Szt();const e=this.l4.I6();await e.m5(null,this.gM()),await e.C5(!0),this.fUt=performance.now(),t(),this.tjt||this.Gzt(),(await this.zB("runtime","before-start-ticking")).isSuspended&&!this.oWt()?(this.Zjt++,this.Xjt=!0):this.c7()}Gzt(){this.JU(Ox.e$.s$.t$.Izt,null,null),this.Vc("runtime","register-sw")}Tbt(t){t=Math.floor(t);const s=this.Ijt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}azt(){for(const t of self.Pzt){const s=Ox.$h(Object.keys(t));this.Pjt.push(s)}}Ugt(t){t=Math.floor(t);const s=this.Pjt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}Rzt(){return this.GVt}Azt(){return this.CVt}Hk(){return this._Vt}hVt(){return this.TVt}Ezt(){return this.xVt}aN(){return this.Hpt}bN(){return this.Hpt.bN()}Fgt(){return this.Hpt.Fgt()}pN(){return this.Hpt.pN()}Dgt(){return this.Hpt.Dgt()}iCt(){return 0===this.Fgt().cmt()}kgt(){return this.Hpt.kgt()}Ckt(){return this.njt}RK(){return this.njt.RK()}J0(t){if((t=Math.floor(t))<0||t>=this.fjt.length)throw new RangeError("invalid index");return this.fjt[t]}Ozt(t){return this.djt.get(t.toLowerCase())||null}QY(t){return this.pjt.get(t)||null}yht(t){const s=Ox.mW.kW(t);return s?s.WW():null}S1(){return this.fjt}*Fzt(){for(const t of this.fjt)t.v1()||(yield*t.JW())}Sf(){return this.DAt}rN(){return this.V0}IK(t){t.runtime=this.gW();const s=this.ez()&&!this.Hpt.dV();s&&Fx.M6(),this.V0.dispatchEvent(t),s&&Fx.T6()}z5(t){return t.runtime=this.gW(),this.V0._f(t)}Jk(){return this.qVt}Xk(){return this.JVt}Dzt(t,s){if(this.qVt===t&&this.JVt===s)return;this.qVt=t,this.JVt=s;const e=this.pB();e.k6(),e.N6()}K1(){return this.ZVt}Q1(){return this.KVt}bWt(t,s){if(this.ZVt===t&&this.KVt===s)return;this.ZVt=t,this.KVt=s;const e=this.pB();e.k6(),e.N6()}aWt(t){this.oWt()||(this.VD=t)}uW(){return this.VD}t3(){return this.YVt}s3(){return this.XVt}GB(){return this.Rjt}o3(){return this.Rjt?this.Rjt.o3():this.ZVt}a3(){return this.Rjt?this.Rjt.a3():this.KVt}uU(){return this.Rjt?this.Rjt.uU():1}vY(){return this.Rjt?this.Rjt.vY():1}H3(){return this.Rjt?this.Rjt.H3():1}U3(){return this.Rjt?this.Rjt.U3():1}Q$(){return this.Rjt?this.Rjt.Q$():0}sW(){return this.Rjt?this.Rjt.sW():0}Lzt(){return this.Rjt?this.Rjt.iW():0}kzt(){return this.Rjt?this.Rjt.nW():0}wY(){return this.Rjt?this.Rjt.wY():"off"}b3(t){return this.Rjt?this.Rjt.b3(t):null}E0(t){this.Rjt&&this.Rjt.E0(t)}S3(){return this.sjt}X$t(){return this.ejt}Z$t(){return this.ijt}XN(){return this.Rjt?this.Rjt.XN():NaN}GC(){return"nearest"!==this.Zk()}KN(){return this.Ejt}QN(t){this.Ejt!==t&&(this.Ejt=t,-1===this.d$t&&-1===this.$jt||(this.Nzt(),this.Bzt()))}Zk(){return this.Mx}gEt(){return this.tjt}iVt(){return this.rjt}dVt(){this.rjt&&(this.rjt.aR(),this.rjt.qr(),this.rjt=null)}pB(){return this.l4}cB(){return this.l4.cB()}jtt(){return this.ett}$zt(){return this.ojt}cFt(){return this.ajt}Yct(){return this.Ict}Ik(){return this.HK}gK(t){return this.HK.gK(t)}lV(t,s,e,i,r,n){if(n&&this.ajt){if(t instanceof Ox.Sct&&t.v1()){const h=t.TV(),o=Math.floor(this.uB()*h.length);return this.lV(h[o],s,e,i,r,n)}const h=this.ajt.wct(t,n);if(h){const t=this.i1(h,s,!1,e,i,!1,r,void 0,r);return this.ajt.vct(t,n),t}}return this.i1(t,s,!1,e,i,!1,r,void 0,r)}i1(t,s,e,i,r,n,h,o,a){let l=null,u=null;if(t instanceof Ox.Sct){if(u=t,u.v1()){const t=u.TV();u=t[Math.floor(this.uB()*t.length)]}l=u.X0()}else l=t,u=this.J0(l[1]);const c=u.HW().bW();if(this.Sw&&c&&!u.EEt())return null;const f=s;let d;c||(s=null),d=e&&!n&&l&&!this.Cjt.has(l[2])?l[2]:this.xjt++;const p=l?l[0]:null,m=Ox.Hr(Ox.Instance,{runtime:this,objectType:u,Mz:s,FOt:p,NOt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.Cjt.set(d,m);let g=null;if(c&&(g=m.LB(),void 0!==i&&void 0!==r&&(g.XM(i),g.QM(r)),u.nOt(!0)),s&&(a||s.n1(m,!0),s.mB().y5(u)),this.Tjt++,u.TU()&&!e&&!n){const t=new Set;for(const s of u.d5().xV()){if(s===u)continue;const e=this.Wzt(s,g,t);if(e){const t=this.i1(e,f,!1,g?g.YM():i,g?g.KM():r,!0,!1,void 0,a);m.X5(t)}else{const t=this.i1(s,f,!1,g?g.YM():i,g?g.KM():r,!0,!1,void 0,a);m.X5(t)}}for(const t of m.xU()){t.X5(m);for(const s of m.xU())t!==s&&t.X5(s)}}if(c&&!e&&h&&this.Vzt(m,p,g,s,i,r,a),u.TU()&&!e&&!n&&h)for(const t of m.xU()){const e=t.LB();if(!e)continue;const i=t.HW(),r=t.fU().X0()[0];i.bW()?this.Vzt(t,r,e,s,e.YM(),e.KM(),a):this.Vzt(t,r,e,s,void 0,void 0,a)}if(!n&&h){void 0===i&&(i=p[0]),void 0===r&&(r=p[1]);const t=g.aH(),s=i-g.YM()+t.YM(),e=r-g.KM()+t.KM();t.xz(s,e)}u.tOt();const y=l?Ox.Oh(l[5]):null,w=l?l[4].map(t=>Ox.Oh(t)):null,S=c&&p&&p[13];if(S&&m.UOt(),m.REt(y,w),S){const t=p[13];m.eq().kIt(t[2],t[0],t[1])}this.Sjt.push(m),this.bjt=!0,this.ez()&&Fx.jzt(m);const v=this.EUt.instancecreate;return v.pq=m,this.DAt.dispatchEvent(v),m}wDt(t){const s=t[0],e=t[1],i=t[2],r=t[6];return r||this.l4.R6(s).kB(e).Q0(i)}Wzt(t,s,e){const i=s?.uFt()??[];for(const s of i){const i=this.wDt(s),r=!!s[4],n=this.J0(i[1]);if(!e.has(i)&&t===n&&r)return e.add(i),i}}Vzt(t,s,e,i,r,n,h){const o=e.WLt(),a=e.uFt();if(t.LB().VLt(o),!a)return;void 0===r&&(r=s[0]),void 0===n&&(n=s[1]);const l=new Set,u=s[0],c=s[1];for(const s of a){const e=s[0],o=s[1],a=s[2],f=s[3],d=!!s[4],p=s[5],m=s[6];let g;g=m||this.l4.R6(e).kB(o).Q0(a);const y=this.J0(g[1]),w=t.dFt(y),S=l.has(y);if(w&&!S&&d){const s=t.pFt(y);s.LB().DOt(g[0]);const e=r+g[0][0]-u,i=n+g[0][1]-c;s.LB().xz(e,i),s.LB().VLt(p),t.gH(s,{bH:!!(1&f),TH:!!(f>>1&1),CH:!!(f>>2&1),_H:!!(f>>3&1),PH:!!(f>>4&1),kH:!!(f>>5&1),AH:!!(f>>6&1),OH:!!(f>>7&1),DH:!!(f>>8&1)}),l.add(y)}else{const s=r+g[0][0]-u,e=n+g[0][1]-c,o=this.i1(g,i,!1,s,e,!1,!0,t,h);o.LB().VLt(p),t.gH(o,{bH:!!(1&f),TH:!!(f>>1&1),CH:!!(f>>2&1),_H:!!(f>>3&1),PH:!!(f>>4&1),kH:!!(f>>5&1),AH:!!(f>>6&1),OH:!!(f>>7&1),DH:!!(f>>8&1)})}}}wU(t){if(this.Gjt.has(t))return;const s=t.fU();let e=this.vjt.get(s);if(e){if(e.has(t))return;e.add(t)}else e=new Set,e.add(t),this.vjt.set(s,e);if(this.ez()&&Fx.Uzt(t),t.HOt(),this.bjt=!0,t.TU())for(const s of t.xU())this.wU(s);for(const s of t.children())s.NH()&&this.wU(s);if(!this.l4.pV()&&!this.wUt){const s=this.aN();s.cV(!0),t.GFt(),s.cV(!1)}t._Ft(this.l4.pV())}mV(){this.bjt&&(this.Mjt=!0,this.zzt(),this.Hzt(),this.Mjt=!1,this.bjt=!1,this.jB())}zzt(){for(const t of this.Sjt){const s=t.fU();s.n1(t);for(const e of s.yV())e.n1(t),e.tOt()}Ox.bh(this.Sjt)}Hzt(){this.DAt.ff(!0);for(const[t,s]of this.vjt.entries())this.qzt(t,s),s.clear();this.vjt.clear(),this.DAt.ff(!1)}qzt(t,s){for(const t of s){const s=this.EUt.instancedestroy;s.pq=t,this.DAt.dispatchEvent(s),this.Cjt.delete(t.CU()),this.uUt.delete(t);const e=t.LB();e&&(e.HLt(),e.l1(),e.HOt()),this.Gjt.add(t),this.Tjt--}Ox.Rh(t.iV(),s),t.tOt(),this._jt.add(t);for(const e of t.yV())Ox.Rh(e.iV(),s),e.tOt(),this._jt.add(e);if(t.HW().bW()){const t=new Set([...s].map(t=>t.LB().kB()));for(const e of t)e.I2(s)}}eOt(){return this.Sjt}*aGt(t){for(const s of this.eOt())t.v1()?s.fU().rCt(t)&&(yield s):s.fU()===t&&(yield s)}PEt(){return this.xjt++}AEt(t,s){this.Cjt.set(t,s)}JY(t){t=!!t,this.Yjt!==t&&(this.Yjt=!!t,this.Yjt&&this.Xjt&&(this.ZY(!1),this.Xjt=!1))}YY(){return this.Yjt}x5(){this.DAt.dispatchEvent(Ox.Hr(Ox.Event,"renderercontextlost")),this.ZY(!0);for(const t of this.fjt)!t.v1()&&t.OEt()&&t.M5();const t=this.cB();t&&t.x5(),Ox.RRt.nQ(),Ox.SK.nQ()}async OWt(){await this.cB().m5(null,this.gM()),this.DAt.dispatchEvent(Ox.Hr(Ox.Event,"renderercontextrestored")),this.ZY(!1),this.jB()}BUt(t){if(!this.Yjt)return;const s=t.hidden;this.ZY(s),this.Xjt=s,s||this.jB()}jUt(t){this.wVt()&&this.Djt&&!Ox.Ks.oe&&(t.data.parentHasFocus||(this.ZY(!0),this.Ljt=!0))}UUt(){this.Ljt&&(this.ZY(!1),this.Ljt=!1)}Bzt(){const t=this.Njt;"vsync"===this.Ejt?-1===this.d$t&&(this.d$t=self.requestAnimationFrame(t.Bjt)):"unlimited-tick"===this.Ejt?(-1===this.$jt&&(this.$jt=Ox.zh(t.Wjt)),-1===this.d$t&&(this.d$t=self.requestAnimationFrame(t.Vjt))):-1===this.$jt&&(this.$jt=Ox.zh(t.Bjt))}Nzt(){-1!==this.d$t&&(self.cancelAnimationFrame(this.d$t),this.d$t=-1),-1!==this.$jt&&(Ox.Hh(this.$jt),this.$jt=-1)}PN(){return this.Zjt>0}ZY(t){if(this.oWt())return;const s=this.PN();this.Zjt+=t?1:-1,this.Zjt<0&&(this.Zjt=0);const e=this.PN();if(!s&&e)console.log("[Construct] Suspending"),this.Nzt(),this.DAt.dispatchEvent(Ox.Hr(Ox.Event,"suspend")),this.IK(Ox.Hr(Ox.Event,"suspend")),this.JU(Ox.e$.s$.t$.Jzt,null,null);else if(s&&!e){console.log("[Construct] Resuming");const t=performance.now();this.sUt=t,this.fUt=t,this.cUt=0,this.dUt=0,this.pUt=0,this.mUt=0,this.yUt=0,this.gUt=0,this.DAt.dispatchEvent(Ox.Hr(Ox.Event,"resume")),this.IK(Ox.Hr(Ox.Event,"resume")),this.JU(Ox.e$.s$.t$.Yzt,null,null),this.Myt()||this.c7(t)}}DY(t){this.FUt.$u(t)}BY(t){this.DUt.$u(t)}kY(t){this.LUt.$u(t)}LY(t){this.FUt.Kf(t)}$Y(t){this.DUt.Kf(t)}NY(t){this.LUt.Kf(t)}Xzt(t,s){const e=s?performance.now():0;let i;return t instanceof Lx?(i=t.rz(),s&&Fx.Zzt(t.behavior,performance.now()-e)):(i=t.c7(),s&&Fx.Zzt(t.lq(),performance.now()-e)),i}Kzt(){const t=this.ez();this.FUt.jd(!0);for(const s of this.FUt)this.Xzt(s,t);this.FUt.jd(!1)}Qzt(t,s){const e=s?performance.now():0;let i;return t instanceof Lx?(i=t.VY(),s&&Fx.Zzt(t.behavior,performance.now()-e)):(i=t.aRt(),s&&Fx.Zzt(t.lq(),performance.now()-e)),i}tHt(){const t=this.ez();this.DUt.jd(!0);for(const s of this.DUt)this.Qzt(s,t);this.DUt.jd(!1)}sHt(t,s){const e=s?performance.now():0;let i;return t instanceof Lx?(i=t.oz(),s&&Fx.Zzt(t.behavior,performance.now()-e)):(i=t.rPt(),s&&Fx.Zzt(t.lq(),performance.now()-e)),i}eHt(){const t=this.ez();this.LUt.jd(!0);for(const s of this.LUt)this.sHt(s,t);this.LUt.jd(!1)}*iHt(){const t=this.ez();this.FUt.jd(!0);for(const s of this.FUt){const e=this.Xzt(s,t);Ox.Mo(e)&&(yield*e)}this.FUt.jd(!1)}*rHt(){const t=this.ez();this.DUt.jd(!0);for(const s of this.DUt){const e=this.Qzt(s,t);Ox.Mo(e)&&(yield*e)}this.DUt.jd(!1)}*nHt(){const t=this.ez();this.LUt.jd(!0);for(const s of this.LUt){const e=this.sHt(s,t);Ox.Mo(e)&&(yield*e)}this.LUt.jd(!1)}async c7(t,s,e){this.qjt=!0;const i="background-wake"===e,r="background-wake"!==e&&"skip-render"!==e,n=this.pB(),h=this.GB();if(!this.zjt||this.PN()&&!s&&!i)return;const o=performance.now();this.Hjt=!0,this.hHt(t||0),this.pUt++,this.oHt();const a=this.aHt();this.iGt()&&await a;const l=this.DAt.If(this.EUt.pretick);l instanceof Promise&&await l,this.IK(this.OUt.pretick);const u=this.lHt();this.iGt()&&await u,this.uHt()&&await this.cHt(),n.SB()&&await this.fHt();const c=this.dHt();this.iGt()&&await c;const f=n.cB(),d=f.a5();let p=!1;if(-1!==d&&(f.l5(),h.o5()!==d)){const t=this.GB().P5(d);this.Hk()&&(p=!0,await t)}this.Vc("canvas","update-html-layer-dom-state",{layersDomState:f._1().filter(t=>t.Cj()).map(t=>t.D2())}),r&&this.cL(),p&&this.Vc("canvas","cleanup-html-layers"),this.oWt()&&(await this.vzt(),this.DN()>=this.gzt())?this.xzt():(this.PN()||i||this.Bzt(),this.jjt++,this.Ujt++,this.Hjt=!1,this.gUt+=performance.now()-o)}async aHt(){const t=this.Hpt,s=this.ez();this.mV(),t.cV(!0),this.uyt(this.cB()),s&&Fx.pHt(),this.iGt()?await t.jyt():t.Nyt(),s&&Fx.mHt(),this.cyt(),t.cV(!1),this.mV(),t.cV(!0)}async lHt(){const t=this.Hpt,s=this.ez(),e=this.iGt(),i=this.DAt,r=this.EUt,n=this.OUt;s&&Fx.pHt(),e?await this.gHt(this.iHt()):this.Kzt(),e?await this.gHt(this.rHt()):this.tHt(),s&&Fx.yHt(),s&&Fx.pHt(),e?await this.wHt(r.tick):i.dispatchEvent(r.tick),s&&Fx.SHt(),t.cV(!1),this.IK(n.tick)}async dHt(){const t=this.Hpt,s=this.DAt,e=this.EUt,i=this.OUt,r=this.ez(),n=this.iGt();r&&Fx.pHt(),n?await t.fyt(this.l4):t.lyt(this.l4),r&&Fx.mHt(),this.hjt.SNt(),this.oHt(),this.Jjt=!1,t.cV(!0),r&&Fx.pHt(),n?await this.gHt(this.nHt()):this.eHt(),r&&Fx.yHt(),r&&Fx.pHt(),n?await this.wHt(e.tick2):s.dispatchEvent(e.tick2),r&&Fx.SHt(),t.cV(!1),this.IK(i.tick2),n&&await t.Tyt(),this.mV(),this.oHt()}oHt(){if(0===this.Gjt.size)return;const t=this.DAt;t.ff(!0);for(const t of this._jt)t.Eyt().Mpt(this.Gjt);this._jt.clear(),this.Hpt.zyt(this.Gjt);for(const t of this.Gjt)t.qr();this.Gjt.clear(),t.ff(!1)}async fHt(){const t=this.pB();let s=0;for(;t.SB()&&s++<10;)await this.vHt(t.L6())}hHt(t){let s=0;this.oWt()?(s=1/this.yzt(),this.eUt=s,this.iUt=s):0!==this.sUt&&(s=Math.max(t-this.sUt,0)/1e3,s>.5&&(s=0),this.eUt=s,this.iUt=Ox.Kr(s,this.hUt,this.nUt)),this.sUt=t,this.rUt=this.iUt*this.EOt,this.oUt.$u(this.rUt),this.aUt.$u(s*this.EOt),this.lUt.$u(this.iUt);for(const[t,s]of this.uUt)s.$u(this.iUt*t.WN());this.Rjt&&this.Rjt.HWt(),t-this.fUt>=1e3&&(this.fUt+=1e3,t-this.fUt>=1e3&&(this.fUt=t),this.dUt=this.cUt,this.cUt=0,this.mUt=this.pUt,this.pUt=0,this.yUt=Math.min(this.gUt/1e3,1),this.gUt=0,this.Rjt&&this.Rjt.zWt(),this.hjt.mNt(),this.ez()&&Fx.bHt())}VOt(t,s){if(s){if(!this.uUt.has(t)){const s=Ox.Hr(Ox.td);s.hd(this.oUt),this.uUt.set(t,s)}}else this.uUt.delete(t)}jOt(t){const s=this.uUt.get(t);return s?s.Hs():this.DN()}async vHt(t){const s=this.DAt,e=this.pB().cB();await e.t6(),e.T5(t,this.gM()),e===t&&this.Hpt.i6(),this.hjt.SNt(),this.oHt(),s.dispatchEvent(this.EUt.beforelayoutchange),Ox.pf.Af(!0),await t.m5(e,this.gM()),Ox.pf.Af(!1),await t.C5(!1),s.dispatchEvent(this.EUt.layoutchange),this.jB(),this.Jjt=!0,this.mV(),this.Mzt()}jB(){this.Fjt=!0}FWt(){return this.Rjt?this.Rjt.FWt():null}DWt(){return this.Rjt?this.Rjt.DWt():null}gM(){return this.Rjt?this.Rjt.gM():null}cL(){const t=this.Rjt;if(!t||t.EWt())return;const s=this.gM(),e=s.MF(),i=e&&s.Vb(),r=e&&s.sv();if(i&&s.aF(),!this.Fjt&&!this.oWt())return void s.kb();const n=this.l4.cB();this.cUt++,s.tF();const h=this.ez();h&&Fx.pHt(),this.Fjt=!1;let o=null;i&&(o=t.XWt().jA(),s.bF(o));let a=null;r&&(a=s.MHt(2*(1+n.s5())),s.g3(0,1)),this.l2()&&"low"===t.v3()?s.uO(t.o3(),t.a3()):s.cO(),this.THt(this.gM(),n),o&&s.TF(o),r&&(s.xHt(),this.Rjt.ZWt(a)),s.Fb(),h&&(Fx.CHt(),Fx.GHt()),t&&t.KWt()}d6(t){return"low"===this.GB().v3()||t.Vb()&&(this.S3()||this.l2())}THt(t,s){t.uv(),t.IO(),t.Pb(),t.vO(1,1,1,1),t.fF(null),t.xO(null),t.eF(this.l2()),this.d6(t)&&s.c6(t);const e=s.o5();for(let i=1;i<e;++i)s.y6(t,i),t.sv()&&t._Ht();this.d6(t)||s.c6(t),s.g6(t)}JU(t,s,e){if(!this.zjt)return!1;const i=!this.Hjt&&!this.Hpt._yt();let r=0;i&&(r=performance.now());const n=this.ez();n&&this.nX(!1);const h=this.Hpt.gyt(this.l4,t,s,e);if(i){const t=performance.now()-r;this.gUt+=t,n&&Fx.IHt(t)}return n&&this.nX(!0),h}HIt(t,s,e){if(!this.iGt())return this.JU(t,s,e);if(this.Myt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.Hjt&&!this.Hpt._yt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this.Hpt.Syt(this.l4,t,s,e)}async KB(t,s,e){if(!this.iGt())return this.JU(t,s,e);if(!this.zjt)return!1;if(this.Myt())return this.Hpt.vyt(t,s,e);if(!this.cB())return this.Hpt.yyt(t,s,e);const i=performance.now(),r=this.Hpt.Syt(this.l4,t,s,e);let n=r.next();for(;!n.done;)await this.pyt(n.value),n=r.next();return this.PN()||this.Hpt._yt()||(await this.Hpt.Tyt(),this.qjt&&!this.Hjt&&this.Bzt()),this.gUt+=performance.now()-i,n.value}qIt(t,s,e){const i=this.ez();i&&this.nX(!1);const r=this.Hpt.xyt(this.l4,t,s,e);return i&&this.nX(!0),r}JIt(t,s,e){return this.Hpt.Cyt(this.l4,t,s,e)}YIt(t){return this.Kjt.$u(t)}uyt(t){this.wjt.push(t)}cyt(){if(!this.wjt.length)throw new Error("layout stack empty");this.wjt.pop()}OB(){return this.wjt.length?this.wjt.at(-1):this.cB()}AN(t){return t&&-1!==t.WN()?this.iUt*t.WN():this.rUt}l7(){return this.rUt}u7(){return this.iUt}ON(){return this.eUt}WN(){return this.EOt}VN(t){(isNaN(t)||t<0)&&(t=0),this.EOt=t}eB(t){this.hUt=Math.max(t,0)}sB(){return this.hUt}nB(t){this.nUt=Math.max(t,0)}rB(){return this.nUt}UN(){return this.dUt}HN(){return this.mUt}JN(){return this.yUt}PHt(){return this.tUt}DN(){return this.oUt.Hs()}RHt(){return this.aUt.Hs()}BN(){return this.lUt.Hs()}kN(){return this.jjt}AHt(){return this.Ujt}EHt(){return this.Tjt}Dk(){return this.VVt}kk(){return this.jVt}Wk(){return this.UVt}Bk(){return this.zVt}jk(){return this.HVt}RB(t){if(this.wUt)throw new Error("cannot call while loading state - wait until afterload event");return this.Cjt.get(t)||null}dDt(t){if(this.wUt)throw new Error("cannot call while loading state - wait until afterload event");this.Cjt.delete(t)}Y5(){this.Cjt.clear();for(const t of this.fjt)if(!t.v1())for(const s of t.iV())this.Cjt.set(s.CU(),s)}wVt(){return"preview"===this.PVt}ez(){return this.DVt}H$(){return this.PVt}q$(){return"nwjs"===this.H$()||this.RVt}vVt(){return"cordova"===this.PVt}OHt(){return"Android"===Ox.Ks.Qs&&("cordova"===this.PVt||"playable-ad-single-file"===this.PVt||"playable-ad-zip"===this.PVt||"instant-games"===this.PVt)}FHt(){return this._Z}DHt(){return this.AVt}J$(){return this.EVt}LHt(){return this.OVt}Ak(){return this.hjt}IRt(){return this.njt.IRt()}PRt(){return this.njt.PRt()}l2(){return this.Ajt}kHt(){return this.gM().US(this.Q1())}WS(t){return this.gM().WS(t||this.Q1())}NHt(){return this.Jjt}BHt(t){t=!!t,this.Ojt!==t&&(this.Ojt=t,this.pB().N6(),this.jB())}Qk(){return this.Ojt}$Ht(t){if(!this.cjt.has(t)){const s=()=>this.WHt(t);this.cjt.set(t,s),t.Sf().addEventListener("animationframeimagechange",s)}const s=this.pw.aw(t);return s.xw()||s.Gw().then(()=>this.jB()),s}WHt(t){this.pw.fw(t)}ljt(t){const s=[];for(const e of t.UEt())for(const t of e.Lq()){const e=t.Vq();s.push({source:t,width:e.jg(),height:e.Qg(),tag:t.eJ()})}return{Mw:s}}async ujt(t){const s=Ox.Hr(Ox.zd),e=[],i=new Map;for(const r of t.UEt())for(const t of r.Lq()){const r=t.Vq().XRt();i.has(r)||(i.set(r,null),e.push(s.$u(async()=>{const t=await r.lQ();i.set(r,t)})))}await Promise.all(e);const r=[];for(const e of t.UEt())for(const t of e.Lq())r.push(s.$u(async()=>{const s=t.Vq(),e=i.get(s.XRt()),r=await s.ZRt(e);return{Iw:await createImageBitmap(r)}}));const n=await Promise.all(r);for(const t of i.values())t instanceof ImageBitmap&&t.close&&t.close();return{Mw:n}}VHt(t){this.SUt=t,this.vUt=!1}jHt(){this.SUt="",this.vUt=!0}UHt(t){this.bUt=t}ZGt(t){this.cz=t}zHt(){return this.MUt}uHt(){return!!(this.SUt||this.vUt||this.bUt||null!==this.cz)}async cHt(){if(this.SUt&&(this.mV(),await this.HHt(this.SUt),this.qHt()),this.bUt&&(await this.JHt(this.bUt),this.qHt(),this.ez()&&Fx.YHt()),this.vUt){const t=await this.XHt();this.MUt=t,await this.KB(Ox.e$.s$.t$.ZHt,null),this.MUt="",this.qHt()}if(null!==this.cz){this.mV();try{await this.KHt(this.cz),this.MUt=this.cz,await this.KB(Ox.e$.s$.t$.QHt,null),this.MUt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.KB(Ox.e$.s$.t$.tqt,null)}this.qHt()}}qHt(){this.SUt="",this.vUt=!1,this.bUt="",this.cz=null}fW(){return this.TUt||(this.TUt=localforage.xe({name:"c3-localstorage-"+this.Wk(),description:this.Dk()})),this.TUt}sqt(){return this.xUt||(this.xUt=localforage.xe({name:"c3-savegames-"+this.Wk(),description:this.Dk()})),this.xUt}async HHt(t){const s=await this.XHt();try{await this.sqt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.MUt=s,await this.KB(Ox.e$.s$.t$.ZHt,null),this.MUt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.KB(Ox.e$.s$.t$.eqt,null)}}async JHt(t){try{const s=await this.sqt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.KHt(s),this.MUt=s,await this.KB(Ox.e$.s$.t$.QHt,null),this.MUt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.KB(Ox.e$.s$.t$.tqt,null)}}async XHt(){const t={c3save:!0,version:1,rt:{time:this.DN(),timeRaw:this.RHt(),walltime:this.BN(),timescale:this.WN(),tickcount:this.kN(),next_uid:this.xjt,running_layout:this.cB().I1(),start_time_offset:Date.now()-this.tUt},types:{},layouts:{},events:this.Hpt.i4(),timelines:this.ett.i4(),user_script_data:null};for(const s of this.fjt)s.v1()||s.fOt()||(t.types[s.I1().toString()]=s.i4());for(const s of this.l4.yB())t.layouts[s.I1().toString()]=s.i4();const s=this.iqt("save");return s.saveData=null,await this.z5(s),t.user_script_data=s.saveData,JSON.stringify(t)}N5(){return this.wUt}async KHt(t){const s=this.pB(),e=JSON.parse(t);if(e.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!e.c3save)throw new Error("not valid C3 save data");if(e.version>1)throw new Error("C3 save data from future version");this.KGt(),this.DAt.dispatchEvent(Ox.Hr(Ox.Event,"beforeload"));for(const t of this.Fzt())t.fU().fOt()||t.c8();const i=e.rt;this.oUt.Set(i.time),i.hasOwnProperty("timeRaw")&&this.aUt.Set(i.timeRaw),this.lUt.Set(i.walltime),this.EOt=i.timescale,this.jjt=i.tickcount,this.tUt=Date.now()-i.start_time_offset;const r=i.running_layout;this.wUt=!0;let n=!1;if(r!==this.cB().I1()){const t=s.R6(r);if(!t)return;await this.vHt(t),n=!0}for(const[t,i]of Object.entries(e.layouts)){const e=parseInt(t,10),r=s.R6(e);r&&r.r4(i)}const h=new Set;for(const[t,s]of Object.entries(e.types)){const e=parseInt(t,10),i=this.QY(e);!i||i.v1()||i.fOt()||i.r4(s,h)}for(const t of this.l4.yB())for(const s of t.HV())s.n4();if(this.mV(),this.Y5(),this.wUt=!1,n){for(const t of this.Fzt())t.B5();for(const[t,s]of Object.entries(e.types)){const e=parseInt(t,10),i=this.QY(e);!i||i.v1()||i.fOt()||i.yOt(s)}}this.xjt=i.next_uid,this.Hpt.r4(e.events);for(const t of this.fjt)if(!t.v1()&&t.TU())for(const s of t.iV()){const e=s._U();s.fFt();for(const i of t.d5().xV()){if(i===t)continue;const r=i.iV();if(e<0||e>=r.length)throw new Error("missing sibling instance");s.X5(r[e])}}this.ett.r4(e.timelines),s.k6(),s.N6();for(const t of h)t.CFt();this.QGt(),this.DAt.dispatchEvent(Ox.Hr(Ox.Event,"afterload")),this.IK(this.iqt("afterload"));for(const[t,s]of Object.entries(e.types)){const s=parseInt(t,10),e=this.QY(s);e&&e.gOt()}const o=this.iqt("load");o.saveData=e.user_script_data,await this.z5(o),this.jB()}rqt(t,s){return s.LB().LLt()-t.LB().LLt()}xkt(t,s){t.LB()&&(this.JUt.has(t)||(this.JUt.set(t,s),this.YUt.push(t)))}KGt(){this.JUt=new WeakMap,Ox.bh(this.YUt),Ox.l6._Dt()}QGt(t="full",s=null){this.YUt.sort(this.rqt),s||(s={}),s.fDt=new Set;const e=this.YUt.length;for(const e of this.YUt)e.d8(this.JUt.get(e),t,s);for(const e of this.YUt)e.RFt(this.JUt.get(e),t,s);if(this.KGt(),e){this.mV(),this.Y5();for(const t of this.l4.yB())for(const s of t.HV())s.f1(),s.VB()}}async nqt(t){const s=await Promise.all(t.map(async t=>{if(this.vVt()&&this.HK.hK()||"playable-ad-single-file"===this.H$()){const s=await this.HK.ro(t);return URL.createObjectURL(s)}return new URL(t,location.href).toString()}));this.kUt.hqt(s)}oqt(t,s){this.kUt.aqt(t,s)}lqt(t,s){this.kUt.uqt(t,s)}cqt(t,s,e,i){return this.kUt.cqt(t,s,e,null,null,i)}fqt(t,s,e,i){return this.kUt.fqt(t,s,e,i)}dqt(){return this.kUt.pqt()}IB(t,s){this.Vc("runtime","invoke-download",{url:t,filename:s})}async oVt(t,s,e,i,r,n){if(i=i||s,r=r||e,this.Hk())return(await this.zB("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:e,surfaceWidth:i,surfaceHeight:r,imageBitmapOpts:n})).imageBitmap;{const h=await self.C3_RasterSvgImageBlob(t,s,e,i,r);return n?await self.createImageBitmap(h,n):h}}async mqt(t){return this.Hk()?await this.zB("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}gqt(){this.IUt||(this.IUt=!0,this.Vc("runtime","enable-device-orientation"))}yqt(){this.PUt||(this.PUt=!0,this.Vc("runtime","enable-device-motion"))}uB(){return this.Qjt()}wqt(t){this.Qjt=t}WUt(){const t=this.gM();return{fps:this.UN(),tps:this.HN(),cpu:this.JN(),gpu:this.XN(),layout:this.cB()?this.cB().Rc():"",renderer:t.Vb()?t.PF():t.LWt()}}Myt(){return!!this.ez()&&Fx.Myt()}pyt(t){return this.iGt()?Fx.pyt(t):Promise.resolve()}Jvt(){return!!this.iGt()&&Fx.Sqt()}vqt(t){this.LVt=!!t,this.bqt()}Mqt(){return this.LVt}iGt(){return this.kVt}nX(t){t?this.NVt--:this.NVt++,this.bqt()}bqt(){this.kVt=this.ez()&&this.LVt&&0===this.NVt}dSt(){return this.ez()&&Fx.dSt()}f3(){return this.ez()&&this.gM().MF()&&Fx.f3()}async gHt(t){if(t)for(const s of t)await this.pyt(s)}wHt(t){return this.gHt(this.DAt.Rf(t))}ygt(t){return this.Hpt.ygt(t.name,t.params)}qB(t){if(this.Hk())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}gW(){return this.zUt}iqt(t){const s=Ox.Hr(Ox.Event,t,!1);return s.runtime=this.zUt,s}hzt(){this.zUt=new self.Ck(this),this.OUt={pretick:this.iqt("pretick"),tick:this.iqt("tick"),tick2:this.iqt("tick2")}}lzt(){const t={};for(const s of this.fjt)t[s.Ugt()]={value:s.$W(),enumerable:!0,writable:!1};this.zUt.nN(t)}uzt(){const t={};for(const s of this.aN().Zgt())t[s.Ugt()]=s.zgt();this.zUt.hN(t)}bB(){return this.qUt}DW(t,s){this.HUt.set(t,s)}YV(t){return this.HUt.get(t)}B$(t){if(!(t instanceof self.UW))throw new TypeError("expected IObjectClass");const s=this.YV(t);if(!(s&&s instanceof Ox.Sct))throw new Error("invalid IObjectClass");return s}tV(t){if(!(t instanceof self.cU))throw new TypeError("expected IInstance");const s=this.YV(t);if(!(s&&s instanceof Ox.Instance))throw new Error("invalid IInstance");return s}DB(t){if(!(t instanceof self.ZH))throw new TypeError("expected IWorldInstance");const s=this.YV(t);if(!(s&&s instanceof Ox.Instance))throw new Error("invalid IInstance");return s}},self.C3_CreateRuntime=Ox.bVt.UC,self.C3_InitRuntime=(t,s)=>t.DOt(s)}{const Bx=self._s;Bx.NUt=class extends Bx.Ur{constructor(t,s){super(),this.Bc=t,this.Tqt=new Map,this.xqt=0,this.Cqt=s.inputPort,s.outputPort.onmessage=t=>this.Gqt(t),this._qt=s.maxNumWorkers,this.Iqt=1,this.Pqt=!1,this.Rqt=!1}pqt(){return this._qt}hqt(t){this.Cqt.postMessage({type:"_import_scripts",scripts:t})}aqt(t,s){this.Cqt.postMessage({type:"_send_blob",blob:t,id:s})}uqt(t,s){this.Cqt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}cqt(t,s,e,i,r,n){if(e||(e=[]),"number"==typeof n&&(n=Math.floor(n))<=0)throw new Error("invalid maxWorkerNum");const h=this.xqt++,o={type:t,isBroadcast:!1,maxWorkerNum:n,jobId:h,params:s,transferables:e},a=new Promise((t,s)=>{this.Tqt.set(h,{resolve:t,progress:i,reject:s,Aqt:!1,Eqt:n})});return r&&r.Xf(()=>this.Oqt(h)),this.Cqt.postMessage(o,e),this.Fqt(),a}fqt(t,s,e,i){if(e||(e=[]),"number"==typeof i&&(i=Math.floor(i))<=0)throw new Error("invalid maxWorkerNum");const r={type:t,isBroadcast:!0,maxWorkerNum:i,jobId:this.xqt++,params:s,transferables:e};this.Cqt.postMessage(r,e)}Oqt(t){const s=this.Tqt.get(t);s&&(s.Aqt=!0,s.resolve=null,s.progress=null,s.reject=null,this.Cqt.postMessage({type:"_cancel",jobId:t}))}Gqt(t){const s=t.data,e=s.type,i=s.jobId;switch(e){case"result":this.Dqt(i,s.result);break;case"progress":this.Lqt(i,s.progress);break;case"error":this.kqt(i,s.error);break;case"ready":this.Nqt();break;default:throw new Error(`unknown message from worker '${e}'`)}}Dqt(t,s){const e=this.Tqt.get(t);if(!e)throw new Error("invalid job ID");e.Aqt||e.resolve(s),this.Tqt.delete(t)}Lqt(t,s){const e=this.Tqt.get(t);if(!e)throw new Error("invalid job ID");!e.Aqt&&e.progress&&e.progress(s)}kqt(t,s){const e=this.Tqt.get(t);if(!e)throw new Error("invalid job ID");e.Aqt||e.reject(s),this.Tqt.delete(t)}Nqt(){this.Pqt&&(this.Pqt=!1,this.Iqt++,this.Iqt<this._qt?this.Fqt():this.Cqt.postMessage({type:"_no_more_workers"}))}Bqt(){let t=0;const s=[...this.Tqt.values()].sort((t,s)=>(t.Eqt||1/0)-(s.Eqt||1/0));for(const e of s)t<(e.Eqt||1/0)&&t++;return t}async Fqt(){if(!(this.Iqt>=this._qt||this.Pqt||this.Rqt||this.Bqt()<=this.Iqt))try{this.Pqt=!0,(await this.Bc.zB("runtime","create-job-worker")).outputPort.onmessage=t=>this.Gqt(t)}catch(t){this.Rqt=!0,this.Pqt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.Iqt} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.vignette={nWt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform mediump float vignetteStart;\nuniform mediump float vignetteEnd;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp float a = front.a;\nif (a != 0.0)\nfront.rgb /= a;\nmediump vec2 tex = (vTex - srcStart) / (srcEnd - srcStart);\nlowp float d = distance(tex, vec2(0.5, 0.5));\nfront.rgb *= smoothstep(vignetteEnd, vignetteStart, d);\nfront.rgb *= a;\ngl_FragColor = front;\n}",rWt:"",sWt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nvignetteStart : f32,\nvignetteEnd : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3PARAMS_STRUCT%%\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\nconst center : vec2<f32> = vec2<f32>(0.5);\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = c3_unpremultiply(textureSample(textureFront, samplerFront, input.fragUV));\nvar rgb : vec3<f32> = front.rgb;\nvar tex : vec2<f32> = c3_srcToNorm(input.fragUV);\nvar d : f32 = distance(tex, center);\nrgb = rgb * smoothstep(shaderParams.vignetteEnd, shaderParams.vignetteStart, d);\nvar output : FragmentOutput;\noutput.color = vec4<f32>(rgb * front.a, front.a);\nreturn output;\n}",cM:!1,dM:!1,Kb:0,tM:0,eM:!1,rM:!1,hM:!0,aM:!1,animated:!1,parameters:[["vignetteStart",0,"percent"],["vignetteEnd",0,"percent"]]},self.C3_Shaders.pixellate={nWt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform mediump vec2 pixelSize;\nuniform mediump float tilesize;\nvoid main(void)\n{\nmediump vec2 tile = pixelSize * tilesize;\nmediump vec2 halftile = tile / 2.0;\nmediump vec2 tex = floor(vTex / tile) * tile + halftile;\ntex = clamp(tex, min(srcOriginStart, srcOriginEnd), max(srcOriginStart, srcOriginEnd));\ngl_FragColor = texture2D(samplerFront, tex);\n}",rWt:"#version 300 es\nin mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nout lowp vec4 outColor;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform mediump vec2 pixelSize;\nuniform mediump float tilesize;\nvoid main(void)\n{\nmediump vec2 tile = pixelSize * tilesize;\nmediump vec2 halftile = tile / 2.0;\nmediump vec2 tex = floor(vTex / tile) * tile + halftile;\ntex = clamp(tex, min(srcOriginStart, srcOriginEnd), max(srcOriginStart, srcOriginEnd));\noutColor = textureGrad(samplerFront, tex, dFdx(vTex), dFdy(vTex));\n}",sWt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\ntilesize : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3PARAMS_STRUCT%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar tile : vec2<f32> = vec2<f32>(shaderParams.tilesize) / vec2<f32>(textureDimensions(textureFront));\nvar halftile : vec2<f32> = tile / 2.0;\nvar tex : vec2<f32> = floor(input.fragUV / tile) * tile + halftile;\ntex = c3_clampToSrcOrigin(tex);\nvar output : FragmentOutput;\noutput.color = textureSampleGrad(textureFront, samplerFront, tex, dpdx(input.fragUV), dpdy(input.fragUV));\nreturn output;\n}",cM:!1,dM:!1,Kb:0,tM:0,eM:!1,rM:!1,hM:!1,aM:!1,animated:!1,parameters:[["tilesize",0,"float"]]},self.C3_Shaders.replacecolor={nWt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp vec3 sourceColor;\nuniform lowp vec3 destColor;\nuniform lowp float tolerance;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp float a = front.a;\nif (a != 0.0)\nfront.rgb /= a;\nlowp float diff = length(front.rgb - sourceColor);\nif (diff <= tolerance)\n{\nfront.rgb = mix(front.rgb, destColor, 1.0 - diff / tolerance);\n}\nfront.rgb *= a;\ngl_FragColor = front;\n}",rWt:"",sWt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nsourceColor : vec3<f32>,\ndestColor : vec3<f32>,\ntolerance : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = c3_unpremultiply(textureSample(textureFront, samplerFront, input.fragUV));\nvar rgb : vec3<f32> = front.rgb;\nvar diff : f32 = length(rgb - shaderParams.sourceColor);\nif (diff <= shaderParams.tolerance)\n{\nrgb = mix(rgb, shaderParams.destColor, 1.0 - diff / shaderParams.tolerance);\n}\nvar output : FragmentOutput;\noutput.color = vec4<f32>(rgb * front.a, front.a);\nreturn output;\n}",cM:!1,dM:!1,Kb:0,tM:0,eM:!1,rM:!1,hM:!0,aM:!1,animated:!1,parameters:[["sourceColor",0,"color"],["destColor",0,"color"],["tolerance",0,"percent"]]},self.C3_Shaders.fogexponential={nWt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform lowp sampler2D samplerDepth;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nuniform mediump float zNear;\nuniform mediump float zFar;\nuniform lowp vec3 fogColor;\nuniform mediump float fogDensity;\nuniform mediump float nearDist;\nvoid main(void)\n{\nmediump float log2 = 1.442695;\nlowp vec4 front = texture2D(samplerFront, vTex);\nmediump vec2 tex = (vTex - srcStart) / (srcEnd - srcStart);\nmediump float depthSample = texture2D(samplerDepth, mix(destStart, destEnd, tex)).r;\nmediump float zLinear = zNear * zFar / (zFar + depthSample * (zNear - zFar));\nmediump float fogDist = max(zLinear - nearDist, 0.0);\nmediump float fogAmount = clamp(1.0 - exp2(-fogDensity * fogDensity * fogDist * fogDist * log2), 0.0, 1.0);\ngl_FragColor = mix(front, vec4(fogColor * front.a, front.a), fogAmount);\n}",rWt:"",sWt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\n%%SAMPLERDEPTH_BINDING%% var samplerDepth : sampler;\n%%TEXTUREDEPTH_BINDING%% var textureDepth : texture_depth_2d;\nstruct ShaderParams {\nfogColor : vec3<f32>,\nfogDensity : f32,\nnearDist : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n%%C3PARAMS_STRUCT%%\nconst log_2 = 1.442695;\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar depthSample : f32 = textureSample(textureDepth, samplerDepth, c3_getDepthUV(input.fragPos.xy, textureDepth));\nvar zLinear : f32 = c3_linearizeDepth(depthSample);\nvar fogDist = max(zLinear - shaderParams.nearDist, 0.0);\nvar fogAmount : f32 = clamp(1.0 - exp2(-shaderParams.fogDensity * shaderParams.fogDensity * fogDist * fogDist * log_2), 0.0, 1.0);\nvar output : FragmentOutput;\noutput.color = mix(front, vec4<f32>(shaderParams.fogColor * front.a, front.a), fogAmount);\nreturn output;\n}",cM:!1,dM:!0,Kb:0,tM:0,eM:!1,rM:!1,hM:!1,aM:!1,animated:!1,parameters:[["fogColor",0,"color"],["fogDensity",0,"percent"],["nearDist",0,"float"]]},self.C3_Shaders.depthstripe={nWt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform lowp sampler2D samplerDepth;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nuniform mediump float zNear;\nuniform mediump float zFar;\nuniform lowp vec3 color1;\nuniform lowp float opacity1;\nuniform lowp vec3 color2;\nuniform lowp float opacity2;\nuniform mediump float stripeDepth;\nuniform mediump float stripeOffset;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nmediump vec2 tex = (vTex - srcStart) / (srcEnd - srcStart);\nmediump float depthSample = texture2D(samplerDepth, mix(destStart, destEnd, tex)).r;\nmediump float zLinear = zNear * zFar / (zFar + depthSample * (zNear - zFar));\nlowp float which = mod(floor((zLinear + stripeOffset) / stripeDepth), 2.0);\nif (which == 0.0)\n{\ngl_FragColor = mix(front, vec4(color1 * front.a, front.a), opacity1);\n}\nelse\n{\ngl_FragColor = mix(front, vec4(color2 * front.a, front.a), opacity2);\n}\n}",rWt:"",sWt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\n%%SAMPLERDEPTH_BINDING%% var samplerDepth : sampler;\n%%TEXTUREDEPTH_BINDING%% var textureDepth : texture_depth_2d;\nstruct ShaderParams {\ncolor1 : vec3<f32>,\nopacity1 : f32,\ncolor2 : vec3<f32>,\nopacity2 : f32,\nstripeDepth : f32,\nstripeOffset : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3PARAMS_STRUCT%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar depthSample : f32 = textureSample(textureDepth, samplerDepth, c3_getDepthUV(input.fragPos.xy, textureDepth));\nvar zLinear : f32 = c3_linearizeDepth(depthSample);\nvar which : f32 = floor((zLinear + shaderParams.stripeOffset) / shaderParams.stripeDepth) % 2.0;\nvar stripeColor : vec3<f32> = select(shaderParams.color2, shaderParams.color1, which == 0.0);\nvar stripeOpacity : f32 = select(shaderParams.opacity2, shaderParams.opacity1, which == 0.0);\nvar output : FragmentOutput;\noutput.color = mix(front, vec4<f32>(stripeColor * front.a, front.a), stripeOpacity);\nreturn output;\n}",cM:!1,dM:!0,Kb:0,tM:0,eM:!1,rM:!1,hM:!1,aM:!1,animated:!1,parameters:[["color1",0,"color"],["opacity1",0,"percent"],["color2",0,"color"],["opacity2",0,"percent"],["stripeDepth",0,"float"],["stripeOffset",0,"float"]]};{let $x=function(t,s){const e=t[1],i=s[1];if("number"==typeof e&&"number"==typeof i)return e-i;{const t=""+e,s=""+i;return t<s?-1:t>s?1:0}};ForEachOrdered_SortInstances=$x;const Wx=self._s;let Vx=null,jx="",Ux="",zx=[],Hx="",qx="",Jx="";const Yx=Wx.Hr(Wx.Vmt);Wx.e$.s$=class extends Wx.Z_t{constructor(t){super(t),this.kmt=this.Bc.aN().iX(),this.Tpt=this.Bc.aN().bN(),this.$qt=0,this.Wqt=0,this.Vqt=new Map}qr(){super.qr()}jB(){this.Bc.jB()}JU(t){this.Bc.JU(t,null,null)}jqt(t,s){return Vx&&t===jx&&s===Ux||(Vx=new RegExp(t,s),jx=t,Ux=s),Vx.lastIndex=0,Vx}Uqt(t,s,e){if(t===Hx&&s===qx&&e===Jx)return zx;const i=this.jqt(s,e);return zx=t.match(i),Hx=t,qx=s,Jx=e,zx}async zqt(t,s){if(!s.length)return;this.$qt+=s.length;const e=[];for(const i of s)e.push(t.y5(i));await Wx.Vh(e,()=>{this.Wqt++}),this.Wqt++,this.Wqt===this.$qt&&(this.Wqt=0,this.$qt=0,this.Bc.JU(Wx.e$.s$.t$.Hqt,null,null))}PK(){return 0===this.$qt?1:this.Wqt/this.$qt}qqt(t,s){for(const e of s)0===e.oV()&&t.b5(e)}Jqt(){return Yx}Yqt(t){const s=this.Bc.aN(),e=s.bN(),i=e.sX(),r=i.pN(),n=r.tX(),h=i.Tmt(),o=e.eX(r),a=s.iX(),l=a.eX();if(l.$mt(t),h)for(let e=0;e<t&&!l.fX();++e)s.oX(n),l.uX(e),r.aX(i,o),s.lX(n);else for(let s=0;s<t&&!l.fX();++s)l.uX(s),r.aX(i,o);return e.dX(),a.dX(),!1}*Xqt(t){const s=this.Bc.aN(),e=s.bN(),i=e.sX(),r=i.pN(),n=r.tX(),h=i.Tmt(),o=e.eX(r),a=s.iX(),l=a.eX();if(l.$mt(t),h)for(let e=0;e<t&&!l.fX();++e)s.oX(n),l.uX(e),yield*r.nbt(i,o),s.lX(n);else for(let s=0;s<t&&!l.fX();++s)l.uX(s),yield*r.nbt(i,o);return e.dX(),a.dX(),!1}Zqt(){const t=this.Bc.aN(),s=t.bN(),e=s.sX(),i=e.pN(),r=i.tX(),n=e.Tmt(),h=s.eX(i),o=t.iX(),a=o.eX();if(n)for(let s=0;!a.fX();++s)t.oX(r),a.uX(s),i.aX(e,h)||a.nJ(),t.lX(r);else for(let t=0;!a.fX();++t)a.uX(t),i.aX(e,h)||a.nJ();return s.dX(),o.dX(),!1}*Kqt(){const t=this.Bc.aN(),s=t.bN(),e=s.sX(),i=e.pN(),r=i.tX(),n=e.Tmt(),h=s.eX(i),o=t.iX(),a=o.eX();if(n)for(let s=0;!a.fX();++s)t.oX(r),a.uX(s),(yield*i.nbt(e,h))||a.nJ(),t.lX(r);else for(let t=0;!a.fX();++t)a.uX(t),(yield*i.nbt(e,h))||a.nJ();return s.dX(),o.dX(),!1}Qqt(t,s,e){const i=this.Bc.aN(),r=i.bN(),n=r.sX(),h=n.pN(),o=h.tX(),a=n.Tmt(),l=r.eX(h),u=i.iX(),c=u.eX();if(c.rX(t),c.$mt(e),e<s)if(a)for(let t=s;t>=e&&!c.fX();--t)i.oX(o),c.uX(t),h.aX(n,l),i.lX(o);else for(let t=s;t>=e&&!c.fX();--t)c.uX(t),h.aX(n,l);else if(a)for(let t=s;t<=e&&!c.fX();++t)i.oX(o),c.uX(t),h.aX(n,l),i.lX(o);else for(let t=s;t<=e&&!c.fX();++t)c.uX(t),h.aX(n,l);return r.dX(),u.dX(),!1}*tJt(t,s,e){const i=this.Bc.aN(),r=i.bN(),n=r.sX(),h=n.pN(),o=h.tX(),a=n.Tmt(),l=r.eX(h),u=i.iX(),c=u.eX();if(c.rX(t),c.$mt(e),e<s)if(a)for(let t=s;t>=e&&!c.fX();--t)i.oX(o),c.uX(t),yield*h.nbt(n,l),i.lX(o);else for(let t=s;t>=e&&!c.fX();--t)c.uX(t),yield*h.nbt(n,l);else if(a)for(let t=s;t<=e&&!c.fX();++t)i.oX(o),c.uX(t),yield*h.nbt(n,l),i.lX(o);else for(let t=s;t<=e&&!c.fX();++t)c.uX(t),yield*h.nbt(n,l);return r.dX(),u.dX(),!1}sJt(t){const s=t.rV(),e=s.iV();if(0===e.length)return!1;const i=this.Bc.aN(),r=i.bN(),n=r.sX(),h=n.pN(),o=h.tX(),a=n.Tmt(),l=r.eX(h),u=i.iX(),c=u.eX(),f=t.TU(),d=Yx.eX();if(Wx.Ch(d,e),c.$mt(d.length),a)for(let s=0,e=d.length;s<e&&!c.fX();++s){i.oX(o);const e=d[s];t.rV().kpt(e),f&&e.SSt(),c.uX(s),h.aX(n,l),i.lX(o)}else{s.Fpt(!1);const t=s.Dpt();Wx.bh(t),t.push(null);for(let s=0,e=d.length;s<e&&!c.fX();++s){const e=d[s];t[0]=e,f&&e.SSt(),c.uX(s),h.aX(n,l)}}return r.dX(),u.dX(),Wx.bh(d),Yx.dX(),!1}*eJt(t){const s=t.rV(),e=s.iV();if(0===e.length)return!1;const i=this.Bc.aN(),r=i.bN(),n=r.sX(),h=n.pN(),o=h.tX(),a=n.Tmt(),l=r.eX(h),u=i.iX(),c=u.eX(),f=t.TU(),d=Yx.eX();if(Wx.Ch(d,e),c.$mt(d.length),a)for(let s=0,e=d.length;s<e&&!c.fX();++s){i.oX(o);const e=d[s];t.rV().kpt(e),f&&e.SSt(),c.uX(s),yield*h.nbt(n,l),i.lX(o)}else{s.Fpt(!1);const t=s.Dpt();Wx.bh(t),t.push(null);for(let s=0,e=d.length;s<e&&!c.fX();++s){const e=d[s];t[0]=e,f&&e.SSt(),c.uX(s),yield*h.nbt(n,l)}}return r.dX(),u.dX(),Wx.bh(d),Yx.dX(),!1}iJt(t,s){const e=t.rV(),i=e.iV();if(0===i.length)return!1;const r=this.Bc.aN(),n=r.bN(),h=r.Dgt(),o=n.sX(),a=o.pN(),l=a.tX(),u=o.Tmt(),c=n.eX(a),f=r.iX(),d=f.eX(),p=t.TU(),m=Yx.eX();Wx.bh(m),d.$mt(i.length);for(let t=0,s=i.length;t<s;++t)m.push([i[t],h.bxt(1,t)]);if(m.sort($x),1===s&&m.reverse(),u)for(let s=0,e=m.length;s<e&&!d.fX();++s){r.oX(l);const e=m[s][0];t.rV().kpt(e),p&&e.SSt(),d.uX(s),a.aX(o,c),r.lX(l)}else{e.Fpt(!1);const t=e.Dpt();Wx.bh(t),t.push(null);for(let s=0,e=m.length;s<e&&!d.fX();++s){const e=m[s][0];t[0]=e,p&&e.SSt(),d.uX(s),a.aX(o,c)}}return n.dX(),f.dX(),Wx.bh(m),Yx.dX(),!1}*rJt(t,s){const e=t.rV(),i=e.iV();if(0===i.length)return!1;const r=this.Bc.aN(),n=r.bN(),h=r.Dgt(),o=n.sX(),a=o.pN(),l=a.tX(),u=o.Tmt(),c=n.eX(a),f=r.iX(),d=f.eX(),p=t.TU(),m=Yx.eX();Wx.bh(m),d.$mt(i.length);for(let t=0,s=i.length;t<s;++t)m.push([i[t],h.bxt(1,t)]);if(m.sort($x),1===s&&m.reverse(),u)for(let s=0,e=m.length;s<e&&!d.fX();++s){r.oX(l);const e=m[s][0];t.rV().kpt(e),p&&e.SSt(),d.uX(s),yield*a.nbt(o,c),r.lX(l)}else{e.Fpt(!1);const t=e.Dpt();Wx.bh(t),t.push(null);for(let s=0,e=m.length;s<e&&!d.fX();++s){const e=m[s][0];t[0]=e,p&&e.SSt(),d.uX(s),yield*a.nbt(o,c)}}return n.dX(),f.dX(),Wx.bh(m),Yx.dX(),!1}nJt(t,s){let e=this.Vqt.get(t);return e||(s?(e={hJt:null,oJt:new Map},this.Vqt.set(t,e),e):null)}aJt(t,s,e,i,r){s.fN().bbt(e,s.yN()),i&&t.lX(r)}*lJt(t,s,e,i,r){yield*s.fN().Mbt(e,s.yN()),i&&t.lX(r)}}}{const Xx=self._s;Xx.e$.s$.dEt=class extends Xx.Ur{constructor(t){super(),this.mpt=t,this.Bc=t.l$(),this.LIt=t.HW()}vIt(){}qr(){this.mpt=null,this.Bc=null,this.LIt=null}}}{const Zx=self._s;Zx.e$.s$.Instance=class extends Zx.Ur{constructor(t,s){super(),this.fe=t,this.mpt=this.fe.fU(),this.VIt=this.mpt.Kxt(),this.Bc=this.fe.l$()}qr(){this.fe=null,this.mpt=null,this.VIt=null,this.Bc=null}}}{const Kx=self._s,Qx=[];Kx.e$.s$.t$={uJt:()=>!0,q5:()=>!0,s6:()=>!0,Jzt:()=>!0,Yzt:()=>!0,PN(){return this.Bc.PN()},ivt(){const t=this.Bc.Fgt();return!t.wmt()&&!t.gmt()},cJt(){const t=this.Bc.Dgt().axt();let s=t.get("TriggerOnce_lastTick");void 0===s&&(s=-1,t.set("TriggerOnce_lastTick",-1));const e=this.Bc.kN();return t.set("TriggerOnce_lastTick",e),this.Bc.NHt()||s!==e-1},fJt(t){const s=this.Bc.Dgt().axt(),e=s.get("Every_lastTime")||0,i=this.Bc.DN();s.has("Every_seconds")||s.set("Every_seconds",t);const r=s.get("Every_seconds");return i>=e+r?(s.set("Every_lastTime",e+r),i>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",i),s.set("Every_seconds",t),!0):(i<e-.1&&s.set("Every_lastTime",i),!1)},Swt(t){const s=this.Bc.aN().syt(t);return s&&s.Swt()},wVt(){return this.Bc.wVt()},oe:()=>Kx.Ks.oe,Izt:()=>!0,QB:()=>!0,dJt:()=>!0,ZHt:()=>!0,eqt:()=>!0,QHt:()=>!0,tqt:()=>!0,pJt(t){return!!this.Bc.RB(t)},mJt(t){switch(t){case 0:return"browser"===Kx.Ks.ne;case 1:return"iOS"===Kx.Ks.Qs;case 2:return"Android"===Kx.Ks.Qs;case 8:return"cordova"===Kx.Ks.ne;case 9:return"scirra-arcade"===this.Bc.H$();case 10:return"nwjs"===Kx.Ks.ne;case 13:return"windows-uwp"===this.Bc.H$();default:return!1}},gJt(t,s,e){return this.jqt(s,e).test(t)},yJt:(t,s,e)=>Kx.compare(t,s,e),wJt:(t,s,e)=>t>=s&&t<=e,SJt:(t,s,e)=>Kx.compare(t.Irt(),s,e),vJt:t=>!!t.Irt(),bJt(t,s){const e=this.Bc.DN();if(0===t){const t=this.Bc.Dgt().axt();return!t.get("CompareTime_executed")&&e>=s&&(t.set("CompareTime_executed",!0),!0)}return Kx.compare(e,t,s)},MJt:t=>isNaN(t),S_t:(t,s,e)=>Kx.ln(Kx.tn(t),Kx.tn(e))<=Kx.tn(s),v_t:(t,s)=>Kx.cn(Kx.tn(t),Kx.tn(s)),PCt(t,s,e){let i=Kx.tn(t),r=Kx.tn(s),n=Kx.tn(e);return Kx.cn(n,r)?Kx.cn(i,r)&&!Kx.cn(i,n):!(!Kx.cn(i,r)&&Kx.cn(i,n))},TJt:(t,s)=>"number"==typeof t?0===s:1===s,xJt:t=>!!t,Zyt(t){return t.toLowerCase()===this.Bc.aN().swt()},CJt(t,s,e,i){if(!t)return!1;const r=this.Jqt(),n=r.eX(),h=t.rV();Kx.Ch(n,h.iV()),h._pt()&&Kx.bh(h.Lpt());const o=this.Bc.Dgt();let a=0;for(let t=0,r=n.length;t<r;++t){const r=n[t];n[a]=r,s=o.bxt(1,t),i=o.bxt(3,t),Kx.compare(s,e,i)?++a:h.Opt(r)}Kx.Sh(n,a),h.Npt(n);const l=!!n.length;return Kx.bh(n),r.dX(),t.pbt(),l},GJt(t,s){if(!t)return!1;const e=this.Jqt(),i=e.eX(),r=t.rV();Kx.Ch(i,r.iV()),r._pt()&&Kx.bh(r.Lpt());const n=this.Bc.Dgt();let h=0;for(let t=0,s=i.length;t<s;++t){const s=i[t];i[h]=s,n.bxt(1,t)?++h:r.Opt(s)}Kx.Sh(i,h),r.Npt(i);const o=!!i.length;return Kx.bh(i),e.dX(),t.pbt(),o},_Jt(t,s,e){if(!t)return!1;const i=t.rV(),r=i.iV();if(0===r.length)return!1;const n=this.Bc.Dgt();let h=null,o=0;for(let t=0,i=r.length;t<i;++t){const i=r[t];e=n.bxt(2,t),(null===h||0===s&&e<o||1===s&&e>o)&&(o=e,h=i)}return i.jpt(h),t.pbt(),!0},IJt(t,s){if(!t)return!1;const e=t.rV(),i=e.iV();if((s=Math.floor(s))>=i.length)return!1;const r=i[s];return e.jpt(r),t.pbt(),!0},PJt(t){if(!t)return!1;const s=t.rV(),e=s.iV(),i=Math.floor(this.Bc.uB()*e.length);if(i>=e.length)return!1;const r=e[i];return s.jpt(r),t.pbt(),!0},RJt:t=>!!t&&(!!t.oV()&&(t.rV().Fpt(!0),t.pbt(),!0)),AJt(t,s,e){if(!t)return!1;const i=t.rV(),r=i.iV(),n=this.Bc.pN().Upt(),h=this.Bc.Dgt().ixt();i._pt()?(Kx.Ch(Qx,r),i.Gpt(),i.Fpt(!1)):n?(Kx.Ch(Qx,i.Lpt()),Kx.bh(i.Lpt())):(Kx.Ch(Qx,i.Dpt()),Kx.bh(i.Dpt()));for(let t=0,r=Qx.length;t<r;++t){const r=Qx[t];Kx.xor(r.LB().nH(s,e),h)?i.Ept(r):i.Opt(r)}return t.pbt(),Kx.xor(!!i.Dpt().length,h)},EJt(t){if(!t)return!1;const s=t.v1();let e=null;const i=this.Bc.eOt();for(let r=i.length-1;r>=0;--r){const n=i[r];if(s){if(n.fU().rCt(t)){e=n;break}}else if(n.fU()===t){e=n;break}}if(!e){const s=t.iV();s.length&&(e=s.at(-1))}return!!e&&(t.rV().jpt(e),t.pbt(),!0)},OJt(t){return this.Bc.iGt()?this.Xqt(t):this.Yqt(t)},FJt(){return this.Bc.iGt()?this.Kqt():this.Zqt()},DJt(t,s,e){return this.Bc.iGt()?this.tJt(t,s,e):this.Qqt(t,s,e)},Ud(t){return this.Bc.iGt()?this.eJt(t):this.sJt(t)},LJt(t,s,e){return this.Bc.iGt()?this.rJt(t,e):this.iJt(t,e)},kJt:t=>!!t&&t.vj(),NJt:t=>!!t&&t.Ij(),BJt:t=>!!t&&t.Cj(),$Jt:t=>!!t&&!t.oV(),WJt:(t,s,e)=>!!t&&Kx.compare(100*t.SO(),s,e),VJt(t){const s=this.Bc.cB();return!!s&&s.e5(t)},Hqt:()=>!0,jJt(){return this.$qt>0},UJt(t,s){const e=this.Bc.cFt();return!!e&&!!s&&!!e.wct(t,s)}}}{let tC=function(t,s){const e=t[0]-s[0];return 0!==e?e:t[1]-s[1]},sC=function(t,s){return t[1]-s[1]};SortZOrderList=tC,SortInstancesByValue=sC;const eC=self._s,iC=[],rC=[],nC=eC.Hr(eC.Rect),hC=eC.Hr(eC.xo),oC=[];eC.e$.s$.wht={zJt(t,s){t.unt(s)},HJt(t,s){t.Xe()&&"number"!=typeof s&&(s=parseFloat(s)),t.unt(t.Irt()+s)},qJt(t,s){t.Xe()&&t.unt(t.Irt()-s)},JJt(t,s){t.unt(!!s)},YJt(t){t.unt(!t.Irt())},XJt(t){t.unt(t.Ogt())},ZJt(t){this.Bc.aN().Qgt(t)},KJt(t,s,e,i,r,n){if(!t||!s)return;const h=this.Bc.lV(t,s,e,i,r,n);if(!h)return;r&&s.uV(h);const o=this.Bc.aN();o.cV(!0),h.fV(),o.cV(!1);const a=new Map;h.eFt(a,t,r);for(const[t,s]of a)t.rV().Bpt(s)},QJt(t,s,e,i,r,n){if(!t||!s)return;const h=this.Bc.Ozt(t);h&&eC.e$.s$.wht.KJt.call(this,h,s,e,i,r,n)},w1(t,s,e,i,r,n,h,o,a,l,u){if(!t)return;const c=this.Bc.OB();let f=c;if(n){const t=this.Bc.pB().P6(n);if(!t)return;f=t}let d=null;if(("number"!=typeof h||h>=0)&&(d=f.kB(h),!d))return;let p=null;if(("number"!=typeof o||o>=0)&&(p=c.kB(o),!p))return;nC.set(s,e,i,r);const m=f.w1(t,nC,d,p,a,l,u);t.rV().Npt(m),t.pbt()},tYt(){const t=this.kmt;t.Omt()&&t.Amt().nJ()},vwt(t,s){const e=this.Bc.aN().syt(t);e&&(0===s?e.vwt(!1):1===s?e.vwt(!0):e.vwt(!e.Swt()))},sYt(t){this.Bc.VN(t)},eYt(t,s){if(s<0&&(s=0),!t)return;const e=t.rV().iV();for(const t of e)t.VN(s)},iYt(t){if(!t)return;const s=t.rV().iV();for(const t of s)t.EU()},ph(t,s){if(t<0)return;const e=this.Bc.aN().Dyt();return s?e.V_t(t):e.j_t(t),!0},GN(t){return this.Bc.aN().Dyt().U_t(t),!0},rYt(){const t=this.Bc.aN();return t.Dyt().z_t(t.Xyt()),!0},xN(t){this.Bc.aN().xN(t)},async ZB(t,s,e,i,r,n){const h=this.Bc.GB();h&&(this.jB(),await h.ZB(0===t?"image/png":"image/jpeg",s/100,e,i,r,n),await this.Bc.KB(eC.e$.s$.t$.QB,null))},nYt(t,s){if(t<=0||s<=0)return;this.Bc.bWt(t,s),this.Bc.OB().J3();const e=this.Bc.GB();e&&("off"===e.pWt()||this.Bc.Dzt(t,s),e.$R(e.nY(),e.hY(),!0),this.Bc.jB())},hYt(t){const s=this.Bc.GB();s&&"off"!==s.pWt()&&(s.IWt(0!==t?"high":"low"),s.$R(s.nY(),s.hY(),!0))},Hit(t){this.Bc.VHt(t)},oYt(){this.Bc.jHt()},aYt(t){this.Bc.UHt(t)},lYt(t){this.Bc.ZGt(t)},uYt(t){},cYt(){for(const t of this.Bc.pB().yB())t.u6()},fYt(t){this.Bc.BHt(0!==t)},dYt(t,s){this.Bc.nB(1/t),this.Bc.eB(1/s)},pYt(t,s){this.Bc.eB(t),this.Bc.nB(s)},mYt(t){this.Bc.QN(["vsync","unlimited-tick","unlimited-frame"][t])},gYt(t,s){if(!t)return;const e=t.rV().iV(),i=iC,r=rC,n=this.Bc.OB(),h=t.v1(),o=t.kMt();for(let t=0,n=e.length;t<n;++t){const n=e[t],a=n.LB();if(!a)continue;let l;l=h?n.uot(s+n.fU().LMt(o)):n.uot(s),i.push([a.kB().Tk(),a.NB()]),r.push([n,l])}if(!i.length)return;i.sort(tC),r.sort(sC);let a=!1;for(let t=0,s=i.length;t<s;++t){const s=r[t][0],e=n.BB(i[t][0]),h=i[t][1],o=e.$B();o[h]!==s&&(o[h]=s,s.LB().WB(e,!0),e.VB(s),a=!0)}a&&this.Bc.jB(),eC.bh(iC),eC.bh(rC)},D$(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Bc.Ak().D$(t,s)},yYt(t){if(this.Bc.Cw())return;const s=this.Bc.pB();s.SB()||s.vB(t)},wYt(t){if(this.Bc.Cw())return;const s=this.Bc.pB();if(s.SB())return;const e=s.P6(t);e&&s.vB(e)},SYt(t){if(this.Bc.Cw())return;const s=this.Bc.pB();if(s.SB())return;const e=s.yB(),i=e.indexOf(s.cB());if(t&&0===i)return;if(!t&&i===e.length-1)return;const r=e[i+(t?-1:1)];s.vB(r)},vYt(){if(this.Bc.Cw())return;const t=this.Bc.pB();t.SB()||(t.vB(t.cB()),this.Bc.aN().nyt())},bYt(t,s){t&&t.wj(s)},MYt(t,s){t&&t.Tj(s)},TYt(t,s){t&&t.Gj(s)},xYt(t,s){t&&t.bO(s/100)},CYt(t,s){t&&t.Pj(s)},GYt(t,s){t&&t.Ej(s)},_Yt(t,s){t&&t.OV(eC.tn(+s))},IYt(t,s,e){t&&(t.Kj(!0),t.DV(s),t.kV(e))},PYt(t){t&&t.Kj(!1)},RYt(t,s,e){t&&t.t2(s/100,e/100)},AYt(t,s){t&&t.sT(+s)},EYt(t,s){t&&t.Vj(1===s)},OYt(t,s){if(!t)return;hC.ta(s),hC.Kr();const e=t.Zj();e.Ho(hC)||(e.ko(hC),this.jB())},FYt(t,s){t&&t.zj(s)},DYt(t,s){t&&t.NM(s)},LYt(t,s,e){if(!t)return;const i=t._V().Lnt(e);if(!i)return;const r=1===s;i.uSt()!==r&&(i.Ukt(r),t.bq(),this.Bc.jB())},kYt(t,s,e,i){if(!t)return;const r=t._V(),n=r.Lnt(s);if(!n)return;e=Math.floor(e);const h=n.HG().JG(e);h&&("color"===h?(hC.ta(i),i=hC):"percent"===h&&(i/=100),r.Tq(n.Tk(),e,i)&&n.uSt()&&this.Bc.jB())},NYt(t,s){t&&t.Jj(s)},BYt(t){this.Bc.OB().AV(+t)},$Yt(t){this.Bc.OB().OV(eC.tn(+t))},WYt(t,s){const e=this.Bc.OB(),i=e._V().Lnt(s);if(!i)return;const r=1===t;i.uSt()!==r&&(i.Ukt(r),e.bq(),this.Bc.jB())},VYt(t,s,e){const i=this.Bc.OB()._V(),r=i.Lnt(t);if(!r)return;s=Math.floor(s);const n=r.HG().JG(s);n&&("color"===n?(hC.ta(e),e=hC):"percent"===n&&(e/=100),i.Tq(r.Tk(),s,e)&&r.uSt()&&this.Bc.jB())},jYt(t,s){this.Bc.OB().rj(t/100,s/100)},UYt(t){const s=this.Bc.OB();0===t?s.oj():s.aj()},zYt(t){this.Bc.OB().DV(t)},HYt(t){this.Bc.OB().kV(t)},qYt(t,s){const e=this.Bc.OB();e.DV(t),e.kV(s)},JYt(t){if(!t)return;const s=t.zCt();if(!s)return;const e=s.LB();if(!e)return;const i=this.Bc.OB();i.DV(e.YM()),i.kV(e.KM())},XV(t,s,e){const i=this.Bc.OB();try{i.XV(t,s,e)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},KV(t,s,e){if(!t)return;const i=this.Bc.OB();try{i.KV(t,s,e)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},tj(t){t&&this.Bc.OB().tj(t)},ej(){this.Bc.OB().ej()},async YYt(t){const s=this.Bc.cB();if(!s||!t||this.Bc.Cw())return;const e=t.v1()?t.TV():[t];await this.zqt(s,e)},async XYt(t){await eC.e$.s$.wht.YYt.call(this,this.Bc.Ozt(t))},ZYt(t){const s=this.Bc.cB();if(!s||!t)return;const e=t.v1()?t.TV():[t];this.qqt(s,e)},KYt(t){eC.e$.s$.wht.ZYt.call(this,this.Bc.Ozt(t))},QYt(){const t=this.Bc.cB();if(!t)return;const s=t.p5();this.qqt(t,s)},async tXt(t){const s=this.Bc.cB();t&&s&&!this.Bc.Cw()&&await this.zqt(s,t.c5())},async sXt(t){const s=this.Bc.cB(),e=this.Bc.pB().P6(t);e&&s&&!this.Bc.Cw()&&await this.zqt(s,e.c5())},TN(t){const s=this.Tpt.vN();if(s)switch(s.MN()){case 1:"number"==typeof t&&s.TN(t);break;case 2:"string"==typeof t&&s.TN(t);break;case 3:s.TN(t)}},eXt(t,s,e){const i=this.nJt(t.toLowerCase(),!0),r=i.oJt,n=s.toLowerCase();r.has(n)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`);const h=eC.$h(r.values())||i.hJt;h&&0!==h.wN()!=(0!==e.wN())?console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`):r.set(n,e)},iXt(t,s){const e=this.nJt(t.toLowerCase(),!0);e.hJt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const i=eC.$h(e.oJt.values())||e.hJt;i&&0!==i.wN()!=(0!==s.wN())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):e.hJt=s},rXt(t,s,e){const i=this.Bc,r=i.iGt()?oC:null;e=Math.floor(e);const n=this.nJt(t.toLowerCase(),!1);if(!n)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),r;let h=n.oJt.get(s.toLowerCase());if(!h){if(!n.hJt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),r;h=n.hJt,e=0}if(!h._u())return r;if(0!==h.wN())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),r;const o=i.aN(),a=o.pN(),l=a.dN(),u=l.length>0;u&&(h.yN()?o.oX(l):o.Oyt(l));const c=[],f=o.Gwt(a);if(f){const t=f.Iwt();for(let s=e,i=t.length;s<i;++s)c.push(t[s].Irt())}const d=h.Iwt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].Ogt());return i.iGt()?this.lJt(o,h,c,u,l):this.aJt(o,h,c,u,l)}}}{const aC=self._s;aC.e$.s$.Sht={nXt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},P:t=>t.toString(),kt:t=>"string"==typeof t?t.length:0,random(t,s){return void 0===s?this.Bc.uB()*t:this.Bc.uB()*(s-t)+t},bMt(...t){return t[Math.floor(this.Bc.uB()*t.length)]},hXt:(t,...s)=>("number"!=typeof t&&(t=0),s[t=aC.Kr(Math.floor(t),0,s.length-1)]),oXt:()=>Math.PI,aXt:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),lXt(t,s){s=Math.max(Math.floor(s),0);const e=Math.pow(10,s);return Math.round((t+Number.EPSILON)*e)/e},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(aC.tn(t)),cos:t=>Math.cos(aC.tn(t)),tan:t=>Math.tan(aC.tn(t)),asin:t=>aC.sn(Math.asin(t)),acos:t=>aC.sn(Math.acos(t)),atan:t=>aC.sn(Math.atan(t)),exp:t=>Math.exp(t),jt:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let e=1,i=t.length;e<i;++e){let i=t[e];"number"==typeof i&&s<i&&(s=i)}return s},min(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let e=1,i=t.length;e<i;++e){let i=t[e];"number"==typeof i&&s>i&&(s=i)}return s},Kr:(t,s,e)=>aC.Kr(t,s,e),bt:(t,s,e,i)=>aC.nn(t,s,e,i),angle:(t,s,e,i)=>aC.sn(aC.an(t,s,e,i)),_t:(t,s,e)=>aC._t(t,s,e),gn:(t,s,e)=>aC.gn(t,s,e),wn:(t,s,e,i)=>aC.wn(t,s,e,i),Sn:(t,s,e,i,r)=>aC.Sn(t,s,e,i,r),vn:(t,s,e)=>aC.vn(t,s,e),uXt:(t,s)=>aC.sn(aC.ln(aC.tn(t),aC.tn(s))),cXt:(t,s,e)=>aC.sn(aC.fn(aC.tn(t),aC.tn(s),e)),fXt:(t,s,e)=>aC.sn(aC.un(aC.tn(t),aC.tn(s),aC.tn(e))),dXt:(t,s,e)=>(t|=0)&~(1<<(s|=0))|(e=0!==e?1:0)<<s,pXt:(t,s)=>(t|=0)^1<<s,mXt:(t,s)=>(t|=0)&1<<(s|=0)?1:0,gXt:()=>"\n",yXt:t=>"string"==typeof t?t.toUpperCase():"",wXt:t=>"string"==typeof t?t.toLowerCase():"",left:(t,s)=>"string"==typeof t?t.substr(0,s):"",mid:(t,s,e)=>"string"!=typeof t?"":e<0?t.substr(s):t.substr(s,e),right:(t,s)=>"string"==typeof t?t.substr(Math.max(t.length-s,0)):"",trim:t=>"string"==typeof t?t.trim():"",SXt(t,s,e){if("string"!=typeof t||"string"!=typeof e)return"";let i=t.split(e);return(s=Math.floor(s))<0||s>=i.length?"":i[s]},vXt:(t,s)=>"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0,find:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(aC.Je(s),"i")):-1,bXt:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(aC.Je(s),"")):-1,replace:(t,s,e)=>"string"==typeof t&&"string"==typeof s&&"string"==typeof e?t.replace(new RegExp(aC.Je(s),"gi"),e):"string"==typeof t?t:"",MXt(t,...s){let e=t;for(let t=0,i=s.length;t<i;++t)e=e.replaceAll(`{${t}}`,s[t].toString());return e},TXt(t,s,e){const i=this.jqt(s,e);return t?t.search(i):-1},xXt(t,s,e,i){const r=this.jqt(s,e);return t?t.replace(r,i):""},CXt(t,s,e){const i=this.Uqt(t.toString(),s,e);return i?i.length:0},GXt(t,s,e,i){i=Math.floor(i);const r=this.Uqt(t.toString(),s,e);return!r||i<0||i>=r.length?"":r[i]},_Xt(t,s){let e=t<0?"-":"";t<0&&(t=-t);const i=s-t.toString().length;return e+="0".repeat(Math.max(i,0)),e+t.toString()},IXt:t=>encodeURIComponent(t),PXt:t=>decodeURIComponent(t),RN(){return this.Bc.l7()},RXt(){return this.Bc.u7()},AXt(){return this.Bc.WN()},EXt(){return(Date.now()-this.Bc.PHt())/1e3},OXt:()=>Date.now(),time(){return this.Bc.DN()},FXt(){return this.Bc.kN()},DXt(){return this.Bc.EHt()},jN(){return this.Bc.UN()},LXt(){return this.Bc.JN()},kXt(){return this.Bc.XN()},NXt(){return this.Bc.GB().oW()},BXt(){return this.Bc.GB().lW()},$Xt(){return this.Bc.Jk()},WXt(){return this.Bc.Xk()},VXt(){return this.Bc.Jk()},jXt(){return this.Bc.Xk()},UXt(){return this.Bc.OB().LV()},zXt(){return this.Bc.OB().NV()},HXt(){return this.Bc.OB().Rc()},qXt(){return this.Bc.OB().EV()},JXt(){return aC.sn(this.Bc.OB().FV())},YXt(){return this.Bc.OB().jg()},XXt(){return this.Bc.OB().Qg()},ZXt(){return 100*this.Bc.OB().X4()},KXt(){return 100*this.Bc.OB().Z4()},QXt(t){const s=this.Bc.OB().kB(t);return s?s.q1().Qa():0},tZt(t){const s=this.Bc.OB().kB(t);return s?s.q1().tl():0},sZt(t){const s=this.Bc.OB().kB(t);return s?s.q1().sl():0},eZt(t){const s=this.Bc.OB().kB(t);return s?s.q1().el():0},iZt(t){const s=this.Bc.OB().kB(t);return s?s.q1().width():0},rZt(t){const s=this.Bc.OB().kB(t);return s?s.q1().height():0},nZt(t){const s=this.Bc.OB().kB(t);if(s){const t=s.q1();return(t.Qa()+t.sl())/2}return 0},hZt(t){const s=this.Bc.OB().kB(t);if(s){const t=s.q1();return(t.tl()+t.el())/2}return 0},oZt(t,s,e){const i=this.Bc.OB().kB(t);return i?i.eU(s,e)[0]:0},aZt(t,s,e){const i=this.Bc.OB().kB(t);return i?i.eU(s,e)[1]:0},lZt(t,s,e){const i=this.Bc.OB().kB(t);return i?i.rU(s,e)[0]:0},uZt(t,s,e){const i=this.Bc.OB().kB(t);return i?i.rU(s,e)[1]:0},cZt(t,s,e,i){const r=this.Bc.OB(),n=r.kB(t),h=r.kB(s);if(!n||!h||n===h)return e;const[o,a]=n.rU(e,i);return h.eU(o,a)[0]},fZt(t,s,e,i){const r=this.Bc.OB(),n=r.kB(t),h=r.kB(s);if(!n||!h||n===h)return i;const[o,a]=n.rU(e,i);return h.eU(o,a)[1]},dZt(t){const s=this.Bc.OB().kB(t);return s?s.Rj():0},pZt(t){const s=this.Bc.OB().kB(t);return s?aC.sn(s.Fj()):0},mZt(t){const s=this.Bc.OB().kB(t);return s?100*s.SO():0},gZt(t){const s=this.Bc.OB().kB(t);return s?s.Oj():0},yZt(t){const s=this.Bc.OB().kB(t);return s?s.LV():0},wZt(t){const s=this.Bc.OB().kB(t);return s?s.NV():0},SZt(t){const s=this.Bc.OB().kB(t);return s?100*s.kj():0},vZt(t){const s=this.Bc.OB().kB(t);return s?100*s.$j():0},bZt(t){const s=this.Bc.OB().kB(t);return s?s.tT():0},MZt(t){const s=this.Bc.OB().kB(t);return s?s.Tk():-1},TZt(){const t=this.Bc.GB();return t?t.QWt():""},xZt(t){const s=this.kmt;if(!s.Omt())return 0;if(t){const e=s.Dmt(t);return e?e.Tk():0}return s.Amt().Tk()},CZt(){return this.Bc.zHt()},GZt(t,s,...e){const i=this.nJt(t.toLowerCase(),!1);if(!i)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let r=i.oJt.get(s.toLowerCase());if(!r){if(!i.hJt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;r=i.hJt}const n=r.wN(),h=r.uN();if(0===n)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!r._u())return h;const o=this.Bc.aN(),a=o.pN().dN(),l=a.length>0;l&&(r.yN()?o.oX(a):o.Oyt(a));const u=r.Iwt();for(let t=e.length,s=u.length;t<s;++t)e.push(u[t].Ogt());const c=r.fN(),f=c.gN(c.dN(),r.yN(),n,h,...e);return l&&o.lX(a),f},_Zt(){return this.Bc.Ik().oB()},IZt(){return this.PK()},q_(){return this.Bc.DWt()?"webgpu":"webgl"},PZt(){return this.Bc.DWt()?this.Bc.DWt().LWt():this.Bc.FWt().PF()},RZt(){let t=this.Bc.gM().zb();return Math.round(100*t/1048576)/100},AZt:(t,s,e)=>aC._n(t,s,e),EZt:(t,s,e)=>aC.Pn(t/100,s/100,e/100),OZt:(t,s,e,i)=>aC.In(t/100,s/100,e/100,i/100),FZt:(t,s,e)=>aC.Pn(t/255,s/255,e/255),DZt:(t,s,e,i)=>aC.In(t/255,s/255,e/255,i/255),LZt(){return this.Bc.Dk()},kZt(){return this.Bc.kk()},NZt(){return this.Bc.Bk()},BZt(){return this.Bc.Wk()},$Zt(){return this.Bc.pN().t5().Rc()},WZt(){return this.Bc.pN().xvt()}}}{const lC=self._s;lC.e$.VZt=class extends lC.Z_t{constructor(t){super(t)}qr(){super.qr()}}}{let uC=function(){return pC.jW().eq()},cC=function(){return pC.l$().cB()};GetCameraInstance=uC,GetLayout=cC;const fC=self._s,dC=self.Ns;fC.e$.VZt.dEt=class extends fC.DIt{constructor(t){super(t)}qr(){super.qr()}vIt(){}bIt(){return self.jZt}};let pC=null;const mC=new Map([["x",0],["y",1],["z",2]]),gC=new Map([["forward",0],["up",1],["right",2]]),yC=new Map([["both",0],["camera",1],["look",2]]);self.jZt=class extends self.nV{constructor(t){super(t),pC=t}UZt(t,s,e,i,r,n,h,o,a){uC().zZt(t,s,e,i,r,n,h,o,a)}HZt(t,s,e,i){uC().zZt(t,s,e,t+Math.cos(i),s+Math.sin(i),e,0,0,1)}qZt(){uC().JZt()}YZt(t,s,e){if(dC.ii(t),!mC.has(s))throw new Error("invalid axis");if(!yC.has(e))throw new Error("invalid which");const i=mC.get(s),r=yC.get(e);uC().XZt(t,i,r)}ZZt(t,s,e){if(dC.ii(t),!gC.has(s))throw new Error("invalid axis");if(!yC.has(e))throw new Error("invalid which");const i=gC.get(s),r=yC.get(e);uC().KZt(t,i,r)}QZt(t,s,e,i){dC.ii(t),dC.ii(s),dC.ii(e),dC.ii(i),uC().tKt(t,s,e,i)}set fieldOfView(t){dC.ii(t),uC().sKt(t)}get fieldOfView(){return uC().eKt()}iKt(){const t=cC().o2();return[t[0],t[1],t[2]]}rKt(){const t=cC().e3();return[t[0],t[1],t[2]]}nKt(){const t=uC().hKt();return[t[0],t[1],t[2]]}oKt(){const t=uC().aKt();return[t[0],t[1],t[2]]}lKt(){const t=uC().uKt();return[t[0],t[1],t[2]]}cKt(){const t=cC().e3(),s=cC().o2();return[t[0]-s[0],t[1]-s[1],t[2]-s[2]]}get fKt(){return uC().l$().kHt()}}}{const wC=self._s,SC=self.ls,vC=SC.ws,bC=SC.ps,MC=vC.create();wC.e$.VZt.Instance=class extends wC.$It{constructor(t,s){super(t),this.dKt=0,this.pKt=Math.PI/2,this.mKt=bC.create(),this.gKt=vC.create(),this.yKt=vC.create(),this.wKt=vC.create(),this.SKt(),this.Bc.Sf().addEventListener("beforelayoutchange",()=>this.vKt())}SKt(){vC.set(this.gKt,0,0,-1),vC.set(this.yKt,1,0,0),vC.set(this.wKt,0,1,0)}vKt(){this.dKt=0,this.pKt=Math.PI/2}uKt(){return this.gKt}aKt(){return this.yKt}hKt(){return this.wKt}zZt(t,s,e,i,r,n,h,o,a){const l=this.Bc.cB();l.K3(!0),l.K4(t,s,e,i,r,n,h,o,a),vC.set(this.gKt,i-t,r-s,n-e),vC.normalize(this.gKt,this.gKt),vC.Gt(this.yKt,l.i3(),this.gKt),vC.normalize(this.yKt,this.yKt),vC.Gt(this.wKt,this.gKt,this.yKt),vC.normalize(this.wKt,this.wKt),vC.set(MC,0,0,1),bC.qt(this.mKt,this.wKt,MC)}JZt(){this.Bc.cB().K3(!1),this.SKt()}bKt(t,s,e,i){const r=this.Bc.cB(),n=r.o2(),h=r.e3(),o=r.i3();let a=n[0],l=n[1],u=n[2],c=h[0],f=h[1],d=h[2];if(0===i){const i=c-a,r=f-l,n=d-u;a=t,l=s,u=e,c=a+i,f=l+r,d=u+n}else c=t,f=s,d=e;r.K3(!0),r.K4(a,l,u,c,f,d,o[0],o[1],o[2])}XZt(t,s,e){if(0===t)return;let i=0,r=0,n=0;0===s?i=t:1===s?r=t:n=t,vC.set(MC,i,r,n);const h=this.Bc.cB(),o=h.o2(),a=h.e3();0!==e&&1!==e||vC.add(o,o,MC),0!==e&&2!==e||vC.add(a,a,MC),h.Q4()}KZt(t,s,e){if(0===t)return;let i=0,r=0,n=0;0===s?(i=this.gKt[0]*t,r=this.gKt[1]*t,n=this.gKt[2]*t):1===s?(i=this.wKt[0]*t,r=this.wKt[1]*t,n=this.wKt[2]*t):(i=this.yKt[0]*t,r=this.yKt[1]*t,n=this.yKt[2]*t),vC.set(MC,i,r,n);const h=this.Bc.cB(),o=h.o2(),a=h.e3();0!==e&&1!==e||vC.add(o,o,MC),0!==e&&2!==e||vC.add(a,a,MC),h.Q4()}tKt(t,s,e,i){if(0===t&&0===s)return;e=Math.max(e,0),i=Math.min(i,wC.tn(179.9)),this.dKt=wC.Qr(this.dKt+t),this.pKt=wC.Kr(this.pKt+s,e,i);const r=Math.sin(this.pKt)*Math.cos(this.dKt),n=Math.sin(this.pKt)*Math.sin(this.dKt),h=Math.cos(this.pKt),o=MC;vC.set(o,r,n,h),vC.Ot(o,o,this.mKt);const a=this.Bc.cB(),l=a.o2(),u=a.i3(),c=this.Bc.kHt();a.K4(l[0],l[1],l[2],l[0]+o[0],l[1]+o[1],l[2]+o[2]/c,u[0],u[1],u[2])}sKt(t){const s=this.Bc,e=s.gM(),i=s.GB(),r=s.pB();"normalized"!==i.R$t()&&e.XS()!==t&&(e.YS(t),i.vWt(),r.k6(),r.N6(),s.jB())}eKt(){return"normalized"===this.Bc.GB().R$t()?wC.tn(45):this.Bc.gM().XS()}lPt(){const t=this.Bc.cB().o2(),s=this.Bc.cB().e3(),e="plugins.camera3d";return[{title:e+".debugger.z-axis.title",properties:[{name:e+".properties.z-scale.name",value:this.Bc.kHt()},{name:e+".properties.default-camera-z.name",value:this.Bc.WS()}]},{title:e+".debugger.camera.title",properties:[{name:e+".debugger.camera.camera-x",value:t[0]},{name:e+".debugger.camera.camera-y",value:t[1]},{name:e+".debugger.camera.camera-z",value:t[2]},{name:e+".debugger.camera.look-x",value:s[0]},{name:e+".debugger.camera.look-y",value:s[1]},{name:e+".debugger.camera.look-z",value:s[2]},{name:e+".debugger.camera.x-rotation",value:wC.sn(this.dKt)},{name:e+".debugger.camera.y-rotation",value:wC.sn(this.pKt)}]},{title:e+".debugger.vectors.title",properties:[{name:e+".debugger.vectors.up-x",value:this.wKt[0]},{name:e+".debugger.vectors.up-y",value:this.wKt[1]},{name:e+".debugger.vectors.up-z",value:this.wKt[2]},{name:e+".debugger.vectors.forward-x",value:this.gKt[0]},{name:e+".debugger.vectors.forward-y",value:this.gKt[1]},{name:e+".debugger.vectors.forward-z",value:this.gKt[2]},{name:e+".debugger.vectors.right-x",value:this.yKt[0]},{name:e+".debugger.vectors.right-y",value:this.yKt[1]},{name:e+".debugger.vectors.right-z",value:this.yKt[2]}]}]}}}self._s.e$.VZt.t$={};{const TC=self._s;TC.e$.VZt.wht={MKt(t,s,e,i,r,n,h,o,a){this.zZt(t,s,e,i,r,n,h,o,a)},TKt(t,s,e,i){i=TC.tn(i),this.zZt(t,s,e,t+Math.cos(i),s+Math.sin(i),e,0,0,1)},xKt(){this.JZt()},CKt(t,s,e,i){this.bKt(t,s,e,i)},GKt(t,s,e){this.XZt(t,s,e)},_Kt(t,s,e){this.KZt(t,s,e)},IKt(t,s,e,i){this.tKt(TC.tn(t),TC.tn(s),TC.tn(e),TC.tn(i))},PKt(t){this.sKt(TC.tn(t))}}}{const xC=self._s;xC.e$.VZt.Sht={RKt(){return this.Bc.cB().o2()[0]},AKt(){return this.Bc.cB().o2()[1]},EKt(){return this.Bc.cB().o2()[2]},OKt(){return this.Bc.cB().e3()[0]},FKt(){return this.Bc.cB().e3()[1]},DKt(){return this.Bc.cB().e3()[2]},LKt(){return this.wKt[0]},kKt(){return this.wKt[1]},NKt(){return this.wKt[2]},BKt(){return this.gKt[0]},$Kt(){return this.gKt[1]},WKt(){return this.gKt[2]},VKt(){return this.yKt[0]},jKt(){return this.yKt[1]},UKt(){return this.yKt[2]},zKt(){return xC.sn(this.dKt)},HKt(){return xC.sn(this.pKt)},qKt(){const t=this.Bc.cB();return t.e3()[0]-t.o2()[0]},JKt(){const t=this.Bc.cB();return t.e3()[1]-t.o2()[1]},YKt(){const t=this.Bc.cB();return t.e3()[2]-t.o2()[2]},XKt(){return this.Bc.kHt()},ZKt(){return this.Bc.WS()},KKt(){return xC.sn(this.eKt())},QKt(t){const s=this.Bc.OB().kB(t);return s?s.eU(0,0,s.tT())[0]:0},tQt(t){const s=this.Bc.OB().kB(t);return s?s.eU(0,0,s.tT())[1]:0},sQt(t){const s=this.Bc.OB().kB(t);return s?s.eU(this.Bc.GB().iW(),0,s.tT())[0]:0},eQt(t){const s=this.Bc.OB().kB(t);return s?s.eU(this.Bc.GB().iW(),0,s.tT())[1]:0},iQt(t){const s=this.Bc.OB().kB(t);if(!s)return 0;const e=this.Bc.GB();return s.eU(e.iW(),e.nW(),s.tT())[0]},rQt(t){const s=this.Bc.OB().kB(t);if(!s)return 0;const e=this.Bc.GB();return s.eU(e.iW(),e.nW(),s.tT())[1]},nQt(t){const s=this.Bc.OB().kB(t);return s?s.eU(0,this.Bc.GB().nW(),s.tT())[0]:0},hQt(t){const s=this.Bc.OB().kB(t);return s?s.eU(0,this.Bc.GB().nW(),s.tT())[1]:0},oQt(t,s,e,i){const r=this.Bc.OB().kB(t);return r?r.rU(s,e,i)[0]:0},aQt(t,s,e,i){const r=this.Bc.OB().kB(t);return r?r.rU(s,e,i)[1]:0},lQt(t,s,e,i){const r=this.Bc.OB().kB(t);return r?r.eU(s,e,i)[0]:0},uQt(t,s,e,i){const r=this.Bc.OB().kB(t);return r?r.eU(s,e,i)[1]:0},cQt(t,s,e,i,r){const n=this.Bc.OB(),h=n.kB(t),o=n.kB(s);if(!h||!o||h===o)return e;const[a,l]=h.rU(e,i,r);return o.eU(a,l)[0]},fQt(t,s,e,i,r){const n=this.Bc.OB(),h=n.kB(t),o=n.kB(s);if(!h||!o||h===o)return i;const[a,l]=h.rU(e,i,r);return o.eU(a,l)[1]}}}{const CC=self._s;CC.e$.Bnt=class extends CC.Z_t{constructor(t){super(t)}qr(){super.qr()}}}{const GC=self._s,_C=self.Ns,IC=[];GC.e$.Bnt.dEt=class extends GC.DIt{constructor(t){super(t),this.hEt=t.UEt()}qr(){GC.bh(this.hEt),super.qr()}vIt(){for(const t of this.hEt)t.oAt(this.Bc)}g5(t){const s={nx:this.Bc.Zk()};return Promise.all(this.hEt.map(e=>e.aAt(t,s)))}M5(){for(const t of this.hEt)t.lAt()}S5(){this.dQt()}dQt(){for(const t of this.mpt.eV())t.eq().pQt()}pxt(t){GC.e$.Bnt.P_t(this,t)}Qxt(t){IC.push({BIt:null,mQt:!1,JW:[]})}gQt(t,s,e){const i=IC.at(-1);i.BIt=t,i.mQt=e,i.JW.push(s)}tCt(t){const s=IC.pop(),e=s.BIt,i=s.mQt;if(!e)return;const r=new Map;for(const t of s.JW)t.eFt(r,e,i);for(const[t,s]of r)t.rV().Bpt(s)}yQt(t){const s=this.fU().YEt(t),e=this.l$();return s.uAt(0).Vq().ZX(e.gM(),{nx:e.Zk()}).then(()=>this.dQt()),s}wQt(t){for(const s of this.mpt.eV())s.eq().SQt(t);this.fU().XEt(t)}vQt(t,s){const e=this.mpt.qEt(t);if(!e)throw new Error(`cannot find animation name '${t}'`);let i=e.pAt(s);i<0&&(i+=e.Fq()+1);const r=GC.rAt.hAt(this.l$());e.cAt(r,i);const n=this.l$();r.Vq().ZX(n.gM(),{nx:n.Zk()}).then(()=>this.dQt());for(const t of this.mpt.eV())t.eq().bQt();return r}MQt(t,s){const e=this.mpt.qEt(t);if(!e)throw new Error(`cannot find animation name '${t}'`);if(1===e.Fq())throw new Error(`cannot remove last frame from animation '${t}'`);let i=e.pAt(s);i<0&&(i+=e.Fq()),e.fAt(i);for(const t of this.mpt.eV())t.eq().bQt()}bIt(){return self.TQt}};const PC=new WeakMap;self.TQt=class extends self.nV{constructor(t){super(t),PC.set(this,t.Kxt())}xQt(t){_C.oi(t);const s=PC.get(this).fU().qEt(t);return s?s.mAt():null}CQt(){return PC.get(this).fU().HEt().map(t=>t.mAt())}GQt(t){return _C.oi(t),PC.get(this).yQt(t).mAt()}_Qt(t){_C.oi(t),PC.get(this).wQt(t)}IQt(t,s){if(_C.oi(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return PC.get(this).vQt(t,s).kq()}PQt(t,s){if(_C.oi(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");PC.get(this).MQt(t,s)}}}{const RC=self._s,AC=self.Ns,EC=0,OC=1,FC=2,DC=3,LC=RC.Hr(RC.Rect),kC=RC.Hr(RC.Pl),NC=RC.Hr(RC.Pa),BC=1,$C=2,WC=4;RC.e$.Bnt.Instance=class extends RC.pPt{constructor(t,s){super(t);let e=!0,i="",r=0,n=!0;s&&(e=!!s[EC],i=s[OC],r=s[FC],n=s[DC]),this.RQt=this.mpt.qEt(i)||this.mpt.UEt()[0],this.AQt=RC.Kr(r,0,this.RQt.Fq()-1),this.EQt=this.RQt.uAt(this.AQt);const h=this.EQt.Vq();this.OQt=h.xC(),this.FQt=h.yA(),this.DQt=h.GPt(),this.wPt(),t.tFt($C,!0),t.tFt(BC,this.RQt.Cq()>=0),this.LQt=Math.abs(this.RQt.Cq()),this.kQt=this.RQt.Aq(),this.NQt=RC.Hr(RC.td),this.BQt=0,this.$Qt=0,this.WQt="",this.VQt=-1,this.jQt="",this.UQt=0;const o=this.LB();this.zQt=o.Wz(),o.wj(e),o.rH(n),o.Pz(this.EQt.Iz()),o.Ez(this.EQt.Az()),o.nkt(this.EQt.Kq()),o.Tz(),1===this.mpt.zEt()&&1===this.mpt.UEt()[0].Fq()||0===this.LQt||this.nPt()}qr(){this.RQt=null,this.EQt=null,this.OQt=null,this.NQt=null,super.qr()}MPt(){return this.EQt.Vq()}Sit(){return!0}nQ(){this.OQt=null}bPt(){this.pQt()}zT(t){const s=this.OQt;if(null===s)return;t.xO(s);const e=this.LB();e.HH()?this.HQt(e,t):this.qQt(e,t)}qQt(t,s){let e=this.zQt;this.Bc.Qk()&&(e=t.ZLt(e)),s.LO(e,this.DQt)}HQt(t,s){const e=t.gkt();if(t.wkt()){t.Nz(LC,kC,!1);let s=kC;this.Bc.Qk()&&(s=t.ZLt(s)),e.BT(t.qH(),s,this.DQt),t.ykt(!1)}e.zT(s,t.Lz())}JQt(){return this.NQt.Hs()}YQt(){return this.fe.sFt($C)}XQt(t){this.fe.tFt($C,t)}ZQt(){return this.fe.sFt(BC)}KQt(t){this.fe.tFt(BC,t)}QQt(){return this.fe.sFt(WC)}t0t(t){this.fe.tFt(WC,t)}c7(){this.jQt&&this.s0t(),this.VQt>=0&&this.e0t();const t=this.LQt;if(!this.YQt()||0===t)return void this.jIt();const s=this.Bc.AN(this.fe);this.NQt.$u(s);const e=this.JQt(),i=this.EQt,r=i.jq()/t;if(e<this.BQt+r)return;const n=this.RQt,h=this.kQt,o=n.Fq(),a=n.Pq(),l=n._q(),u=n.Oq();this.ZQt()?this.AQt++:this.AQt--,this.BQt+=r,this.AQt>=o&&(u?(this.KQt(!1),this.AQt=o-2):l?this.AQt=h:(this.$Qt++,this.$Qt>=a?this.i0t(!1):this.AQt=h)),this.AQt<0&&(u?(this.AQt=1,this.KQt(!0),l||(this.$Qt++,this.$Qt>=a&&this.i0t(!0))):l?this.AQt=h:(this.$Qt++,this.$Qt>=a?this.i0t(!0):this.AQt=h)),this.AQt=RC.Kr(this.AQt,0,o-1);const c=n.uAt(this.AQt);e>this.BQt+c.jq()/t&&(this.BQt=e),this.r0t(i,c)}i0t(t){this.AQt=t?0:this.RQt.Fq()-1,this.XQt(!1),this.WQt=this.RQt.Rc(),this.t0t(!0),this.NIt("animationend",!1,{animationName:this.WQt}),this.JU(RC.e$.Bnt.t$.n0t),this.JU(RC.e$.Bnt.t$.h0t),this.t0t(!1),this.$Qt=0}r0t(t,s,e){if(t===s)return;const i=this.LB(),r=t.Vq(),n=s.Vq(),h=r.jg(),o=r.Qg(),a=n.jg(),l=n.Qg();e&&e.$nt?e.$nt(i,h,o,a,l):(h!==a&&i.Xg(i.jg()*(a/h)),o!==l&&i.Ug(i.Qg()*(l/o))),i.Pz(s.Iz()),i.Ez(s.Az()),i.nkt(s.Kq()),i.Tz(),this.EQt=s,this.OQt=n.xC(),this.FQt=n.yA(),this.DQt=n.GPt();const u=this.PJ().Ont();for(let e=0,i=u.length;e<i;++e)u[e].cRt(t,s);this.NIt("framechange",!1,{animationName:this.RQt.Rc(),o0t:this.AQt}),this.JU(RC.e$.Bnt.t$.a0t),this.Bc.jB()}l0t(t){this.XQt(!0),this.BQt=this.JQt(),1===t&&0!==this.AQt&&(this.VQt=0,this.QQt()||this.e0t()),this.nPt()}u0t(t,s,e){this.jQt=t,this.UQt=s,this.nPt(),!e&&this.QQt()||this.s0t()}c0t(){return this.RQt}f0t(){return this.jQt?this.jQt:this.RQt.Rc()}SQt(t){RC.Ki(t,this.f0t())&&this.u0t(this.mpt.ZEt().Rc(),1,!0)}d0t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.mpt.qEt(this.f0t());if(!s)return;if(-1===(t=s.dAt(t)))return}isFinite(t)&&(this.VQt=t,this.QQt()||this.e0t())}bQt(){if(this.jQt||-1!==this.VQt)return;const t=this.EQt,s=this.RQt.uAt(RC.Kr(this.AQt,0,this.RQt.Fq()-1));t!==s&&this.r0t(t,s),this.RQt.Fq()>1&&this.LQt>0&&this.nPt()}p0t(){return this.AQt}m0t(){return this.EQt.eJ()}g0t(t){this.LQt=Math.abs(t),this.KQt(t>=0),this.LQt>0&&this.nPt()}y0t(){return this.ZQt()?this.LQt:-this.LQt}w0t(t){"string"==typeof t&&-1===(t=this.RQt.dAt(t))||(t=RC.Kr(Math.floor(t),0,this.RQt.Fq()-1),this.kQt=t)}S0t(){return this.kQt}s0t(t){const s=this.EQt,e=this.mpt.qEt(this.jQt);if(this.jQt="",!e)return;if(e===this.RQt&&this.YQt())return;this.RQt=e,this.KQt(e.Cq()>=0),this.LQt=Math.abs(e.Cq()),this.kQt=e.Aq(),this.AQt=RC.Kr(this.AQt,0,this.RQt.Fq()-1),1===this.UQt&&(this.AQt=0),this.XQt(!0),this.BQt=this.JQt();const i=this.RQt.uAt(this.AQt);this.r0t(s,i,t)}e0t(t){const s=this.EQt,e=this.AQt;if(this.AQt=RC.Kr(Math.floor(this.VQt),0,this.RQt.Fq()-1),this.VQt=-1,!t&&e===this.AQt)return;const i=this.RQt.uAt(this.AQt);this.r0t(s,i),this.BQt=this.JQt()}pQt(){const t=this.EQt.Vq();this.OQt=t.xC(),this.FQt=t.yA(),this.DQt=t.GPt(),this.LB().ykt(!0)}xC(){return this.OQt}yA(){return this.FQt}GPt(){return this.DQt}zq(){return this.EQt.zq()}pCt(t){const s=this.EQt,e=this.LB();let i=null;if("string"==typeof t)i=s.Xq(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");i=s.Yq(t-1)}let r=e.Lz();if(!i)return[e.YM(),e.KM(),r];if(NC.S(i.GAt()),e.HH()){const[t,s,i]=e.qH().KT(NC.Fa(),NC.La());NC.set(t,s),r+=i}return NC.offset(-s.Iz(),-s.Az()),NC.scale(e.jg(),e.Qg()),NC.rotate(e.FV()),NC.offset(e.YM(),e.KM()),[NC.Fa(),NC.La(),r]}v0t(){return this.LB().ukt().mu()}b0t(t){t=Math.floor(t);const s=this.LB(),e=s.ukt(),i=e.mu();if(t===i&&(t=0),t<0||t>=i)return[0,0];const r=e.pu();return[r[2*t+0]+s.YM(),r[2*t+1]+s.KM()]}lPt(){const t=RC.e$.Bnt.wht,s="plugins.sprite.debugger.animation-properties";return[{title:s+".title",properties:[{name:s+".current-animation",value:this.RQt.Rc(),M0t:s=>this.cPt(t.T0t,s,0)},{name:s+".current-frame",value:this.AQt,M0t:s=>this.cPt(t.x0t,s)},{name:s+".is-playing",value:this.YQt(),M0t:s=>s?this.cPt(t.C0t,0):this.cPt(t.G0t)},{name:s+".speed",value:this.LQt,M0t:s=>this.cPt(t._0t,s)},{name:s+".repeats",value:this.$Qt,M0t:t=>this.$Qt=t}]}]}aT(){const t={a:this.RQt.I1()};0!==this.BQt&&(t.fs=this.BQt);const s=this.JQt();0!==s&&(t.at=s),0!==this.AQt&&(t.f=this.AQt),0!==this.LQt&&(t.cas=this.LQt),1!==this.$Qt&&(t.ar=this.$Qt),0!==this.kQt&&(t.rt=this.kQt),this.YQt()||(t.ap=this.YQt()),this.ZQt()||(t.af=this.ZQt());const e=this.LB();return e.iH()&&(t.ce=e.iH()),t}lT(t){const s=this.fU().JEt(t.a);s&&(this.RQt=s),this.BQt=t.hasOwnProperty("fs")?t.fs:0,this.NQt.Set(t.hasOwnProperty("at")?t.at:0);const e=t.hasOwnProperty("f")?t.f:0;this.AQt=RC.Kr(e,0,this.RQt.Fq()-1),this.LQt=t.hasOwnProperty("cas")?t.cas:0,this.$Qt=t.hasOwnProperty("ar")?t.ar:1;const i=t.hasOwnProperty("rt")?t.rt:0;this.kQt=RC.Kr(i,0,this.RQt.Fq()-1),this.XQt(!t.hasOwnProperty("ap")||!!t.ap),this.KQt(!t.hasOwnProperty("af")||!!t.af);const r=this.RQt.uAt(this.AQt);this.EQt=r,this.pQt();const n=this.LB();n.Pz(r.Iz()),n.Ez(r.Az()),n.nkt(r.Kq()),n.rH(!!t.ce),this.YQt()&&this.nPt()}sot(t){const s=this.LB();switch(t){case DC:return s.iH();case FC:return RC.Kr(this.AQt,0,this.RQt.Fq()-1);case OC:return this.RQt.Rc()}}oot(t,s,e){const i=this.LB();switch(t){case DC:i.rH(!!s);break;case FC:{this.XQt(!1);const t=this.RQt.Fq()-1,i=s=RC.Kr(s,0,t),r=this.RQt.uAt(this.AQt),n=this.RQt.uAt(i);this.r0t(r,n,e),this.AQt=RC.Kr(i,0,t);break}case OC:this.jQt=s,this.s0t(e),this.RQt.Fq()>1&&this.RQt.Cq()>0?this.nPt():this.jIt()}}bIt(){return self.I0t}};const VC=new WeakMap,jC=new Map([["current-frame",0],["beginning",1]]);self.I0t=class extends self.ZH{constructor(){super(),VC.set(this,self.cU.mU().eq())}Uq(){return VC.get(this).zq()}Hq(t){return this.qq(t)[0]}Jq(t){return this.qq(t)[1]}P0t(t){return this.qq(t)[2]}qq(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return VC.get(this).pCt(t)}Zq(){return VC.get(this).v0t()}Qq(t){return AC.ii(t),VC.get(this).b0t(t)[0]}sJ(t){return AC.ii(t),VC.get(this).b0t(t)[1]}tJ(t){return AC.ii(t),VC.get(this).b0t(t)}R0t(){VC.get(this).XQt(!1)}A0t(t="current-frame"){AC.oi(t);const s=jC.get(t);if(void 0===s)throw new Error("invalid mode");VC.get(this).l0t(s)}E0t(t,s="beginning"){AC.oi(t),AC.oi(s);const e=jC.get(s);if(void 0===e)throw new Error("invalid mode");const i=VC.get(this);if(!i.fU().qEt(t))throw new Error(`animation name "${t}" does not exist`);i.u0t(t,e)}xQt(t){AC.oi(t);const s=VC.get(this).fU().qEt(t);return s?s.mAt():null}get animation(){return VC.get(this).c0t().mAt()}get animationName(){return VC.get(this).f0t()}set o0t(t){AC.ii(t),VC.get(this).d0t(t)}get o0t(){return VC.get(this).p0t()}set O0t(t){AC.oi(t),VC.get(this).d0t(t)}get O0t(){return VC.get(this).m0t()}set F0t(t){AC.ii(t),VC.get(this).g0t(t)}get F0t(){return VC.get(this).y0t()}set D0t(t){AC.ii(t),VC.get(this).w0t(t)}get D0t(){return VC.get(this).S0t()}get imageWidth(){return VC.get(this).MPt().jg()}get imageHeight(){return VC.get(this).MPt().Qg()}L0t(){const t=VC.get(this).MPt();return[t.jg(),t.Qg()]}async k0t(t){AC.Ni(t,Blob);const s=VC.get(this),e=s.l$(),i=s.MPt(),r=RC.Hr(RC.RRt);if(r.URt(e,t),await r.ZX(e.gM(),{nx:e.Zk()}),s.Jr())return void r.qr();i.zRt(r);const n=s.Kxt();n.dQt(),n.fU().Sf().dispatchEvent(new RC.Event("animationframeimagechange")),e.jB()}N0t(t,s){AC.oi(s),VC.get(this).LB().qLt(!!t,s)}}}{const UC=self._s;UC.e$.Bnt.t$={B0t(t){return UC.Ki(this.f0t(),t)},$0t(t,s){return UC.compare(this.AQt,t,s)},W0t(t,s){if("string"!=typeof s)return!1;const e=this.EQt.eJ();return UC.compare(e.toLowerCase(),t,s.toLowerCase())},V0t(t,s){return UC.compare(this.y0t(),t,s)},h0t(t){return UC.Ki(this.WQt,t)},n0t:()=>!0,a0t:()=>!0,j0t(){return this.LB().jg()<0},U0t(){return this.LB().Qg()<0},z0t:()=>!0,H0t:()=>!0,iH(){return this.LB().iH()}}}{const zC=self._s;zC.e$.Bnt.wht={q0t(t,s,e,i,r){if(!t||!s)return;const[n,h]=this.pCt(e),o=this.Bc.lV(t,s,n,h,i,r);if(!o)return;if(i&&s.uV(o),t.HW().GW()){const t=o.LB();t.OV(this.LB().FV()),t.Tz()}const a=this.Bc.aN();a.cV(!0),o.fV(),a.cV(!1),t!==this.Bc.kgt().fU()&&this.VIt.gQt(t,o,i)},G0t(){this.XQt(!1)},C0t(t){this.l0t(t)},T0t(t,s){this.u0t(t,s)},x0t(t){this.d0t(t)},_0t(t){this.g0t(t)},J0t(t){this.w0t(t)},Y0t(t,s){try{0===t?this.Kxt().yQt(s):this.Kxt().wQt(s)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation: `,s)}},X0t(t,s,e){try{0===t?this.Kxt().vQt(s,e):this.Kxt().MQt(s,e)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation frame: `,s)}},Z0t(t){const s=this.LB(),e=s.jg(),i=Math.abs(e)*(0===t?-1:1);e!==i&&(s.Xg(i),s.Tz())},K0t(t){const s=this.LB(),e=s.Qg(),i=Math.abs(e)*(0===t?-1:1);e!==i&&(s.Ug(i),s.Tz())},AV(t){const s=this.EQt.Vq(),e=this.LB(),i=e.jg()<0?-1:1,r=e.Qg()<0?-1:1,n=s.jg()*t*i,h=s.Qg()*t*r;e.jg()===n&&e.Qg()===h||(e.$R(n,h),e.Tz())},async Q0t(t,s,e){const i=this.EQt.Vq(),r=this.LB(),n=this.Bc,h=this.VIt;if(i.TK()===t)return 0===s&&(r.$R(i.jg(),i.Qg()),r.Tz()),void this.JU(zC.e$.Bnt.t$.z0t);const o=zC.Hr(zC.RRt);try{if(await o.jRt(n,t),!o.KK())throw new Error("image failed to load");if(this.Jr())return void o.qr();await o.ZX(n.gM(),{nx:n.Zk()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jr()||this.JU(zC.e$.Bnt.t$.H0t))}this.Jr()?o.qr():(i.zRt(o),h.dQt(),h.fU().Sf().dispatchEvent(new zC.Event("animationframeimagechange")),n.jB(),0===s&&(r.$R(i.jg(),i.Qg()),r.Tz()),await this.KB(zC.e$.Bnt.t$.z0t))},t1t(t){this.LB().rH(t)},qLt(t,s){this.LB().qLt(0===t,s)},s1t(t){this.LB().NM(t),this.Bc.jB()}}}self._s.e$.Bnt.Sht={e1t(){return this.p0t()},i1t(){return this.m0t()},r1t(){return this.RQt.Fq()},n1t(){return this.RQt.Rc()},h1t(){return this.y0t()},o1t(){return this.RQt.Cq()},a1t(t){return this.pCt(t)[0]},l1t(t){return this.pCt(t)[1]},u1t(t){return this.pCt(t)[2]},c1t(){return this.zq()},f1t(){return this.MPt().jg()},d1t(){return this.MPt().Qg()},p1t(t){return this.b0t(t)[0]},m1t(t){return this.b0t(t)[1]},g1t(){return this.v0t()}};{const HC=self._s;HC.e$.y1t=class extends HC.Z_t{constructor(t){super(t)}qr(){super.qr()}}}{const qC=self._s;qC.e$.y1t.dEt=class extends qC.DIt{constructor(t){super(t),this.hEt=t.UEt()}qr(){qC.bh(this.hEt),super.qr()}vIt(){for(const t of this.hEt)t.oAt(this.Bc)}g5(t){const s={nx:this.Bc.Zk()};return Promise.all(this.hEt.map(e=>e.aAt(t,s)))}M5(){for(const t of this.hEt)t.lAt()}pxt(t){qC.e$.y1t.P_t(this,t)}}}{let JC=function(t,s){return t.w1t===s.w1t?s.S1t-t.S1t:s.w1t-t.w1t},YC=function(t,s,e,i,r,n){const h=i-t,o=r-s,a=n-e;return h*h+o*o+a*a},XC=function(t,s,e,i,r,n,h){return QC.rn(i-t,r-s,(n-e)*h)},ZC=function(t,s,e,i,r,n,h){return[QC._t(t,i,h),QC._t(s,r,h),QC._t(e,n,h)]},KC=function(t,s,e,i,r,n,h,o,a,l,u){const[c,f,d]=ZC(t,s,e,i,r,n,l);return ZC(c,f,d,c+(h-t),f+(o-s),d+(a-e),u)};SortFacesToDrawByDist=JC,sqDistanceTo3D=YC,distanceTo3D=XC,lerp3d=ZC,lerp3d2=KC;const QC=self._s,tG=self.Ns,sG=0,eG=1,iG=2,rG=3,nG=4,hG=5,oG=6,aG=7,lG=8,uG=9,cG=10,fG=11,dG=12,pG=13,mG=14,gG=15,yG=16,wG=[];let SG=0;for(let xG=0;xG<6;xG++)wG.push({v1t:0,b1t:NaN,M1t:NaN,T1t:NaN,x1t:NaN,C1t:NaN,G1t:NaN,_1t:NaN,I1t:NaN,P1t:NaN,R1t:NaN,A1t:NaN,E1t:NaN,shape:0,w1t:NaN,S1t:NaN,enable:!1});const vG=QC.Hr(QC.Pl);QC.Hr(QC.Pa),QC.e$.y1t.Instance=class extends QC.pPt{constructor(t,s){super(t),this.O1t=0,this.F1t=15;let e=!0;this.D1t=!1,this.L1t=!0,this.k1t=!0,this.N1t=!0,this.B1t=!0,this.$1t=!0,this.W1t=!1,this.V1t=this.mpt.UEt()[0],this.j1t=[!1,!0,!0,!0,!0,!0],this.U1t=[0,1,2,3,4,5],this.z1t=8,this.H1t=[null,null,null,null,null,null],s&&(this.O1t=s[sG],this.F1t=s[eG],e=!!s[iG],this.j1t[0]=!!s[rG],this.j1t[1]=!!s[nG],this.j1t[2]=!!s[hG],this.j1t[3]=!!s[oG],this.j1t[4]=!!s[aG],this.j1t[5]=!!s[lG],this.W1t=s[uG],this.z1t=s[cG],this.q1t(0,this.Bc.QY(s[fG])),this.q1t(1,this.Bc.QY(s[dG])),this.q1t(2,this.Bc.QY(s[pG])),this.q1t(3,this.Bc.QY(s[mG])),this.q1t(4,this.Bc.QY(s[gG])),this.q1t(5,this.Bc.QY(s[yG])));const i=this.LB();i.rkt(this.W1t),i.fLt(this.F1t),this.zQt=i.Wz(),i.wj(e);const r=this.J1t();i.Pz(r.Iz()),i.Ez(r.Az()),i.Tz()}qr(){super.qr()}J1t(){return this.V1t.uAt(0)}MPt(){return this.J1t().Vq()}Sit(){return!0}Y1t(t,s,e,i,r,n,h,o,a,l,u,c,f,d){const p=wG[t];p.v1t=t,p.b1t=s,p.M1t=e,p.T1t=i,p.x1t=r,p.C1t=n,p.G1t=h,p._1t=o,p.I1t=a,p.P1t=l,p.R1t=u,p.A1t=c,p.E1t=f,p.shape=d,p.enable=!0,SG++}zT(t){const s=this.LB(),e=this.j1t;let i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],a=e[5];if(s.ekt()?(r=!1,n=!1,h=!1,o=!1,a=!1):s.ikt()&&(i=!1),!(i||r||n||h||o||a))return;let l=this.zQt;this.Bc.Qk()&&(l=s.ZLt(l));const u=l.Bn(),c=l.$n(),f=l.Wn(),d=l.Vn(),p=l.jn(),m=l.Un(),g=l.zn(),y=l.Hn(),w=this.O1t,S=this.F1t;SG=0;for(let t=0;t<6;t++)wG[t].enable=!1;if(i&&this.Y1t(0,f,d,0,u,c,0,g,y,0,p,m,0,5),0===w)n&&this.Y1t(2,u,c,S,g,y,S,g,y,0,u,c,0,0),h&&this.Y1t(3,p,m,S,f,d,S,f,d,0,p,m,0,0),o&&this.Y1t(4,f,d,S,u,c,S,u,c,0,f,d,0,0),a&&this.Y1t(5,g,y,S,p,m,S,p,m,0,g,y,0,0),r&&this.Y1t(1,u,c,S,f,d,S,p,m,S,g,y,S,0);else if(1===w){const t=(u+g)/2,s=(c+y)/2,e=(f+p)/2,i=(d+m)/2;n&&this.Y1t(2,t,s,S,t,s,S,g,y,0,u,c,0,4),h&&this.Y1t(3,e,i,S,e,i,S,f,d,0,p,m,0,4),o&&this.Y1t(4,e,i,S,t,s,S,u,c,0,f,d,0,0),a&&this.Y1t(5,t,s,S,e,i,S,p,m,0,g,y,0,0)}else if(2===w)n&&this.Y1t(2,f,d,S,p,m,S,g,y,0,u,c,0,0),h&&this.Y1t(3,p,m,S,f,d,S,f,d,0,p,m,0,0),o&&this.Y1t(4,f,d,S,f,d,S,u,c,0,f,d,0,2),a&&this.Y1t(5,p,m,S,p,m,S,p,m,0,g,y,0,3);else if(3===w){const t=l.ol(),s=l.al();n&&this.Y1t(2,t,s,S,t,s,S,g,y,0,u,c,0,4),h&&this.Y1t(3,t,s,S,t,s,S,f,d,0,p,m,0,4),o&&this.Y1t(4,t,s,S,t,s,S,u,c,0,f,d,0,4),a&&this.Y1t(5,t,s,S,t,s,S,p,m,0,g,y,0,4)}else 4===w?(n&&this.Y1t(2,f,d,S,f,d,S,g,y,0,u,c,0,2),h&&this.Y1t(3,f,d,S,f,d,S,f,d,0,p,m,0,3),o&&this.Y1t(4,f,d,S,f,d,S,u,c,0,f,d,0,2),a&&this.Y1t(5,f,d,S,f,d,S,p,m,0,g,y,0,3)):5===w&&(n&&this.Y1t(2,u,c,S,u,c,S,g,y,0,u,c,0,2),h&&this.Y1t(3,p,m,S,f,d,S,f,d,0,p,m,0,0),o&&this.Y1t(4,f,d,S,u,c,S,u,c,0,f,d,0,0),a&&this.Y1t(5,p,m,S,p,m,S,p,m,0,g,y,0,3),r&&this.Y1t(1,u,c,S,f,d,S,p,m,S,g,y,0,1));if(SG>1){const[t,e,i]=s.kB().K2();for(let s=0;s<6;++s){const r=wG[s];r.enable&&(r.w1t=Math.min(YC(t,e,i,r.b1t,r.M1t,r.T1t),YC(t,e,i,r.x1t,r.C1t,r.G1t),YC(t,e,i,r._1t,r.I1t,r.P1t),YC(t,e,i,r.R1t,r.A1t,r.E1t)),r.S1t=YC(t,e,i,(r.b1t+r.x1t+r._1t+r.R1t)/4,(r.M1t+r.C1t+r.I1t+r.A1t)/4,(r.T1t+r.G1t+r.P1t+r.E1t)/4))}wG.sort(JC)}const v=t.zO();for(let s=0;s<6;++s){const e=wG[s];e.enable&&(t.cv(v),this.X1t(t,e.v1t,e.b1t,e.M1t,e.T1t,e.x1t,e.C1t,e.G1t,e._1t,e.I1t,e.P1t,e.R1t,e.A1t,e.E1t,e.shape))}}X1t(t,s,e,i,r,n,h,o,a,l,u,c,f,d,p){let m=null,g=null,y=!1;const w=this.H1t[s];if(null!==w){const s=w.sV(this.PJ());if(!s)return;const S=s.eq();if(QC.e$.Bnt&&S instanceof QC.e$.Bnt.Instance){if(m=S.xC(),null===m)return;g=S.GPt()}else{if(!(QC.e$.Z1t&&S instanceof QC.e$.Z1t.Instance||QC.e$.K1t&&S instanceof QC.e$.K1t.Instance))return;{let s=0,g=0;const w=this.z1t;switch(p){case 0:case 5:case 1:s=XC(e,i,r,n,h,o,w),g=XC(n,h,o,a,l,u,w);break;case 2:s=XC(c,f,d,a,l,u,w),g=XC(e,i,r,c,f,d,w);break;case 3:s=XC(c,f,d,a,l,u,w),g=XC(n,h,o,a,l,u,w);break;case 4:s=XC(c,f,d,a,l,u,w),g=XC(e,i,r,(c+a)/2,(f+l)/2,(d+u)/2,w)}if(!(QC.e$.Z1t&&S instanceof QC.e$.Z1t.Instance)){if(0!==p&&5!==p)return;return S.Q1t((a,l)=>{a.St(s,g);const u=a.Qa(),p=a.tl(),m=a.sl(),y=a.el(),[w,S,v]=KC(e,i,r,n,h,o,c,f,d,u,p),[b,M,T]=KC(e,i,r,n,h,o,c,f,d,m,p),[x,C,G]=KC(e,i,r,n,h,o,c,f,d,m,y),[_,I,P]=KC(e,i,r,n,h,o,c,f,d,u,y);t.NO(w,S,v,b,M,T,x,C,G,_,I,P,l)}),S.t2t(t,0,0,s,g),void S.Q1t(null)}if(m=S.xC(),null===m)return;S.s2t(s,g,vG),y=!0,S.e2t(t,!1)}}}else{s=this.U1t[s];const t=this.V1t.uAt(s).Vq();if(m=t.xC(),null===m)return;g=t.GPt()}t.xO(m),p>=3||y?(y||vG.S(g),3===p?(vG.Bl(vG.Wn()),vG.$l(vG.$n())):4===p?(vG.Bl((vG.Bn()+vG.Wn())/2),vG.$l((vG.$n()+vG.Vn())/2)):5===p&&vG.iu(),t.Xv(e,i,r,n,h,o,a,l,u,c,f,d,vG)):t.Xv(e,i,r,n,h,o,a,l,u,c,f,d,g)}bM(){for(const t of this.H1t){if(!t)continue;const s=t.sV(this.PJ());if(!s)continue;const e=s.eq();if(QC.e$.Z1t&&e instanceof QC.e$.Z1t.Instance&&e.i2t())return!0}return!1}E3(){return this.r2t(0)}zq(){return this.n2t(0)}pCt(t){return this.h2t(0,t)}o2t(t){const s=this.zQt,e=s.Bn(),i=s.$n(),r=s.Wn(),n=s.Vn(),h=s.jn(),o=s.Un(),a=s.zn(),l=s.Hn(),u=this.O1t,c=this.LB().Lz(),f=c+this.F1t;if(1===u||3===u){let s=(e+a)/2,d=(i+l)/2,p=(r+h)/2,m=(n+o)/2;switch(t){case 4:return[p,m,f,s,d,f,e,i,c,r,n,c];case 5:return[s,d,f,p,m,f,h,o,c,a,l,c]}if(3===u)switch(s=(e+r)/2,d=(i+n)/2,p=(a+h)/2,m=(l+o)/2,t){case 2:return[s,d,f,p,m,f,a,l,c,e,i,c];case 3:return[p,m,f,s,d,f,r,n,c,h,o,c]}}else if(2===u&&2===t)return[r,n,f,h,o,f,a,l,c,e,i,c];switch(t){case 0:return[e,i,c,r,n,c,h,o,c,a,l,c];case 1:return[e,i,f,r,n,f,h,o,f,a,l,f];case 2:return[e,i,f,a,l,f,a,l,c,e,i,c];case 3:return[h,o,f,r,n,f,r,n,c,h,o,c];case 4:return[r,n,f,e,i,f,e,i,c,r,n,c];case 5:return[a,l,f,h,o,f,h,o,c,a,l,c];default:return[0,0,0,0,0,0,0,0,0,0,0,0]}}h2t(t,s){const e=this.LB();if((t=Math.floor(t))<0||t>5)return[e.YM(),e.KM(),e.Lz()];const i=this.V1t.uAt(t);let r=null;"string"==typeof s?r=i.Xq(s):"number"==typeof s&&(r=i.Yq(s-1));let n=.5,h=.5;r?(n=r.YM(),h=r.KM()):0===t&&(n=i.Iz(),h=i.Az()),e.Bz();const o=this.o2t(t);return KC(o[0],o[1],o[2],o[3],o[4],o[5],o[9],o[10],o[11],n,h)}n2t(t){return this.LB(),(t=Math.floor(t))<0||t>5?0:this.V1t.uAt(t).zq()}a2t(t){this.O1t!==t&&(this.O1t=t,this.Bc.jB())}l2t(){return this.O1t}u2t(t){t=Math.max(t,0),this.F1t!==t&&(this.F1t=t,this.LB().fLt(t),this.Bc.jB())}c2t(){return this.F1t}f2t(t,s){s=!!s,this.j1t[t]!==s&&(this.j1t[t]=s,this.Bc.jB())}r2t(t){return this.j1t[t]}d2t(t){t=!!t,this.W1t!==t&&(this.W1t=t,this.LB().rkt(t),this.Bc.jB())}p2t(){return this.W1t}m2t(t,s){const e=this.U1t,i=this.H1t;e[t]===s&&null===i[t]||(e[t]=s,i[t]=null,this.Bc.jB())}q1t(t,s){null!==s&&s.v1()&&(s=s.TV()[0]);const e=this.H1t;e[t]!==s&&(e[t]=s,this.Bc.jB())}g2t(t){this.z1t!==t&&(this.z1t=t,this.Bc.jB())}y2t(){return this.z1t}aT(){return{s:this.O1t,zh:this.F1t,fv:this.j1t,fi:this.U1t,fo:this.H1t.map(t=>t?t.I1():-1),zf:this.z1t}}lT(t){this.O1t=t.s,this.F1t=t.zh,this.LB().fLt(this.F1t),this.j1t=t.fv.slice(0),this.U1t=t.fi.slice(0),t.hasOwnProperty("fo")&&(this.H1t=t.fo.map(t=>this.Bc.QY(t))),t.hasOwnProperty("zf")&&(this.z1t=t.zf)}sot(t){}oot(t,s){}lPt(){const t="plugins.shape3d";return[{title:t+".name",properties:[{name:t+".properties.z-height.name",value:this.c2t(),M0t:t=>this.u2t(t)}]}]}bIt(){return self.w2t}};const bG=new WeakMap,MG=["box","prism","wedge","pyramid","corner-out","corner-in"],TG=["back","front","left","right","top","bottom"];self.w2t=class extends self.ZH{constructor(){super(),bG.set(this,self.cU.mU().eq())}Uq(){return bG.get(this).zq()}Hq(t){return this.qq(t)[0]}Jq(t){return this.qq(t)[1]}qq(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return bG.get(this).pCt(t)}S2t(t){const s=TG.indexOf(t);if(s<0)throw new Error("invalid face");return bG.get(this).n2t(s)}v2t(t,s){return this.b2t(t,s)[0]}M2t(t,s){return this.b2t(t,s)[1]}T2t(t,s){return this.b2t(t,s)[2]}b2t(t,s){const e=TG.indexOf(t);if(e<0)throw new Error("invalid face");if("string"!=typeof s&&"number"!=typeof s)throw new TypeError("expected string or number");return bG.get(this).h2t(e,s)}set x2t(t){tG.ii(t),bG.get(this).u2t(t)}get x2t(){return bG.get(this).c2t()}set shape(t){tG.oi(t);const s=MG.indexOf(t);if(-1===s)throw new TypeError("invalid shape");bG.get(this).a2t(s)}get shape(){return MG[bG.get(this).l2t()]}C2t(t,s){const e=TG.indexOf(t);if(e<0)throw new Error("invalid face");bG.get(this).f2t(e,!!s)}G2t(t){const s=TG.indexOf(t);if(s<0)throw new Error("invalid face");return bG.get(this).r2t(s)}set _2t(t){bG.get(this).d2t(t)}get _2t(){return bG.get(this).p2t()}I2t(t,s){const e=TG.indexOf(t),i=TG.indexOf(s);if(e<0||i<0)throw new Error("invalid face");bG.get(this).m2t(e,i)}get P2t(){return bG.get(this).y2t()}set P2t(t){tG.ii(t),bG.get(this).g2t(t)}R2t(t,s){const e=TG.indexOf(t);if(e<0)throw new Error("invalid face");const i=bG.get(this),r=i.l$().B$(s);i.q1t(e,r)}}}{const CG=self._s;CG.e$.y1t.t$={A2t(t){return this.l2t()===t},E2t(t,s){return CG.compare(this.c2t(),t,s)},O2t(t){return this.r2t(t)}}}self._s.e$.y1t.wht={F2t(t){this.a2t(t)},D2t(t){this.u2t(t)},L2t(t,s){this.f2t(t,s)},rkt(t){this.d2t(t)},k2t(t,s){this.m2t(t,s)},N2t(t){this.g2t(t)},B2t(t,s){this.q1t(t,s)}},self._s.e$.y1t.Sht={$2t(){return this.c2t()},W2t(){return this.y2t()},V2t(t,s){return this.h2t(t,s)[0]},j2t(t,s){return this.h2t(t,s)[1]},U2t(t,s){return this.h2t(t,s)[2]},z2t(t){return this.n2t(t)}};{const GG=self._s;GG.e$.Z1t=class extends GG.Z_t{constructor(t){super(t)}qr(){super.qr()}}}{let _G=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};WrapModeToStr=_G;const IG=self._s;IG.e$.Z1t.dEt=class extends IG.DIt{constructor(t,s){super(t),this.vx="repeat",this.bx="repeat",s&&(this.vx=_G(s[0]),this.bx=_G(s[1]))}qr(){super.qr()}vIt(){this.Vq().a$(this.Bc)}g5(t){return this.Vq().ZX(t,{nx:this.Bc.Zk(),sx:this.vx,ix:this.bx})}M5(){this.Vq().aR()}H2t(){return this.vx}q2t(){return this.bx}}}{const PG=self._s,RG=self.Ns,AG=0,EG=4,OG=5,FG=6,DG=7,LG=8,kG=9,NG=10,BG=11,$G=12,WG=13,VG=14,jG=PG.Hr(PG.Rect),UG=PG.Hr(PG.Pl),zG=PG.Hr(PG.Rect),HG=PG.Hr(PG.Pl);PG.e$.Z1t.Instance=class extends PG.pPt{constructor(t,s){super(t),this.J2t=0,this.Y2t=0,this.X2t=1,this.Z2t=1,this.K2t=0,this.Q2t=!1,this.t3t=0,this.s3t=0,this.e3t=0,this.i3t=0,this.r3t=0,this.n3t=null,s&&(this.LB().wj(!!s[AG]),this.J2t=s[EG],this.Y2t=s[OG],this.X2t=s[FG],this.Z2t=s[DG],this.K2t=PG.tn(s[LG]),this.Q2t=!!s[kG],this.t3t=s[NG],this.s3t=s[BG],this.e3t=s[$G],this.i3t=s[WG],this.r3t=s[VG])}qr(){this.h3t(),super.qr()}h3t(){this.n3t&&(this.n3t.qr(),this.n3t=null)}s2t(t,s,e){const i=this.MPt(),r=i.jg(),n=i.Qg(),h=this.J2t/r,o=this.Y2t/n,a=this.K2t;zG.set(0,0,t/(r*this.X2t),s/(n*this.Z2t)),zG.offset(-h,-o),0===a?e.Xl(zG):e.Zl(zG,-a)}e2t(t,s=!0){if(this.Q2t){const s=this.MPt();t.mv(),t.XO(s.jg()*this.X2t,s.Qg()*this.Z2t,this.t3t,this.s3t,this.e3t,this.i3t,this.r3t)}else s&&t.uv()}zT(t){const s=this.MPt(),e=s.xC();if(null===e)return;this.e2t(t),t.xO(e);const i=s.jg(),r=s.Qg();let n=this.J2t/i,h=this.Y2t/r;0!==this.K2t||this.Q2t||("repeat"===this.Kxt().H2t()&&(n%=1),"repeat"===this.Kxt().q2t()&&(h%=1));const o=this.LB();zG.set(0,0,o.jg()/(i*this.X2t),o.Qg()/(r*this.Z2t)),zG.offset(-n,-h),o.HH()?this.HQt(o,t):this.qQt(o,t)}qQt(t,s){let e=t.Wz();this.Bc.Qk()&&(e=t.ZLt(e)),0===this.K2t?s.sb(e,zG):(HG.Zl(zG,-this.K2t),s.LO(e,HG))}HQt(t,s){const e=t.gkt();if(t.wkt()){t.Nz(jG,UG,!1);let s=UG;this.Bc.Qk()&&(s=t.ZLt(s));let i=zG;0!==this.K2t&&(HG.Zl(zG,-this.K2t),i=HG),e.BT(t.qH(),s,i),t.ykt(!1)}e.zT(s,t.Lz())}MPt(){return this.n3t||this.mpt.Vq()}Sit(){return!0}xC(){return this.MPt().xC()}o3t(){this.LB().ykt(!0)}a3t(t){this.J2t!==t&&(this.J2t=t,this.Bc.jB(),this.o3t())}l3t(){return this.J2t}u3t(t){this.Y2t!==t&&(this.Y2t=t,this.Bc.jB(),this.o3t())}c3t(){return this.Y2t}f3t(t){this.X2t!==t&&(this.X2t=t,this.Bc.jB(),this.o3t())}d3t(){return this.X2t}p3t(t){this.Z2t!==t&&(this.Z2t=t,this.Bc.jB(),this.o3t())}m3t(){return this.Z2t}g3t(t){this.K2t!==t&&(this.K2t=t,this.Bc.jB(),this.o3t())}y3t(){return this.K2t}w3t(t){t=!!t,this.Q2t!==t&&(this.Q2t=t,this.Bc.jB())}i2t(){return this.Q2t}S3t(t){this.t3t!==t&&(this.t3t=t,this.i2t()&&this.Bc.jB())}v3t(){return this.t3t}b3t(t){this.s3t!==t&&(this.s3t=t,this.i2t()&&this.Bc.jB())}M3t(){return this.s3t}T3t(t){this.e3t!==t&&(this.e3t=t,this.i2t()&&this.Bc.jB())}x3t(){return this.e3t}C3t(t){this.i3t!==t&&(this.i3t=t,this.i2t()&&this.Bc.jB())}G3t(){return this.i3t}_3t(t){this.r3t!==t&&(this.r3t=t,this.i2t()&&this.Bc.jB())}I3t(){return this.r3t}aT(){const t={};return 0!==this.J2t&&(t.iox=this.J2t),0!==this.Y2t&&(t.ioy=this.Y2t),1!==this.X2t&&(t.isx=this.X2t),1!==this.Z2t&&(t.isy=this.Z2t),0!==this.K2t&&(t.ia=this.K2t),this.Q2t&&(t.tr=!0),1!==this.t3t&&(t.trx=this.t3t),1!==this.s3t&&(t.try=this.s3t),1!==this.e3t&&(t.tra=this.e3t),.1!==this.i3t&&(t.trbmx=this.i3t),.1!==this.r3t&&(t.trbmy=this.r3t),t}lT(t){this.J2t=t.iox||0,this.Y2t=t.ioy||0,this.X2t=t.hasOwnProperty("isx")?t.isx:1,this.Z2t=t.hasOwnProperty("isy")?t.isy:1,this.K2t=t.ia||0,this.Q2t=!!t.tr,this.t3t=t.hasOwnProperty("trx")?t.trx:1,this.s3t=t.hasOwnProperty("try")?t.try:1,this.e3t=t.hasOwnProperty("tra")?t.tra:1,this.i3t=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.r3t=t.hasOwnProperty("trbmy")?t.trbmy:.1}lPt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.l3t(),M0t:t=>this.a3t(t)},{name:t+".image-offset-y.name",value:this.c3t(),M0t:t=>this.u3t(t)},{name:t+".image-scale-x.name",value:100*this.d3t(),M0t:t=>this.f3t(t/100)},{name:t+".image-scale-y.name",value:100*this.m3t(),M0t:t=>this.p3t(t/100)},{name:t+".image-angle.name",value:PG.sn(this.y3t()),M0t:t=>this.g3t(PG.tn(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.i2t(),M0t:t=>this.w3t(t)},{name:t+".x-random.name",value:100*this.v3t(),M0t:t=>this.S3t(t/100)},{name:t+".y-random.name",value:100*this.M3t(),M0t:t=>this.b3t(t/100)},{name:t+".angle-random.name",value:100*this.x3t(),M0t:t=>this.T3t(t/100)},{name:t+".blend-margin-x.name",value:100*this.G3t(),M0t:t=>this.C3t(t/100)},{name:t+".blend-margin-y.name",value:100*this.I3t(),M0t:t=>this._3t(t/100)}]}]}sot(t){switch(t){case EG:return this.l3t();case OG:return this.c3t();case FG:return this.d3t();case DG:return this.m3t();case LG:return this.y3t();case kG:return this.i2t();case NG:return this.v3t();case BG:return this.M3t();case $G:return this.x3t();case WG:return this.G3t();case VG:return this.I3t()}}oot(t,s){switch(t){case EG:this.a3t(s);break;case OG:this.u3t(s);break;case FG:this.f3t(s);break;case DG:this.p3t(s);break;case LG:this.g3t(s);break;case kG:this.w3t(!!s);break;case NG:this.S3t(s);break;case BG:this.b3t(s);break;case $G:this.T3t(s);break;case WG:this.C3t(s);break;case VG:this._3t(s)}}bIt(){return self.P3t}};const qG=new WeakMap;self.P3t=class extends self.ZH{constructor(){super(),qG.set(this,self.cU.mU().eq())}set R3t(t){RG.ii(t),qG.get(this).a3t(t)}get R3t(){return qG.get(this).l3t()}set A3t(t){RG.ii(t),qG.get(this).u3t(t)}get A3t(){return qG.get(this).c3t()}E3t(t,s){RG.ii(t),RG.ii(s);const e=qG.get(this);e.a3t(t),e.u3t(s)}O3t(){const t=qG.get(this);return[t.l3t(),t.c3t()]}set F3t(t){RG.ii(t),qG.get(this).f3t(t)}get F3t(){return qG.get(this).d3t()}set D3t(t){RG.ii(t),qG.get(this).p3t(t)}get D3t(){return qG.get(this).m3t()}L3t(t,s){RG.ii(t),RG.ii(s);const e=qG.get(this);e.f3t(t),e.p3t(s)}k3t(){const t=qG.get(this);return[t.d3t(),t.m3t()]}set N3t(t){RG.ii(t),qG.get(this).g3t(t)}get N3t(){return qG.get(this).y3t()}set B3t(t){RG.ii(t),qG.get(this).g3t(PG.tn(t))}get B3t(){return PG.sn(qG.get(this).y3t())}get imageWidth(){return qG.get(this).MPt().jg()}get imageHeight(){return qG.get(this).MPt().Qg()}L0t(){const t=qG.get(this).MPt();return[t.jg(),t.Qg()]}set $3t(t){qG.get(this).w3t(!!t)}get $3t(){return qG.get(this).i2t()}set W3t(t){RG.ii(t),qG.get(this).S3t(t)}get W3t(){return qG.get(this).v3t()}set V3t(t){RG.ii(t),qG.get(this).b3t(t)}get V3t(){return qG.get(this).M3t()}j3t(t,s){RG.ii(t),RG.ii(s);const e=qG.get(this);e.S3t(t),e.b3t(s)}U3t(){const t=qG.get(this);return[t.v3t(),t.M3t()]}set z3t(t){RG.ii(t),qG.get(this).T3t(t)}get z3t(){return qG.get(this).x3t()}set H3t(t){RG.ii(t),qG.get(this).C3t(t)}get H3t(){return qG.get(this).G3t()}set q3t(t){RG.ii(t),qG.get(this)._3t(t)}get q3t(){return qG.get(this).I3t()}J3t(t,s){RG.ii(t),RG.ii(s);const e=qG.get(this);e.C3t(t),e._3t(s)}Y3t(){const t=qG.get(this);return[t.G3t(),t.I3t()]}async X3t(t){RG.Ni(t,Blob);const s=qG.get(this),e=s.l$(),i=PG.Hr(PG.RRt);i.URt(e,t),await i.ZX(e.gM(),{nx:e.Zk(),sx:s.Kxt().H2t(),ix:s.Kxt().q2t()}),s.Jr()?i.qr():(s.h3t(),s.n3t=i,e.jB())}}}self._s.e$.Z1t.t$={z0t:()=>!0,H0t:()=>!0,Z3t(){return this.i2t()}};{const JG=self._s;JG.e$.Z1t.wht={K3t(t){this.a3t(t)},Q3t(t){this.u3t(t)},t4t(t){this.f3t(t/100)},s4t(t){this.p3t(t/100)},e4t(t){this.g3t(JG.tn(t))},i4t(t){this.w3t(t)},r4t(t,s){this.S3t(t/100),this.b3t(s/100)},n4t(t){this.T3t(t/100)},h4t(t,s){this.C3t(t/100),this._3t(s/100)},s1t(t){this.LB().NM(t),this.Bc.jB()},async Q0t(t,s){if(this.n3t&&this.n3t.TK()===t)return;const e=this.Bc,i=JG.Hr(JG.RRt);try{if(await i.jRt(e,t,!0),!i.KK())throw new Error("image failed to load");if(this.Jr())return i.qr(),null;if(!await i.ZX(e.gM(),{nx:e.Zk(),sx:this.Kxt().H2t(),ix:this.Kxt().q2t()}))return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jr()||this.JU(JG.e$.Z1t.t$.H0t))}this.Jr()?i.qr():(this.h3t(),this.n3t=i,e.jB(),await this.KB(JG.e$.Z1t.t$.z0t))}}}{const YG=self._s;YG.e$.Z1t.Sht={f1t(){return this.MPt().jg()},d1t(){return this.MPt().Qg()},o4t(){return this.J2t},a4t(){return this.Y2t},l4t(){return 100*this.X2t},u4t(){return 100*this.Z2t},c4t(){return YG.sn(this.K2t)},f4t(){return 100*this.v3t()},d4t(){return 100*this.M3t()},p4t(){return 100*this.x3t()},m4t(){return 100*this.G3t()},g4t(){return 100*this.I3t()}}}{const XG=self._s;XG.e$.y4t=class extends XG.Z_t{constructor(t){super(t)}qr(){super.qr()}}}{let ZG=function(){return t_.jW().eq()};GetMouseSdkInstance=ZG;const KG=self._s,QG=self.Ns;KG.e$.y4t.dEt=class extends KG.DIt{constructor(t){super(t)}qr(){super.qr()}vIt(){}bIt(){return self.w4t}};let t_=null;self.w4t=class extends self.nV{constructor(t){super(t),t_=t,t.l$().bB().MB=this}S4t(t){return ZG().v4t(t)[0]}b4t(t){return ZG().v4t(t)[1]}M4t(t){return ZG().v4t(t)}T4t(t){return ZG().x4t(t)}C4t(t){QG.oi(t),ZG().G4t(t)}_4t(t){const s=ZG(),e=s.l$().B$(t);s.I4t(e)}}}{const s_=self._s,e_="mouse";let i_=null;s_.e$.y4t.Instance=class extends s_.$It{constructor(t,s){super(t,e_),this.P4t=[!1,!1,!1,!1,!1],this.R4t=0,this.A4t=0,this.E4t=0,this.O4t=0,this.F4t=0,this.D4t=0,this.L4t=0,this.k4t=0,this.N4t=!1,this.B4t=0,this.$4t=0,this.ZIt([["pointer-lock-change",t=>this.W4t(t)],["pointer-lock-error",t=>this.V4t(t)]]);const e=this.l$().Sf();this.Zf=new s_.Jf(s_.Vf.qf(e,"pointermove",t=>this.j4t(t.data)),s_.Vf.qf(e,"pointerdown",t=>this.U4t(t.data)),s_.Vf.qf(e,"pointerup",t=>this.z4t(t.data)),s_.Vf.qf(e,"dblclick",t=>this.H4t(t.data)),s_.Vf.qf(e,"wheel",t=>this.q4t(t.data)),s_.Vf.qf(e,"window-blur",()=>this.jUt()))}qr(){super.qr()}U4t(t){"mouse"===t.pointerType&&(this.R4t=t.pageX-this.Bc.Q$(),this.A4t=t.pageY-this.Bc.sW(),this.J4t(t.lastButtons,t.buttons))}j4t(t){this.B4t=t.movementX,this.$4t=t.movementY,this.JU(s_.e$.y4t.t$.Y4t),this.B4t=0,this.$4t=0,"mouse"===t.pointerType&&(this.R4t=t.pageX-this.Bc.Q$(),this.A4t=t.pageY-this.Bc.sW(),this.J4t(t.lastButtons,t.buttons))}z4t(t){"mouse"===t.pointerType&&this.J4t(t.lastButtons,t.buttons)}J4t(t,s){this.X4t(t,s,1,0),this.X4t(t,s,4,1),this.X4t(t,s,2,2),this.X4t(t,s,8,3),this.X4t(t,s,16,4)}X4t(t,s,e,i){!(t&e)&&s&e?this.Z4t(i):t&e&&!(s&e)&&this.K4t(i)}Z4t(t){this.P4t[t]=!0,this.JU(s_.e$.y4t.t$.Q4t),this.E4t=t,this.O4t=0,this.JU(s_.e$.y4t.t$.t5t),this.JU(s_.e$.y4t.t$.s5t)}K4t(t){this.P4t[t]&&(this.P4t[t]=!1,this.E4t=t,this.JU(s_.e$.y4t.t$.e5t))}H4t(t){this.E4t=t.button,this.O4t=1,this.JU(s_.e$.y4t.t$.t5t),this.JU(s_.e$.y4t.t$.s5t)}q4t(t){this.F4t=t.deltaY<0?1:0,this.D4t=t.deltaX,this.L4t=t.deltaY,this.k4t=t.deltaZ,this.JU(s_.e$.y4t.t$.i5t)}jUt(){for(let t=0,s=this.P4t.length;t<s;++t){if(!this.P4t[t])return;this.P4t[t]=!1,this.E4t=t,this.JU(s_.e$.y4t.t$.e5t)}}v4t(t){const s=this.Bc.cB(),e=this.R4t,i=this.A4t;if(void 0===t)return s.BB(0).Z3(e,i);{const r=s.kB(t);return r?r.eU(e,i):[0,0]}}x4t(t){return t=Math.floor(t),!!this.P4t[t]}r5t(){return this.R4t>=0&&this.A4t>=0&&this.R4t<this.Bc.Lzt()&&this.A4t<this.Bc.kzt()}G4t(t){i_!==t&&(i_=t,this.KIt("cursor",t))}async I4t(t){if(s_.Ks.oe||!t)return;const s=t.zCt();if(!s)return;const e=s.LB(),i=s.MPt();if(!e||!i)return;if(i_===i)return;i_=i;const r=`url(${await i.KRt()}) ${Math.round(e.Iz()*i.jg())} ${Math.round(e.Az()*i.Qg())}, auto`;this.KIt("cursor",r)}W4t(t){this.n5t(t["has-pointer-lock"])}V4t(t){this.n5t(t["has-pointer-lock"]),this.JU(s_.e$.y4t.t$.h5t)}n5t(t){this.N4t!==t&&(this.N4t=t,this.N4t?this.JU(s_.e$.y4t.t$.o5t):this.JU(s_.e$.y4t.t$.a5t))}lPt(){const t="plugins.mouse";return[{title:t+".name",properties:[{name:t+".debugger.absolute-position",value:this.R4t+","+this.A4t},{name:t+".debugger.left-button",value:this.P4t[0]},{name:t+".debugger.middle-button",value:this.P4t[1]},{name:t+".debugger.right-button",value:this.P4t[2]},{name:t+".debugger.button-4",value:this.P4t[3]},{name:t+".debugger.button-5",value:this.P4t[4]}]},{title:t+".debugger.position-on-each-layer",properties:this.Bc.cB().zV().map(t=>({name:"$"+t.Rc(),value:t.eU(this.R4t,this.A4t).join(", ")}))}]}}}{const r_=self._s;r_.e$.y4t.t$={t5t(t,s){return this.E4t===t&&this.O4t===s},Q4t:()=>!0,l5t(t){return this.P4t[t]},e5t(t){return this.E4t===t},u5t(t){const s=this.Bc.Dgt().ixt(),e=[];return this.r5t()&&e.push([this.R4t,this.A4t]),r_.xor(this.Bc.Ak()._Nt(t,e,s),s)},s5t(t,s,e){if(t!==this.E4t||s!==this.O4t)return!1;if(!this.r5t())return!1;const i=this.R4t,r=this.A4t;return this.Bc.Ak()._Nt(e,[[i,r]],!1)},i5t(t){return 2===t||this.F4t===t},o5t:()=>!0,a5t:()=>!0,h5t:()=>!0,c5t(){return this.N4t},Y4t:()=>!0}}{const n_=self._s,h_=["auto","pointer","text","crosshair","move","help","wait","none"],o_=["auto","all-scroll","none","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","not-allowed","grab","grabbing","col-resize","row-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out"];n_.e$.y4t.wht={f5t(t){this.G4t(h_[t])},d5t(t){this.G4t(o_[t])},p5t(t){this.I4t(t)},m5t(t){this.tPt("request-pointer-lock",{unadjustedMovement:t})},g5t(){this.KIt("release-pointer-lock")}}}self._s.e$.y4t.Sht={l_t(t){return this.v4t(t)[0]},u_t(t){return this.v4t(t)[1]},y5t(){return this.R4t},w5t(){return this.A4t},S5t(){return this.B4t},v5t(){return this.$4t},b5t(){return this.D4t},M5t(){return this.L4t},T5t(){return this.k4t}};{const a_=self._s;a_.e$.Keyboard=class extends a_.Z_t{constructor(t){super(t)}qr(){super.qr()}}}{let l_=function(){return c_.jW().eq()};GetKeyboardSdkInstance=l_;const u_=self._s;self.Ns,u_.e$.Keyboard.dEt=class extends u_.DIt{constructor(t){super(t)}qr(){super.qr()}vIt(){}bIt(){return self.x5t}};let c_=null;self.x5t=class extends self.nV{constructor(t){super(t),c_=t,t.l$().bB().keyboard=this}C5t(t){const s=l_();if("string"==typeof t)return s.G5t(t);if("number"==typeof t)return s._5t(t);throw new TypeError("expected string or number")}}}{const f_=self._s,d_="keyboard";f_.e$.Keyboard.Instance=class extends f_.$It{constructor(t,s){super(t,d_),this.I5t=new Set,this.P5t=new Set,this.R5t=0,this.A5t="",this.E5t="",this.O5t=!1;const e=this.l$().Sf();this.Zf=new f_.Jf(f_.Vf.qf(e,"keydown",t=>this.F5t(t.data)),f_.Vf.qf(e,"keyup",t=>this.D5t(t.data)),f_.Vf.qf(e,"window-blur",()=>this.L5t()),f_.Vf.qf(e,"keyboard-blur",()=>this.L5t())),this.Bc.YB(this.JM())}qr(){super.qr()}async JM(){const t=await this.QIt("init");this.O5t=t.isKeyboardLockSupported}F5t(t){const s=t.which,e=t.code||s.toString(),i=t.key;this.I5t.has(e)||(this.I5t.add(e),this.P5t.add(s),this.A5t=e,this.R5t=s,this.E5t=i,this.JU(f_.e$.Keyboard.t$.k5t),this.JU(f_.e$.Keyboard.t$.N5t),this.JU(f_.e$.Keyboard.t$.B5t),this.JU(f_.e$.Keyboard.t$.$5t))}D5t(t){const s=t.which,e=t.code||s.toString(),i=t.key;this.I5t.delete(e),this.P5t.delete(s),this.A5t=e,this.R5t=s,this.E5t=i,this.JU(f_.e$.Keyboard.t$.W5t),this.JU(f_.e$.Keyboard.t$.V5t),this.JU(f_.e$.Keyboard.t$.j5t),this.JU(f_.e$.Keyboard.t$.U5t)}L5t(){for(const t of this.P5t)this.P5t.delete(t),this.R5t=t,this.JU(f_.e$.Keyboard.t$.W5t),this.JU(f_.e$.Keyboard.t$.V5t),this.JU(f_.e$.Keyboard.t$.U5t);this.I5t.clear()}G5t(t){return this.I5t.has(t)}_5t(t){return this.P5t.has(t)}aT(){return{tk:this.R5t,tkk:this.E5t}}lT(t){this.R5t=t.tk,t.hasOwnProperty("tkk")&&(this.E5t=t.tkk)}lPt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.R5t},{name:t+".debugger.last-key-string",value:f_.e$.Keyboard.Sht.z5t(this.R5t)},{name:t+".debugger.last-typed-key",value:this.E5t}]}]}}}{const p_=self._s,m_=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];p_.e$.Keyboard.t$={G5t(t){return this.P5t.has(t)},N5t(t){return this.R5t===t},k5t:()=>!0,W5t:()=>!0,V5t(t){return this.R5t===t},_5t(t){return t=Math.floor(t),this.P5t.has(t)},$5t(t){return this.R5t===t},U5t(t){return this.R5t===t},B5t(t){const s=m_[t];return this.A5t===s},j5t(t){const s=m_[t];return this.A5t===s},H5t(t){const s=m_[t];return this.I5t.has(s)},q5t(){return this.O5t},J5t:()=>!0,Y5t:()=>!0}}{const g_=self._s;g_.e$.Keyboard.wht={async X5t(t){if(!this.O5t)return;let s=[];t&&(s=t.split(",")),(await this.QIt("lock-keyboard",{keysArr:s})).isOk?this.JU(g_.e$.Keyboard.t$.J5t):this.JU(g_.e$.Keyboard.t$.Y5t)},Z5t(){this.O5t&&this.QIt("unlock-keyboard")}}}{let y_=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};StringFromCharCode=y_,self._s.e$.Keyboard.Sht={K5t(){return this.R5t},z5t:t=>y_(t),Q5t(){return this.E5t}}}{const w_=self._s;w_.e$.t6t=class extends w_.Z_t{constructor(t){super(t)}qr(){super.qr()}}}{const S_=self._s;S_.e$.t6t.dEt=class extends S_.DIt{constructor(t){super(t)}qr(){super.qr()}vIt(){}}}{let v_=function(t,s,e){if(s<t.length)b_.Sh(t,s);else if(s>t.length)if("function"==typeof e)for(let i=t.length;i<s;++i)t.push(e());else for(let i=t.length;i<s;++i)t.push(e)};ResizeArray=v_;const b_=self._s,M_=self.Ns,T_=self.cU;b_.e$.t6t.Instance=class extends b_.$It{constructor(t,s){super(t),this.s6t=10,this.e6t=1,this.i6t=1,this.Nu=null,this.r6t=[],this.n6t=[],this.h6t=[],this.o6t=-1,s&&(this.s6t=s[0],this.e6t=s[1],this.i6t=s[2]),this.Nu=b_.To(this.s6t,()=>b_.To(this.e6t,()=>b_.To(this.i6t,0)))}qr(){this.Nu=null,super.qr()}a6t(t,s,e){return t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),t>=0&&t<this.s6t&&s>=0&&s<this.e6t&&e>=0&&e<this.i6t?this.Nu[t][s][e]:0}Set(t,s,e,i){t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),t>=0&&t<this.s6t&&s>=0&&s<this.e6t&&e>=0&&e<this.i6t&&(this.Nu[t][s][e]=i)}$R(t,s,e){if(t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),t<0&&(t=0),s<0&&(s=0),e<0&&(e=0),this.s6t===t&&this.e6t===s&&this.i6t===e)return;this.s6t=t,this.e6t=s,this.i6t=e;const i=this.Nu;v_(i,t,()=>b_.To(s,()=>b_.To(e,0)));for(let r=0;r<t;++r){v_(i[r],s,()=>b_.To(e,0));for(let t=0;t<s;++t)v_(i[r][t],e,0)}}jg(){return this.s6t}Qg(){return this.e6t}O3(){return this.i6t}l6t(t,s,e,i,r){for(;s>0;){const n=Math.floor(this.Bc.uB()*s);if(--s,0===t){const t=this.a6t(s,i,r),e=this.a6t(n,i,r);this.Set(s,i,r,e),this.Set(n,i,r,t)}else if(1===t){const t=this.a6t(e,s,r),i=this.a6t(e,n,r);this.Set(e,s,r,i),this.Set(e,n,r,t)}else if(2===t){const t=this.a6t(e,i,s),r=this.a6t(e,i,n);this.Set(e,i,s,r),this.Set(e,i,n,t)}}}lPt(){const t="plugins.arr.debugger",s="plugins.arr.properties",e=[{title:t+".array-properties.title",properties:[{name:s+".width.name",value:this.s6t,M0t:t=>this.$R(t,this.e6t,this.i6t)},{name:s+".height.name",value:this.e6t,M0t:t=>this.$R(this.s6t,t,this.i6t)},{name:s+".depth.name",value:this.i6t,M0t:t=>this.$R(this.s6t,this.e6t,t)},{name:s+".elements.name",value:this.s6t*this.e6t*this.i6t}]}],i=[];if(1===this.e6t&&1===this.i6t)for(let t=0;t<this.s6t;++t)i.push({name:"$"+t,value:this.Nu[t][0][0],M0t:s=>this.Nu[t][0][0]=s});else for(let t=0;t<this.s6t;++t)i.push({name:"$"+t,value:this.Nu[t].toString()});return i.length&&e.push({title:t+".array-data.title",properties:i}),e}u6t(){return JSON.stringify({c2array:!0,size:[this.s6t,this.e6t,this.i6t],data:this.Nu})}aT(){return{size:[this.s6t,this.e6t,this.i6t],data:this.Nu}}lT(t){const s=t.size;this.s6t=s[0],this.e6t=s[1],this.i6t=s[2],this.Nu=t.data}c6t(){return this.o6t>=0&&this.o6t<this.r6t.length?this.r6t[this.o6t]:0}f6t(){return this.o6t>=0&&this.o6t<this.n6t.length?this.n6t[this.o6t]:0}d6t(){return this.o6t>=0&&this.o6t<this.h6t.length?this.h6t[this.o6t]:0}bIt(){return self.p6t}};const x_=new WeakMap;self.p6t=class extends T_{constructor(){super(),x_.set(this,T_.mU().eq())}get width(){return x_.get(this).jg()}get height(){return x_.get(this).Qg()}get depth(){return x_.get(this).O3()}RV(t,s=1,e=1){M_.ii(t),M_.ii(s),M_.ii(e),x_.get(this).$R(t,s,e)}m6t(t,s=0,e=0){return M_.ii(t),M_.ii(s),M_.ii(e),x_.get(this).a6t(t,s,e)}g6t(t,s,e=0,i=0){if(M_.ii(s),M_.ii(e),M_.ii(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid type");x_.get(this).Set(s,e,i,t)}}}{let C_=function(t,s,e,i,r,n){t.oX(e),n.fU().rV().jpt(n.PJ()),s.aX(i,r),t.lX(e)};DoForEachTrigger=C_;const G_=self._s;G_.e$.t6t.t$={hCt(t,s,e){return G_.compare(this.a6t(t,0,0),s,e)},y6t(t,s,e,i){return G_.compare(this.a6t(t,s,0),e,i)},w6t(t,s,e,i,r){return G_.compare(this.a6t(t,s,e),i,r)},S6t(t){const s=this.Bc,e=s.aN(),i=s.pN(),r=i.tX(),n=s.bN(),h=n.sX(),o=n.eX(i),a=++this.o6t,l=this.r6t,u=this.n6t,c=this.h6t,f=this.s6t,d=this.e6t,p=this.i6t;if(a===this.r6t.length?(l.push(0),u.push(0),c.push(0)):(l[a]=0,u[a]=0,c[a]=0),s.nX(!1),0===t)for(let t=0;t<f;++t)for(let s=0;s<d;++s)for(let n=0;n<p;++n)l[a]=t,u[a]=s,c[a]=n,C_(e,i,r,h,o,this);else if(1===t)for(let t=0;t<f;++t)for(let s=0;s<d;++s)l[a]=t,u[a]=s,C_(e,i,r,h,o,this);else for(let t=0;t<f;++t)l[a]=t,C_(e,i,r,h,o,this);return s.nX(!0),this.o6t--,n.dX(),!1},v6t(t,s){return G_.compare(this.a6t(this.c6t(),this.f6t(),this.d6t()),t,s)},b6t(t){const s=this.s6t,e=this.e6t,i=this.i6t,r=this.Nu;for(let n=0;n<s;++n)for(let s=0;s<e;++s)for(let e=0;e<i;++e)if(r[n][s][e]===t)return!0;return!1},Au(){return 0===this.s6t||0===this.e6t||0===this.i6t},M6t(t,s,e){let i=0;switch(t){case 0:i=this.s6t;break;case 1:i=this.e6t;break;case 2:i=this.i6t}return G_.compare(i,s,e)}}}{let __=function(t,s){if("number"==typeof t&&"number"==typeof s)return t-s;{const e=t.toString(),i=s.toString();return e<i?-1:e>i?1:0}};CompareValues=__;const I_=self._s;I_.e$.t6t.wht={Ru(t){const s=this.s6t,e=this.e6t,i=this.i6t,r=this.Nu;for(let n=0;n<s;++n)for(let s=0;s<e;++s)for(let e=0;e<i;++e)r[n][s][e]=t},$R(t,s,e){this.$R(t,s,e)},XM(t,s){this.Set(t,0,0,s)},xz(t,s,e){this.Set(t,s,0,e)},T6t(t,s,e,i){this.Set(t,s,e,i)},eX(t,s,e){const i=this.s6t,r=this.e6t,n=this.i6t,h=this.Nu;if(0===e){const e=I_.To(r,()=>I_.To(n,s));0===t?h.push(e):h.unshift(e),this.s6t++}else if(1===e){for(let e=0;e<i;++e){const i=I_.To(n,s);0===t?h[e].push(i):h[e].unshift(i)}this.e6t++}else{for(let e=0;e<i;++e)for(let i=0;i<r;++i)0===t?h[e][i].push(s):h[e][i].unshift(s);this.i6t++}},dX(t,s){const e=this.s6t,i=this.e6t,r=this.i6t,n=this.Nu;if(0===s){if(0===e)return;0===t?n.pop():n.shift(),this.s6t--}else if(1===s){if(0===i)return;for(let s=0;s<e;++s)0===t?n[s].pop():n[s].shift();this.e6t--}else{if(0===r)return;for(let s=0;s<e;++s)for(let e=0;e<i;++e)0===t?n[s][e].pop():n[s][e].shift();this.i6t--}},x6t(t){const s=this.s6t,e=this.e6t,i=this.i6t,r=this.Nu;if(0!==s&&0!==e&&0!==i)if(0===t)r.reverse();else if(1===t)for(let t=0;t<s;++t)r[t].reverse();else for(let t=0;t<s;++t)for(let s=0;s<e;++s)r[t][s].reverse()},C6t(t){const s=this.s6t,e=this.e6t,i=this.i6t,r=this.Nu;if(0!==s&&0!==e&&0!==i)if(0===t)r.sort((t,s)=>__(t[0][0],s[0][0]));else if(1===t)for(let t=0;t<s;++t)r[t].sort((t,s)=>__(t[0],s[0]));else for(let t=0;t<s;++t)for(let s=0;s<e;++s)r[t][s].sort(__)},G6t(t){const s=this.s6t,e=this.e6t,i=this.i6t,r=this.Nu;if(0!==s&&0!==e&&0!==i)if(0===t)r.sort((t,s)=>{for(let i=0;i<e;++i){const e=__(t[i][0],s[i][0]);if(0!==e)return e}return 0});else if(1===t)for(let t=0;t<e;++t){const e=[];for(let i=0;i<s;++i)e.push(r[i][t]);e.sort((t,s)=>__(t[0],s[0]));for(let i=0;i<s;++i)r[i][t]=e[i]}else if(2===t){const t=[];for(let s=0;s<e;++s)t.push(s);t.sort((t,e)=>{for(let i=0;i<s;++i){const s=__(r[i][t],r[i][e]);if(0!==s)return s}return 0});for(let e=0;e<s;++e){let s=[];for(const i of t)s.push(r[e][i]);r[e]=s}}else if(3===t)for(let t=0;t<s;++t)r[t].sort((t,s)=>__(t[0],s[0]));else for(let t=0;t<s;++t)for(let s=0;s<e;++s)r[t][s].sort(__)},_6t(t){const s=this.s6t,e=this.e6t,i=this.i6t;if(0!==s&&0!==e&&0!==i)if(0===t)for(let r=0;r<e;++r)for(let e=0;e<i;++e)this.l6t(t,s,0,r,e);else if(1===t)for(let r=0;r<s;++r)for(let s=0;s<i;++s)this.l6t(t,e,r,0,s);else for(let r=0;r<s;++r)for(let s=0;s<e;++s)this.l6t(t,i,r,s,0)},Eu(t,s){if((t=Math.floor(t))<0)return;const e=this.s6t,i=this.e6t,r=this.i6t,n=this.Nu;if(0===s){if(t>=e)return;n.splice(t,1),this.s6t--}else if(1===s){if(t>=i)return;for(let s=0;s<e;++s)n[s].splice(t,1);this.e6t--}else{if(t>=r)return;for(let s=0;s<e;++s)for(let e=0;e<i;++e)n[s][e].splice(t,1);this.i6t--}},SQ(t,s,e){if((s=Math.floor(s))<0)return;const i=this.s6t,r=this.e6t,n=this.i6t,h=this.Nu;if(0===e){if(s>i)return;h.splice(s,0,I_.To(r,()=>I_.To(n,t))),this.s6t++}else if(1===e){if(s>r)return;for(let e=0;e<i;++e)h[e].splice(s,0,I_.To(n,t));this.e6t++}else{if(s>n)return;for(let e=0;e<i;++e)for(let i=0;i<r;++i)h[e][i].splice(s,0,t);this.i6t++}},I6t(t,s,e){const i=t.split(s);this.$R(i.length,1,1);for(let t=0,s=i.length;t<s;++t){let s=i[t];0===e?String(Number(s))===s&&(s=Number(s)):2===e&&(s=Number(s)),this.Set(t,0,0,s)}},P6t(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse JSON: ",t)}if(!s.c2array)return void console.warn("[Array] Attempted to load JSON that does not appear to be Construct array data - no data loaded");const e=s.size;this.s6t=e[0],this.e6t=e[1],this.i6t=e[2],this.Nu=s.data},R6t(t){const s=URL.createObjectURL(new Blob([this.u6t()],{type:"application/json"}));this.Bc.IB(s,t)}}}self._s.e$.t6t.Sht={a6t(t,s,e){return this.a6t(t,s||0,e||0)},c_t(){return this.s6t},f_t(){return this.e6t},A6t(){return this.i6t},E6t(){return this.c6t()},O6t(){return this.f6t()},F6t(){return this.d6t()},D6t(){return this.a6t(this.c6t(),this.f6t(),this.d6t())},Wd(){return this.a6t(0,0,0)},L6t(){return this.a6t(this.s6t-1,0,0)},k6t(t){const s=this.Nu;for(let e=0,i=this.s6t;e<i;++e)if(s[e][0][0]===t)return e;return-1},N6t(t){const s=this.Nu;for(let e=this.s6t-1;e>=0;--e)if(s[e][0][0]===t)return e;return-1},B6t(t){let s=[];for(let t=0;t<this.s6t;++t)s.push(this.a6t(t,0,0));return s.join(t)},s_t(){return this.u6t()}};{const P_=self._s;P_.e$.$6t=class extends P_.Z_t{constructor(t){super(t)}qr(){super.qr()}},P_.e$.$6t.W6t=-2147483648,P_.e$.$6t.V6t=1073741824,P_.e$.$6t.j6t=536870912,P_.e$.$6t.U6t=3758096384,P_.e$.$6t.z6t=536870911}{const R_=self._s,A_=R_.e$.$6t.W6t,E_=R_.e$.$6t.V6t,O_=R_.e$.$6t.j6t,F_=R_.e$.$6t.z6t;R_.e$.$6t.dEt=class extends R_.DIt{constructor(t){super(t),this.H6t=[],this.q6t=!1,this.J6t=0,this.Y6t=[],this.X6t=null}qr(){this.X6t.clear(),this.X6t=null,super.qr()}vIt(){this.Vq().a$(this.Bc)}g5(t){return this.Vq().ZX(t,{nx:this.Bc.Zk()})}M5(){this.Vq().aR()}S5(){for(const t of this.fU().eV())t.eq().Z6t()}kIt(t,s,e){this.J6t=s;for(const s of t)if(s){const t=s[0],e=!!s[1];this.H6t.push({ZDt:t,use:e,K6t:[[[null,null],[null,null]],[[null,null],[null,null]]]})}else this.H6t.push(null);for(const t of e){const s=t[0],e=t[1],i=t[2];this.Y6t.push({name:s,type:e,Q6t:i})}}t8t(t,s){this.q6t=!1,this.s8t(t,s)}s8t(t,s){if(!this.q6t){this.q6t=!0;for(let e=0,i=this.H6t.length;e<i;++e)this.H6t[e]&&(this.e8t(e,t,s,!1,!1,!1),this.e8t(e,t,s,!1,!1,!0),this.e8t(e,t,s,!1,!0,!1),this.e8t(e,t,s,!1,!0,!0),this.e8t(e,t,s,!0,!1,!1),this.e8t(e,t,s,!0,!1,!0),this.e8t(e,t,s,!0,!0,!1),this.e8t(e,t,s,!0,!0,!0))}}e8t(t,s,e,i,r,n){if(t<0||t>=this.H6t.length)return;const h=this.H6t[t];if(!h)return;const o=R_.Hr(R_.lu,h.ZDt,h.use);o.transform(s,e,0),n&&o.hu(),i&&o.iu(s/2),r&&o.nu(e/2),h.K6t[i?1:0][r?1:0][n?1:0]=null,h.K6t[i?1:0][r?1:0][n?1:0]=o}i8t(t){if(-1===t)return null;const s=t&F_;if(s<0||s>=this.H6t.length)return null;const e=this.H6t[s];if(!e)return null;const i=t&A_?1:0,r=t&E_?1:0,n=t&O_?1:0;return e.K6t[i][r][n]}r8t(t){return!t||t._u()}n8t(){return this.J6t}h8t(t){this.X6t||(this.X6t=new Map);const s=this.X6t.get(t);if("number"==typeof s&&s>=0)return this.Y6t[s];for(let s=0;s<this.Y6t.length;s++)if(this.Y6t[s].name===t)return this.X6t.set(t,s),this.Y6t[s]}}}{let D_=function(t){const s=[],e=t.split(",");for(let t=0,i=e.length;t<i;++t){const i=e[t],r=i.indexOf("x");if(r>-1){let t=parseInt(i.substring(0,r),10);const e=i.substring(r+1);let n=parseInt(e,10);for(e.includes("h")&&(n|=z_),e.includes("v")&&(n|=H_),e.includes("d")&&(n|=q_);t>0;--t)s.push(n)}else{let t=parseInt(i,10);i.includes("h")&&(t|=z_),i.includes("v")&&(t|=H_),i.includes("d")&&(t|=q_),s.push(t)}}return s};RunLengthDecode=D_;const L_=self._s,k_=self.Ns,N_=0,B_=1,$_=2,W_=3,V_=4,j_=5,U_=6,z_=L_.e$.$6t.W6t,H_=L_.e$.$6t.V6t,q_=L_.e$.$6t.j6t,J_=L_.e$.$6t.U6t,Y_=L_.e$.$6t.z6t,X_=L_.Hr(L_.Rect),Z_=L_.Hr(L_.Rect),K_=L_.Hr(L_.Rect);L_.e$.$6t.Instance=class extends L_.pPt{constructor(t,s){super(t);const e=this.LB();this.o8t=32,this.a8t=32,this.l8t=0,this.u8t=0,this.c8t=0,this.f8t=0,this.d8t=0,this.p8t=0,this.m8t=e.jg(),this.g8t=e.Qg(),this.TQ=0,this.xQ=0,this.y8t=[],this.w8t=new Map,this.S8t=!0,this.n3t=null,s&&(e.wj(s[N_]),this.o8t=Math.max(s[B_],1),this.a8t=Math.max(s[$_],1),this.l8t=s[W_],this.u8t=s[V_],this.c8t=s[j_],this.f8t=s[U_]),this.TQ=Math.ceil(this.Bc.Jk()/this.o8t),this.xQ=Math.ceil(this.Bc.Xk()/this.a8t),this.VIt.s8t(this.o8t,this.a8t),this.v8t=null}qr(){this.h3t(),L_.bh(this.y8t),this.y8t=null,this.w8t.clear(),this.w8t=null,super.qr()}h3t(){this.n3t&&(this.n3t.qr(),this.n3t=null)}kIt(t,s,e){this.d8t=s,this.p8t=e,this.b8t(!0),this.M8t(t),this.T8t()}b8t(t){const[s,e]=this.x8t();if(s<=this.d8t&&e<=this.p8t&&!t)return;let i=0,r=0;t?(i=Math.ceil(this.p8t/this.xQ),r=Math.ceil(this.d8t/this.TQ)):(i=this.y8t.length,r=Math.ceil(this.d8t/this.TQ),e>this.p8t&&(this.p8t=e,i=Math.ceil(this.p8t/this.xQ)),s>this.d8t&&(this.d8t=s,r=Math.ceil(this.d8t/this.TQ)),this.C8t(),this.G8t(),this.Bc.jB());const n=this.y8t;if(n.length<i)for(let t=n.length;t<i;++t)n.push([]);for(let t=0;t<i;++t){const s=n[t];for(let e=s.length;e<r;++e)s.push(L_.Hr(L_.e$.$6t._8t,this,e,t))}}M8t(t){const s=D_(t);let e=0;const i=this.d8t,r=this.TQ,n=this.xQ;for(let t=0,h=this.p8t;t<h;++t)for(let h=0;h<i;++h){const i=s[e++],o=this.I8t(h,t);o&&o.P8t(h%r,t%n,i)}}R8t(){let t="";if(this.d8t<=0||this.p8t<=0)return t;let s=1,e=this.A8t(0,0);const[i,r]=this.x8t();let n=-1,h=!1,o=!1,a=!1;for(let l=0;l<r;++l)for(let r=0===l?1:0;r<i;++r){const i=this.A8t(r,l);i===e?++s:(-1===e?(n=-1,h=!1,o=!1,a=!1):(n=e&Y_,h=0!==(e&z_),o=0!==(e&H_),a=0!==(e&q_)),t+=1===s?""+n:s+"x"+n,h&&(t+="h"),o&&(t+="v"),a&&(t+="d"),t+=",",s=1,e=i)}return-1===e?(n=-1,h=!1,o=!1,a=!1):(n=e&Y_,h=0!==(e&z_),o=0!==(e&H_),a=0!==(e&q_)),t+=1===s?""+n:s+"x"+n,h&&(t+="h"),o&&(t+="v"),a&&(t+="d"),t}C8t(){const t=this.y8t;for(let s=0,e=t.length;s<e;++s){const e=t[s];for(let t=0,s=e.length;t<s;++t)e[t].E8t()}this.S8t=!0}T8t(){if(!this.S8t)return;this.S8t=!1;const t=this.y8t;for(let s=0,e=t.length;s<e;++s){const e=t[s];for(let t=0,s=e.length;t<s;++t)e[t].O8t()}}F8t(){this.S8t=!0,this.G8t(),this.Bc.jB()}G8t(){this.LB().dkt(!0)}I8t(t,s){if(t<0||s<0)return null;const e=Math.floor(s/this.xQ);if(e>=this.y8t.length)return null;const i=this.y8t[e],r=Math.floor(t/this.TQ);return r>=i.length?null:i[r]}D8t(t,s){if(t<0||s<0||s>=this.y8t.length)return null;const e=this.y8t[s];return t>=e.length?null:e[t]}A8t(t,s){if(t=Math.floor(t),s=Math.floor(s),t<0||s<0||t>=this.d8t||s>=this.p8t)return-1;const e=this.I8t(t,s);return e?e.L8t()[s%this.xQ][t%this.TQ]:-1}P8t(t,s,e){if(t=Math.floor(t),s=Math.floor(s),t<0||s<0||t>=this.d8t||s>=this.p8t)return;if(-1!==e&&(e&Y_)>this.n8t())return;const i=this.I8t(t,s);i&&i.P8t(t%this.TQ,s%this.xQ,e)}n8t(){return this.VIt.n8t()}k8t(t){return Math.floor((t-this.LB().YM())/(this.TQ*this.o8t))}N8t(t){return Math.floor((t-this.LB().KM())/(this.xQ*this.a8t))}B8t(t){return Math.floor((t-this.LB().YM())/this.o8t)}$8t(t){return Math.floor((t-this.LB().KM())/this.a8t)}W8t(){return this.d8t}V8t(){return this.p8t}j8t(){return Math.floor(this.LB().jg()/this.U8t())}z8t(){return Math.floor(this.LB().Qg()/this.H8t())}x8t(){const t=this.LB();return[Math.floor(t.jg()/this.U8t()),Math.floor(t.Qg()/this.H8t())]}U8t(){return this.o8t}H8t(){return this.a8t}q8t(){return this.TQ}J8t(){return this.xQ}xNt(t,s){const e=this.k8t(t.Qa()),i=this.N8t(t.tl()),r=this.k8t(t.sl()),n=this.N8t(t.el());for(let t=e;t<=r;++t)for(let e=i;e<=n;++e){const i=this.D8t(t,e);i&&(i.O8t(),L_.Fr(s,i.Y8t()))}}PPt(t,s){const e=this.B8t(t),i=this.$8t(s),r=this.A8t(e,i);if(-1===r)return!1;const n=this.VIt.i8t(r);if(!n)return!0;if(!this.VIt.r8t(n))return!1;const h=this.LB();return t-=Math.floor((t-h.YM())/this.o8t)*this.o8t+h.YM(),s-=Math.floor((s-h.KM())/this.a8t)*this.a8t+h.KM(),n.Cl(t,s)}X8t(t){const s=this.y8t;for(let e=0,i=s.length;e<i;++e){const i=s[e];for(let s=0,e=i.length;s<e;++s){const e=i[s];e.O8t(),L_.Fr(t,e.Y8t())}}}MPt(){return this.n3t||this.mpt.Vq()}Z8t(t){const s=this.w8t,e=s.get(t);if(e)return e;const i=t&Y_,r=0!==(t&z_),n=0!==(t&H_),h=0!==(t&q_),o=this.MPt(),a=o.jg(),l=this.o8t,u=this.l8t,c=this.c8t,f=Math.floor((a-u)/(l+c)*l)+c,d=Math.floor(f/l),p=i%d,m=Math.floor(i/d),g=o.HRt()+this.l8t+(this.o8t+this.c8t)*p,y=o.qRt()+this.u8t+(this.a8t+this.f8t)*m;X_.za(g,y,this.o8t,this.a8t),X_.St(o.JRt(),o.YRt());const w=L_.Hr(L_.Pl);return w.Xl(X_),h&&w.hu(),r&&w.iu(),n&&w.nu(),w.offset(p,m),s.set(t,w),w}Z6t(){this.w8t.clear(),this.C8t()}zT(t){const s=this.MPt(),e=s.xC();if(!e)return;X_.S(s.yA()),X_.offsetLeft(this.l8t/e.jg()),X_.offsetTop(this.u8t/e.Qg()),t.pv(),t.YO(X_,e.jg(),e.Qg(),this.o8t,this.a8t,this.c8t,this.f8t),t.xO(e);const i=this.LB(),r=i.kB();i.jg()===this.m8t&&i.Qg()===this.g8t||(this.G8t(),this.C8t(),this.m8t=i.jg(),this.g8t=i.Qg());let n=i.YM(),h=i.KM();this.Bc.Qk()&&(n=Math.round(n),h=Math.round(h));const o=this.TQ*this.o8t,a=this.xQ*this.a8t,l=i.Lz(),u=Z_;if(r.u2()){u.set(-1/0,-1/0,1/0,1/0);const s=K_,e=r.R3();for(const i of this.y8t)for(const r of i)r.K8t(s),e.Xw(s.Qa(),s.tl(),l,s.sl(),s.el(),l)&&(r.O8t(),r.zT(t,u,n,h))}else{r.Y1(l,u);const s=Math.floor((u.Qa()-n)/o),e=Math.floor((u.sl()-n)/o),i=Math.floor((u.tl()-h)/a),c=Math.floor((u.el()-h)/a);for(let r=s;r<=e;++r)for(let s=i;s<=c;++s){const e=this.D8t(r,s);e&&(e.O8t(),e.zT(t,u,n,h))}}}aT(){this.b8t();const[t,s]=this.x8t();return{tw:this.o8t,th:this.a8t,tox:this.l8t,toy:this.u8t,tsx:this.c8t,tsy:this.f8t,w:t,h:s,d:this.R8t()}}lT(t){this.o8t=t.tw,this.a8t=t.th,this.l8t=t.tox,this.u8t=t.toy,this.c8t=t.tsx,this.f8t=t.tsy,this.d8t=t.w,this.p8t=t.h,this.b8t(!0),this.M8t(t.d),this.G8t(),this.C8t()}u6t(){this.b8t();const[t,s]=this.x8t();return JSON.stringify({c2tilemap:!0,width:t,height:s,data:this.R8t()})}Q8t(t){switch(t){case 0:default:return 0;case 1:return z_;case 2:return H_;case 3:return z_|q_;case 4:return z_|H_;case 5:return H_|q_;case 6:return z_|H_|q_;case 7:return q_}}sot(t){switch(t){case B_:return this.o8t;case $_:return this.a8t;case W_:return this.l8t;case V_:return this.u8t;case j_:return this.c8t;case U_:return this.f8t}}oot(t,s){switch(t){case B_:if(this.o8t===s)return;this.o8t=Math.max(s,1),this.TQ=Math.ceil(this.Bc.Jk()/this.o8t),this.VIt.t8t(),this.t7t();break;case $_:if(this.a8t===s)return;this.a8t=Math.max(s,1),this.xQ=Math.ceil(this.Bc.Xk()/this.a8t),this.VIt.t8t(),this.t7t();break;case W_:if(this.l8t===s)return;this.l8t=s,this.t7t();break;case V_:if(this.u8t===s)return;this.u8t=s,this.t7t();break;case j_:if(this.c8t===s)return;this.c8t=s,this.t7t();break;case U_:if(this.f8t===s)return;this.f8t=s,this.t7t()}}t7t(){this.w8t.clear(),this.C8t(),this.T8t()}bIt(){return tI}};const Q_=new WeakMap,tI=self.s7t=class extends self.ZH{constructor(){super(),Q_.set(this,self.cU.mU().eq())}get e7t(){return Q_.get(this).W8t()}get i7t(){return Q_.get(this).V8t()}r7t(){const t=Q_.get(this);return[t.W8t(),t.V8t()]}get n7t(){return Q_.get(this).j8t()}get h7t(){return Q_.get(this).z8t()}o7t(){const t=Q_.get(this);return[t.j8t(),t.z8t()]}get a7t(){return Q_.get(this).U8t()}get l7t(){return Q_.get(this).H8t()}u7t(){const t=Q_.get(this);return[t.U8t(),t.H8t()]}c7t(t,s){return k_.ii(t),k_.ii(s),Q_.get(this).A8t(t,s)}f7t(t,s,e){k_.ii(t),k_.ii(s),k_.ii(e);const i=Q_.get(this);i.b8t(),i.P8t(t,s,e)}async X3t(t){k_.Ni(t,Blob);const s=Q_.get(this),e=s.l$(),i=L_.Hr(L_.RRt);i.URt(e,t),await i.ZX(e.gM(),{nx:e.Zk()}),s.Jr()?i.qr():(s.h3t(),s.n3t=i,s.w8t.clear(),s.C8t(),e.jB())}};tI.W6t=z_,tI.V6t=H_,tI.j6t=q_,tI.U6t=J_,tI.z6t=Y_}{const sI=self._s,eI=sI.e$.$6t.U6t,iI=sI.e$.$6t.z6t;sI.e$.$6t.t$={d7t(t,s,e,i){let r=this.A8t(t,s);return-1!==r&&(r&=iI),sI.compare(r,e,i)},p7t(t,s,e){const i=this.A8t(t,s);let r=0;return-1!==i&&(r=i&eI),r===this.Q8t(e)},z0t:()=>!0,H0t:()=>!0,m7t(t){return this.v8t||(this.v8t=new sI.e$.$6t.g7t(this,this.VIt)),this.v8t.m7t(t)}}}{const rI=self._s,nI=rI.e$.$6t.z6t;rI.e$.$6t.wht={y7t(t,s){this.b8t(),this.P8t(t,s,-1)},w7t(t,s,e,i){this.b8t(),this.P8t(t,s,e&nI|this.Q8t(i))},S7t(t,s,e){const i=this.A8t(t,s);-1!==i&&(this.b8t(),this.P8t(t,s,i&nI|this.Q8t(e)))},v7t(t,s,e,i){const r=Math.floor(Math.max(t,0)),n=Math.floor(Math.max(s,0)),h=Math.floor(Math.min(t+e,this.d8t)),o=Math.floor(Math.min(s+i,this.p8t));for(let t=n;t<o;++t)for(let s=r;s<h;++s)this.P8t(s,t,-1)},b7t(t,s,e,i,r,n){this.b8t();const h=Math.floor(Math.max(t,0)),o=Math.floor(Math.max(s,0)),a=Math.floor(Math.min(t+e,this.d8t)),l=Math.floor(Math.min(s+i,this.p8t)),u=r&nI|this.Q8t(n);for(let t=o;t<l;++t)for(let s=h;s<a;++s)this.P8t(s,t,u)},M7t(t,s,e,i,r){this.b8t();const n=Math.floor(Math.max(t,0)),h=Math.floor(Math.max(s,0)),o=Math.floor(Math.min(t+e,this.d8t)),a=Math.floor(Math.min(s+i,this.p8t)),l=this.Q8t(r);for(let t=h;t<a;++t)for(let s=n;s<o;++s){const e=this.A8t(s,t);-1!==e&&this.P8t(s,t,e&nI|l)}},T7t(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse tilemap JSON: ",t)}s.c2tilemap?(this.d8t=s.width,this.p8t=s.height,this.b8t(!0),this.M8t(s.data),this.C8t(),this.G8t()):console.error("[Construct] Unrecognized JSON data format")},R6t(t){const s=URL.createObjectURL(new Blob([this.u6t()],{type:"application/json"}));this.Bc.IB(s,t)},async Q0t(t,s){if(this.n3t&&this.n3t.TK()===t)return;const e=this.Bc,i=rI.Hr(rI.RRt);try{if(await i.jRt(e,t),!i.KK())throw new Error("image failed to load");if(this.Jr())return i.qr(),null;if(!await i.ZX(e.gM(),{nx:e.Zk()}))return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jr()||this.JU(rI.e$.$6t.t$.H0t))}this.Jr()?i.qr():(this.h3t(),this.n3t=i,e.jB(),this.w8t.clear(),this.C8t(),await this.KB(rI.e$.$6t.t$.z0t))},s1t(t){t>=2&&t++,this.LB().NM(t),this.Bc.jB()},x7t(t,s,e){if(this.b8t(),this.v8t||(this.v8t=new rI.e$.$6t.g7t(this,this.VIt)),this.v8t.m7t(e))switch(this.v8t.C7t(e)){case 0:case 1:this.v8t.G7t(t,s,e);break;case 2:this.v8t._7t(t,s,e)}},I7t(t,s,e,i,r,n,h){this.b8t(),this.v8t||(this.v8t=new rI.e$.$6t.g7t(this,this.VIt)),this.v8t.m7t(e)&&2===this.v8t.C7t(e)&&this.v8t._7t(t,s,e,i,r,n,h)},P7t(t,s,e){if(this.b8t(),this.v8t||(this.v8t=new rI.e$.$6t.g7t(this,this.VIt)),this.v8t.m7t(e))switch(this.v8t.C7t(e)){case 0:case 1:this.v8t.R7t(t,s,e);break;case 2:this.v8t.A7t(t,s,e)}},E7t(t,s,e,i,r,n){this.b8t(),this.v8t||(this.v8t=new rI.e$.$6t.g7t(this,this.VIt)),this.v8t.m7t(e)&&2===this.v8t.C7t(e)&&this.v8t.A7t(t,s,e,i,r,n)},O7t(t,s,e,i,r,n,h){rI.e$.$6t.wht.I7t.call(this,t,s,e,i,r,n,h)},F7t(t,s,e,i,r,n){rI.e$.$6t.wht.E7t.call(this,t,s,e,i,r,n)},D7t(t,s,e){rI.e$.$6t.wht.x7t.call(this,t,s,e)},L7t(t,s,e){rI.e$.$6t.wht.P7t.call(this,t,s,e)}}}{const hI=self._s,oI=hI.e$.$6t.z6t;hI.e$.$6t.Sht={k7t(t,s){const e=this.A8t(t,s);return-1===e?-1:e&oI},N7t(t){return this.B8t(t)},B7t(t){return this.$8t(t)},$7t(t){return t*this.o8t+this.LB().YM()+this.o8t/2},W7t(t){return t*this.a8t+this.LB().KM()+this.a8t/2},V7t(t){const s=this.LB().YM();return Math.floor((t-s)/this.o8t)*this.o8t+s+this.o8t/2},j7t(t){const s=this.LB().KM();return Math.floor((t-s)/this.a8t)*this.a8t+s+this.a8t/2},U7t(){return this.u6t()},z7t(){return this.U8t()},H7t(){return this.H8t()},q7t(){return this.j8t()},J7t(){return this.z8t()},Y7t(t){return this.v8t||(this.v8t=new hI.e$.$6t.g7t(this,this.VIt)),this.v8t.m7t(t)&&2===this.v8t.C7t(t)?this.v8t.X7t(t):0},Z7t(t){return this.v8t||(this.v8t=new hI.e$.$6t.g7t(this,this.VIt)),this.v8t.m7t(t)&&2===this.v8t.C7t(t)?this.v8t.K7t(t):0}}}{const aI=self._s,lI=aI.e$.$6t.W6t,uI=aI.e$.$6t.V6t,cI=aI.e$.$6t.j6t,fI=aI.e$.$6t.z6t,dI=aI.Hr(aI.Rect),pI=aI.Hr(aI.Pl);aI.e$.$6t.Q7t=class extends aI.Ur{constructor(){super(),this.Wc=-1,this.t9t=-1,this.s9t=!1,this.e9t=!1,this.i9t=!1,this.r9t=aI.Hr(aI.Rect),this.n9t=null}PQ(t,s,e,i,r,n,h,o){this.Wc=t,this.t9t=t&fI,this.s9t=0!==(t&lI),this.e9t=0!==(t&uI),this.i9t=0!==(t&cI),this.r9t.za(i*s+n,r*e+h,s,e),this.n9t=o.Z8t(this.Wc)}zT(t,s,e,i,r){dI.S(this.r9t),dI.offset(e,i),dI.Tl(s)&&(pI.Xl(dI),t.LO(pI,this.n9t))}}}{const mI=self._s;mI.e$.$6t.h9t=class extends mI.Ur{constructor(){super(),this.Wc=-1,this.o9t=null,this.r9t=mI.Hr(mI.Rect)}PQ(t,s,e,i,r,n,h,o){this.Wc=t,this.o9t=s,this.r9t.za(r*e+h,n*i+o,e,i)}a9t(t){this.r9t.Ya(this.r9t.sl()+t)}l9t(){return this.Wc}u9t(){return!!this.o9t}GNt(){return this.o9t}CNt(){return this.r9t}}}{const gI=self._s,yI=gI.e$.$6t.z6t;gI.e$.$6t._8t=class extends gI.Ur{constructor(t,s,e){super();const i=t.q8t(),r=t.J8t();this.MOt=t,this.Ra=s,this.Aa=e,this.Wa=this.Ra*i*t.U8t(),this.Va=this.Aa*r*t.H8t(),this.c9t=[],this.f9t=[],this.d9t=[],this.p9t=!1;for(let t=0;t<r;++t){const t=new Int32Array(i);t.fill(-1),this.c9t.push(t)}}Ru(){const t=this.MOt.q8t(),s=this.MOt.J8t(),e=this.c9t;if(e.length<s)for(let i=e.length;i<s;++i)e.push(new Int32Array(t));else e.length>s&&gI.Sh(e,s);for(let s=0,i=e.length;s<i;++s){let i=e[s];i.length!==t&&(i=new Int32Array(t),e[s]=i),i.fill(-1)}}K8t(t){const s=this.MOt,e=s.LB(),i=s.q8t()*s.U8t(),r=s.J8t()*s.H8t(),n=e.YM()+this.Wa,h=e.KM()+this.Va;t.set(n,h,n+i,h+r)}E8t(){this.p9t=!1}O8t(){if(this.p9t)return;const t=this.MOt,s=t.Kxt(),e=t.LB(),i=t.U8t(),r=t.H8t(),n=t.q8t(),h=t.J8t(),o=this.Wa,a=this.Va;if(i<=0||r<=0)return;let l=Math.min(t.W8t(),Math.floor(e.jg()/i)),u=Math.min(t.V8t(),Math.floor(e.Qg()/r));l-=o/i,u-=a/r,l>n&&(l=n),u>h&&(u=h);const c=this.c9t,f=this.f9t;let d=0;for(let s=0;s<u;++s){const e=c[s];for(let n=0;n<l;++n){const h=e[n];if(-1===h)continue;let l=null;d<f.length?l=f[d]:(l=gI.Hr(gI.e$.$6t.Q7t),f.push(l)),l.PQ(h,i,r,n,s,o,a,t),++d}}d<f.length&&gI.Sh(f,d);let p=null,m=!1;const g=this.d9t;gI.bh(g);for(let t=0;t<u;++t){const e=c[t];for(let n=0;n<l;++n){const h=e[n],l=s.i8t(h),u=s.r8t(l);-1!==h&&u?!p||l||m?(p&&g.push(p),p=gI.Hr(gI.e$.$6t.h9t),p.PQ(h,l,i,r,n,t,o,a),m=!!l):p.a9t(i):p&&(g.push(p),p=null,m=!1)}p&&(g.push(p),p=null,m=!1)}let y=g.length;for(let t=0;t<y;++t){const s=g[t];if(s.u9t())continue;const e=s.CNt();for(let s=t+1;s<y;++s){const t=g[s],i=t.CNt();i.tl()<e.el()||i.tl()>e.el()||i.sl()>e.sl()||i.Qa()>e.Qa()||t.u9t()||i.Qa()===e.Qa()&&i.sl()===e.sl()&&(g.splice(s,1),--y,e.Xa(e.el()+r),--s)}}this.p9t=!0}P8t(t,s,e){this.c9t[s][t]!==e&&(this.c9t[s][t]=e,this.p9t=!1,this.MOt.F8t())}L8t(){return this.c9t}Y8t(){return this.d9t}zT(t,s,e,i){const r=this.MOt,n=this.f9t;for(let h=0,o=n.length;h<o;++h)n[h].zT(t,s,e,i,r)}}}{const wI=self._s,SI=-999,vI=-998,bI=-1,MI=0,TI=1,xI=Object.freeze([[0,0,0],[0,0,0],[0,0,0]]);wI.e$.$6t.g7t=class{constructor(t,s){this.MOt=t,this.VIt=s,this.m9t=[null,null,null],this.g9t=[wI.e$.$6t.y9t,wI.e$.$6t.w9t,wI.e$.$6t.S9t],this.v9t=new wI._c}get b9t(){return xI}get M9t(){return-999}get T9t(){return-998}get x9t(){return-1}get C9t(){return 0}get G9t(){return 1}_9t(){return this.MOt}Kxt(){return this.VIt}I9t(){return this.v9t}X7t(t){return this.m7t(t)?this.P9t(t):0}K7t(t){return this.m7t(t)?this.R9t(t):0}G7t(t,s,e){this.m7t(e)&&(this.A9t(e,0),this.E9t(t,s,this.O9t(t,s,e)))}R7t(t,s,e){this.m7t(e)&&(this.A9t(e,1),this.F9t(t,s),this.E9t(t,s,this.O9t(t,s,e)))}_7t(t,s,e,i,r,n,h){this.m7t(e)&&(this.A9t(e,0),this.D9t(t,s,e,this.O9t(t,s,e),i,r,n,h,0))}A7t(t,s,e,i,r,n){this.m7t(e)&&(this.A9t(e,1),this.D9t(t,s,e,this.O9t(t,s,e),i,r,n,0,1))}C7t(t){return this.L9t(t)}m7t(t){return!!this.Kxt().h8t(t)}k9t(t,s){return this._9t().A8t(t,s)}N9t(t,s,e){this._9t().P8t(t,s,e)}F9t(t,s){this._9t().P8t(t,s,-1)}E9t(t,s,e){e&&(this.N9t(t-1,s-1,e[0][0]),this.N9t(t,s-1,e[1][0]),this.N9t(t+1,s-1,e[2][0]),this.N9t(t-1,s,e[0][1]),this.N9t(t,s,e[1][1]),this.N9t(t+1,s,e[2][1]),this.N9t(t-1,s+1,e[0][2]),this.N9t(t,s+1,e[1][2]),this.N9t(t+1,s+1,e[2][2]))}D9t(t,s,e,i,r=!1,n=!1,h=0,o=0,a=0){if(!i)return;const l=(i=this.B9t(i,e,r,n,h,o,a))[0].length,u=i.length;for(let e=0;e<u;e++)for(let r=0;r<l;r++)if(i[e][r]!==this.M9t)switch(o){case 0:i[e][r]===this.x9t?this.F9t(t+r,s+e):this.N9t(t+r,s+e,i[e][r]);break;case 1:-1!==i[e][r]&&this.N9t(t+r,s+e,i[e][r])}}L9t(t){return this.Kxt().h8t(t).type}$9t(t){const s=this.L9t(t);this.m9t[s]||(this.m9t[s]=new this.g9t[s](this))}A9t(t,s){this.$9t(t);const e=this.L9t(t);this.m9t[e]&&this.m9t[e].W9t(s)}V9t(t){this.$9t(t);const s=this.L9t(t);if(this.m9t[s])return this.m9t[s].j9t()}O9t(t,s,e){this.$9t(e);const i=this.Kxt().h8t(e);if(this.m9t[i.type])return this.m9t[i.type].U9t(t,s,i)}B9t(t,s,e=!1,i=!1,r=0,n=0,h=0){this.$9t(s);const o=this.Kxt().h8t(s);if(this.m9t[o.type])return this.m9t[o.type].z9t(t,e,i,r,n,h)}P9t(t){this.$9t(t);const s=this.Kxt().h8t(t);if(this.m9t[s.type])return this.m9t[s.type].X7t(s)}R9t(t){this.$9t(t);const s=this.Kxt().h8t(t);if(this.m9t[s.type])return this.m9t[s.type].K7t(s)}}}{const CI=self._s;CI.e$.$6t.H9t=class{constructor(t){this.jp=t}q9t(t,s,e){const i=this.jp.k9t(t,s);return!!this.J9t(i,!0,i,e)}J9t(t,s,e,i){return t===this.jp.x9t?0:s&&t===this.jp.T9t?1:s&&i&&!this.Y9t(e,i)?0:1}X9t(t,s,e,i){const r=i.Q6t[t];if(!r.length)return this.jp.x9t;if(1===r.length)return r[0][0];const n=this.jp.k9t(s,e);if(this.J9t(n)&&r.some(t=>n===t[0]))return n;const h=this.jp.I9t();h.Ru();for(let[t,s]of r)t>this.jp._9t().n8t()||("number"!=typeof s&&(s=1),h.Fc(s,t));return h.Ec()}Y9t(t,s){for(const e of s.Q6t)for(const[s]of e)if(s===t)return!0;return!1}}}{const GI=self._s;GI.e$.$6t.y9t=class{constructor(t){this.jp=t,this.Z9t=new GI.e$.$6t.H9t(t),this.K9t=t.C9t}W9t(t){this.K9t=t}j9t(){return this.K9t}X7t(t){return 0}K7t(t){return 0}z9t(t,s=!1,e=!1,i=0,r=0,n=0){return t}U9t(t,s,e){return this.Q9t(t,s,e)}Q9t(t,s,e){const i=this.K9t===this.jp.C9t?this.tts(t,s,void 0,e):this.jp.x9t,r=this.sts(t,s-1,"s",e),n=this.sts(t-1,s,"e",e),h=this.sts(t+1,s,"w",e),o=this.sts(t,s+1,"n",e),a=this.jp.b9t;return a[0][0]=this.jp.M9t,a[1][0]=this.ets(r,t,s-1,e),a[2][0]=this.jp.M9t,a[0][1]=this.ets(n,t-1,s,e),a[1][1]=this.ets(i,t,s,e),a[2][1]=this.ets(h,t+1,s,e),a[0][2]=this.jp.M9t,a[1][2]=this.ets(o,t,s+1,e),a[2][2]=this.jp.M9t,a}sts(t,s,e,i){return this.Z9t.q9t(t,s,i)?this.tts(t,s,e,i):this.jp.M9t}tts(t,s,e,i){this.K9t===this.jp.G9t&&(e=void 0);const r=this.jp.k9t(t,s-1),n=this.jp.k9t(t-1,s),h=this.jp.k9t(t+1,s),o=this.jp.k9t(t,s+1),a="n"===e?this.jp.T9t:r,l="w"===e?this.jp.T9t:n,u="e"===e?this.jp.T9t:h,c="s"===e?this.jp.T9t:o;return 1*this.Z9t.J9t(a,!0,r,i)+2*this.Z9t.J9t(l,!0,n,i)+4*this.Z9t.J9t(u,!0,h,i)+8*this.Z9t.J9t(c,!0,o,i)}ets(t,s,e,i){return t===this.jp.M9t||t===this.jp.x9t?t:this.Z9t.X9t(t,s,e,i)}}}{const _I=self._s,II=new Map([[2,1],[8,2],[10,3],[11,4],[16,5],[18,6],[22,7],[24,8],[26,9],[27,10],[30,11],[31,12],[64,13],[66,14],[72,15],[74,16],[75,17],[80,18],[82,19],[86,20],[88,21],[90,22],[91,23],[94,24],[95,25],[104,26],[106,27],[107,28],[120,29],[122,30],[123,31],[126,32],[127,33],[208,34],[210,35],[214,36],[216,37],[218,38],[219,39],[222,40],[223,41],[248,42],[250,43],[251,44],[254,45],[255,46],[0,47]]);_I.e$.$6t.w9t=class{constructor(t){this.jp=t,this.Z9t=new _I.e$.$6t.H9t(t),this.K9t=t.C9t}W9t(t){this.K9t=t}j9t(){return this.K9t}X7t(t){return 0}K7t(t){return 0}z9t(t,s=!1,e=!1,i=0,r=0,n=0){return t}U9t(t,s,e){return this.its(t,s,e)}its(t,s,e){const i=this.K9t===this.jp.C9t?this.rts(t,s,void 0,e):this.jp.x9t,r=this.nts(t-1,s-1,"se",e),n=this.nts(t,s-1,"s",e),h=this.nts(t+1,s-1,"sw",e),o=this.nts(t-1,s,"e",e),a=this.nts(t+1,s,"w",e),l=this.nts(t-1,s+1,"ne",e),u=this.nts(t,s+1,"n",e),c=this.nts(t+1,s+1,"nw",e),f=this.jp.b9t;return f[0][0]=this.hts(r,t-1,s-1,e),f[1][0]=this.hts(n,t,s-1,e),f[2][0]=this.hts(h,t+1,s-1,e),f[0][1]=this.hts(o,t-1,s,e),f[1][1]=this.hts(i,t,s,e),f[2][1]=this.hts(a,t+1,s,e),f[0][2]=this.hts(l,t-1,s+1,e),f[1][2]=this.hts(u,t,s+1,e),f[2][2]=this.hts(c,t+1,s+1,e),f}nts(t,s,e,i){return this.Z9t.q9t(t,s,i)?this.rts(t,s,e,i):this.jp.M9t}rts(t,s,e,i){this.K9t===this.jp.G9t&&(e=void 0);const r=this.jp.k9t(t,s-1),n=this.jp.k9t(t-1,s),h=this.jp.k9t(t+1,s),o=this.jp.k9t(t,s+1),a=this.jp.k9t(t-1,s-1),l=this.jp.k9t(t+1,s-1),u=this.jp.k9t(t-1,s+1),c=this.jp.k9t(t+1,s+1),f="n"===e?this.jp.T9t:r,d="w"===e?this.jp.T9t:n,p="e"===e?this.jp.T9t:h,m="s"===e?this.jp.T9t:o,g="nw"===e?this.jp.T9t:a,y="ne"===e?this.jp.T9t:l,w="sw"===e?this.jp.T9t:u,S="se"===e?this.jp.T9t:c,v=this.Z9t.J9t(f,!0,r,i),b=this.Z9t.J9t(d,!0,n,i),M=this.Z9t.J9t(p,!0,h,i),T=this.Z9t.J9t(m,!0,o,i);return 1*(v&&b?this.Z9t.J9t(g,!0,a,i):0)+2*v+4*(v&&M?this.Z9t.J9t(y,!0,l,i):0)+8*b+16*M+32*(T&&b?this.Z9t.J9t(w,!0,u,i):0)+64*T+128*(T&&M?this.Z9t.J9t(S,!0,c,i):0)}hts(t,s,e,i){return t===this.jp.M9t||t===this.jp.x9t?t:this.Z9t.X9t(II.get(t),s,e,i)}}}{const PI=self._s;PI.e$.$6t.S9t=class{constructor(t){this.jp=t,this.K9t=t.C9t,this.ots=0,this.ats=0,this.lts=0,this.uts=0,this.cts=0,this.fts=0}W9t(t){this.K9t=t}j9t(){return this.K9t}X7t(t){return t.Q6t[0].length}K7t(t){return t.Q6t.length}z9t(t,s=!1,e=!1,i=0,r=0,n=0){switch(t=this.dts(0,0,i,t),this.uts=this.ots,this.cts=this.ats,this.fts=this.lts,this.lts&&(t=this.pts(t)),this.ots&&(t=this.mts(t,n===this.jp.C9t)),this.ats&&(t=this.gts(t,n===this.jp.C9t)),t=this.dts(s?1:0,e?1:0,0,t),i){case 0:this.uts=this.ots,this.cts=this.ats;break;case 1:this.uts=1^this.ots,this.cts=this.ats;break;case 2:this.uts=1^this.ots,this.cts=1^this.ats;break;case 3:this.uts=this.ots,this.cts=1^this.ats}return this.ots&&(t=this.mts(t,n===this.jp.C9t)),this.ats&&(t=this.gts(t,n===this.jp.C9t)),t}U9t(t,s,e){const i=e.Q6t[0].length,r=e.Q6t.length,n=Array.from({length:r},()=>new Array(i).fill(this.jp.x9t)),h=this.jp.I9t();h.Ru();for(let t=0;t<r;t++)for(let s=0;s<i;s++){const i=e.Q6t[t][s];switch(this.K9t){case this.jp.C9t:if(1===i.length){const e=i[0][0];if(e>this.jp._9t().n8t())continue;n[t][s]=e}else{for(let[t,s]of i)t>this.jp._9t().n8t()||("number"!=typeof s&&(s=1),h.Fc(s,t));n[t][s]=h.Ec()}break;case this.jp.G9t:e.Q6t[t][s][0][0]===this.jp.x9t?n[t][s]=this.jp.M9t:n[t][s]=this.jp.x9t}}return n}dts(t,s,e,i){switch(e){case 0:this.ots=t,this.ats=s,this.lts=0;break;case 1:this.ots=1^s,this.ats=t,this.lts=1;break;case 2:this.ots=1^t,this.ats=1^s,this.lts=0;break;case 3:this.ots=s,this.ats=1^t,this.lts=1}return i}yts(t){if(t===this.jp.M9t||t===this.jp.x9t)return t;const s=globalThis.s7t;let e=t&s.z6t;return this.fts&&(e|=s.j6t),this.uts&&(e|=s.W6t),this.cts&&(e|=s.V6t),e}mts(t,s){for(let s=0;s<t.length;s++)t[s].reverse();if(s){let s=t[0].length,e=t.length;for(let i=0;i<e;i++)for(let e=0;e<s;e++){const s=this.yts(t[i][e]);t[i][e]=s}}return t}gts(t,s){if(t.reverse(),s){let s=t[0].length,e=t.length;for(let i=0;i<e;i++)for(let e=0;e<s;e++){const s=this.yts(t[i][e]);t[i][e]=s}}return t}pts(t){let s=[],e=t.length,i=t[0].length;for(let r=0;r<i;r++){let i=[];for(let s=0;s<e;s++)i.push(t[s][r]);s.push(i)}return s}}}{const RI=self._s;RI.e$.se=class extends RI.Z_t{constructor(t){super(t)}qr(){super.qr()}}}{const AI=self._s;AI.e$.se.dEt=class extends AI.DIt{constructor(t){super(t)}qr(){super.qr()}vIt(){}}}{const EI=self._s,OI="browser";EI.e$.se.Instance=class extends EI.$It{constructor(t,s){super(t,OI),this.wts="",this.Sts=!1,this.vts="",this.bts="",this.Mts=!1,this.Tts=0,this.xts=0,this.Cts=0,this.Gts=0,this._ts=!1,this.Its=!1,this.Pts=new Map,this.Rts=!1,this.Ats="",this.Ets=!1,this.ZIt([["online-state",t=>this.Ots(t)],["backbutton",()=>this.Fts()],["sw-message",t=>this.Dts(t)],["hashchange",t=>this.Lts(t)],["install-available",()=>this.kts()],["app-installed",t=>this.Nts(t)]]);const e=this.l$().Sf();this.Zf=new EI.Jf(EI.Vf.qf(e,"afterfirstlayoutstart",()=>this.Bts()),EI.Vf.qf(e,"window-resize",()=>this.L$t()),EI.Vf.qf(e,"window-focus",()=>this.UUt()),EI.Vf.qf(e,"window-blur",()=>this.jUt()),EI.Vf.qf(e,"suspend",()=>this.$ts()),EI.Vf.qf(e,"resume",()=>this.Wts())),this.Bc.YB(this.QIt("get-initial-state",{exportType:this.Bc.H$()}).then(t=>{this.wts=t.location,this.Sts=t.isOnline,this.vts=t.referrer,this.bts=t.title,this.Mts=t.isCookieEnabled,this.Tts=t.screenWidth,this.xts=t.screenHeight,this.Cts=t.windowOuterWidth,this.Gts=t.windowOuterHeight,this._ts=t.windowHasFocus,this.Its=t.isConstructArcade}))}qr(){super.qr()}Bts(){this.KIt("ready-for-sw-messages")}async Ots(t){const s=!!t.isOnline;this.Sts!==s&&(this.Sts=s,this.Sts?await this.KB(EI.e$.se.t$.Vts):await this.KB(EI.e$.se.t$.jts))}async L$t(){await this.KB(EI.e$.se.t$.Uts)}async UUt(){this._ts=!0,await this.KB(EI.e$.se.t$.zts)}async jUt(){this._ts=!1,await this.KB(EI.e$.se.t$.Hts)}$ts(){this.JU(EI.e$.se.t$.qts)}Wts(){this.JU(EI.e$.se.t$.Jts)}async Fts(){await this.KB(EI.e$.se.t$.Yts)}Dts(t){const s=t.type;"downloading-update"===s?this.JU(EI.e$.se.t$.Xts):"update-ready"===s||"update-pending"===s?this.JU(EI.e$.se.t$.Zts):"offline-ready"===s&&this.JU(EI.e$.se.t$.Kts)}Lts(t){this.wts=t.location,this.JU(EI.e$.se.t$.Qts)}kts(){this.Rts=!0,this.JU(EI.e$.se.t$.tss)}Nts(t){this.Rts=!1,this.JU(EI.e$.se.t$.sss)}ess(){return this.Ets}iss(t){t=!!t,this.Ets!==t&&(this.Ets=t,this.KIt("set-warn-on-close",{enabled:t}))}lPt(){const t="plugins.browser.debugger";return[{title:"plugins.browser.name",properties:[{name:t+".user-agent",value:navigator.userAgent},{name:t+".is-online",value:this.Sts},{name:t+".is-fullscreen",value:this.Bc.GB().MWt()}]}]}}}{const FI=self._s;FI.e$.se.t$={rss(){return this.Sts},Vts:()=>!0,jts:()=>!0,Uts:()=>!0,zts:()=>!0,Hts:()=>!0,nss(){return this._ts},hss(){return this.Mts},oss(){return this.Bc.GB().MWt()},Yts:()=>!0,ass(t){return(this.Bc.GB().nY()<=this.Bc.GB().hY()?0:1)===t},Xts:()=>!0,Zts:()=>!0,Kts:()=>!0,Qts:()=>!0,tss:()=>!0,lss(){return this.Rts},uss(t){switch(t){case 0:return"accepted"===this.Ats;case 1:return"dismissed"===this.Ats;case 2:return"error"===this.Ats;case 3:return!0;default:return!1}},sss:()=>!0,css(t){const s=this.Bc.GB().xWt();switch(t){case 0:return"browser"===s;case 1:return"minimal-ui"===s;case 2:return"standalone"===s;case 3:return"fullscreen"===s;default:return!1}},fss(){return this.ess()},dss(){return!this.Bc.PN()},qts:()=>!0,Jts:()=>!0,pss:()=>!1,mss:()=>!1,gss:()=>!1,yss:()=>!1,wss:()=>!1,Sss:()=>!0,vss:()=>!0}}{const C3=self._s,ORIENTATIONS=["portrait","landscape","portrait-primary","portrait-secondary","landscape-primary","landscape-secondary"];C3.e$.se.wht={bss(t){this.KIt("alert",{message:t.toString()})},Mss(){this.Its||(this.Bc.ez()?self.iz.Tss():this.KIt("close"))},xss(){this.KIt("set-focus",{isFocus:!0})},Css(){this.KIt("set-focus",{isFocus:!1})},Gss(){this.Its||this.KIt("navigate",{type:"back"})},_ss(){this.Its||this.KIt("navigate",{type:"forward"})},Iss(){},Pss(){this.Its||(this.Bc.ez()?this.Bc.tzt({type:"reload"}):this.KIt("navigate",{type:"reload"}))},Rss(t,s){this.tPt("navigate",{type:"url",url:t,target:s,exportType:this.Bc.H$()})},Ass(t,s){this.tPt("navigate",{type:"new-window",url:t,tag:s,exportType:this.Bc.H$()})},Ess(t,s){t>=2&&(t+=1),6===t&&(t=2),1===t&&(t=0);const e=C3.gBt.RWt(t);this.Bc.GB().GWt(e),this.tPt("request-fullscreen",{navUI:s})},Oss(){this.tPt("exit-fullscreen")},Fss(t){const s=t.split(",");for(let t=0,e=s.length;t<e;++t)s[t]=parseInt(s[t],10);this.tPt("vibrate",{pattern:s})},async IB(t,s){if(!t||!s)return;const e=await this.Bc.Ik().m$(t);this.Bc.IB(e,s)},Dss(t,s,e){if(!e)return;const i=`data:${s},${encodeURIComponent(t)}`;this.Bc.IB(i,e)},Lss(t,s){s=s.toString(),0===t?console.log(s):1===t?console.warn(s):2===t&&console.error(s)},kss(t){console.group(t)},Nss(){console.groupEnd()},Bss(jsStr){try{eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}},$ss(t){if((t=Math.floor(t))<0||t>=ORIENTATIONS.length)return;const s=ORIENTATIONS[t];this.tPt("lock-orientation",{orientation:s})},Wss(){this.tPt("unlock-orientation")},_$(t){this.Bc.Ik()._$(t)},async Vss(t,s,e,i){await this.QIt("set-document-css-style",{prop:C3.bo(t),value:s,selector:e,"is-all":0!==i})},async jss(t,s,e){const i=await this.QIt("get-document-css-style",{prop:t,selector:s});i.isOk&&this.Pts.set(e.toLowerCase(),i.result.trim())},Uss(t){this.KIt("set-hash",{hash:t})},zss(t,s){this.KIt("set-window-size",{windowWidth:t,windowHeight:s})},Hss(t,s){this.KIt("set-window-position",{windowX:t,windowY:s})},async qss(){const t=await this.QIt("request-install");this.Ats=t.result,this.JU(C3.e$.se.t$.uss)},Jss(t){this.iss(t)}}}{const C3=self._s;C3.e$.se.Sht={URL(){return this.Bc.Hk()?this.wts:location.toString()},Yss(){return this.Bc.Hk()?new URL(this.wts).protocol:location.protocol},Xss(){return this.Bc.Hk()?new URL(this.wts).hostname:location.hostname},Port(){return this.Bc.Hk()?new URL(this.wts).port:location.port},Zss(){return this.Bc.Hk()?new URL(this.wts).pathname:location.pathname},Kss(){return this.Bc.Hk()?new URL(this.wts).hash:location.hash},Ys(){return this.Bc.Hk()?new URL(this.wts).search:location.search},Qss(t){const s=this.Bc.Hk()?new URL(this.wts).search:location.search,e=RegExp("[?&]"+t+"=([^&]*)").exec(s);return e?decodeURIComponent(e[1].replace(/\+/g," ")):""},tes(){return this.vts},ses(){return this.bts},ees:()=>navigator.language,Ks:()=>navigator.platform,ies:()=>navigator.userAgent,res(jsStr){let result=0;try{result=eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}return"number"==typeof result||"string"==typeof result?result:"boolean"==typeof result&&result?1:0},CSSStyleValue(t){return this.Pts.get(t)||""},nes:()=>navigator.appName,hes:()=>navigator.appVersion,oes:()=>navigator.product,aes:()=>navigator.vendor,les:()=>1,ues:()=>1/0,ces(){const t=navigator.connection;return t&&(t.downlink||t.downlinkMax||t.bandwidth)||1/0},ConnectionType(){const t=navigator.connection;return t&&t.type||"unknown"},fes:()=>self.devicePixelRatio,des(){return this.Tts},pes(){return this.xts},mes(){return this.Bc.GB().nY()},ges(){return this.Bc.GB().hY()},yes(){return this.Cts},wes(){return this.Cts},Ses(){return this.Bc.GB().xWt()},ves(){return this.Ats}}}{const DI=self._s;DI.e$.K1t=class extends DI.Z_t{constructor(t){super(t)}qr(){super.qr()}}}{const LI=self._s;LI.e$.K1t.dEt=class extends LI.DIt{constructor(t){super(t),this.bes=null,this.Ow=null}qr(){this.M5(),super.qr()}vIt(){this.Vq().a$(this.Bc)}async g5(t){const s=this.Vq();this.Ow=await s.ZRt()}Mes(t,s,e,i){!this.bes&&this.Ow&&(this.bes=new self.Tes(this),this.bes.xes(this.Ow,t,s,e,i))}M5(){this.bes&&(this.bes.qr(),this.bes=null)}Ces(){return this.bes}}}{const kI=self._s,NI=0,BI=1,$I=2,WI=3,VI=4,jI=5,UI=6,zI=8,HI=kI.Hr(kI.Rect),qI=kI.Hr(kI.Rect),JI=kI.Hr(kI.Pl);kI.e$.K1t.Instance=class extends kI.pPt{constructor(t,s){super(t),this.Ges=16,this._es=16,this.Ies=16,this.Pes=16,this.Res=1,this.Aes=1,this.Ees=!0,this.Oes=null,s&&(this.Ges=s[NI],this._es=s[BI],this.Ies=s[$I],this.Pes=s[WI],this.Res=s[VI],this.Aes=s[jI],this.Ees=!!s[zI],this.LB().wj(!!s[UI])),this.VIt.Mes(this.Ges,this._es,this.Ies,this.Pes)}qr(){super.qr()}Q1t(t){this.Oes=t}zT(t){const s=this.LB(),e=s.Wz();this.t2t(t,e.Bn(),e.$n(),s.jg(),s.Qg())}t2t(t,s,e,i,r){let n=this.VIt.Ces();if(!n&&(this.VIt.Mes(this.Ges,this._es,this.Ies,this.Pes),n=this.VIt.Ces(),!n))return;const h=n.Fes(),o=n.Des(),a=Math.min(this.Ges,h),l=Math.min(this._es,h),u=Math.min(this.Ies,o),c=Math.min(this.Pes,o),f=h-l,d=o-c,p=this.Ees?1:0,m=this.Res,g=this.Aes;if(a>0&&u>0&&this.Les(t,n.xC(),0,0,a+p,u+p,s,e,a+p,u+p),l>0&&u>0&&this.Les(t,n.xC(),f-p,0,l+p,u+p,s+i-l-p,e,l+p,u+p),l>0&&c>0&&this.Les(t,n.xC(),f-p,d-p,l+p,c+p,s+i-l-p,e+r-c-p,l+p,c+p),a>0&&c>0&&this.Les(t,n.xC(),0,d-p,a+p,c+p,s,e+r-c-p,a+p,c+p),0===m){const h=2===g?0:p;a>0&&d>u&&this.kes(t,n.Nes(),s,e+u,a+h,r-u-c,0,0),l>0&&d>u&&this.kes(t,n.Bes(),s+i-l-h,e+u,l+h,r-u-c,h,0),u>0&&f>a&&this.kes(t,n.$es(),s+a,e,i-a-l,u+h,0,0),c>0&&f>a&&this.kes(t,n.Wes(),s+a,e+r-c-h,i-a-l,c+h,0,h)}else 1===m&&(a>0&&d>u&&this.Les(t,n.xC(),0,u,a,d-u,s,e+u,a,r-u-c),l>0&&d>u&&this.Les(t,n.xC(),f,u,l,d-u,s+i-l,e+u,l,r-u-c),u>0&&f>a&&this.Les(t,n.xC(),a,0,f-a,u,s+a,e,i-a-l,u),c>0&&f>a&&this.Les(t,n.xC(),a,d,f-a,c,s+a,e+r-c,i-a-l,c));d>u&&f>a&&(0===g?this.kes(t,n.Ves(),s+a,e+u,i-a-l,r-u-c,0,0):1===g&&this.Les(t,n.xC(),a,u,f-a,d-u,s+a,e+u,i-a-l,r-u-c))}Les(t,s,e,i,r,n,h,o,a,l){const u=s.jg(),c=s.Qg();if(t.xO(s),HI.set(h,o,h+a,o+l),qI.set(e/u,i/c,(e+r)/u,(i+n)/c),null===this.Oes){const s=this.LB(),e=s.Wz(),i=e.Bn(),r=e.$n();HI.offset(-i,-r),JI.Zl(HI,s.FV()),JI.offset(i,r),t.sb(JI,qI)}else this.Oes(HI,qI)}kes(t,s,e,i,r,n,h,o){const a=s.jg(),l=s.Qg();if(t.xO(s),HI.set(e,i,e+r,i+n),qI.set(-h/a,-o/l,(r-h)/a,(n-o)/l),null===this.Oes){const s=this.LB(),e=s.Wz(),i=e.Bn(),r=e.$n();HI.offset(-i,-r),JI.Zl(HI,s.FV()),JI.offset(i,r),t.sb(JI,qI)}else this.Oes(HI,qI)}MPt(){this.mpt.Vq()}sot(t){}oot(t,s){}}}self._s.e$.K1t.t$={},self._s.e$.K1t.wht={s1t(t){this.LB().NM(t),this.Bc.jB()}},self._s.e$.K1t.Sht={};{let YI=function(t){const s=XI.co(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),s};CloneDrawable=YI;const XI=self._s;self.Tes=class{constructor(t){this.VIt=t,this.Bc=this.VIt.l$(),this.wx=null,this.jes=null,this.Ues=null,this.zes=null,this.Hes=null,this.qes=null,this.eQ=0,this.iQ=0,this.Xb=this.Bc.gM(),this.Sw=!1,this.cR=!1}qr(){this.Xb.mA()||(this.Xb.wC(this.wx),this.Xb.wC(this.jes),this.Xb.wC(this.Ues),this.Xb.wC(this.zes),this.Xb.wC(this.Hes),this.Xb.wC(this.qes)),this.wx=null,this.jes=null,this.Ues=null,this.zes=null,this.Hes=null,this.qes=null,this.VIt=null,this.Xb=null,this.cR=!0}Jr(){return this.cR}xes(t,s,e,i,r){this.Jes(t,s,e,i,r)}Yes(){return!!this.wx}Jes(t,s,e,i,r){if(this.cR)return;const n=t.width,h=t.height;this.eQ=n,this.iQ=h,s=Math.min(Math.floor(s),n),e=Math.min(Math.floor(e),n),i=Math.min(Math.floor(i),h);const o=n-e,a=h-(r=Math.min(Math.floor(r),h)),l=this.Bc.Zk(),u=this.Bc.GB().hQ();this.wx=this.Xb.lF(YI(t),{nx:l,hx:u}),o>s&&a>i&&(this.jes=this.Xb.lF(this.Xes(YI(t),s,i,o,a),{sx:"repeat",ix:"repeat",nx:l,hx:u})),s>0&&a>i&&(this.Ues=this.Xb.lF(this.Xes(YI(t),0,i,s,a),{ix:"repeat",nx:l,hx:u})),e>0&&a>i&&(this.zes=this.Xb.lF(this.Xes(YI(t),o,i,n,a),{ix:"repeat",nx:l,hx:u})),i>0&&o>s&&(this.Hes=this.Xb.lF(this.Xes(YI(t),s,0,o,i),{sx:"repeat",nx:l,hx:u})),r>0&&o>s&&(this.qes=this.Xb.lF(this.Xes(YI(t),s,a,o,h),{sx:"repeat",nx:l,hx:u}))}Xes(t,s,e,i,r){const n=i-s,h=r-e,o=XI.co(n,h);return o.getContext("2d").drawImage(t,s,e,n,h,0,0,n,h),o}Fes(){return this.eQ}Des(){return this.iQ}xC(){return this.wx}Ves(){return this.jes}Nes(){return this.Ues}Bes(){return this.zes}$es(){return this.Hes}Wes(){return this.qes}}}{const ZI=self._s,KI=[];ZI.e$.Audio=class extends ZI.Z_t{constructor(t){super(t)}Zes(t){KI.push(t)}static async Kes(){await Promise.all(KI),ZI.bh(KI)}qr(){super.qr()}}}{let QI=function(){return iP.jW().eq()},tP=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};GetAudioSdkInstance=QI,GetAudioDOMInterface=tP;const sP=self._s,eP=self.Ns;sP.e$.Audio.dEt=class extends sP.DIt{constructor(t){super(t)}qr(){super.qr()}vIt(){}bIt(){return self.Qes}};let iP=null;self.Qes=class extends self.nV{constructor(t){super(t),iP=t}get tis(){return tP().GetAudioContextExtern()}get sis(){return tP().GetDestinationNodeExtern()}get eis(){return QI().iis()}set eis(t){QI().ris(t)}get nis(){return QI().his()}set nis(t){eP.ii(t),QI().ois(t)}ais(){QI().lis()}}}{const rP=self._s,nP="audio",hP=["interactive","balanced","playback"];rP.e$.Audio.Instance=class extends rP.$It{constructor(t,s){super(t,nP),this.uis=0,this.cis=0,this.fis=[],this.dis=!0,this.pis=0,this.mis=0,this.gis=!1,this.yis=1,this.wis=1,this.Sis=[this.Bc.K1()/2,this.Bc.Q1()/2,600],this.vis=[0,0,-1],this.bis=[0,1,0],this.Mis=600,this.Tis=1e4,this.xis=1,this.Cis=null,this.Gis=-1,this._is=1,this.Iis=!1,this.Pis=0,this.Ris="suspended",this.Ais=0,this.Eis=new Map,this.Ois=0,this.Fis=0,this.Dis=new Map,this.Lis=new Map;let e="interactive";s&&(this.pis=s[0],this.mis=s[1],this.gis=s[2],e=hP[s[3]],this.dis=s[4],this.yis=s[5],this.wis=s[6],this.Sis[2]=s[7],this.Mis=s[8],this.Tis=s[9],this.xis=s[10]),this.kis=[],this.Nis=[],this.Bis=[],this.ZIt([["state",t=>this.$is(t)],["audiocontext-state",t=>this.Wis(t)],["fxstate",t=>this.Vis(t)],["trigger",t=>this.jis(t)],["buffer-metadata",t=>this.Uis(t)]]);const i=this.l$().Sf();this.Zf=new rP.Jf(rP.Vf.qf(i,"instancedestroy",t=>this.zis(t.pq)),rP.Vf.qf(i,"afterload",()=>this.d8()),rP.Vf.qf(i,"suspend",()=>this.$ts()),rP.Vf.qf(i,"resume",()=>this.Wts()));const r=this.Bc.H$(),n="Safari"===rP.Ks.se,h=this.Bc.DHt()||"macos-wkwebview"===r,o=this.Bc.Ik().hK(),a="playable-ad-single-file"===r,l="cordova"===r&&"Android"===rP.Ks.Qs,u=n||h||o||a||l;this.Bc.YB(this.QIt("create-audio-context",{preloadList:this.Bc.Ik().VK().map(t=>({originalUrl:t.jK,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.pis,latencyHint:e,panningModel:this.yis,distanceModel:this.wis,refDistance:this.Mis,maxDistance:this.Tis,rolloffFactor:this.xis,listenerPos:this.Sis,usePlayMusicAsSoundWorkaround:u}).then(t=>{this.Pis=t.sampleRate,this.Ris=t.audioContextState,this.Ais=t.outputLatency})),this.nPt()}qr(){this.Cis=null,super.qr()}His(t){return this.dis?t.split(" ").filter(t=>!!t):t?[t]:[]}qis(t,s){for(const e of s){let s=!1;for(const i of t)if(rP.Ki(i,e)){s=!0;break}if(!s)return!1}return!0}Jis(t,s){return this.qis(t,this.His(s))}Zes(t){this.HW().Zes(t)}zis(t){this.Cis===t&&(this.Cis=null)}Yis(t){return Math.pow(10,t/20)}Xis(t){const s=this.Yis(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}Zis(t){return Math.log(t)/Math.log(10)*20}Kis(t){return this.Zis(Math.max(Math.min(t,1),0))}Qis(){let t=0;const s=!!self.C3_GetAudioContextCurrentTime;return t=s?this.uis:this.cis,this.uis=0,this.cis=0,{trs:t,srs:s}}$ts(){this.gis||this.KIt("set-suspended",{isSuspended:!0})}Wts(){this.gis||this.KIt("set-suspended",{isSuspended:!1})}$is(t){const s=t.tickCount;this.Ais=t.outputLatency;const e=this.kis.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder));this.kis=t.audioInstances,this.Bis=t.analysers,e.length>0&&rP.Fr(this.kis,e)}Uis(t){this.Dis.set(t.originalUrl,{duration:t.duration})}Wis(t){this.Ris=t.audioContextState}Iht(){return this.Bc.oWt()?"running":this.Ris}Vis(t){this.Nis=t.fxstate}ers(t){const s=this.His(t);for(const t of this.kis)if(this.qis(t.tags,s))return t;return null}irs(t){const s=this.His(t);return this.kis.some(t=>this.qis(t.tags,s)&&t.isPlaying)}rrs(t,s,e,i,r){if(this.irs(s))return null;const n=this.Dis.get(t),h={tags:this.His(s),duration:n?n.duration:0,volume:r,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:e,isLooping:i,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.kis.push(h),h}nrs(t){const s=this.His(t);for(const t of this.kis)this.qis(t.tags,s)&&(t.isPlaying=!1)}async jis(t){const s=t.type;this.fis=t.tags;const e=t.aiid;if("ended"===s){for(const t of this.kis)if(t.aiid===e){t.isPlaying=!1;break}await this.KB(rP.e$.Audio.t$.hrs)}else"fade-ended"===s&&await this.KB(rP.e$.Audio.t$.ors)}ars(t){return this.Jis(this.fis,t)}c7(){const t={timeScale:this.Bc.WN(),gameTime:this.Bc.RHt(),instPans:this.lrs(),tickCount:this.Bc.AHt()};if(this.Cis){const s=this.Cis.LB();this.Sis[0]=s.YM(),this.Sis[1]=s.KM(),t.listenerPos=this.Sis,t.listenerOrientation=[...this.vis,...this.bis]}this.KIt("tick",t)}urs(t,s,e,i,r){if(0===e)return[t,s];const n=Math.sin(e),h=Math.cos(e),o=(t-=i)*n;return t=t*h-(s-=r)*n,s=s*h+o,[t+=i,s+=r]}lrs(){return this.kis.filter(t=>-1!==t.uid).map(t=>this.Bc.RB(t.uid)).filter(t=>t).map(t=>{const s=t.LB(),e=s.kB().FV(),[i,r]=this.urs(s.YM(),s.KM(),-e,this.Sis[0],this.Sis[1]);return{uid:t.CU(),x:i,y:r,z:s.Lz(),angle:s.FV()-e}})}crs(t,s){for(const e of this.Bis)if(e.index===s&&rP.Ki(e.tag,t))return e;return null}frs(t){for(const s of this.His(t)){const t=s.toLowerCase();this.Eis.set(t,(this.Eis.get(t)||0)+1)}}iis(){return this.Iis}ris(t){t=!!t,this.Iis!==t&&(this.Iis=t,this.KIt("set-silent",{isSilent:t}))}his(){return this._is}ois(t){this._is!==t&&(this._is=t,this.KIt("set-master-volume",{vol:t}))}lis(){this.KIt("stop-all");for(const t of this.kis)t.isPlaying=!1}drs(t){return!(t.hasOwnProperty("placeholder")||3===this.mis||t.isMusic&&1===this.mis||!t.isMusic&&2===this.mis)}aT(){return{isSilent:this.Iis,masterVolume:this._is,listenerZ:this.Sis[2],listenerForwardVec:this.vis,listenerUpVec:this.bis,listenerUid:this.Cis?this.Cis.CU():-1,remoteUrls:[...this.Lis.entries()],playing:this.kis.filter(t=>this.drs(t)),effects:this.Nis,analysers:this.Bis}}lT(t){if(this.Iis=t.isSilent,this._is=t.masterVolume,this.Sis[2]=t.listenerZ,this.Cis=null,this.Gis=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.vis=t.listenerForwardVec:this.vis=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.bis=t.listenerUpVec:this.bis=[0,1,0],this.Lis.clear(),t.remoteUrls)for(const[s,e]of t.remoteUrls)this.Lis.set(s,e);this.kis=t.playing;for(const t of this.kis)t.hasOwnProperty("tag")&&!t.hasOwnProperty("tags")&&(t.tags=[t.tag].filter(t=>!!t));this.Nis=t.effects,this.Bis=t.analysers}d8(){if(-1!==this.Gis&&(this.Cis=this.Bc.RB(this.Gis),this.Gis=-1,this.Cis)){const t=this.Cis.LB();this.Sis[0]=t.YM(),this.Sis[1]=t.KM()}for(const t of this.kis){const s=this.Bc.Ik().WK(t.bufferOriginalUrl);s?(t.bufferUrl=s.url,t.bufferType=s.type):t.bufferUrl=null}for(const t of Object.values(this.Nis))for(const s of t)if(s.hasOwnProperty("bufferOriginalUrl")){const t=this.Bc.Ik().WK(s.bufferOriginalUrl);t&&(s.bufferUrl=t.url,s.bufferType=t.type)}this.KIt("load-state",{saveLoadMode:this.mis,timeScale:this.Bc.WN(),gameTime:this.Bc.RHt(),listenerPos:this.Sis,listenerOrientation:[...this.vis,...this.bis],isSilent:this.Iis,masterVolume:this._is,playing:this.kis.filter(t=>null!==t.bufferUrl),effects:this.Nis})}lPt(){const t=[];for(const[s,e]of Object.entries(this.Nis))t.push({name:"$"+s,value:e.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.kis.length},...this.kis.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / ${Math.round(10*t.duration)/10}`}))]}]}}}self._s.e$.Audio.t$={hrs(t){return this.ars(t)},ors(t){return this.ars(t)},prs(){return this.Fis===this.Ois},mrs:()=>!0,grs(){return this.iis()},yrs(){for(const t of this.kis)if(t.isPlaying)return!0;return!1},wrs(t){return this.irs(t)}};{const oP=self._s,aP=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];oP.e$.Audio.wht={Play(t,s,e,i,r){const n=oP.e$.Audio.wht.Srs.call(this,t,s,e,i,r);return this.Zes(n),n},Pht(t,s,e,i){oP.e$.Audio.wht.Srs.call(this,t,0,s,0,e,i)},async Srs(t,s,e,i,r,n){if(this.Iis)return;const h=t[1],o=this.Bc.Ik().WK(t[0]);if(!o)return;const{trs:a,srs:l}=this.Qis(),u=this.rrs(t[0],r,h,0!==s,this.Xis(e));try{await this.QIt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:h,tags:this.His(r),isLooping:0!==s,vol:this.Xis(e),stereoPan:oP.Kr(i/100,-1,1),pos:n||0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.Bc.AHt())}},async vrs(t,s,e,i,r,n,h,o,a,l,u){if(this.Iis)return;const c=t[1],f=this.Bc.Ik().WK(t[0]);if(!f)return;const{trs:d,srs:p}=this.Qis(),m=this.rrs(t[0],u,c,0!==s,this.Xis(e));try{await this.QIt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.His(u),isLooping:0!==s,vol:this.Xis(e),pos:0,off:d,trueClock:p,panning:{x:i,y:r,z:n,angle:oP.tn(h),innerAngle:oP.tn(o),outerAngle:oP.tn(a),outerGain:this.Xis(l)}})}finally{m&&(m.placeholder=this.Bc.AHt())}},async brs(t,s,e,i,r,n,h,o){if(this.Iis)return;if(!i)return;const a=i.zCt();if(!a||!a.LB())return;const l=a.LB(),u=l.kB().FV(),[c,f]=this.urs(l.YM(),l.KM(),-u,this.Sis[0],this.Sis[1]),d=t[1],p=this.Bc.Ik().WK(t[0]);if(!p)return;const{trs:m,srs:g}=this.Qis(),y=this.rrs(t[0],o,d,0!==s,this.Xis(e));try{await this.QIt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.His(o),isLooping:0!==s,vol:this.Xis(e),pos:0,off:m,trueClock:g,panning:{x:c,y:f,z:l.Lz(),angle:l.FV()-u,innerAngle:oP.tn(r),outerAngle:oP.tn(n),outerGain:this.Xis(h),uid:a.CU()}})}finally{y&&(y.placeholder=this.Bc.AHt())}},async Mrs(t,s,e,i,r,n){if(this.Iis)return;const h=1===t,o=this.Bc.Ik().WK(s)||this.Lis.get(s.toLowerCase());if(!o)return;const{trs:a,srs:l}=this.Qis(),u=this.rrs(s,n,h,0!==e,this.Xis(i));try{await this.QIt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:h,tags:this.His(n),isLooping:0!==e,vol:this.Xis(i),stereoPan:oP.Kr(r/100,-1,1),pos:0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.Bc.AHt())}},async Trs(t,s,e,i,r,n,h,o,a,l,u,c){if(this.Iis)return;const f=1===t,d=this.Bc.Ik().WK(s)||this.Lis.get(s.toLowerCase());if(!d)return;const{trs:p,srs:m}=this.Qis(),g=this.rrs(s,c,f,0!==e,this.Xis(i));try{await this.QIt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.His(c),isLooping:0!==e,vol:this.Xis(i),pos:0,off:p,trueClock:m,panning:{x:r,y:n,z:h,angle:oP.tn(o),innerAngle:oP.tn(a),outerAngle:oP.tn(l),outerGain:this.Xis(u)}})}finally{g&&(g.placeholder=this.Bc.AHt())}},async xrs(t,s,e,i,r,n,h,o,a){if(this.Iis)return;if(this.Iis)return;if(!r)return;const l=r.zCt();if(!l||!l.LB())return;const u=l.LB(),c=u.kB().FV(),[f,d]=this.urs(u.YM(),u.KM(),-c,this.Sis[0],this.Sis[1]),p=1===t,m=this.Bc.Ik().WK(s)||this.Lis.get(s.toLowerCase());if(!m)return;const{trs:g,srs:y}=this.Qis(),w=this.rrs(s,a,p,0!==e,this.Xis(i));try{await this.QIt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.His(a),isLooping:0!==e,vol:this.Xis(i),pos:0,off:g,trueClock:y,panning:{x:f,y:d,z:u.Lz(),angle:u.FV()-c,innerAngle:oP.tn(n),outerAngle:oP.tn(h),outerGain:this.Xis(o),uid:l.CU()}})}finally{w&&(w.placeholder=this.Bc.AHt())}},Crs(t,s){this.KIt("set-looping",{tags:this.His(t),isLooping:0===s})},Grs(t,s){this.KIt("set-muted",{tags:this.His(t),isMuted:0===s})},Ght(t,s){this.KIt("set-volume",{tags:this.His(t),vol:this.Xis(s)})},_rs(t,s,e,i){this.KIt("fade-volume",{tags:this.His(t),vol:this.Xis(s),duration:e,stopOnEnd:0===i})},Irs(t,s){this.KIt("set-stereo-pan",{tags:this.His(t),p:oP.Kr(s/100,-1,1)})},async Prs(t){const s=t[1],e=this.Bc.Ik().WK(t[0]);e&&(this.Ois++,await this.QIt("preload",{originalUrl:t[0],url:e.url,type:e.type,isMusic:s}),this.Fis++)},async Rrs(t,s){const e=1===t,i=this.Bc.Ik().WK(s)||this.Lis.get(s.toLowerCase());i&&(this.Ois++,await this.QIt("preload",{originalUrl:s,url:i.url,type:i.type,isMusic:e}),this.Fis++)},mJ(t,s){this.KIt("set-playback-rate",{tags:this.His(t),rate:Math.max(s,0)})},nJ(t){this.nrs(t),this.KIt("stop",{tags:this.His(t)})},Ars(){this.lis()},Ers(t,s){this.KIt("set-paused",{tags:this.His(t),paused:0===s})},Ors(t,s){this.KIt("seek",{tags:this.His(t),pos:s})},Frs(t){2===t&&(t=this.iis()?1:0),this.ris(0===t)},Drs(t){const s=this.Xis(t);this.ois(s)},Lrs(t,s,e,i,r,n,h){const o=aP[s];this.frs(t),this.KIt("add-effect",{type:"filter",tags:this.His(t),params:[o,e,i,r,n,oP.Kr(h/100,0,1)]})},krs(t,s,e,i){this.frs(t),this.KIt("add-effect",{type:"delay",tags:this.His(t),params:[s,this.Xis(e),oP.Kr(i/100,0,1)]})},Nrs(t,s,e,i,r,n){this.frs(t),this.KIt("add-effect",{type:"flanger",tags:this.His(t),params:[s/1e3,e/1e3,i,r/100,oP.Kr(n/100,0,1)]})},Brs(t,s,e,i,r,n,h){this.frs(t),this.KIt("add-effect",{type:"phaser",tags:this.His(t),params:[s,e,i,r,n,oP.Kr(h/100,0,1)]})},$rs(t,s,e,i){const r=this.Bc.Ik().WK(s[0]);r&&(this.frs(t),this.KIt("add-effect",{type:"convolution",tags:this.His(t),bufferOriginalUrl:s[0],bufferUrl:r.url,bufferType:r.type,params:[0===e,oP.Kr(i/100,0,1)]}))},Wrs(t,s){this.frs(t),this.KIt("add-effect",{type:"gain",tags:this.His(t),params:[this.Xis(s)]})},Vrs(t,s){this.frs(t),this.KIt("add-effect",{type:"stereopan",tags:this.His(t),params:[oP.Kr(s/100,-1,1)]})},jrs(t){this.frs(t),this.KIt("add-effect",{type:"gain",tags:this.His(t),params:[0]})},Urs(t,s,e){this.frs(t),this.KIt("add-effect",{type:"tremolo",tags:this.His(t),params:[s,oP.Kr(e/100,0,1)]})},zrs(t,s,e){this.frs(t),this.KIt("add-effect",{type:"ringmod",tags:this.His(t),params:[s,oP.Kr(e/100,0,1)]})},Hrs(t,s,e,i,r,n){this.frs(t),this.KIt("add-effect",{type:"distortion",tags:this.His(t),params:[this.Yis(s),this.Yis(e),i,this.Yis(r),oP.Kr(n/100,0,1)]})},qrs(t,s,e,i,r,n){this.frs(t),this.KIt("add-effect",{type:"compressor",tags:this.His(t),params:[s,e,i,r/1e3,n/1e3]})},Jrs(t,s,e){this.frs(t),this.KIt("add-effect",{type:"analyser",tags:this.His(t),params:[s,e]})},Yrs(t){const s=this.His(t);for(const t of s)this.Eis.set(t.toLowerCase(),0);this.KIt("remove-effects",{tags:s}),this.Nis={}},Tq(t,s,e,i,r,n){this.KIt("set-effect-param",{tags:this.His(t),index:Math.floor(s),param:e,value:i,ramp:r,time:n})},Xrs(t){if(!t)return;const s=t.zCt();s&&s.LB()&&(this.Cis=s)},Zrs(t){this.Sis[2]=t},Krs(t,s,e,i,r,n){this.vis[0]=t,this.vis[1]=s,this.vis[2]=-e,this.bis[0]=i,this.bis[1]=r,this.bis[2]=-n},Qrs(t){this.uis=Math.max(t,0),this.cis=Math.max(t-performance.now()/1e3,0)},tns(t){const s=t[1],e=this.Bc.Ik().WK(t[0]);e&&this.KIt("unload",{url:e.url,type:e.type,isMusic:s})},sns(t,s){const e=1===t,i=this.Bc.Ik().WK(s)||this.Lis.get(s.toLowerCase());i&&this.KIt("unload",{url:i.url,type:i.type,isMusic:e})},ens(){this.KIt("unload-all")},ins(t,s,e){this.Lis.set(e.toLowerCase(),{url:t,type:s})}}}{const lP=self._s;lP.e$.Audio.Sht={rns(t){const s=this.ers(t);return s?s.duration:0},Mht(t){const s=this.ers(t);return s?s.playbackTime:0},_ht(t){const s=this.ers(t);return s?s.playbackRate:0},Tht(t){const s=this.ers(t);return s?this.Kis(s.volume):0},nns(){return this.Kis(this.his())},hns(t){return this.Eis.get(t.toLowerCase())||0},ons(t,s){const e=this.crs(t,Math.floor(s));return e?e.binCount:0},ans(t,s,e){const i=this.crs(t,Math.floor(s));return i?(e=Math.floor(e))<0||e>=i.binCount?0:i.freqBins[e]:0},lns(t,s){const e=this.crs(t,Math.floor(s));return e?e.peak:0},uns(t,s){const e=this.crs(t,Math.floor(s));return e?e.rms:0},cns(){return this.Pis},fns:()=>self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3,pns(){return this.Ais},mns(t,s){return 0==(t=lP.Kr(+t,0,100)/100)?-1/0:t<.1?this.Kis(lP._t(0,this.Xis(s),10*t)):lP._t(s,0,(t-.1)/.9)}}}{const uP=self._s;uP.yut.gns=class extends uP.ZPt{constructor(t){super(t)}qr(){super.qr()}}}{const cP=self._s;cP.yut.gns.dEt=class extends cP.eRt{constructor(t){super(t)}qr(){super.qr()}vIt(){}}}{const fP=self._s;fP.yut.gns.Instance=class extends fP.rRt{constructor(t,s){super(t),this.yns=null,this.wns=-1,this.K9t="",this.Sns=new Set,this.vns=0,this.bns=0,this.Mns=0,this.Tns=0,this.xns=0,this.Cns=0,this.Gns=0,this._ns=0,this.Ins=0,this.Pns=0,this.Rns=!1,s&&(this.Rns=s[0]);const e=this.Bc.Sf();this.Zf=new fP.Jf(fP.Vf.qf(e,"instancedestroy",t=>this.zis(t.pq)),fP.Vf.qf(e,"afterload",t=>this.d8()))}qr(){this.yns=null,super.qr()}Ans(t){t?(this.yns=t,this.oPt()):(this.yns=null,this.UIt())}Ens(t,s,e){if(!t)return;const i=t.zCt(this.fe);if(!i)return;this.K9t=s,this.Ans(i);const r=this.fe.LB(),n=i.LB();if("properties"===this.K9t){const t=this.Sns;t.clear();for(const s of e)t.add(s);this.Tns=r.YM()-n.YM(),this.xns=r.KM()-n.KM(),this._ns=r.FV()-n.FV(),this.Pns=r.FV(),this.Ins=r.tT()-n.tT(),t.has("x")&&t.has("y")&&(this.bns=fP.an(n.YM(),n.KM(),r.YM(),r.KM())-n.FV(),this.vns=fP.nn(n.YM(),n.KM(),r.YM(),r.KM())),t.has("width-abs")?this.Cns=r.jg()-n.jg():t.has("width-scale")&&(this.Cns=r.jg()/n.jg()),t.has("height-abs")?this.Gns=r.Qg()-n.Qg():t.has("height-scale")&&(this.Gns=r.Qg()/n.Qg())}else this.vns=fP.nn(n.YM(),n.KM(),r.YM(),r.KM())}aT(){const t=this.Sns,s=this.K9t,e={uid:this.yns&&!this.yns.SY()?this.yns.CU():-1,m:s,d:this.Rns};return"rope"===s||"bar"===s?e.pd=this.vns:"properties"===s&&(e.ps=[...this.Sns],t.has("imagepoint")?e.ip=this.Mns:t.has("x")&&t.has("y")?(e.pa=this.bns,e.pd=this.vns):(t.has("x")&&(e.dx=this.Tns),t.has("y")&&(e.dy=this.xns)),t.has("angle")&&(e.da=this._ns,e.lka=this.Pns),(t.has("width-abs")||t.has("width-scale"))&&(e.dw=this.Cns),(t.has("height-abs")||t.has("height-scale"))&&(e.dh=this.Gns),t.has("z")&&(e.dz=this.Ins)),e}lT(t){const s=t.m,e=this.Sns;if(e.clear(),this.wns=t.uid,"number"!=typeof s){if(this.K9t=s,t.hasOwnProperty("d")&&(this.Rns=!!t.d),"rope"===s||"bar"===s)this.vns=t.pd;else if("properties"===s){for(const s of t.ps)e.add(s);e.has("imagepoint")?this.Mns=t.ip:e.has("x")&&e.has("y")?(this.bns=t.pa,this.vns=t.pd):(e.has("x")&&(this.Tns=t.dx),e.has("y")&&(this.xns=t.dy)),e.has("angle")&&(this._ns=t.da,this.Pns=t.lka||0),(e.has("width-abs")||e.has("width-scale"))&&(this.Cns=t.dw),(e.has("height-abs")||e.has("height-scale"))&&(this.Gns=t.dh),e.has("z")&&(this.Ins=t.dz)}}else this.Ons(t)}Ons(t){const s=this.Sns,e=t.msa,i=t.tsa,r=t.pa,n=t.pd;switch(t.m){case 0:this.K9t="properties",s.add("x").add("y").add("angle"),this.bns=r,this.vns=n,this._ns=e-i,this.Pns=t.lka;break;case 1:this.K9t="properties",s.add("x").add("y"),this.bns=r,this.vns=n;break;case 2:this.K9t="properties",s.add("angle"),this._ns=e-i,this.Pns=t.lka;break;case 3:this.K9t="rope",this.vns=t.pd;break;case 4:this.K9t="bar",this.vns=t.pd}}d8(){-1===this.wns?this.Ans(null):(this.Ans(this.Bc.RB(this.wns)),this.wns=-1)}zis(t){this.yns===t&&(this.Ans(null),this.Rns&&this.Bc.wU(this.fe))}rPt(){const t=this.yns;if(!t||t.SY())return;const s=t.LB(),e=this.fe.LB(),i=this.K9t;let r=!1;if("rope"===i||"bar"===i){const t=fP.nn(e.YM(),e.KM(),s.YM(),s.KM());if(t>this.vns||"bar"===i&&t<this.vns){const t=fP.an(s.YM(),s.KM(),e.YM(),e.KM());e.xz(s.YM()+Math.cos(t)*this.vns,s.KM()+Math.sin(t)*this.vns),r=!0}}else{const i=this.Sns;let n=0;if(i.has("imagepoint")){const[s,i]=t.pCt(this.Mns);e.fCt(s,i)||(e.xz(s,i),r=!0)}else if(i.has("x")&&i.has("y")){const t=s.YM()+Math.cos(s.FV()+this.bns)*this.vns,i=s.KM()+Math.sin(s.FV()+this.bns)*this.vns;e.fCt(t,i)||(e.xz(t,i),r=!0)}else n=s.YM()+this.Tns,i.has("x")&&n!==e.YM()&&(e.XM(n),r=!0),n=s.KM()+this.xns,i.has("y")&&n!==e.KM()&&(e.QM(n),r=!0);i.has("angle")&&(this.Pns!==e.FV()&&(this._ns=fP.Qr(this._ns+(e.FV()-this.Pns))),n=fP.Qr(s.FV()+this._ns),n!==e.FV()&&(e.OV(n),r=!0),this.Pns=e.FV()),i.has("width-abs")&&(n=s.jg()+this.Cns,n!==e.jg()&&(e.Xg(n),r=!0)),i.has("width-scale")&&(n=s.jg()*this.Cns,n!==e.jg()&&(e.Xg(n),r=!0)),i.has("height-abs")&&(n=s.Qg()+this.Gns,n!==e.Qg()&&(e.Ug(n),r=!0)),i.has("height-scale")&&(n=s.Qg()*this.Gns,n!==e.Qg()&&(e.Ug(n),r=!0)),i.has("z")&&(n=s.tT()+this.Ins,n!==e.tT()&&(e.sT(n),this.Bc.jB()))}r&&e.Tz()}lPt(){const t="behaviors.pin.debugger";return[{title:"$"+this.fq().Rc(),properties:[{name:t+".is-pinned",value:!!this.yns},{name:t+".pinned-uid",value:this.yns?this.yns.CU():0}]}]}}}self._s.yut.gns.t$={Fns(){return!!this.yns},Dns(){return this.Rns}},self._s.yut.gns.wht={Lns(t,s){this.Ens(t,0===s?"rope":"bar")},kns(t,s,e,i,r,n,h){const o=[];s&&o.push("x"),e&&o.push("y"),i&&o.push("angle"),h&&o.push("z"),1===r?o.push("width-abs"):2===r&&o.push("width-scale"),1===n?o.push("height-abs"):2===n&&o.push("height-scale"),0!==o.length&&this.Ens(t,"properties",o)},Nns(t,s,e,i,r,n){const h=["imagepoint"];e&&h.push("angle"),n&&h.push("z"),1===i?h.push("width-abs"):2===i&&h.push("width-scale"),1===r?h.push("height-abs"):2===r&&h.push("height-scale"),this.Mns=s,this.Ens(t,"properties",h)},Bns(t){"rope"!==this.K9t&&"bar"!==this.K9t||(this.vns=Math.max(t,0))},$ns(t){this.Rns=t},Wns(){this.Ans(null),this.K9t="",this.Sns.clear(),this.Mns=""},gns(t,s){switch(s){case 0:this.Ens(t,"properties",["x","y","angle"]);break;case 1:this.Ens(t,"properties",["x","y"]);break;case 2:this.Ens(t,"properties",["angle"]);break;case 3:this.Ens(t,"rope");break;case 4:this.Ens(t,"bar")}}},self._s.yut.gns.Sht={Vns(){return this.yns?this.yns.CU():-1}};{let dP=function(t,s,e){const i=t.axt(),r=s.axt();if(e){const e=i.get(bP);e&&e.delete(s.I1());const n=r.get(bP);n&&n.delete(t.I1())}else{let e=i.get(bP);e||(e=new Set,i.set(bP,e));let n=r.get(bP);n||(n=new Set,r.set(bP,n)),e.add(s.I1()),n.add(t.I1())}};SetObjectTypeCollisionsEnabled=dP;const pP=self._s,mP=self.Ns;let gP=null,yP=null,wP=[],SP=null,vP=null;const bP="Physics_DisabledCollisions";pP.yut.jns=class extends pP.ZPt{constructor(t){super(t),vP=this,this.Uns=null,this.zns=10,this.Hns=.02,this.qns=null,this.Jns=-1,this.Yns=1,this.Xns=8,this.Zns=3,this.Kns=!0,this.Bc.YB(this.Qns())}bIt(){return self.ths}async Qns(){const t=await this.Bc.Ik().m$("box2d.wasm");await new Promise(s=>{self.Box2DWasmModule({wasmBinaryFile:t}).then(t=>{SP=t,this.shs(),s()})})}shs(){const t=this.Bc.Ak();gP=pP.yut.jns.GAt(0,0),yP=pP.yut.jns.GAt(0,0),this.Uns=new SP.b2World(pP.yut.jns.ehs(0,this.zns),!0);const s=new SP.JSContactListener;s.BeginContact=s=>{const e=SP.wrapPointer(s,SP.b2Contact),i=pP.yut.jns.Instance.ihs(e.GetFixtureA().GetBody()),r=pP.yut.jns.Instance.ihs(e.GetFixtureB().GetBody());t.wNt(i.mq(),r.mq())},s.EndContact=()=>{},s.PreSolve=()=>{},s.PostSolve=()=>{},this.Uns.SetContactListener(s);const e=new SP.JSContactFilter;e.ShouldCollide=(t,s)=>{if(this.Kns)return!0;const e=SP.wrapPointer(t,SP.b2Fixture),i=SP.wrapPointer(s,SP.b2Fixture),r=pP.yut.jns.Instance.ihs(e.GetBody()),n=pP.yut.jns.Instance.ihs(i.GetBody()),h=r.mq().fU(),o=n.mq().fU(),a=h.I1(),l=o.I1(),u=h.axt().get(bP);if(u&&u.has(l))return!1;const c=o.axt().get(bP);return!c||!c.has(a)},this.Uns.SetContactFilter(e),this.qns=new SP.b2WorldManifold}qr(){super.qr()}rhs(){return SP}nhs(){return this.Uns}hhs(){return this.Hns}ohs(){return this.Yns}ahs(t){this.Yns=t}lhs(t){this.Jns=t}uhs(){return this.Jns}chs(t){this.Xns=Math.max(t,1)}fhs(){return this.Xns}dhs(t){this.Zns=Math.max(t,1)}phs(){return this.Zns}mhs(t,s){this.chs(t),this.dhs(s)}ghs(){return this.zns}yhs(t){t!==this.zns&&(this.Uns.SetGravity(pP.yut.jns.ehs(0,t)),this.zns=t,this.whs())}whs(){for(const t of this.iV()){const s=pP.yut.jns.Instance.Shs(t);if(!s)continue;const e=s.vhs();e&&e.SetAwake(!0)}}bhs(){this.Kns=!1}Mhs(t,s,e){if(e=!!e,t&&s){if(s.v1())for(const i of s.TV())dP(t,i,e);else dP(t,s,e);this.bhs()}}Ths(){return this.qns}static xhs(){return bP}static GAt(t,s){if(wP.length){const e=wP.pop();return e.set_x(t),e.set_y(s),e}return new(0,SP.b2Vec2)(t,s)}static Chs(t){wP.push(t)}static ehs(t,s){return gP.set_x(t),gP.set_y(s),gP}static Ghs(t,s){return yP.set_x(t),yP.set_y(s),yP}static _hs(t){const s=new(0,SP.b2PolygonShape),e=SP._malloc(8*t.length);let i=0;for(let s=0;s<t.length;++s)SP.HEAPF32[e+i>>2]=t[s].get_x(),SP.HEAPF32[e+(i+4)>>2]=t[s].get_y(),i+=8;const r=SP.wrapPointer(e,SP.b2Vec2);return s.Set(r,t.length),SP._free(e),s}};const MP=["fixed","variable"];self.ths=class extends self.yq{constructor(){super()}set Ihs(t){mP.ii(t),vP.yhs(t)}get Ihs(){return vP.ghs()}set Phs(t){const s=MP.indexOf(t);if(s<0)throw new Error("invalid stepping mode");vP.ahs(MP[s])}get Phs(){return MP[vP.ohs()]}set Rhs(t){mP.ii(t),vP.chs(t)}get Rhs(){return vP.fhs()}set Ahs(t){mP.ii(t),vP.dhs(t)}get Ahs(){return vP.phs()}Ehs(t,s,e){const i=vP.l$(),r=i.B$(t),n=i.B$(s);e=!!e,vP.Mhs(r,n,e)}}}{const TP=self._s;TP.yut.jns.dEt=class extends TP.eRt{constructor(t){super(t)}qr(){super.qr()}vIt(){}}}{let xP=function(t,s){return YP.get(t).l$().DB(s)};UnwrapIWorldInstance=xP;const CP=self._s,GP=self.Ns,_P=self.oq,IP=(self.assert,0),PP=1,RP=2,AP=3,EP=4,OP=5,FP=6,DP=7,LP=8,kP=9,NP=new WeakMap,BP=new WeakMap,$P=new WeakMap,WP=-2147483648,VP=1073741824,jP=536870912,UP=3758096384,zP=CP.yut.jns.ehs,HP=CP.yut.jns.Ghs,qP=CP.Hr(CP.Rect),JP=CP.Hr(CP.Pl);CP.yut.jns.Instance=class extends CP.rRt{constructor(t,s){super(t);const e=this.lq(),i=this.LB();this.Ohs=e.rhs(),this.Uns=e.nhs(),this.Hns=e.hhs(),this.Fhs=!1,this.Dhs=0,this.Lhs=0,this.khs=!1,this.Nhs=1,this.Bhs=.5,this.$hs=.2,this.Whs=0,this.Vhs=.01,this.jhs=!1,this.Obt=!0,this.Uhs=null,this.zhs=[],this.Hhs=[],this.qhs=[],this.Jhs=new Set,this.Yhs=i.YM(),this.Xhs=i.KM(),this.Pns=i.FV(),this.m8t=0,this.g8t=0,this.Zhs=!1,s&&(this.Fhs=!!s[IP],this.Dhs=s[PP],this.khs=!!s[RP],this.Nhs=s[AP],this.Bhs=s[EP],this.$hs=s[OP],this.Whs=s[FP],this.Vhs=s[DP],this.jhs=!!s[LP],this.Obt=!!s[kP]);const r=this.Bc.Sf();this.Zf=new CP.Jf(CP.Vf.qf(r,"instancedestroy",t=>this.zis(t.pq)),CP.Vf.qf(r,"beforeload",()=>this.c8()),CP.Vf.qf(r,"afterload",()=>this.d8())),BP.set(this.fe,this),this.Obt&&this.nPt()}oRt(){this.Khs()}qr(){this.Qhs(),CP.bh(this.qhs),this.Jhs.clear(),this.Uhs&&(this.tos(),this.Uns.DestroyBody(this.Uhs),this.Uhs=null),super.qr()}sos(t){if(!this.Uhs)return;const s=this.Uhs.CreateFixture(t);return this.zhs.push(s),s}tos(){if(this.Uhs){for(const t of this.zhs)this.Uhs.DestroyFixture(t);CP.bh(this.zhs)}}eos(){const t=this.LB();return t.HH()?(t.Nz(qP,JP,!1),JP):t.Wz()}ios(t){this.Ohs.destroy(t)}Khs(){if(!this.Obt)return;const t=this.Ohs.b2FixtureDef,s=this.Ohs.b2BodyDef,e=this.LB(),i=e.lkt();if(this.Lhs=this.Dhs,i||this.fe.zOt()||0!==this.Lhs||(this.Lhs=1),!this.Uhs){const t=new s;t.set_type(this.Fhs?0:2);let i=e.YM()*this.Hns,r=e.KM()*this.Hns;if(2===this.Lhs){const t=this.eos();i=t.ol()*this.Hns,r=t.al()*this.Hns}t.set_position(HP(i,r)),t.set_angle(e.FV()),t.set_fixedRotation(this.khs),t.set_linearDamping(this.Whs),t.set_angularDamping(this.Vhs),t.set_bullet(this.jhs),this.Uhs=this.Uns.CreateBody(t),this.ios(t),NP.set(this.Uhs,this)}this.tos();const r=new t;r.set_density(this.Nhs),r.set_friction(this.Bhs),r.set_restitution(this.$hs);const n=Math.max(Math.abs(e.jg()),1),h=Math.max(Math.abs(e.Qg()),1);0===this.Lhs?this.fe.zOt()?this.ros(r):this.nos(r,n,h):1===this.Lhs?this.hos(r,e,n,h):this.oos(r,n,h),this.m8t=e.jg(),this.g8t=e.Qg(),e.dkt(!1),this.ios(r)}hos(t,s,e,i){const r=new(0,this.Ohs.b2PolygonShape),n=e*this.Hns,h=i*this.Hns;let o=s.Iz(),a=s.Az();s.jg()<0&&(o=1-o),s.Qg()<0&&(a=1-a);const l=(.5-o)*n,u=(.5-a)*h,c=CP.yut.jns.GAt(l,u);r.SetAsBox(n/2,h/2,c,0),t.set_shape(r),this.sos(t),this.ios(r),CP.yut.jns.Chs(c)}oos(t,s,e){const i=new(0,this.Ohs.b2CircleShape);i.set_m_radius(Math.min(s,e)*this.Hns*.5),t.set_shape(i),this.sos(t),this.ios(i)}nos(t,s,e){const i=this.LB(),r=i.jg()<0,n=i.Qg()<0,h=this.Hns,o=i.fkt(r?-s:s,n?-e:e,0).pu(),a=o.length/2,l=[];for(let t=0;t<a;++t)l.push(CP.yut.jns.GAt(o[2*t],o[2*t+1]));r!==n&&l.reverse();const u=CP.yut.jns.los.aos(l,s*e);for(const t of l)CP.yut.jns.Chs(t);if(u.length)for(const s of u){for(const t of s)t.set_x(t.get_x()*h),t.set_y(t.get_y()*h);const e=CP.yut.jns._hs(s);t.set_shape(e),this.sos(t),this.ios(e);for(const t of s)CP.yut.jns.Chs(t)}else this.hos(t,i,s,e)}ros(t){const s=this.Hns,e=CP.yut.jns.GAt,i=CP.yut.jns.Chs,r=[];this.fe.eq().X8t(r);const n=[];for(let h=0,o=r.length;h<o;++h){const o=r[h],a=o.CNt(),l=o.GNt();if(l){let r=$P.get(l);if(!r){const t=l.pu(),s=l.mu();for(let i=0;i<s;++i)n.push(e(t[2*i],t[2*i+1]));const h=o.l9t()&UP;(h===WP||h===VP||h===jP||h&WP&&h&VP&&h&jP)&&n.reverse(),r=CP.yut.jns.los.aos(n,a.width()*a.height()),$P.set(l,r);for(const t of n)i(t);CP.bh(n)}for(let h=0,o=r.length;h<o;++h){const o=r[h];for(let t=0,i=o.length;t<i;++t)n.push(e((a.Qa()+o[t].get_x())*s,(a.tl()+o[t].get_y())*s));const l=CP.yut.jns._hs(n);t.set_shape(l),this.sos(t),this.ios(l);for(const t of n)i(t);CP.bh(n)}}else{n.push(e(a.Qa()*s,a.tl()*s)),n.push(e(a.sl()*s,a.tl()*s)),n.push(e(a.sl()*s,a.el()*s)),n.push(e(a.Qa()*s,a.el()*s));const i=CP.yut.jns._hs(n);t.set_shape(i),this.sos(t),this.ios(i)}for(const t of n)i(t);CP.bh(n)}}uos(){this.Uhs&&(this.Qhs(),NP.delete(this.Uhs),this.tos(),this.Uns.DestroyBody(this.Uhs),this.Uhs=null)}Qhs(){for(const t of this.Hhs)this.Uns.DestroyJoint(t);CP.bh(this.Hhs)}fos(){for(const t of this.qhs)switch(t.type){case 0:this.dos(...t.pos);break;case 1:this.mos(...t.pos);break;case 2:this.gos(...t.pos);break;case 3:this.yos(...t.pos)}}wos(t){const s=this.LB();if(-1===t)return[s.YM(),s.KM()];if(0===t&&this.Uhs){const t=this.Uhs.GetWorldCenter();return[t.get_x()/this.Hns,t.get_y()/this.Hns]}return this.fe.pCt(t)}Sos(t,s,e,i,r){if(!this.Obt||!s||s===this.fe)return;const n=CP.yut.jns.Instance.Shs(s);n&&n.EGt()&&(this.qhs.push({type:0,pos:[t,s.CU(),e,i,r]}),this.dos(t,s.CU(),e,i,r))}dos(t,s,e,i,r){if(!this.Obt)return;const n=this.Bc.RB(s);if(!n||n===this.fe)return;const h=CP.yut.jns.Instance.Shs(n);if(!h||!h.EGt())return;h.Jhs.add(this.fe),this.vos(!1),h.vos(!1);const[o,a]=this.wos(t),[l,u]=n.pCt(e),c=o-l,f=a-u,d=this.Ohs.b2DistanceJointDef,p=this.Hns,m=new d;m.Initialize(this.Uhs,h.vhs(),zP(o*p,a*p),HP(l*p,u*p)),m.set_length(Math.hypot(c,f)*p),m.set_dampingRatio(i),m.set_frequencyHz(r),this.Hhs.push(this.Uns.CreateJoint(m)),this.ios(m)}bos(t,s){if(!this.Obt||!s||s===this.fe)return;const e=CP.yut.jns.Instance.Shs(s);e&&e.EGt()&&(this.qhs.push({type:1,pos:[t,s.CU()]}),this.mos(t,s.CU()))}mos(t,s){if(!this.Obt)return;const e=this.Bc.RB(s);if(!e||e===this.fe)return;const i=CP.yut.jns.Instance.Shs(e);if(!i||!i.EGt())return;i.Jhs.add(this.fe),this.vos(!1),i.vos(!1);const[r,n]=this.wos(t),h=this.Ohs.b2RevoluteJointDef,o=this.Hns,a=new h;a.Initialize(this.Uhs,i.vhs(),zP(r*o,n*o)),this.Hhs.push(this.Uns.CreateJoint(a)),this.ios(a)}Mos(t,s,e,i){if(!this.Obt||!s||s===this.fe)return;const r=CP.yut.jns.Instance.Shs(s);r&&r.EGt()&&(e=CP.sn(e),i=CP.sn(i),this.qhs.push({type:2,pos:[t,s.CU(),e,i]}),this.gos(t,s.CU(),e,i))}gos(t,s,e,i){if(!this.Obt)return;const r=this.Bc.RB(s);if(!r||r===this.fe)return;const n=CP.yut.jns.Instance.Shs(r);if(!n||!n.EGt())return;n.Jhs.add(this.fe),this.vos(!1),n.vos(!1);const[h,o]=this.wos(t),a=this.Ohs.b2RevoluteJointDef,l=this.Hns,u=new a;u.Initialize(this.Uhs,n.vhs(),zP(h*l,o*l)),u.set_enableLimit(!0),u.set_lowerAngle(CP.tn(e)),u.set_upperAngle(CP.tn(i)),this.Hhs.push(this.Uns.CreateJoint(u)),this.ios(u)}Tos(t,s,e,i,r,n,h,o,a){if(!this.Obt||!s||s===this.fe)return;const l=CP.yut.jns.Instance.Shs(s);l&&l.EGt()&&(e=CP.sn(e),o=CP.sn(o),this.qhs.push({type:3,pos:[t,s.CU(),e,i,r,n,h,o,a]}),this.yos(t,s.CU(),e,i,r,n,h,o,a))}yos(t,s,e,i,r,n,h,o,a){if(!this.Obt)return;const l=this.Bc.RB(s);if(!l||l===this.fe)return;const u=CP.yut.jns.Instance.Shs(l);if(!u||!u.EGt())return;u.Jhs.add(this.fe),this.vos(!1),u.vos(!1);const[c,f]=this.wos(t);e=CP.tn(e);const d=Math.cos(e),p=Math.sin(e),m=this.Ohs.b2PrismaticJointDef,g=this.Hns,y=new m;y.Initialize(this.Uhs,u.vhs(),zP(c*g,f*g),HP(d,p)),y.set_enableLimit(!!i),y.set_lowerTranslation(r*g),y.set_upperTranslation(n*g),y.set_enableMotor(!!h),y.set_motorSpeed(CP.tn(o)),y.set_maxMotorForce(a),this.Hhs.push(this.Uns.CreateJoint(y)),this.ios(y)}xos(){this.Obt&&(this.Qhs(),CP.bh(this.qhs),this.Jhs.clear())}Cos(){for(const t of this.Jhs){const s=CP.yut.jns.Instance.Shs(t);if(!s||!s.EGt())return;s.Gos(this.fe)}this.Jhs.clear()}zis(t){this.Gos(t)}Gos(t){const s=t.CU();let e=0;for(let t=0,i=this.qhs.length;t<i;++t)this.qhs[e]=this.qhs[t],e<this.Hhs.length&&(this.Hhs[e]=this.Hhs[t]),this.qhs[t].pos[1]===s?t<this.Hhs.length&&this.Uns.DestroyJoint(this.Hhs[t]):++e;CP.Sh(this.qhs,e),e<this.Hhs.length&&CP.Sh(this.Hhs,e),this.Jhs.delete(t)}vhs(){return this.Uhs}static ihs(t){return NP.get(t)||null}static Shs(t){return BP.get(t)||null}aT(){const t={e:this.Obt,im:this.Fhs,pr:this.khs,d:this.Nhs,fr:this.Bhs,re:this.$hs,ld:this.Whs,ad:this.Vhs,b:this.jhs,mcj:this.qhs};if(this.Obt){const s=this.Uhs.GetLinearVelocity();t.vx=s.get_x(),t.vy=s.get_y(),t.om=this.Uhs.GetAngularVelocity()}return t}c8(){this.Qhs(),CP.bh(this.qhs),this.Jhs.clear()}lT(t){this.uos(),this.Obt=t.e,t.hasOwnProperty("im")&&(this.Fhs=!!t.im),this.khs=t.pr,this.Nhs=t.d,this.Bhs=t.fr,this.$hs=t.re,this.Whs=t.ld,this.Vhs=t.ad,this.jhs=t.b,this.qhs=t.mcj;const s=this.LB();this.Yhs=s.YM(),this.Xhs=s.KM(),this.Pns=s.FV(),this.m8t=s.jg(),this.g8t=s.Qg(),this.Obt&&(this.Khs(),this.Uhs.SetLinearVelocity(zP(t.vx,t.vy)),this.Uhs.SetAngularVelocity(t.om),0===t.vx&&0===t.vy&&0===t.om||this.Uhs.SetAwake(!0),this.qhs=t.mcj),this.Obt?this.nPt():this.jIt()}d8(){this.Obt&&this.fos()}c7(){if(!this.Obt)return;const t=this.Bc,s=this.lq();let e=0;0===s.ohs()?e=t.WN()/60:(e=t.AN(this.fe),e>1/30&&(e=1/30));const i=t.AHt();i>s.uhs()&&t.WN()>0&&(0!==e&&this.Uns.Step(e,s.fhs(),s.phs()),this.Uns.ClearForces(),s.lhs(i)),this.vos(!0)}vos(t){const s=this.fe.LB(),e=this.Hns;(s.jg()!==this.m8t||s.Qg()!==this.g8t||s.Skt())&&this.Khs();const i=this.Uhs,r=s.YM(),n=s.KM(),h=r-this.Yhs,o=n-this.Xhs,a=Math.abs(h)>.001||Math.abs(o)>.001,l=s.FV()!==this.Pns;let u=r,c=n;if(2===this.Lhs){const t=this.eos();u=t.ol(),c=t.al()}a?(l?i.SetTransform(zP(u*e,c*e),s.FV()):i.SetTransform(zP(u*e,c*e),i.GetAngle()),t&&(i.SetLinearVelocity(zP(h,o)),this.Zhs=!0),i.SetAwake(!0)):t&&this.Zhs&&(this.Zhs=!1,i.SetLinearVelocity(zP(0,0)),i.SetTransform(zP(u*e,c*e),i.GetAngle())),!a&&l&&(i.SetTransform(i.GetPosition(),s.FV()),i.SetAwake(!0));const f=i.GetPosition(),d=f.get_x()/e,p=f.get_y()/e,m=i.GetAngle();if((d!==s.YM()||p!==s.KM()||m!==s.FV())&&(s.xz(d,p),s.OV(m),s.Tz(),2===this.Lhs)){const t=this.eos(),e=t.ol()-s.YM(),i=t.al()-s.KM();0===e&&0===i||(s.Gz(-e,-i),s.Tz())}this.Yhs=s.YM(),this.Xhs=s.KM(),this.Pns=s.FV()}sot(t){switch(t){case RP:return this._os();case AP:return this.Ios();case EP:return this.Pos();case OP:return this.Ros();case FP:return this.Aos();case DP:return this.Eos();case LP:return this.Oos();case kP:return this.EGt()}}oot(t,s){switch(t){case RP:this.Fos(s);break;case AP:this.Dos(s);break;case EP:this.Los(s);break;case OP:this.kos(s);break;case FP:this.Nos(s);break;case DP:this.Bos(s);break;case LP:this.$os(s);break;case kP:this.RGt(s)}}RGt(t){t=!!t,this.Obt&&!t?(this.Cos(),this.uos(),this.Obt=!1,this.jIt()):!this.Obt&&t&&(this.Obt=!0,this.Khs(),this.nPt())}EGt(){return this.Obt}lPt(){const t="behaviors.physics",s=[{name:t+".properties.enabled.name",value:this.EGt(),M0t:t=>this.RGt(t)},{name:t+".properties.immovable.name",value:this.Wos(),M0t:t=>this.Vos(t)},{name:t+".properties.density.name",value:this.Ios(),M0t:t=>this.Dos(t)},{name:t+".properties.friction.name",value:this.Pos(),M0t:t=>this.Los(t)},{name:t+".properties.elasticity.name",value:this.Ros(),M0t:t=>this.kos(t)},{name:t+".properties.linear-damping.name",value:this.Aos(),M0t:t=>this.Nos(t)},{name:t+".properties.angular-damping.name",value:this.Eos(),M0t:t=>this.Bos(t)}];return this.Obt&&(s.push({name:t+".debugger.is-sleeping",value:!this.jos()}),s.push({name:t+".debugger.velocity-x",value:this.Uos(),M0t:t=>this.zos(t,this.Hos())}),s.push({name:t+".debugger.velocity-y",value:this.Hos(),M0t:t=>this.zos(this.Uos(),t)}),s.push({name:t+".debugger.angular-velocity",value:CP.sn(this.qos()),M0t:t=>this.Jos(CP.tn(t))}),s.push({name:t+".debugger.mass",value:this.Yos()})),[{title:"$"+this.fq().Rc(),properties:s}]}Xos(t,s,e){const[i,r]=this.wos(e);this.Zos(t,s,i,r)}Kos(t,s,e,i){const[r,n]=this.wos(i),h=CP.an(r,n,s,e);this.Zos(Math.cos(h)*t,Math.sin(h)*t,r,n)}Qos(t,s,e){const[i,r]=this.wos(e);this.Zos(Math.cos(s)*t,Math.sin(s)*t,i,r)}Zos(t,s,e,i){if(!this.Obt)return;const r=this.Hns;this.Uhs.ApplyForce(zP(t,s),HP(e*r,i*r),!0)}tas(t,s,e){const[i,r]=this.wos(e);this.sas(t,s,i,r)}eas(t,s,e,i){const[r,n]=this.wos(i),h=CP.an(r,n,s,e);this.sas(Math.cos(h)*t,Math.sin(h)*t,r,n)}ias(t,s,e){const[i,r]=this.wos(e);this.sas(Math.cos(s)*t,Math.sin(s)*t,i,r)}sas(t,s,e,i){if(!this.Obt)return;const r=this.Hns;this.Uhs.ApplyLinearImpulse(zP(t,s),HP(e*r,i*r),!0);const n=this.LB();this.Yhs=n.YM(),this.Xhs=n.KM(),this.Zhs=!1}ras(t){this.Obt&&this.Uhs.ApplyTorque(t,!0)}nas(t,s){const e=CP.cn(this.LB().FV(),s)?-1:1;this.ras(t*e)}oas(t,s,e){const i=this.LB(),r=CP.an(i.YM(),i.KM(),s,e),n=CP.cn(i.FV(),r)?-1:1;this.ras(t*n)}Jos(t){this.Obt&&(this.Uhs.SetAngularVelocity(t),this.Uhs.SetAwake(!0))}qos(){return this.Obt?this.Uhs.GetAngularVelocity():0}zos(t,s){if(!this.Obt)return;const e=this.Hns;this.Uhs.SetLinearVelocity(zP(t*e,s*e)),this.Uhs.SetAwake(!0);const i=this.LB();this.Yhs=i.YM(),this.Xhs=i.KM(),this.Zhs=!1}aas(){if(!this.Obt)return[0,0];const t=this.Hns,s=this.Uhs.GetLinearVelocity();return[s.get_x()/t,s.get_y()/t]}Uos(){return this.Obt?this.Uhs.GetLinearVelocity().get_x()/this.Hns:0}Hos(){return this.Obt?this.Uhs.GetLinearVelocity().get_y()/this.Hns:0}las(t,s){if(!this.Obt)return;const e=this.Hns;this.Uhs.SetTransform(zP(t*e,s*e),this.Uhs.GetAngle());const i=this.LB();i.xz(t,s),i.Tz(),this.Yhs=i.YM(),this.Xhs=i.KM()}Dos(t){if(this.Obt&&this.Nhs!==t){this.Nhs=t;for(const s of this.zhs)s.SetDensity(t);this.Uhs.ResetMassData()}}Ios(){return this.Obt?this.Nhs:0}Los(t){if(this.Obt&&this.Bhs!==t){this.Bhs=t;for(const s of this.zhs)s.SetFriction(t);if(this.Uhs)for(let t=this.Uhs.GetContactList();this.Ohs.getPointer(t);t=t.get_next()){const s=t.get_contact();s&&s.ResetFriction()}}}Pos(){return this.Obt?this.Bhs:0}kos(t){if(this.Obt&&this.$hs!==t){this.$hs=t;for(const s of this.zhs)s.SetRestitution(t)}}Ros(){return this.Obt?this.$hs:0}Nos(t){this.Obt&&this.Whs!==t&&(this.Whs=t,this.Uhs.SetLinearDamping(t))}Aos(){return this.Obt?this.Whs:0}Bos(t){this.Obt&&this.Vhs!==t&&(this.Vhs=t,this.Uhs.SetAngularDamping(t))}Eos(){return this.Obt?this.Vhs:0}Vos(t){this.Obt&&(t=!!t,this.Fhs!==t&&(this.Fhs=t,this.Uhs.SetType(this.Fhs?0:2),this.Uhs.SetAwake(!0)))}Wos(){return this.Fhs}Fos(t){this.Obt&&(t=!!t,this.khs!==t&&(this.khs=t,this.Uhs.SetFixedRotation(this.khs),this.Uhs.SetAngularVelocity(0),this.Uhs.SetAwake(!0)))}_os(){return this.khs}$os(t){this.Obt&&(t=!!t,this.jhs!==t&&(this.jhs=t,this.Uhs.SetBullet(this.jhs),this.Uhs.SetAwake(!0)))}Oos(){return this.jhs}uas(t){this.Obt&&this.Uhs.SetAwake(!!t)}jos(){return!!this.Obt&&this.Uhs.IsAwake()}Yos(){return this.Obt?this.Uhs.GetMass()/this.Hns:0}cas(){return this.Obt?this.Uhs.GetWorldCenter().get_x()/this.Hns:0}fas(){return this.Obt?this.Uhs.GetWorldCenter().get_y()/this.Hns:0}das(){if(!this.Obt)return[0,0];const t=this.Uhs.GetWorldCenter(),s=this.Hns;return[t.get_x()/s,t.get_y()/s]}pas(){if(!this.Obt)return 0;let t=0;for(let s=this.Uhs.GetContactList();this.Ohs.getPointer(s);s=s.get_next()){const e=s.get_contact();e&&(t+=e.GetManifold().get_pointCount())}return t}mas(t){if(t=Math.floor(t),!this.Obt)return[0,0];let s=0;for(let e=this.Uhs.GetContactList();this.Ohs.getPointer(e);e=e.get_next()){const i=e.get_contact();if(!i)continue;const r=i.GetManifold().get_pointCount();if(t>=s&&t<s+r){const e=t-s,r=this.lq().Ths();i.GetWorldManifold(r);const n=r.get_points(e);return[n.get_x()/this.Hns,n.get_y()/this.Hns]}s+=r}return[0,0]}bIt(){return self.gas}};const YP=new WeakMap;self.gas=class extends _P{constructor(){super(),YP.set(this,_P.mU().eq())}get isEnabled(){return YP.get(this).EGt()}set isEnabled(t){YP.get(this).RGt(t)}yas(t,s,e=0){GP.ii(t),GP.ii(s),YP.get(this).Xos(t,s,e)}was(t,s,e,i=0){GP.ii(t),GP.ii(s),GP.ii(e),YP.get(this).Kos(t,s,e,i)}Sas(t,s,e=0){GP.ii(t),GP.ii(s),YP.get(this).Qos(t,s,e)}vas(t,s,e=0){GP.ii(t),GP.ii(s),YP.get(this).tas(t,s,e)}bas(t,s,e,i=0){GP.ii(t),GP.ii(s),GP.ii(e),YP.get(this).eas(t,s,e,i)}Mas(t,s,e=0){GP.ii(t),GP.ii(s),YP.get(this).ias(t,s,e)}Tas(t){GP.ii(t),YP.get(this).ras(t)}xas(t,s){GP.ii(t),GP.ii(s),YP.get(this).nas(t,s)}Cas(t,s,e){GP.ii(t),GP.ii(s),GP.ii(e),YP.get(this).oas(t,s,e)}set angularVelocity(t){GP.ii(t),YP.get(this).Jos(t)}get angularVelocity(){return YP.get(this).qos()}setVelocity(t,s){GP.ii(t),GP.ii(s),YP.get(this).zos(t,s)}Gas(){return YP.get(this).Uos()}_as(){return YP.get(this).Hos()}Ias(){return YP.get(this).aas()}Pas(t,s){GP.ii(t),GP.ii(s),YP.get(this).las(t,s)}set Ras(t){GP.ii(t),YP.get(this).Dos(t)}get Ras(){return YP.get(this).Ios()}set Aas(t){GP.ii(t),YP.get(this).Los(t)}get Aas(){return YP.get(this).Pos()}set Eas(t){GP.ii(t),YP.get(this).kos(t)}get Eas(){return YP.get(this).Ros()}set Oas(t){GP.ii(t),YP.get(this).Nos(t)}get Oas(){return YP.get(this).Aos()}set Fas(t){GP.ii(t),YP.get(this).Bos(t)}get Fas(){return YP.get(this).Eos()}set Das(t){YP.get(this).Vos(t)}get Das(){return YP.get(this).Wos()}set Las(t){YP.get(this).Fos(t)}get Las(){return YP.get(this)._os()}set kas(t){YP.get(this).$os(t)}get kas(){return YP.get(this).Oos()}get Nas(){return YP.get(this).Yos()}Bas(){return YP.get(this).cas()}$as(){return YP.get(this).fas()}Was(){return YP.get(this).das()}Vas(){return YP.get(this).pas()}jas(t){return GP.ii(t),YP.get(this).mas(t)[0]}Uas(t){return GP.ii(t),YP.get(this).mas(t)[1]}zas(t){return GP.ii(t),YP.get(this).mas(t)}set Has(t){YP.get(this).uas(!!t)}get Has(){return YP.get(this).jos()}get qas(){return!YP.get(this).jos()}Jas(t,s,e,i,r){GP.ii(i),GP.ii(r);const n=xP(this,s);YP.get(this).Sos(t,n,e,i,r)}Yas(t,s){const e=xP(this,s);YP.get(this).bos(t,e)}Xas(t,s,e,i){GP.ii(e),GP.ii(i);const r=xP(this,s);YP.get(this).Mos(t,r,e,i)}Zas(t,s,e,i,r,n,h,o,a){const l=xP(this,s);YP.get(this).Tos(t,l,e,i,r,n,h,o,a)}Kas(){YP.get(this).xos()}}}{const XP=self._s;XP.yut.jns.t$={Qas(){return!this.jos()},tls(){return this.Wos()},sls(t,s,e){if(!this.Obt)return!1;let i=0;if(0===t)i=this.Uos();else if(1===t)i=this.Hos();else{const[t,s]=this.aas();i=Math.hypot(t,s)}return XP.compare(i,s,e)},els(t,s){if(!this.Obt)return!1;const e=XP.sn(this.qos());return XP.compare(e,t,s)},ils(t,s){if(!this.Obt)return!1;const e=this.Yos();return XP.compare(e,t,s)},_u(){return this.EGt()}}}{const ZP=self._s;ZP.yut.jns.wht={rls(t,s,e){this.Xos(t,s,e)},nls(t,s,e,i){this.Kos(t,s,e,i)},hls(t,s,e){this.Qos(t,ZP.tn(s),e)},ols(t,s,e){this.tas(t,s,e)},als(t,s,e,i){this.eas(t,s,e,i)},lls(t,s,e){this.ias(t,ZP.tn(s),e)},uls(t){this.ras(ZP.tn(t))},cls(t,s){this.nas(ZP.tn(t),ZP.tn(s))},fls(t,s,e){this.oas(ZP.tn(t),s,e)},dls(t){this.Jos(ZP.tn(t))},pls(t,s,e,i,r){if(!s)return;const n=s.zCt(this.fe);this.Sos(t,n,e,i,r)},mls(t,s){if(!s)return;const e=s.zCt(this.fe);this.bos(t,e)},gls(t,s,e,i){if(!s)return;const r=s.zCt(this.fe);this.Mos(t,r,ZP.tn(e),ZP.tn(i))},yls(t,s,e,i,r,n,h,o,a){if(!s)return;const l=s.zCt(this.fe);this.Tos(t,l,ZP.tn(e),i,r,n,h,ZP.tn(o),a)},wls(){this.xos()},Sls(t){this.lq().yhs(t)},ahs(t){this.lq().ahs(t)},mhs(t,s){this.lq().mhs(t,s)},vls(t,s){this.zos(t,s)},bls(t,s){this.las(t,s)},Mls(t){this.Dos(t)},Tls(t){this.Los(t)},xls(t){this.kos(t)},Cls(t){this.Nos(t)},Gls(t){this.Bos(t)},_ls(t){this.Vos(t)},Ils(t,s){this.lq().Mhs(this.fU(),t,0!==s)},Pls(t){this.Fos(0!==t)},Rls(t){this.$os(0!==t)},Als(t){this.uas(!!t)},I_t(t){this.RGt(0!==t)}}}{const KP=self._s;KP.yut.jns.Sht={Els(){return this.Uos()},Ols(){return this.Hos()},Fls(){return KP.sn(this.qos())},Dls(){return this.Yos()},Lls(){return this.cas()},kls(){return this.fas()},Nls(){return this.Ios()},Bls(){return this.Pos()},$ls(){return this.Ros()},Wls(){return this.Aos()},Vls(){return this.Eos()},jls(){return this.pas()},Uls(t){return this.mas(t)[0]},zls(t){return this.mas(t)[1]}}}{let QP=function(t){return rR(t.get_x(),t.get_y())},tR=function(t){const s=[];for(const e of t)e.length<=8?s.push(e):s.push.apply(s,sR(e));return s},sR=function(t){const s=[];s.push(t.splice(0,8));const e=s[0][0];let i=s[0][7];for(;t.length;){const r=t.splice(0,Math.min(t.length,6));let n=r.at(-1);r.push(QP(e)),r.push(QP(i)),s.push(r),i=n}return s};CloneVec2=QP,SplitConvexPolysOver8Points=tR,SplitConvexPoly=sR;const eR=self._s,iR={};eR.yut.jns.los=iR;const rR=eR.yut.jns.GAt,nR=eR.yut.jns.Chs;iR.Hls=function(t,s,e,i,r,n){return t*i+e*n+r*s-s*e-i*r-n*t},iR.qls=function(t,s,e,i,r,n,h,o){const a=e-t,l=i-s,u=h-r,c=o-n,f=(u*(n-s)-c*(r-t))/(l*u-a*c),d=t+f*a,p=s+f*l,m=iR.Jls(e,i,t,s,d,p),g=iR.Jls(d,p,r,n,h,o);return m&&g?rR(d,p):null},iR.Jls=function(t,s,e,i,r,n){return(e+.1>=t&&t>=r-.1||e-.1<=t&&t<=r+.1)&&(i+.1>=s&&s>=n-.1||i-.1<=s&&s<=n+.1)&&iR.Yls(t,s,e,i,r,n)},iR.Yls=function(t,s,e,i,r,n){if(Math.abs(r-e)>.1){const h=(n-i)/(r-e)*(t-e)+i;return Math.abs(h-s)<.1}return Math.abs(t-e)<.1},iR.Xls=function(t,s,e,i){return Math.abs(e-t)<.1&&Math.abs(i-s)<.1},iR.aos=function(t,s){if(3===t.length)return[t.map(t=>rR(t.get_x(),t.get_y()))];const e=iR.Zls(t);let i=[];for(let t=0,r=e.length;t<r;++t){const r=e[t],n=[];let h=0;for(let t=0,s=r.length;t<s;++t){const e=r[t],i=r[(t+1)%s];h+=e.get_x()*i.get_y()-e.get_y()*i.get_x(),n.push(rR(e.get_x(),e.get_y()))}if(h=Math.abs(h/2),h>=.001*s)i.push(n);else for(let t=0,s=n.length;t<s;t++)nR(n[t])}return i=tR(i),i},iR.Zls=function(t){let s,e,i,r,n,h,o,a=[],l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=0,w=0,S=0,v=0,b=0,M=0,T=0,x=[],C=[],G=!1,_=[],I=[],P=!1;for(I.push(t);I.length;){for(a=I[0],u=a.length,G=!0,l=0;l<u;l++)if(y=l,w=l<u-1?l+1:l+1-u,S=l<u-2?l+2:l+2-u,s=a[y],e=a[w],i=a[S],f=iR.Hls(s.get_x(),s.get_y(),e.get_x(),e.get_y(),i.get_x(),i.get_y()),f<0){for(G=!1,g=1e9,c=0;c<u;c++)c!==y&&c!==w&&(v=c,b=c<u-1?c+1:0,r=a[v],n=a[b],h=iR.qls(s.get_x(),s.get_y(),e.get_x(),e.get_y(),r.get_x(),r.get_y(),n.get_x(),n.get_y()),h&&(p=e.get_x()-h.get_x(),m=e.get_y()-h.get_y(),d=p*p+m*m,d<g?(T=v,M=b,o=h,g=d):nR(h)));if(1e9===g)return[];for(x=[],C=[],v=T,b=M,r=a[v],n=a[b],P=!1,iR.Xls(o.get_x(),o.get_y(),n.get_x(),n.get_y())||(x.push(o),P=!0),iR.Xls(o.get_x(),o.get_y(),r.get_x(),r.get_y())||(C.push(o),P=!0),P||nR(o),T=-1,M=y;;){if(M===b){if(T<0||T>=u)return[];iR.Jls(n.get_x(),n.get_y(),a[T].get_x(),a[T].get_y(),s.get_x(),s.get_y())||x.push(a[M]);break}x.push(a[M]),T=M,M-1<0?M=u-1:M--}for(x.reverse(),T=-1,M=w;;){if(M===v){if(T<0||T>=u)return[];M!==v||iR.Jls(r.get_x(),r.get_y(),a[T].get_x(),a[T].get_y(),e.get_x(),e.get_y())||C.push(a[M]);break}C.push(a[M]),T=M,M+1>u-1?M=0:M++}I.push(x,C),I.shift();break}G&&_.push(I.shift())}return _}}{const hR=self._s;hR.yut.Kls=class extends hR.ZPt{constructor(t){super(t)}qr(){super.qr()}}}{const oR=self._s;oR.yut.Kls.dEt=class extends oR.eRt{constructor(t){super(t)}qr(){super.qr()}vIt(){}}}{const aR=self._s,lR=self.Ns,uR=self.oq;aR.yut.Kls.Qls=class{constructor(t,s,e,i){this.wpt=aR.Hr(aR.td),this.wpt.Set(t||0),this.tus=aR.Hr(aR.td),this.tus.Set(s||0),this.yAt=e||0,this.sus=!!i,this.eus=!1}ius(){return this.wpt.Hs()}uJ(){return this.tus.Hs()}jq(){return this.yAt}Ers(t){this.eus=!!t}bJ(){return this.eus}$u(t){this.wpt.$u(t),this.tus.$u(t)}rus(){return this.wpt.Hs()>=this.yAt}PQ(){if(this.rus()){if(!this.sus)return!0;this.wpt.nd(this.yAt)}return!1}aT(){return{c:this.wpt.Hs(),t:this.tus.Hs(),d:this.yAt,r:this.sus,p:this.eus}}lT(t){this.wpt.Set(t.c),this.tus.Set(t.t),this.yAt=t.d,this.sus=!!t.r,this.eus=!!t.p}},aR.yut.Kls.Instance=class extends aR.rRt{constructor(t,s){super(t),this.nus=new Map}qr(){this.nus.clear(),super.qr()}hus(t,s,e){const i=new aR.yut.Kls.Qls(0,0,t,e);this.nus.set(s.toLowerCase(),i),this.ous()}aus(t){this.nus.delete(t.toLowerCase()),this.ous()}lus(){this.nus.clear(),this.ous()}uus(t){return this.nus.has(t.toLowerCase())}cus(t){const s=this.nus.get(t.toLowerCase());return s?s.ius():0}fus(t){const s=this.nus.get(t.toLowerCase());return s?s.ius()/s.jq():0}dus(t){const s=this.nus.get(t.toLowerCase());return s?s.uJ():0}pus(t){const s=this.nus.get(t.toLowerCase());return s?s.jq():0}mus(t){const s=this.nus.get(t.toLowerCase());return!!s&&s.rus()}gus(t,s){const e=this.nus.get(t.toLowerCase());e&&e.Ers(s)}yus(t){const s=this.nus.get(t.toLowerCase());return!!s&&s.bJ()}wus(t){for(const s of this.nus.values())s.Ers(t)}ous(){this.nus.size>0?(this.nPt(),this.oPt()):(this.jIt(),this.UIt())}aT(){const t={};for(const[s,e]of this.nus.entries())t[s]=e.aT();return t}lT(t){this.nus.clear();for(const[s,e]of Object.entries(t)){const t=new aR.yut.Kls.Qls;t.lT(e),this.nus.set(s,t)}this.ous()}c7(){const t=this.Bc.AN(this.fe);for(const[s,e]of this.nus)e.bJ()||(e.$u(t),e.rus()&&this.NIt("timer",!1,{tag:s}))}rPt(){for(const[t,s]of this.nus.entries())s.PQ()&&this.nus.delete(t)}lPt(){return[{title:"behaviors.timer.debugger.timers",properties:[...this.nus.entries()].map(t=>({name:"$"+t[0],value:`${Math.round(10*t[1].ius())/10} / ${Math.round(10*t[1].jq())/10}`}))}]}bIt(){return self.Sus}};const cR=["once","regular"];self.Sus=class extends uR{#t;constructor(){super(),this.#t=uR.mU().eq()}vus(t,s,e="once"){lR.ii(t),lR.oi(s);const i=cR.indexOf(e);if(-1===i)throw new Error("invalid type");this.#t.hus(t,s,1===i)}bus(t,s){lR.oi(t),this.#t.gus(t,!!s)}Mus(t){this.#t.wus(!!t)}Tus(t){lR.oi(t),this.#t.aus(t)}xus(){this.#t.lus()}Cus(t){return lR.oi(t),this.#t.uus(t)}Gus(t){return lR.oi(t),this.#t.yus(t)}getCurrentTime(t){return lR.oi(t),this.#t.cus(t)}_us(t){return lR.oi(t),this.#t.fus(t)}Ius(t){return lR.oi(t),this.#t.dus(t)}Pus(t){return lR.oi(t),this.#t.pus(t)}Rus(t){return lR.oi(t),this.#t.mus(t)}}}self._s.yut.Kls.t$={Aus(t){return this.mus(t)},Eus(t){return this.uus(t)},Ous(t){return this.yus(t)}},self._s.yut.Kls.wht={Fus(t,s,e){this.hus(t,e,1===s)},Dus(t){this.aus(t)},Lus(){this.lus()},kus(t,s){this.gus(t,0===s)},Nus(t){this.wus(0===t)}},self._s.yut.Kls.Sht={fns(t){return this.cus(t)},Bus(t){return this.fus(t)},$us(t){return this.dus(t)},rns(t){return this.pus(t)}};{const fR=self._s;fR.yut.Wus=class extends fR.ZPt{constructor(t){super(t)}qr(){super.qr()}}}{const dR=self._s;dR.yut.Wus.dEt=class extends dR.eRt{constructor(t){super(t)}qr(){super.qr()}vIt(){}}}{const pR=self._s,mR=0,gR=1,yR=2;pR.yut.Wus.Instance=class extends pR.rRt{constructor(t,s){super(t),this.Tns=0,this.xns=0,this.Vus=0,this.jus=0,this.Uus=5,this.Obt=!0,s&&(this.jus=s[mR],this.Uus=s[gR],this.Obt=s[yR]),this.Obt&&this.nPt()}qr(){super.qr()}aT(){return{dx:this.Tns,dy:this.xns,cs:this.Vus,sm:this.jus,px:this.Uus,e:this.Obt}}lT(t){this.Tns=t.dx,this.xns=t.dy,this.Vus=t.cs,this.jus=t.sm,this.Uus=t.px,this.RGt(t.e)}Cq(){return Math.hypot(this.Tns,this.xns)}FV(){return Math.atan2(this.xns,this.Tns)}zus(t,s,e){if(0===t&&0===s)return;const i=this.LB(),r=i.YM(),n=i.KM();let h=Math.round(pR.en(t,s)/this.Uus);0===h&&(h=1);for(let o=1;o<=h;++o){let a=o/h;if(i.xz(r+t*a,n+s*a),i.Tz(),this.JU(e),1===this.Vus)return o--,a=o/h,i.xz(r+t*a,n+s*a),void i.Tz();if(2===this.Vus)return}}c7(){if(!this.Obt||0===this.Tns&&0===this.xns)return;const t=this.fe.LB(),s=this.Bc.AN(this.fe),e=this.Tns*s,i=this.xns*s;this.Vus=0,0===this.jus?(t.Gz(e,i),t.Tz()):1===this.jus?this.zus(e,i,pR.yut.Wus.t$.Hus):2===this.jus?(this.zus(e,0,pR.yut.Wus.t$.qus),this.Vus=0,this.zus(0,i,pR.yut.Wus.t$.Jus)):3===this.jus&&(this.zus(0,i,pR.yut.Wus.t$.Jus),this.Vus=0,this.zus(e,0,pR.yut.Wus.t$.qus))}sot(t){switch(t){case mR:return this.jus;case gR:return this.Uus;case yR:return this.Obt}}oot(t,s){switch(t){case mR:this.jus=s;break;case gR:this.Uus=s;break;case yR:this.RGt(s)}}RGt(t){this.Obt=!!t,this.Obt?this.nPt():this.jIt()}lPt(){const t="behaviors.custom";return[{title:"$"+this.fq().Rc(),properties:[{name:t+".debugger.vector-x",value:this.Tns,M0t:t=>this.Tns=t},{name:t+".debugger.vector-y",value:this.xns,M0t:t=>this.xns=t},{name:t+".properties.pixels-per-step.name",value:this.Uus,M0t:t=>this.Uus=t},{name:t+".properties.enabled.name",value:this.Obt,M0t:t=>this.RGt(t)}]}]}}}{const wR=self._s;wR.yut.Wus.t$={Yus(){return 0!==this.Tns||0!==this.xns},Xus(t,s,e){let i=0;switch(t){case 0:i=this.Cq();break;case 1:i=this.Tns;break;case 2:i=this.xns}return wR.compare(i,s,e)},Hus:()=>!0,qus:()=>!0,Jus:()=>!0,_u(){return this.Obt}}}{const SR=self._s;SR.yut.Wus.wht={nJ(){this.Tns=0,this.xns=0},x6t(t){switch(t){case 0:this.Tns*=-1,this.xns*=-1;break;case 1:this.Tns*=-1;break;case 2:this.xns*=-1}},Zus(t,s){let e=0;switch(t){case 0:e=this.FV(),this.Tns=Math.cos(e)*s,this.xns=Math.sin(e)*s;break;case 1:this.Tns=s;break;case 2:this.xns=s}},Kus(t,s){const e=s*this.Bc.AN(this.fe);let i;switch(t){case 0:i=this.FV(),this.Tns+=Math.cos(i)*e,this.xns+=Math.sin(i)*e;break;case 1:this.Tns+=e;break;case 2:this.xns+=e}},Qus(t,s){s=SR.tn(s);const e=t*this.Bc.AN(this.fe);this.Tns+=Math.cos(s)*e,this.xns+=Math.sin(s)*e},tcs(t,s,e){const i=this.LB(),r=t*this.Bc.AN(this.fe),n=Math.atan2(e-i.KM(),s-i.YM());this.Tns+=Math.cos(n)*r,this.xns+=Math.sin(n)*r},scs(t){t=SR.tn(t);const s=this.Cq();this.Tns=Math.cos(t)*s,this.xns=Math.sin(t)*s},ecs(t){t=this.FV()+SR.tn(t);const s=this.Cq();this.Tns=Math.cos(t)*s,this.xns=Math.sin(t)*s},ics(t){t=this.FV()-SR.tn(t);const s=this.Cq();this.Tns=Math.cos(t)*s,this.xns=Math.sin(t)*s},rcs(t){this.Vus=t+1},LNt(t){let s,e,i;const r=this.fe,n=this.l$().Ak();switch(t){case 0:s=this.FV(),e=Math.cos(s),i=Math.sin(s),n.LNt(r,-e,-i,Math.max(3*this.Cq(),100));break;case 1:n.BNt(r);break;case 2:n.LNt(r,0,-1,Math.max(3*Math.abs(this.xns),100));break;case 3:n.LNt(r,0,1,Math.max(3*Math.abs(this.xns),100));break;case 4:n.LNt(r,-1,0,Math.max(3*Math.abs(this.Tns),100));break;case 5:n.LNt(r,1,0,Math.max(3*Math.abs(this.Tns),100))}},ncs(t){t=SR.tn(t);const s=Math.cos(t),e=Math.sin(t);this.l$().Ak().LNt(this.fe,s,e,Math.max(3*this.Cq(),100))},I_t(t){this.RGt(t)}}}{const vR=self._s;vR.yut.Wus.Sht={hcs(){return this.Cq()},ocs(){return vR.sn(this.FV())},dx(){return this.Tns},dy(){return this.xns}}}{const bR=self._s;bR.yut.acs=class extends bR.ZPt{constructor(t){super(t)}qr(){super.qr()}}}{const MR=self._s;MR.yut.acs.dEt=class extends MR.eRt{constructor(t){super(t),this.lcs=[]}qr(){MR.bh(this.lcs),super.qr()}vIt(){}ucs(t){if(!this.lcs.includes(t)){for(const s of this.lcs)if(s.v1()&&s.CV(t))return;this.lcs.push(t)}}ccs(){MR.bh(this.lcs)}fcs(){return this.lcs}dcs(t){const s=this.fq();for(const e of t.Ont())if(e.fq()===s)return e.eq();return null}}}{const TR=self._s,xR=self.Ns,CR=self.oq,GR=0,_R=1,IR=2,PR=3,RR=0,AR=[];TR.yut.acs.Instance=class extends TR.rRt{constructor(t,s){super(t),this.pcs=0,this.mcs=1e4,this.gcs=TR.tn(360),this.ycs=!0,this.wcs=new TR.KNt,s&&(this.pcs=s[GR],this.mcs=s[_R],this.gcs=TR.tn(s[IR]),this.ycs=s[PR])}qr(){super.qr()}aT(){return{r:this.mcs,c:this.gcs,om:this.pcs,ucc:this.ycs,t:this.Kxt().fcs().map(t=>t.I1())}}lT(t){this.mcs=t.r,this.gcs=t.c,this.pcs=t.om||0,this.ycs=!!t.ucc;const s=this.Kxt().fcs();TR.bh(s);for(const e of t.t){const t=this.Bc.QY(e);t&&s.push(t)}}Scs(t,s){const e=t.CU(),[i,r]=t.pCt(s);return this.vcs(i,r)||this.wcs.uBt()&&this.wcs.tBt===e}vcs(t,s){const e=this.LB();let i=e.FV();return e.jg()<0&&(i+=Math.PI),this.bcs(e.YM(),e.KM(),i,t,s)}bcs(t,s,e,i,r){this.wcs.$f();const n=this.mcs;if(TR.hn(t,s,i,r)>n*n)return!1;const h=TR.an(t,s,i,r);return!(TR.ln(e,h)>this.gcs/2)&&!this.Mcs(t,s,i,r,this.ycs).uBt()}Tcs(t,s){if(s){const s=this.LB().kB(),e=this.Bc.Ak();return this.pcs===RR?e.RNt(s,t.rect,AR):e.$$(s,this.xcs(),t.rect,AR),AR}if(this.pcs===RR){const t=this.Bc.IRt();return t?t.iV():AR}for(const t of this.xcs())TR.Fr(AR,t.iV());return AR}xcs(){return this.Kxt().fcs()}Mcs(t,s,e,i,r){const n=this.wcs.Set(t,s,e,i),h=this.Tcs(n,r),o=this.Bc.Ak(),a=this.pcs===RR,l=this.fe;for(let t=0,s=h.length;t<s;++t){const s=h[t];s!==l&&(a&&!o.JLt(s,l)||o.UNt(s,n))}return n.cBt(),TR.bh(AR),n}Ccs(){return this.wcs}Gcs(){const t=this.wcs;return t.uBt()?t.rBt:0}_cs(){const t=this.wcs;return t.uBt()?t.nBt:0}Ics(){const t=this.wcs;return t.uBt()?t.bt:0}Pcs(){const t=this.wcs;return t.uBt()?t.tBt:-1}Rcs(t){const s=this.wcs;return s.uBt()?s.rBt+t*s.hBt:0}Acs(t){const s=this.wcs;return s.uBt()?s.nBt+t*s.oBt:0}Ecs(){const t=this.wcs;return t.uBt()?t.sBt:0}Ocs(t){const s=this.wcs;return s.uBt()?s.rBt+t*s.aBt:0}Fcs(t){const s=this.wcs;return s.uBt()?s.nBt+t*s.lBt:0}Dcs(){const t=this.wcs;return t.uBt()?Math.atan2(t.lBt,t.aBt):0}Lcs(t){this.mcs=t}kcs(){return this.mcs}Ncs(t){this.gcs=t}Bcs(){return this.gcs}sot(t){switch(t){case GR:return this.pcs;case _R:return this.mcs;case IR:return TR.sn(this.gcs);case PR:return this.ycs}}oot(t,s){switch(t){case GR:this.pcs=s;break;case _R:this.mcs=s;break;case IR:this.gcs=TR.tn(s);break;case PR:this.ycs=!!s}}lPt(){const t="behaviors.los.properties";return[{title:"$"+this.fq().Rc(),properties:[{name:t+".range.name",value:this.kcs(),M0t:t=>this.Lcs(t)},{name:t+".cone-of-view.name",value:TR.sn(this.Bcs()),M0t:t=>this.Ncs(TR.tn(t))}]}]}bIt(){return self.$cs}};const ER=new WeakMap;self.$cs=class extends CR{constructor(){super();const t=CR.mU().eq();ER.set(this,t),this.Wcs=new self.Vcs(t)}set range(t){xR.ii(t),ER.get(this).Lcs(t)}get range(){return ER.get(this).kcs()}set jcs(t){xR.ii(t),ER.get(this).Ncs(t)}get jcs(){return ER.get(this).Bcs()}Ucs(t,s){return xR.Ke(t),xR.Ke(s),ER.get(this).vcs(t,s)}zcs(t,s,e,i,r){return xR.Ke(t),xR.Ke(s),xR.Ke(e),xR.Ke(i),xR.Ke(r),ER.get(this).bcs(t,s,e,i,r)}Hcs(t,s,e,i,r=!0){return xR.Ke(t),xR.Ke(s),xR.Ke(e),xR.Ke(i),ER.get(this).Mcs(t,s,e,i,r),this.Wcs}qcs(t){const s=ER.get(this),e=s.l$().B$(t);s.Kxt().ucs(e)}Jcs(){ER.get(this).Kxt().ccs()}},self.Vcs=class{constructor(t){ER.set(this,t)}get Ycs(){return ER.get(this).Ccs().uBt()}get rBt(){return ER.get(this).Gcs()}get nBt(){return ER.get(this)._cs()}Xcs(){const t=ER.get(this);return[t.Gcs(),t._cs()]}get Zcs(){return ER.get(this).Ics()}get tBt(){return ER.get(this).Pcs()}Kcs(t){return xR.ii(t),ER.get(this).Rcs(t)}Qcs(t){return xR.ii(t),ER.get(this).Acs(t)}tfs(t){xR.ii(t);const s=ER.get(this);return[s.Rcs(t),s.Acs(t)]}get sfs(){return ER.get(this).Ecs()}efs(t){return xR.ii(t),ER.get(this).Ocs(t)}ifs(t){return xR.ii(t),ER.get(this).Fcs(t)}rfs(t){xR.ii(t);const s=ER.get(this);return[s.Ocs(t),s.Fcs(t)]}get nfs(){return ER.get(this).Dcs()}}}{const OR=self._s,FR=new Set,DR=new Set;OR.yut.acs.t$={hfs(t,s){return this.vcs(t,s)},ofs(){return this.wcs.uBt()},bcs(t,s,e,i,r){return this.bcs(t,s,OR.tn(e),i,r)},afs(t,s){if(!t)return!1;const e=this.Bc.Dgt(),i=e.fN().Upt(),r=e.l$(),n=e.fU().rV(),h=t.rV();let o=n.iV(),a=h.iV();n._pt()?OR.bh(n.Lpt()):i&&(o=r.iCt()&&!n.Lpt().length&&n.Dpt().length?n.Dpt():n.Lpt()),h._pt()?OR.bh(h.Lpt()):i&&(a=r.iCt()&&!h.Lpt().length&&h.Dpt().length?h.Dpt():h.Lpt());const l=e.ixt(),u=this.Kxt();for(const t of o){let e=!1;const i=u.dcs(t);if(0===a.length)l&&(e=!0);else for(const r of a)t!==r&&OR.xor(i.Scs(r,s),l)&&(e=!0,DR.add(r));e&&FR.add(t)}return i?(o===n.Lpt()?n.Wpt(FR):(n.$pt(FR,o),n.Bpt(FR)),a===h.Lpt()?h.Wpt(DR):(h.$pt(DR,a),h.Bpt(DR))):(n.Bpt(FR),h.Bpt(DR)),FR.clear(),DR.clear(),n.Ipt()}}}{const LR=self._s;LR.yut.acs.wht={lfs(t){this.Lcs(t)},ufs(t){this.Ncs(LR.tn(t))},Mcs(t,s,e,i,r){this.Mcs(t,s,e,i,r)},ucs(t){this.Kxt().ucs(t)},ccs(){this.Kxt().ccs()}}}{const kR=self._s;kR.yut.acs.Sht={Range(){return this.kcs()},cfs(){return kR.sn(this.Bcs())},ffs(){return this.Gcs()},dfs(){return this._cs()},pfs(){return this.Ics()},mfs(){return this.Pcs()},gfs(t){return this.Rcs(t)},yfs(t){return this.Acs(t)},wfs(){return kR.sn(this.Ecs())},Sfs(t){return this.Ocs(t)},vfs(t){return this.Fcs(t)},bfs(){return kR.sn(this.Dcs())}}}{const NR=self._s,BR=self.Ns,$R=(self.assert,2147483647);class WR{constructor(){this.Mfs=0,this.Tfs=0,this.CQ=null}xfs(t,s,e){this.Mfs=t,this.Tfs=s,this.CQ=e}Cfs(t,s,e,i,r){const n=this.CQ;if(n)for(let i=0;i<e;++i)n[t+i].set(r[i],s)}a6t(t,s){return t<0||s<0||t>=this.Mfs||s>=this.Tfs?$R:this.CQ[t][s]}Gfs(){return this.Mfs}_fs(){return this.Tfs}}class VR{constructor(t,s){this.Ifs=!1,this.Pfs=new WR,this.Rfs=10,this.Afs=!0,this.Efs=!1,this.Ofs=0,this.Ffs=0,this.Dfs=0,this.Lfs=0,this.kfs=!1,this.Nfs=[],this.Bfs=null,this.$fs=null,this.iRt=t,this.Wfs=s;const e=s.split(",");this.Bc=t.l$(),this.Vfs=parseInt(e[0],10),this.jfs=parseInt(e[1],10),this.Ufs=new self.zfs(this)}Ps(t){this.Ifs=!!t}Rs(){return this.Ifs}Hfs(){return this.Vfs}qfs(){return this.jfs}Gfs(){return this.Pfs.Gfs()}_fs(){return this.Pfs._fs()}Jfs(){return this.Pfs}l$(){return this.Bc}lq(){return this.iRt}Yfs(){return this.Wfs}Xfs(t){this.Rfs=Math.floor(t)}Zfs(){return this.Rfs}Kfs(t){this.Afs=!!t}Qfs(){return this.Afs}tds(t){this.kfs=!!t}sds(){return this.kfs}eds(){return this.Nfs}ids(){return this.Bfs||(this.Bfs=new Promise(t=>this.$fs=t)),this.Bfs}rds(){this.$fs&&this.$fs(),this.Bfs=null,this.$fs=null}nds(t,s,e,i){if(this.sds())return!0;const r=this.Vfs,n=this.jfs,h=this.Pfs.Gfs(),o=this.Pfs._fs(),a=Math.min(t,e)-n,l=Math.min(s,i)-n,u=Math.max(t,e)+n,c=Math.max(s,i)+n,f=Math.max(Math.floor(a/r),0),d=Math.max(Math.floor(l/r),0),p=Math.min(Math.ceil(u/r),h),m=Math.min(Math.ceil(c/r),o);return!(f>=p||d>=m||(this.eds().push([f,d,p,m]),0))}hds(t){const s=t.rV().iV();let e=!1;for(const t of s){const s=t.LB();if(!s)continue;const i=s.Bz(),r=this.nds(i.Qa(),i.tl(),i.sl(),i.el());e=e||r}return e}ods(t,s,e){if(this.Efs)return;this.Efs=!0,this.Ofs++;const i=t*(e=Math.min(e,this.Bc.dqt()));this.Ffs=i,this.Dfs=s,this.Lfs=e}ads(){this.Efs=!1}lds(){return this.Efs}uds(){return this.Ofs}cds(){return this.Ffs}fds(){return this.Dfs}dds(){return this.Lfs}zIt(){return this.Ufs}}NR.yut.pds=class extends NR.ZPt{constructor(t){super(t),this.mds=new Map,this.Bc.YB(this.Bc.nqt(["redblackset.js","pathfind.js"])),this.Bc.Sf().addEventListener("beforelayoutchange",()=>this.vKt())}qr(){super.qr()}Yfs(t,s){return t+","+s}gds(t){let s=this.mds.get(t);return s||(s=new VR(this,t),this.mds.set(t,s)),s}yds(t,s,e,i){const r=this.gds(t);this.Bc.fqt("PFCellData",{broadcastKey:"PFCellData:"+t,mapKey:t,hcells:s,vcells:e,cellData:i}),r.Ps(!0),r.Jfs().xfs(s,e,i),r.tds(!1)}Cfs(t,s,e,i,r,n){this.Bc.fqt("PFUpdateRegion",{broadcastKey:"PFUpdateRegion:"+t,mapKey:t,cx1:s,cy1:e,lenx:i,leny:r,cellData:n}),this.gds(t).Jfs().Cfs(s,e,i,r,n)}wds(t,s,e,i,r,n){const h=this.gds(t);let o=null,a=null;return h.lds()&&(a=h.dds(),o={id:h.uds(),cost:h.cds(),cellSpread:h.fds()}),this.Bc.cqt("PFFindPath",{mapKey:t,cellX:s,cellY:e,destCellX:i,destCellY:r,moveCost:h.Zfs(),diagonalsEnabled:h.Qfs(),directMovementMode:n,pathGroup:o},null,a)}vKt(){for(const t of this.mds.values())t.Ps(!1),t.Jfs().xfs(0,0,null),t.tds(!0);this.Bc.fqt("PFResetAllCellData")}};const jR=new WeakMap;self.zfs=class{constructor(t){jR.set(this,t),Object.defineProperties(this,{Sds:{value:t.Hfs(),writable:!1},vds:{value:t.qfs(),writable:!1}})}get bds(){return jR.get(this).Gfs()}get Mds(){return jR.get(this)._fs()}Tds(t,s){return BR.ii(t),BR.ii(s),jR.get(this).Jfs().a6t(t,s)===$R}set xds(t){BR.ii(t),jR.get(this).Xfs(t)}get xds(){return jR.get(this).Zfs()}set Cds(t){jR.get(this).Kfs(t)}get Cds(){return jR.get(this).Qfs()}async Gds(){const t=jR.get(this);t.tds(!0),await t.ids()}async _ds(t,s,e,i){const r=jR.get(this);r.nds(t,s,e,i)&&await r.ids()}async Ids(t){const s=jR.get(this),e=s.l$().B$(t);s.hds(e)&&await s.ids()}Pds(t=1,s=1,e=1){if(BR.ii(t),BR.ii(s),BR.ii(e),t=Math.floor(t),s=Math.floor(s),(e=Math.floor(e))<=0)throw new Error("invalid max workers");if(s<=0)throw new Error("invalid cell spread");jR.get(this).ods(t,s,e)}Rds(){jR.get(this).ads()}}}{const UR=self._s;UR.yut.pds.dEt=class extends UR.eRt{constructor(t){super(t),this.lcs=[],this.Ads=[]}qr(){super.qr()}vIt(){}fcs(){return this.lcs}Eds(){return this.Ads}}}{const zR=self._s,HR=self.Ns,qR=self.oq,JR=0,YR=1,XR=2,ZR=3,KR=4,QR=5,tA=6,sA=7,eA=8,iA=9,rA=10,nA=2147483647,hA=new zR.Rect,oA=[];zR.yut.pds.Instance=class extends zR.rRt{constructor(t,s){super(t);const e=this.LB();this.Vfs=30,this.jfs=-1,this.Ods=0,this.Fds=200,this.Dds=1e3,this.Lds=2e3,this.kds=zR.tn(135),this.Nds=!0,this.Bds=1,this.Obt=!0,this.$ds=!1,this.Wds=!1,this.Vds=!1,this.jds=!1,this.Uds=0,this.Io=e.FV(),this.Pns=e.FV(),this.zds=0,this.Hds=0,this.qds=0,this.Jds=0,this.Yds=0,this.Xds=0,this.Zds=[],this.Kds=!1,this.Qds=[],this.tps=0,this.sps=0,this.eps=!1,this.ips=!1,this.rps=0,this.nps=0,this.hps=!0;let i=!0;s&&(this.Vfs=s[JR],this.jfs=s[YR],this.Ods=s[XR],this.Fds=s[ZR],this.Dds=s[KR],this.Lds=s[QR],this.kds=zR.tn(s[tA]),this.Nds=!!s[sA],i=!!s[eA],this.Bds=s[iA],this.Obt=!!s[rA]);const r=e.mB();this.Yds=Math.ceil(r.jg()/this.Vfs),this.Xds=Math.ceil(r.Qg()/this.Vfs);const n=this.Bc.Sf();this.Zf=new zR.Jf(zR.Vf.qf(n,"afterload",t=>this.d8())),this.Vfs<3&&(this.Vfs=3),this.Obt&&(this.nPt(),this.oPt()),this.ops().Kfs(i)}qr(){this.eps=!0,super.qr()}Yfs(){return this.lq().Yfs(this.Vfs,this.jfs)}ops(){return this.lq().gds(this.Yfs())}aT(){const t=this.ops(),s={cs:this.Vfs,cb:this.jfs,ms:this.Fds,acc:this.Dds,dec:this.Lds,av:this.kds,re:this.Nds,mc:t.Zfs(),de:t.Qfs(),o:this.Ods,im:this.$ds,mfs:this.Wds,ftmwm:this.Vds,hp:this.jds,mn:this.Uds,a:this.Io,lka:this.Pns,s:this.zds,rx:this.Hds,ry:this.qds,ra:this.Jds,hc:this.Yds,vc:this.Xds,p:this.Zds,dmm:this.Bds,e:this.Obt,fr:this.hps,obs:this.Kxt().fcs().map(t=>t.I1()),costs:this.Kxt().Eds().map(t=>({sid:t.BIt.I1(),cost:t.aps}))};return this.ips?(s.dfp=!0,s.dfx=this.rps,s.dfy=this.nps):(s.dfp=this.Kds,s.dfx=this.tps,s.dfy=this.sps),s}lT(t){this.Vfs=t.cs,this.jfs=t.cb,this.Fds=t.ms,this.Dds=t.acc,this.Lds=t.dec,this.kds=t.av,this.Nds=t.re;const s=t.de,e=t.hasOwnProperty("mc")?t.mc:10;this.Ods=t.o,this.$ds=t.im,this.Wds=t.mfs,this.Vds=t.ftmwm,this.jds=t.hp,this.Uds=t.mn,this.Io=t.a,this.Pns=t.lka,this.zds=t.s,this.Hds=t.rx,this.qds=t.ry,this.Jds=t.ra,this.Yds=t.hc,this.Xds=t.vc,this.Zds=t.p,this.RGt(t.e),this.hps=t.fr,t.hasOwnProperty("dmm")&&(this.Bds=t.dmm),this.Kds=t.dfp,zR.bh(this.Qds),this.tps=t.dfx,this.sps=t.dfy;const i=this.Kxt().fcs();zR.bh(i);for(const s of t.obs){const t=this.Bc.QY(s);t&&i.push(t)}const r=this.Kxt().Eds();zR.bh(r);for(const t of r){const s=this.Bc.QY(t.sid);s&&r.push({BIt:s,aps:t.cost})}this.Vfs<3&&(this.Vfs=3);const n=this.ops();n.Xfs(e),n.Kfs(s)}d8(){this.ops().tds(!0)}c7(){if(!this.Obt||!this.$ds)return;const t=this.Bc.AN(this.fe),s=this.fe.LB();this.Nds&&s.FV()!==this.Pns&&(this.Io=s.FV());const e=this.Zds,i=Math.min(.4*this.Fds,2*Math.abs(s.jg())),r=Math.max(1.5*this.zds,30);let n=0,h=0;this.Uds<e.length?(n=e[this.Uds].x,h=e[this.Uds].y,zR.nn(this.Hds,this.qds,n,h)<3*r*t&&(this.Uds++,this.Hds=n,this.qds=h,this.Uds<e.length&&(n=e[this.Uds].x,h=e[this.Uds].y))):(n=e.at(-1).x,h=e.at(-1).y),this.Jds=zR.an(this.Hds,this.qds,n,h);const o=zR.nn(s.YM(),s.KM(),this.Hds,this.qds);if(o<i&&this.Uds<e.length){let s=0;this.Vds?(s=i,this.Vds=!1):s=r*t,this.Hds+=Math.cos(this.Jds)*s,this.qds+=Math.sin(this.Jds)*s}const a=zR.an(s.YM(),s.KM(),this.Hds,this.qds),l=zR.ln(this.Io,a),u=zR.nn(s.YM(),s.KM(),e.at(-1).x,e.at(-1).y),c=this.Fds*this.Fds/(2*this.Lds);if(o>1){this.Io=zR.un(this.Io,a,this.kds*t);let e=0;if(zR.sn(l)<=.5)e=this.Fds;else if(zR.sn(l)>=120||this.Wds&&0===this.Uds)this.Wds=!0;else{const t=l/this.kds,i=zR.nn(s.YM(),s.KM(),this.Hds,this.qds)/(2*Math.sin(l))*l;e=zR.Kr(i/t,0,this.Fds)}u<c&&(e=Math.min(e,u/c*this.Fds+this.Fds/40)),this.zds+=this.Dds*t,this.zds>e&&(this.zds=e)}return s.Gz(Math.cos(this.Io)*this.zds*t,Math.sin(this.Io)*this.zds*t),this.Nds&&(s.OV(this.Io),this.Pns=s.FV()),s.Tz(),this.Uds===e.length&&zR.nn(s.YM(),s.KM(),n,h)<Math.max(3*this.zds*t,10)?(this.$ds=!1,this.jds=!1,this.Uds=0,this.zds=0,this.NIt("arrived"),this.HIt(zR.yut.pds.t$.lps)):void 0}rPt(){this.Obt&&(this.ups(),this.cps())}ups(){const t=this.ops(),s=t.eds();(!t.Rs()||t.sds()||s.length)&&(!t.Rs()||t.sds()?this.fps():s.length&&this.dps(s),zR.bh(s),t.rds())}fps(){const t=this.LB().mB();this.Yds=Math.ceil(t.jg()/this.Vfs),this.Xds=Math.ceil(t.Qg()/this.Vfs);const s=zR.To(this.Yds,()=>new Int32Array(this.Xds)),e=this.Xds;for(let t=0,i=this.Yds;t<i;++t)for(let i=0;i<e;++i)s[t][i]=this.pps(t,i);this.lq().yds(this.Yfs(),this.Yds,this.Xds,s)}dps(t){for(const[s,e,i,r]of t)this.mps(s,e,i,r)}mps(t,s,e,i){const r=e-t,n=i-s,h=zR.To(r,()=>new Int32Array(n));for(let e=0;e<r;++e)for(let i=0;i<n;++i)h[e][i]=this.pps(t+e,s+i);this.lq().Cfs(this.Yfs(),t,s,r,n,h)}pps(t,s){const e=this.LB().kB(),i=this.Vfs,r=this.jfs,n=this.Bc.Ak();if(hA.set(t*i-r,s*i-r,(t+1)*i+r,(s+1)*i+r),0===this.Ods){if(n.ENt(hA))return nA}else{n.$$(e,this.VIt.fcs(),hA,oA);for(let t=0,s=oA.length;t<s;++t)if(n.ONt(hA,oA[t]))return zR.bh(oA),nA;zR.bh(oA)}let h=0;const o=this.VIt.Eds();for(const{BIt:t,aps:s}of o){if(n.eCt(e,t,hA,oA),oA.length>0){const t=new Set;for(let e=0,i=oA.length;e<i;++e){const i=oA[e];t.has(i)||n.ONt(hA,i)&&(h+=s,t.add(i))}}zR.bh(oA)}return Math.min(h,nA)}async cps(){if(this.Kds&&!this.eps){this.Kds=!1;const t=this.Qds;this.Qds=[];const s=this.LB();await this.gps(s.YM(),s.KM(),this.tps,this.sps);for(const s of t)s()}}yps(t,s,e){let i=1/0,r=0,n=0;for(let h=0,o=this.Yds;h<o;++h)for(let o=0,a=this.Xds;o<a;++o)if(t.a6t(h,o)!==nA){const t=s-h,a=e-o,l=t*t+a*a;l<i&&(i=l,r=h,n=o)}return[r,n]}async gps(t,s,e,i,r=!1){const n=this.ops();if(!n.Rs())return!1;const h=n.Jfs();this.ips=!0,this.rps=e,this.nps=i;const o=this.Vfs,a=Math.floor(t/o),l=Math.floor(s/o);let u=Math.floor(e/o),c=Math.floor(i/o);h.a6t(u,c)===nA&&([u,c]=this.yps(h,u,c));const f=await this.lq().wds(this.Yfs(),a,l,u,c,this.Bds);if(!this.eps){if(this.ips=!1,this.Uds=0,null===f)zR.bh(this.Zds),this.jds=!1,this.$ds=!1,r||await this.KB(zR.yut.pds.t$.wps);else{const t=this.Vfs;this.Zds=f.map(s=>({x:(s.x+.5)*t,y:(s.y+.5)*t})),this.jds=this.Zds.length>0,r||await this.KB(zR.yut.pds.t$.Sps)}r||this.cps()}}vps(){return this.Zds}sot(t){switch(t){case ZR:return this.bps();case KR:return this.Mps();case QR:return this.Tps();case tA:return zR.sn(this.xps());case sA:return this.Nds;case eA:return this.ops().Qfs();case rA:return this.EGt()}}oot(t,s){switch(t){case ZR:this.Cps(s);break;case KR:this.Gps(s);break;case QR:this._ps(s);break;case tA:this.Ips(zR.tn(s));break;case sA:this.Nds=!!s;break;case eA:this.ops().Kfs(!!s);break;case rA:this.RGt(s)}}async Pps(t,s){if(!this.Obt)return;const e=this.ops();if(this.ips||!e.Rs())await new Promise(e=>{this.Kds=!0,this.Qds.push(e),this.tps=t,this.sps=s});else{const e=this.LB();await this.gps(e.YM(),e.KM(),t,s)}}Rps(){if(!this.jds)return;this.$ds&&(this.Vds=!0),this.Wds=!this.$ds,this.$ds=!0;const t=this.LB();this.Hds=t.YM(),this.qds=t.KM(),this.Jds=t.FV()}Aps(){this.$ds=!1}Cps(t){this.Fds=t}bps(){return this.Fds}Eps(t){this.zds=zR.Kr(t,0,this.Fds)}Ops(){return this.Fps()?this.zds:0}Gps(t){this.Dds=t}Mps(){return this.Dds}_ps(t){this.Lds=t}Tps(){return this.Lds}Ips(t){this.kds=t}xps(){return this.kds}Dps(){return this.ips}Fps(){return this.$ds}Lps(){return this.jds}kps(){return this.Io}Nps(){return this.Zds.length}Bps(){return this.Uds}$ps(t){return(t=Math.floor(t))<0||t>=this.Zds.length?null:this.Zds[t]}Wps(t){const s=this.$ps(t);return s?s.x:0}Vps(t){const s=this.$ps(t);return s?s.y:0}jps(t){if(t<0||t>2)throw new Error("invalid direct movement mode");this.Bds=t}Ups(){return this.Bds}RGt(t){this.Obt=!!t,this.Obt?(this.nPt(),this.oPt()):(this.jIt(),this.UIt())}EGt(){return this.Obt}lPt(){const t="behaviors.pathfinding";return[{title:"$"+this.fq().Rc(),properties:[{name:t+".debugger.has-path",value:this.jds},{name:t+".debugger.is-calculating-path",value:this.Dps()},{name:t+".debugger.is-moving",value:this.Fps()},{name:t+".debugger.speed",value:this.Ops(),M0t:t=>this.Eps(t)},{name:t+".debugger.angle-of-motion",value:zR.sn(this.Io),M0t:t=>this.Io=zR.tn(t)},{name:t+".properties.max-speed.name",value:this.bps(),M0t:t=>this.Cps(t)},{name:t+".properties.acceleration.name",value:this.Mps(),M0t:t=>this.Gps(t)},{name:t+".properties.deceleration.name",value:this.Tps(),M0t:t=>this._ps(t)},{name:t+".properties.rotate-speed.name",value:zR.sn(this.xps()),M0t:t=>this.Ips(zR.tn(t))},{name:t+".properties.enabled.name",value:this.EGt(),M0t:t=>this.RGt(t)}]}]}bIt(){return self.zps}};const aA=new WeakMap,lA=["none","to-destination","anywhere-along-path"];self.zps=class extends qR{constructor(){super();const t=qR.mU().eq();aA.set(this,t),Object.defineProperties(this,{map:{value:t.ops().zIt(),writable:!1}})}async Hps(t,s){HR.ii(t),HR.ii(s);const e=aA.get(this);return await e.Pps(t,s),e.Lps()}async qps(t,s,e,i){HR.ii(t),HR.ii(s),HR.ii(e),HR.ii(i);const r=aA.get(this);return await r.gps(t,s,e,i,!0),r.Lps()}Jps(){aA.get(this).Rps()}stop(){aA.get(this).Aps()}set Yps(t){HR.ii(t),aA.get(this).Cps(t)}get Yps(){return aA.get(this).bps()}set speed(t){HR.ii(t),aA.get(this).Eps(t)}get speed(){return aA.get(this).Ops()}set acceleration(t){HR.ii(t),aA.get(this).Gps(t)}get acceleration(){return aA.get(this).Mps()}set Xps(t){HR.ii(t),aA.get(this)._ps(t)}get Xps(){return aA.get(this).Mps()}set Zps(t){HR.ii(t),aA.get(this).Ips(t)}get Zps(){return aA.get(this).xps()}get Kps(){return aA.get(this).Dps()}get Qps(){return aA.get(this).Fps()}get currentNode(){return aA.get(this).Bps()}tms(){return aA.get(this).Nps()}sms(t){return HR.ii(t),aA.get(this).Wps(t)}ems(t){return HR.ii(t),aA.get(this).Vps(t)}ims(t){HR.ii(t);const s=aA.get(this).$ps(t);return s?[s.x,s.y]:[0,0]}*rms(){const t=aA.get(this);for(let s=0,e=t.Nps();s<e;++s){const e=t.$ps(s);yield[e.x,e.y]}}set nms(t){HR.oi(t);const s=lA.indexOf(t);if(-1===s)throw new Error(`invalid direct movement mode '${t}'`);aA.get(this).jps(s)}get nms(){return lA[aA.get(this).Ups()]}set isEnabled(t){aA.get(this).RGt(!!t)}get isEnabled(){return aA.get(this).EGt()}}}{const uA=self._s,cA=2147483647;uA.yut.pds.t$={Sps:()=>!0,wps:()=>!0,hms(t,s){return this.ops().Jfs().a6t(t,s)===cA},oms(){return this.Dps()},Yus(){return this.Fps()},lps:()=>!0,Xus(t,s){return uA.compare(this.Fps()?this.Ops():0,t,s)},ams(){return this.ops().Qfs()},_u(){return this.EGt()}}}{const fA=self._s;fA.yut.pds.wht={wds(t,s){return this.Pps(t,s)},lms(){this.Rps()},nJ(){this.Aps()},I_t(t){this.RGt(0!==t)},ucs(t){const s=this.Kxt().fcs();if(!s.includes(t)){for(const e of s)if(e.v1()&&e.CV(t))return;s.push(t)}},ccs(){fA.bh(this.VIt.fcs())},Xfs(t){this.ops().Xfs(t)},ums(t,s){const e=this.Kxt().Eds();for(const s of e){const e=s.BIt;if(e===t)return;if(e.v1()&&e.CV(t))return}e.push({BIt:t,aps:s})},cms(){fA.bh(this.VIt.Eds())},ods(t,s,e){if(t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),t<=0||s<=0||e<=0)return;const i=this.ops();i&&i.ods(t,s,e)},ads(){const t=this.ops();t&&t.ads()},fms(t){this.Cps(t)},Zus(t){this.Eps(t)},dms(t){this.Gps(t)},pms(t){this._ps(t)},mms(t){this.Ips(fA.tn(t))},Kfs(t){this.ops().Kfs(0!==t)},gms(t){this.jps(t)},async yms(){const t=this.ops();t.tds(!0),await t.ids()},async wms(t,s,e,i){const r=this.ops();r.nds(t,s,e,i)&&await r.ids()},async Sms(t){if(!t)return;const s=this.ops();s.hds(t)&&await s.ids()}}}{const dA=self._s;dA.yut.pds.Sht={vms(){return this.Nps()},bms(t){return this.Wps(t)},Mms(t){return this.Vps(t)},Tms(){return this.Vfs},xms(){return this.Hds},Cms(){return this.qds},Gms(){return this.bps()},_ms(){return this.Mps()},Ims(){return this.Tps()},Pms(){return dA.sn(this.xps())},ocs(){return dA.sn(this.kps())},Rms(){return this.Bps()},hcs(){return this.Ops()}}}{const pA=self._s;pA.yut.gut=class extends pA.ZPt{constructor(t){super(t)}qr(){super.qr()}}}{const mA=self._s;mA.yut.gut.dEt=class extends mA.eRt{constructor(t){super(t)}qr(){super.qr()}vIt(){}}}{const gA=self._s,yA=gA.yut.gut,wA=0;yA.Instance=class extends gA.rRt{constructor(t,s){super(t),this.Ams=!1,this.du=!0,s&&(this.Ams=!1,this.du=!!s[wA]),this.Ems=new Map,this.Oms=[],this.Fms=new Map,this.Dms=null,this.Lms=null,this.kms=null,this.Nms=null,this.Bms="",this.$ms=[],this.f8=t=>this.d8(),this.l$().Sf().addEventListener("afterload",this.f8)}qr(){this.l$().Sf().removeEventListener("afterload",this.f8),this.f8=null,this.Dms&&(this.Wms(this.Dms),this.Dms=null),this.Vms(),this.jms=null,this.Ums(),this.Oms=null,this.zms(),this.Fms=null,this.$ms=null,super.qr()}but(t){this.$ms.push(t)}Mut(){this.$ms.pop()}Hms(){return this.$ms[this.$ms.length-1]}I_t(t){this.du=!!t,t?this.Fms&&this.Fms.size&&this.oPt():this.UIt();for(const s of this.qms())t?this.Jms(s)&&s.hJ():((s.IsPlaying()||s.Tst())&&this.Yms(s),s.nJ());t&&this.Ums()}_u(){return this.du}Yms(t){this.Oms.push(t)}Jms(t){return this.Oms.includes(t)}Ums(){gA.bh(this.Oms)}Xms(){return this.Dms}qet(){const t=this.mq();return!!t&&!t.SY()}Zms(t,s,e=!1){const i=s?this.Kms(s,e):this.qms(e);if(i&&i.length)for(const s of i)if(s.oJ(t))return s}Qms(t,s){for(const e of this.Ems.values())for(const i of e)if(!i.iJ()&&i.oJ(t)&&s(i))return!0;for(const e of this.Fms.values())for(const i of e)if(!i.iJ()&&i.oJ(t)&&s(i))return!0;return!1}tgs(t){for(const s of this.Ems.values())for(const e of s)if(!e.iJ()&&t(e))return!0;for(const s of this.Fms.values())for(const e of s)if(!e.iJ()&&t(e))return!0;return!1}sgs(t,s){return this.Zms(t,s,!0)}*egs(t,s,e=!1){const i=s?this.Kms(s,e):this.qms(e);if(i&&i.length)for(const s of i)s.oJ(t)&&(yield s)}*igs(t,s){yield*this.egs(t,s,!0)}Kms(t,s){if(s){let s=this.Ems.get(t),e=this.Fms.get(t);return s||(s=[]),e||(e=[]),s.concat(e).filter(t=>t).filter(t=>!t.iJ())}{let s=this.Ems.get(t);return s||(s=[]),s.filter(t=>t).filter(t=>!t.iJ())}}qms(t){if(t){const t=[...this.Ems.values()].flat(),s=[...this.Fms.values()].flat();return t.concat(s).filter(t=>t).filter(t=>!t.iJ())}return[...this.Ems.values()].flat().filter(t=>t).filter(t=>!t.iJ())}rgs(){return this.qms(!0)}aT(t="full"){return{s:!1,e:!!this.du,at:this.ngs(),dt:this.hgs(),wt:this.ogs(),ft:this.ags()}}lT(t,s="full"){t&&(this.Lms=t.at,this.kms=t.dt,this.Nms=t.wt,this.Bms=t.ft,this.Ams=!1,this.du=!!t.e,"state"===s&&this.d8())}d8(){const t=this.l$().jtt();if(this.lgs(this.Lms,this.Ems,t),this.kms){gA.bh(this.Oms);for(const s of this.kms)this.ugs(this.Oms,s,t)}this.lgs(this.Nms,this.Fms,t),this.Dms=this.cgs(this.Bms,t),this.du?this.Fms&&this.Fms.size&&this.oPt():this.UIt()}lgs(t,s,e){if(t)for(const i in t){let r=s.get(i);r?gA.bh(r):r=[];const n=t[i];for(const t of n)if(this.ugs(r,t.name,e))this.fgs(t.name,t,e);else{const s=gA.Yot.Cut({runtime:this.l$(),json:t});gA.Yot.cit(s,this.mq().CU()),s.eut(t=>this.dgs(t)),s.tut(this),e.H8(s),this.ugs(r,s,e)}s.set(i,r)}}cgs(t,s){return s.j8(t)}ugs(t,s,e){if("string"!=typeof s)return!!t.push(s);{const i=this.cgs(s,e);if(i)return!!t.push(i)}return!1}fgs(t,s,e){if("string"==typeof t){const i=this.cgs(t,e);i&&(i.r4(s),gA.Yot.cit(i,this.mq().CU()),gA.Yot.tut(i,this))}else t.r4(s),gA.Yot.cit(t,this.mq().CU()),gA.Yot.tut(t,this)}ngs(){const t={};for(const[s,e]of this.Ems)t[s]=e.filter(t=>!t.iJ()).map(t=>t.i4());return t}hgs(){return this.Oms.filter(t=>!t.iJ()).map(t=>t.Rc())}ogs(){const t={};for(const[s,e]of this.Fms)t[s]=e.map(t=>t.i4());return t}ags(){return this.Dms?this.Dms.Rc():""}rPt(){this.zms()}pgs(t){const s=yA.ggs.mgs(t.ait,t.Fut,t.Dut,t.Out,t.Rut,this.mq()),e=yA.wgs.ygs(t.ait);yA.wgs.Sgs(e)||this.vgs(t.ait);const i=gA.Yot.Cut({runtime:this.l$(),id:e,tags:t.tags,time:t.time,pq:this.mq(),Iut:!!t.Iut,loop:!!t.loop,Put:!!t.Put,Iq:t.Iq,_ut:t._ut,Gut:s});return i.eut(t=>this.dgs(t)),i.tut(this),this.bgs(i,t.ait),i}Mgs(t){const s=t.OJ();if(this.Ems.has(s)){const e=this.Ems.get(s);if(e){const s=e.indexOf(t);-1!==s&&e.splice(s,1)}}}GJ(t,s=!1){this.Mgs(t),t.iJ()||this.Tgs(t)||(t.nJ(s),this.xgs(t))}vgs(t,s=!1){if(gA.Ze(t)){const e=yA.wgs.ygs(t);if(!this.Ems.has(e))return;const i=this.Ems.get(e),r=this.Xms();for(const t of i)t!==r&&(t.iJ()||this.Tgs(t)||(t.nJ(s),t.qr()));gA.bh(i)}else{const t=this.Xms();for(const e of this.qms())e!==t&&(e.iJ()||this.Tgs(e)||(e.nJ(s),e.qr()));for(const t of this.Ems.keys())gA.bh(this.Ems.get(t)),this.Ems.delete(t);this.Ems.clear()}}Wms(t){this.GJ(t,!0)}Vms(){this.vgs(NaN,!0)}sot(t){if(t===wA)return this.du}oot(t,s){t===wA&&(this.du=!!s)}Cgs(t){const s=t.PJ().Ont();for(const t of s){const s=t.fq();if(s.FEt()===this.constructor)return s}}JU(t,s,e,i){return this.Bc?super.JU(t):s.JU(t,e,i)}dgs(t){let s,e;if(this.Dms=t,yA.t$.Ggs(t),this.l$())s=this.fe,e=this.Bc,this.JU(yA.t$._gs),this.JU(yA.t$.Igs),this.GJ(t);else{if(s=t.PJ(),!s)return;if(s&&s.SY())return;e=s.l$();const i=this.Cgs(t);this.JU(yA.t$._gs,e,s,i),this.JU(yA.t$.Igs,e,s,i),t.nJ()}this.Dms=null,yA.t$.Ggs(null),t.AJ()&&e.wU(s)}bgs(t,s){const e=yA.wgs.ygs(s);this.Ems.has(e)||this.Ems.set(e,[]),this.Ems.get(e).push(t)}xgs(t){const s=t.OJ();this.Fms.has(s)||this.Fms.set(s,[]),this.Fms.get(s).push(t),this.aPt()||this.oPt()}Tgs(t){const s=t.OJ();return!!this.Fms.has(s)&&this.Fms.get(s).includes(t)}zms(){if(this.Fms.size){for(const t of this.Fms.values()){for(const s of t)s.iJ()||s.qr();gA.bh(t)}this.Fms.clear(),this.aPt()&&this.UIt()}}lPt(){return[{title:"$"+this.fq().Rc(),properties:[{name:"behaviors.tween.properties.enabled.name",value:this._u(),M0t:t=>this.I_t(t)}]}]}bIt(){return self.Pgs}}}{const SA=self._s;let vA=null;SA.yut.gut.t$={mut:()=>!0,wut(t){const s=this.Hms();return!!s&&s.oJ(t)},Sut(t){const s=this.Hms();return!!s&&(s.ist()===t||2===t)},vut(t,s){const e=this.Hms();return!!e&&(e.ist()===s||2===s)&&e.oJ(t)},Ggs(t){vA=t},_gs:t=>vA.oJ(t),Igs:()=>!0,IsPlaying(t){return this.Qms(t,SA.Yot.IsPlaying)},yrs(){return this.tgs(SA.Yot.IsPlaying)},bJ(t){return this.Qms(t,SA.Yot.bJ)},Rgs(){return this.tgs(SA.Yot.bJ)},Oq(t,s){return 0===s?this.Qms(t,SA.Yot.Tut):1===s&&this.Qms(t,SA.Yot.xut)},Ags(t){return 0===t?this.tgs(SA.Yot.Tut):1===t&&this.tgs(SA.Yot.xut)}}}{const bA=self._s,MA=self.ju,TA=bA.yut.gut;TA.wht={I_t(t){this.I_t(!!t)},async Egs(...t){if(!this._u()||!this.qet())return;const s=this.pgs(TA.Fgs.Ogs(this,...t));s.Play()&&await s.wJ()},async Dgs(...t){if(!this._u()||!this.qet())return;const s=this.pgs(TA.Fgs.Lgs(this,...t));s.Play()&&await s.wJ()},async kgs(...t){if(!this._u()||!this.qet())return;const s=this.pgs(TA.Fgs.Ngs(this,...t));s.Play()&&await s.wJ()},Bgs(t){if(this._u()&&this.qet())for(const s of this.egs(t))s.nJ()},$gs(){if(this._u()&&this.qet())for(const t of this.qms())t.nJ()},Wgs(t){if(this._u()&&this.qet())for(const s of this.egs(t))s.hJ()},Vgs(){if(this._u()&&this.qet())for(const t of this.qms())t.hJ()},jgs(t){if(this._u()&&this.qet())for(const s of this.egs(t))this.GJ(s)},Ugs(){if(this._u()&&this.qet())for(const t of this.qms())this.GJ(t)},zgs(t,s,e){if(!this._u()||!this.qet())return;const i=bA.yut.gut.wgs.Hgs(s);for(const s of this.egs(t))s.out([i]),s.aut(e,i)},qgs(t,s,e,i){if(!this._u()||!this.qet())return;const r=bA.yut.gut.wgs.Jgs(s);for(const s of this.egs(t))s.out(r),s.aut(e,r[0]),s.aut(i,r[1])},Ygs(t,s){if(this._u()&&this.qet())for(const e of this.egs(t,"value"))e.nut(s,"value")},Xgs(t,s){if(this._u()&&this.qet())for(const e of this.egs(t,"value"))e.out(["value"]),e.aut(s,"value")},Zgs(t,s){if(!this._u()||!this.qet())return;const e=MA.ac(s);for(const s of this.egs(t))s.IJ(e)},Kgs(t){if(!this._u()||!this.qet())return;const s=MA.ac(t);for(const t of this.qms())t.IJ(s)},Qgs(t,s){if(this._u()&&this.qet())for(const e of this.egs(t))e.aJ(s)},tys(t){if(this._u()&&this.qet())for(const s of this.qms())s.aJ(t)},sys(t,s){if(this._u()&&this.qet())for(const e of this.egs(t))e.mJ(s)},eys(t){if(this._u()&&this.qet())for(const s of this.qms())s.mJ(t)},iys(t,s){if(this._u()&&this.qet())for(const e of this.egs(t))e.EJ(!!s)},rys(t){if(this._u()&&this.qet())for(const s of this.qms())s.EJ(!!t)}}}self._s.yut.gut.Sht={nys(t){const s=this.sgs(t);return s?s.YF():0},hys(t){const s=this.sgs(t);return s?s.YF()/s.uJ():0},_ht(t){const s=this.sgs(t);return s?s.gJ():0},oys(t){const s=this.sgs(t,"value");return s?s.DJ("value").FJ():0},kGt(){let t=this.Xms();return t?t.ost():(t=this.Hms(),t?t.ost():"")}};{const xA=self._s,CA=self.ju,GA=["position","size","scale"],_A=["offsetX","offsetY","offsetWidth","offsetHeight","offsetAngle","offsetOpacity","offsetColor","offsetZElevation","offsetScaleX","offsetScaleY"],IA=["value"],PA=[].concat(GA).concat(_A).concat(IA),RA={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},AA=Object.assign({},PA.reduce((t,s)=>Object.assign({},t,{[s]:[s]}),{}),RA);xA.yut.gut.wgs=class{constructor(){}static ays(){return[...CA.Zu()]}static ac(t){return[...CA.Zu()][t]}static ygs(t){return PA[t]}static lys(t){return PA.indexOf(t)}static uys(t){return GA[t]}static Hgs(t){return _A[t]}static cys(t){return IA[t]}static fys(t){return RA[t]}static Jgs(t){return xA.hi(t)?AA[t]:AA[PA[t]]}static dys(t){return!!RA[t]}static pys(t){return"offsetColor"===t}static mys(t){return"offsetAngle"===t}static gys(t){return"offsetOpacity"===t}static Sgs(t){return"value"===t}}}{const EA=self._s,OA=EA.yut.gut,FA=new Map;OA.ggs=class{constructor(){}static mgs(t,s,e,i,r,n){0===FA.size&&this.yys();const h=OA.Sys.wys(t);let o=FA.get(h);return EA.Ze(t)&&(t=OA.wgs.ygs(t)),this.vys(o,t,s,e,i,r,n)}static bys(t,s){return EA.yut.gut.mgs(t).Mys(s)}static yys(){const t=OA.Sys,s=OA.Tys;this.xys(t.Cys,this.Gys,s._ys),this.xys(t.COLOR,this.Iys,s.Pys),this.xys(t.Rys,this.Ays,s.Eys),this.xys(t.Oys,this.Fys,s._ys),this.xys(t.Dys,this.Lys,s._ys)}static xys(t,s,e){FA.set(t,this.kys(t,s,e))}static kys(t,s,e){return{name:t,Nys:s,Mys:e}}static vys(t,s,e,i,r,n,h){return t.Nys(s,t.Mys(e),t.Mys(i),r,n,h)}static Gys(t,s,e,i,r,n){return OA.wgs.fys(t).map((t,n)=>({Aut:"world-instance",ait:t,type:"float",valueType:"numeric",Fut:s[n],Dut:e[n],Out:OA.wgs.ac(i),Rut:r}))}static Iys(t,s,e,i,r,n){return EA.e$.Text&&n.HW()instanceof EA.e$.Text?{Aut:"plugin",Eut:[7],ait:"color",type:"color",valueType:"color",Fut:s,Dut:e,Out:OA.wgs.ac(i),Rut:r}:{Aut:"world-instance",ait:t,type:"color",valueType:"color",Fut:s,Dut:e,Out:OA.wgs.ac(i),Rut:r}}static Ays(t,s,e,i,r,n){return{Aut:"world-instance",ait:t,type:"angle",valueType:"angle",Fut:s,Dut:e,Out:OA.wgs.ac(i),Rut:r}}static Lys(t,s,e,i,r,n){return{Aut:"world-instance",ait:t,type:"float",valueType:"numeric",Fut:s,Dut:e,Out:OA.wgs.ac(i),Rut:r}}static Fys(t,s,e,i,r,n){return{Aut:"value",ait:t,type:"float",valueType:"numeric",Fut:s,Dut:e,Out:OA.wgs.ac(i),Rut:r}}}}{const DA=self._s,LA=DA.yut.gut,kA={Rut:"absolute"},NA=Object.assign({},kA,{tags:"",ait:"",time:0,Out:0,Iut:0,loop:!1,Put:!1,Iq:1}),BA=Object.assign({},NA,{_ut:"current-state",Fut:0,Dut:0}),$A=Object.assign({},NA,{_ut:"current-state",Fut:[0,0],Dut:[0,0]}),WA=Object.assign({},NA,{_ut:"current-state",Fut:[0,0,0],Dut:[0,0,0]}),VA=Object.assign({},BA,{_ut:"start-value"}),jA=0,UA=1,zA=0,HA=1,qA=2;LA.Fgs=class{constructor(){}static Bys(t,s,e,i,r,n,h,o){t.tags=s,t.time=e,t.Out=i,t.Iut=r,t.loop=n,t.Put=h,t.Iq=o}static Ogs(t,s,e,i,r,n,h,o,a,l){const u="string"==typeof e?e:LA.wgs.Hgs(e),c=LA.wgs.pys(u)?WA:BA;return this.Bys(c,s,r,n,h,o,a,l),LA.wgs.pys(u)?(WA.Dut[0]=DA.Rn(i),WA.Dut[1]=DA.An(i),WA.Dut[2]=DA.En(i),WA.ait=LA.wgs.lys(u)):LA.wgs.gys(u)?BA.Dut=i/100:BA.Dut=i,c.ait=LA.wgs.lys(u),c}static Lgs(t,s,e,i,r,n,h,o,a,l,u){this.Bys($A,s,n,h,o,a,l,u);const c="string"==typeof e?e:LA.wgs.uys(e);return $A.Dut[0]=i,$A.Dut[1]=r,$A.ait=LA.wgs.lys(c),$A}static Ngs(t,s,e,i,r,n,h,o,a,l){return this.Bys(VA,s,r,n,h,o,a,l),VA.Fut=e,VA.Dut=i,VA.ait=LA.wgs.lys("value"),VA}}}{const JA=self._s,YA=JA.yut.gut,XA=[];YA.Sys=class{constructor(){}static wys(t){if(0===XA.length){const t=XA;t.push({qA:YA.wgs.dys,result:this.Cys}),t.push({qA:YA.wgs.pys,result:this.COLOR}),t.push({qA:YA.wgs.mys,result:this.Rys}),t.push({qA:YA.wgs.Sgs,result:this.Oys}),t.push({qA:()=>!0,result:this.Dys})}JA.Ze(t)&&(t=JA.yut.gut.wgs.ygs(t));for(const s of XA)if(s.qA(t))return s.result}static get Cys(){return"pair"}static get COLOR(){return"color"}static get Rys(){return"angle"}static get Oys(){return"value"}static get Dys(){return"other"}}}{const ZA=self._s,KA=ZA.yut.gut;KA.Tys=class{constructor(){}static Eys(t){const s=ZA.tn(parseFloat(t));return ZA.Qr(s)}static Pys(t){return t.slice(0)}static _ys(t){return t}}}{let QA=function(t){eE.oi(t);const s=rE.Hu(t);let e;if(e=s?rE.lc(s,null):rE.lc(t,null),-1===e)throw new Error(`invalid ease name '${t}'`);return e},tE=function(t,s=!1){if(!(s&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")};getIndexForEase=QA,ValidateTags=tE;const sE=self._s,eE=self.Ns,iE=self.oq,rE=self.ju,nE=sE.yut.gut,hE=new WeakMap,oE=new Map([["x",{name:"offsetX",type:"one"}],["y",{name:"offsetY",type:"one"}],["width",{name:"offsetWidth",type:"one"}],["height",{name:"offsetHeight",type:"one"}],["angle",{name:"offsetAngle",type:"one"}],["opacity",{name:"offsetOpacity",type:"one"}],["color",{name:"offsetColor",type:"color"}],["z-elevation",{name:"offsetZElevation",type:"one"}],["x-scale",{name:"offsetScaleX",type:"one"}],["y-scale",{name:"offsetScaleY",type:"one"}],["position",{name:"position",type:"two"}],["size",{name:"size",type:"two"}],["scale",{name:"scale",type:"two"}],["value",{name:"value",type:"value"}]]),aE={tags:"",$ys:!1,loop:!1,Put:!1,Iq:1,Fut:0},lE={CJ:QA};self.Pgs=class extends iE{constructor(){super(),hE.set(this,iE.mU().eq())}Wys(t,s,e,i,r){const n=hE.get(this);if(!n._u()||!n.qet())return null;const h=oE.get(t);if(!h)throw new Error("invalid tween property");"one"===h.type||"value"===h.type?eE.Ke(s):(eE.xi(s),"two"===h.type?(eE.Ke(s[0]),eE.Ke(s[1])):"color"===h.type&&(eE.Ke(s[0]),eE.Ke(s[1]),eE.Ke(s[2]))),"angle"===t?s=sE.sn(s):"opacity"===t?s*=100:"color"===t&&(s=sE.Pn(s[0],s[1],s[2]));const o=QA(i);let a;if(eE.ii(e),r=Object.assign({},aE,r),"value"===h.type&&eE.Ke(r.Fut),tE(r.tags,!0),"one"===h.type||"color"===h.type?a=n.pgs(nE.Fgs.Ogs(n,r.tags,h.name,s,e,o,!!r.$ys,!!r.loop,!!r.Put,r.Iq)):"two"===h.type?a=n.pgs(nE.Fgs.Lgs(n,r.tags,h.name,s[0],s[1],e,o,!!r.$ys,!!r.loop,!!r.Put,r.Iq)):"value"===h.type&&(a=n.pgs(nE.Fgs.Ngs(n,r.tags,r.Fut,s,e,o,!!r.$ys,!!r.loop,!!r.Put,r.Iq))),a.tut(n.hRt().eq()),!a.Play())throw new Error("failed to start tween");return a.Lut(n,lE)}*Vys(){const t=hE.get(this);for(const s of t.qms())yield s.Lut(t,lE)}*jys(t){tE(t);const s=hE.get(this);for(const e of s.egs(t))yield e.Lut(s,lE)}get isEnabled(){return hE.get(this)._u()}set isEnabled(t){hE.get(this).I_t(t)}}}{let uE=function(t){return"number"==typeof t?-t:t},cE=function(t,s){return"number"==typeof t&&"number"==typeof s},fE=function(t,s){return cE(t,s)?t+s:t},dE=function(t,s){return cE(t,s)?t-s:t},pE=function(t,s){return cE(t,s)?t*s:t},mE=function(t,s){return cE(t,s)?t/s:t},gE=function(t,s){return cE(t,s)?t%s:t},yE=function(t,s){return cE(t,s)?Math.pow(t,s):t},wE=function(t,s){if("string"==typeof t||"string"==typeof s){let e,i;return e="number"==typeof t?(Math.round(1e10*t)/1e10).toString():t,i="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,e+i}return t&&s?1:0},SE=function(t,s){return cE(t,s)?t||s?1:0:t};unaryminus=uE,bothNumbers=cE,add=fE,subtract=dE,multiply=pE,divide=mE,mod=gE,pow=yE,and=wE,or=SE;const vE=self._s;self.qMt=[t=>{const s=t.iTt(0);return()=>s.PMt()},()=>0,t=>{const s=t.iTt(0),e=t.iTt(1);return()=>s.PMt()+e.OMt()},t=>{const s=t.iTt(0),e=t.iTt(1);return()=>s.PMt()+e.PMt()},()=>"Camera Movement",()=>"Basic First Person Camera Looking",t=>{const s=t.iTt(0).TMt();return()=>s()},t=>{const s=t.iTt(0).TMt(),e=t.iTt(1).HMt();return()=>s()*e.Irt()},()=>15,()=>175,t=>{const s=t.iTt(0),e=t.iTt(1).TMt();return()=>s.PMt()-e()},t=>{const s=t.iTt(0),e=t.iTt(1).TMt();return()=>s.OMt()-e()},()=>180,t=>{const s=t.iTt(0),e=t.iTt(1),i=t.iTt(2);return()=>vE._t(s.PMt(),e.PMt()+i.OMt(),.2)},()=>"Player",()=>"Player 3D Collisions",t=>{const s=t.iTt(0);return()=>s.OMt()},()=>100,()=>-1,t=>{const s=t.iTt(0),e=t.iTt(1).HMt();return()=>s.PMt()+e.Irt()},t=>{const s=t.iTt(0);return()=>s.DMt()+.1},()=>"Down",()=>"None",t=>{const s=t.iTt(0),e=t.iTt(1),i=t.iTt(2).TMt();return()=>s.PMt()-e.OMt()*i()},t=>{const s=t.iTt(0),e=t.iTt(1).TMt();return()=>s.OMt()*e()},t=>{const s=t.iTt(0).HMt();return()=>s.Irt()},()=>"Up",t=>{const s=t.iTt(0),e=t.iTt(1);return()=>s.PMt()-e.DMt()},t=>{const s=t.iTt(0);return()=>s.DMt()},t=>{const s=t.iTt(0),e=t.iTt(1);return()=>s.PMt()-e.OMt()},()=>10,t=>{const s=t.iTt(0),e=t.iTt(1);return()=>s.PMt()-e.OMt()-1},t=>{const s=t.iTt(0);return()=>s.PMt()+1},t=>{const s=t.iTt(0),e=t.iTt(1).HMt();return()=>s.PMt()+e.Irt()+1},t=>{const s=t.iTt(0).HMt(),e=t.iTt(1).HMt(),i=t.iTt(2).HMt();return()=>vE._t(s.Irt(),e.Irt(),i.Irt())},t=>{const s=t.iTt(0).HMt(),e=t.iTt(1).HMt();return()=>vE._t(s.Irt(),0,e.Irt())},t=>{const s=t.iTt(0);return()=>s.PMt()-90},t=>{const s=t.iTt(0);return()=>s.PMt()-180},t=>{const s=t.iTt(0);return()=>s.PMt()+90},t=>{const s=t.iTt(0).HMt();return()=>-s.Irt()},()=>"Jump On Land",()=>"Coyote Jump",()=>"Shooting",()=>"Solid",()=>"",t=>{const s=t.iTt(0).TMt(),e=t.iTt(1);return()=>s()-e.PMt()},t=>{const s=t.iTt(0),e=t.iTt(1),i=t.iTt(2);return()=>Math.sqrt(Math.pow(s.OMt(),2)+Math.pow(e.OMt(),2)+Math.pow(i.OMt(),2))},t=>{const s=t.iTt(0),e=t.iTt(1).HMt(),i=t.iTt(2).HMt();return()=>s.OMt()/e.Irt()*i.Irt()},t=>{const s=t.iTt(0).TMt(),e=t.iTt(1);return()=>s()-e.PMt()/2},t=>{const s=t.iTt(0),e=t.iTt(1),i=t.iTt(2).TMt();return()=>s.PMt()+e.OMt()*i()},()=>"Colt Shoot",t=>{const s=t.iTt(0),e=t.iTt(1),i=t.iTt(2),r=t.iTt(3);return()=>vE.nn(s.PMt(),e.PMt(),i.OMt(),r.OMt())},()=>"Player Hand Animations",()=>"Colt Reload",()=>"Colt Shoot Return",()=>"Colt Idle",()=>"Zombie Code",()=>"Zombie Initialization",()=>"See Through",()=>"Editor",()=>600,t=>{const s=t.iTt(0);return()=>s.PMt()+96},()=>"Zombie AI",()=>"searching",()=>"chase",t=>{const s=t.iTt(0),e=t.iTt(1),i=t.iTt(2),r=t.iTt(3);return()=>vE.sn(vE.an(s.PMt(),e.PMt(),i.PMt(),r.PMt()))},()=>"wander",t=>{const s=t.iTt(0).TMt(),e=t.iTt(1),i=t.iTt(2);return()=>s(e.OMt()-30,i.OMt()+30)},()=>1,t=>{const s=t.iTt(0),e=t.iTt(1),i=t.iTt(2),r=t.iTt(3);return()=>vE.sn(vE.an(s.PMt(),e.PMt(),i.PMt(),r.PMt()))-180},t=>{const s=t.iTt(0).TMt();return()=>100*s()},()=>1200,t=>{const s=t.iTt(0).TMt();return()=>s(1,10)},t=>{const s=t.iTt(0).TMt();return()=>150*s()},t=>{const s=t.iTt(0);return()=>s.WMt()},()=>"Zombie Combat",()=>"Environment",()=>"Fogexponential",()=>40,()=>75,()=>150,()=>"Interactable Objects",t=>{const s=t.iTt(0).TMt(),e=t.iTt(1).HMt();return()=>s(e.Irt(),0,"_")},()=>"translate",t=>{const s=t.iTt(0),e=t.iTt(1).TMt(),i=t.iTt(2).TMt(),r=t.iTt(3).TMt(),n=t.iTt(4).HMt();return()=>s.PMt()+e(i(r(n.Irt(),1,"_"),0,","))},t=>{const s=t.iTt(0),e=t.iTt(1).TMt(),i=t.iTt(2).TMt(),r=t.iTt(3).TMt(),n=t.iTt(4).HMt();return()=>s.PMt()+e(i(r(n.Irt(),1,"_"),1,","))},t=>{const s=t.iTt(0).TMt(),e=t.iTt(1).TMt(),i=t.iTt(2).TMt(),r=t.iTt(3).HMt();return()=>s(e(i(r.Irt(),3,"_"),1,","))},t=>{const s=t.iTt(0),e=t.iTt(1).TMt(),i=t.iTt(2).TMt(),r=t.iTt(3).TMt(),n=t.iTt(4).HMt();return()=>s.PMt()+e(i(r(n.Irt(),1,"_"),2,","))},t=>{const s=t.iTt(0).TMt(),e=t.iTt(1).TMt(),i=t.iTt(2).TMt(),r=t.iTt(3).HMt();return()=>s(e(i(r.Irt(),1,"_"),3,","))},()=>"raycast",t=>{const s=t.iTt(0).TMt(),e=t.iTt(1).HMt();return()=>s(e.Irt(),1,"_")},()=>"interact",()=>"look",t=>{const s=t.iTt(0),e=t.iTt(1).TMt();return()=>s.PMt()-1e3*e()},()=>.01,t=>{const s=t.iTt(0).TMt();return()=>s(0,20)},t=>{const s=t.iTt(0).HMt();return()=>3*Math.floor(s.Irt())},t=>{const s=t.iTt(0),e=t.iTt(1).TMt();return()=>s.PMt()+e(-2e3,2e3)},t=>{const s=t.iTt(0).TMt();return()=>s("small","medium","large","xlarge")},t=>{const s=t.iTt(0),e=t.iTt(1).TMt();return()=>s.OMt()+e(500,800)},t=>{const s=t.iTt(0).TMt();return()=>s(16,64)},()=>-64,t=>{const s=t.iTt(0);return()=>s.DMt()+.01},()=>"Animation 1",()=>6,()=>"4 deaths",()=>-100,()=>"6 deaths",()=>"color",()=>3,()=>30,()=>"Blank Room",()=>"clean",()=>"2 deaths",()=>-1023,()=>.5,()=>16777215,()=>2,()=>4,()=>5,()=>"ReplaceOn",()=>"ReplaceOff",()=>"Skybox",()=>10013404,()=>3426641,()=>7,()=>15178474,()=>4916787,()=>10066410,()=>56,()=>9901,t=>{const s=t.iTt(0).TMt(),e=t.iTt(1);return()=>s(e.OMt())},()=>9902,()=>8,()=>"Tower",()=>-500]}}}),import_c3runtime=__toESM(require_c3runtime()),C32=self._s;self.ozt=function(){return[C32.e$.VZt,C32.e$.Bnt,C32.yut.gns,C32.yut.jns,C32.yut.Kls,C32.e$.y1t,C32.e$.Z1t,C32.e$.y4t,C32.e$.Keyboard,C32.e$.t6t,C32.yut.Wus,C32.yut.acs,C32.yut.pds,C32.e$.$6t,C32.e$.se,C32.yut.gut,C32.e$.K1t,C32.e$.Audio,C32.e$.s$.t$.q5,C32.e$.VZt.wht.TKt,C32.e$.Bnt.Sht.l_t,C32.e$.Bnt.Sht.u_t,C32.e$.Bnt.Sht.YCt,C32.e$.Bnt.wht.dCt,C32.e$.Bnt.wht.sT,C32.yut.gns.wht.kns,C32.yut.jns.wht.Sls,C32.e$.s$.t$.Ud,C32.e$.y1t.t$.FGt,C32.e$.y1t.wht.HGt,C32.e$.y1t.Sht.YCt,C32.e$.y1t.Sht.$2t,C32.e$.y4t.t$.t5t,C32.e$.y4t.wht.m5t,C32.e$.s$.t$.Swt,C32.e$.y4t.t$.Y4t,C32.e$.y4t.t$.c5t,C32.e$.s$.t$.yJt,C32.e$.y4t.Sht.S5t,C32.e$.Bnt.wht.RCt,C32.e$.y4t.Sht.v5t,C32.e$.Bnt.wht.qGt,C32.e$.Bnt.t$.OGt,C32.e$.Bnt.wht.HGt,C32.e$.VZt.wht.IKt,C32.e$.Bnt.Sht.b_t,C32.e$.VZt.Sht.zKt,C32.e$.VZt.Sht.HKt,C32.e$.s$.t$.uJt,C32.e$.VZt.wht.CKt,C32.e$.Bnt.t$.rGt,C32.e$.y1t.t$.OGt,C32.e$.y1t.t$.DGt,C32.e$.y1t.Sht.A_t,C32.e$.y1t.t$.$Ct,C32.e$.y1t.t$.BCt,C32.e$.s$.Sht.RN,C32.e$.y1t.t$.LGt,C32.yut.jns.wht.I_t,C32.e$.y1t.wht.YGt,C32.e$.s$.t$.ivt,C32.e$.Keyboard.t$.G5t,C32.e$.s$.wht.zJt,C32.yut.jns.wht.hls,C32.e$.Keyboard.t$.N5t,C32.e$.Bnt.t$.FGt,C32.e$.Bnt.wht.YGt,C32.yut.Kls.wht.Fus,C32.yut.Kls.t$.Eus,C32.yut.Kls.t$.Aus,C32.e$.s$.wht.KJt,C32.e$.VZt.Sht.RKt,C32.e$.VZt.Sht.AKt,C32.e$.y1t.wht.sT,C32.e$.VZt.Sht.EKt,C32.e$.y1t.wht.OV,C32.e$.VZt.Sht.OKt,C32.e$.y1t.Sht.l_t,C32.e$.VZt.Sht.FKt,C32.e$.y1t.Sht.u_t,C32.e$.VZt.Sht.DKt,C32.e$.y1t.wht.cCt,C32.e$.y1t.wht.wj,C32.e$.s$.t$.vJt,C32.e$.Bnt.wht.T0t,C32.e$.y1t.wht.Xg,C32.e$.Bnt.wht.OV,C32.e$.Keyboard.t$.V5t,C32.e$.Bnt.t$.h0t,C32.e$.Bnt.wht.C0t,C32.e$.Bnt.t$.UGt,C32.yut.acs.wht.ucs,C32.yut.pds.wht.ucs,C32.e$.Bnt.wht.q0t,C32.e$.Bnt.Sht.A_t,C32.e$.Bnt.wht.Xg,C32.e$.Bnt.t$.LGt,C32.yut.Wus.wht.nJ,C32.yut.pds.wht.I_t,C32.yut.Wus.wht.I_t,C32.yut.Kls.wht.Dus,C32.e$.s$.Sht.random,C32.e$.s$.t$.fJt,C32.yut.pds.wht.wds,C32.e$.Bnt.wht.wCt,C32.yut.Wus.wht.Qus,C32.e$.y1t.wht.ECt,C32.yut.Wus.t$.Xus,C32.yut.Wus.wht.Zus,C32.yut.acs.t$.afs,C32.e$.Bnt.wht.FCt,C32.yut.pds.Sht.ocs,C32.e$.y1t.Sht.b_t,C32.yut.pds.t$.Yus,C32.yut.pds.wht.lms,C32.e$.Bnt.t$.$Ct,C32.e$.Bnt.t$.eGt,C32.e$.y1t.wht.jGt,C32.e$.s$.wht.LYt,C32.e$.s$.wht.YJt,C32.e$.y1t.wht.bO,C32.e$.y1t.wht.jCt,C32.e$.s$.Sht.SXt,C32.yut.gut.wht.Dgs,C32.e$.s$.Sht.float,C32.yut.gut.wht.Egs,C32.e$.y1t.wht.FCt,C32.e$.s$.t$.OJt,C32.e$.s$.t$.SJt,C32.e$.s$.Sht.bMt,C32.e$.y1t.wht.D2t,C32.e$.y1t.t$.rGt,C32.e$.Bnt.wht.jGt,C32.e$.Audio.wht.Ght,C32.yut.gut.wht.Ugs,C32.e$.s$.Sht.HXt,C32.e$.Audio.wht.Play,C32.e$.Bnt.wht.kCt,C32.e$.s$.wht.ph,C32.e$.s$.wht.VYt,C32.e$.Bnt.Sht.ColorValue,C32.e$.s$.wht.OYt,C32.e$.s$.Sht.nXt,C32.e$.s$.wht.yYt,C32.e$.s$.wht.HJt,C32.e$.s$.t$.cJt]},self.Pzt=[{"3DCamera":0},{Uys:0},{gns:0},{zys:0},{Hys:0},{qys:0},{Jys:0},{Yys:0},{Xys:0},{$2t:0},{Zys:0},{Kys:0},{Qys:0},{tws:0},{sws:0},{ews:0},{iws:0},{rws:0},{jns:0},{Kls:0},{nws:0},{hws:0},{MRt:0},{ows:0},{aws:0},{lws:0},{toggle:0},{uws:0},{cws:0},{fws:0},{dws:0},{pws:0},{mws:0},{gws:0},{yws:0},{wws:0},{Sws:0},{vws:0},{bws:0},{Mws:0},{Tws:0},{xws:0},{Cws:0},{Gws:0},{_ws:0},{Iws:0},{Pws:0},{Rws:0},{Aws:0},{Ews:0},{Ows:0},{Fws:0},{Dws:0},{Lws:0},{kws:0},{Nws:0},{Bws:0},{$ws:0},{y4t:0},{Keyboard:0},{Wws:0},{Vws:0},{jws:0},{Uws:0},{zws:0},{Hws:0},{qws:0},{Jws:0},{Yws:0},{KNt:0},{Xws:0},{Zws:0},{Kws:0},{Qws:0},{tSs:0},{sSs:0},{pds:0},{eSs:0},{iSs:0},{rSs:0},{nSs:0},{hSs:0},{oSs:0},{aSs:0},{se:0},{lSs:0},{uSs:0},{cSs:0},{fSs:0},{dSs:0},{pSs:0},{mSs:0},{gSs:0},{ySs:0},{wSs:0},{SSs:0},{on:0},{gut:0},{vSs:0},{bSs:0},{"9patch":0},{MSs:0},{TSs:0},{Audio:0},{"3DShapes":0},{xSs:0},{CSs:0},{GSs:0},{_Ss:0},{ISs:0},{PSs:0},{RSs:0},{ASs:0},{ESs:0},{OSs:0},{FSs:0},{DSs:0},{LSs:0},{kSs:0},{NSs:0},{BSs:0},{$Ss:0},{WSs:0},{VSs:0},{jSs:0},{event:0},{USs:0},{zSs:0},{HSs:0},{qSs:0}],self.JSs={YSs:class extends self.cU{},zys:class extends self.I0t{},nws:class extends self.I0t{},dws:class extends self.w2t{},pws:class extends self.P3t{},mws:class extends self.P3t{},gws:class extends self.P3t{},yws:class extends self.P3t{},wws:class extends self.P3t{},Sws:class extends self.P3t{},vws:class extends self.P3t{},bws:class extends self.P3t{},Mws:class extends self.P3t{},Tws:class extends self.P3t{},xws:class extends self.P3t{},Cws:class extends self.P3t{},Gws:class extends self.P3t{},_ws:class extends self.P3t{},Iws:class extends self.P3t{},Pws:class extends self.I0t{},Rws:class extends self.I0t{},Aws:class extends self.I0t{},Ews:class extends self.I0t{},Ows:class extends self.I0t{},Fws:class extends self.I0t{},Dws:class extends self.I0t{},Lws:class extends self.I0t{},kws:class extends self.I0t{},Nws:class extends self.I0t{},Bws:class extends self.I0t{},$ws:class extends self.I0t{},y4t:class extends self.cU{},Keyboard:class extends self.cU{},Jws:class extends self.w2t{},Yws:class extends self.p6t{},KNt:class extends self.I0t{},eSs:class extends self.I0t{},iSs:class extends self.s7t{},nSs:class extends self.w2t{},hSs:class extends self.I0t{},aSs:class extends self.I0t{},se:class extends self.cU{},lSs:class extends self.P3t{},uSs:class extends self.P3t{},cSs:class extends self.P3t{},fSs:class extends self.P3t{},dSs:class extends self.P3t{},pSs:class extends self.I0t{},gSs:class extends self.w2t{},ySs:class extends self.I0t{},wSs:class extends self.I0t{},SSs:class extends self.I0t{},vSs:class extends self.I0t{},bSs:class extends self.I0t{},XSs:class extends self.ZH{},MSs:class extends self.w2t{},TSs:class extends self.I0t{},Audio:class extends self.cU{},ZSs:class extends self.w2t{},xSs:class extends self.w2t{},CSs:class extends self.I0t{}};
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/